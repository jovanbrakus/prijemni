<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Razlika cosÂ² i sinÂ² - Trigonometrijski identiteti</title>
<script>
MathJax = {
  tex: { inlineMath: [['\\(', '\\)'], ['$', '$']], displayMath: [['\\[', '\\]']] },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<script type="text/info" id="logic-scratchpad">
Problem: cosÂ²((x+y)/2) - sinÂ²((x-y)/2) = ?

Step 1: Use half-angle / double-angle power-reduction identities:
  cosÂ²(A) = (1 + cos(2A)) / 2
  sinÂ²(B) = (1 - cos(2B)) / 2

Step 2: Let A = (x+y)/2, so 2A = x+y
  cosÂ²((x+y)/2) = (1 + cos(x+y)) / 2

Step 3: Let B = (x-y)/2, so 2B = x-y
  sinÂ²((x-y)/2) = (1 - cos(x-y)) / 2

Step 4: Subtract:
  (1 + cos(x+y))/2 - (1 - cos(x-y))/2
  = [1 + cos(x+y) - 1 + cos(x-y)] / 2
  = [cos(x+y) + cos(x-y)] / 2

Step 5: Use sum-to-product identity:
  cos(A) + cos(B) = 2Â·cos((A+B)/2)Â·cos((A-B)/2)

  Here A = x+y, B = x-y:
  (A+B)/2 = (x+y+x-y)/2 = x
  (A-B)/2 = (x+y-x+y)/2 = y

  cos(x+y) + cos(x-y) = 2Â·cos(x)Â·cos(y)

Step 6: Final result:
  [2Â·cos(x)Â·cos(y)] / 2 = cos(x)Â·cos(y)

Answer: B) cos x Â· cos y

Verification with x=Ï€/4, y=Ï€/4:
  cosÂ²(Ï€/4) - sinÂ²(0) = (âˆš2/2)Â² - 0 = 1/2
  cos(Ï€/4)Â·cos(Ï€/4) = (âˆš2/2)Â·(âˆš2/2) = 1/2 âœ“

Verification with x=Ï€/3, y=Ï€/6:
  cosÂ²(Ï€/4) - sinÂ²(Ï€/12)
  = 1/2 - sinÂ²(15Â°)
  = 1/2 - ((âˆš6-âˆš2)/4)Â²
  = 1/2 - (8-4âˆš3)/16
  = 1/2 - (2-âˆš3)/4
  = (2 - 2 + âˆš3)/4
  = âˆš3/4

  cos(Ï€/3)Â·cos(Ï€/6) = (1/2)Â·(âˆš3/2) = âˆš3/4 âœ“
</script>
<style>
  *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    background: #0f172a;
    color: #e2e8f0;
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    line-height: 1.7;
    padding: 20px;
    max-width: 860px;
    margin: 0 auto;
  }
  h1 {
    font-size: 2rem;
    font-weight: 800;
    background: linear-gradient(135deg, #60a5fa, #a78bfa);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 4px;
    line-height: 1.3;
  }
  .subtitle {
    color: #94a3b8;
    font-size: 1.05rem;
    margin-bottom: 28px;
  }
  .card {
    background: #1e293b;
    border: 1px solid #334155;
    border-radius: 14px;
    padding: 24px 28px;
    margin-bottom: 22px;
  }
  .card-title {
    font-size: 1.2rem;
    font-weight: 700;
    margin-bottom: 14px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .card-title .icon {
    font-size: 1.3rem;
  }
  .problem-box {
    background: #172033;
    border-left: 4px solid #60a5fa;
    padding: 18px 22px;
    border-radius: 0 10px 10px 0;
    font-size: 1.08rem;
    margin-bottom: 10px;
  }
  .option-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 10px;
    margin-top: 16px;
  }
  .option {
    background: #0f172a;
    border: 1px solid #334155;
    border-radius: 10px;
    padding: 10px 16px;
    font-size: 1rem;
    transition: all 0.2s;
  }
  .option.correct {
    border-color: #34d399;
    background: rgba(52, 211, 153, 0.1);
    box-shadow: 0 0 12px rgba(52, 211, 153, 0.15);
  }
  .plan-list {
    list-style: none;
    counter-reset: plan;
  }
  .plan-list li {
    counter-increment: plan;
    padding: 6px 0 6px 36px;
    position: relative;
  }
  .plan-list li::before {
    content: counter(plan);
    position: absolute;
    left: 0;
    top: 6px;
    width: 26px;
    height: 26px;
    background: linear-gradient(135deg, #60a5fa, #a78bfa);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.82rem;
    font-weight: 700;
    color: #0f172a;
  }
  details {
    background: #172033;
    border: 1px solid #334155;
    border-radius: 10px;
    padding: 14px 20px;
    margin-bottom: 10px;
  }
  details summary {
    cursor: pointer;
    font-weight: 600;
    color: #a78bfa;
    list-style: none;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  details summary::before {
    content: '>';
    display: inline-block;
    transition: transform 0.2s;
    font-family: monospace;
    font-size: 1.1rem;
  }
  details[open] summary::before {
    transform: rotate(90deg);
  }
  details .inner {
    margin-top: 14px;
    padding-top: 14px;
    border-top: 1px solid #334155;
  }
  .step {
    border-left: 3px solid #334155;
    padding: 14px 0 14px 22px;
    margin-left: 12px;
    position: relative;
    margin-bottom: 4px;
  }
  .step::before {
    content: '';
    position: absolute;
    left: -7px;
    top: 18px;
    width: 12px;
    height: 12px;
    background: #60a5fa;
    border-radius: 50%;
    border: 2px solid #0f172a;
  }
  .step:last-child { border-left-color: transparent; }
  .step-label {
    font-weight: 700;
    color: #60a5fa;
    font-size: 1rem;
    margin-bottom: 6px;
  }
  .checkpoint {
    background: rgba(167, 139, 250, 0.1);
    border: 1px dashed #a78bfa;
    border-radius: 10px;
    padding: 12px 18px;
    margin: 12px 0 4px;
    font-size: 0.95rem;
    color: #a78bfa;
  }
  .checkpoint strong { color: #c4b5fd; }
  .final-answer {
    background: linear-gradient(135deg, rgba(52, 211, 153, 0.12), rgba(74, 222, 128, 0.08));
    border: 2px solid #34d399;
    border-radius: 14px;
    padding: 26px 30px;
    text-align: center;
  }
  .final-answer .label {
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: #34d399;
    font-weight: 700;
    margin-bottom: 10px;
  }
  .final-answer .value {
    font-size: 1.7rem;
    font-weight: 800;
    color: #4ade80;
  }
  .insight-box {
    background: rgba(96, 165, 250, 0.08);
    border: 1px solid rgba(96, 165, 250, 0.3);
    border-radius: 12px;
    padding: 18px 22px;
  }
  .insight-box .label {
    font-weight: 700;
    color: #60a5fa;
    margin-bottom: 6px;
    font-size: 1.05rem;
  }
  .pitfall {
    background: rgba(244, 114, 182, 0.08);
    border-left: 4px solid #f472b6;
    border-radius: 0 10px 10px 0;
    padding: 14px 20px;
    margin-bottom: 10px;
  }
  .pitfall strong { color: #f472b6; }
  .challenge-box {
    background: rgba(167, 139, 250, 0.06);
    border: 1px solid rgba(167, 139, 250, 0.25);
    border-radius: 12px;
    padding: 18px 22px;
  }
  .challenge-box .label {
    font-weight: 700;
    color: #a78bfa;
    margin-bottom: 6px;
  }
  canvas {
    display: block;
    margin: 0 auto;
    border-radius: 10px;
    background: #0f172a;
    max-width: 100%;
    touch-action: none;
  }
  .muted { color: #94a3b8; }
  .blue { color: #60a5fa; }
  .green { color: #34d399; }
  .purple { color: #a78bfa; }
  .pink { color: #f472b6; }
  @media (max-width: 600px) {
    body { padding: 12px; }
    h1 { font-size: 1.5rem; }
    .card { padding: 18px 16px; }
    .option-grid { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<h1>Razlika kvadrata kosinusa i sinusa</h1>
<p class="subtitle">Trigonometrijski identiteti &mdash; Pretvaranje izraza sa poluuglovima</p>

<!-- Problem Statement -->
<div class="card">
  <div class="card-title"><span class="icon">ğŸ“‹</span> Zadatak</div>
  <div class="problem-box">
    Razlika \(\cos^2\dfrac{x+y}{2} - \sin^2\dfrac{x-y}{2}\) jednaka je:
  </div>
  <div class="option-grid">
    <div class="option">A) \(\sin(x-y)\)</div>
    <div class="option correct">B) \(\cos x \cos y\)</div>
    <div class="option">C) \(\sin x \cos y\)</div>
    <div class="option">D) \(\sin x \sin y\)</div>
    <div class="option">E) \(\sin(x+y)\)</div>
    <div class="option">N) Ne znam</div>
  </div>
</div>

<!-- Plan -->
<div class="card">
  <div class="card-title"><span class="icon">ğŸ—ºï¸</span> Plan reÅ¡avanja</div>
  <ol class="plan-list">
    <li>Primeni formule za sniÅ¾avanje stepena: \(\cos^2\alpha\) i \(\sin^2\beta\) pretvoriti u izraze sa kosinusima dvostrukih uglova.</li>
    <li>Uprosti razliku &mdash; jedinice se poniÅ¡tavaju.</li>
    <li>Primeni formulu za zbir kosinusa (pretvaranje zbira u proizvod).</li>
    <li>Dobij konaÄan odgovor i proveri sa konkretnim vrednostima.</li>
  </ol>
</div>

<!-- Theory Refresher -->
<div class="card">
  <div class="card-title"><span class="icon">ğŸ“–</span> Teorijska podloga</div>
  <details>
    <summary>Formule za sniÅ¾avanje stepena</summary>
    <div class="inner">
      <p>Ove formule izvode se direktno iz kosinusa dvostrukog ugla \(\cos 2\alpha = 2\cos^2\alpha - 1 = 1 - 2\sin^2\alpha\):</p>
      \[\cos^2\alpha = \frac{1 + \cos 2\alpha}{2}\]
      \[\sin^2\alpha = \frac{1 - \cos 2\alpha}{2}\]
      <p class="muted" style="margin-top:8px;">Ove formule su izuzetno korisne kad treba ukloniti kvadrate trigonometrijskih funkcija.</p>
    </div>
  </details>
  <details>
    <summary>Zbir kosinusa &mdash; pretvaranje u proizvod</summary>
    <div class="inner">
      <p>Formula za zbir dva kosinusa:</p>
      \[\cos A + \cos B = 2\cos\frac{A+B}{2}\cos\frac{A-B}{2}\]
      <p class="muted" style="margin-top:8px;">Specijalni sluÄaj koji Ä‡emo koristiti: \(\cos(x+y) + \cos(x-y) = 2\cos x\cos y\).</p>
    </div>
  </details>
</div>

<!-- Visual Aid -->
<div class="card">
  <div class="card-title"><span class="icon">ğŸ“</span> Vizuelni prikaz</div>
  <p class="muted" style="margin-bottom:14px;">Dijagram pokazuje kako se izraz sa poluuglovima transformiÅ¡e u proizvod. Promeni vrednosti klizaÄima.</p>
  <div style="display:flex;gap:16px;flex-wrap:wrap;margin-bottom:14px;">
    <label style="display:flex;align-items:center;gap:8px;">
      <span class="blue">x =</span>
      <input type="range" id="slider-x" min="0" max="360" value="60" style="width:120px;">
      <span id="val-x" class="blue">60Â°</span>
    </label>
    <label style="display:flex;align-items:center;gap:8px;">
      <span class="purple">y =</span>
      <input type="range" id="slider-y" min="0" max="360" value="30" style="width:120px;">
      <span id="val-y" class="purple">30Â°</span>
    </label>
  </div>
  <canvas id="canvas" width="700" height="320"></canvas>
  <div id="canvas-info" style="margin-top:12px;text-align:center;font-size:0.95rem;color:#94a3b8;"></div>
</div>

<!-- Step-by-step Solution -->
<div class="card">
  <div class="card-title"><span class="icon">âœï¸</span> ReÅ¡enje korak po korak</div>

  <div class="step">
    <div class="step-label">Korak 1: ZapiÅ¡i polazni izraz</div>
    <p>Treba da uprostimo:</p>
    \[\cos^2\frac{x+y}{2} - \sin^2\frac{x-y}{2}\]
  </div>

  <div class="step">
    <div class="step-label">Korak 2: Primeni formule za sniÅ¾avanje stepena</div>
    <p>Za prvi sabirak, neka \(\alpha = \dfrac{x+y}{2}\), pa je \(2\alpha = x+y\):</p>
    \[\cos^2\frac{x+y}{2} = \frac{1 + \cos(x+y)}{2}\]
    <p style="margin-top:10px;">Za drugi sabirak, neka \(\beta = \dfrac{x-y}{2}\), pa je \(2\beta = x-y\):</p>
    \[\sin^2\frac{x-y}{2} = \frac{1 - \cos(x-y)}{2}\]
  </div>

  <div class="step">
    <div class="step-label">Korak 3: IzraÄunaj razliku</div>
    <p>Zameni u polazni izraz:</p>
    \[\frac{1 + \cos(x+y)}{2} - \frac{1 - \cos(x-y)}{2}\]
    <p>Kako imaju isti imenilac, oduzmi brojioce:</p>
    \[= \frac{1 + \cos(x+y) - 1 + \cos(x-y)}{2}\]
    <p>Jedinice se poniÅ¡tavaju:</p>
    \[= \frac{\cos(x+y) + \cos(x-y)}{2}\]
    <div class="checkpoint">
      <strong>Proveri se!</strong> Da li si taÄno raspisao/la razliku razlomaka? Obrati paÅ¾nju na predznak ispred \(\sin^2\) &mdash; minus ispred razlomka menja znak celom brojiocu.
    </div>
  </div>

  <div class="step">
    <div class="step-label">Korak 4: Primeni formulu za zbir kosinusa</div>
    <p>Koristimo poznati identitet:</p>
    \[\cos A + \cos B = 2\cos\frac{A+B}{2}\cos\frac{A-B}{2}\]
    <p>Neka \(A = x+y\) i \(B = x-y\). Tada:</p>
    \[\frac{A+B}{2} = \frac{(x+y)+(x-y)}{2} = \frac{2x}{2} = x\]
    \[\frac{A-B}{2} = \frac{(x+y)-(x-y)}{2} = \frac{2y}{2} = y\]
    <p>Dakle:</p>
    \[\cos(x+y) + \cos(x-y) = 2\cos x \cos y\]
  </div>

  <div class="step">
    <div class="step-label">Korak 5: ZavrÅ¡i raÄunanje</div>
    <p>Vrati u izraz iz Koraka 3:</p>
    \[\frac{\cos(x+y) + \cos(x-y)}{2} = \frac{2\cos x \cos y}{2} = \cos x \cos y\]
    <div class="checkpoint">
      <strong>Proveri se!</strong> Zameni \(x = 60Â°\), \(y = 30Â°\):
      <br>Leva strana: \(\cos^2 45Â° - \sin^2 15Â° = \frac{1}{2} - \sin^2 15Â°\).
      <br>Desna strana: \(\cos 60Â° \cdot \cos 30Â° = \frac{1}{2} \cdot \frac{\sqrt{3}}{2} = \frac{\sqrt{3}}{4}\).
      <br>Oba daju isti rezultat \(\approx 0{,}433\).
    </div>
  </div>
</div>

<!-- Key Insight -->
<div class="card">
  <div class="insight-box">
    <div class="label">KljuÄni uvid</div>
    <p>Kada u izrazu imaÅ¡ <strong>kvadrate trigonometrijskih funkcija poluuglova</strong>, uvek prvo probaj formule za sniÅ¾avanje stepena. One transformiÅ¡u \(\cos^2\alpha\) i \(\sin^2\alpha\) u izraze sa <em>celim</em> uglovima bez kvadrata, Å¡to dramatiÄno pojednostavljuje dalje raÄunanje.</p>
    <p style="margin-top:8px;">Ovde je kljuÄ bio prepoznati da se nakon sniÅ¾avanja stepena pojavljuje <strong>zbir dva kosinusa</strong>, koji se poznatom formulom pretvara u proizvod.</p>
  </div>
</div>

<!-- Final Answer -->
<div class="card">
  <div class="final-answer">
    <div class="label">KonaÄan odgovor</div>
    <div class="value">
      B) \(\;\cos x \cos y\)
    </div>
    <p style="margin-top:14px;color:#94a3b8;font-size:1rem;">
      \(\cos^2\dfrac{x+y}{2} - \sin^2\dfrac{x-y}{2} = \cos x \cos y\)
    </p>
  </div>
</div>

<!-- Common Pitfalls -->
<div class="card">
  <div class="card-title"><span class="icon">âš ï¸</span> NajÄeÅ¡Ä‡e greÅ¡ke</div>
  <div class="pitfall">
    <strong>GreÅ¡ka 1: PogreÅ¡na primena formule za razliku kvadrata.</strong>
    Neki uÄenici pokuÅ¡avaju da koriste \(a^2 - b^2 = (a-b)(a+b)\) direktno, gde je \(a = \cos\frac{x+y}{2}\) i \(b = \sin\frac{x-y}{2}\). Ovo je ispravna algebra, ali vodi ka komplikovanijem putu sa mnogo prostora za greÅ¡ku. Formule za sniÅ¾avanje stepena su elegantniji put.
  </div>
  <div class="pitfall">
    <strong>GreÅ¡ka 2: PogreÅ¡an predznak pri oduzimanju razlomaka.</strong>
    Kada oduzimamo \(\frac{1 - \cos(x-y)}{2}\), mnogi zaborave da promene predznak celom brojiocu. Rezultat treba da bude \(+\cos(x-y)\), ne \(-\cos(x-y)\).
  </div>
  <div class="pitfall">
    <strong>GreÅ¡ka 3: MeÅ¡anje formula za zbir/razliku kosinusa sa zbirom/razlikom sinusa.</strong>
    Zapamti: \(\cos A + \cos B = 2\cos\frac{A+B}{2}\cos\frac{A-B}{2}\), dok je \(\cos A - \cos B = -2\sin\frac{A+B}{2}\sin\frac{A-B}{2}\). Ovde imamo <strong>zbir</strong>, ne razliku!
  </div>
</div>

<!-- Optional Challenge -->
<div class="card">
  <div class="challenge-box">
    <div class="label">Izazov za napredne</div>
    <p>PokuÅ¡aj da reÅ¡iÅ¡ isti zadatak <strong>alternativnim putem</strong>: koristi faktorizaciju razlike kvadrata \(a^2 - b^2 = (a-b)(a+b)\), gde je \(a = \cos\frac{x+y}{2}\) i \(b = \sin\frac{x-y}{2}\). Zatim primeni adicionu formulu:</p>
    <ul style="margin-top:8px;margin-left:20px;color:#94a3b8;">
      <li>Pretvori \(\cos\alpha - \sin\beta\) koristeÄ‡i \(\sin\beta = \cos(90Â° - \beta)\).</li>
      <li>SliÄno za \(\cos\alpha + \sin\beta\).</li>
      <li>PomnoÅ¾i i uprosti.</li>
    </ul>
    <p style="margin-top:10px;" class="muted">Bonus: PokaÅ¾i da \(\cos^2\frac{x+y}{2} + \sin^2\frac{x-y}{2}\) ne daje nijedan od ponuÄ‘enih odgovora u opÅ¡tem sluÄaju. Å ta daje?</p>
  </div>
</div>

<script>
(function() {
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  const sliderX = document.getElementById('slider-x');
  const sliderY = document.getElementById('slider-y');
  const valX = document.getElementById('val-x');
  const valY = document.getElementById('val-y');
  const info = document.getElementById('canvas-info');

  function toRad(deg) { return deg * Math.PI / 180; }

  function draw() {
    const W = canvas.width, H = canvas.height;
    const xDeg = parseInt(sliderX.value);
    const yDeg = parseInt(sliderY.value);
    const xRad = toRad(xDeg);
    const yRad = toRad(yDeg);

    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Compute values
    const lhs = Math.pow(Math.cos((xRad + yRad) / 2), 2) - Math.pow(Math.sin((xRad - yRad) / 2), 2);
    const rhs = Math.cos(xRad) * Math.cos(yRad);
    const cosXplusY = Math.pow(Math.cos((xRad + yRad) / 2), 2);
    const sinXminusY = Math.pow(Math.sin((xRad - yRad) / 2), 2);

    // Draw bar chart comparison
    const barAreaX = 60;
    const barAreaW = W - 120;
    const barAreaY = 50;
    const barAreaH = H - 100;
    const barW = 80;

    // Title
    ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#e2e8f0';
    ctx.textAlign = 'center';
    ctx.fillText('Vizuelno poreÄ‘enje vrednosti', W / 2, 30);

    // Axes
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(barAreaX, barAreaY);
    ctx.lineTo(barAreaX, barAreaY + barAreaH);
    ctx.lineTo(barAreaX + barAreaW, barAreaY + barAreaH);
    ctx.stroke();

    // Scale: values range from -1 to 1
    const scaleY = function(v) {
      return barAreaY + barAreaH - ((v + 1) / 2) * barAreaH;
    };

    // Grid lines
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#64748b';
    ctx.textAlign = 'right';
    for (let v = -1; v <= 1; v += 0.5) {
      const yy = scaleY(v);
      ctx.beginPath();
      ctx.moveTo(barAreaX, yy);
      ctx.lineTo(barAreaX + barAreaW, yy);
      ctx.stroke();
      ctx.fillText(v.toFixed(1).replace('.', ','), barAreaX - 8, yy + 4);
    }

    // Zero line
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    const zeroY = scaleY(0);
    ctx.moveTo(barAreaX, zeroY);
    ctx.lineTo(barAreaX + barAreaW, zeroY);
    ctx.stroke();

    // Bar positions
    const positions = [
      { x: barAreaX + barAreaW * 0.12, label: 'cosÂ²((x+y)/2)', val: cosXplusY, color: '#60a5fa' },
      { x: barAreaX + barAreaW * 0.32, label: 'sinÂ²((x-y)/2)', val: sinXminusY, color: '#f472b6' },
      { x: barAreaX + barAreaW * 0.55, label: 'Razlika (LHS)', val: lhs, color: '#a78bfa' },
      { x: barAreaX + barAreaW * 0.78, label: 'cos x cos y (RHS)', val: rhs, color: '#34d399' },
    ];

    positions.forEach(function(bar) {
      const topY = scaleY(Math.max(bar.val, 0));
      const botY = scaleY(Math.min(bar.val, 0));
      const h = botY - topY;

      ctx.fillStyle = bar.color;
      ctx.globalAlpha = 0.75;
      ctx.beginPath();
      const r = 6;
      if (h > r * 2) {
        ctx.moveTo(bar.x, topY + r);
        ctx.arcTo(bar.x, topY, bar.x + barW, topY, r);
        ctx.arcTo(bar.x + barW, topY, bar.x + barW, topY + r, r);
        ctx.lineTo(bar.x + barW, botY);
        ctx.lineTo(bar.x, botY);
      } else {
        ctx.rect(bar.x, topY, barW, Math.max(h, 2));
      }
      ctx.fill();
      ctx.globalAlpha = 1;

      // Value label
      ctx.fillStyle = bar.color;
      ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      const labelY = bar.val >= 0 ? topY - 8 : botY + 16;
      ctx.fillText(bar.val.toFixed(4).replace('.', ','), bar.x + barW / 2, labelY);

      // Bar name
      ctx.fillStyle = '#94a3b8';
      ctx.font = '11px Segoe UI, system-ui, sans-serif';
      ctx.fillText(bar.label, bar.x + barW / 2, barAreaY + barAreaH + 20);
    });

    // Equality indicator
    const diff = Math.abs(lhs - rhs);
    const eqText = diff < 1e-10 ? 'LHS = RHS' : 'LHS â‰ˆ RHS';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#4ade80';
    ctx.textAlign = 'center';
    ctx.fillText(eqText + ' (razlika: ' + diff.toExponential(1).replace('.', ',') + ')', W / 2, barAreaY + barAreaH + 50);

    // Info text
    info.innerHTML =
      '<span style="color:#60a5fa">cosÂ²(' + ((xDeg + yDeg) / 2).toFixed(1).replace('.', ',') + 'Â°)</span> - ' +
      '<span style="color:#f472b6">sinÂ²(' + ((xDeg - yDeg) / 2).toFixed(1).replace('.', ',') + 'Â°)</span> = ' +
      '<span style="color:#a78bfa">' + lhs.toFixed(6).replace('.', ',') + '</span> &nbsp;=&nbsp; ' +
      '<span style="color:#34d399">cos ' + xDeg + 'Â° &middot; cos ' + yDeg + 'Â° = ' + rhs.toFixed(6).replace('.', ',') + '</span>';
  }

  sliderX.addEventListener('input', function() {
    valX.textContent = sliderX.value + 'Â°';
    draw();
  });

  sliderY.addEventListener('input', function() {
    valY.textContent = sliderY.value + 'Â°';
    draw();
  });

  // Touch support
  canvas.addEventListener('touchstart', function(e) { e.preventDefault(); }, { passive: false });

  // Responsive canvas
  function resizeCanvas() {
    const container = canvas.parentElement;
    const maxW = container.clientWidth - 56;
    if (maxW < 700) {
      canvas.style.width = maxW + 'px';
      canvas.style.height = (maxW * 320 / 700) + 'px';
    }
  }
  window.addEventListener('resize', resizeCanvas);
  resizeCanvas();

  draw();
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{"title":"Razlika cosÂ²((x+y)/2) - sinÂ²((x-y)/2)","subject":"math","unit":"trigonometry","topic_tags":["trigonometrijski identiteti","sniÅ¾avanje stepena","zbir kosinusa","pretvaranje zbira u proizvod","poluuglovi"]}
BRAINSPARK_META-->