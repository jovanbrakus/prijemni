<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zajednička tangenta kruga i elipse</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM: Line y = kx + n is a common tangent to circle x² + y² = 4 and ellipse 2x² + 5y² = 10.
Find k² + n².

STEP 1: Circle x² + y² = 4 has center (0,0) and radius r = 2.
Tangent condition: distance from center to line y = kx + n (i.e., kx - y + n = 0) equals radius.
|n| / √(1 + k²) = 2
n² / (1 + k²) = 4
n² = 4(1 + k²)
n² = 4 + 4k²  ... (I)

STEP 2: Ellipse 2x² + 5y² = 10, i.e., x²/5 + y²/2 = 1.
Here a² = 5, b² = 2.
Substitute y = kx + n into the ellipse equation:
2x² + 5(kx + n)² = 10
2x² + 5(k²x² + 2knx + n²) = 10
2x² + 5k²x² + 10knx + 5n² = 10
(2 + 5k²)x² + 10knx + (5n² - 10) = 0

For tangency, discriminant = 0:
(10kn)² - 4(2 + 5k²)(5n² - 10) = 0
100k²n² - 4(10n² - 20 + 25k²n² - 50k²) = 0
100k²n² - 40n² + 80 - 100k²n² + 200k² = 0
-40n² + 80 + 200k² = 0
-40n² + 200k² = -80
40n² - 200k² = 80
n² - 5k² = 2
n² = 5k² + 2  ... (II)

STEP 3: From (I) and (II):
4 + 4k² = 5k² + 2
4 - 2 = 5k² - 4k²
2 = k²
k² = 2

STEP 4: Back-substitute:
n² = 4 + 4(2) = 4 + 8 = 12

STEP 5: k² + n² = 2 + 12 = 14

ANSWER: E) 14
</script>

<script>
MathJax = {
  tex: { inlineMath: [['\\(', '\\)'], ['$', '$']], displayMath: [['\\[', '\\]']] },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

<style>
*, *::before, *::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 1rem;
  min-height: 100vh;
}

.container {
  max-width: 800px;
  margin: 0 auto;
  padding: 1rem 0;
}

h1 {
  font-size: clamp(1.5rem, 4vw, 2.2rem);
  font-weight: 700;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-align: center;
  margin-bottom: 0.25rem;
}

.subtitle {
  text-align: center;
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 2rem;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
}

.card-title {
  font-size: 1.15rem;
  font-weight: 600;
  color: #60a5fa;
  margin-bottom: 0.75rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.card-title .icon {
  font-size: 1.3rem;
}

.problem-statement {
  background: #1e293b;
  border: 2px solid #a78bfa;
  border-radius: 14px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  font-size: 1.1rem;
}

.problem-statement .card-title {
  color: #a78bfa;
}

.options-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 0.5rem;
  margin-top: 1rem;
}

.option {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 8px;
  padding: 0.5rem 0.75rem;
  text-align: center;
  font-size: 1rem;
  transition: border-color 0.2s;
}

.option.correct {
  border-color: #4ade80;
  background: rgba(74, 222, 128, 0.1);
  color: #4ade80;
  font-weight: 600;
}

.plan-list {
  list-style: none;
  counter-reset: plan;
}

.plan-list li {
  counter-increment: plan;
  padding: 0.4rem 0 0.4rem 2.2rem;
  position: relative;
}

.plan-list li::before {
  content: counter(plan);
  position: absolute;
  left: 0;
  top: 0.4rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  width: 1.6rem;
  height: 1.6rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.85rem;
}

details {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  margin-bottom: 1.5rem;
}

details summary {
  padding: 1rem 1.5rem;
  cursor: pointer;
  font-weight: 600;
  color: #a78bfa;
  list-style: none;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

details summary::-webkit-details-marker { display: none; }

details summary::before {
  content: '\25B6';
  font-size: 0.75rem;
  transition: transform 0.2s;
}

details[open] summary::before {
  transform: rotate(90deg);
}

details .detail-content {
  padding: 0 1.5rem 1.5rem;
}

.step {
  border-left: 3px solid #334155;
  padding-left: 1.25rem;
  margin-bottom: 1.5rem;
  position: relative;
}

.step::before {
  content: '';
  position: absolute;
  left: -7px;
  top: 0;
  width: 11px;
  height: 11px;
  border-radius: 50%;
  background: #60a5fa;
}

.step-title {
  font-weight: 600;
  color: #60a5fa;
  margin-bottom: 0.4rem;
  font-size: 1.05rem;
}

.checkpoint {
  background: rgba(163, 130, 250, 0.1);
  border: 1px solid #a78bfa;
  border-radius: 10px;
  padding: 0.75rem 1rem;
  margin: 0.75rem 0;
  font-size: 0.95rem;
  color: #a78bfa;
}

.checkpoint-label {
  font-weight: 700;
  margin-right: 0.25rem;
}

.canvas-wrap {
  text-align: center;
  margin: 1rem 0;
}

canvas {
  border-radius: 12px;
  background: #0f172a;
  border: 1px solid #334155;
  max-width: 100%;
  touch-action: none;
}

.final-answer {
  background: rgba(74, 222, 128, 0.08);
  border: 2px solid #4ade80;
  border-radius: 14px;
  padding: 1.5rem;
  text-align: center;
  margin-bottom: 1.5rem;
}

.final-answer .label {
  font-size: 0.95rem;
  color: #94a3b8;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  margin-bottom: 0.5rem;
}

.final-answer .value {
  font-size: 1.6rem;
  font-weight: 700;
  color: #4ade80;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid #60a5fa;
  border-radius: 14px;
  padding: 1.25rem 1.5rem;
  margin-bottom: 1.5rem;
}

.insight-box .card-title {
  color: #60a5fa;
}

.pitfall {
  background: rgba(244, 114, 182, 0.08);
  border: 1px solid #f472b6;
  border-radius: 10px;
  padding: 0.75rem 1rem;
  margin-bottom: 0.75rem;
}

.pitfall strong {
  color: #f472b6;
}

.challenge-box {
  background: rgba(52, 211, 153, 0.08);
  border: 1px dashed #34d399;
  border-radius: 14px;
  padding: 1.25rem 1.5rem;
  margin-bottom: 1rem;
}

.challenge-box .card-title {
  color: #34d399;
}

.muted {
  color: #94a3b8;
}

.highlight {
  color: #4ade80;
  font-weight: 600;
}

mjx-container {
  overflow-x: auto;
}

@media (max-width: 600px) {
  body { padding: 0.5rem; }
  .card, .problem-statement, details .detail-content, .final-answer,
  .insight-box, .challenge-box { padding: 1rem; }
  .options-grid { grid-template-columns: repeat(3, 1fr); }
}
</style>
</head>
<body>
<div class="container">

  <!-- TITLE -->
  <h1>Zajednička tangenta kruga i elipse</h1>
  <p class="subtitle">Analitička geometrija &mdash; konike</p>

  <!-- PROBLEM STATEMENT -->
  <div class="problem-statement">
    <div class="card-title"><span class="icon">&#128220;</span> Zadatak</div>
    <p>Ako je prava \(y = kx + n\) zajednička tangenta kruga \(x^2 + y^2 = 4\) i elipse \(2x^2 + 5y^2 = 10\), tada je \(k^2 + n^2\) jednako:</p>
    <div class="options-grid">
      <div class="option">A) \(4\)</div>
      <div class="option">B) \(7\)</div>
      <div class="option">C) \(6\)</div>
      <div class="option">D) \(5\)</div>
      <div class="option correct">E) \(14\)</div>
      <div class="option">N) Ne znam</div>
    </div>
  </div>

  <!-- PLAN -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128204;</span> Plan rešavanja</div>
    <ol class="plan-list">
      <li>Napisati uslov tangentnosti prave na krug (rastojanje centra od prave = poluprečnik)</li>
      <li>Napisati uslov tangentnosti prave na elipsu (diskriminanta = 0 nakon supstitucije)</li>
      <li>Rešiti sistem dve jednačine po \(k^2\) i \(n^2\)</li>
      <li>Izračunati \(k^2 + n^2\)</li>
    </ol>
  </div>

  <!-- THEORY REFRESHER -->
  <details>
    <summary>Podsetnik iz teorije</summary>
    <div class="detail-content">
      <p><strong>Tangenta na krug \(x^2 + y^2 = r^2\):</strong></p>
      <p>Prava \(y = kx + n\) je tangenta kruga sa centrom u koordinatnom početku i poluprečnikom \(r\) ako i samo ako je rastojanje centra od prave jednako \(r\):</p>
      \[d(O, p) = \frac{|n|}{\sqrt{1+k^2}} = r \quad \Longrightarrow \quad n^2 = r^2(1+k^2)\]

      <p style="margin-top:0.75rem"><strong>Tangenta na elipsu \(\frac{x^2}{a^2} + \frac{y^2}{b^2} = 1\):</strong></p>
      <p>Prava \(y = kx + n\) dodiruje elipsu ako i samo ako važi:</p>
      \[n^2 = a^2 k^2 + b^2\]
      <p>Ovaj uslov se dobija zahtevom da kvadratna jednačina nastala supstitucijom \(y = kx + n\) u jednačinu elipse ima tačno jedno rešenje (diskriminanta = 0).</p>

      <p style="margin-top:0.75rem"><strong>Svođenje elipse na kanonski oblik:</strong></p>
      \[2x^2 + 5y^2 = 10 \;\;\Longrightarrow\;\; \frac{x^2}{5} + \frac{y^2}{2} = 1 \quad (a^2=5,\; b^2=2)\]
    </div>
  </details>

  <!-- VISUAL AID -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128202;</span> Grafički prikaz</div>
    <p class="muted" style="margin-bottom:0.75rem;">Krug \(x^2 + y^2 = 4\), elipsa \(\frac{x^2}{5} + \frac{y^2}{2} = 1\) i zajedničke tangente.</p>
    <div class="canvas-wrap">
      <canvas id="graph" width="700" height="500"></canvas>
    </div>
  </div>

  <!-- STEP-BY-STEP SOLUTION -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9999;&#65039;</span> Rešenje korak po korak</div>

    <!-- Step 1 -->
    <div class="step">
      <div class="step-title">Korak 1: Uslov tangentnosti na krug</div>
      <p>Krug \(x^2 + y^2 = 4\) ima centar \(O(0,0)\) i poluprečnik \(r = 2\).</p>
      <p>Prava \(y = kx + n\) se može napisati kao \(kx - y + n = 0\). Rastojanje od koordinatnog početka do ove prave je:</p>
      \[d = \frac{|n|}{\sqrt{k^2 + 1}}\]
      <p>Uslov tangentnosti: \(d = r = 2\), dakle:</p>
      \[\frac{|n|}{\sqrt{1+k^2}} = 2\]
      <p>Kvadriranjem:</p>
      \[\boxed{n^2 = 4(1 + k^2) = 4 + 4k^2} \quad \cdots\; (I)\]
    </div>

    <div class="checkpoint">
      <span class="checkpoint-label">Proveri se:</span> Za krug sa centrom u koordinatnom početku, uslov tangentnosti se svodi na \(n^2 = r^2(1+k^2)\).
    </div>

    <!-- Step 2 -->
    <div class="step">
      <div class="step-title">Korak 2: Kanonski oblik elipse</div>
      <p>Elipsa je data kao \(2x^2 + 5y^2 = 10\). Delimo obe strane sa 10:</p>
      \[\frac{x^2}{5} + \frac{y^2}{2} = 1\]
      <p>Dakle, \(a^2 = 5\) i \(b^2 = 2\).</p>
    </div>

    <!-- Step 3 -->
    <div class="step">
      <div class="step-title">Korak 3: Uslov tangentnosti na elipsu</div>
      <p>Zamenom \(y = kx + n\) u jednačinu elipse:</p>
      \[2x^2 + 5(kx + n)^2 = 10\]
      <p>Razvijamo:</p>
      \[2x^2 + 5(k^2x^2 + 2knx + n^2) = 10\]
      \[(2 + 5k^2)\,x^2 + 10kn\,x + (5n^2 - 10) = 0\]
      <p>Za tangentnost, diskriminanta mora biti jednaka nuli:</p>
      \[D = (10kn)^2 - 4(2+5k^2)(5n^2-10) = 0\]
      <p>Razvijamo:</p>
      \[100k^2n^2 - 4\bigl(10n^2 - 20 + 25k^2n^2 - 50k^2\bigr) = 0\]
      \[100k^2n^2 - 40n^2 + 80 - 100k^2n^2 + 200k^2 = 0\]
      \[-40n^2 + 200k^2 + 80 = 0\]
      <p>Delimo sa \(-40\):</p>
      \[n^2 - 5k^2 - 2 = 0\]
      \[\boxed{n^2 = 5k^2 + 2} \quad \cdots\; (II)\]
    </div>

    <div class="checkpoint">
      <span class="checkpoint-label">Proveri se:</span> Ovo se poklapa sa opštom formulom za tangentu elipse: \(n^2 = a^2 k^2 + b^2 = 5k^2 + 2\). Tačno!
    </div>

    <!-- Step 4 -->
    <div class="step">
      <div class="step-title">Korak 4: Rešavanje sistema jednačina</div>
      <p>Izjednačavamo izraze za \(n^2\) iz (I) i (II):</p>
      \[4 + 4k^2 = 5k^2 + 2\]
      \[4 - 2 = 5k^2 - 4k^2\]
      \[\boxed{k^2 = 2}\]
      <p>Zamenom nazad u (I):</p>
      \[n^2 = 4 + 4 \cdot 2 = 4 + 8 = 12\]
      \[\boxed{n^2 = 12}\]
    </div>

    <div class="checkpoint">
      <span class="checkpoint-label">Proveri se:</span> Iz (II): \(n^2 = 5 \cdot 2 + 2 = 12\). Konzistentno sa (I)!
    </div>

    <!-- Step 5 -->
    <div class="step">
      <div class="step-title">Korak 5: Izračunavanje \(k^2 + n^2\)</div>
      \[k^2 + n^2 = 2 + 12 = 14\]
    </div>

    <!-- Step 6 -->
    <div class="step">
      <div class="step-title">Korak 6: Verifikacija &mdash; konkretne tangente</div>
      <p>Iz \(k^2 = 2\) dobijamo \(k = \pm\sqrt{2}\), a iz \(n^2 = 12\) dobijamo \(n = \pm 2\sqrt{3}\).</p>
      <p>Na primer, jedna tangenta je \(y = \sqrt{2}\,x + 2\sqrt{3}\). Proverimo:</p>
      <p><strong>Krug:</strong> Rastojanje od \(O(0,0)\):</p>
      \[d = \frac{|2\sqrt{3}|}{\sqrt{1+2}} = \frac{2\sqrt{3}}{\sqrt{3}} = 2 = r \;\; \checkmark\]
      <p><strong>Elipsa:</strong> \(n^2 = 12 = 5 \cdot 2 + 2 = 12\) \(\checkmark\)</p>
    </div>
  </div>

  <!-- KEY INSIGHT -->
  <div class="insight-box">
    <div class="card-title"><span class="icon">&#128161;</span> Ključni uvid</div>
    <p>Tangenta na krug i tangenta na elipsu daju dva nezavisna uslova koji su <strong>linearne jednačine po \(k^2\) i \(n^2\)</strong>. Oba uslova imaju oblik \(n^2 = \alpha k^2 + \beta\), pa se sistem rešava prostim izjednačavanjem &mdash; bez potrebe za rešavanjem kvadratne jednačine. Ovaj pristup je tipičan za zadatke sa zajedničkim tangentama konika.</p>
  </div>

  <!-- FINAL ANSWER -->
  <div class="final-answer">
    <div class="label">Konačan odgovor</div>
    <div class="value">E) \(\;k^2 + n^2 = 2 + 12 = 14\)</div>
  </div>

  <!-- COMMON PITFALLS -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9888;&#65039;</span> Česte greške</div>
    <div class="pitfall">
      <strong>Pogrešno čitanje elipse:</strong> Jednačina \(2x^2 + 5y^2 = 10\) se mora podeliti sa 10 da se dobije kanonski oblik. Česta greška je uzeti \(a^2 = 2\), \(b^2 = 5\) umesto \(a^2 = 5\), \(b^2 = 2\).
    </div>
    <div class="pitfall">
      <strong>Greška u formuli za rastojanje:</strong> Prava \(y = kx + n\) se mora napisati u obliku \(kx - y + n = 0\) pre primene formule za rastojanje. Neki učenici zaborave minus ispred \(y\) u imeniocu.
    </div>
    <div class="pitfall">
      <strong>Razvijanje diskriminante:</strong> Računica sa diskriminantom ima mnogo članova. Treba pažljivo grupisati &mdash; posebno uočiti da se članovi \(100k^2n^2\) poništavaju!
    </div>
    <div class="pitfall">
      <strong>Traži se \(k^2 + n^2\), ne \(k\) i \(n\):</strong> Zadatak ne traži konkretne vrednosti \(k\) i \(n\), pa ne treba vaditi korene. Dovoljno je naći \(k^2\) i \(n^2\).
    </div>
  </div>

  <!-- OPTIONAL CHALLENGE -->
  <div class="challenge-box">
    <div class="card-title"><span class="icon">&#127942;</span> Dodatni izazov</div>
    <p>Koliko ukupno postoji zajedničkih tangentnih pravih za dati krug i elipsu? Napiši jednačine svih tangenti.</p>
    <p class="muted" style="margin-top:0.5rem;font-size:0.9rem;">Savet: Iz \(k = \pm\sqrt{2}\) i \(n = \pm 2\sqrt{3}\) dobijaju se 4 kombinacije (svaki znak nezavisno), dakle postoje 4 zajedničke tangente.</p>
  </div>

</div>

<script>
(function() {
  var canvas = document.getElementById('graph');
  if (!canvas) return;
  var ctx = canvas.getContext('2d');
  var W = canvas.width;
  var H = canvas.height;

  // Coordinate system: x from -4 to 4, y from -4.5 to 4.5
  var xMin = -4, xMax = 4;
  var yMin = -4.5, yMax = 4.5;
  var padL = 50, padR = 20, padT = 20, padB = 40;
  var plotW = W - padL - padR;
  var plotH = H - padT - padB;

  function toX(x) { return padL + ((x - xMin) / (xMax - xMin)) * plotW; }
  function toY(y) { return padT + ((yMax - y) / (yMax - yMin)) * plotH; }

  // Clear
  ctx.fillStyle = '#0f172a';
  ctx.fillRect(0, 0, W, H);

  // Grid
  ctx.strokeStyle = '#1e293b';
  ctx.lineWidth = 1;
  for (var gx = Math.ceil(xMin); gx <= Math.floor(xMax); gx++) {
    ctx.beginPath(); ctx.moveTo(toX(gx), padT); ctx.lineTo(toX(gx), H - padB); ctx.stroke();
  }
  for (var gy = Math.ceil(yMin); gy <= Math.floor(yMax); gy++) {
    ctx.beginPath(); ctx.moveTo(padL, toY(gy)); ctx.lineTo(W - padR, toY(gy)); ctx.stroke();
  }

  // Axes
  ctx.strokeStyle = '#475569';
  ctx.lineWidth = 1.5;
  ctx.beginPath();
  ctx.moveTo(toX(xMin), toY(0)); ctx.lineTo(toX(xMax), toY(0));
  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(toX(0), toY(yMin)); ctx.lineTo(toX(0), toY(yMax));
  ctx.stroke();

  // Axis labels
  ctx.fillStyle = '#94a3b8';
  ctx.font = '12px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'center';
  for (gx = Math.ceil(xMin); gx <= Math.floor(xMax); gx++) {
    if (gx === 0) continue;
    ctx.fillText(gx.toString(), toX(gx), toY(0) + 16);
  }
  ctx.textAlign = 'right';
  for (gy = Math.ceil(yMin); gy <= Math.floor(yMax); gy++) {
    if (gy === 0) continue;
    ctx.fillText(gy.toString(), toX(0) - 8, toY(gy) + 4);
  }

  // Draw circle x² + y² = 4, radius 2
  ctx.strokeStyle = '#60a5fa';
  ctx.lineWidth = 2.5;
  ctx.beginPath();
  for (var t = 0; t <= 2 * Math.PI + 0.01; t += 0.02) {
    var cx = 2 * Math.cos(t);
    var cy = 2 * Math.sin(t);
    if (t === 0) ctx.moveTo(toX(cx), toY(cy));
    else ctx.lineTo(toX(cx), toY(cy));
  }
  ctx.stroke();

  // Label circle
  ctx.fillStyle = '#60a5fa';
  ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'left';
  ctx.fillText('x\u00B2 + y\u00B2 = 4', toX(1.5), toY(1.7) - 12);

  // Draw ellipse x²/5 + y²/2 = 1, a=√5≈2.236, b=√2≈1.414
  var a = Math.sqrt(5);
  var b = Math.sqrt(2);
  ctx.strokeStyle = '#a78bfa';
  ctx.lineWidth = 2.5;
  ctx.beginPath();
  for (t = 0; t <= 2 * Math.PI + 0.01; t += 0.02) {
    var ex = a * Math.cos(t);
    var ey = b * Math.sin(t);
    if (t === 0) ctx.moveTo(toX(ex), toY(ey));
    else ctx.lineTo(toX(ex), toY(ey));
  }
  ctx.stroke();

  // Label ellipse
  ctx.fillStyle = '#a78bfa';
  ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'left';
  ctx.fillText('x\u00B2/5 + y\u00B2/2 = 1', toX(1.2), toY(-1.2) + 16);

  // Draw all 4 tangent lines: y = ±√2 x ± 2√3
  var kVal = Math.sqrt(2);
  var nVal = 2 * Math.sqrt(3);
  var tangents = [
    { k:  kVal, n:  nVal, color: '#4ade80' },
    { k:  kVal, n: -nVal, color: '#4ade80' },
    { k: -kVal, n:  nVal, color: '#34d399' },
    { k: -kVal, n: -nVal, color: '#34d399' }
  ];

  tangents.forEach(function(tg) {
    ctx.strokeStyle = tg.color;
    ctx.lineWidth = 1.8;
    ctx.setLineDash([6, 3]);
    ctx.beginPath();
    // Clip line to visible area
    var x1 = xMin, y1 = tg.k * x1 + tg.n;
    var x2 = xMax, y2 = tg.k * x2 + tg.n;
    ctx.moveTo(toX(x1), toY(y1));
    ctx.lineTo(toX(x2), toY(y2));
    ctx.stroke();
    ctx.setLineDash([]);
  });

  // Mark tangent points on the circle for one tangent y = √2 x + 2√3
  // Tangent point: foot of perpendicular from center to line
  // Line: √2 x - y + 2√3 = 0, |kx - y + n| / √(k²+1)
  // Point: (x0, y0) where x0 = -kn/(1+k²), y0 = n/(1+k²)
  tangents.forEach(function(tg) {
    var x0c = -tg.k * tg.n / (1 + tg.k * tg.k);
    var y0c = tg.n / (1 + tg.k * tg.k);

    // Draw dot on circle tangent point
    ctx.beginPath();
    ctx.arc(toX(x0c), toY(y0c), 5, 0, 2 * Math.PI);
    ctx.fillStyle = '#f59e0b';
    ctx.fill();
    ctx.strokeStyle = '#0f172a';
    ctx.lineWidth = 1.5;
    ctx.stroke();
  });

  // Legend
  ctx.font = '12px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'left';
  var legendX = toX(xMin) + 10;
  var legendY = toY(yMax) + 20;

  ctx.fillStyle = '#60a5fa';
  ctx.fillRect(legendX, legendY - 8, 14, 3);
  ctx.fillText('Krug', legendX + 20, legendY - 2);

  ctx.fillStyle = '#a78bfa';
  ctx.fillRect(legendX, legendY + 12, 14, 3);
  ctx.fillText('Elipsa', legendX + 20, legendY + 18);

  ctx.fillStyle = '#4ade80';
  ctx.setLineDash([5, 3]);
  ctx.strokeStyle = '#4ade80';
  ctx.lineWidth = 1.5;
  ctx.beginPath();
  ctx.moveTo(legendX, legendY + 32);
  ctx.lineTo(legendX + 14, legendY + 32);
  ctx.stroke();
  ctx.setLineDash([]);
  ctx.fillText('Tangente', legendX + 20, legendY + 36);

  ctx.beginPath();
  ctx.arc(legendX + 7, legendY + 50, 4, 0, 2 * Math.PI);
  ctx.fillStyle = '#f59e0b';
  ctx.fill();
  ctx.fillText('Dodirne tačke (krug)', legendX + 20, legendY + 54);

})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{"title":"Zajednička tangenta kruga i elipse","subject":"math","unit":"analitička geometrija","topic_tags":["krug","elipsa","tangenta","konike","analitička geometrija"]}
BRAINSPARK_META-->