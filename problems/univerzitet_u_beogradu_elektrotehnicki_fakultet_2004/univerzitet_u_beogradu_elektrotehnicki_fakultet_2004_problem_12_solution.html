<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Trostruka kompozicija funkcije f(x) = 2x - x¬≤</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
  Problem: f(x) = 2x - x¬≤. Naci f(f(f(1-x))).

  Key insight: Primetimo da f(x) = 2x - x¬≤ = 1 - (1-x)¬≤.
  Dokaz: 1 - (1-x)¬≤ = 1 - (1 - 2x + x¬≤) = 1 - 1 + 2x - x¬≤ = 2x - x¬≤ ‚úì

  Ovo znaci da f ima lepu osobinu: ako definisemo g(t) = 1 - t¬≤, tada je
  f(x) = g(1-x)... ne bas. Hajde drugacije.

  Direktan pristup sa zamenom t = 1 - x:
  f(1 - t) = 2(1 - t) - (1 - t)¬≤
            = 2 - 2t - (1 - 2t + t¬≤)
            = 2 - 2t - 1 + 2t - t¬≤
            = 1 - t¬≤

  Dakle: f(1 - t) = 1 - t¬≤  ... kljucna formula!

  Korak 1: f(1 - x) = 1 - x¬≤

  Korak 2: f(f(1 - x)) = f(1 - x¬≤)
           Koristimo istu formulu sa t = x¬≤:
           f(1 - x¬≤) = 1 - (x¬≤)¬≤ = 1 - x‚Å¥

  Korak 3: f(f(f(1 - x))) = f(1 - x‚Å¥)
           Koristimo istu formulu sa t = x‚Å¥:
           f(1 - x‚Å¥) = 1 - (x‚Å¥)¬≤ = 1 - x‚Å∏

  Odgovor: E) 1 - x‚Å∏

  Verifikacija za x = 0:
    f(x) = 2x - x¬≤, f(0) = 0, f(1) = 1
    f(1-0) = f(1) = 2¬∑1 - 1¬≤ = 1
    f(f(1)) = f(1) = 1
    f(f(f(1))) = f(1) = 1
    1 - 0‚Å∏ = 1 ‚úì

  Verifikacija za x = 1:
    f(1-1) = f(0) = 0
    f(f(0)) = f(0) = 0
    f(f(f(0))) = f(0) = 0
    1 - 1‚Å∏ = 0 ‚úì

  Verifikacija za x = 1/2:
    f(1 - 1/2) = f(1/2) = 2¬∑(1/2) - (1/2)¬≤ = 1 - 1/4 = 3/4
    f(3/4) = 2¬∑(3/4) - (3/4)¬≤ = 3/2 - 9/16 = 24/16 - 9/16 = 15/16
    f(15/16) = 2¬∑(15/16) - (15/16)¬≤ = 30/16 - 225/256 = 480/256 - 225/256 = 255/256
    1 - (1/2)‚Å∏ = 1 - 1/256 = 255/256 ‚úì

  Obrazac: svaka primena f na argument oblika 1 - t daje 1 - t¬≤.
  Eksponent se duplira sa svakom primenom: x -> x¬≤ -> x‚Å¥ -> x‚Å∏.
  Tri primene: eksponent 2¬≥ = 8.
</script>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
}

.card-title {
  font-size: 1.3rem;
  color: #60a5fa;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.4rem;
}

.problem-statement {
  font-size: 1.15rem;
  line-height: 1.8;
}

.highlight-box {
  background: rgba(96, 165, 250, 0.1);
  border: 1px solid rgba(96, 165, 250, 0.3);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 16px 0;
  font-family: 'Courier New', monospace;
  font-size: 1.1rem;
  text-align: center;
}

.options-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 18px;
}

.option {
  background: rgba(51, 65, 85, 0.6);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 20px;
  font-size: 1rem;
  transition: all 0.3s ease;
  cursor: default;
}

.option.correct {
  background: rgba(52, 211, 153, 0.15);
  border-color: #34d399;
  color: #34d399;
  font-weight: 600;
}

.plan-text {
  color: #a78bfa;
  font-size: 1.05rem;
  font-style: italic;
}

details {
  margin: 12px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 8px 0;
  user-select: none;
}

details summary:hover {
  color: #93bbfc;
}

details .detail-content {
  padding: 12px 16px;
  background: rgba(30, 41, 59, 0.7);
  border-left: 3px solid #60a5fa;
  border-radius: 0 8px 8px 0;
  margin-top: 8px;
}

.step {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  align-items: flex-start;
}

.step-badge {
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  font-weight: 700;
  font-size: 0.85rem;
  min-width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-title {
  font-weight: 600;
  color: #f472b6;
  margin-bottom: 6px;
  font-size: 1.05rem;
}

.step-math {
  background: rgba(167, 139, 250, 0.1);
  border: 1px solid rgba(167, 139, 250, 0.25);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 10px 0;
  font-family: 'Courier New', monospace;
  text-align: center;
  font-size: 1.05rem;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.12), rgba(167, 139, 250, 0.12));
  border: 1px solid rgba(167, 139, 250, 0.35);
  border-radius: 16px;
  padding: 24px 28px;
  margin-bottom: 24px;
}

.insight-box .card-title {
  color: #a78bfa;
}

.final-answer-box {
  background: rgba(52, 211, 153, 0.08);
  border: 2px solid #34d399;
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin-bottom: 24px;
}

.final-answer-box .answer-label {
  color: #94a3b8;
  font-size: 1rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 12px;
}

.final-answer-box .answer-value {
  color: #4ade80;
  font-size: 2rem;
  font-weight: 700;
}

.final-answer-box .answer-option {
  color: #34d399;
  font-size: 1.2rem;
  margin-top: 8px;
}

.pitfall {
  display: flex;
  gap: 12px;
  align-items: flex-start;
  margin-bottom: 12px;
}

.pitfall-icon {
  color: #f472b6;
  font-weight: 700;
  font-size: 1.2rem;
  flex-shrink: 0;
}

.challenge-box {
  background: rgba(244, 114, 182, 0.08);
  border: 1px solid rgba(244, 114, 182, 0.3);
  border-radius: 16px;
  padding: 24px 28px;
}

.challenge-box .card-title {
  color: #f472b6;
}

canvas {
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  max-width: 100%;
}

.canvas-wrapper {
  text-align: center;
}

.canvas-caption {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 10px;
  text-align: center;
}

.checkpoint details summary {
  color: #34d399;
  font-size: 0.95rem;
}

.checkpoint details .detail-content {
  border-left-color: #34d399;
}

@media (max-width: 700px) {
  h1 {
    font-size: 1.6rem;
  }
  .card {
    padding: 18px;
  }
  .options-grid {
    flex-direction: column;
  }
  .step {
    flex-direction: column;
    gap: 8px;
  }
  .step-badge {
    align-self: flex-start;
  }
  .final-answer-box .answer-value {
    font-size: 1.5rem;
  }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Trostruka kompozicija funkcije</h1>
  <p class="subtitle">Kompozicija funkcija ‚Äî prepoznavanje obrasca</p>

  <!-- Problem Statement -->
  <div class="card">
    <div class="card-title"><span class="icon">üìã</span> Tekst zadatka</div>
    <div class="problem-statement">
      <p>Data je funkcija \( f(x) = 2x - x^2 \). Tada je \( f(f(f(1-x))) \) jednako:</p>
      <div class="options-grid">
        <div class="option">A) \( 2x^4 - x^8 \)</div>
        <div class="option">B) \( 2x - x^{16} \)</div>
        <div class="option">C) \( 1 - (1-x)^8 \)</div>
        <div class="option">D) \( 2x^3 - x^8 \)</div>
        <div class="option correct">E) \( 1 - x^8 \)</div>
        <div class="option">N) Ne znam</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <div class="card-title"><span class="icon">üéØ</span> Plan resavanja</div>
    <p class="plan-text">
      Direktno racunanje \( f(f(f(1-x))) \) bi bilo izuzetno komplikovano jer bismo morali da razvijamo polinome visokog stepena. Umesto toga, primeticemo da se \( f(x) = 2x - x^2 \) moze zapisati kao \( f(x) = 1 - (1-x)^2 \). Ovo nam otkriva elegantan obrazac: svaka primena funkcije \( f \) na argument oblika \( 1 - t \) daje \( 1 - t^2 \), sto znaci da se eksponent udvaja sa svakom primenom!
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <div class="card-title"><span class="icon">üìö</span> Podsetnik iz teorije</div>
    <details>
      <summary>Kompozicija funkcija i dopunjavanje do potpunog kvadrata (klikni da otvoris)</summary>
      <div class="detail-content">
        <p><strong>Kompozicija funkcija</strong> \( f(f(x)) \) znaci da rezultat funkcije \( f \) ponovo uvrstimo u istu funkciju. Ako \( f(x) = 2x - x^2 \), tada:</p>
        <div class="step-math">
          \[ f(f(x)) = f\big(2x - x^2\big) = 2(2x-x^2) - (2x-x^2)^2 \]
        </div>
        <p style="margin-top: 12px;">Ovo brzo postaje komplikovano, pa trazimo elegantniji nacin.</p>
        <p style="margin-top: 12px;"><strong>Dopunjavanje do potpunog kvadrata:</strong></p>
        <div class="step-math">
          \[ 2x - x^2 = -(x^2 - 2x) = -(x^2 - 2x + 1 - 1) = 1 - (x-1)^2 = 1 - (1-x)^2 \]
        </div>
        <p style="margin-top: 12px;">Ovaj zapis otkriva strukturu funkcije i omogucava nam da uocimo obrazac pri uzastopnom primenjivanju.</p>
      </div>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <div class="card-title"><span class="icon">üìä</span> Vizuelni prikaz</div>
    <div class="canvas-wrapper">
      <canvas id="diagram" width="700" height="400"></canvas>
    </div>
    <p class="canvas-caption">Lanac kompozicija: svaka primena \( f \) na \( 1 - t \) daje \( 1 - t^2 \), eksponent se duplira</p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <div class="card-title"><span class="icon">üî¢</span> Resenje korak po korak</div>

    <!-- Step 1 -->
    <div class="step">
      <div class="step-badge">1</div>
      <div class="step-content">
        <div class="step-title">Prepisimo funkciju u pogodniji oblik</div>
        <p>Funkcija \( f(x) = 2x - x^2 \) se moze zapisati dopunjavanjem do potpunog kvadrata:</p>
        <div class="step-math">
          \[ f(x) = 2x - x^2 = -(x^2 - 2x + 1) + 1 = 1 - (1-x)^2 \]
        </div>
        <p>Proverimo: \( 1 - (1-x)^2 = 1 - (1 - 2x + x^2) = 1 - 1 + 2x - x^2 = 2x - x^2 \). Tacno!</p>

        <div class="checkpoint">
          <details>
            <summary>Zasto je ovaj oblik koristan?</summary>
            <div class="detail-content">
              Zato sto vidimo da funkcija \( f \) radi sledece: uzima \( x \), racuna \( 1-x \), kvadrira to, i oduzima od 1. Kada primenimo \( f \) na argument koji je vec oblika \( 1 - t \), dobijamo veoma cist rezultat.
            </div>
          </details>
        </div>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step">
      <div class="step-badge">2</div>
      <div class="step-content">
        <div class="step-title">Otkrijmo kljucnu formulu: \( f(1 - t) = 1 - t^2 \)</div>
        <p>Uvrstimo \( 1 - t \) umesto \( x \) u funkciju:</p>
        <div class="step-math">
          \[ f(1 - t) = 2(1-t) - (1-t)^2 = 2 - 2t - (1 - 2t + t^2) \]
        </div>
        <p>Pojednostavimo:</p>
        <div class="step-math">
          \[ f(1 - t) = 2 - 2t - 1 + 2t - t^2 = 1 - t^2 \]
        </div>
        <p>Primetite kako se clanovi sa \( t \) poniste (\( -2t + 2t = 0 \)), a ostane samo \( 1 - t^2 \). Ovo je kljucna formula!</p>

        <div class="highlight-box">
          \( f(1 - t) = 1 - t^2 \) za svako \( t \)
        </div>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step">
      <div class="step-badge">3</div>
      <div class="step-content">
        <div class="step-title">Prva primena: \( f(1 - x) \)</div>
        <p>Koristimo formulu sa \( t = x \):</p>
        <div class="step-math">
          \[ f(1 - x) = 1 - x^2 \]
        </div>
        <p>Rezultat je ponovo oblika \( 1 - (\text{nesto}) \), sto znaci da mozemo ponovo da primenimo istu formulu!</p>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step">
      <div class="step-badge">4</div>
      <div class="step-content">
        <div class="step-title">Druga primena: \( f(f(1 - x)) = f(1 - x^2) \)</div>
        <p>Sada primenimo \( f \) na rezultat \( 1 - x^2 \). Koristimo formulu sa \( t = x^2 \):</p>
        <div class="step-math">
          \[ f(1 - x^2) = 1 - (x^2)^2 = 1 - x^4 \]
        </div>
        <p>Eksponent se udvostrucio: od \( x^2 \) smo dobili \( x^4 \). Obrazac se nastavlja!</p>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step">
      <div class="step-badge">5</div>
      <div class="step-content">
        <div class="step-title">Treca primena: \( f(f(f(1 - x))) = f(1 - x^4) \)</div>
        <p>Primenimo \( f \) jos jednom, na rezultat \( 1 - x^4 \). Koristimo formulu sa \( t = x^4 \):</p>
        <div class="step-math">
          \[ f(1 - x^4) = 1 - (x^4)^2 = 1 - x^8 \]
        </div>
        <p>Eksponent se ponovo udvostrucio: od \( x^4 \) smo dobili \( x^8 \).</p>

        <div class="checkpoint">
          <details>
            <summary>Proveri sebe: Verifikacija za konkretnu vrednost</summary>
            <div class="detail-content">
              <p>Proverimo za \( x = \frac{1}{2} \):</p>
              <p>\( f\!\left(\frac{1}{2}\right) = 2 \cdot \frac{1}{2} - \left(\frac{1}{2}\right)^2 = 1 - \frac{1}{4} = \frac{3}{4} \)</p>
              <p style="margin-top: 6px;">\( f\!\left(\frac{3}{4}\right) = 2 \cdot \frac{3}{4} - \left(\frac{3}{4}\right)^2 = \frac{3}{2} - \frac{9}{16} = \frac{24 - 9}{16} = \frac{15}{16} \)</p>
              <p style="margin-top: 6px;">\( f\!\left(\frac{15}{16}\right) = 2 \cdot \frac{15}{16} - \left(\frac{15}{16}\right)^2 = \frac{30}{16} - \frac{225}{256} = \frac{480 - 225}{256} = \frac{255}{256} \)</p>
              <p style="margin-top: 6px;">Formula daje: \( 1 - \left(\frac{1}{2}\right)^8 = 1 - \frac{1}{256} = \frac{255}{256} \) ‚úì</p>
            </div>
          </details>
        </div>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <div class="card-title"><span class="icon">üí°</span> Kljucni uvid</div>
    <p>Funkcija \( f(x) = 2x - x^2 = 1 - (1-x)^2 \) ima izuzetno elegantno ponasanje kada se primeni na argumente oblika \( 1 - t \): rezultat je uvek \( 1 - t^2 \). Ovo znaci da se sa svakom primenom funkcije eksponent <strong>udvostrucuje</strong>. Posle tri uzastopne primene, eksponent je \( 2^3 = 8 \). Kljuc resenja bio je da se prepozna ovaj obrazac umesto da se "na silu" racuna kompozicija polinoma.</p>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <div class="answer-label">Konacan odgovor</div>
    <div class="answer-value">\( f(f(f(1-x))) = 1 - x^8 \)</div>
    <div class="answer-option">Tacan odgovor je E) \( 1 - x^8 \)</div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <div class="card-title"><span class="icon">‚ö†Ô∏è</span> Ceste greske</div>
    <div class="pitfall">
      <span class="pitfall-icon">‚úó</span>
      <p><strong>Direktno razvijanje polinoma:</strong> Pokusaj da se racuna \( f(f(f(1-x))) \) razvijanjem svakog koraka daje polinome sve viseg stepena i gotovo sigurno vodi ka racunskim greskama. Uvek prvo trazite obrazac!</p>
    </div>
    <div class="pitfall">
      <span class="pitfall-icon">‚úó</span>
      <p><strong>Pogresno racunanje eksponenata:</strong> Cesta greska je misliti da se eksponent triplira (jer imamo tri primene), sto bi dalo \( x^{2 \cdot 3} = x^6 \). U stvari, eksponent se <em>duplira</em> pri svakoj primeni, pa je \( 2 \to 4 \to 8 \), odnosno \( 2^3 = 8 \).</p>
    </div>
    <div class="pitfall">
      <span class="pitfall-icon">‚úó</span>
      <p><strong>Zaboravljanje znaka i konstante:</strong> Rezultat nije samo \( x^8 \), vec \( 1 - x^8 \). Clanovi \( 1 \) i predznak minus su kljucni delovi odgovora ‚Äî odgovor C) \( 1 - (1-x)^8 \) je primamljiva zamka za one koji ne primene formulu pravilno.</p>
    </div>
  </div>

  <!-- Optional Challenge -->
  <div class="challenge-box">
    <div class="card-title"><span class="icon">üèÜ</span> Dodatni izazov</div>
    <p>Ako primenimo funkciju \( f \) ukupno \( n \) puta na \( 1 - x \), sta dobijamo? Koliki je rezultat za \( n = 5 \)?</p>
    <details>
      <summary>Pogledaj odgovor</summary>
      <div class="detail-content">
        <p>Uocili smo da se eksponent duplira sa svakom primenom. Posle \( n \) primena:</p>
        <p style="margin-top: 8px;">\( \underbrace{f(f(\cdots f}_{n}(1-x)\cdots)) = 1 - x^{2^n} \)</p>
        <p style="margin-top: 8px;">Za \( n = 5 \): \( 1 - x^{2^5} = 1 - x^{32} \)</p>
        <p style="margin-top: 8px;">Ovo je lep primer kako kompozicija funkcije moze da generise eksponencijalni rast stepena polinoma.</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('diagram');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  function draw() {
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Title
    ctx.fillStyle = '#94a3b8';
    ctx.font = '14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Lanac kompozicija: f(1-t) = 1 - t\u00B2', W / 2, 28);

    // Draw the chain of transformations
    const boxW = 120;
    const boxH = 55;
    const arrowLen = 60;
    const startY = 90;

    const stages = [
      { label: '1 - x', color: '#60a5fa', bg: 'rgba(96, 165, 250, 0.15)' },
      { label: '1 - x\u00B2', color: '#a78bfa', bg: 'rgba(167, 139, 250, 0.15)' },
      { label: '1 - x\u2074', color: '#f472b6', bg: 'rgba(244, 114, 182, 0.15)' },
      { label: '1 - x\u2078', color: '#4ade80', bg: 'rgba(74, 222, 128, 0.15)' }
    ];

    const totalWidth = stages.length * boxW + (stages.length - 1) * arrowLen;
    const startX = (W - totalWidth) / 2;

    for (let i = 0; i < stages.length; i++) {
      const x = startX + i * (boxW + arrowLen);
      const s = stages[i];

      // Box
      ctx.fillStyle = s.bg;
      ctx.strokeStyle = s.color;
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.roundRect(x, startY, boxW, boxH, 10);
      ctx.fill();
      ctx.stroke();

      // Label
      ctx.fillStyle = s.color;
      ctx.font = 'bold 18px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(s.label, x + boxW / 2, startY + boxH / 2 + 6);

      // Arrow to next
      if (i < stages.length - 1) {
        const arrowStartX = x + boxW + 5;
        const arrowEndX = arrowStartX + arrowLen - 10;
        const arrowY = startY + boxH / 2;

        ctx.strokeStyle = '#64748b';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(arrowStartX, arrowY);
        ctx.lineTo(arrowEndX, arrowY);
        ctx.stroke();

        // Arrowhead
        ctx.fillStyle = '#64748b';
        ctx.beginPath();
        ctx.moveTo(arrowEndX + 8, arrowY);
        ctx.lineTo(arrowEndX - 2, arrowY - 6);
        ctx.lineTo(arrowEndX - 2, arrowY + 6);
        ctx.closePath();
        ctx.fill();

        // Label above arrow
        ctx.fillStyle = '#94a3b8';
        ctx.font = '12px Segoe UI, system-ui, sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('f', arrowStartX + (arrowLen - 10) / 2, arrowY - 12);
      }
    }

    // Exponent pattern below
    const patternY = startY + boxH + 50;
    ctx.fillStyle = '#94a3b8';
    ctx.font = '14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Eksponent:', W / 2 - 200, patternY);

    const exponents = [
      { val: '1', color: '#60a5fa' },
      { val: '2', color: '#a78bfa' },
      { val: '4', color: '#f472b6' },
      { val: '8', color: '#4ade80' }
    ];

    for (let i = 0; i < exponents.length; i++) {
      const x = startX + i * (boxW + arrowLen) + boxW / 2;
      const e = exponents[i];

      ctx.fillStyle = e.color;
      ctx.font = 'bold 24px Segoe UI, system-ui, sans-serif';
      ctx.fillText(e.val, x, patternY + 4);

      if (i < exponents.length - 1) {
        const nextX = startX + (i + 1) * (boxW + arrowLen) + boxW / 2;
        ctx.fillStyle = '#64748b';
        ctx.font = '16px Segoe UI, system-ui, sans-serif';
        ctx.fillText('\u00D72', (x + nextX) / 2, patternY + 4);
      }
    }

    // Explanation row
    const explainY = patternY + 50;
    ctx.fillStyle = '#94a3b8';
    ctx.font = '14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Obrazac: eksponent = 2\u207F gde je n broj primena funkcije f', W / 2, explainY);

    // Draw the function graph below
    const graphY = explainY + 40;
    const graphH = 120;
    const graphW = 300;
    const graphX = (W - graphW) / 2;

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(graphX, graphY + graphH);
    ctx.lineTo(graphX + graphW, graphY + graphH);
    ctx.moveTo(graphX, graphY + graphH);
    ctx.lineTo(graphX, graphY);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#64748b';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('0', graphX - 10, graphY + graphH + 14);
    ctx.fillText('1', graphX + graphW, graphY + graphH + 14);
    ctx.fillText('1', graphX - 10, graphY + 4);
    ctx.fillText('x', graphX + graphW / 2, graphY + graphH + 14);

    // f(x) = 2x - x^2 curve
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    for (let px = 0; px <= graphW; px++) {
      const x = px / graphW;
      const y = 2 * x - x * x;
      const canvasY = graphY + graphH - y * graphH;
      if (px === 0) ctx.moveTo(graphX + px, canvasY);
      else ctx.lineTo(graphX + px, canvasY);
    }
    ctx.stroke();

    // y = x line (dashed)
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1;
    ctx.setLineDash([4, 4]);
    ctx.beginPath();
    ctx.moveTo(graphX, graphY + graphH);
    ctx.lineTo(graphX + graphW, graphY);
    ctx.stroke();
    ctx.setLineDash([]);

    // Label
    ctx.fillStyle = '#60a5fa';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('f(x) = 2x - x\u00B2', graphX + graphW + 8, graphY + 30);

    ctx.fillStyle = '#475569';
    ctx.fillText('y = x', graphX + graphW + 8, graphY + 50);

    // Mark f(1) = 1 as fixed point
    ctx.fillStyle = '#34d399';
    ctx.beginPath();
    ctx.arc(graphX + graphW, graphY, 4, 0, Math.PI * 2);
    ctx.fill();
    ctx.fillStyle = '#34d399';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('f(1) = 1', graphX + graphW + 8, graphY + 68);

    // Mark f(0) = 0 as fixed point
    ctx.fillStyle = '#34d399';
    ctx.beginPath();
    ctx.arc(graphX, graphY + graphH, 4, 0, Math.PI * 2);
    ctx.fill();
  }

  draw();

  let resizeTimeout;
  window.addEventListener('resize', function() {
    clearTimeout(resizeTimeout);
    resizeTimeout = setTimeout(draw, 100);
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Trostruka kompozicija funkcije f(x) = 2x - x¬≤",
  "subject": "math",
  "unit": "funkcije",
  "topic_tags": ["kompozicija funkcija", "kvadratna funkcija", "dopunjavanje do potpunog kvadrata", "iteracija", "obrasci"]
}
BRAINSPARK_META-->