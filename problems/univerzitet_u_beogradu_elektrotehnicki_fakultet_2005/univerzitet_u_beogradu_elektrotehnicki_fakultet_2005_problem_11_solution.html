<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jednakost funkcija ‚Äî Analiza domena</title>
<script>MathJax={tex:{inlineMath:[['\\(','\\)'],['$','$']],displayMath:[['\\[','\\]']]},svg:{fontCache:'global'}};</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<script type="text/info" id="logic-scratchpad">
PROBLEM: Compare four functions and determine which are equal.

f‚ÇÅ(x) = x
f‚ÇÇ(x) = x¬≤/x
f‚ÇÉ(x) = ‚àö(x¬≤)
f‚ÇÑ(x) = (‚àöx)¬≤

TWO FUNCTIONS ARE EQUAL if and only if:
1. They have the SAME DOMAIN
2. For every x in that domain, they produce the SAME VALUE

ANALYSIS:

f‚ÇÅ(x) = x
  Domain: ‚Ñù (all real numbers)
  Rule: f‚ÇÅ(x) = x for all x ‚àà ‚Ñù

f‚ÇÇ(x) = x¬≤/x
  We need x in the domain of x¬≤, which is ‚Ñù, then divide by x.
  Division by zero when x = 0.
  Domain: ‚Ñù \ {0}
  Simplify: x¬≤/x = x for x ‚â† 0
  So f‚ÇÇ(x) = x for x ‚àà ‚Ñù \ {0}

f‚ÇÉ(x) = ‚àö(x¬≤)
  x¬≤ is defined for all x ‚àà ‚Ñù, and x¬≤ ‚â• 0 always, so ‚àö(x¬≤) is defined for all x.
  Domain: ‚Ñù
  But ‚àö(x¬≤) = |x|, NOT x.
  So f‚ÇÉ(x) = |x| for all x ‚àà ‚Ñù

f‚ÇÑ(x) = (‚àöx)¬≤
  ‚àöx requires x ‚â• 0.
  Domain: [0, +‚àû)
  For x ‚â• 0: (‚àöx)¬≤ = x
  So f‚ÇÑ(x) = x for x ‚àà [0, +‚àû)

COMPARISON:

f‚ÇÅ vs f‚ÇÇ: Same formula (both = x where defined), but different domains (‚Ñù vs ‚Ñù\{0}). NOT EQUAL.

f‚ÇÅ vs f‚ÇÉ: Same domain (both ‚Ñù), but different formulas: f‚ÇÅ(x) = x, f‚ÇÉ(x) = |x|.
  For x < 0: f‚ÇÅ(x) = x < 0, but f‚ÇÉ(x) = |x| = -x > 0. NOT EQUAL.

f‚ÇÅ vs f‚ÇÑ: Different domains (‚Ñù vs [0,+‚àû)). NOT EQUAL.

f‚ÇÇ vs f‚ÇÉ: Different domains (‚Ñù\{0} vs ‚Ñù) AND different formulas for x < 0. NOT EQUAL.

f‚ÇÇ vs f‚ÇÑ: Different domains (‚Ñù\{0} vs [0,+‚àû)). Even restricting to intersection (0,+‚àû) they agree, but domains differ. NOT EQUAL.

f‚ÇÉ vs f‚ÇÑ: Different domains (‚Ñù vs [0,+‚àû)). Also f‚ÇÉ(x) = |x| while f‚ÇÑ(x) = x, but on [0,+‚àû) they agree. Still different domains. NOT EQUAL.

Wait ‚Äî let me reconsider f‚ÇÉ vs f‚ÇÑ more carefully on [0,+‚àû):
  f‚ÇÉ(x) = |x| = x for x ‚â• 0
  f‚ÇÑ(x) = x for x ‚â• 0
  They agree on [0,+‚àû), but f‚ÇÉ is also defined for x < 0 while f‚ÇÑ is not.
  So domains differ: ‚Ñù vs [0,+‚àû). NOT EQUAL.

CONCLUSION: No two functions among f‚ÇÅ, f‚ÇÇ, f‚ÇÉ, f‚ÇÑ are equal.

ANSWER: (C) Meƒëu datim funkcijama nema meƒëusobno jednakih.
</script>
<style>
  *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    background: #0f172a;
    color: #e2e8f0;
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    line-height: 1.7;
    padding: 20px;
  }
  .container { max-width: 1200px; margin: 0 auto; }

  h1 {
    text-align: center;
    font-size: clamp(1.6rem, 4vw, 2.4rem);
    font-weight: 800;
    background: linear-gradient(135deg, #60a5fa, #a78bfa);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 8px;
    padding: 20px 0 0;
  }
  .subtitle {
    text-align: center;
    color: #94a3b8;
    font-size: 1.05rem;
    margin-bottom: 30px;
  }

  .card {
    background: #1e293b;
    border: 1px solid #334155;
    border-radius: 16px;
    padding: 28px 32px;
    margin-bottom: 24px;
  }
  .card h2 {
    font-size: 1.35rem;
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .card h3 {
    font-size: 1.1rem;
    color: #a78bfa;
    margin: 18px 0 10px;
  }

  .problem-statement {
    background: #172033;
    border-left: 4px solid #60a5fa;
    padding: 20px 24px;
    border-radius: 0 12px 12px 0;
    font-size: 1.08rem;
    margin-bottom: 8px;
  }
  .problem-statement .options {
    margin-top: 12px;
    display: grid;
    gap: 6px;
  }
  .problem-statement .option { color: #cbd5e1; }

  /* Collapsible */
  .collapsible-toggle {
    background: #253350;
    border: 1px solid #334155;
    color: #e2e8f0;
    padding: 14px 20px;
    border-radius: 12px;
    width: 100%;
    text-align: left;
    cursor: pointer;
    font-size: 1.1rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: background 0.2s;
  }
  .collapsible-toggle:hover { background: #2d3f5e; }
  .collapsible-toggle .arrow { transition: transform 0.3s; display: inline-block; }
  .collapsible-toggle.open .arrow { transform: rotate(90deg); }
  .collapsible-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease;
  }
  .collapsible-content.open { max-height: 2000px; }
  .collapsible-inner { padding: 20px 24px 8px; }

  /* Step cards */
  .step {
    background: #172033;
    border: 1px solid #334155;
    border-radius: 12px;
    padding: 20px 24px;
    margin-bottom: 16px;
    position: relative;
  }
  .step-number {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 32px; height: 32px;
    background: linear-gradient(135deg, #60a5fa, #a78bfa);
    color: #0f172a;
    font-weight: 800;
    border-radius: 50%;
    font-size: 0.95rem;
    margin-right: 10px;
    flex-shrink: 0;
  }
  .step-title {
    font-weight: 700;
    font-size: 1.08rem;
    display: flex;
    align-items: center;
    margin-bottom: 12px;
  }

  /* Domain table */
  .domain-table {
    width: 100%;
    border-collapse: collapse;
    margin: 14px 0;
    font-size: 0.98rem;
  }
  .domain-table th, .domain-table td {
    padding: 10px 14px;
    border: 1px solid #334155;
    text-align: center;
  }
  .domain-table th {
    background: #253350;
    color: #a78bfa;
    font-weight: 700;
  }
  .domain-table td { background: #1a2744; }
  .domain-table tr:hover td { background: #1e2f50; }

  /* Checkpoint */
  .checkpoint {
    background: #1a2744;
    border: 1px dashed #60a5fa;
    border-radius: 12px;
    padding: 16px 20px;
    margin: 18px 0;
  }
  .checkpoint-title {
    color: #60a5fa;
    font-weight: 700;
    margin-bottom: 8px;
    font-size: 1.02rem;
  }
  .checkpoint button {
    background: #253350;
    border: 1px solid #475569;
    color: #e2e8f0;
    padding: 8px 18px;
    border-radius: 8px;
    cursor: pointer;
    margin: 4px 6px 4px 0;
    font-size: 0.92rem;
    transition: all 0.2s;
  }
  .checkpoint button:hover { background: #334155; }
  .checkpoint button.correct {
    background: #065f46;
    border-color: #34d399;
    color: #34d399;
  }
  .checkpoint button.incorrect {
    background: #7f1d1d;
    border-color: #f87171;
    color: #f87171;
  }
  .checkpoint .feedback {
    margin-top: 10px;
    padding: 10px 14px;
    border-radius: 8px;
    font-size: 0.95rem;
    display: none;
  }
  .checkpoint .feedback.show { display: block; }
  .checkpoint .feedback.correct-fb { background: #052e1f; color: #4ade80; border: 1px solid #166534; }
  .checkpoint .feedback.incorrect-fb { background: #2d0a0a; color: #fca5a5; border: 1px solid #7f1d1d; }

  /* Key insight */
  .insight {
    background: linear-gradient(135deg, #1e1b4b, #172554);
    border: 1px solid #6366f1;
    border-radius: 14px;
    padding: 22px 26px;
  }
  .insight h3 { color: #a5b4fc; margin-bottom: 10px; }

  /* Final answer */
  .final-answer {
    background: #052e1f;
    border: 2px solid #34d399;
    border-radius: 14px;
    padding: 24px 28px;
    text-align: center;
  }
  .final-answer .label { color: #4ade80; font-weight: 800; font-size: 1.2rem; margin-bottom: 10px; }
  .final-answer .answer-text { color: #34d399; font-size: 1.35rem; font-weight: 700; }
  .final-answer .options-review { margin-top: 16px; text-align: left; }
  .final-answer .opt-row {
    padding: 8px 14px;
    border-radius: 8px;
    margin: 4px 0;
    font-size: 0.97rem;
  }
  .opt-row.wrong { background: #1c1520; color: #94a3b8; }
  .opt-row.right { background: #0a3022; color: #4ade80; font-weight: 700; border: 1px solid #34d399; }

  /* Pitfalls */
  .pitfall {
    background: #2d1a1a;
    border-left: 4px solid #f87171;
    border-radius: 0 12px 12px 0;
    padding: 14px 20px;
    margin-bottom: 12px;
  }
  .pitfall strong { color: #fca5a5; }

  /* Challenge */
  .challenge {
    background: #1a1a2e;
    border: 1px solid #6366f1;
    border-radius: 12px;
    padding: 20px 24px;
  }
  .challenge h3 { color: #c4b5fd; }

  /* Canvas container */
  .canvas-wrapper {
    position: relative;
    width: 100%;
    margin: 16px 0;
  }
  canvas {
    width: 100%;
    border-radius: 12px;
    background: #0c1629;
    border: 1px solid #334155;
    display: block;
    touch-action: none;
  }
  .canvas-controls {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 12px;
    justify-content: center;
  }
  .canvas-controls button {
    background: #253350;
    border: 1px solid #475569;
    color: #e2e8f0;
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 0.9rem;
    transition: all 0.2s;
  }
  .canvas-controls button:hover { background: #334155; }
  .canvas-controls button.active {
    border-color: #60a5fa;
    background: #1e3a5f;
    color: #60a5fa;
  }
  .legend {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    justify-content: center;
    margin-top: 10px;
    font-size: 0.92rem;
  }
  .legend-item {
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .legend-swatch {
    width: 28px; height: 4px;
    border-radius: 2px;
  }

  /* Comparison matrix */
  .comparison-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 14px;
    margin: 16px 0;
  }
  .comp-card {
    background: #172033;
    border: 1px solid #334155;
    border-radius: 10px;
    padding: 14px 18px;
  }
  .comp-card h4 {
    color: #f472b6;
    margin-bottom: 8px;
    font-size: 1rem;
  }
  .comp-card .verdict {
    font-weight: 700;
    margin-top: 8px;
    padding: 6px 10px;
    border-radius: 6px;
    display: inline-block;
  }
  .verdict.nejednake { background: #7f1d1d33; color: #f87171; }

  @media (max-width: 640px) {
    .card { padding: 18px 16px; }
    .step { padding: 16px; }
    h1 { font-size: 1.4rem; }
    .domain-table { font-size: 0.85rem; }
    .domain-table th, .domain-table td { padding: 7px 8px; }
  }
</style>
</head>
<body>
<div class="container">

  <h1>Jednakost funkcija ‚Äî Analiza domena</h1>
  <p class="subtitle">Kada su dve funkcije zaista jednake?</p>

  <!-- Problem Statement -->
  <div class="card">
    <h2>üìã Postavka zadatka</h2>
    <div class="problem-statement">
      <p>Date su funkcije:</p>
      \[
        f_1(x) = x, \quad f_2(x) = \frac{x^2}{x}, \quad f_3(x) = \sqrt{x^2}, \quad f_4(x) = (\sqrt{x})^2
      \]
      <p>Taƒçan je iskaz:</p>
      <div class="options">
        <div class="option">(A) Sve funkcije su meƒëusobno jednake</div>
        <div class="option">(B) \( f_1 = f_2 \neq f_3 \)</div>
        <div class="option">(C) Meƒëu datim funkcijama nema meƒëusobno jednakih</div>
        <div class="option">(D) \( f_1 = f_3 \neq f_4 \)</div>
        <div class="option">(E) \( f_1 \neq f_3 = f_4 \)</div>
        <div class="option">(N) Ne znam</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <h2>üó∫Ô∏è Plan re≈°avanja</h2>
    <p>Da bismo utvrdili koje su funkcije jednake, moramo proveriti <strong>dva uslova</strong> za svaki par:</p>
    <ol style="margin: 12px 0 0 20px; color: #cbd5e1;">
      <li>Da li imaju <strong>isti domen</strong> (oblast definisanosti)?</li>
      <li>Da li daju <strong>istu vrednost</strong> za svako \( x \) iz tog domena?</li>
    </ol>
    <p style="margin-top: 12px; color: #94a3b8;">Ako bilo koji od ova dva uslova nije ispunjen, funkcije <em>nisu</em> jednake ‚Äî ƒçak i ako izgledaju sliƒçno.</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <button class="collapsible-toggle" onclick="toggleCollapsible(this)">
      <span class="arrow">‚ñ∂</span> üìê Kljuƒçne formule i teoreme
    </button>
    <div class="collapsible-content">
      <div class="collapsible-inner">
        <h3>Definicija jednakosti funkcija</h3>
        <p>Funkcije \( f \) i \( g \) su <strong>jednake</strong> (pi≈°emo \( f = g \)) ako i samo ako:</p>
        \[
          D_f = D_g \quad \text{i} \quad f(x) = g(x) \;\; \forall x \in D_f
        \]

        <h3>Korisne identiƒçnosti</h3>
        <ul style="margin-left: 20px; color: #cbd5e1;">
          <li>\( \dfrac{x^2}{x} = x \) samo za \( x \neq 0 \), jer je deljenje nulom nedefinisano.</li>
          <li>\( \sqrt{x^2} = |x| \) za sve \( x \in \mathbb{R} \), jer kvadratni koren daje nenegativan rezultat.</li>
          <li>\( (\sqrt{x})^2 = x \) samo za \( x \geq 0 \), jer \( \sqrt{x} \) zahteva \( x \geq 0 \).</li>
        </ul>

        <h3>Domen slo≈æene funkcije</h3>
        <p>Domen slo≈æenog izraza se odreƒëuje tako ≈°to se tra≈æe <strong>sva ograniƒçenja</strong> u izrazu: imenilac ‚â† 0, podkorena vrednost ‚â• 0, itd.</p>
      </div>
    </div>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <h2>üìä Grafiƒçki prikaz funkcija</h2>
    <p style="color: #94a3b8; margin-bottom: 12px;">Uporedite grafike svih ƒçetiri funkcija. Uoƒçite razlike u domenima i vrednostima.</p>
    <div class="canvas-wrapper">
      <canvas id="graphCanvas" width="900" height="560"></canvas>
    </div>
    <div class="canvas-controls">
      <button id="btnAll" class="active" onclick="setView('all')">Sve funkcije</button>
      <button id="btnF1" onclick="setView('f1')">f‚ÇÅ(x) = x</button>
      <button id="btnF2" onclick="setView('f2')">f‚ÇÇ(x) = x¬≤/x</button>
      <button id="btnF3" onclick="setView('f3')">f‚ÇÉ(x) = ‚àö(x¬≤)</button>
      <button id="btnF4" onclick="setView('f4')">f‚ÇÑ(x) = (‚àöx)¬≤</button>
      <button id="btnCompare12" onclick="setView('c12')">f‚ÇÅ vs f‚ÇÇ</button>
      <button id="btnCompare13" onclick="setView('c13')">f‚ÇÅ vs f‚ÇÉ</button>
      <button id="btnCompare14" onclick="setView('c14')">f‚ÇÅ vs f‚ÇÑ</button>
    </div>
    <div class="legend">
      <div class="legend-item"><div class="legend-swatch" style="background:#60a5fa"></div> f‚ÇÅ(x) = x</div>
      <div class="legend-item"><div class="legend-swatch" style="background:#f472b6"></div> f‚ÇÇ(x) = x¬≤/x</div>
      <div class="legend-item"><div class="legend-swatch" style="background:#4ade80"></div> f‚ÇÉ(x) = ‚àö(x¬≤)</div>
      <div class="legend-item"><div class="legend-swatch" style="background:#fbbf24"></div> f‚ÇÑ(x) = (‚àöx)¬≤</div>
    </div>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>üìù Re≈°enje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step">
      <div class="step-title"><span class="step-number">1</span> Odredimo domen svake funkcije</div>
      <p>Ovo je najva≈æniji korak! Analiziramo svaku funkciju pojedinaƒçno:</p>

      <h3 style="color: #60a5fa;">f‚ÇÅ(x) = x</h3>
      <p>Ova funkcija nema nikakvih ograniƒçenja ‚Äî \( x \) je definisano za svaki realan broj.</p>
      \[ D_{f_1} = \mathbb{R} = (-\infty, +\infty) \]

      <h3 style="color: #f472b6;">f‚ÇÇ(x) = x¬≤/x</h3>
      <p>Brojilac \( x^2 \) je definisan za sve \( x \in \mathbb{R} \). Meƒëutim, imenilac je \( x \), pa moramo iskljuƒçiti \( x = 0 \) (deljenje nulom!).</p>
      \[ D_{f_2} = \mathbb{R} \setminus \{0\} = (-\infty, 0) \cup (0, +\infty) \]

      <h3 style="color: #4ade80;">f‚ÇÉ(x) = ‚àö(x¬≤)</h3>
      <p>Podkoreni izraz je \( x^2 \). Po≈°to je \( x^2 \geq 0 \) za svako \( x \in \mathbb{R} \), koren je uvek definisan.</p>
      \[ D_{f_3} = \mathbb{R} = (-\infty, +\infty) \]

      <h3 style="color: #fbbf24;">f‚ÇÑ(x) = (‚àöx)¬≤</h3>
      <p>Da bi \( \sqrt{x} \) bilo definisano, potrebno je \( x \geq 0 \).</p>
      \[ D_{f_4} = [0, +\infty) \]

      <table class="domain-table">
        <thead>
          <tr><th>Funkcija</th><th>Izraz</th><th>Domen</th><th>Ograniƒçenje</th></tr>
        </thead>
        <tbody>
          <tr><td style="color:#60a5fa; font-weight:700;">\( f_1 \)</td><td>\( x \)</td><td>\( \mathbb{R} \)</td><td>Nema</td></tr>
          <tr><td style="color:#f472b6; font-weight:700;">\( f_2 \)</td><td>\( \frac{x^2}{x} \)</td><td>\( \mathbb{R} \setminus \{0\} \)</td><td>\( x \neq 0 \)</td></tr>
          <tr><td style="color:#4ade80; font-weight:700;">\( f_3 \)</td><td>\( \sqrt{x^2} \)</td><td>\( \mathbb{R} \)</td><td>Nema</td></tr>
          <tr><td style="color:#fbbf24; font-weight:700;">\( f_4 \)</td><td>\( (\sqrt{x})^2 \)</td><td>\( [0, +\infty) \)</td><td>\( x \geq 0 \)</td></tr>
        </tbody>
      </table>
    </div>

    <!-- Checkpoint 1 -->
    <div class="checkpoint" id="cp1">
      <div class="checkpoint-title">‚úÖ Proveri se ‚Äî Domen</div>
      <p>Koliko od datih funkcija ima domen \( \mathbb{R} \)?</p>
      <div>
        <button onclick="checkAnswer('cp1', this, false)">Jedna</button>
        <button onclick="checkAnswer('cp1', this, true)">Dve</button>
        <button onclick="checkAnswer('cp1', this, false)">Tri</button>
        <button onclick="checkAnswer('cp1', this, false)">ƒåetiri</button>
      </div>
      <div class="feedback" id="cp1-feedback"></div>
    </div>

    <!-- Step 2 -->
    <div class="step">
      <div class="step-title"><span class="step-number">2</span> Odredimo formulu svake funkcije na njenom domenu</div>

      <h3 style="color: #60a5fa;">f‚ÇÅ(x) = x</h3>
      <p>Identitet ‚Äî ostaje \( x \) za svako \( x \in \mathbb{R} \).</p>

      <h3 style="color: #f472b6;">f‚ÇÇ(x) = x¬≤/x</h3>
      <p>Za \( x \neq 0 \) mo≈æemo skratiti:</p>
      \[ f_2(x) = \frac{x^2}{x} = x, \quad x \neq 0 \]
      <p>Dakle, <strong>formula</strong> je ista kao kod \( f_1 \), ali <strong>domen je u≈æi</strong> ‚Äî nedostaje taƒçka \( x = 0 \).</p>

      <h3 style="color: #4ade80;">f‚ÇÉ(x) = ‚àö(x¬≤)</h3>
      <p>Ovo je kljuƒçno mesto gde mnogi gre≈°e! Razmislimo pa≈æljivo:</p>
      <ul style="margin-left: 20px; color: #cbd5e1;">
        <li>Za \( x = 3 \): \( \sqrt{3^2} = \sqrt{9} = 3 \) ‚úì</li>
        <li>Za \( x = -3 \): \( \sqrt{(-3)^2} = \sqrt{9} = 3 \neq -3 \) ‚úó</li>
      </ul>
      <p style="margin-top: 8px;">Koren uvek daje <strong>nenegativnu</strong> vrednost, pa:</p>
      \[ f_3(x) = \sqrt{x^2} = |x|, \quad x \in \mathbb{R} \]

      <h3 style="color: #fbbf24;">f‚ÇÑ(x) = (‚àöx)¬≤</h3>
      <p>Za \( x \geq 0 \): \( (\sqrt{x})^2 = x \). Dakle:</p>
      \[ f_4(x) = x, \quad x \in [0, +\infty) \]
    </div>

    <!-- Checkpoint 2 -->
    <div class="checkpoint" id="cp2">
      <div class="checkpoint-title">‚úÖ Proveri se ‚Äî Formula</div>
      <p>Koja je upro≈°ƒáena formula za \( f_3(x) = \sqrt{x^2} \)?</p>
      <div>
        <button onclick="checkAnswer('cp2', this, false)">\( x \)</button>
        <button onclick="checkAnswer('cp2', this, true)">\( |x| \)</button>
        <button onclick="checkAnswer('cp2', this, false)">\( x^2 \)</button>
        <button onclick="checkAnswer('cp2', this, false)">\( -x \)</button>
      </div>
      <div class="feedback" id="cp2-feedback"></div>
    </div>

    <!-- Step 3 -->
    <div class="step">
      <div class="step-title"><span class="step-number">3</span> Uporedimo sve parove funkcija</div>
      <p>Sada sistematski proveravamo svaki par. Podsetimo se: funkcije su jednake <strong>samo ako imaju isti domen I istu formulu</strong>.</p>

      <div class="comparison-grid">
        <div class="comp-card">
          <h4>f‚ÇÅ vs f‚ÇÇ</h4>
          <p>\( D_{f_1} = \mathbb{R} \), \( D_{f_2} = \mathbb{R} \setminus \{0\} \)</p>
          <p>Domeni su <strong>razliƒçiti</strong> (\( f_1 \) je definisana u nuli, \( f_2 \) nije).</p>
          <div class="verdict nejednake">‚â† Nejednake (razliƒçit domen)</div>
        </div>
        <div class="comp-card">
          <h4>f‚ÇÅ vs f‚ÇÉ</h4>
          <p>\( D_{f_1} = D_{f_3} = \mathbb{R} \) ‚Äî domeni su isti!</p>
          <p>Ali: \( f_1(-2) = -2 \), dok \( f_3(-2) = |-2| = 2 \).</p>
          <div class="verdict nejednake">‚â† Nejednake (razliƒçita formula)</div>
        </div>
        <div class="comp-card">
          <h4>f‚ÇÅ vs f‚ÇÑ</h4>
          <p>\( D_{f_1} = \mathbb{R} \), \( D_{f_4} = [0, +\infty) \)</p>
          <p>Domeni su <strong>razliƒçiti</strong> (\( f_1 \) je definisana i za negativne, \( f_4 \) nije).</p>
          <div class="verdict nejednake">‚â† Nejednake (razliƒçit domen)</div>
        </div>
        <div class="comp-card">
          <h4>f‚ÇÇ vs f‚ÇÉ</h4>
          <p>\( D_{f_2} = \mathbb{R} \setminus \{0\} \), \( D_{f_3} = \mathbb{R} \)</p>
          <p>Domeni su razliƒçiti. Dodatno, za \( x < 0 \): \( f_2(x) = x < 0 \), ali \( f_3(x) = |x| > 0 \).</p>
          <div class="verdict nejednake">‚â† Nejednake (oba razloga)</div>
        </div>
        <div class="comp-card">
          <h4>f‚ÇÇ vs f‚ÇÑ</h4>
          <p>\( D_{f_2} = \mathbb{R} \setminus \{0\} \), \( D_{f_4} = [0, +\infty) \)</p>
          <p>Domeni su razliƒçiti (\( f_2 \) ukljuƒçuje negativne, \( f_4 \) ne; \( f_4 \) ukljuƒçuje 0, \( f_2 \) ne).</p>
          <div class="verdict nejednake">‚â† Nejednake (razliƒçit domen)</div>
        </div>
        <div class="comp-card">
          <h4>f‚ÇÉ vs f‚ÇÑ</h4>
          <p>\( D_{f_3} = \mathbb{R} \), \( D_{f_4} = [0, +\infty) \)</p>
          <p>Domeni su razliƒçiti. Na \( [0, +\infty) \) obe daju \( x \), ali \( f_3 \) je definisana i za negativne.</p>
          <div class="verdict nejednake">‚â† Nejednake (razliƒçit domen)</div>
        </div>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step">
      <div class="step-title"><span class="step-number">4</span> Zakljuƒçak</div>
      <p>Po≈°to je svaki par funkcija nejednak (bilo zbog razliƒçitog domena, bilo zbog razliƒçite formule, ili oba razloga), zakljuƒçujemo:</p>
      \[
        \boxed{\text{Meƒëu datim funkcijama nema meƒëusobno jednakih.}}
      \]
    </div>
  </div>

  <!-- Key Insight -->
  <div class="card insight">
    <h3>üí° Kljuƒçni uvid</h3>
    <p>Algebarski izrazi koji izgledaju ‚Äûisto" nakon upro≈°ƒáavanja mogu predstavljati <strong>razliƒçite funkcije</strong> jer upro≈°ƒáavanje menja domen. Na primer:</p>
    <ul style="margin: 10px 0 0 20px;">
      <li>\( \frac{x^2}{x} \) ‚Äûizgleda kao" \( x \), ali nije definisano za \( x = 0 \).</li>
      <li>\( \sqrt{x^2} \) ‚Äûizgleda kao" \( x \), ali je zapravo \( |x| \).</li>
      <li>\( (\sqrt{x})^2 \) ‚Äûizgleda kao" \( x \), ali samo za \( x \geq 0 \).</li>
    </ul>
    <p style="margin-top: 12px; color: #a5b4fc;"><strong>Zapamtite:</strong> Dve funkcije su jednake samo ako imaju isti domen I istu funkcionalnu vezu. Domen je neodvojiv deo definicije funkcije!</p>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer">
    <div class="label">üéØ Konaƒçan odgovor</div>
    <div class="answer-text">(C) Meƒëu datim funkcijama nema meƒëusobno jednakih</div>
    <div class="options-review">
      <div class="opt-row wrong">(A) Sve funkcije su meƒëusobno jednake ‚Äî Netaƒçno: imaju razliƒçite domene i formule.</div>
      <div class="opt-row wrong">(B) \( f_1 = f_2 \neq f_3 \) ‚Äî Netaƒçno: \( f_1 \neq f_2 \) jer \( D_{f_1} \neq D_{f_2} \).</div>
      <div class="opt-row right">(C) Meƒëu datim funkcijama nema meƒëusobno jednakih ‚Äî Taƒçno! ‚úì</div>
      <div class="opt-row wrong">(D) \( f_1 = f_3 \neq f_4 \) ‚Äî Netaƒçno: \( f_1 \neq f_3 \) jer \( f_3(x) = |x| \neq x \) za \( x < 0 \).</div>
      <div class="opt-row wrong">(E) \( f_1 \neq f_3 = f_4 \) ‚Äî Netaƒçno: \( f_3 \neq f_4 \) jer \( D_{f_3} \neq D_{f_4} \).</div>
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>‚ö†Ô∏è Najƒçe≈°ƒáe gre≈°ke</h2>
    <div class="pitfall">
      <strong>Gre≈°ka 1: Zaboravljanje domena pri skraƒáivanju razlomka.</strong><br>
      Mnogi studenti zapi≈°u \( \frac{x^2}{x} = x \) i zaborave da ova jednakost va≈æi samo za \( x \neq 0 \). Skraƒáivanje razlomka ne pro≈°iruje domen!
    </div>
    <div class="pitfall">
      <strong>Gre≈°ka 2: Pogre≈°na primena korena na kvadrat.</strong><br>
      ƒåesta gre≈°ka: \( \sqrt{x^2} = x \). Taƒçno je \( \sqrt{x^2} = |x| \). Koren je po definiciji nenegativan, pa za \( x < 0 \) dobijamo \( -x \), ne \( x \).
    </div>
    <div class="pitfall">
      <strong>Gre≈°ka 3: Ignorisanje domena pri uporeƒëivanju funkcija.</strong><br>
      ƒåak i kad dve funkcije imaju istu formulu na zajedniƒçkom delu domena, ako im se domeni razlikuju, one <em>nisu jednake</em>.
    </div>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge">
    <h3>üöÄ Izazov za razmi≈°ljanje</h3>
    <p>Razmotrite funkcije:</p>
    \[
      g_1(x) = \ln(x^2), \quad g_2(x) = 2\ln(x), \quad g_3(x) = 2\ln|x|
    \]
    <p>Da li je neka od ovih funkcija jednaka nekoj drugoj? Odredite domene i uporedite ih koristeƒái isti postupak koji smo primenili u ovom zadatku.</p>
    <p style="color: #94a3b8; margin-top: 8px;"><em>Savet: \( \ln(x^2) = 2\ln|x| \) za \( x \neq 0 \), dok \( 2\ln(x) \) zahteva \( x > 0 \).</em></p>
  </div>

</div>

<script>
(function() {
  // ========== COLLAPSIBLE ==========
  window.toggleCollapsible = function(btn) {
    btn.classList.toggle('open');
    var content = btn.nextElementSibling;
    content.classList.toggle('open');
  };

  // ========== CHECKPOINTS ==========
  window.checkAnswer = function(cpId, btn, isCorrect) {
    var cp = document.getElementById(cpId);
    var buttons = cp.querySelectorAll('button');
    var fb = document.getElementById(cpId + '-feedback');

    buttons.forEach(function(b) { b.disabled = true; });

    if (isCorrect) {
      btn.classList.add('correct');
      fb.className = 'feedback show correct-fb';
      if (cpId === 'cp1') {
        fb.textContent = 'Taƒçno! Samo f‚ÇÅ i f‚ÇÉ imaju domen ‚Ñù. Funkcija f‚ÇÇ nema x = 0, a f‚ÇÑ je definisana samo za x ‚â• 0.';
      } else if (cpId === 'cp2') {
        fb.textContent = 'Odliƒçno! ‚àö(x¬≤) = |x| jer kvadratni koren uvek daje nenegativnu vrednost. Za x = -3: ‚àö(9) = 3 = |-3|.';
      }
    } else {
      btn.classList.add('incorrect');
      fb.className = 'feedback show incorrect-fb';
      if (cpId === 'cp1') {
        fb.textContent = 'Nije taƒçno. Probajte ponovo: f‚ÇÅ(x) = x ima domen ‚Ñù, f‚ÇÇ iskljuƒçuje 0, f‚ÇÉ je definisana svuda, f‚ÇÑ samo za x ‚â• 0.';
      } else if (cpId === 'cp2') {
        fb.textContent = 'Nije taƒçno. Razmislite: ≈°ta je ‚àö((-3)¬≤)? ‚àö(9) = 3, a ne -3. Koren uvek daje nenegativan rezultat.';
      }
      setTimeout(function() {
        buttons.forEach(function(b) { b.disabled = false; b.classList.remove('incorrect'); });
        fb.className = 'feedback';
      }, 2500);
    }
  };

  // ========== CANVAS GRAPH ==========
  var canvas = document.getElementById('graphCanvas');
  var ctx = canvas.getContext('2d');
  var dpr = window.devicePixelRatio || 1;
  var currentView = 'all';

  function resizeCanvas() {
    var rect = canvas.getBoundingClientRect();
    canvas.width = rect.width * dpr;
    canvas.height = rect.height * dpr;
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    drawGraph();
  }

  var viewX = 0, viewY = 0, viewScale = 40;
  var isDragging = false, dragStartX = 0, dragStartY = 0, dragViewX = 0, dragViewY = 0;

  function toScreen(x, y) {
    var rect = canvas.getBoundingClientRect();
    var cx = rect.width / 2;
    var cy = rect.height / 2;
    return [cx + (x - viewX) * viewScale, cy - (y - viewY) * viewScale];
  }

  function toWorld(sx, sy) {
    var rect = canvas.getBoundingClientRect();
    var cx = rect.width / 2;
    var cy = rect.height / 2;
    return [(sx - cx) / viewScale + viewX, -(sy - cy) / viewScale + viewY];
  }

  function drawGraph() {
    var rect = canvas.getBoundingClientRect();
    var w = rect.width;
    var h = rect.height;
    ctx.clearRect(0, 0, w, h);

    // Background
    ctx.fillStyle = '#0c1629';
    ctx.fillRect(0, 0, w, h);

    // Grid
    var worldLeft = toWorld(0, 0)[0];
    var worldRight = toWorld(w, 0)[0];
    var worldTop = toWorld(0, 0)[1];
    var worldBottom = toWorld(0, h)[1];

    var gridStep = 1;
    if (viewScale < 20) gridStep = 2;
    if (viewScale < 10) gridStep = 5;
    if (viewScale > 80) gridStep = 0.5;

    ctx.lineWidth = 0.5;
    ctx.strokeStyle = '#1e293b';
    ctx.beginPath();
    for (var gx = Math.floor(worldLeft / gridStep) * gridStep; gx <= worldRight; gx += gridStep) {
      var sp = toScreen(gx, 0);
      ctx.moveTo(sp[0], 0);
      ctx.lineTo(sp[0], h);
    }
    for (var gy = Math.floor(worldBottom / gridStep) * gridStep; gy <= worldTop; gy += gridStep) {
      var sp2 = toScreen(0, gy);
      ctx.moveTo(0, sp2[1]);
      ctx.lineTo(w, sp2[1]);
    }
    ctx.stroke();

    // Axes
    var originScreen = toScreen(0, 0);
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(0, originScreen[1]);
    ctx.lineTo(w, originScreen[1]);
    ctx.moveTo(originScreen[0], 0);
    ctx.lineTo(originScreen[0], h);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#64748b';
    ctx.font = '11px system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    for (var lx = Math.ceil(worldLeft / gridStep) * gridStep; lx <= worldRight; lx += gridStep) {
      if (Math.abs(lx) < 0.001) continue;
      var lsp = toScreen(lx, 0);
      var label = (gridStep < 1) ? lx.toFixed(1) : Math.round(lx).toString();
      ctx.fillText(label, lsp[0], originScreen[1] + 4);
    }
    ctx.textAlign = 'right';
    ctx.textBaseline = 'middle';
    for (var ly = Math.ceil(worldBottom / gridStep) * gridStep; ly <= worldTop; ly += gridStep) {
      if (Math.abs(ly) < 0.001) continue;
      var lsp2 = toScreen(0, ly);
      var label2 = (gridStep < 1) ? ly.toFixed(1) : Math.round(ly).toString();
      ctx.fillText(label2, originScreen[0] - 6, lsp2[1]);
    }

    // Origin label
    ctx.textAlign = 'right';
    ctx.textBaseline = 'top';
    ctx.fillText('0', originScreen[0] - 4, originScreen[1] + 4);

    // Axis arrows and labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.textBaseline = 'bottom';
    ctx.fillText('x', w - 16, originScreen[1] - 6);
    ctx.textAlign = 'right';
    ctx.textBaseline = 'top';
    ctx.fillText('y', originScreen[0] + 14, 8);

    // Function definitions
    var show = {f1: false, f2: false, f3: false, f4: false};

    if (currentView === 'all') { show.f1 = show.f2 = show.f3 = show.f4 = true; }
    else if (currentView === 'f1') { show.f1 = true; }
    else if (currentView === 'f2') { show.f2 = true; }
    else if (currentView === 'f3') { show.f3 = true; }
    else if (currentView === 'f4') { show.f4 = true; }
    else if (currentView === 'c12') { show.f1 = show.f2 = true; }
    else if (currentView === 'c13') { show.f1 = show.f3 = true; }
    else if (currentView === 'c14') { show.f1 = show.f4 = true; }

    var step = 1 / viewScale;
    var halfStep = step / 2;

    // Draw f3 first (behind) - green
    if (show.f3) {
      ctx.strokeStyle = '#4ade80';
      ctx.lineWidth = 2.5;
      ctx.setLineDash([]);
      ctx.beginPath();
      var started3 = false;
      for (var x3 = worldLeft; x3 <= worldRight; x3 += step) {
        var y3 = Math.abs(x3);
        var sp3 = toScreen(x3, y3);
        if (!started3) { ctx.moveTo(sp3[0], sp3[1]); started3 = true; }
        else { ctx.lineTo(sp3[0], sp3[1]); }
      }
      ctx.stroke();

      // Label
      if (currentView !== 'all') {
        ctx.fillStyle = '#4ade80';
        ctx.font = 'bold 13px system-ui, sans-serif';
        ctx.textAlign = 'left';
        ctx.textBaseline = 'bottom';
        var labelPt3 = toScreen(-3, 3);
        ctx.fillText('f‚ÇÉ(x) = ‚àö(x¬≤) = |x|', labelPt3[0] + 6, labelPt3[1] - 6);
        ctx.fillText('D = ‚Ñù', labelPt3[0] + 6, labelPt3[1] + 10);
      }
    }

    // Draw f4 - yellow
    if (show.f4) {
      ctx.strokeStyle = '#fbbf24';
      ctx.lineWidth = 2.5;
      ctx.setLineDash([]);
      ctx.beginPath();
      var started4 = false;
      for (var x4 = Math.max(0, worldLeft); x4 <= worldRight; x4 += step) {
        var y4 = x4;
        var sp4 = toScreen(x4, y4);
        if (!started4) { ctx.moveTo(sp4[0], sp4[1]); started4 = true; }
        else { ctx.lineTo(sp4[0], sp4[1]); }
      }
      ctx.stroke();

      // Domain boundary marker at x=0
      var sp4origin = toScreen(0, 0);
      ctx.fillStyle = '#fbbf24';
      ctx.beginPath();
      ctx.arc(sp4origin[0], sp4origin[1], 5, 0, Math.PI * 2);
      ctx.fill();

      if (currentView !== 'all') {
        ctx.fillStyle = '#fbbf24';
        ctx.font = 'bold 13px system-ui, sans-serif';
        ctx.textAlign = 'left';
        ctx.textBaseline = 'bottom';
        var labelPt4 = toScreen(3, 3);
        ctx.fillText('f‚ÇÑ(x) = (‚àöx)¬≤ = x', labelPt4[0] + 6, labelPt4[1] - 6);
        ctx.fillText('D = [0, +‚àû)', labelPt4[0] + 6, labelPt4[1] + 10);
      }
    }

    // Draw f1 - blue
    if (show.f1) {
      ctx.strokeStyle = '#60a5fa';
      ctx.lineWidth = 2.5;
      ctx.setLineDash([]);
      ctx.beginPath();
      var sp1s = toScreen(worldLeft, worldLeft);
      ctx.moveTo(sp1s[0], sp1s[1]);
      var sp1e = toScreen(worldRight, worldRight);
      ctx.lineTo(sp1e[0], sp1e[1]);
      ctx.stroke();

      if (currentView !== 'all') {
        ctx.fillStyle = '#60a5fa';
        ctx.font = 'bold 13px system-ui, sans-serif';
        ctx.textAlign = 'left';
        ctx.textBaseline = 'bottom';
        var labelPt1 = toScreen(2, 2);
        ctx.fillText('f‚ÇÅ(x) = x', labelPt1[0] + 6, labelPt1[1] - 6);
        ctx.fillText('D = ‚Ñù', labelPt1[0] + 6, labelPt1[1] + 10);
      }
    }

    // Draw f2 - pink (with hole at origin)
    if (show.f2) {
      ctx.strokeStyle = '#f472b6';
      ctx.lineWidth = 2.5;
      ctx.setLineDash([6, 4]);

      // Left part: x < 0
      ctx.beginPath();
      var sp2ls = toScreen(worldLeft, worldLeft);
      ctx.moveTo(sp2ls[0], sp2ls[1]);
      var sp2le = toScreen(-halfStep, -halfStep);
      ctx.lineTo(sp2le[0], sp2le[1]);
      ctx.stroke();

      // Right part: x > 0
      ctx.beginPath();
      var sp2rs = toScreen(halfStep, halfStep);
      ctx.moveTo(sp2rs[0], sp2rs[1]);
      var sp2re = toScreen(worldRight, worldRight);
      ctx.lineTo(sp2re[0], sp2re[1]);
      ctx.stroke();

      ctx.setLineDash([]);

      // Open circle at origin (hole)
      var sp2origin = toScreen(0, 0);
      ctx.strokeStyle = '#f472b6';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.arc(sp2origin[0], sp2origin[1], 6, 0, Math.PI * 2);
      ctx.stroke();
      // Fill with background color
      ctx.fillStyle = '#0c1629';
      ctx.beginPath();
      ctx.arc(sp2origin[0], sp2origin[1], 5, 0, Math.PI * 2);
      ctx.fill();

      if (currentView !== 'all') {
        ctx.fillStyle = '#f472b6';
        ctx.font = 'bold 13px system-ui, sans-serif';
        ctx.textAlign = 'left';
        ctx.textBaseline = 'bottom';
        var labelPt2 = toScreen(1, 1);
        ctx.fillText('f‚ÇÇ(x) = x¬≤/x = x', labelPt2[0] + 8, labelPt2[1] - 24);
        ctx.fillText('D = ‚Ñù \\ {0}', labelPt2[0] + 8, labelPt2[1] - 8);
      }
    }

    // All-view labels
    if (currentView === 'all') {
      ctx.font = 'bold 12px system-ui, sans-serif';
      ctx.textAlign = 'left';

      var ly1 = toScreen(-6, -6);
      ctx.fillStyle = '#60a5fa';
      ctx.fillText('f‚ÇÅ = x (D = ‚Ñù)', ly1[0] - 20, ly1[1] - 10);

      ctx.fillStyle = '#f472b6';
      var ly2 = toScreen(0.4, 0);
      ctx.fillText('f‚ÇÇ: rupa u x=0', ly2[0] + 12, ly2[1] + 18);

      ctx.fillStyle = '#4ade80';
      var ly3 = toScreen(-5, 5);
      ctx.fillText('f‚ÇÉ = |x| (D = ‚Ñù)', ly3[0] - 20, ly3[1] - 6);

      ctx.fillStyle = '#fbbf24';
      var ly4 = toScreen(0, 0);
      ctx.fillText('f‚ÇÑ poƒçinje od x=0', ly4[0] + 12, ly4[1] - 16);
    }

    // Highlight differences based on view
    if (currentView === 'c12') {
      // Highlight hole
      var holePos = toScreen(0, 0);
      ctx.strokeStyle = '#ef4444';
      ctx.lineWidth = 2;
      ctx.setLineDash([]);
      ctx.beginPath();
      ctx.arc(holePos[0], holePos[1], 16, 0, Math.PI * 2);
      ctx.stroke();
      ctx.fillStyle = '#ef4444';
      ctx.font = 'bold 13px system-ui, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText('Razlika! f‚ÇÇ nije definisana u x=0', holePos[0] + 20, holePos[1] + 30);
    }

    if (currentView === 'c13') {
      // Shade region where they differ (x < 0)
      ctx.fillStyle = 'rgba(239, 68, 68, 0.08)';
      var leftEdge = toScreen(worldLeft, 0);
      var originPt = toScreen(0, 0);
      ctx.fillRect(leftEdge[0], 0, originPt[0] - leftEdge[0], h);

      ctx.fillStyle = '#ef4444';
      ctx.font = 'bold 13px system-ui, sans-serif';
      ctx.textAlign = 'center';
      var diffLabel = toScreen(-3, 0);
      ctx.fillText('Za x < 0: f‚ÇÅ(x) = x, ali f‚ÇÉ(x) = |x| = -x', diffLabel[0], diffLabel[1] + 20);
      ctx.fillText('Razliƒçite vrednosti!', diffLabel[0], diffLabel[1] + 38);
    }

    if (currentView === 'c14') {
      // Shade region where f1 exists but f4 doesn't
      ctx.fillStyle = 'rgba(239, 68, 68, 0.08)';
      var leftEdge2 = toScreen(worldLeft, 0);
      var originPt2 = toScreen(0, 0);
      ctx.fillRect(leftEdge2[0], 0, originPt2[0] - leftEdge2[0], h);

      ctx.fillStyle = '#ef4444';
      ctx.font = 'bold 13px system-ui, sans-serif';
      ctx.textAlign = 'center';
      var diffLabel2 = toScreen(-3, 0);
      ctx.fillText('Za x < 0: f‚ÇÑ nije definisana!', diffLabel2[0], diffLabel2[1] + 20);
      ctx.fillText('Razliƒçiti domeni', diffLabel2[0], diffLabel2[1] + 38);
    }
  }

  window.setView = function(v) {
    currentView = v;
    var buttons = document.querySelectorAll('.canvas-controls button');
    buttons.forEach(function(b) { b.classList.remove('active'); });
    var map = { 'all': 'btnAll', 'f1': 'btnF1', 'f2': 'btnF2', 'f3': 'btnF3', 'f4': 'btnF4',
                'c12': 'btnCompare12', 'c13': 'btnCompare13', 'c14': 'btnCompare14' };
    var activeBtn = document.getElementById(map[v]);
    if (activeBtn) activeBtn.classList.add('active');
    drawGraph();
  };

  // Pan/zoom interactions
  canvas.addEventListener('pointerdown', function(e) {
    isDragging = true;
    dragStartX = e.clientX;
    dragStartY = e.clientY;
    dragViewX = viewX;
    dragViewY = viewY;
    canvas.setPointerCapture(e.pointerId);
  });

  canvas.addEventListener('pointermove', function(e) {
    if (!isDragging) return;
    var dx = e.clientX - dragStartX;
    var dy = e.clientY - dragStartY;
    viewX = dragViewX - dx / viewScale;
    viewY = dragViewY + dy / viewScale;
    drawGraph();
  });

  canvas.addEventListener('pointerup', function(e) {
    isDragging = false;
    canvas.releasePointerCapture(e.pointerId);
  });

  canvas.addEventListener('wheel', function(e) {
    e.preventDefault();
    var factor = e.deltaY > 0 ? 0.9 : 1.1;
    var newScale = viewScale * factor;
    if (newScale < 5) newScale = 5;
    if (newScale > 200) newScale = 200;

    // Zoom toward cursor position
    var rect = canvas.getBoundingClientRect();
    var mx = e.clientX - rect.left;
    var my = e.clientY - rect.top;
    var worldPt = toWorld(mx, my);

    viewScale = newScale;

    var newWorldPt = toWorld(mx, my);
    viewX += worldPt[0] - newWorldPt[0];
    viewY += worldPt[1] - newWorldPt[1];

    drawGraph();
  }, { passive: false });

  // Touch zoom
  var lastPinchDist = 0;
  canvas.addEventListener('touchstart', function(e) {
    if (e.touches.length === 2) {
      var dx = e.touches[0].clientX - e.touches[1].clientX;
      var dy = e.touches[0].clientY - e.touches[1].clientY;
      lastPinchDist = Math.sqrt(dx * dx + dy * dy);
    }
  }, { passive: true });

  canvas.addEventListener('touchmove', function(e) {
    if (e.touches.length === 2) {
      e.preventDefault();
      var dx = e.touches[0].clientX - e.touches[1].clientX;
      var dy = e.touches[0].clientY - e.touches[1].clientY;
      var dist = Math.sqrt(dx * dx + dy * dy);
      if (lastPinchDist > 0) {
        var factor = dist / lastPinchDist;
        var newScale = viewScale * factor;
        if (newScale >= 5 && newScale <= 200) {
          viewScale = newScale;
          drawGraph();
        }
      }
      lastPinchDist = dist;
    }
  }, { passive: false });

  // Initialize
  window.addEventListener('resize', resizeCanvas);
  window.addEventListener('load', function() {
    setTimeout(resizeCanvas, 100);
  });
  resizeCanvas();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{"title":"Jednakost funkcija ‚Äî Analiza domena","subject":"math","unit":"functions","topic_tags":["funkcije","domen funkcije","jednakost funkcija","apsolutna vrednost","algebarski izrazi"]}
BRAINSPARK_META-->