<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jednakokraki trapez sa upisanim krugom</title>
<script>MathJax={tex:{inlineMath:[['\\(','\\)'],['$','$']],displayMath:[['\\[','\\]']]},svg:{fontCache:'global'}};</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<script type="text/info" id="logic-scratchpad">
PROBLEM: Isosceles trapezoid, perimeter=32, inradius=2, find a-c.

STEP 1: Tangential polygon property
For any polygon with an inscribed circle: Area = s * r, where s = semi-perimeter.
s = 32/2 = 16, r = 2, so A = 16 * 2 = 32 cm².

STEP 2: Tangential trapezoid property
For a trapezoid with an inscribed circle: a + c = b + d.
Since isosceles: b = d, so a + c = 2b.
Perimeter: a + c + 2b = 32 → 2(a+c) = 32 → a + c = 16, b = 8.

STEP 3: Height from area
A = (a+c)/2 * h → 32 = 16/2 * h = 8h → h = 4.
Also h = 2r = 4 (circle touches both bases). Consistent.

STEP 4: Pythagorean theorem on leg
The horizontal projection of each leg = (a - c)/2.
b² = h² + ((a-c)/2)²
64 = 16 + (a-c)²/4
48 = (a-c)²/4
(a-c)² = 192
a - c = √192 = √(64·3) = 8√3.

ANSWER: (B) 8√3.
</script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#0f172a;color:#e2e8f0;font-family:'Segoe UI',system-ui,-apple-system,sans-serif;line-height:1.7;padding:20px}
.container{max-width:1200px;margin:0 auto}
h1{text-align:center;font-size:2rem;margin:30px 0;background:linear-gradient(135deg,#60a5fa,#a78bfa);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
h2{color:#60a5fa;margin:0 0 15px;font-size:1.35rem;display:flex;align-items:center;gap:8px}
h3{color:#a78bfa;margin:15px 0 10px;font-size:1.1rem}
.card{background:#1e293b;border:1px solid #334155;border-radius:16px;padding:28px;margin:24px 0}
.problem-statement{border-left:4px solid #a78bfa;padding-left:20px;font-size:1.1rem;color:#e2e8f0}
.plan-step{display:flex;align-items:flex-start;gap:12px;margin:10px 0;padding:12px;background:#0f172a;border-radius:10px}
.plan-num{background:linear-gradient(135deg,#60a5fa,#a78bfa);color:#0f172a;font-weight:700;width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:.85rem}
.theory-toggle{background:#1e293b;border:2px solid #334155;color:#e2e8f0;padding:14px 22px;border-radius:12px;cursor:pointer;font-size:1rem;width:100%;text-align:left;transition:all .3s}
.theory-toggle:hover{border-color:#60a5fa;background:#253349}
.theory-content{padding:20px;background:#0f172a;border-radius:0 0 12px 12px;border:1px solid #334155;border-top:none;display:none;margin-top:-4px}
.theory-content.open{display:block}
.formula-box{background:#1e293b;border:1px solid #334155;border-radius:10px;padding:16px;margin:10px 0}
.formula-label{color:#94a3b8;font-size:.85rem;margin-bottom:6px}
canvas{width:100%;border-radius:12px;display:block;background:#0f172a;touch-action:none}
.step-card{background:#0f172a;border:1px solid #334155;border-radius:12px;padding:20px;margin:18px 0;position:relative;border-left:3px solid #60a5fa}
.step-card.highlight{border-left-color:#a78bfa}
.step-card.result{border-left-color:#4ade80}
.step-num{display:inline-block;background:#60a5fa;color:#0f172a;font-weight:700;padding:2px 10px;border-radius:6px;font-size:.85rem;margin-bottom:10px}
details.checkpoint{margin:15px 0;background:#1a2744;border:1px solid #334155;border-radius:10px;padding:0}
details.checkpoint summary{padding:14px 18px;cursor:pointer;color:#60a5fa;font-weight:600;list-style:none;display:flex;align-items:center;gap:8px}
details.checkpoint summary::before{content:'';display:none}
details.checkpoint summary::-webkit-details-marker{display:none}
details.checkpoint[open] summary{border-bottom:1px solid #334155}
details.checkpoint .checkpoint-content{padding:16px 18px;color:#94a3b8}
.insight-box{background:linear-gradient(135deg,rgba(96,165,250,0.1),rgba(167,139,250,0.1));border:1px solid #60a5fa;border-radius:12px;padding:20px;margin:18px 0}
.final-answer{background:linear-gradient(135deg,rgba(52,211,153,0.15),rgba(74,222,128,0.1));border:2px solid #34d399;border-radius:16px;padding:24px;margin:24px 0;text-align:center}
.final-answer .answer-value{font-size:1.8rem;color:#4ade80;font-weight:700;margin:12px 0}
.options-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:10px;margin:16px 0}
.option{padding:12px;border-radius:10px;text-align:center;background:#0f172a;border:2px solid #334155;font-size:1rem}
.option.correct{border-color:#4ade80;background:rgba(74,222,128,0.1);color:#4ade80;font-weight:700}
.pitfall{display:flex;gap:12px;align-items:flex-start;margin:12px 0;padding:14px;background:#0f172a;border-radius:10px;border:1px solid #334155}
.pitfall-icon{font-size:1.3rem;flex-shrink:0}
.challenge-box{background:linear-gradient(135deg,rgba(244,114,182,0.1),rgba(167,139,250,0.1));border:1px solid #f472b6;border-radius:12px;padding:20px}
.muted{color:#94a3b8}
.controls{display:flex;gap:10px;margin:10px 0;flex-wrap:wrap}
.btn{background:#334155;border:1px solid #475569;color:#e2e8f0;padding:8px 16px;border-radius:8px;cursor:pointer;font-size:.85rem;transition:all .2s}
.btn:hover{background:#475569}
.btn.active{background:#60a5fa;color:#0f172a;border-color:#60a5fa}
.verification{background:#0f172a;border:1px solid #334155;border-radius:10px;padding:16px;margin:12px 0}
.verification-title{color:#34d399;font-weight:600;margin-bottom:8px}
</style>
</head>
<body>
<div class="container">

<h1>Jednakokraki trapez sa upisanim krugom</h1>

<!-- Problem Statement -->
<div class="card">
<h2>Postavka zadatka</h2>
<div class="problem-statement">
<p>Razlika vece i manje osnovice jednakokrakog trapeza ciji je obim \(32\) cm a poluprecnik upisanog kruga \(2\) cm, iznosi (u cm):</p>
<p style="margin-top:12px;color:#94a3b8">(A) \(\sqrt{3}\) &nbsp;&nbsp; (B) \(8\sqrt{3}\) &nbsp;&nbsp; (C) \(\sqrt{6}\) &nbsp;&nbsp; (D) \(3\sqrt{2}\) &nbsp;&nbsp; (E) \(6\sqrt{6}\) &nbsp;&nbsp; (N) Ne znam</p>
</div>
</div>

<!-- Plan -->
<div class="card">
<h2>Plan resavanja</h2>
<div class="plan-step"><div class="plan-num">1</div><div>Primeniti svojstvo tangentnog trapeza: \(a + c = b + d\) (zbir naspramnih strana su jednaki)</div></div>
<div class="plan-step"><div class="plan-num">2</div><div>Izracunati stranice iz obima i svojstva jednakokrakog trapeza</div></div>
<div class="plan-step"><div class="plan-num">3</div><div>Odrediti visinu trapeza koristeci poluprecnik upisanog kruga</div></div>
<div class="plan-step"><div class="plan-num">4</div><div>Pitagorinom teoremom izracunati razliku osnovica \(a - c\)</div></div>
</div>

<!-- Theory -->
<div class="card">
<button class="theory-toggle" onclick="toggleTheory()">&#128208; Kljucne formule i teoreme &#9660;</button>
<div class="theory-content" id="theory-content">
<div class="formula-box">
<div class="formula-label">Tangentni mnogougao (mnogougao sa upisanim krugom)</div>
\[P = s \cdot r\]
<p class="muted" style="margin-top:6px">gde je \(s\) poluobim, a \(r\) poluprecnik upisanog kruga.</p>
</div>
<div class="formula-box">
<div class="formula-label">Tangentni trapez - svojstvo stranica</div>
\[a + c = b + d\]
<p class="muted" style="margin-top:6px">Zbir duzina naspramnih strana tangentnog cetvougla su jednaki. Za trapez sa osnovicama \(a\) (veca) i \(c\) (manja) i kracima \(b, d\).</p>
</div>
<div class="formula-box">
<div class="formula-label">Povrsina trapeza</div>
\[P = \frac{a + c}{2} \cdot h\]
<p class="muted" style="margin-top:6px">gde je \(h\) visina trapeza.</p>
</div>
<div class="formula-box">
<div class="formula-label">Pitagorina teorema</div>
\[b^2 = h^2 + \left(\frac{a - c}{2}\right)^2\]
<p class="muted" style="margin-top:6px">Primenjena na pravougli trougao formiran visinom, krakom i horizontalnom projekcijom kraka.</p>
</div>
</div>
</div>

<!-- Visual Aid -->
<div class="card">
<h2>Interaktivna ilustracija</h2>
<p class="muted" style="margin-bottom:12px">Prevucite tacke da vidite kako se menjaju dimenzije. Koristite dugmice za razlicite prikaze.</p>
<div class="controls">
<button class="btn active" id="btn-all" onclick="setView('all')">Sve</button>
<button class="btn" id="btn-triangle" onclick="setView('triangle')">Pravougli trougao</button>
<button class="btn" id="btn-tangent" onclick="setView('tangent')">Tangentne tacke</button>
<button class="btn" id="btn-dims" onclick="setView('dims')">Dimenzije</button>
</div>
<canvas id="trapezCanvas" width="900" height="520"></canvas>
</div>

<!-- Step-by-Step Solution -->
<div class="card">
<h2>Resenje korak po korak</h2>

<div class="step-card">
<div class="step-num">Korak 1</div>
<h3>Svojstvo tangentnog trapeza</h3>
<p>Kada cetvorougao ima upisani krug, zbir duzina naspramnih strana su jednaki. Za nas trapez sa vecam osnovicom \(a\), manjom osnovicom \(c\) i kracima \(b\) i \(d\):</p>
\[a + c = b + d\]
<p>Posto je trapez <strong>jednakokraki</strong>, kraci su jednaki: \(b = d\). Dakle:</p>
\[a + c = 2b\]
</div>

<div class="step-card">
<div class="step-num">Korak 2</div>
<h3>Odredjivanje stranica iz obima</h3>
<p>Obim trapeza je:</p>
\[O = a + c + 2b = 32\]
<p>Zamenom \(a + c = 2b\):</p>
\[2b + 2b = 32 \implies 4b = 32 \implies b = 8 \text{ cm}\]
<p>Takodje:</p>
\[a + c = 2b = 16 \text{ cm}\]

<details class="checkpoint">
<summary>&#9989; Proveri se</summary>
<div class="checkpoint-content">
<p>Pitanje: Koliki je poluobim trapeza?</p>
<p style="margin-top:8px;color:#4ade80">Odgovor: \(s = \frac{O}{2} = \frac{32}{2} = 16\) cm.</p>
<p style="margin-top:4px">Primetite da je poluobim jednak zbiru osnovica: \(s = a + c = 16\). Ovo ce nam trebati!</p>
</div>
</details>
</div>

<div class="step-card highlight">
<div class="step-num">Korak 3</div>
<h3>Odredjivanje visine</h3>
<p>Koristimo formulu za povrsinu tangentnog mnogougla:</p>
\[P = s \cdot r = 16 \cdot 2 = 32 \text{ cm}^2\]
<p>Takodje, povrsina trapeza je:</p>
\[P = \frac{a + c}{2} \cdot h = \frac{16}{2} \cdot h = 8h\]
<p>Izjednacavanjem:</p>
\[8h = 32 \implies h = 4 \text{ cm}\]

<details class="checkpoint">
<summary>&#9989; Proveri se</summary>
<div class="checkpoint-content">
<p>Pitanje: Koji je odnos izmedju visine trapeza i poluprecnika upisanog kruga?</p>
<p style="margin-top:8px;color:#4ade80">Odgovor: \(h = 2r = 4\) cm. Krug dodiruje obe osnovice, pa je precnik kruga jednak visini trapeza. Ovo je logicno &mdash; krug je "stisnut" izmedju dve paralelne osnovice.</p>
</div>
</details>
</div>

<div class="step-card result">
<div class="step-num">Korak 4</div>
<h3>Pitagorina teorema &mdash; odredjivanje razlike osnovica</h3>
<p>Posmatrajmo pravougli trougao formiran:</p>
<ul style="margin:10px 0 10px 20px">
<li>visinom trapeza \(h = 4\) (vertikalna kateta)</li>
<li>horizontalnom projekcijom kraka \(\frac{a - c}{2}\) (horizontalna kateta)</li>
<li>krakom trapeza \(b = 8\) (hipotenuza)</li>
</ul>
<p>Primenimo Pitagorinu teoremu:</p>
\[b^2 = h^2 + \left(\frac{a - c}{2}\right)^2\]
\[8^2 = 4^2 + \left(\frac{a - c}{2}\right)^2\]
\[64 = 16 + \left(\frac{a - c}{2}\right)^2\]
\[\left(\frac{a - c}{2}\right)^2 = 48\]
\[\frac{a - c}{2} = \sqrt{48} = 4\sqrt{3}\]
\[\boxed{a - c = 8\sqrt{3} \text{ cm}}\]

<details class="checkpoint">
<summary>&#9989; Proveri se</summary>
<div class="checkpoint-content">
<p>Pitanje: Da li mozemo da nadjemo konkretne vrednosti \(a\) i \(c\)?</p>
<p style="margin-top:8px;color:#4ade80">Odgovor: Da! Imamo sistem:</p>
<p>\(a + c = 16\) i \(a - c = 8\sqrt{3} \approx 13{,}86\)</p>
<p>Resenje: \(a = 8 + 4\sqrt{3} \approx 14{,}93\) cm, \(c = 8 - 4\sqrt{3} \approx 1{,}07\) cm.</p>
<p style="margin-top:6px">Proverimo obim: \(14{,}93 + 1{,}07 + 8 + 8 = 32\) &#10004;</p>
</div>
</details>
</div>
</div>

<!-- Key Insight -->
<div class="card">
<div class="insight-box">
<h2 style="color:#60a5fa;margin-bottom:10px">Kljucni uvid</h2>
<p>Centralna ideja ovog zadatka je svojstvo <strong>tangentnog cetvorougla</strong>: zbir naspramnih strana su jednaki. Ovo odmah daje \(a + c = 2b\), sto sa obimom potpuno odredjuje \(a + c\) i \(b\). Zatim se visina dobija iz veze \(P = s \cdot r\), a razlika osnovica iz Pitagorine teoreme.</p>
<p style="margin-top:10px">Takodje, kljucna geometrijska cinjenica je da je visina trapeza sa upisanim krugom jednaka precniku kruga (\(h = 2r\)), jer krug dodiruje obe paralelne stranice.</p>
</div>
</div>

<!-- Final Answer -->
<div class="card">
<h2>Konacni odgovor</h2>
<div class="options-grid">
<div class="option">(A) \(\sqrt{3}\)</div>
<div class="option correct">(B) \(8\sqrt{3}\)</div>
<div class="option">(C) \(\sqrt{6}\)</div>
<div class="option">(D) \(3\sqrt{2}\)</div>
<div class="option">(E) \(6\sqrt{6}\)</div>
<div class="option">(N) Ne znam</div>
</div>
<div class="final-answer">
<p class="muted">Razlika vece i manje osnovice iznosi:</p>
<div class="answer-value">\(a - c = 8\sqrt{3}\) cm</div>
<p style="color:#34d399">Tacan odgovor je <strong>(B)</strong></p>
</div>

<div class="verification">
<div class="verification-title">Verifikacija</div>
<p>Sa \(a = 8 + 4\sqrt{3}\), \(c = 8 - 4\sqrt{3}\), \(b = d = 8\):</p>
<ul style="margin:8px 0 0 20px;color:#94a3b8">
<li>Obim: \((8+4\sqrt{3}) + (8-4\sqrt{3}) + 8 + 8 = 32\) &#10004;</li>
<li>Tangentno svojstvo: \(a + c = 16 = 2 \cdot 8 = b + d\) &#10004;</li>
<li>Visina: \(h = 2r = 4\), \(P = 8 \cdot 4 = 32 = 16 \cdot 2 = s \cdot r\) &#10004;</li>
<li>Pitagora: \(\sqrt{8^2 - 4^2} = \sqrt{48} = 4\sqrt{3} = \frac{a-c}{2}\) &#10004;</li>
</ul>
</div>
</div>

<!-- Common Pitfalls -->
<div class="card">
<h2>Ceste greske</h2>
<div class="pitfall">
<div class="pitfall-icon">&#9888;&#65039;</div>
<div>
<strong>Zaboraviti svojstvo tangentnog cetvorougla</strong>
<p class="muted">Bez veze \(a + c = b + d\), nemamo dovoljno jednacina da odredimo stranice. Ovo svojstvo je kljucno!</p>
</div>
</div>
<div class="pitfall">
<div class="pitfall-icon">&#9888;&#65039;</div>
<div>
<strong>Mesanje visine i poluprecnika</strong>
<p class="muted">Visina trapeza je \(h = 2r\), ne \(h = r\). Krug dodiruje <em>obe</em> osnovice, pa visina odgovara precniku, ne poluprecniku.</p>
</div>
</div>
<div class="pitfall">
<div class="pitfall-icon">&#9888;&#65039;</div>
<div>
<strong>Pogresan pravougli trougao</strong>
<p class="muted">Horizontalna kateta je \(\frac{a-c}{2}\), ne \(\frac{a}{2}\) ili \(\frac{c}{2}\). Simetricna razlika osnovica se deli na dva jednaka dela.</p>
</div>
</div>
</div>

<!-- Optional Challenge -->
<div class="card">
<div class="challenge-box">
<h2 style="color:#f472b6;margin-bottom:10px">Dodatni izazov</h2>
<p>Ako bi poluprecnik upisanog kruga bio \(r = 3\) cm (a obim i dalje 32 cm), kolika bi bila razlika osnovica? Da li bi takav trapez uopste mogao da postoji?</p>
<details class="checkpoint" style="margin-top:12px">
<summary style="color:#f472b6">Pogledaj resenje</summary>
<div class="checkpoint-content">
<p>Racun ostaje isti do koraka 3. Imali bismo \(h = 2r = 6\) cm, ali i dalje \(b = 8\) cm.</p>
<p>\(b^2 = h^2 + \left(\frac{a-c}{2}\right)^2 \implies 64 = 36 + \left(\frac{a-c}{2}\right)^2\)</p>
<p>\(\left(\frac{a-c}{2}\right)^2 = 28 \implies a - c = 2\sqrt{28} = 4\sqrt{7} \approx 10{,}58\) cm.</p>
<p style="margin-top:6px">Trapez bi postojao jer je \(h = 6 < b = 8\). Medjutim, proverimo \(c > 0\): \(c = 8 - 2\sqrt{7} \approx 2{,}71 > 0\) &#10004;</p>
<p style="margin-top:6px;color:#f472b6">Za \(r > 4\) (tj. \(h > 8 = b\)), trapez <em>ne bi</em> mogao da postoji jer bi visina bila veca od kraka!</p>
</div>
</details>
</div>
</div>

</div>

<script>
(function() {
  // Canvas setup
  var canvas = document.getElementById('trapezCanvas');
  var ctx = canvas.getContext('2d');
  var dpr = window.devicePixelRatio || 1;
  var currentView = 'all';
  var animProgress = 0;
  var animTarget = 1;
  var animFrame;

  function resizeCanvas() {
    var rect = canvas.getBoundingClientRect();
    canvas.width = rect.width * dpr;
    canvas.height = rect.height * dpr;
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    draw();
  }

  window.addEventListener('resize', resizeCanvas);
  setTimeout(resizeCanvas, 100);

  // Trapezoid geometry (scaled for display)
  // Real values: a = 8+4√3 ≈ 14.93, c = 8-4√3 ≈ 1.07, b = 8, h = 4
  var a_real = 8 + 4 * Math.sqrt(3);
  var c_real = 8 - 4 * Math.sqrt(3);
  var b_real = 8;
  var h_real = 4;
  var r_real = 2;

  function draw() {
    var W = canvas.width / dpr;
    var H = canvas.height / dpr;
    ctx.clearRect(0, 0, W, H);

    var scale = Math.min(W / 22, H / 12);
    var cx = W / 2;
    var cy = H / 2 + 10;

    // Trapezoid vertices (centered)
    var half_a = (a_real / 2) * scale;
    var half_c = (c_real / 2) * scale;
    var hh = h_real * scale;
    var rr = r_real * scale;

    // Bottom base: y = cy + hh/2, Top base: y = cy - hh/2
    var yBot = cy + hh / 2;
    var yTop = cy - hh / 2;

    var A = { x: cx - half_a, y: yBot }; // bottom-left
    var B = { x: cx + half_a, y: yBot }; // bottom-right
    var C = { x: cx + half_c, y: yTop }; // top-right
    var D = { x: cx - half_c, y: yTop }; // top-left

    // Inscribed circle center
    var circleX = cx;
    var circleY = cy;

    // Grid background
    ctx.strokeStyle = 'rgba(51,65,85,0.3)';
    ctx.lineWidth = 0.5;
    for (var gx = 0; gx < W; gx += 30) {
      ctx.beginPath(); ctx.moveTo(gx, 0); ctx.lineTo(gx, H); ctx.stroke();
    }
    for (var gy = 0; gy < H; gy += 30) {
      ctx.beginPath(); ctx.moveTo(0, gy); ctx.lineTo(W, gy); ctx.stroke();
    }

    // Draw inscribed circle
    ctx.beginPath();
    ctx.arc(circleX, circleY, rr, 0, 2 * Math.PI);
    ctx.fillStyle = 'rgba(96,165,250,0.08)';
    ctx.fill();
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.setLineDash([6, 4]);
    ctx.stroke();
    ctx.setLineDash([]);

    // Draw trapezoid
    ctx.beginPath();
    ctx.moveTo(A.x, A.y);
    ctx.lineTo(B.x, B.y);
    ctx.lineTo(C.x, C.y);
    ctx.lineTo(D.x, D.y);
    ctx.closePath();
    ctx.fillStyle = 'rgba(167,139,250,0.06)';
    ctx.fill();
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2.5;
    ctx.stroke();

    // Tangent points visualization
    if (currentView === 'all' || currentView === 'tangent') {
      // Tangent points: circle touches each side
      // Bottom: (cx, yBot) — but circle center is at cy, radius rr, so bottom tangent is at cy+rr
      // Actually circle center is at cy, bottom at yBot=cy+hh/2, and rr=hh/2, so tangent at (cx, yBot)
      // Wait: rr = r_real * scale = 2*scale, hh = 4*scale. So rr = hh/2. So cy - rr = yTop, cy + rr = yBot.

      var tangentBottom = { x: cx, y: yBot };
      var tangentTop = { x: cx, y: yTop };

      // For left leg (A to D): tangent point
      // The left leg goes from A(cx-half_a, yBot) to D(cx-half_c, yTop)
      // Direction vector: (half_a - half_c, -hh)
      // Perpendicular from circle center to line = r
      // Parametric tangent point: foot of perpendicular from (cx, cy) to segment AD
      function tangentPoint(P1, P2, center) {
        var dx = P2.x - P1.x;
        var dy = P2.y - P1.y;
        var t = ((center.x - P1.x) * dx + (center.y - P1.y) * dy) / (dx * dx + dy * dy);
        return { x: P1.x + t * dx, y: P1.y + t * dy };
      }

      var tangentLeft = tangentPoint(A, D, { x: cx, y: cy });
      var tangentRight = tangentPoint(B, C, { x: cx, y: cy });

      var tPts = [tangentBottom, tangentTop, tangentLeft, tangentRight];
      var tLabels = ['T_1', 'T_3', 'T_4', 'T_2'];

      for (var i = 0; i < tPts.length; i++) {
        // Line from center to tangent point
        ctx.beginPath();
        ctx.moveTo(cx, cy);
        ctx.lineTo(tPts[i].x, tPts[i].y);
        ctx.strokeStyle = 'rgba(96,165,250,0.4)';
        ctx.lineWidth = 1;
        ctx.setLineDash([3, 3]);
        ctx.stroke();
        ctx.setLineDash([]);

        // Tangent point dot
        ctx.beginPath();
        ctx.arc(tPts[i].x, tPts[i].y, 5, 0, 2 * Math.PI);
        ctx.fillStyle = '#60a5fa';
        ctx.fill();
      }

      // Right angle marks at tangent points
      function drawRightAngle(pt, center, sideP1, sideP2, sz) {
        // Vector from pt to center (perpendicular direction)
        var px = center.x - pt.x;
        var py = center.y - pt.y;
        var pl = Math.sqrt(px * px + py * py);
        px /= pl; py /= pl;
        // Vector along the side
        var sx = sideP2.x - sideP1.x;
        var sy = sideP2.y - sideP1.y;
        var sl = Math.sqrt(sx * sx + sy * sy);
        sx /= sl; sy /= sl;

        ctx.beginPath();
        ctx.moveTo(pt.x + sx * sz, pt.y + sy * sz);
        ctx.lineTo(pt.x + sx * sz + px * sz, pt.y + sy * sz + py * sz);
        ctx.lineTo(pt.x + px * sz, pt.y + py * sz);
        ctx.strokeStyle = '#60a5fa';
        ctx.lineWidth = 1;
        ctx.stroke();
      }

      drawRightAngle(tangentBottom, {x:cx,y:cy}, A, B, 8);
      drawRightAngle(tangentTop, {x:cx,y:cy}, D, C, 8);
      drawRightAngle(tangentLeft, {x:cx,y:cy}, A, D, 8);
      drawRightAngle(tangentRight, {x:cx,y:cy}, B, C, 8);
    }

    // Right triangle highlight
    if (currentView === 'all' || currentView === 'triangle') {
      // Triangle: from D down to foot (D.x, yBot), then to A, then back to D
      var foot = { x: D.x, y: yBot };

      ctx.beginPath();
      ctx.moveTo(A.x, A.y);
      ctx.lineTo(D.x, D.y);
      ctx.lineTo(foot.x, foot.y);
      ctx.closePath();
      ctx.fillStyle = 'rgba(244,114,182,0.12)';
      ctx.fill();
      ctx.strokeStyle = '#f472b6';
      ctx.lineWidth = 2;
      ctx.stroke();

      // Right angle at foot
      ctx.beginPath();
      ctx.moveTo(foot.x + 12, foot.y);
      ctx.lineTo(foot.x + 12, foot.y - 12);
      ctx.lineTo(foot.x, foot.y - 12);
      ctx.strokeStyle = '#f472b6';
      ctx.lineWidth = 1.5;
      ctx.stroke();

      // Labels
      ctx.font = '14px "Segoe UI", sans-serif';
      ctx.textAlign = 'center';

      // h label
      ctx.fillStyle = '#f472b6';
      ctx.fillText('h = 4', foot.x - 22, cy);

      // (a-c)/2 label
      var midFoot = (A.x + foot.x) / 2;
      ctx.fillText('(a\u2212c)/2', midFoot, yBot + 20);

      // b label on hypotenuse
      var midHyp = { x: (A.x + D.x) / 2, y: (A.y + D.y) / 2 };
      ctx.fillStyle = '#a78bfa';
      ctx.fillText('b = 8', midHyp.x - 30, midHyp.y);
    }

    // Dimension labels
    if (currentView === 'all' || currentView === 'dims') {
      ctx.font = 'bold 14px "Segoe UI", sans-serif';
      ctx.textAlign = 'center';

      // Bottom base label
      ctx.fillStyle = '#4ade80';
      ctx.fillText('a = 8 + 4\u221A3 \u2248 14,93', cx, yBot + 35);

      // Top base label
      ctx.fillText('c = 8 \u2212 4\u221A3 \u2248 1,07', cx, yTop - 20);

      // Left leg
      ctx.save();
      ctx.fillStyle = '#a78bfa';
      var midL = { x: (A.x + D.x) / 2, y: (A.y + D.y) / 2 };
      ctx.fillText('b = 8', midL.x - 35, midL.y - 5);
      ctx.restore();

      // Right leg
      var midR = { x: (B.x + C.x) / 2, y: (B.y + C.y) / 2 };
      ctx.fillStyle = '#a78bfa';
      ctx.fillText('b = 8', midR.x + 35, midR.y - 5);

      // Radius
      ctx.fillStyle = '#60a5fa';
      ctx.fillText('r = 2', cx + rr / 2 + 18, cy - 3);

      // Radius line
      ctx.beginPath();
      ctx.moveTo(cx, cy);
      ctx.lineTo(cx + rr, cy);
      ctx.strokeStyle = '#60a5fa';
      ctx.lineWidth = 1.5;
      ctx.stroke();

      // Center dot
      ctx.beginPath();
      ctx.arc(cx, cy, 3, 0, 2 * Math.PI);
      ctx.fillStyle = '#60a5fa';
      ctx.fill();

      // Height dimension line (right side)
      var dimX = B.x + 50;
      ctx.beginPath();
      ctx.moveTo(dimX, yTop);
      ctx.lineTo(dimX, yBot);
      ctx.strokeStyle = '#94a3b8';
      ctx.lineWidth = 1;
      ctx.stroke();
      // Arrow heads
      ctx.beginPath();
      ctx.moveTo(dimX - 5, yTop + 8); ctx.lineTo(dimX, yTop); ctx.lineTo(dimX + 5, yTop + 8);
      ctx.strokeStyle = '#94a3b8'; ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(dimX - 5, yBot - 8); ctx.lineTo(dimX, yBot); ctx.lineTo(dimX + 5, yBot - 8);
      ctx.stroke();
      // Ticks
      ctx.beginPath();
      ctx.moveTo(dimX - 5, yTop); ctx.lineTo(dimX + 5, yTop); ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(dimX - 5, yBot); ctx.lineTo(dimX + 5, yBot); ctx.stroke();

      ctx.fillStyle = '#94a3b8';
      ctx.fillText('h = 4', dimX + 25, cy + 4);
    }

    // Vertex labels
    ctx.font = 'bold 15px "Segoe UI", sans-serif';
    ctx.textAlign = 'center';
    ctx.fillStyle = '#e2e8f0';
    ctx.fillText('A', A.x - 14, A.y + 18);
    ctx.fillText('B', B.x + 14, B.y + 18);
    ctx.fillText('C', C.x + 14, C.y - 10);
    ctx.fillText('D', D.x - 14, D.y - 10);

    // Vertex dots
    [A, B, C, D].forEach(function(p) {
      ctx.beginPath();
      ctx.arc(p.x, p.y, 4, 0, 2 * Math.PI);
      ctx.fillStyle = '#e2e8f0';
      ctx.fill();
    });

    // Title based on view
    ctx.font = '13px "Segoe UI", sans-serif';
    ctx.textAlign = 'left';
    ctx.fillStyle = '#94a3b8';
    var viewTitles = {
      'all': 'Jednakokraki trapez ABCD sa upisanim krugom (r = 2, O = 32)',
      'triangle': 'Pravougli trougao: h, (a\u2212c)/2, b',
      'tangent': 'Tangentne tacke upisanog kruga',
      'dims': 'Izracunate dimenzije trapeza'
    };
    ctx.fillText(viewTitles[currentView], 15, 22);
  }

  window.setView = function(view) {
    currentView = view;
    document.querySelectorAll('.btn').forEach(function(b) { b.classList.remove('active'); });
    document.getElementById('btn-' + view).classList.add('active');
    draw();
  };

  window.toggleTheory = function() {
    var content = document.getElementById('theory-content');
    content.classList.toggle('open');
    var btn = content.previousElementSibling;
    btn.innerHTML = content.classList.contains('open')
      ? '&#128208; Kljucne formule i teoreme &#9650;'
      : '&#128208; Kljucne formule i teoreme &#9660;';
  };

  // Initial draw
  setTimeout(resizeCanvas, 200);
  setTimeout(resizeCanvas, 500);
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{"title":"Razlika osnovica jednakokrakog trapeza sa upisanim krugom","subject":"math","unit":"geometry","topic_tags":["trapez","upisani krug","tangentni cetvorougao","Pitagorina teorema","obim"]}
BRAINSPARK_META-->