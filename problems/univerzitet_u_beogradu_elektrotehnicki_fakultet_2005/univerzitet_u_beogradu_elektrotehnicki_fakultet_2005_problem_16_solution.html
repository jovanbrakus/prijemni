<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Koeficijent uz a⁸ u razvoju binoma</title>
<script>MathJax={tex:{inlineMath:[['\\(','\\)'],['$','$']],displayMath:[['\\[','\\]']]},svg:{fontCache:'global'}};</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<script type="text/info" id="logic-scratchpad">
PROBLEM: Find the coefficient of a^8 in the expansion of (1/cbrt(a) - a)^12 = (a^(-1/3) - a)^12.

SOLUTION:
Using the binomial theorem, the general term is:
T_{k+1} = C(12, k) * (a^(-1/3))^(12-k) * (-a)^k

Simplify the exponent of a:
= C(12, k) * (-1)^k * a^{-(12-k)/3 + k}
= C(12, k) * (-1)^k * a^{(-12+k)/3 + k}
= C(12, k) * (-1)^k * a^{(-12+k+3k)/3}
= C(12, k) * (-1)^k * a^{(4k-12)/3}

Set exponent equal to 8:
(4k - 12)/3 = 8
4k - 12 = 24
4k = 36
k = 9

Check: k=9 is an integer and 0 <= 9 <= 12, valid.

Coefficient:
C(12, 9) * (-1)^9
= C(12, 3) * (-1)   [since C(12,9) = C(12,3)]
= (12*11*10)/(3*2*1) * (-1)
= 1320/6 * (-1)
= 220 * (-1)
= -220

ANSWER: (C) -220
</script>
<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}
.container { max-width: 1200px; margin: 0 auto; }
h1 {
  text-align: center;
  font-size: 2rem;
  margin-bottom: 30px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 15px;
  display: flex;
  align-items: center;
  gap: 10px;
}
h3 { color: #a78bfa; margin-bottom: 10px; font-size: 1.15rem; }
.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
}
.problem-statement {
  border-left: 4px solid #a78bfa;
  padding-left: 20px;
  font-size: 1.1rem;
}
.problem-statement .options {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 10px;
  margin-top: 15px;
}
.problem-statement .option {
  background: #0f172a;
  padding: 8px 14px;
  border-radius: 8px;
  text-align: center;
  border: 1px solid #334155;
  font-size: 1rem;
}
.plan-list {
  list-style: none;
  counter-reset: plan-counter;
}
.plan-list li {
  counter-increment: plan-counter;
  padding: 10px 0 10px 50px;
  position: relative;
  border-bottom: 1px solid #334155;
}
.plan-list li:last-child { border-bottom: none; }
.plan-list li::before {
  content: counter(plan-counter);
  position: absolute;
  left: 0;
  top: 10px;
  width: 32px;
  height: 32px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  color: #0f172a;
}
.theory-toggle {
  width: 100%;
  background: #0f172a;
  color: #e2e8f0;
  border: 1px solid #334155;
  border-radius: 12px;
  padding: 16px 20px;
  font-size: 1.05rem;
  cursor: pointer;
  text-align: left;
  transition: all 0.3s;
  font-family: inherit;
}
.theory-toggle:hover { border-color: #60a5fa; background: #1a2540; }
.theory-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.5s ease;
}
.theory-content.open { max-height: 2000px; }
.theory-inner {
  padding: 20px 0 0;
}
.formula-box {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 18px;
  margin: 12px 0;
}
.formula-box .label {
  color: #a78bfa;
  font-weight: 600;
  font-size: 0.9rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 8px;
}
.step {
  background: #0f172a;
  border-radius: 12px;
  padding: 22px;
  margin: 16px 0;
  border-left: 3px solid #60a5fa;
}
.step-header {
  color: #60a5fa;
  font-weight: 700;
  font-size: 1.05rem;
  margin-bottom: 12px;
}
details {
  margin: 15px 0;
  background: #162033;
  border: 1px solid #334155;
  border-radius: 10px;
  overflow: hidden;
}
details summary {
  padding: 12px 18px;
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  transition: background 0.2s;
}
details summary:hover { background: #1a2744; }
details .checkpoint-content {
  padding: 14px 18px;
  border-top: 1px solid #334155;
  color: #94a3b8;
}
.highlight-green {
  color: #4ade80;
  font-weight: 700;
}
.highlight-blue {
  color: #60a5fa;
  font-weight: 700;
}
.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}
.highlight-purple {
  color: #a78bfa;
  font-weight: 600;
}
.final-answer-box {
  background: linear-gradient(135deg, rgba(52, 211, 153, 0.12), rgba(74, 222, 128, 0.08));
  border: 2px solid #34d399;
  border-radius: 14px;
  padding: 24px;
  text-align: center;
}
.final-answer-box .answer-value {
  font-size: 1.8rem;
  color: #4ade80;
  font-weight: 800;
  margin: 12px 0;
}
.final-answer-options {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 12px;
  margin-top: 16px;
}
.final-answer-options .opt {
  padding: 8px 18px;
  border-radius: 8px;
  border: 2px solid #334155;
  color: #94a3b8;
  font-weight: 600;
}
.final-answer-options .opt.correct {
  border-color: #4ade80;
  color: #4ade80;
  background: rgba(74, 222, 128, 0.1);
}
.pitfall {
  background: rgba(244, 114, 182, 0.08);
  border: 1px solid rgba(244, 114, 182, 0.3);
  border-radius: 10px;
  padding: 16px;
  margin: 12px 0;
}
.pitfall-title {
  color: #f472b6;
  font-weight: 700;
  margin-bottom: 6px;
}
.insight-box {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.1), rgba(167, 139, 250, 0.1));
  border: 1px solid rgba(96, 165, 250, 0.3);
  border-radius: 12px;
  padding: 22px;
}
.challenge-box {
  background: rgba(167, 139, 250, 0.08);
  border: 1px dashed #a78bfa;
  border-radius: 12px;
  padding: 22px;
}
canvas {
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  max-width: 100%;
  touch-action: none;
}
.muted { color: #94a3b8; }
.canvas-controls {
  display: flex;
  justify-content: center;
  gap: 12px;
  margin-top: 12px;
}
.canvas-btn {
  background: #334155;
  color: #e2e8f0;
  border: none;
  border-radius: 8px;
  padding: 8px 16px;
  cursor: pointer;
  font-family: inherit;
  font-size: 0.9rem;
  transition: background 0.2s;
}
.canvas-btn:hover { background: #475569; }
.canvas-btn.active { background: #60a5fa; color: #0f172a; }
@media (max-width: 768px) {
  h1 { font-size: 1.5rem; }
  .card { padding: 18px; }
  body { padding: 12px; }
}
</style>
</head>
<body>
<div class="container">

<h1>Koeficijent uz \( a^8 \) u razvoju binoma</h1>

<!-- PROBLEM STATEMENT -->
<div class="card">
  <h2>Postavka zadatka</h2>
  <div class="problem-statement">
    <p>Koeficijent uz \( a^8 \) u razvoju binoma \(\left(\dfrac{1}{\sqrt[3]{a}} - a\right)^{12}\) je:</p>
    <div class="options">
      <div class="option">(A) \(0\)</div>
      <div class="option">(B) \(456\)</div>
      <div class="option">(C) \(-220\)</div>
      <div class="option">(D) \(-70\)</div>
      <div class="option">(E) \(70\)</div>
      <div class="option">(N) Ne znam</div>
    </div>
  </div>
</div>

<!-- PLAN -->
<div class="card">
  <h2>Plan rešavanja</h2>
  <ol class="plan-list">
    <li>Prepisati binom koristeći razlomljene eksponente: \(\left(a^{-1/3} - a\right)^{12}\)</li>
    <li>Primeniti binomnu teoremu i napisati opšti član razvoja</li>
    <li>Odrediti eksponent od \(a\) u opštem članu kao funkciju indeksa \(k\)</li>
    <li>Rešiti jednačinu za \(k\) tako da eksponent bude jednak \(8\)</li>
    <li>Izračunati binomni koeficijent i utvrditi znak</li>
  </ol>
</div>

<!-- THEORY REFRESHER -->
<div class="card">
  <h2>Podsetnik iz teorije</h2>
  <button class="theory-toggle" id="theoryBtn" onclick="toggleTheory()">&#x1F4D0; Ključne formule i teoreme (klikni za prikaz)</button>
  <div class="theory-content" id="theoryContent">
    <div class="theory-inner">
      <div class="formula-box">
        <div class="label">Binomna teorema</div>
        <p>Za bilo koja dva broja \(x\) i \(y\) i prirodan broj \(n\):</p>
        \[ (x + y)^n = \sum_{k=0}^{n} \binom{n}{k} x^{n-k} y^k \]
      </div>
      <div class="formula-box">
        <div class="label">Opšti (k+1)-vi član</div>
        \[ T_{k+1} = \binom{n}{k} \cdot x^{n-k} \cdot y^k \]
        <p class="muted" style="margin-top:8px;">gde \(k\) uzima vrednosti \(0, 1, 2, \ldots, n\)</p>
      </div>
      <div class="formula-box">
        <div class="label">Binomni koeficijent</div>
        \[ \binom{n}{k} = \frac{n!}{k!(n-k)!} = \binom{n}{n-k} \]
        <p class="muted" style="margin-top:8px;">Simetrija: \(\binom{12}{9} = \binom{12}{3}\)</p>
      </div>
      <div class="formula-box">
        <div class="label">Korisne identičnosti za eksponente</div>
        \[ \frac{1}{\sqrt[3]{a}} = a^{-1/3}, \qquad (a^m)^n = a^{mn} \]
      </div>
    </div>
  </div>
</div>

<!-- VISUAL AID -->
<div class="card">
  <h2>Vizuelni prikaz</h2>
  <p class="muted" style="margin-bottom:14px;">Interaktivni prikaz članova binomnog razvoja. Prevuci mišem za istraživanje detalja svakog člana.</p>
  <canvas id="binomialCanvas" width="900" height="520"></canvas>
  <div class="canvas-controls">
    <button class="canvas-btn active" id="btnTerms" onclick="setView('terms')">Članovi razvoja</button>
    <button class="canvas-btn" id="btnPascal" onclick="setView('pascal')">Paskalov trougao</button>
  </div>
</div>

<!-- STEP-BY-STEP SOLUTION -->
<div class="card">
  <h2>Rešenje korak po korak</h2>

  <!-- Step 1 -->
  <div class="step">
    <div class="step-header">Korak 1: Prepišimo binom sa razlomljenim eksponentima</div>
    <p>Prevedimo izraz sa korenom u eksponencijalni oblik:</p>
    \[ \frac{1}{\sqrt[3]{a}} = a^{-1/3} \]
    <p>Dakle, naš binom postaje:</p>
    \[ \left(a^{-1/3} - a\right)^{12} \]
    <p>Ovde imamo:</p>
    <ul style="margin-left:20px; margin-top:8px;">
      <li>\(x = a^{-1/3}\) &mdash; prvi sabirak</li>
      <li>\(y = -a\) &mdash; drugi sabirak (sa negativnim predznakom!)</li>
      <li>\(n = 12\) &mdash; eksponent binoma</li>
    </ul>
  </div>

  <details>
    <summary>Proveri se: Da li razumeš zašto je \(y = -a\)?</summary>
    <div class="checkpoint-content">
      <p>Binom je oblika \((x + y)^n\). Naš izraz je \((a^{-1/3} - a)^{12}\), što je isto kao \((a^{-1/3} + (-a))^{12}\). Zato je \(y = -a\), a ne samo \(a\). Taj minus je ključan za znak konačnog rezultata!</p>
    </div>
  </details>

  <!-- Step 2 -->
  <div class="step">
    <div class="step-header">Korak 2: Napišimo opšti član razvoja</div>
    <p>Po binomnoj teoremi, opšti \((k+1)\)-vi član je:</p>
    \[ T_{k+1} = \binom{12}{k} \cdot \left(a^{-1/3}\right)^{12-k} \cdot (-a)^k \]
    <p>Raščlanimo svaki faktor posebno:</p>

    <p><span class="highlight-blue">Faktor sa prvim sabirkom:</span></p>
    \[ \left(a^{-1/3}\right)^{12-k} = a^{-(12-k)/3} \]

    <p><span class="highlight-pink">Faktor sa drugim sabirkom:</span></p>
    \[ (-a)^k = (-1)^k \cdot a^k \]

    <p>Spojimo sve zajedno:</p>
    \[ T_{k+1} = \binom{12}{k} \cdot (-1)^k \cdot a^{-(12-k)/3} \cdot a^k \]
  </div>

  <!-- Step 3 -->
  <div class="step">
    <div class="step-header">Korak 3: Odredimo eksponent od \(a\) u opštem članu</div>
    <p>Saberemo eksponente od \(a\):</p>
    \[ -\frac{12-k}{3} + k = \frac{-(12-k) + 3k}{3} = \frac{-12 + k + 3k}{3} = \frac{4k - 12}{3} \]
    <p>Dakle, opšti član je:</p>
    \[ T_{k+1} = \binom{12}{k} \cdot (-1)^k \cdot a^{\frac{4k-12}{3}} \]
  </div>

  <details>
    <summary>Proveri se: Provera za \(k = 0\) i \(k = 12\)</summary>
    <div class="checkpoint-content">
      <p>Za \(k = 0\): eksponent je \(\frac{0 - 12}{3} = -4\), pa je \(T_1 = a^{-4}\). To je \((a^{-1/3})^{12} = a^{-4}\). Tačno!</p>
      <p>Za \(k = 12\): eksponent je \(\frac{48 - 12}{3} = 12\), pa je \(T_{13} = (-1)^{12} a^{12} = a^{12}\). To je \((-a)^{12} = a^{12}\). Tačno!</p>
    </div>
  </details>

  <!-- Step 4 -->
  <div class="step">
    <div class="step-header">Korak 4: Rešimo jednačinu za \(k\)</div>
    <p>Tražimo član koji sadrži \(a^8\). Postavimo uslov:</p>
    \[ \frac{4k - 12}{3} = 8 \]
    <p>Pomnožimo obe strane sa \(3\):</p>
    \[ 4k - 12 = 24 \]
    <p>Dodamo \(12\) na obe strane:</p>
    \[ 4k = 36 \]
    <p>Podelimo sa \(4\):</p>
    \[ \boxed{k = 9} \]
    <p class="muted" style="margin-top:8px;">Proverimo: \(k = 9\) je ceo broj i važi \(0 \leq 9 \leq 12\), dakle rešenje je validno.</p>
  </div>

  <details>
    <summary>Proveri se: Zašto je bitno da \(k\) bude ceo broj?</summary>
    <div class="checkpoint-content">
      <p>Binomni koeficijent \(\binom{12}{k}\) je definisan samo za celobrojne vrednosti \(k\) iz skupa \(\{0, 1, 2, \ldots, 12\}\). Kada bismo dobili razlomak (npr. \(k = 7{,}5\)), to bi značilo da se član sa traženim eksponentom ne pojavljuje u razvoju, pa bi koeficijent bio \(0\).</p>
    </div>
  </details>

  <!-- Step 5 -->
  <div class="step">
    <div class="step-header">Korak 5: Izračunajmo koeficijent</div>
    <p>Za \(k = 9\), koeficijent je:</p>
    \[ \binom{12}{9} \cdot (-1)^9 \]

    <p><span class="highlight-blue">Računamo binomni koeficijent</span> koristeći simetriju:</p>
    \[ \binom{12}{9} = \binom{12}{3} = \frac{12!}{3! \cdot 9!} = \frac{12 \cdot 11 \cdot 10}{3 \cdot 2 \cdot 1} \]

    <p>Izračunajmo korak po korak:</p>
    \[ \frac{12 \cdot 11 \cdot 10}{6} = \frac{1320}{6} = 220 \]

    <p><span class="highlight-pink">Odredimo znak:</span> Pošto je \(k = 9\) neparan:</p>
    \[ (-1)^9 = -1 \]

    <p>Konačno:</p>
    \[ \binom{12}{9} \cdot (-1)^9 = 220 \cdot (-1) = \boxed{-220} \]
  </div>

  <details>
    <summary>Proveri se: Alternativni način da izračunaš \(\binom{12}{3}\)</summary>
    <div class="checkpoint-content">
      <p>Možeš i ovako, postupnim skraćivanjem:</p>
      <p>\(\binom{12}{3} = \frac{12}{3} \cdot \frac{11}{2} \cdot \frac{10}{1} = 4 \cdot 5{,}5 \cdot 10 = 220\)</p>
      <p>Ili: \(\frac{12 \cdot 11}{2} = 66\), pa \(\frac{66 \cdot 10}{3} = 220\).</p>
    </div>
  </details>
</div>

<!-- KEY INSIGHT -->
<div class="card">
  <h2>Ključni uvid</h2>
  <div class="insight-box">
    <p>Ceo zadatak se svodi na <strong>jednu jednačinu sa jednom nepoznatom</strong>: naći \(k\) takvo da eksponent od \(a\) u opštem članu bude \(8\). Kada se binom zapiše pomoću razlomljenih eksponenata, dobijamo čist algebarski uslov \(\frac{4k-12}{3} = 8\).</p>
    <p style="margin-top:10px;">Dva su ključna mesta gde se najčešće greši:</p>
    <ul style="margin-left:20px; margin-top:6px;">
      <li><span class="highlight-pink">Predznak:</span> Ne smete zaboraviti da je \(y = -a\), pa faktor \((-1)^k\) utiče na znak.</li>
      <li><span class="highlight-blue">Celobrojnost:</span> Ako \(k\) ne bude ceo broj, koeficijent je \(0\) &mdash; odgovor (A).</li>
    </ul>
  </div>
</div>

<!-- FINAL ANSWER -->
<div class="card">
  <h2>Konačan odgovor</h2>
  <div class="final-answer-box">
    <p>Koeficijent uz \(a^8\) u razvoju binoma \(\left(\dfrac{1}{\sqrt[3]{a}} - a\right)^{12}\) je:</p>
    <div class="answer-value">\(-220\)</div>
    <div class="final-answer-options">
      <div class="opt">(A) 0</div>
      <div class="opt">(B) 456</div>
      <div class="opt correct">(C) &minus;220</div>
      <div class="opt">(D) &minus;70</div>
      <div class="opt">(E) 70</div>
      <div class="opt">(N) Ne znam</div>
    </div>
    <p style="margin-top:18px; color:#94a3b8;">
      <strong>Verifikacija:</strong> Deseti član razvoja (\(k=9\)) daje
      \(\binom{12}{9}(-1)^9 \cdot a^{(36-12)/3} = -220 \cdot a^8\).
      Tačan odgovor: <span class="highlight-green">(C) &minus;220</span>
    </p>
  </div>
</div>

<!-- COMMON PITFALLS -->
<div class="card">
  <h2>Najčešće greške</h2>

  <div class="pitfall">
    <div class="pitfall-title">Zaboravljen minus ispred \(a\)</div>
    <p>Ako se zanemari negativan predznak u \((-a)^k\), dobija se \(+220\) umesto \(-220\). Obrati pažnju: kad je binom oblika \((x - y)^n\), drugi sabirak nosi minus!</p>
  </div>

  <div class="pitfall">
    <div class="pitfall-title">Pogrešno sabiranje eksponenata</div>
    <p>Česta greška je zaboraviti da se eksponenti od \(a\) sabiraju pri množenju: \(a^m \cdot a^n = a^{m+n}\). Ako se pogrešno izračuna formula za eksponent, dobiće se pogrešna vrednost za \(k\).</p>
  </div>

  <div class="pitfall">
    <div class="pitfall-title">Zamena \(\binom{12}{9}\) sa \(\binom{12}{9} = 12 \cdot 9 = 108\)</div>
    <p>Binomni koeficijent \(\binom{12}{9}\) nije proizvod \(12 \cdot 9\)! Koristi formulu sa faktorijalom ili simetriju \(\binom{12}{9} = \binom{12}{3} = 220\).</p>
  </div>
</div>

<!-- OPTIONAL CHALLENGE -->
<div class="card">
  <h2>Dodatni izazov</h2>
  <div class="challenge-box">
    <p><strong>Izazov 1:</strong> Koji članovi u razvoju binoma \(\left(a^{-1/3} - a\right)^{12}\) imaju celobrojne eksponente od \(a\)? </p>
    <p class="muted" style="margin-top:6px;">Pomoć: Uslov je da \(\frac{4k-12}{3}\) bude ceo broj, tj. da \(4k - 12\) bude deljivo sa \(3\).</p>
    <p style="margin-top:14px;"><strong>Izazov 2:</strong> Koliki je koeficijent uz \(a^0\) (konstantni član) u istom razvoju?</p>
    <p class="muted" style="margin-top:6px;">Pomoć: Postavi \(\frac{4k-12}{3} = 0\) i reši po \(k\).</p>
  </div>
</div>

</div>

<script>
(function() {
  // Theory toggle
  window.toggleTheory = function() {
    var content = document.getElementById('theoryContent');
    var btn = document.getElementById('theoryBtn');
    content.classList.toggle('open');
    btn.textContent = content.classList.contains('open')
      ? '\u{1F4D0} Ključne formule i teoreme (klikni za skrivanje)'
      : '\u{1F4D0} Ključne formule i teoreme (klikni za prikaz)';
  };

  // Canvas
  var canvas = document.getElementById('binomialCanvas');
  var ctx = canvas.getContext('2d');
  var currentView = 'terms';
  var hoveredTerm = -1;
  var dpr = window.devicePixelRatio || 1;

  function resizeCanvas() {
    var rect = canvas.getBoundingClientRect();
    canvas.width = rect.width * dpr;
    canvas.height = 520 * dpr;
    canvas.style.height = '520px';
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    draw();
  }

  // Binomial coefficient
  function C(n, k) {
    if (k < 0 || k > n) return 0;
    if (k === 0 || k === n) return 1;
    if (k > n - k) k = n - k;
    var r = 1;
    for (var i = 0; i < k; i++) {
      r = r * (n - i) / (i + 1);
    }
    return Math.round(r);
  }

  // Term data
  var terms = [];
  for (var k = 0; k <= 12; k++) {
    var exp = (4 * k - 12) / 3;
    var coeff = C(12, k) * Math.pow(-1, k);
    var isInteger = Number.isInteger(exp);
    terms.push({ k: k, exp: exp, coeff: coeff, binom: C(12, k), sign: Math.pow(-1, k), isInt: isInteger });
  }

  var W, H;

  function getMousePos(e) {
    var rect = canvas.getBoundingClientRect();
    var touch = e.touches ? e.touches[0] : e;
    return { x: touch.clientX - rect.left, y: touch.clientY - rect.top };
  }

  function drawTermsView() {
    W = canvas.getBoundingClientRect().width;
    H = 520;
    ctx.clearRect(0, 0, W, H);

    // Title
    ctx.fillStyle = '#94a3b8';
    ctx.font = '14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Članovi razvoja (a^{-1/3} - a)^{12}: eksponent od a za svako k', W / 2, 25);

    var marginL = 60, marginR = 30, marginT = 55, marginB = 90;
    var chartW = W - marginL - marginR;
    var chartH = H - marginT - marginB;

    // Axes
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(marginL, marginT);
    ctx.lineTo(marginL, marginT + chartH);
    ctx.lineTo(marginL + chartW, marginT + chartH);
    ctx.stroke();

    // Y axis: exponents from -4 to 12
    var yMin = -5, yMax = 13;
    var yRange = yMax - yMin;

    function yPos(v) { return marginT + chartH - (v - yMin) / yRange * chartH; }
    function xPos(k) { return marginL + (k + 0.5) / 13 * chartW; }

    // Y grid lines
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    for (var y = -4; y <= 12; y += 2) {
      var py = yPos(y);
      ctx.strokeStyle = y === 0 ? '#475569' : '#1e293b';
      ctx.lineWidth = y === 0 ? 1.5 : 0.5;
      ctx.beginPath();
      ctx.moveTo(marginL, py);
      ctx.lineTo(marginL + chartW, py);
      ctx.stroke();
      ctx.fillStyle = '#94a3b8';
      ctx.fillText(y.toString(), marginL - 8, py + 4);
    }

    // Highlight y=8
    var y8 = yPos(8);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.moveTo(marginL, y8);
    ctx.lineTo(marginL + chartW, y8);
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = '#4ade80';
    ctx.textAlign = 'left';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.fillText('a\u2078 (traženi eksponent)', marginL + chartW - 180, y8 - 8);

    // Bars
    var barW = chartW / 13 * 0.6;
    for (var i = 0; i <= 12; i++) {
      var t = terms[i];
      var cx = xPos(i);
      var cy = yPos(t.exp);
      var baseY = yPos(0);

      // Bar
      var isTarget = (i === 9);
      var isHov = (i === hoveredTerm);

      if (isTarget) {
        ctx.fillStyle = isHov ? '#5eead4' : '#4ade80';
      } else if (t.isInt) {
        ctx.fillStyle = isHov ? '#93c5fd' : '#60a5fa';
      } else {
        ctx.fillStyle = isHov ? '#64748b' : '#475569';
      }
      ctx.globalAlpha = isHov ? 1.0 : 0.75;

      var bTop = Math.min(cy, baseY);
      var bH = Math.abs(cy - baseY);
      ctx.beginPath();
      ctx.roundRect(cx - barW / 2, bTop, barW, bH || 2, 3);
      ctx.fill();
      ctx.globalAlpha = 1.0;

      // Dot at top
      ctx.beginPath();
      ctx.arc(cx, cy, isHov ? 6 : 4, 0, Math.PI * 2);
      ctx.fillStyle = isTarget ? '#4ade80' : (t.isInt ? '#60a5fa' : '#94a3b8');
      ctx.fill();

      // k label
      ctx.textAlign = 'center';
      ctx.font = (isTarget ? 'bold ' : '') + '12px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = isTarget ? '#4ade80' : '#94a3b8';
      ctx.fillText('k=' + i, cx, marginT + chartH + 18);

      // Exponent label
      var expStr = t.isInt ? t.exp.toFixed(0) : t.exp.toFixed(2);
      ctx.font = '11px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = isTarget ? '#4ade80' : (t.isInt ? '#60a5fa' : '#64748b');
      ctx.fillText(expStr, cx, cy - 10);

      // Hover detail
      if (isHov) {
        var detY = Math.max(marginT + 20, cy - 50);
        ctx.fillStyle = 'rgba(15,23,42,0.92)';
        ctx.beginPath();
        ctx.roundRect(cx - 90, detY - 45, 180, 40, 8);
        ctx.fill();
        ctx.strokeStyle = isTarget ? '#4ade80' : '#60a5fa';
        ctx.lineWidth = 1;
        ctx.stroke();
        ctx.fillStyle = '#e2e8f0';
        ctx.font = '12px Segoe UI, system-ui, sans-serif';
        ctx.textAlign = 'center';
        var signStr = t.sign > 0 ? '+' : '-';
        ctx.fillText('C(12,' + i + ')=' + t.binom + ',  znak: ' + signStr, cx, detY - 30);
        ctx.fillText('koef: ' + t.coeff + ' \u00b7 a^(' + expStr + ')', cx, detY - 16);
      }
    }

    // X axis label
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Indeks k (redni broj sabirka u razvoju)', W / 2, H - 20);

    // Y axis label
    ctx.save();
    ctx.translate(16, H / 2);
    ctx.rotate(-Math.PI / 2);
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Eksponent od a', 0, 0);
    ctx.restore();

    // Legend
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    var legX = marginL + 10, legY = marginT + 10;
    ctx.fillStyle = '#4ade80'; ctx.fillRect(legX, legY, 12, 12);
    ctx.fillStyle = '#e2e8f0'; ctx.fillText('k=9 (daje a\u2078, koef = -220)', legX + 18, legY + 10);
    ctx.fillStyle = '#60a5fa'; ctx.fillRect(legX, legY + 20, 12, 12);
    ctx.fillStyle = '#e2e8f0'; ctx.fillText('Celobrojni eksponent', legX + 18, legY + 30);
    ctx.fillStyle = '#475569'; ctx.fillRect(legX, legY + 40, 12, 12);
    ctx.fillStyle = '#e2e8f0'; ctx.fillText('Razlomljeni eksponent', legX + 18, legY + 50);
  }

  function drawPascalView() {
    W = canvas.getBoundingClientRect().width;
    H = 520;
    ctx.clearRect(0, 0, W, H);

    ctx.fillStyle = '#94a3b8';
    ctx.font = '14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Paskalov trougao do reda n=12 (istaknut red n=12, element k=9)', W / 2, 22);

    var rows = 13;
    var cellSize = Math.min(36, (W - 40) / 13);
    var startY = 42;

    for (var n = 0; n < rows; n++) {
      var rowW = (n + 1) * cellSize;
      var startX = (W - rowW) / 2 + cellSize / 2;
      for (var kk = 0; kk <= n; kk++) {
        var val = C(n, kk);
        var cx = startX + kk * cellSize;
        var cy = startY + n * (cellSize * 1.05);

        var isHighlightRow = (n === 12);
        var isTarget = (n === 12 && kk === 9);

        // Circle
        var radius = cellSize * 0.42;
        ctx.beginPath();
        ctx.arc(cx, cy, radius, 0, Math.PI * 2);

        if (isTarget) {
          ctx.fillStyle = 'rgba(74,222,128,0.25)';
          ctx.strokeStyle = '#4ade80';
          ctx.lineWidth = 2.5;
        } else if (isHighlightRow) {
          ctx.fillStyle = 'rgba(96,165,250,0.12)';
          ctx.strokeStyle = '#60a5fa';
          ctx.lineWidth = 1.5;
        } else {
          ctx.fillStyle = 'rgba(30,41,59,0.6)';
          ctx.strokeStyle = '#334155';
          ctx.lineWidth = 0.8;
        }
        ctx.fill();
        ctx.stroke();

        // Text
        if (isTarget) {
          ctx.fillStyle = '#4ade80';
          ctx.font = 'bold ' + Math.max(9, cellSize * 0.32) + 'px Segoe UI, system-ui, sans-serif';
        } else if (isHighlightRow) {
          ctx.fillStyle = '#93c5fd';
          ctx.font = Math.max(8, cellSize * 0.28) + 'px Segoe UI, system-ui, sans-serif';
        } else {
          ctx.fillStyle = '#94a3b8';
          ctx.font = Math.max(8, cellSize * 0.3) + 'px Segoe UI, system-ui, sans-serif';
        }
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        if (n <= 8 || isHighlightRow) {
          ctx.fillText(val.toString(), cx, cy);
        }
      }
    }

    // Annotation for target
    var targetCx = (W - 13 * cellSize) / 2 + cellSize / 2 + 9 * cellSize;
    var targetCy = startY + 12 * (cellSize * 1.05);

    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([4, 3]);
    ctx.beginPath();
    ctx.moveTo(targetCx, targetCy + cellSize * 0.45);
    ctx.lineTo(targetCx, targetCy + cellSize * 1.5);
    ctx.stroke();
    ctx.setLineDash([]);

    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('C(12,9) = 220', targetCx, targetCy + cellSize * 1.8);
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.fillText('Sa znakom (-1)\u2079 = -1 \u2192 koeficijent = -220', targetCx, targetCy + cellSize * 2.2);
  }

  function draw() {
    if (currentView === 'terms') drawTermsView();
    else drawPascalView();
  }

  window.setView = function(v) {
    currentView = v;
    document.getElementById('btnTerms').classList.toggle('active', v === 'terms');
    document.getElementById('btnPascal').classList.toggle('active', v === 'pascal');
    hoveredTerm = -1;
    draw();
  };

  function handleMove(e) {
    if (currentView !== 'terms') return;
    var pos = getMousePos(e);
    var marginL = 60, marginR = 30;
    var chartW = (canvas.getBoundingClientRect().width) - marginL - marginR;

    var newHov = -1;
    for (var i = 0; i <= 12; i++) {
      var cx = marginL + (i + 0.5) / 13 * chartW;
      if (Math.abs(pos.x - cx) < chartW / 13 / 2) {
        newHov = i;
        break;
      }
    }
    if (newHov !== hoveredTerm) {
      hoveredTerm = newHov;
      draw();
    }
  }

  canvas.addEventListener('mousemove', handleMove);
  canvas.addEventListener('touchmove', function(e) { e.preventDefault(); handleMove(e); }, { passive: false });
  canvas.addEventListener('mouseleave', function() { hoveredTerm = -1; draw(); });

  window.addEventListener('resize', resizeCanvas);
  resizeCanvas();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{"title":"Koeficijent uz a⁸ u razvoju binoma (1/∛a − a)¹²","subject":"math","unit":"binomial-theorem","topic_tags":["binomna teorema","binomni koeficijent","Paskalov trougao","algebarski izrazi","razlomljeni eksponenti"]}
BRAINSPARK_META-->