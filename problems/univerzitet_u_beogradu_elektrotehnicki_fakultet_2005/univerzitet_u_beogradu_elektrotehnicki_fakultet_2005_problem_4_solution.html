<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Modul kompleksnog broja iz jednačine sa konjugatom</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
  Problem: Ako kompleksan broj z zadovoljava jednakost z + 2z̄ = 12 + 3i, tada je |z| jednako?

  Neka je z = a + bi, gde su a, b realni brojevi.
  Tada je konjugat z̄ = a - bi.

  Zamena u jednačinu:
    z + 2z̄ = (a + bi) + 2(a - bi)
             = a + bi + 2a - 2bi
             = 3a + (b - 2b)i
             = 3a - bi

  Izjednačavamo sa 12 + 3i:
    3a - bi = 12 + 3i

  Izjednačavamo realne i imaginarne delove:
    Realni deo: 3a = 12  =>  a = 4
    Imaginarni deo: -b = 3  =>  b = -3

  Dakle z = 4 - 3i.

  Modul:
    |z| = sqrt(a^2 + b^2) = sqrt(16 + 9) = sqrt(25) = 5

  Odgovor: (A) 5
</script>
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: #0f172a;
    color: #e2e8f0;
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    line-height: 1.7;
    padding: 2rem 1rem;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
  }

  h1 {
    text-align: center;
    font-size: 2.2rem;
    font-weight: 800;
    background: linear-gradient(135deg, #60a5fa, #a78bfa);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 0.5rem;
  }

  .subtitle {
    text-align: center;
    color: #94a3b8;
    font-size: 1.1rem;
    margin-bottom: 2rem;
  }

  .card {
    background: #1e293b;
    border: 1px solid #334155;
    border-radius: 14px;
    padding: 1.8rem;
    margin-bottom: 1.5rem;
  }

  .card-title {
    font-size: 1.3rem;
    font-weight: 700;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.6rem;
  }

  .card-title .icon {
    font-size: 1.5rem;
  }

  .problem-statement {
    border-left: 4px solid #60a5fa;
    padding-left: 1.2rem;
    font-size: 1.1rem;
    line-height: 1.9;
  }

  .options-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 0.8rem;
    margin-top: 1rem;
  }

  .option {
    background: #0f172a;
    border: 1px solid #334155;
    border-radius: 8px;
    padding: 0.5rem 1.2rem;
    font-size: 1rem;
    color: #e2e8f0;
  }

  .option.correct {
    border-color: #4ade80;
    background: rgba(74, 222, 128, 0.1);
    color: #4ade80;
    font-weight: 700;
  }

  .plan-list {
    list-style: none;
    padding: 0;
  }

  .plan-list li {
    padding: 0.5rem 0;
    padding-left: 1.5rem;
    position: relative;
    color: #94a3b8;
  }

  .plan-list li::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: #a78bfa;
  }

  details {
    background: #1e293b;
    border: 1px solid #334155;
    border-radius: 14px;
    margin-bottom: 1.5rem;
  }

  summary {
    padding: 1.2rem 1.8rem;
    cursor: pointer;
    font-weight: 700;
    font-size: 1.2rem;
    color: #a78bfa;
    list-style: none;
    display: flex;
    align-items: center;
    gap: 0.6rem;
  }

  summary::-webkit-details-marker { display: none; }

  summary::before {
    content: '\25B6';
    font-size: 0.8rem;
    transition: transform 0.3s;
  }

  details[open] summary::before {
    transform: rotate(90deg);
  }

  .theory-content {
    padding: 0 1.8rem 1.5rem;
  }

  .formula-box {
    background: #0f172a;
    border: 1px solid #334155;
    border-radius: 10px;
    padding: 1rem 1.5rem;
    margin: 0.8rem 0;
  }

  .canvas-wrapper {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 1rem 0;
  }

  canvas {
    border-radius: 12px;
    max-width: 100%;
    height: auto;
    touch-action: none;
  }

  .step {
    margin-bottom: 1.5rem;
    padding-left: 1rem;
    border-left: 3px solid #334155;
  }

  .step-header {
    font-weight: 700;
    color: #60a5fa;
    font-size: 1.1rem;
    margin-bottom: 0.5rem;
  }

  .math-box {
    background: #0f172a;
    border: 1px solid #334155;
    border-radius: 10px;
    padding: 1rem 1.5rem;
    margin: 0.8rem 0;
    overflow-x: auto;
  }

  .checkpoint {
    background: rgba(52, 211, 153, 0.08);
    border: 1px solid #34d399;
    border-radius: 10px;
    padding: 0.8rem 1.2rem;
    margin: 0.8rem 0;
    cursor: pointer;
    user-select: none;
  }

  .checkpoint .check-label {
    color: #34d399;
    font-weight: 700;
    font-size: 0.95rem;
  }

  .checkpoint .check-content {
    display: none;
    margin-top: 0.5rem;
    color: #e2e8f0;
  }

  .checkpoint.open .check-content {
    display: block;
  }

  .insight-box {
    background: rgba(167, 139, 250, 0.1);
    border: 1px solid #a78bfa;
    border-radius: 12px;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
  }

  .insight-box .card-title {
    color: #a78bfa;
  }

  .final-answer {
    background: rgba(74, 222, 128, 0.1);
    border: 2px solid #4ade80;
    border-radius: 14px;
    padding: 1.8rem;
    text-align: center;
    margin-bottom: 1.5rem;
  }

  .final-answer .label {
    font-size: 1rem;
    color: #4ade80;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 0.8rem;
    font-weight: 700;
  }

  .final-answer .value {
    font-size: 1.8rem;
    color: #4ade80;
    font-weight: 800;
  }

  .pitfall-item {
    background: rgba(244, 114, 182, 0.08);
    border-left: 3px solid #f472b6;
    padding: 0.8rem 1.2rem;
    margin-bottom: 0.8rem;
    border-radius: 0 8px 8px 0;
    color: #e2e8f0;
  }

  .pitfall-item strong {
    color: #f472b6;
  }

  .challenge-box {
    background: rgba(96, 165, 250, 0.08);
    border: 1px dashed #60a5fa;
    border-radius: 12px;
    padding: 1.5rem;
  }

  .challenge-box .card-title {
    color: #60a5fa;
  }

  .highlight-blue { color: #60a5fa; font-weight: 700; }
  .highlight-green { color: #4ade80; font-weight: 700; }
  .highlight-purple { color: #a78bfa; font-weight: 700; }
  .highlight-pink { color: #f472b6; font-weight: 700; }

  @media (max-width: 700px) {
    h1 { font-size: 1.6rem; }
    .card { padding: 1.2rem; }
    .options-grid { flex-direction: column; }
    body { padding: 1rem 0.5rem; }
  }
</style>
</head>
<body>
<div class="container">

  <h1>Modul kompleksnog broja iz jednačine sa konjugatom</h1>
  <p class="subtitle">Kompleksni brojevi &mdash; sistem jednačina razdvajanjem realnog i imaginarnog dela</p>

  <!-- Postavka zadatka -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128220;</span> Postavka zadatka</div>
    <div class="problem-statement">
      Ako kompleksan broj \(z\) zadovoljava jednakost
      \[z + 2\bar{z} = 12 + 3i, \quad (i^2 = -1)\]
      tada je \(|z|\) jednako:
    </div>
    <div class="options-grid">
      <div class="option correct">A) \(5\)</div>
      <div class="option">B) \(13\)</div>
      <div class="option">C) \(15\)</div>
      <div class="option">D) \(9\)</div>
      <div class="option">E) \(10\)</div>
      <div class="option">N) Ne znam</div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128204;</span> Plan rešavanja</div>
    <ul class="plan-list">
      <li>Zapisati \(z\) u algebarskom obliku \(z = a + bi\) i izraziti konjugat \(\bar{z} = a - bi\)</li>
      <li>Zameniti u jednačinu i razdvojiti realni i imaginarni deo</li>
      <li>Rešiti sistem jednačina po \(a\) i \(b\)</li>
      <li>Izračunati modul \(|z| = \sqrt{a^2 + b^2}\)</li>
    </ul>
  </div>

  <!-- Podsetnik iz teorije -->
  <details>
    <summary>&#128208; Ključne formule i teoreme</summary>
    <div class="theory-content">
      <p>Svaki kompleksan broj \(z\) može se zapisati u <strong>algebarskom obliku</strong>:</p>
      <div class="formula-box">
        \[z = a + bi, \quad a, b \in \mathbb{R}\]
      </div>
      <p style="margin-top:0.8rem;">Gde je \(a = \mathrm{Re}(z)\) realni deo, a \(b = \mathrm{Im}(z)\) imaginarni deo.</p>

      <p style="margin-top:1rem;"><strong>Kompleksno konjugovani broj</strong> (konjugat) se dobija promenom znaka imaginarnog dela:</p>
      <div class="formula-box">
        \[\bar{z} = a - bi\]
      </div>

      <p style="margin-top:1rem;"><strong>Modul</strong> (apsolutna vrednost) kompleksnog broja:</p>
      <div class="formula-box">
        \[|z| = \sqrt{a^2 + b^2}\]
      </div>
      <p style="margin-top:0.8rem;">Geometrijski, modul predstavlja <span class="highlight-blue">rastojanje tačke \(z\) od koordinatnog početka</span> u kompleksnoj ravni.</p>

      <p style="margin-top:1rem;"><strong>Jednakost dva kompleksna broja:</strong> Dva kompleksna broja su jednaka ako i samo ako su im jednaki i realni i imaginarni delovi:</p>
      <div class="formula-box">
        \[a_1 + b_1 i = a_2 + b_2 i \quad \Longleftrightarrow \quad a_1 = a_2 \;\text{ i }\; b_1 = b_2\]
      </div>
    </div>
  </details>

  <!-- Vizuelni prikaz -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128200;</span> Vizuelni prikaz &mdash; Kompleksna ravan</div>
    <div class="canvas-wrapper">
      <canvas id="complexPlane" width="560" height="560" style="touch-action:none;"></canvas>
    </div>
    <p style="text-align:center; color:#94a3b8; margin-top:0.5rem; font-size:0.95rem;">
      Broj \(z = 4 - 3i\), njegov konjugat \(\bar{z} = 4 + 3i\) i modul \(|z| = 5\) na kompleksnoj ravni
    </p>
  </div>

  <!-- Rešenje korak po korak -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9998;</span> Rešenje korak po korak</div>

    <div class="step">
      <div class="step-header">Korak 1: Zapisujemo \(z\) u algebarskom obliku</div>
      <p>Neka je \(z = a + bi\), gde su \(a, b \in \mathbb{R}\). Tada je konjugat:</p>
      <div class="math-box">
        \[\bar{z} = a - bi\]
      </div>
    </div>

    <div class="step">
      <div class="step-header">Korak 2: Zamenjujemo u jednačinu</div>
      <p>Zamenjujemo \(z\) i \(\bar{z}\) u datu jednačinu \(z + 2\bar{z} = 12 + 3i\):</p>
      <div class="math-box">
        \[(a + bi) + 2(a - bi) = 12 + 3i\]
      </div>
      <p>Raspisujemo levu stranu:</p>
      <div class="math-box">
        \[a + bi + 2a - 2bi = 12 + 3i\]
        \[3a + (b - 2b)i = 12 + 3i\]
        \[3a - bi = 12 + 3i\]
      </div>
    </div>

    <div class="checkpoint" onclick="this.classList.toggle('open')">
      <div class="check-label">&#9989; Proveri se &mdash; Da li si dobio istu levu stranu?</div>
      <div class="check-content">
        Leva strana treba da bude \(3a - bi\). Ako imaš nešto drugo, proveri da li si ispravno pomnožio \(2 \cdot (a - bi) = 2a - 2bi\) i saberao realne i imaginarne delove.
      </div>
    </div>

    <div class="step">
      <div class="step-header">Korak 3: Izjednačavamo realne i imaginarne delove</div>
      <p>Dva kompleksna broja su jednaka ako su im jednaki realni i imaginarni delovi. Zato:</p>
      <div class="math-box">
        \[\text{Realni deo:} \quad 3a = 12 \quad \Rightarrow \quad \boxed{a = 4}\]
        \[\text{Imaginarni deo:} \quad -b = 3 \quad \Rightarrow \quad \boxed{b = -3}\]
      </div>
    </div>

    <div class="checkpoint" onclick="this.classList.toggle('open')">
      <div class="check-label">&#9989; Proveri se &mdash; Provera rešenja</div>
      <div class="check-content">
        Za \(z = 4 - 3i\) i \(\bar{z} = 4 + 3i\):
        <br>
        \(z + 2\bar{z} = (4 - 3i) + 2(4 + 3i) = 4 - 3i + 8 + 6i = 12 + 3i\) &check;
      </div>
    </div>

    <div class="step">
      <div class="step-header">Korak 4: Određujemo kompleksni broj \(z\)</div>
      <p>Sada znamo:</p>
      <div class="math-box">
        \[z = a + bi = 4 + (-3)i = 4 - 3i\]
      </div>
    </div>

    <div class="step">
      <div class="step-header">Korak 5: Računamo modul</div>
      <p>Primenjujemo formulu za modul kompleksnog broja:</p>
      <div class="math-box">
        \[|z| = \sqrt{a^2 + b^2} = \sqrt{4^2 + (-3)^2} = \sqrt{16 + 9} = \sqrt{25} = 5\]
      </div>
    </div>
  </div>

  <!-- Ključni uvid -->
  <div class="insight-box">
    <div class="card-title"><span class="icon">&#128161;</span> Ključni uvid</div>
    <p>Kad god se u jednačini pojavljuju i \(z\) i \(\bar{z}\), standardni pristup je da se <strong>postavi \(z = a + bi\)</strong> i zameni u jednačinu. Time se jednačina sa kompleksnim brojevima svodi na <strong>sistem dve jednačine sa dve nepoznate</strong> (realne promenljive \(a\) i \(b\)), koji se rešava elementarnim metodama. Ovo je moguće jer se \(z\) i \(\bar{z}\) razlikuju samo u znaku imaginarnog dela, pa se pri sabiranju ili oduzimanju komponente razdvajaju.</p>
  </div>

  <!-- Konačan odgovor -->
  <div class="final-answer">
    <div class="label">Konačan odgovor</div>
    <div class="value">
      \(z = 4 - 3i, \quad |z| = 5\)
    </div>
    <p style="margin-top:0.8rem; color:#4ade80; font-size:1.1rem; font-weight:600;">Tačan odgovor: A) \(5\)</p>
  </div>

  <!-- Najčešće greške -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9888;</span> Najčešće greške</div>
    <div class="pitfall-item">
      <strong>Pogrešan znak imaginarnog dela konjugata:</strong> Česta greška je pisati \(\bar{z} = a + bi\) umesto \(\bar{z} = a - bi\). Konjugat menja znak <em>samo</em> imaginarnom delu.
    </div>
    <div class="pitfall-item">
      <strong>Mešanje realnog i imaginarnog dela:</strong> Prilikom izjednačavanja, pažljivo razdvojite delove. Imaginarni deo na levoj strani je \(-b\), ne \(b\), jer stoji \(-bi\).
    </div>
    <div class="pitfall-item">
      <strong>Zaboravljen kvadrat pri modulu:</strong> Modul je \(\sqrt{a^2 + b^2}\), a ne \(\sqrt{a + b}\). Svaka komponenta mora biti kvadrirana pre sabiranja.
    </div>
    <div class="pitfall-item">
      <strong>Brkanje modula i kvadrata modula:</strong> Ponuđeni odgovori sadrže i \(|z|^2 = 25\) (nema ga, ali \(25\) bi bila zamka). Pažljivo proverite da li se traži \(|z|\) ili \(|z|^2\).
    </div>
  </div>

  <!-- Dodatni izazov -->
  <div class="challenge-box">
    <div class="card-title"><span class="icon">&#127942;</span> Dodatni izazov</div>
    <p>Pokušaj da rešiš sličan zadatak sa malo drugačijom jednačinom:</p>
    <div class="math-box">
      \[3z - \bar{z} = 8 + 12i\]
    </div>
    <p style="margin-top:0.8rem; color:#94a3b8;"><em>Savet: Postupak je isti &mdash; postavi \(z = a + bi\), zameni, razdvoj realni i imaginarni deo, i reši sistem.</em></p>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('complexPlane');
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;
  const cx = W / 2;
  const cy = H / 2;
  const scale = 45;

  function toCanvasX(x) { return cx + x * scale; }
  function toCanvasY(y) { return cy - y * scale; }

  function draw() {
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Grid
    ctx.strokeStyle = 'rgba(51, 65, 85, 0.4)';
    ctx.lineWidth = 1;
    for (let i = -6; i <= 6; i++) {
      // Vertical
      ctx.beginPath();
      ctx.moveTo(toCanvasX(i), 0);
      ctx.lineTo(toCanvasX(i), H);
      ctx.stroke();
      // Horizontal
      ctx.beginPath();
      ctx.moveTo(0, toCanvasY(i));
      ctx.lineTo(W, toCanvasY(i));
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(0, cy);
    ctx.lineTo(W, cy);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(cx, 0);
    ctx.lineTo(cx, H);
    ctx.stroke();

    // Axis tick labels
    ctx.fillStyle = '#64748b';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    for (let i = -6; i <= 6; i++) {
      if (i === 0) continue;
      ctx.fillText(String(i), toCanvasX(i), cy + 18);
      ctx.fillText(String(i) + 'i', cx - 18, toCanvasY(i) + 4);
    }

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Re', W - 35, cy - 10);
    ctx.textAlign = 'center';
    ctx.fillText('Im', cx + 20, 22);

    // Circle with radius |z| = 5
    ctx.strokeStyle = 'rgba(74, 222, 128, 0.25)';
    ctx.lineWidth = 2;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.arc(cx, cy, 5 * scale, 0, 2 * Math.PI);
    ctx.stroke();
    ctx.setLineDash([]);

    // Label for circle
    ctx.fillStyle = 'rgba(74, 222, 128, 0.6)';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('|z| = 5', toCanvasX(3.6), toCanvasY(3.6));

    // Line from origin to z (modulus line)
    var zx = 4, zy = -3;
    ctx.strokeStyle = 'rgba(74, 222, 128, 0.5)';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(cx, cy);
    ctx.lineTo(toCanvasX(zx), toCanvasY(zy));
    ctx.stroke();

    // Dashed projection lines for z
    ctx.strokeStyle = 'rgba(96, 165, 250, 0.3)';
    ctx.lineWidth = 1;
    ctx.setLineDash([4, 4]);
    // Horizontal to real axis
    ctx.beginPath();
    ctx.moveTo(toCanvasX(zx), toCanvasY(zy));
    ctx.lineTo(toCanvasX(zx), cy);
    ctx.stroke();
    // Vertical to imaginary axis
    ctx.beginPath();
    ctx.moveTo(toCanvasX(zx), toCanvasY(zy));
    ctx.lineTo(cx, toCanvasY(zy));
    ctx.stroke();
    ctx.setLineDash([]);

    // Line from origin to conjugate
    var cjx = 4, cjy = 3;
    ctx.strokeStyle = 'rgba(167, 139, 250, 0.4)';
    ctx.lineWidth = 2;
    ctx.setLineDash([5, 3]);
    ctx.beginPath();
    ctx.moveTo(cx, cy);
    ctx.lineTo(toCanvasX(cjx), toCanvasY(cjy));
    ctx.stroke();
    ctx.setLineDash([]);

    // Dashed line connecting z and conjugate (symmetry)
    ctx.strokeStyle = 'rgba(148, 163, 184, 0.3)';
    ctx.lineWidth = 1;
    ctx.setLineDash([3, 3]);
    ctx.beginPath();
    ctx.moveTo(toCanvasX(zx), toCanvasY(zy));
    ctx.lineTo(toCanvasX(cjx), toCanvasY(cjy));
    ctx.stroke();
    ctx.setLineDash([]);

    // Draw point z = 4 - 3i
    drawPoint(zx, zy, '#60a5fa', 'z = 4 \u2212 3i', 12, -18);

    // Draw conjugate z̄ = 4 + 3i
    drawPoint(cjx, cjy, '#a78bfa', 'z\u0305 = 4 + 3i', 12, 22);

    // Draw origin
    ctx.fillStyle = '#94a3b8';
    ctx.beginPath();
    ctx.arc(cx, cy, 4, 0, 2 * Math.PI);
    ctx.fill();
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('O', cx + 8, cy + 18);

    // Symmetry label
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'italic 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('simetrija', toCanvasX(4.3), toCanvasY(0) + 4);
    ctx.fillText('oko Re ose', toCanvasX(4.3), toCanvasY(0) + 18);

    // Title at bottom
    ctx.fillStyle = '#94a3b8';
    ctx.font = '14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Kompleksna ravan: z, konjugat i modul', cx, H - 15);
  }

  function drawPoint(x, y, color, label, dx, dy) {
    var px = toCanvasX(x);
    var py = toCanvasY(y);

    // Glow
    ctx.shadowColor = color;
    ctx.shadowBlur = 18;
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.arc(px, py, 9, 0, 2 * Math.PI);
    ctx.fill();
    ctx.shadowBlur = 0;

    // White center
    ctx.fillStyle = '#fff';
    ctx.beginPath();
    ctx.arc(px, py, 4, 0, 2 * Math.PI);
    ctx.fill();

    // Label
    ctx.fillStyle = color;
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText(label, px + dx, py + dy);
  }

  draw();

  // Touch / mouse interaction: show coordinates
  var tooltip = null;

  function getComplexCoords(e) {
    var rect = canvas.getBoundingClientRect();
    var scaleX = W / rect.width;
    var scaleY = H / rect.height;
    var mx, my;
    if (e.touches) {
      mx = (e.touches[0].clientX - rect.left) * scaleX;
      my = (e.touches[0].clientY - rect.top) * scaleY;
    } else {
      mx = (e.clientX - rect.left) * scaleX;
      my = (e.clientY - rect.top) * scaleY;
    }
    var re = (mx - cx) / scale;
    var im = -(my - cy) / scale;
    return { mx: mx, my: my, re: re, im: im };
  }

  function showTooltip(e) {
    e.preventDefault();
    var c = getComplexCoords(e);
    draw();
    // Draw crosshair
    ctx.strokeStyle = 'rgba(148, 163, 184, 0.3)';
    ctx.lineWidth = 1;
    ctx.setLineDash([3, 3]);
    ctx.beginPath();
    ctx.moveTo(c.mx, 0);
    ctx.lineTo(c.mx, H);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(0, c.my);
    ctx.lineTo(W, c.my);
    ctx.stroke();
    ctx.setLineDash([]);

    // Coordinate label
    var reStr = c.re.toFixed(1).replace('.', ',');
    var imStr = Math.abs(c.im).toFixed(1).replace('.', ',');
    var sign = c.im >= 0 ? ' + ' : ' \u2212 ';
    var label = reStr + sign + imStr + 'i';
    var modulus = Math.sqrt(c.re * c.re + c.im * c.im).toFixed(2).replace('.', ',');
    var labelFull = label + '   |z| = ' + modulus;

    ctx.fillStyle = 'rgba(15, 23, 42, 0.85)';
    var tw = ctx.measureText(labelFull).width + 16;
    var lx = Math.min(c.mx + 12, W - tw - 5);
    var ly = Math.max(c.my - 30, 18);
    ctx.fillRect(lx, ly - 14, tw, 22);
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.strokeRect(lx, ly - 14, tw, 22);
    ctx.fillStyle = '#e2e8f0';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText(labelFull, lx + 8, ly + 2);
  }

  canvas.addEventListener('mousemove', showTooltip);
  canvas.addEventListener('touchmove', showTooltip, { passive: false });
  canvas.addEventListener('mouseleave', function() { draw(); });
  canvas.addEventListener('touchend', function() { draw(); });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Modul kompleksnog broja iz jednačine sa konjugatom",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["kompleksni brojevi", "modul", "konjugat", "algebarski oblik", "sistem jednačina"]
}
BRAINSPARK_META-->