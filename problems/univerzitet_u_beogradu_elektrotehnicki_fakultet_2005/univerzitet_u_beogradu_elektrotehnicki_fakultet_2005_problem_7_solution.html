<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Geometrijska progresija ‚Äî sedmi ƒçlan</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM:
Geometrijska progresija sa koliƒçnikom q = 2.
Zbir prvih sedam ƒçlanova S‚Çá = 635.
Naƒái sedmi ƒçlan a‚Çá.

RE≈†ENJE:

Korak 1: Formula za zbir prvih n ƒçlanova geometrijske progresije
S_n = a‚ÇÅ ¬∑ (q^n - 1) / (q - 1)   za q ‚â† 1

Korak 2: Primeniti za n = 7, q = 2
S‚Çá = a‚ÇÅ ¬∑ (2‚Å∑ - 1) / (2 - 1)
S‚Çá = a‚ÇÅ ¬∑ (128 - 1) / 1
S‚Çá = a‚ÇÅ ¬∑ 127

Korak 3: Odrediti a‚ÇÅ
635 = a‚ÇÅ ¬∑ 127
a‚ÇÅ = 635 / 127
a‚ÇÅ = 5

Korak 4: Odrediti a‚Çá
a‚Çá = a‚ÇÅ ¬∑ q‚Å∂ = 5 ¬∑ 2‚Å∂ = 5 ¬∑ 64 = 320

Provera: Napisati svih 7 ƒçlanova:
a‚ÇÅ = 5
a‚ÇÇ = 10
a‚ÇÉ = 20
a‚ÇÑ = 40
a‚ÇÖ = 80
a‚ÇÜ = 160
a‚Çá = 320
Zbir: 5 + 10 + 20 + 40 + 80 + 160 + 320 = 635 ‚úì

ODGOVOR: (E) 320
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-align: center;
  margin-bottom: 8px;
}

.subtitle {
  text-align: center;
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.card-title {
  font-size: 1.25rem;
  font-weight: 700;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.4rem;
}

/* Problem statement */
.problem-card {
  border-left: 4px solid #60a5fa;
}

.problem-card .card-title { color: #60a5fa; }

.problem-text {
  font-size: 1.1rem;
  color: #e2e8f0;
  line-height: 1.8;
}

.options-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 10px;
  margin-top: 16px;
}

.option-item {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 16px;
  text-align: center;
  font-size: 1rem;
  color: #94a3b8;
  transition: all 0.2s;
}

.option-item.correct {
  border-color: #4ade80;
  color: #4ade80;
  background: rgba(74, 222, 128, 0.08);
  font-weight: 700;
}

/* Plan card */
.plan-card {
  border-left: 4px solid #a78bfa;
}

.plan-card .card-title { color: #a78bfa; }

.plan-steps {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 8px;
}

.plan-step {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 18px;
  color: #e2e8f0;
  font-size: 0.95rem;
  display: flex;
  align-items: center;
  gap: 8px;
}

.plan-step .step-num {
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  font-weight: 800;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.85rem;
  flex-shrink: 0;
}

/* Theory section */
details {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  margin-bottom: 24px;
  overflow: hidden;
}

summary {
  padding: 20px 24px;
  cursor: pointer;
  font-size: 1.2rem;
  font-weight: 700;
  color: #a78bfa;
  list-style: none;
  display: flex;
  align-items: center;
  gap: 10px;
  user-select: none;
  transition: background 0.2s;
}

summary:hover { background: rgba(167, 139, 250, 0.05); }

summary::-webkit-details-marker { display: none; }

summary::after {
  content: '‚ñ∂';
  margin-left: auto;
  font-size: 0.8rem;
  transition: transform 0.3s;
  color: #94a3b8;
}

details[open] summary::after { transform: rotate(90deg); }

.theory-content {
  padding: 0 24px 24px;
  color: #e2e8f0;
}

.formula-box {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 12px;
  padding: 18px 20px;
  margin: 12px 0;
  text-align: center;
  font-size: 1.1rem;
}

.formula-box.highlight {
  border-color: #60a5fa;
  background: rgba(96, 165, 250, 0.06);
}

.formula-label {
  font-size: 0.85rem;
  color: #94a3b8;
  margin-bottom: 6px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Canvas area */
.canvas-wrapper {
  text-align: center;
  margin: 16px 0;
}

canvas {
  border-radius: 12px;
  max-width: 100%;
  height: auto;
}

/* Steps */
.step-card {
  border-left: 4px solid #60a5fa;
  position: relative;
}

.step-card .card-title { color: #60a5fa; }

.step-card:nth-child(even) { border-left-color: #a78bfa; }
.step-card:nth-child(even) .card-title { color: #a78bfa; }

.step-math {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 12px;
  padding: 18px 20px;
  margin: 12px 0;
  font-size: 1.1rem;
}

.step-explanation {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 8px;
  line-height: 1.6;
}

/* Checkpoint */
.checkpoint {
  background: rgba(96, 165, 250, 0.06);
  border: 1px dashed #60a5fa;
  border-radius: 12px;
  padding: 16px 20px;
  margin: 16px 0;
  cursor: pointer;
  transition: all 0.3s;
}

.checkpoint:hover { background: rgba(96, 165, 250, 0.12); }

.checkpoint-question {
  color: #60a5fa;
  font-weight: 600;
  margin-bottom: 4px;
}

.checkpoint-answer {
  color: #94a3b8;
  display: none;
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px solid #334155;
}

.checkpoint.revealed .checkpoint-answer { display: block; }

/* Key insight */
.insight-card {
  border: 1px solid #a78bfa;
  background: rgba(167, 139, 250, 0.06);
}

.insight-card .card-title { color: #a78bfa; }

/* Final answer */
.answer-card {
  border: 2px solid #4ade80;
  background: rgba(74, 222, 128, 0.06);
  text-align: center;
}

.answer-card .card-title {
  color: #4ade80;
  justify-content: center;
  font-size: 1.3rem;
}

.answer-value {
  font-size: 2rem;
  font-weight: 800;
  color: #4ade80;
  margin: 16px 0;
}

/* Pitfalls */
.pitfall-card {
  border-left: 4px solid #f472b6;
}

.pitfall-card .card-title { color: #f472b6; }

.pitfall-item {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 14px 18px;
  margin: 10px 0;
  color: #e2e8f0;
}

.pitfall-item strong {
  color: #f472b6;
}

/* Challenge */
.challenge-card {
  border: 1px dashed #34d399;
  background: rgba(52, 211, 153, 0.04);
}

.challenge-card .card-title { color: #34d399; }

.hint-btn {
  background: rgba(52, 211, 153, 0.1);
  border: 1px solid #34d399;
  color: #34d399;
  padding: 8px 20px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.95rem;
  margin-top: 12px;
  transition: all 0.2s;
}

.hint-btn:hover {
  background: rgba(52, 211, 153, 0.2);
}

.hint-text {
  display: none;
  color: #94a3b8;
  margin-top: 12px;
  padding: 14px 18px;
  background: #0f172a;
  border-radius: 10px;
  border: 1px solid #334155;
}

/* Verification table */
.verify-table {
  width: 100%;
  border-collapse: collapse;
  margin: 16px 0;
}

.verify-table th,
.verify-table td {
  padding: 10px 16px;
  text-align: center;
  border: 1px solid #334155;
  font-size: 0.95rem;
}

.verify-table th {
  background: #0f172a;
  color: #60a5fa;
  font-weight: 700;
}

.verify-table td {
  color: #e2e8f0;
}

.verify-table tr:last-child td {
  color: #4ade80;
  font-weight: 700;
  background: rgba(74, 222, 128, 0.06);
}

@media (max-width: 600px) {
  h1 { font-size: 1.5rem; }
  .card { padding: 16px; }
  .options-grid { grid-template-columns: repeat(3, 1fr); }
  .plan-steps { flex-direction: column; }
  .answer-value { font-size: 1.5rem; }
}
</style>
</head>
<body>
<div class="container">

  <!-- TITLE -->
  <h1>Geometrijska progresija ‚Äî sedmi ƒçlan</h1>
  <p class="subtitle">Zbir prvih sedam ƒçlanova i odreƒëivanje konkretnog ƒçlana niza</p>

  <!-- PROBLEM STATEMENT -->
  <div class="card problem-card">
    <div class="card-title"><span class="icon">üìã</span> Postavka zadatka</div>
    <div class="problem-text">
      U geometrijskoj progresiji koliƒçnik je \( q = 2 \), a zbir prvih sedam ƒçlanova je jednak \( 635 \). Tada sedmi ƒçlan iznosi:
    </div>
    <div class="options-grid">
      <div class="option-item">(A) 310</div>
      <div class="option-item">(B) 325</div>
      <div class="option-item">(C) 355</div>
      <div class="option-item">(D) 315</div>
      <div class="option-item correct">(E) 320</div>
      <div class="option-item">(N) Ne znam</div>
    </div>
  </div>

  <!-- PLAN -->
  <div class="card plan-card">
    <div class="card-title"><span class="icon">üó∫Ô∏è</span> Plan re≈°avanja</div>
    <p style="color:#94a3b8; margin-bottom: 12px;">Zadatak ƒáemo re≈°iti u tri jasna koraka:</p>
    <div class="plan-steps">
      <div class="plan-step"><span class="step-num">1</span> Primeniti formulu za zbir GP i naƒái \( a_1 \)</div>
      <div class="plan-step"><span class="step-num">2</span> Izraƒçunati \( a_7 \) pomoƒáu op≈°teg ƒçlana</div>
      <div class="plan-step"><span class="step-num">3</span> Proveriti rezultat sabiranjem svih ƒçlanova</div>
    </div>
  </div>

  <!-- THEORY REFRESHER -->
  <details>
    <summary><span class="icon">üìê</span> Kljuƒçne formule i teoreme</summary>
    <div class="theory-content">
      <p style="margin-bottom:12px;">Geometrijska progresija (GP) je niz brojeva u kome je odnos svakog ƒçlana prema prethodnom konstantan. Taj odnos se naziva <strong>koliƒçnik</strong> i oznaƒçava se sa \( q \).</p>

      <div class="formula-box highlight">
        <div class="formula-label">Op≈°ti (n-ti) ƒçlan geometrijske progresije</div>
        \[ a_n = a_1 \cdot q^{n-1} \]
      </div>

      <div class="formula-box highlight">
        <div class="formula-label">Zbir prvih n ƒçlanova (za \( q \neq 1 \))</div>
        \[ S_n = a_1 \cdot \frac{q^n - 1}{q - 1} \]
      </div>

      <p style="margin-top: 14px; color: #94a3b8;">
        Ovde koristimo varijantu formule za \( q > 1 \). Kada je \( q = 2 \), imenilac je jednostavno \( 2 - 1 = 1 \), ≈°to znaƒçajno pojednostavljuje raƒçun.
      </p>
    </div>
  </details>

  <!-- VISUAL AID -->
  <div class="card">
    <div class="card-title"><span class="icon">üìä</span> Vizuelni prikaz ‚Äî ƒçlanovi geometrijske progresije</div>
    <div class="canvas-wrapper">
      <canvas id="gpCanvas" width="800" height="400"></canvas>
    </div>
    <p style="color:#94a3b8; font-size:0.9rem; text-align:center; margin-top:8px;">
      Svaki stupac predstavlja jedan ƒçlan progresije. Uoƒçite kako se svaki naredni ƒçlan udvostruƒçuje.
    </p>
  </div>

  <!-- STEP 1 -->
  <div class="card step-card">
    <div class="card-title"><span class="icon">1Ô∏è‚É£</span> Korak 1: Postaviti jednaƒçinu za zbir</div>
    <p>Koristimo formulu za zbir prvih \( n \) ƒçlanova geometrijske progresije:</p>
    <div class="step-math">
      \[ S_n = a_1 \cdot \frac{q^n - 1}{q - 1} \]
    </div>
    <p>Zamenjujemo poznate vrednosti \( n = 7 \), \( q = 2 \) i \( S_7 = 635 \):</p>
    <div class="step-math">
      \[ 635 = a_1 \cdot \frac{2^7 - 1}{2 - 1} \]
    </div>
    <p>Izraƒçunavamo:</p>
    <div class="step-math">
      \[ 2^7 = 128, \quad 128 - 1 = 127, \quad \frac{127}{1} = 127 \]
    </div>
    <p>Dakle:</p>
    <div class="step-math">
      \[ 635 = a_1 \cdot 127 \]
    </div>
    <p class="step-explanation">Po≈°to je \( q = 2 \), imenilac formule je \( q - 1 = 1 \), pa se formula svodi na mnogo jednostavniji oblik: \( S_7 = a_1 \cdot (2^7 - 1) \).</p>
  </div>

  <!-- STEP 2 -->
  <div class="card step-card">
    <div class="card-title"><span class="icon">2Ô∏è‚É£</span> Korak 2: Odrediti prvi ƒçlan \( a_1 \)</div>
    <p>Iz prethodne jednaƒçine dobijamo:</p>
    <div class="step-math">
      \[ a_1 = \frac{635}{127} = 5 \]
    </div>
    <p class="step-explanation">Primetimo da je \( 127 \times 5 = 635 \). Ovo se lako mo≈æe proveriti: \( 127 \times 5 = 127 \times 4 + 127 = 508 + 127 = 635 \). ‚úì</p>

    <!-- Checkpoint -->
    <div class="checkpoint" onclick="this.classList.toggle('revealed')">
      <div class="checkpoint-question">ü§î Proveri se: Koliki je prvi ƒçlan geometrijske progresije? (Klikni za odgovor)</div>
      <div class="checkpoint-answer">
        Prvi ƒçlan je \( a_1 = 5 \). Ako si dobio/la isto, sjajno! Nastavi dalje.
      </div>
    </div>
  </div>

  <!-- STEP 3 -->
  <div class="card step-card">
    <div class="card-title"><span class="icon">3Ô∏è‚É£</span> Korak 3: Izraƒçunati sedmi ƒçlan \( a_7 \)</div>
    <p>Primenjujemo formulu za op≈°ti ƒçlan:</p>
    <div class="step-math">
      \[ a_7 = a_1 \cdot q^{7-1} = a_1 \cdot q^6 \]
    </div>
    <p>Zamenjujemo \( a_1 = 5 \) i \( q = 2 \):</p>
    <div class="step-math">
      \[ a_7 = 5 \cdot 2^6 = 5 \cdot 64 = 320 \]
    </div>
    <p class="step-explanation">Stepen \( 2^6 = 64 \) je va≈æno zapamtiti ‚Äî stepeni dvojke su veoma ƒçesti u matematici i informatici: \( 2, 4, 8, 16, 32, 64, 128, 256, \ldots \)</p>
  </div>

  <!-- STEP 4: VERIFICATION -->
  <div class="card step-card">
    <div class="card-title"><span class="icon">4Ô∏è‚É£</span> Korak 4: Provera ‚Äî zbir svih sedam ƒçlanova</div>
    <p>Ispi≈°imo sve ƒçlanove progresije i proverimo da je njihov zbir zaista 635:</p>
    <table class="verify-table">
      <thead>
        <tr>
          <th>\( n \)</th>
          <th>Formula</th>
          <th>\( a_n \)</th>
          <th>Parcijalni zbir</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>1</td><td>\( 5 \cdot 2^0 \)</td><td>5</td><td>5</td></tr>
        <tr><td>2</td><td>\( 5 \cdot 2^1 \)</td><td>10</td><td>15</td></tr>
        <tr><td>3</td><td>\( 5 \cdot 2^2 \)</td><td>20</td><td>35</td></tr>
        <tr><td>4</td><td>\( 5 \cdot 2^3 \)</td><td>40</td><td>75</td></tr>
        <tr><td>5</td><td>\( 5 \cdot 2^4 \)</td><td>80</td><td>155</td></tr>
        <tr><td>6</td><td>\( 5 \cdot 2^5 \)</td><td>160</td><td>315</td></tr>
        <tr><td>7</td><td>\( 5 \cdot 2^6 \)</td><td>320</td><td>635 ‚úì</td></tr>
      </tbody>
    </table>
    <p class="step-explanation">Zbir svih sedam ƒçlanova je: \( 5 + 10 + 20 + 40 + 80 + 160 + 320 = 635 \). Rezultat je potvrƒëen!</p>

    <!-- Checkpoint -->
    <div class="checkpoint" onclick="this.classList.toggle('revealed')">
      <div class="checkpoint-question">ü§î Proveri se: Uoƒçi obrazac ‚Äî koliki je zbir prvih 6 ƒçlanova u odnosu na sedmi? (Klikni za odgovor)</div>
      <div class="checkpoint-answer">
        Zbir prvih 6 ƒçlanova je \( S_6 = 315 \), a sedmi ƒçlan je \( a_7 = 320 \). Dakle, \( a_7 = S_6 + 5 \). Ovo je karakteristiƒçno za GP sa \( q = 2 \): svaki ƒçlan je gotovo jednak zbiru svih prethodnih ƒçlanova (razlika je taƒçno \( a_1 \)).
        <br><br>
        Op≈°tije: u GP sa \( q = 2 \) va≈æi \( a_n = S_{n-1} + a_1 \).
      </div>
    </div>
  </div>

  <!-- KEY INSIGHT -->
  <div class="card insight-card">
    <div class="card-title"><span class="icon">üí°</span> Kljuƒçni uvid</div>
    <p>Kada je koliƒçnik geometrijske progresije \( q = 2 \), formula za zbir se dramatiƒçno pojednostavljuje jer imenilac postaje 1:</p>
    <div class="step-math">
      \[ S_n = a_1 \cdot (2^n - 1) \]
    </div>
    <p style="color:#94a3b8; margin-top:10px;">
      Ovo znaƒçi da je zbir prvih \( n \) ƒçlanova uvek za \( a_1 \) manji od \( a_1 \cdot 2^n \), tj. od dvostruke vrednosti poslednjeg ƒçlana. U na≈°em sluƒçaju: \( S_7 = 635 = 2 \cdot 320 - 5 \).
    </p>
    <p style="margin-top: 12px;">
      Jo≈° jedna korisna veza: u GP sa \( q = 2 \), sedmi ƒçlan se mo≈æe izraziti i kao:
    </p>
    <div class="step-math">
      \[ a_7 = \frac{S_7 + a_1}{2} = \frac{S_7 + \frac{S_7}{2^7 - 1}}{2} \]
    </div>
  </div>

  <!-- FINAL ANSWER -->
  <div class="card answer-card">
    <div class="card-title"><span class="icon">‚úÖ</span> Konaƒçan odgovor</div>
    <div class="answer-value">\( a_7 = 320 \)</div>
    <p style="color:#e2e8f0; font-size: 1.1rem; margin-bottom: 12px;">Taƒçan odgovor je <strong style="color:#4ade80;">(E) 320</strong></p>
    <div class="options-grid" style="max-width: 500px; margin: 0 auto;">
      <div class="option-item">(A) 310 ‚úó</div>
      <div class="option-item">(B) 325 ‚úó</div>
      <div class="option-item">(C) 355 ‚úó</div>
      <div class="option-item">(D) 315 ‚úó</div>
      <div class="option-item correct">(E) 320 ‚úì</div>
    </div>
  </div>

  <!-- COMMON PITFALLS -->
  <div class="card pitfall-card">
    <div class="card-title"><span class="icon">‚ö†Ô∏è</span> ƒåeste gre≈°ke</div>
    <div class="pitfall-item">
      <strong>Pogre≈°an eksponent u formuli za op≈°ti ƒçlan:</strong> Sedmi ƒçlan koristi eksponent \( n - 1 = 6 \), a ne \( 7 \). Formula glasi \( a_n = a_1 \cdot q^{n-1} \), ne \( a_1 \cdot q^n \). Da smo koristili \( 2^7 = 128 \) umesto \( 2^6 = 64 \), dobili bismo pogre≈°an rezultat \( 640 \).
    </div>
    <div class="pitfall-item">
      <strong>Gre≈°aka pri deljenju 635 sa 127:</strong> Ako se ne primeti da je \( 127 \times 5 = 635 \), lako se napravi raƒçunska gre≈°ka. Korisno je proveriti: \( 127 \times 5 = 127 \times 4 + 127 = 508 + 127 = 635 \).
    </div>
  </div>

  <!-- OPTIONAL CHALLENGE -->
  <div class="card challenge-card">
    <div class="card-title"><span class="icon">üèÜ</span> Dodatni izazov</div>
    <p>Ako u geometrijskoj progresiji sa koliƒçnikom \( q = 3 \) zbir prvih pet ƒçlanova iznosi 605, koliki je peti ƒçlan?</p>
    <button class="hint-btn" onclick="document.getElementById('challengeHint').style.display='block'; this.style.display='none';">
      Prika≈æi nagove≈°taj
    </button>
    <div id="challengeHint" class="hint-text">
      <strong>Nagove≈°taj:</strong> Postupak je isti. Primeni formulu \( S_5 = a_1 \cdot \frac{3^5 - 1}{3 - 1} = a_1 \cdot \frac{242}{2} = 121 \cdot a_1 \).
      <br><br>
      Dakle \( a_1 = 605 / 121 = 5 \), pa je \( a_5 = 5 \cdot 3^4 = 5 \cdot 81 = 405 \).
    </div>
  </div>

</div>

<script>
(function() {
  // Canvas: Bar chart of GP terms
  const canvas = document.getElementById('gpCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');

  const dpr = window.devicePixelRatio || 1;
  const displayW = canvas.clientWidth || 800;
  const displayH = canvas.clientHeight || 400;
  canvas.width = displayW * dpr;
  canvas.height = displayH * dpr;
  ctx.scale(dpr, dpr);

  const terms = [5, 10, 20, 40, 80, 160, 320];
  const labels = ['a‚ÇÅ', 'a‚ÇÇ', 'a‚ÇÉ', 'a‚ÇÑ', 'a‚ÇÖ', 'a‚ÇÜ', 'a‚Çá'];
  const maxVal = 320;

  const padLeft = 60;
  const padRight = 30;
  const padTop = 40;
  const padBottom = 60;
  const chartW = displayW - padLeft - padRight;
  const chartH = displayH - padTop - padBottom;
  const barW = chartW / terms.length * 0.6;
  const gap = chartW / terms.length;

  // Background
  ctx.fillStyle = '#0f172a';
  ctx.fillRect(0, 0, displayW, displayH);

  // Grid lines
  ctx.strokeStyle = '#334155';
  ctx.lineWidth = 1;
  const gridSteps = [0, 50, 100, 150, 200, 250, 300, 350];
  for (const val of gridSteps) {
    const y = padTop + chartH - (val / maxVal) * chartH;
    ctx.beginPath();
    ctx.moveTo(padLeft, y);
    ctx.lineTo(padLeft + chartW, y);
    ctx.stroke();

    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText(val.toString(), padLeft - 10, y + 4);
  }

  // Bars with animation
  let progress = 0;
  const animDuration = 1200;
  const startTime = performance.now();

  function drawBars(t) {
    progress = Math.min(1, (t - startTime) / animDuration);
    const ease = 1 - Math.pow(1 - progress, 3); // ease-out cubic

    // Clear chart area
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(padLeft, padTop - 5, chartW + 5, chartH + 5);

    // Re-draw grid
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    for (const val of gridSteps) {
      const y = padTop + chartH - (val / maxVal) * chartH;
      ctx.beginPath();
      ctx.moveTo(padLeft, y);
      ctx.lineTo(padLeft + chartW, y);
      ctx.stroke();
    }

    for (let i = 0; i < terms.length; i++) {
      const x = padLeft + i * gap + (gap - barW) / 2;
      const h = (terms[i] / maxVal) * chartH * ease;
      const y = padTop + chartH - h;

      // Gradient bar
      const grad = ctx.createLinearGradient(x, y, x, padTop + chartH);
      if (i === terms.length - 1) {
        grad.addColorStop(0, '#4ade80');
        grad.addColorStop(1, '#22c55e');
      } else {
        grad.addColorStop(0, '#60a5fa');
        grad.addColorStop(1, '#3b82f6');
      }
      ctx.fillStyle = grad;

      // Rounded top
      const r = Math.min(6, barW / 2);
      ctx.beginPath();
      ctx.moveTo(x, padTop + chartH);
      ctx.lineTo(x, y + r);
      ctx.quadraticCurveTo(x, y, x + r, y);
      ctx.lineTo(x + barW - r, y);
      ctx.quadraticCurveTo(x + barW, y, x + barW, y + r);
      ctx.lineTo(x + barW, padTop + chartH);
      ctx.closePath();
      ctx.fill();

      // Value on top
      if (ease > 0.5) {
        ctx.fillStyle = i === terms.length - 1 ? '#4ade80' : '#e2e8f0';
        ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText(terms[i].toString(), x + barW / 2, y - 8);
      }

      // Label below
      ctx.fillStyle = i === terms.length - 1 ? '#4ade80' : '#94a3b8';
      ctx.font = '14px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(labels[i], x + barW / 2, padTop + chartH + 20);

      // √ó2 arrow between bars
      if (i < terms.length - 1 && ease > 0.7) {
        const arrowX = x + barW + (gap - barW) / 2;
        const arrowY = padTop + chartH + 42;
        ctx.fillStyle = '#a78bfa';
        ctx.font = '11px Segoe UI, system-ui, sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('√ó2', arrowX, arrowY);
      }
    }

    // Title
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Zbir: 5 + 10 + 20 + 40 + 80 + 160 + 320 = 635', displayW / 2, padTop - 12);

    if (progress < 1) {
      requestAnimationFrame(drawBars);
    }
  }

  requestAnimationFrame(drawBars);
})();
</script>
</body>
</html>

<!--BRAINSPARK_META
{
  "title": "Geometrijska progresija ‚Äî sedmi ƒçlan pri poznatom zbiru",
  "subject": "math",
  "unit": "sequences and series",
  "topic_tags": ["geometrijska progresija", "zbir ƒçlanova", "op≈°ti ƒçlan niza", "nizovi i redovi"]
}
BRAINSPARK_META-->
