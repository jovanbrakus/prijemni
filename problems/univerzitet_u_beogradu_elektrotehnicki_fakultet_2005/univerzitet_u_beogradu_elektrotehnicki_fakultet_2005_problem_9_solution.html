<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zbir koeficijenata pravca tangenti na kružnicu</title>
<script>MathJax={tex:{inlineMath:[['\\(','\\)'],['$','$']],displayMath:[['\\[','\\]']]},svg:{fontCache:'global'}};</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<script type="text/info" id="logic-scratchpad">
PROBLEM: Find the sum of slopes of tangent lines to circle x²+y²=2
that pass through the intersection of lines x-y-1=0 and x+y-3=0.

STEP 1: Find intersection point of the two lines.
  x - y - 1 = 0  =>  x - y = 1   ... (1)
  x + y - 3 = 0  =>  x + y = 3   ... (2)
  Adding (1)+(2): 2x = 4 => x = 2
  From (2): y = 3 - 2 = 1
  Intersection point: T(2, 1)

STEP 2: Verify T is outside the circle.
  2² + 1² = 4 + 1 = 5 > 2 ✓ (outside, so two tangent lines exist)

STEP 3: Equation of tangent line through T(2,1) with slope k.
  y - 1 = k(x - 2)
  kx - y + (1 - 2k) = 0

STEP 4: Tangency condition — distance from center O(0,0) to line = radius √2.
  d = |k·0 - 0 + (1-2k)| / √(k²+1) = |1-2k| / √(k²+1) = √2

STEP 5: Square both sides.
  (1-2k)² = 2(k²+1)
  1 - 4k + 4k² = 2k² + 2
  2k² - 4k - 1 = 0

STEP 6: By Vieta's formulas, sum of roots k₁ + k₂ = -(-4)/2 = 4/2 = 2.

STEP 7: Verify roots exist (discriminant).
  D = 16 + 8 = 24 > 0 ✓ (two distinct real roots)
  k = (4 ± √24) / 4 = (4 ± 2√6) / 4 = (2 ± √6) / 2
  k₁ = (2+√6)/2 ≈ 2.225
  k₂ = (2-√6)/2 ≈ -0.225
  k₁ + k₂ = 4/2 = 2 ✓

ANSWER: (A) 2
</script>
<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}
.container { max-width: 1200px; margin: 0 auto; }
h1 {
  text-align: center;
  font-size: clamp(1.5rem, 4vw, 2.2rem);
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 32px;
  padding: 20px 0;
}
.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
}
.card-title {
  font-size: 1.25rem;
  font-weight: 700;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}
.card-title.blue { color: #60a5fa; }
.card-title.purple { color: #a78bfa; }
.card-title.green { color: #4ade80; }
.card-title.pink { color: #f472b6; }
.card-title.amber { color: #fbbf24; }
.muted { color: #94a3b8; }
.highlight-box {
  background: rgba(96, 165, 250, 0.1);
  border-left: 4px solid #60a5fa;
  padding: 16px 20px;
  border-radius: 0 12px 12px 0;
  margin: 16px 0;
}
.step {
  background: rgba(167, 139, 250, 0.07);
  border-left: 4px solid #a78bfa;
  padding: 18px 22px;
  border-radius: 0 12px 12px 0;
  margin: 18px 0;
}
.step-num {
  display: inline-block;
  background: linear-gradient(135deg, #a78bfa, #60a5fa);
  color: #0f172a;
  font-weight: 800;
  width: 32px; height: 32px;
  border-radius: 50%;
  text-align: center;
  line-height: 32px;
  font-size: 0.9rem;
  margin-right: 10px;
}
.final-answer {
  background: rgba(52, 211, 153, 0.12);
  border: 2px solid #34d399;
  border-radius: 16px;
  padding: 24px 28px;
  text-align: center;
  margin: 24px 0;
}
.final-answer .answer-value {
  font-size: 1.8rem;
  font-weight: 800;
  color: #4ade80;
  margin: 12px 0;
}
.options-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 10px;
  margin-top: 16px;
}
.option {
  padding: 10px;
  border-radius: 10px;
  text-align: center;
  font-weight: 600;
  border: 2px solid #334155;
  background: #1e293b;
  transition: all 0.2s;
}
.option.correct {
  border-color: #34d399;
  background: rgba(52, 211, 153, 0.15);
  color: #4ade80;
}
.option.incorrect { color: #94a3b8; }

/* Collapsible */
.collapsible-header {
  cursor: pointer;
  user-select: none;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.collapsible-header .arrow {
  transition: transform 0.3s;
  font-size: 1.2rem;
  color: #94a3b8;
}
.collapsible-header.open .arrow { transform: rotate(180deg); }
.collapsible-body {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.4s ease;
}
.collapsible-body.open { max-height: 3000px; }

/* Checkpoint */
.checkpoint {
  background: rgba(251, 191, 36, 0.1);
  border: 1px dashed #fbbf24;
  border-radius: 12px;
  padding: 16px 20px;
  margin: 20px 0;
}
.checkpoint summary {
  cursor: pointer;
  color: #fbbf24;
  font-weight: 700;
  list-style: none;
}
.checkpoint summary::-webkit-details-marker { display: none; }
.checkpoint .answer { margin-top: 10px; color: #e2e8f0; }

/* Canvas container */
.canvas-container {
  position: relative;
  width: 100%;
  max-width: 700px;
  margin: 0 auto;
}
canvas {
  width: 100%;
  border-radius: 12px;
  background: #0f172a;
  border: 1px solid #334155;
  cursor: grab;
  touch-action: none;
}
canvas:active { cursor: grabbing; }
.canvas-controls {
  display: flex;
  gap: 10px;
  justify-content: center;
  margin-top: 12px;
  flex-wrap: wrap;
}
.canvas-btn {
  background: #334155;
  color: #e2e8f0;
  border: 1px solid #475569;
  border-radius: 8px;
  padding: 8px 16px;
  cursor: pointer;
  font-size: 0.85rem;
  transition: background 0.2s;
}
.canvas-btn:hover { background: #475569; }
.canvas-btn.active { background: #60a5fa; color: #0f172a; border-color: #60a5fa; }
.canvas-info {
  text-align: center;
  color: #94a3b8;
  font-size: 0.85rem;
  margin-top: 8px;
}

/* Key insight */
.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 16px;
  padding: 24px;
  margin: 20px 0;
}

/* Responsive */
@media (max-width: 640px) {
  body { padding: 10px; }
  .card { padding: 18px; }
  .options-grid { grid-template-columns: repeat(3, 1fr); }
}
</style>
</head>
<body>
<div class="container">

<h1>Zbir koeficijenata pravca tangenti na kružnicu</h1>

<!-- Problem Statement -->
<div class="card">
  <div class="card-title blue">Postavka zadatka</div>
  <p>Zbir koeficijenata pravca tangenti kružnice \(x^2 + y^2 = 2\) koje sadrže presečnu tačku pravih \(x - y - 1 = 0\) i \(x + y - 3 = 0\) je:</p>
  <div class="options-grid">
    <div class="option correct">(A) \(2\)</div>
    <div class="option incorrect">(B) \(\sqrt{6}\)</div>
    <div class="option incorrect">(C) \(-2\)</div>
    <div class="option incorrect">(D) \(-\sqrt{6}\)</div>
    <div class="option incorrect">(E) \(2\sqrt{6}\)</div>
    <div class="option incorrect">(N) Ne znam</div>
  </div>
</div>

<!-- Plan -->
<div class="card">
  <div class="card-title purple">Plan rešavanja</div>
  <ol style="padding-left: 20px; color: #94a3b8;">
    <li style="margin-bottom: 8px;">Naći presečnu tačku \(T\) dve zadate prave</li>
    <li style="margin-bottom: 8px;">Proveriti da je \(T\) van kružnice (da tangente postoje)</li>
    <li style="margin-bottom: 8px;">Postaviti jednačinu prave kroz \(T\) sa nagibom \(k\)</li>
    <li style="margin-bottom: 8px;">Primeniti uslov tangentnosti: rastojanje od centra do prave = poluprečnik</li>
    <li style="margin-bottom: 8px;">Dobiti kvadratnu jednačinu po \(k\) i primeniti Vijetove formule za zbir korena</li>
  </ol>
</div>

<!-- Theory Refresher -->
<div class="card">
  <div class="collapsible-header" onclick="toggleCollapsible(this)">
    <div class="card-title amber" style="margin-bottom:0;">Teorijsko podsetnik</div>
    <span class="arrow">&#9660;</span>
  </div>
  <div class="collapsible-body">
    <div style="margin-top: 16px;">
      <p><strong style="color:#60a5fa;">Kružnica sa centrom u koordinatnom početku:</strong></p>
      <p>Kružnica \(x^2 + y^2 = r^2\) ima centar \(O(0, 0)\) i poluprečnik \(r\). U našem slučaju, \(r^2 = 2\), pa je \(r = \sqrt{2}\).</p>

      <p style="margin-top: 14px;"><strong style="color:#60a5fa;">Rastojanje tačke od prave:</strong></p>
      <p>Rastojanje tačke \((x_0, y_0)\) od prave \(ax + by + c = 0\) iznosi:</p>
      \[ d = \frac{|ax_0 + by_0 + c|}{\sqrt{a^2 + b^2}} \]

      <p style="margin-top: 14px;"><strong style="color:#60a5fa;">Uslov tangentnosti:</strong></p>
      <p>Prava je tangenta na kružnicu ako i samo ako je rastojanje centra kružnice od te prave jednako poluprečniku:</p>
      \[ d(O, \text{prava}) = r \]

      <p style="margin-top: 14px;"><strong style="color:#60a5fa;">Vijetove formule:</strong></p>
      <p>Za kvadratnu jednačinu \(ax^2 + bx + c = 0\) sa korenima \(x_1\) i \(x_2\):</p>
      \[ x_1 + x_2 = -\frac{b}{a}, \quad x_1 \cdot x_2 = \frac{c}{a} \]
    </div>
  </div>
</div>

<!-- Visual Aid -->
<div class="card">
  <div class="card-title green">Interaktivna vizuelizacija</div>
  <p class="muted" style="margin-bottom: 12px;">Prevlačite tačku \(T\) da vidite kako se tangente menjaju. Zelena tačka je fiksirana na presečnoj tački pravih.</p>
  <div class="canvas-container">
    <canvas id="mainCanvas" width="700" height="700"></canvas>
    <div class="canvas-controls">
      <button class="canvas-btn active" id="btnReset" onclick="resetPoint()">Resetuj na T(2, 1)</button>
      <button class="canvas-btn" id="btnToggleLabels" onclick="toggleLabels()">Sakrij oznake</button>
      <button class="canvas-btn" id="btnToggleLines" onclick="toggleOrigLines()">Sakrij prave</button>
    </div>
    <div class="canvas-info" id="canvasInfo">Tačka T(2,00; 1,00) — zbir nagiba tangenti: k₁ + k₂ = 2,00</div>
  </div>
</div>

<!-- Step-by-step Solution -->
<div class="card">
  <div class="card-title purple">Rešenje korak po korak</div>

  <div class="step">
    <p><span class="step-num">1</span><strong>Nalaženje presečne tačke pravih</strong></p>
    <p style="margin-top: 10px;">Rešavamo sistem:</p>
    \[ \begin{cases} x - y = 1 \\ x + y = 3 \end{cases} \]
    <p>Sabiranjem jednačina:</p>
    \[ 2x = 4 \implies x = 2 \]
    <p>Zamenom u drugu jednačinu:</p>
    \[ 2 + y = 3 \implies y = 1 \]
    <p>Presečna tačka je \(\boldsymbol{T(2,\; 1)}\).</p>
  </div>

  <div class="checkpoint">
    <details>
      <summary>Proveri se: Da li je tačka T van kružnice?</summary>
      <div class="answer">
        <p>Proveravamo: \(2^2 + 1^2 = 4 + 1 = 5\). Kako je \(5 > 2 = r^2\), tačka \(T\) je <strong>van kružnice</strong>, pa iz nje možemo povući dve tangente.</p>
      </div>
    </details>
  </div>

  <div class="step">
    <p><span class="step-num">2</span><strong>Jednačina prave kroz T sa nagibom k</strong></p>
    <p style="margin-top: 10px;">Jednačina prave koja prolazi kroz \(T(2, 1)\) sa koeficijentom pravca \(k\):</p>
    \[ y - 1 = k(x - 2) \]
    <p>Sređeno:</p>
    \[ kx - y + (1 - 2k) = 0 \]
  </div>

  <div class="step">
    <p><span class="step-num">3</span><strong>Uslov tangentnosti</strong></p>
    <p style="margin-top: 10px;">Rastojanje centra kružnice \(O(0, 0)\) od ove prave mora biti jednako poluprečniku \(r = \sqrt{2}\):</p>
    \[ \frac{|k \cdot 0 - 0 + (1 - 2k)|}{\sqrt{k^2 + 1}} = \sqrt{2} \]
    \[ \frac{|1 - 2k|}{\sqrt{k^2 + 1}} = \sqrt{2} \]
  </div>

  <div class="step">
    <p><span class="step-num">4</span><strong>Kvadriranje i sređivanje</strong></p>
    <p style="margin-top: 10px;">Kvadriramo obe strane:</p>
    \[ (1 - 2k)^2 = 2(k^2 + 1) \]
    <p>Razvijamo levu stranu:</p>
    \[ 1 - 4k + 4k^2 = 2k^2 + 2 \]
    <p>Prenosimo sve na jednu stranu:</p>
    \[ 2k^2 - 4k - 1 = 0 \]
  </div>

  <div class="checkpoint">
    <details>
      <summary>Proveri se: Koliki je diskriminanta ove jednačine?</summary>
      <div class="answer">
        <p>\(D = (-4)^2 - 4 \cdot 2 \cdot (-1) = 16 + 8 = 24 > 0\). Jednačina ima dva realna korena, što znači da postoje dve tangente.</p>
      </div>
    </details>
  </div>

  <div class="step">
    <p><span class="step-num">5</span><strong>Primena Vijetovih formula</strong></p>
    <p style="margin-top: 10px;">Za jednačinu \(2k^2 - 4k - 1 = 0\), gde su \(k_1\) i \(k_2\) koeficijenti pravca dve tangente, Vijetove formule daju:</p>
    \[ k_1 + k_2 = -\frac{-4}{2} = \frac{4}{2} = \boldsymbol{2} \]
    <div class="highlight-box" style="margin-top: 14px;">
      <p><strong>Napomena:</strong> Nismo morali da rešavamo jednačinu eksplicitno! Vijetove formule direktno daju zbir korena iz koeficijenata jednačine.</p>
    </div>
  </div>

  <div class="step" style="border-left-color: #94a3b8;">
    <p><span class="step-num" style="background: linear-gradient(135deg, #94a3b8, #64748b);">+</span><strong>Verifikacija (opciono)</strong></p>
    <p style="margin-top: 10px;">Eksplicitni koreni su:</p>
    \[ k_{1,2} = \frac{4 \pm \sqrt{24}}{4} = \frac{4 \pm 2\sqrt{6}}{4} = \frac{2 \pm \sqrt{6}}{2} \]
    <p>Zbir:</p>
    \[ k_1 + k_2 = \frac{2 + \sqrt{6}}{2} + \frac{2 - \sqrt{6}}{2} = \frac{4}{2} = 2 \;\; \checkmark \]
  </div>
</div>

<!-- Key Insight -->
<div class="card">
  <div class="insight-box">
    <div class="card-title" style="color: #a78bfa;">Ključni uvid</div>
    <p>Kada se traži <strong>zbir</strong> (ili proizvod) koeficijenata pravca tangenti, ne moramo nalaziti same tangente! Dovoljno je postaviti uslov tangentnosti, dobiti kvadratnu jednačinu po \(k\) i primeniti <strong>Vijetove formule</strong>. Ovo je mnogo brže od eksplicitnog rešavanja.</p>
  </div>
</div>

<!-- Final Answer -->
<div class="card">
  <div class="card-title green">Konačan odgovor</div>
  <div class="final-answer">
    <p class="muted">Zbir koeficijenata pravca tangenti je:</p>
    <div class="answer-value">\(k_1 + k_2 = 2\)</div>
    <p style="color: #4ade80; font-weight: 700; font-size: 1.1rem;">Odgovor: (A) 2</p>
  </div>
  <div class="options-grid" style="margin-top: 16px;">
    <div class="option correct">(A) \(2\)</div>
    <div class="option incorrect">(B) \(\sqrt{6}\)</div>
    <div class="option incorrect">(C) \(-2\)</div>
    <div class="option incorrect">(D) \(-\sqrt{6}\)</div>
    <div class="option incorrect">(E) \(2\sqrt{6}\)</div>
    <div class="option incorrect">(N) Ne znam</div>
  </div>
</div>

<!-- Common Pitfalls -->
<div class="card">
  <div class="card-title pink">Najčešće greške</div>
  <ul style="padding-left: 20px; color: #94a3b8;">
    <li style="margin-bottom: 10px;"><strong style="color: #f472b6;">Pogrešan predznak u Vijetovim formulama:</strong> Zbir korena je \(-b/a\), ne \(b/a\). Ovde: \(-(-4)/2 = 2\), ne \(-4/2 = -2\). Mnogi biraju pogrešan odgovor (C).</li>
    <li style="margin-bottom: 10px;"><strong style="color: #f472b6;">Nepotrebno eksplicitno rešavanje:</strong> Ako zadatak traži zbir, Vijetove formule su elegantnije i brže od nalaženja pojedinačnih korena.</li>
    <li style="margin-bottom: 10px;"><strong style="color: #f472b6;">Zaboravljanje provere:</strong> Uvek proveriti da li je spoljna tačka zaista van kružnice (\(x_0^2 + y_0^2 > r^2\)), inače tangente ne postoje.</li>
    <li><strong style="color: #f472b6;">Greška pri kvadriranju:</strong> Ne zaboraviti da je \((1 - 2k)^2 = 1 - 4k + 4k^2\), ne \(1 + 4k^2\).</li>
  </ul>
</div>

<!-- Optional Challenge -->
<div class="card">
  <div class="card-title amber">Dodatni izazov</div>
  <p class="muted">Koliki je <strong>proizvod</strong> koeficijenata pravca iste dve tangente?</p>
  <div class="checkpoint" style="margin-top: 12px;">
    <details>
      <summary>Prikaži rešenje</summary>
      <div class="answer">
        <p>Iz Vijetovih formula za jednačinu \(2k^2 - 4k - 1 = 0\):</p>
        \[ k_1 \cdot k_2 = \frac{c}{a} = \frac{-1}{2} = -\frac{1}{2} \]
        <p>Proizvod koeficijenata pravca tangenti je \(-\dfrac{1}{2}\).</p>
      </div>
    </details>
  </div>
</div>

</div><!-- /container -->

<script>
(function() {
  // Canvas setup
  const canvas = document.getElementById('mainCanvas');
  const ctx = canvas.getContext('2d');
  const dpr = window.devicePixelRatio || 1;

  let W, H;
  function resizeCanvas() {
    const rect = canvas.getBoundingClientRect();
    W = rect.width;
    H = rect.height;
    canvas.width = W * dpr;
    canvas.height = H * dpr;
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    draw();
  }

  // Coordinate system: math coords mapped to canvas
  // Range: x in [-3, 5], y in [-3, 5]
  const xMin = -3, xMax = 5, yMin = -3, yMax = 5;

  function toCanvasX(x) { return (x - xMin) / (xMax - xMin) * W; }
  function toCanvasY(y) { return H - (y - yMin) / (yMax - yMin) * H; }
  function toMathX(cx) { return xMin + cx / W * (xMax - xMin); }
  function toMathY(cy) { return yMin + (H - cy) / H * (yMax - yMin); }

  // State
  let pointT = { x: 2, y: 1 };
  let showLabels = true;
  let showOrigLines = true;
  let dragging = false;

  function getTangentSlopes(px, py) {
    // Tangent from (px, py) to x²+y²=2
    // Line: y - py = k(x - px) => kx - y + (py - k*px) = 0
    // Distance from origin = sqrt(2)
    // |py - k*px|² = 2(k²+1)
    // py² - 2*py*k*px + k²*px² = 2k² + 2
    // k²(px²-2) - 2*py*px*k + (py²-2) = 0
    const a = px*px - 2;
    const b = -2*py*px;
    const c = py*py - 2;
    const disc = b*b - 4*a*c;
    if (disc < 0) return null;
    if (Math.abs(a) < 1e-10) {
      // Linear case
      if (Math.abs(b) < 1e-10) return null;
      return [-c/b];
    }
    const sqrtD = Math.sqrt(disc);
    return [(-b + sqrtD)/(2*a), (-b - sqrtD)/(2*a)];
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Grid
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (let x = Math.ceil(xMin); x <= xMax; x++) {
      ctx.beginPath();
      ctx.moveTo(toCanvasX(x), 0);
      ctx.lineTo(toCanvasX(x), H);
      ctx.stroke();
    }
    for (let y = Math.ceil(yMin); y <= yMax; y++) {
      ctx.beginPath();
      ctx.moveTo(0, toCanvasY(y));
      ctx.lineTo(W, toCanvasY(y));
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(toCanvasX(xMin), toCanvasY(0));
    ctx.lineTo(toCanvasX(xMax), toCanvasY(0));
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(toCanvasX(0), toCanvasY(yMin));
    ctx.lineTo(toCanvasX(0), toCanvasY(yMax));
    ctx.stroke();

    // Axis labels
    if (showLabels) {
      ctx.fillStyle = '#64748b';
      ctx.font = '12px sans-serif';
      ctx.textAlign = 'center';
      for (let x = Math.ceil(xMin); x <= xMax; x++) {
        if (x === 0) continue;
        ctx.fillText(x.toString(), toCanvasX(x), toCanvasY(0) + 16);
      }
      ctx.textAlign = 'right';
      for (let y = Math.ceil(yMin); y <= yMax; y++) {
        if (y === 0) continue;
        ctx.fillText(y.toString(), toCanvasX(0) - 8, toCanvasY(y) + 4);
      }
    }

    // Circle x²+y²=2
    const r = Math.sqrt(2);
    const cx = toCanvasX(0);
    const cy = toCanvasY(0);
    const rx = (r / (xMax - xMin)) * W;
    const ry = (r / (yMax - yMin)) * H;
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.ellipse(cx, cy, rx, ry, 0, 0, 2 * Math.PI);
    ctx.stroke();
    if (showLabels) {
      ctx.fillStyle = '#60a5fa';
      ctx.font = 'bold 13px sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText('x\u00B2+y\u00B2=2', toCanvasX(r * 0.7) + 5, toCanvasY(r * 0.7) - 5);
    }

    // Original lines
    if (showOrigLines) {
      // x - y - 1 = 0 => y = x - 1
      ctx.strokeStyle = 'rgba(251, 191, 36, 0.5)';
      ctx.lineWidth = 1.5;
      ctx.setLineDash([6, 4]);
      ctx.beginPath();
      ctx.moveTo(toCanvasX(xMin), toCanvasY(xMin - 1));
      ctx.lineTo(toCanvasX(xMax), toCanvasY(xMax - 1));
      ctx.stroke();

      // x + y - 3 = 0 => y = 3 - x
      ctx.strokeStyle = 'rgba(244, 114, 182, 0.5)';
      ctx.beginPath();
      ctx.moveTo(toCanvasX(xMin), toCanvasY(3 - xMin));
      ctx.lineTo(toCanvasX(xMax), toCanvasY(3 - xMax));
      ctx.stroke();
      ctx.setLineDash([]);

      if (showLabels) {
        ctx.fillStyle = 'rgba(251, 191, 36, 0.8)';
        ctx.font = '12px sans-serif';
        ctx.textAlign = 'left';
        ctx.fillText('x\u2212y\u22121=0', toCanvasX(3.5) + 4, toCanvasY(2.5) + 4);
        ctx.fillStyle = 'rgba(244, 114, 182, 0.8)';
        ctx.fillText('x+y\u22123=0', toCanvasX(3.5) + 4, toCanvasY(-0.5) - 4);
      }
    }

    // Tangent lines from T
    const slopes = getTangentSlopes(pointT.x, pointT.y);
    if (slopes) {
      ctx.lineWidth = 2;
      slopes.forEach((k, i) => {
        ctx.strokeStyle = i === 0 ? '#34d399' : '#4ade80';
        ctx.beginPath();
        // y - py = k(x - px)
        const y1 = pointT.y + k * (xMin - pointT.x);
        const y2 = pointT.y + k * (xMax - pointT.x);
        ctx.moveTo(toCanvasX(xMin), toCanvasY(y1));
        ctx.lineTo(toCanvasX(xMax), toCanvasY(y2));
        ctx.stroke();

        // Find tangent point on circle: solve for intersection
        // Line: kx - y + (py - k*px) = 0
        // Closest point on line from origin = tangent point
        const c_val = pointT.y - k * pointT.x;
        // kx - y + c = 0, foot from (0,0):
        // tx = -k*c/(k²+1), ty = c/(k²+1)
        const denom = k*k + 1;
        const tx = -k * c_val / denom;
        const ty = c_val / denom;

        // Draw tangent point
        ctx.fillStyle = i === 0 ? '#34d399' : '#4ade80';
        ctx.beginPath();
        ctx.arc(toCanvasX(tx), toCanvasY(ty), 5, 0, 2 * Math.PI);
        ctx.fill();

        if (showLabels) {
          ctx.fillStyle = i === 0 ? '#34d399' : '#4ade80';
          ctx.font = 'bold 12px sans-serif';
          ctx.textAlign = 'left';
          const label = 'k' + (i+1) + ' \u2248 ' + k.toFixed(2).replace('.', ',');
          ctx.fillText(label, toCanvasX(tx) + 8, toCanvasY(ty) - 8);
        }
      });

      // Update info
      const sum = slopes.reduce((a, b) => a + b, 0);
      const infoEl = document.getElementById('canvasInfo');
      const xStr = pointT.x.toFixed(2).replace('.', ',');
      const yStr = pointT.y.toFixed(2).replace('.', ',');
      const sumStr = sum.toFixed(2).replace('.', ',');
      if (slopes.length === 2) {
        infoEl.textContent = 'Tačka T(' + xStr + '; ' + yStr + ') \u2014 zbir nagiba tangenti: k\u2081 + k\u2082 = ' + sumStr;
      } else {
        infoEl.textContent = 'Tačka T(' + xStr + '; ' + yStr + ') \u2014 samo jedna tangenta (tačka na kružnici)';
      }
    } else {
      const infoEl = document.getElementById('canvasInfo');
      const xStr = pointT.x.toFixed(2).replace('.', ',');
      const yStr = pointT.y.toFixed(2).replace('.', ',');
      infoEl.textContent = 'Tačka T(' + xStr + '; ' + yStr + ') \u2014 unutar kružnice, tangente ne postoje';
    }

    // Draw radius lines to tangent points (thin)
    if (slopes) {
      ctx.strokeStyle = 'rgba(96, 165, 250, 0.3)';
      ctx.lineWidth = 1;
      ctx.setLineDash([3, 3]);
      slopes.forEach(function(k) {
        const c_val = pointT.y - k * pointT.x;
        const denom = k*k + 1;
        const tx = -k * c_val / denom;
        const ty = c_val / denom;
        ctx.beginPath();
        ctx.moveTo(toCanvasX(0), toCanvasY(0));
        ctx.lineTo(toCanvasX(tx), toCanvasY(ty));
        ctx.stroke();
      });
      ctx.setLineDash([]);
    }

    // Center O
    ctx.fillStyle = '#60a5fa';
    ctx.beginPath();
    ctx.arc(toCanvasX(0), toCanvasY(0), 5, 0, 2 * Math.PI);
    ctx.fill();
    if (showLabels) {
      ctx.fillStyle = '#60a5fa';
      ctx.font = 'bold 13px sans-serif';
      ctx.textAlign = 'right';
      ctx.fillText('O', toCanvasX(0) - 8, toCanvasY(0) + 4);
    }

    // Point T
    ctx.fillStyle = '#f472b6';
    ctx.beginPath();
    ctx.arc(toCanvasX(pointT.x), toCanvasY(pointT.y), 8, 0, 2 * Math.PI);
    ctx.fill();
    ctx.strokeStyle = '#0f172a';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.arc(toCanvasX(pointT.x), toCanvasY(pointT.y), 8, 0, 2 * Math.PI);
    ctx.stroke();
    if (showLabels) {
      ctx.fillStyle = '#f472b6';
      ctx.font = 'bold 14px sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText('T', toCanvasX(pointT.x) + 12, toCanvasY(pointT.y) - 10);
    }
  }

  // Interaction
  function getPointerPos(e) {
    const rect = canvas.getBoundingClientRect();
    const cx = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
    const cy = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
    return { cx, cy };
  }

  function isNearPoint(cx, cy) {
    const dx = cx - toCanvasX(pointT.x);
    const dy = cy - toCanvasY(pointT.y);
    return dx*dx + dy*dy < 400; // 20px radius
  }

  canvas.addEventListener('mousedown', function(e) {
    const { cx, cy } = getPointerPos(e);
    if (isNearPoint(cx, cy)) { dragging = true; }
  });
  canvas.addEventListener('mousemove', function(e) {
    if (!dragging) return;
    const { cx, cy } = getPointerPos(e);
    pointT.x = Math.max(xMin + 0.2, Math.min(xMax - 0.2, toMathX(cx)));
    pointT.y = Math.max(yMin + 0.2, Math.min(yMax - 0.2, toMathY(cy)));
    draw();
  });
  canvas.addEventListener('mouseup', function() { dragging = false; });
  canvas.addEventListener('mouseleave', function() { dragging = false; });

  // Touch support
  canvas.addEventListener('touchstart', function(e) {
    e.preventDefault();
    const { cx, cy } = getPointerPos(e);
    if (isNearPoint(cx, cy)) { dragging = true; }
  }, { passive: false });
  canvas.addEventListener('touchmove', function(e) {
    e.preventDefault();
    if (!dragging) return;
    const rect = canvas.getBoundingClientRect();
    const cx = e.touches[0].clientX - rect.left;
    const cy = e.touches[0].clientY - rect.top;
    pointT.x = Math.max(xMin + 0.2, Math.min(xMax - 0.2, toMathX(cx)));
    pointT.y = Math.max(yMin + 0.2, Math.min(yMax - 0.2, toMathY(cy)));
    draw();
  }, { passive: false });
  canvas.addEventListener('touchend', function() { dragging = false; });

  // Button handlers
  window.resetPoint = function() {
    pointT = { x: 2, y: 1 };
    draw();
  };
  window.toggleLabels = function() {
    showLabels = !showLabels;
    document.getElementById('btnToggleLabels').textContent = showLabels ? 'Sakrij oznake' : 'Prikaži oznake';
    draw();
  };
  window.toggleOrigLines = function() {
    showOrigLines = !showOrigLines;
    document.getElementById('btnToggleLines').textContent = showOrigLines ? 'Sakrij prave' : 'Prikaži prave';
    draw();
  };

  // Collapsible
  window.toggleCollapsible = function(header) {
    header.classList.toggle('open');
    const body = header.nextElementSibling;
    body.classList.toggle('open');
  };

  // Init
  window.addEventListener('resize', resizeCanvas);
  resizeCanvas();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{"title":"Zbir koeficijenata pravca tangenti na kružnicu","subject":"math","unit":"analytic-geometry","topic_tags":["analitička geometrija","kružnica","tangenta","Vijetove formule","koeficijent pravca","jednačina prave","rastojanje tačke od prave"]}
BRAINSPARK_META-->