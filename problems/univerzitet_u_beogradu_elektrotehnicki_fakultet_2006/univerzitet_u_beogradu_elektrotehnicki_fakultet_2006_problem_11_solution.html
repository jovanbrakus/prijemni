<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Srednji Älan binomnog razvoja</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
PROBLEM:
U razvoju binoma (âˆš(1+x) âˆ’ âˆš(1âˆ’x))^n, n âˆˆ â„•, koeficijent treÄ‡eg Älana je 28.
NaÄ‡i srednji Älan razvoja.

SOLUTION:

1. Identify components of the binomial:
   a = âˆš(1+x) = (1+x)^(1/2)
   b = -âˆš(1-x) = -(1-x)^(1/2)

2. General term of (a + b)^n by the binomial theorem:
   T_{k+1} = C(n,k) * a^(n-k) * b^k
   T_{k+1} = C(n,k) * (1+x)^((n-k)/2) * (-1)^k * (1-x)^(k/2)

3. Third term (k=2):
   T_3 = C(n,2) * (1+x)^((n-2)/2) * (-1)^2 * (1-x)^(2/2)
   T_3 = C(n,2) * (1+x)^((n-2)/2) * (1-x)

   The "coefficient" of the third term refers to the binomial coefficient C(n,2).
   C(n,2) = 28
   n(n-1)/2 = 28
   n(n-1) = 56
   n = 8 (since 8*7 = 56, and n âˆˆ â„•)

4. With n = 8, the expansion has 9 terms (k = 0, 1, ..., 8).
   The middle term is the 5th term (k = 4), since (8/2 + 1) = 5.

5. Middle term (k=4):
   T_5 = C(8,4) * (1+x)^((8-4)/2) * (-1)^4 * (1-x)^(4/2)
   T_5 = 70 * (1+x)^2 * 1 * (1-x)^2
   T_5 = 70 * (1+x)^2 * (1-x)^2
   T_5 = 70 * [(1+x)(1-x)]^2
   T_5 = 70 * (1-x^2)^2

   ANSWER: (A) 70(1 âˆ’ xÂ²)Â²

VERIFICATION:
- C(8,4) = 70 âœ“
- (-1)^4 = 1, so sign is positive âœ“
- (1+x)^(4/2) = (1+x)^2 âœ“
- (1-x)^(4/2) = (1-x)^2 âœ“
- (1+x)^2 * (1-x)^2 = [(1+x)(1-x)]^2 = (1-xÂ²)^2 âœ“
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card h3 {
  color: #a78bfa;
  font-size: 1.15rem;
  margin-bottom: 10px;
  margin-top: 16px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.highlight-blue {
  color: #60a5fa;
  font-weight: 600;
}

.highlight-green {
  color: #4ade80;
  font-weight: 600;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 14px;
}

.given-item {
  background: rgba(96, 165, 250, 0.08);
  border: 1px solid rgba(96, 165, 250, 0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 160px;
  flex: 1;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #60a5fa;
  font-size: 1.15rem;
  font-weight: 700;
}

.math-box {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 14px 0;
  overflow-x: auto;
}

.step-container {
  margin-bottom: 22px;
  padding-left: 16px;
  border-left: 3px solid #334155;
}

.step-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  color: #fff;
  font-weight: 700;
  font-size: 0.9rem;
  margin-right: 10px;
  flex-shrink: 0;
}

.step-title {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 700;
  display: flex;
  align-items: center;
  margin-bottom: 10px;
}

.step-text {
  color: #cbd5e1;
  margin-bottom: 10px;
}

details {
  margin: 15px 0;
  background: rgba(167, 139, 250, 0.07);
  border: 1px solid rgba(167, 139, 250, 0.2);
  border-radius: 10px;
  padding: 12px 16px;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  user-select: none;
}

details[open] summary {
  margin-bottom: 10px;
}

details p, details ul {
  color: #cbd5e1;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167, 139, 250, 0.3);
  border-radius: 14px;
  padding: 20px 24px;
  margin-bottom: 24px;
}

.insight-box h2 {
  color: #a78bfa;
}

.answer-box {
  background: linear-gradient(135deg, rgba(52,211,153,0.1), rgba(74,222,128,0.1));
  border: 2px solid rgba(52, 211, 153, 0.4);
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  text-align: center;
}

.answer-box .final-answer {
  color: #4ade80;
  font-size: 1.6rem;
  font-weight: 800;
  margin: 12px 0;
}

.answer-box .answer-label {
  color: #34d399;
  font-size: 1rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 2px;
}

.options-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin: 16px 0;
  justify-content: center;
}

.option {
  background: rgba(51, 65, 85, 0.5);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 18px;
  color: #94a3b8;
  font-size: 1rem;
  transition: all 0.2s;
}

.option.correct {
  background: rgba(52, 211, 153, 0.15);
  border-color: #34d399;
  color: #4ade80;
  font-weight: 700;
}

.pitfall-box {
  background: rgba(224, 148, 104, 0.07);
  border: 1px solid rgba(224, 148, 104, 0.25);
  border-radius: 14px;
  padding: 20px 24px;
  margin-bottom: 24px;
}

.pitfall-box h2 {
  color: #e09468;
}

.pitfall-box ul {
  list-style: none;
  padding-left: 0;
}

.pitfall-box li {
  color: #cbd5e1;
  margin-bottom: 8px;
  padding-left: 22px;
  position: relative;
}

.pitfall-box li::before {
  content: "âš ";
  position: absolute;
  left: 0;
}

.canvas-card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 20px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
  display: flex;
  flex-direction: column;
  align-items: center;
}

.canvas-card h2 {
  align-self: flex-start;
}

canvas {
  border-radius: 10px;
  touch-action: none;
  max-width: 100%;
  height: auto;
}

.challenge-box {
  background: rgba(96, 165, 250, 0.06);
  border: 1px solid rgba(96, 165, 250, 0.2);
  border-radius: 14px;
  padding: 20px 24px;
  margin-bottom: 24px;
}

.challenge-box h2 {
  color: #60a5fa;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .given-grid { flex-direction: column; }
  .options-grid { flex-direction: column; align-items: stretch; }
  .option { text-align: center; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Srednji Älan binomnog razvoja</h1>
  <p class="subtitle">Binomna teorema â€” razvoj binoma sa iracionalnim Älanovima</p>

  <!-- Problem Statement -->
  <div class="card">
    <h2>ğŸ“‹ Zadatak</h2>
    <p>U razvoju binoma \(\left(\sqrt{1+x} - \sqrt{1-x}\right)^n\), gde je \(n \in \mathbb{N}\), koeficijent <span class="highlight">treÄ‡eg Älana</span> je <span class="highlight">28</span>. Odrediti <span class="highlight-blue">srednji Älan</span> razvoja.</p>

    <div class="given-grid">
      <div class="given-item">
        <div class="label">Binom</div>
        <div class="value">\(\left(\sqrt{1+x} - \sqrt{1-x}\right)^n\)</div>
      </div>
      <div class="given-item">
        <div class="label">Koeficijent treÄ‡eg Älana</div>
        <div class="value">28</div>
      </div>
      <div class="given-item">
        <div class="label">TraÅ¾i se</div>
        <div class="value">Srednji Älan</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <h2>ğŸ¯ Plan reÅ¡avanja</h2>
    <p>PrimeniÄ‡emo <span class="highlight-blue">binomnu teoremu</span> na dati izraz, odrediti \(n\) iz uslova za treÄ‡i Älan, a zatim izraÄunati srednji Älan razvoja.</p>
  </div>

  <!-- Theory Refresher -->
  <details>
    <summary>ğŸ“ KljuÄne formule i teoreme</summary>
    <ul style="list-style: disc; padding-left: 20px; margin-top: 10px;">
      <li style="margin-bottom: 8px;"><strong>Binomna teorema:</strong> \(\displaystyle (a+b)^n = \sum_{k=0}^{n} \binom{n}{k}\, a^{n-k}\, b^{k}\)</li>
      <li style="margin-bottom: 8px;"><strong>OpÅ¡ti Älan:</strong> \(T_{k+1} = \binom{n}{k}\, a^{n-k}\, b^{k}\), gde je \(k = 0, 1, \ldots, n\)</li>
      <li style="margin-bottom: 8px;"><strong>Binomni koeficijent:</strong> \(\binom{n}{k} = \dfrac{n!}{k!\,(n-k)!}\), posebno \(\binom{n}{2} = \dfrac{n(n-1)}{2}\)</li>
      <li style="margin-bottom: 8px;"><strong>Srednji Älan:</strong> Za paran \(n\), srednji Älan je \(T_{\frac{n}{2}+1}\) (ukupno \(n+1\) Älanova)</li>
    </ul>
  </details>

  <!-- Canvas Visualization -->
  <div class="canvas-card">
    <h2>ğŸ“Š Vizuelizacija â€” Paskalov trougao i binomni koeficijenti</h2>
    <canvas id="binomialCanvas" width="700" height="420"></canvas>
  </div>

  <!-- Step-by-step Solution -->
  <div class="card">
    <h2>ğŸ“ ReÅ¡enje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container">
      <div class="step-title"><span class="step-badge">1</span>Identifikacija Älanova binoma</div>
      <p class="step-text">ZapiÅ¡imo binom u standardnom obliku \((a + b)^n\) tako Å¡to odredimo:</p>
      <div class="math-box">
        \[a = \sqrt{1+x} = (1+x)^{1/2}, \qquad b = -\sqrt{1-x} = -(1-x)^{1/2}\]
      </div>
      <p class="step-text">Dakle, razvijamo \(\left((1+x)^{1/2} + \left(-(1-x)^{1/2}\right)\right)^n\).</p>
    </div>

    <!-- Step 2 -->
    <div class="step-container">
      <div class="step-title"><span class="step-badge">2</span>OpÅ¡ti Älan razvoja</div>
      <p class="step-text">Po binomnoj teoremi, \((k+1)\)-vi Älan je:</p>
      <div class="math-box">
        \[T_{k+1} = \binom{n}{k} \cdot \left(\sqrt{1+x}\right)^{n-k} \cdot \left(-\sqrt{1-x}\right)^{k}\]
      </div>
      <p class="step-text">Razdvojimo \((-1)^k\) i korenove:</p>
      <div class="math-box">
        \[T_{k+1} = (-1)^k \cdot \binom{n}{k} \cdot (1+x)^{\frac{n-k}{2}} \cdot (1-x)^{\frac{k}{2}}\]
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step-container">
      <div class="step-title"><span class="step-badge">3</span>TreÄ‡i Älan â€” odreÄ‘ivanje \(n\)</div>
      <p class="step-text">TreÄ‡i Älan odgovara vrednosti \(k = 2\):</p>
      <div class="math-box">
        \[T_3 = (-1)^2 \cdot \binom{n}{2} \cdot (1+x)^{\frac{n-2}{2}} \cdot (1-x)^{1}\]
      </div>
      <p class="step-text">PoÅ¡to je \((-1)^2 = 1\), <span class="highlight">binomni koeficijent</span> treÄ‡eg Älana je \(\binom{n}{2}\). Po uslovu zadatka:</p>
      <div class="math-box">
        \[\binom{n}{2} = 28 \quad \Longrightarrow \quad \frac{n(n-1)}{2} = 28 \quad \Longrightarrow \quad n(n-1) = 56\]
      </div>
      <p class="step-text">ReÅ¡avamo jednaÄinu: \(n^2 - n - 56 = 0\). Diskriminanta: \(D = 1 + 224 = 225\), pa \(n = \dfrac{1 + 15}{2} = 8\).</p>
      <div class="math-box" style="text-align: center;">
        \[\boxed{n = 8}\]
      </div>

      <details>
        <summary>ğŸ” Proveri se: Da li je \(\binom{8}{2} = 28\)?</summary>
        <p style="margin-top: 8px;">\(\binom{8}{2} = \dfrac{8!}{2! \cdot 6!} = \dfrac{8 \cdot 7}{2} = 28\) âœ“</p>
      </details>
    </div>

    <!-- Step 4 -->
    <div class="step-container">
      <div class="step-title"><span class="step-badge">4</span>Koji je srednji Älan?</div>
      <p class="step-text">Za \(n = 8\), razvoj ima \(n + 1 = 9\) Älanova (od \(T_1\) do \(T_9\)).</p>
      <p class="step-text">Srednji Älan je na poziciji \(\dfrac{n}{2} + 1 = \dfrac{8}{2} + 1 = 5\), dakle to je <span class="highlight-blue">\(T_5\)</span> (za \(k = 4\)).</p>
    </div>

    <!-- Step 5 -->
    <div class="step-container">
      <div class="step-title"><span class="step-badge">5</span>IzraÄunavanje srednjeg Älana</div>
      <p class="step-text">UvrÅ¡tavamo \(n = 8\) i \(k = 4\) u opÅ¡tu formulu:</p>
      <div class="math-box">
        \[T_5 = (-1)^4 \cdot \binom{8}{4} \cdot (1+x)^{\frac{8-4}{2}} \cdot (1-x)^{\frac{4}{2}}\]
      </div>
      <p class="step-text">IzraÄunajmo svaki faktor:</p>
      <div class="math-box">
        \[(-1)^4 = 1, \qquad \binom{8}{4} = \frac{8!}{4!\cdot 4!} = \frac{8 \cdot 7 \cdot 6 \cdot 5}{4 \cdot 3 \cdot 2 \cdot 1} = 70\]
      </div>
      <div class="math-box">
        \[(1+x)^{\frac{4}{2}} = (1+x)^2, \qquad (1-x)^{\frac{4}{2}} = (1-x)^2\]
      </div>
      <p class="step-text">Stoga:</p>
      <div class="math-box">
        \[T_5 = 1 \cdot 70 \cdot (1+x)^2 \cdot (1-x)^2 = 70 \cdot \bigl[(1+x)(1-x)\bigr]^2\]
      </div>
      <div class="math-box" style="text-align: center; border-color: rgba(52,211,153,0.3); background: rgba(52,211,153,0.06);">
        \[\boxed{T_5 = 70\,(1 - x^2)^2}\]
      </div>

      <details>
        <summary>ğŸ” Proveri se: Da li je \(\binom{8}{4} = 70\)?</summary>
        <p style="margin-top: 8px;">\(\binom{8}{4} = \dfrac{8 \cdot 7 \cdot 6 \cdot 5}{4!} = \dfrac{1680}{24} = 70\) âœ“</p>
      </details>
    </div>

    <!-- Step 6 -->
    <div class="step-container">
      <div class="step-title"><span class="step-badge">6</span>Verifikacija â€” provera sa odgovorima</div>
      <p class="step-text">Uporedimo sa ponuÄ‘enim opcijama. NaÅ¡ rezultat je \(70(1 - x^2)^2\), Å¡to je odgovor <span class="highlight-green">(A)</span>.</p>
      <p class="step-text">Primetimo da se \((1+x)^2 (1-x)^2 = [(1+x)(1-x)]^2 = (1-x^2)^2\), Å¡to se taÄno poklapa sa opcijom (A).</p>

      <details>
        <summary>ğŸ” Proveri se: ZaÅ¡to nisu opcije (B) ili (C)?</summary>
        <p style="margin-top: 8px;">Opcija (B) ima negativan predznak \(-70(1-x^2)^2\), ali \((-1)^4 = 1\), pa je predznak pozitivan. Opcije (C), (D) i (E) imaju drugaÄije oblike izraza koji ne odgovaraju obliku \((1+x)^2(1-x)^2\).</p>
      </details>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>ğŸ’¡ KljuÄni uvid</h2>
    <p style="margin-top: 8px;">KljuÄna taÄka u ovom zadatku je prepoznavanje da \((1+x)^2 \cdot (1-x)^2 = \bigl[(1+x)(1-x)\bigr]^2 = (1-x^2)^2\). Ova faktorizacija koristi formulu za <span class="highlight-blue">razliku kvadrata</span> u â€obrnutom smeru" â€” umesto da razvijamo, mi smo grupisali faktore u kompaktniji oblik. TakoÄ‘e, paran eksponent \((-1)^4 = 1\) garantuje pozitivan predznak.</p>
  </div>

  <!-- Final Answer -->
  <div class="answer-box">
    <div class="answer-label">KonaÄan odgovor</div>
    <div class="final-answer">(A) \(70(1 - x^2)^2\)</div>
    <div class="options-grid">
      <div class="option correct">(A) \(70(1 - x^2)^2\)</div>
      <div class="option">(B) \(-70(1 - x^2)^2\)</div>
      <div class="option">(C) \(28(1-x)(1+x)^3\)</div>
      <div class="option">(D) \(-28(1-x)(1+x)^3\)</div>
      <div class="option">(E) \(56(1+x)^{5/2}(1-x)^{3/2}\)</div>
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="pitfall-box">
    <h2>ÄŒeste greÅ¡ke</h2>
    <ul>
      <li><strong>Zaboravljen predznak:</strong> Drugi Älan binoma je \(-\sqrt{1-x}\), pa u opÅ¡tem Älanu figurira faktor \((-1)^k\). Za srednji Älan vaÅ¾i \(k=4\), dakle \((-1)^4 = 1\) â€” predznak je pozitivan. Mnogi studenti greÅ¡kom biraju opciju (B).</li>
      <li><strong>PogreÅ¡na identifikacija treÄ‡eg Älana:</strong> TreÄ‡i Älan odgovara indeksu \(k=2\) (ne \(k=3\)). Brojanje kreÄ‡e od \(k=0\), pa je \(T_3\) za \(k=2\).</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="challenge-box">
    <h2>ğŸ† Dodatni izazov</h2>
    <p>Koliki je <strong>Äetvrti Älan</strong> razvoja binoma \(\left(\sqrt{1+x} - \sqrt{1-x}\right)^8\)?</p>
    <details>
      <summary>PrikaÅ¾i nagoveÅ¡taj</summary>
      <p style="margin-top: 8px;">ÄŒetvrti Älan odgovara \(k = 3\). Primeni opÅ¡tu formulu: \(T_4 = (-1)^3 \cdot \binom{8}{3} \cdot (1+x)^{5/2} \cdot (1-x)^{3/2}\). Koliko je \(\binom{8}{3}\)?</p>
    </details>
    <details>
      <summary>PrikaÅ¾i reÅ¡enje</summary>
      <p style="margin-top: 8px;">\(T_4 = -\binom{8}{3} \cdot (1+x)^{5/2} \cdot (1-x)^{3/2} = -56\,(1+x)^{5/2}\,(1-x)^{3/2}\).</p>
      <p>Zanimljivo â€” ovo je upravo opcija (E) ali sa negativnim predznakom, Å¡to potvrÄ‘uje da (E) nije odgovor za srednji Älan.</p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('binomialCanvas');
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  function drawVisualization() {
    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Title
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Paskalov trougao â€” red n = 8', W / 2, 28);

    // Draw Pascal's triangle rows 0..8, highlight row 8
    const rows = [];
    for (let i = 0; i <= 8; i++) {
      rows[i] = [];
      for (let j = 0; j <= i; j++) {
        if (j === 0 || j === i) {
          rows[i][j] = 1;
        } else {
          rows[i][j] = rows[i-1][j-1] + rows[i-1][j];
        }
      }
    }

    const startY = 52;
    const rowH = 38;
    const cellW = 52;

    for (let i = 0; i <= 8; i++) {
      const cols = i + 1;
      const rowWidth = cols * cellW;
      const startX = (W - rowWidth) / 2 + cellW / 2;

      for (let j = 0; j <= i; j++) {
        const x = startX + j * cellW;
        const y = startY + i * rowH;
        const val = rows[i][j];

        let isHighlightRow = (i === 8);
        let isThirdTerm = (i === 8 && j === 2);
        let isMiddleTerm = (i === 8 && j === 4);

        // Draw circle
        let radius = 20;
        if (isMiddleTerm) {
          ctx.beginPath();
          ctx.arc(x, y, radius + 3, 0, Math.PI * 2);
          ctx.fillStyle = 'rgba(52, 211, 153, 0.2)';
          ctx.fill();
          ctx.strokeStyle = '#34d399';
          ctx.lineWidth = 2.5;
          ctx.stroke();
        } else if (isThirdTerm) {
          ctx.beginPath();
          ctx.arc(x, y, radius + 2, 0, Math.PI * 2);
          ctx.fillStyle = 'rgba(244, 114, 182, 0.15)';
          ctx.fill();
          ctx.strokeStyle = '#f472b6';
          ctx.lineWidth = 2;
          ctx.stroke();
        } else if (isHighlightRow) {
          ctx.beginPath();
          ctx.arc(x, y, radius, 0, Math.PI * 2);
          ctx.fillStyle = 'rgba(96, 165, 250, 0.12)';
          ctx.fill();
          ctx.strokeStyle = '#60a5fa';
          ctx.lineWidth = 1.5;
          ctx.stroke();
        } else {
          ctx.beginPath();
          ctx.arc(x, y, radius - 2, 0, Math.PI * 2);
          ctx.fillStyle = 'rgba(148, 163, 184, 0.08)';
          ctx.fill();
          ctx.strokeStyle = '#334155';
          ctx.lineWidth = 1;
          ctx.stroke();
        }

        // Draw text
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        if (isMiddleTerm) {
          ctx.fillStyle = '#4ade80';
          ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
        } else if (isThirdTerm) {
          ctx.fillStyle = '#f472b6';
          ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
        } else if (isHighlightRow) {
          ctx.fillStyle = '#60a5fa';
          ctx.font = '13px Segoe UI, system-ui, sans-serif';
        } else {
          ctx.fillStyle = '#64748b';
          ctx.font = '12px Segoe UI, system-ui, sans-serif';
        }
        ctx.fillText(val.toString(), x, y);
      }
    }

    // Row labels on the left
    for (let i = 0; i <= 8; i++) {
      const y = startY + i * rowH;
      ctx.fillStyle = (i === 8) ? '#60a5fa' : '#475569';
      ctx.font = '11px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'right';
      ctx.fillText('n=' + i, 30, y);
    }

    // Annotations
    const row8y = startY + 8 * rowH;
    const row8cols = 9;
    const row8Width = row8cols * cellW;
    const row8startX = (W - row8Width) / 2 + cellW / 2;

    // Arrow to third term (k=2)
    const thirdX = row8startX + 2 * cellW;
    ctx.beginPath();
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([4, 3]);
    ctx.moveTo(thirdX, row8y + 26);
    ctx.lineTo(thirdX, row8y + 46);
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Tâ‚ƒ = 28 (dato)', thirdX, row8y + 58);

    // Arrow to middle term (k=4)
    const middleX = row8startX + 4 * cellW;
    ctx.beginPath();
    ctx.strokeStyle = '#34d399';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([4, 3]);
    ctx.moveTo(middleX, row8y + 26);
    ctx.lineTo(middleX, row8y + 46);
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Tâ‚… = 70 (srednji)', middleX, row8y + 58);

    // Legend
    const legendY = H - 22;
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';

    ctx.fillStyle = '#f472b6';
    ctx.fillRect(W/2 - 190, legendY - 8, 12, 12);
    ctx.fillStyle = '#cbd5e1';
    ctx.fillText('TreÄ‡i Älan (k=2): C(8,2) = 28', W/2 - 172, legendY + 2);

    ctx.fillStyle = '#34d399';
    ctx.fillRect(W/2 + 60, legendY - 8, 12, 12);
    ctx.fillStyle = '#cbd5e1';
    ctx.fillText('Srednji Älan (k=4): C(8,4) = 70', W/2 + 78, legendY + 2);
  }

  drawVisualization();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Srednji Älan binomnog razvoja sa korenima",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["binomna teorema", "binomni koeficijenti", "Paskalov trougao", "razvoj binoma", "srednji Älan"]
}
BRAINSPARK_META-->