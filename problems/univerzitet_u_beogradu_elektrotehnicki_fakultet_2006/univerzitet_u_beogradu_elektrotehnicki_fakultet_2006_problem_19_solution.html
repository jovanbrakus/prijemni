<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Najmanje rastojanje tačke od krive</title>

<script type="text/info" id="logic-scratchpad">
Problem: Najmanja vrednost rastojanja tačke M(0, −2) od tačaka (x, y) takvih da je
y = 16/(√3 · x³) − 2, za x > 0.

Opcije: (A) 4/√2  (B) 4/√3  (C) 16/√3  (D) 1/√3  (E) 2/√3

Rešenje:
Tačka na krivoj: (x, y) gde je y = 16/(√3 · x³) − 2, x > 0.
Tačka M = (0, −2).

Rastojanje d između M i tačke (x, y):
d² = (x − 0)² + (y − (−2))² = x² + (y + 2)²

Pošto je y + 2 = 16/(√3 · x³), imamo:
d² = x² + (16/(√3 · x³))²
d² = x² + 256/(3 · x⁶)

Označimo f(x) = x² + 256/(3x⁶). Tražimo minimum za x > 0.

f'(x) = 2x + 256/3 · (−6) · x^(−7)
f'(x) = 2x − 512/x⁷

Postavimo f'(x) = 0:
2x = 512/x⁷
2x⁸ = 512
x⁸ = 256

Sada, 256 = 2⁸, dakle x⁸ = 2⁸ ⟹ x = 2 (jer x > 0).

Provera drugog izvoda:
f''(x) = 2 + 512 · 7 · x^(−8) = 2 + 3584/x⁸
f''(2) = 2 + 3584/256 = 2 + 14 = 16 > 0 ✓ — minimum!

Za x = 2:
y + 2 = 16/(√3 · 2³) = 16/(8√3) = 2/√3

d² = 2² + (2/√3)² = 4 + 4/3 = 12/3 + 4/3 = 16/3

d = √(16/3) = 4/√3

Odgovor: (B) 4/√3
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 900px;
  margin: 0 auto;
}

h1 {
  text-align: center;
  font-size: 1.9rem;
  margin-bottom: 8px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa, #f472b6);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.subtitle {
  text-align: center;
  color: #94a3b8;
  font-size: 1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
}

.card-title {
  font-size: 1.25rem;
  font-weight: 700;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.4rem;
}

.problem-text {
  background: #0f172a;
  border-left: 4px solid #60a5fa;
  padding: 18px 22px;
  border-radius: 8px;
  font-size: 1.05rem;
  line-height: 1.9;
}

.options-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 10px;
  margin-top: 16px;
}

.option {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 14px;
  text-align: center;
  font-size: 1rem;
  transition: all 0.2s;
}

.option.correct {
  border-color: #34d399;
  background: rgba(52, 211, 153, 0.1);
  color: #4ade80;
  font-weight: 700;
}

.plan-list {
  list-style: none;
  counter-reset: plan;
}

.plan-list li {
  counter-increment: plan;
  padding: 8px 0 8px 40px;
  position: relative;
  border-bottom: 1px solid #334155;
}

.plan-list li:last-child { border-bottom: none; }

.plan-list li::before {
  content: counter(plan);
  position: absolute;
  left: 0;
  top: 8px;
  width: 28px;
  height: 28px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.85rem;
}

.collapsible-header {
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  user-select: none;
}

.collapsible-header .arrow {
  transition: transform 0.3s;
  font-size: 1.2rem;
  color: #94a3b8;
}

.collapsible-header.open .arrow {
  transform: rotate(180deg);
}

.collapsible-body {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.4s ease;
}

.collapsible-body.open {
  max-height: 2000px;
}

.theory-item {
  background: #0f172a;
  border-radius: 10px;
  padding: 16px 18px;
  margin-top: 12px;
  border-left: 3px solid #a78bfa;
}

.theory-item h4 {
  color: #a78bfa;
  margin-bottom: 6px;
  font-size: 1rem;
}

.step {
  border-left: 3px solid #60a5fa;
  padding: 0 0 0 20px;
  margin-bottom: 22px;
}

.step-number {
  display: inline-block;
  background: #60a5fa;
  color: #0f172a;
  font-weight: 700;
  font-size: 0.8rem;
  padding: 2px 10px;
  border-radius: 20px;
  margin-bottom: 8px;
}

.checkpoint {
  background: rgba(167, 139, 250, 0.1);
  border: 1px solid #a78bfa;
  border-radius: 10px;
  padding: 14px 18px;
  margin: 14px 0;
}

.checkpoint-btn {
  background: linear-gradient(135deg, #a78bfa, #60a5fa);
  color: #0f172a;
  border: none;
  padding: 8px 20px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  font-size: 0.9rem;
  margin-top: 8px;
  transition: opacity 0.2s;
}

.checkpoint-btn:hover { opacity: 0.85; }

.checkpoint-answer {
  display: none;
  margin-top: 10px;
  padding: 10px 14px;
  background: #0f172a;
  border-radius: 8px;
  border-left: 3px solid #4ade80;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid #60a5fa;
  border-radius: 12px;
  padding: 20px 24px;
}

.final-answer {
  text-align: center;
  padding: 30px;
}

.final-answer .answer-value {
  font-size: 2rem;
  font-weight: 800;
  color: #4ade80;
  margin: 12px 0;
}

.final-answer .answer-label {
  color: #34d399;
  font-size: 1.1rem;
  font-weight: 600;
}

.verification-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 16px;
}

.verification-table th,
.verification-table td {
  padding: 10px 14px;
  text-align: left;
  border-bottom: 1px solid #334155;
}

.verification-table th {
  color: #94a3b8;
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.pitfall {
  background: #0f172a;
  border-left: 3px solid #f472b6;
  padding: 14px 18px;
  border-radius: 8px;
  margin-bottom: 12px;
}

.pitfall strong { color: #f472b6; }

.challenge-box {
  background: linear-gradient(135deg, rgba(244,114,182,0.08), rgba(167,139,250,0.08));
  border: 1px dashed #f472b6;
  border-radius: 12px;
  padding: 20px 24px;
}

canvas {
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  background: #0f172a;
  cursor: crosshair;
  max-width: 100%;
}

.canvas-info {
  text-align: center;
  color: #94a3b8;
  font-size: 0.85rem;
  margin-top: 8px;
}

.canvas-legend {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  justify-content: center;
  margin-top: 12px;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 0.85rem;
  color: #94a3b8;
}

.legend-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
}

@media (max-width: 700px) {
  body { padding: 10px; }
  h1 { font-size: 1.4rem; }
  .card { padding: 18px; }
  .options-grid { grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); }
  .final-answer .answer-value { font-size: 1.5rem; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Najmanje rastojanje tačke od krive</h1>
  <p class="subtitle">Optimizacija rastojanja — ETF Beograd 2006, zadatak 19</p>

  <!-- ═══════ PROBLEM STATEMENT ═══════ -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128203;</span> Tekst zadatka</div>
    <div class="problem-text">
      Najmanja vrednost rastojanja tačke \( M(0,\, -2) \) od tačaka \( (x,\, y) \) takvih da je
      \[
        y = \frac{16}{\sqrt{3}\; x^{3}} - 2, \quad x > 0,
      \]
      iznosi:
      <div class="options-grid">
        <div class="option">(A) \(\dfrac{4}{\sqrt{2}}\)</div>
        <div class="option correct">(B) \(\dfrac{4}{\sqrt{3}}\)</div>
        <div class="option">(C) \(\dfrac{16}{\sqrt{3}}\)</div>
        <div class="option">(D) \(\dfrac{1}{\sqrt{3}}\)</div>
        <div class="option">(E) \(\dfrac{2}{\sqrt{3}}\)</div>
      </div>
    </div>
  </div>

  <!-- ═══════ PLAN ═══════ -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128506;</span> Plan rešavanja</div>
    <ol class="plan-list">
      <li>Napisati formulu za rastojanje između tačke \(M(0,-2)\) i proizvoljne tačke na krivoj</li>
      <li>Zameniti \(y + 2\) pomoću jednačine krive i dobiti rastojanje kao funkciju samo od \(x\)</li>
      <li>Minimizovati kvadrat rastojanja (lakše je bez korena) izvodom</li>
      <li>Naći kritičnu tačku i proveriti da je to minimum</li>
      <li>Izračunati minimalno rastojanje</li>
    </ol>
  </div>

  <!-- ═══════ THEORY REFRESHER ═══════ -->
  <div class="card">
    <div class="collapsible-header" onclick="toggleCollapsible(this)">
      <div class="card-title" style="margin-bottom:0"><span class="icon">&#128218;</span> Podsetnik iz teorije</div>
      <span class="arrow">&#9660;</span>
    </div>
    <div class="collapsible-body">
      <div class="theory-item">
        <h4>Formula za rastojanje</h4>
        <p>
          Rastojanje između tačaka \(A(x_1, y_1)\) i \(B(x_2, y_2)\) je:
          \[
            d = \sqrt{(x_2 - x_1)^2 + (y_2 - y_1)^2}
          \]
        </p>
      </div>
      <div class="theory-item">
        <h4>Optimizacija pomoću izvoda</h4>
        <p>
          Da bismo našli minimum funkcije \(f(x)\) za \(x > 0\):
        </p>
        <ul style="margin-left:20px; margin-top:8px;">
          <li>Izračunamo \(f'(x)\) i rešimo \(f'(x) = 0\)</li>
          <li>Proverimo da je \(f''(x) > 0\) u kritičnoj tački (dovoljan uslov za minimum)</li>
        </ul>
      </div>
      <div class="theory-item">
        <h4>Trik: minimizujemo \(d^2\) umesto \(d\)</h4>
        <p>
          Pošto je \(d \geq 0\), minimum od \(d\) nastaje na istom mestu kao minimum od \(d^2\).
          Rad sa \(d^2\) je znatno jednostavniji jer izbegavamo koren.
        </p>
      </div>
    </div>
  </div>

  <!-- ═══════ VISUAL AID ═══════ -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128200;</span> Grafički prikaz</div>
    <canvas id="graphCanvas" width="700" height="520"></canvas>
    <p class="canvas-info">Prevuci mišem po krivoj da vidiš kako se rastojanje menja. Crvena linija = trenutno rastojanje.</p>
    <div class="canvas-legend">
      <div class="legend-item"><div class="legend-dot" style="background:#60a5fa"></div> Kriva \(y = \frac{16}{\sqrt{3}\,x^3} - 2\)</div>
      <div class="legend-item"><div class="legend-dot" style="background:#f472b6"></div> Tačka \(M(0, -2)\)</div>
      <div class="legend-item"><div class="legend-dot" style="background:#4ade80"></div> Najbliža tačka</div>
      <div class="legend-item"><div class="legend-dot" style="background:#ef4444"></div> Rastojanje</div>
    </div>
  </div>

  <!-- ═══════ STEP-BY-STEP ═══════ -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128736;</span> Rešenje korak po korak</div>

    <!-- Step 1 -->
    <div class="step">
      <div class="step-number">Korak 1</div>
      <h3 style="margin-bottom:8px;">Postavljamo formulu za rastojanje</h3>
      <p>
        Neka je \(P(x, y)\) proizvoljna tačka na krivoj. Rastojanje od \(M(0, -2)\) do \(P\) je:
      </p>
      \[
        d = \sqrt{(x - 0)^2 + (y - (-2))^2} = \sqrt{x^2 + (y + 2)^2}
      \]
    </div>

    <!-- Step 2 -->
    <div class="step">
      <div class="step-number">Korak 2</div>
      <h3 style="margin-bottom:8px;">Zamenjujemo \(y + 2\) iz jednačine krive</h3>
      <p>Iz jednačine krive \(\;y = \dfrac{16}{\sqrt{3}\; x^3} - 2\;\) direktno sledi:</p>
      \[
        y + 2 = \frac{16}{\sqrt{3}\; x^3}
      \]
      <p>Zamenom u formulu za rastojanje:</p>
      \[
        d^2 = x^2 + \left(\frac{16}{\sqrt{3}\; x^3}\right)^2 = x^2 + \frac{256}{3\, x^6}
      \]

      <div class="checkpoint">
        <strong>Proveri se:</strong> Šta je \(d^2\) za \(x = 1\)?
        <br>
        <button class="checkpoint-btn" onclick="toggleAnswer(this)">Prikaži odgovor</button>
        <div class="checkpoint-answer">
          \(d^2 = 1 + \dfrac{256}{3} = \dfrac{3 + 256}{3} = \dfrac{259}{3} \approx 86{,}33\), dakle \(d \approx 9{,}29\).
        </div>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step">
      <div class="step-number">Korak 3</div>
      <h3 style="margin-bottom:8px;">Tražimo minimum — računamo izvod</h3>
      <p>Označimo:</p>
      \[
        f(x) = x^2 + \frac{256}{3}\, x^{-6}, \quad x > 0
      \]
      <p>Izvod:</p>
      \[
        f'(x) = 2x + \frac{256}{3} \cdot (-6)\, x^{-7} = 2x - \frac{512}{x^7}
      \]
    </div>

    <!-- Step 4 -->
    <div class="step">
      <div class="step-number">Korak 4</div>
      <h3 style="margin-bottom:8px;">Rešavamo \(f'(x) = 0\)</h3>
      <p>Postavljamo:</p>
      \[
        2x - \frac{512}{x^7} = 0 \;\;\Longrightarrow\;\; 2x = \frac{512}{x^7}
      \]
      <p>Množimo obe strane sa \(x^7\):</p>
      \[
        2x^8 = 512 \;\;\Longrightarrow\;\; x^8 = 256
      \]
      <p>Sada, \(256 = 2^8\), pa:</p>
      \[
        x^8 = 2^8 \;\;\Longrightarrow\;\; \boxed{x = 2} \quad (\text{jer } x > 0)
      \]

      <div class="checkpoint">
        <strong>Proveri se:</strong> Koliko je \(2^8\)?
        <br>
        <button class="checkpoint-btn" onclick="toggleAnswer(this)">Prikaži odgovor</button>
        <div class="checkpoint-answer">
          \(2^8 = 256\) — tačno se poklapa! &#10003;
        </div>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step">
      <div class="step-number">Korak 5</div>
      <h3 style="margin-bottom:8px;">Proveravamo da je \(x = 2\) zaista minimum</h3>
      <p>Drugi izvod:</p>
      \[
        f''(x) = 2 + \frac{512 \cdot 7}{x^8} = 2 + \frac{3584}{x^8}
      \]
      <p>Za \(x = 2\):</p>
      \[
        f''(2) = 2 + \frac{3584}{256} = 2 + 14 = 16 > 0 \;\;\checkmark
      \]
      <p>
        Drugi izvod je pozitivan — dakle \(x = 2\) je <strong>tačka minimuma</strong>.
      </p>
    </div>

    <!-- Step 6 -->
    <div class="step">
      <div class="step-number">Korak 6</div>
      <h3 style="margin-bottom:8px;">Računamo minimalno rastojanje</h3>
      <p>Za \(x = 2\):</p>
      \[
        y + 2 = \frac{16}{\sqrt{3} \cdot 2^3} = \frac{16}{8\sqrt{3}} = \frac{2}{\sqrt{3}}
      \]
      <p>Kvadrat rastojanja:</p>
      \[
        d^2 = x^2 + (y+2)^2 = 4 + \frac{4}{3} = \frac{12}{3} + \frac{4}{3} = \frac{16}{3}
      \]
      <p>Rastojanje:</p>
      \[
        d = \sqrt{\frac{16}{3}} = \frac{4}{\sqrt{3}}
      \]
    </div>
  </div>

  <!-- ═══════ KEY INSIGHT ═══════ -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128161;</span> Ključni uvid</div>
    <div class="insight-box">
      <p>
        Obratimo pažnju na to kako se zadatak <strong>sam pojednostavljuje</strong>.
        Tačka \(M\) ima \(y\)-koordinatu \(-2\), a kriva je oblika \(y = (\ldots) - 2\).
        Zato se pri računanju rastojanja odmah pojavljuje
        \(y + 2 = \dfrac{16}{\sqrt{3}\, x^3}\), i čitav izraz postaje funkcija samo od \(x\).
      </p>
      <p style="margin-top:12px;">
        Trik sa stepenom \(x^8 = 2^8\) je elegantan — nema potrebe za logaritmima, jer je osmi koren iz \(256\) upravo \(2\).
      </p>
    </div>
  </div>

  <!-- ═══════ FINAL ANSWER ═══════ -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127919;</span> Konačan odgovor</div>
    <div class="final-answer">
      <div class="answer-label">Najmanje rastojanje iznosi</div>
      <div class="answer-value">\(\dfrac{4}{\sqrt{3}}\)</div>
      <div class="answer-label" style="font-size:1.3rem; margin-top:4px;">Odgovor: (B)</div>
    </div>

    <h4 style="margin: 20px 0 10px; color: #94a3b8;">Verifikacija svih ponuđenih opcija:</h4>
    <table class="verification-table">
      <thead>
        <tr><th>Opcija</th><th>Vrednost</th><th>Decimalno</th><th>Poklapa se sa \(d_{\min}^2 = \frac{16}{3}\)?</th></tr>
      </thead>
      <tbody>
        <tr><td>(A) \(\frac{4}{\sqrt{2}}\)</td><td>\(2\sqrt{2}\)</td><td>\(\approx 2{,}83\)</td><td>\(d^2 = 8 \neq \frac{16}{3}\) &#10007;</td></tr>
        <tr style="background: rgba(52,211,153,0.08);"><td><strong>(B) \(\frac{4}{\sqrt{3}}\)</strong></td><td><strong>\(\frac{4\sqrt{3}}{3}\)</strong></td><td><strong>\(\approx 2{,}31\)</strong></td><td><strong>\(d^2 = \frac{16}{3}\) &#10003;</strong></td></tr>
        <tr><td>(C) \(\frac{16}{\sqrt{3}}\)</td><td>\(\frac{16\sqrt{3}}{3}\)</td><td>\(\approx 9{,}24\)</td><td>\(d^2 = \frac{256}{3} \neq \frac{16}{3}\) &#10007;</td></tr>
        <tr><td>(D) \(\frac{1}{\sqrt{3}}\)</td><td>\(\frac{\sqrt{3}}{3}\)</td><td>\(\approx 0{,}58\)</td><td>\(d^2 = \frac{1}{3} \neq \frac{16}{3}\) &#10007;</td></tr>
        <tr><td>(E) \(\frac{2}{\sqrt{3}}\)</td><td>\(\frac{2\sqrt{3}}{3}\)</td><td>\(\approx 1{,}15\)</td><td>\(d^2 = \frac{4}{3} \neq \frac{16}{3}\) &#10007;</td></tr>
      </tbody>
    </table>
  </div>

  <!-- ═══════ COMMON PITFALLS ═══════ -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9888;&#65039;</span> Česte greške</div>

    <div class="pitfall">
      <strong>Greška 1: Zaboraviti da se minimizuje \(d^2\) umesto \(d\)</strong><br>
      Minimizacija \(d\) direktno zahteva mnogo komplikovanije izvode (lanačno pravilo sa korenom). Uvek minimizuj \(d^2\) — minimum se postiže na istom mestu.
    </div>

    <div class="pitfall">
      <strong>Greška 2: Pogrešan izvod za \(x^{-6}\)</strong><br>
      Česta greška je zaboraviti minus u izvodu:
      \(\dfrac{d}{dx}\left(\frac{256}{3}\, x^{-6}\right) = \frac{256}{3} \cdot (-6)\, x^{-7} = -\frac{512}{x^7}\).
      Obratite pažnju na predznak!
    </div>

    <div class="pitfall">
      <strong>Greška 3: Pogrešno tumačenje \(x^8 = 256\)</strong><br>
      Može se pogrešno zaključiti da je \(x = \sqrt{2}\) (npr. ako se meša \(256 = 4^4\) sa \(256 = 2^8\)).
      Ključ: \(256 = 2^8\), pa \(x^8 = 2^8 \Rightarrow x = 2\).
    </div>

    <div class="pitfall">
      <strong>Greška 4: Promašiti pojednostavljenje \(y + 2\)</strong><br>
      Tačka \(M\) ima \(y\)-koordinatu \(-2\), a kriva je pomerena za \(-2\). Ako se ne uoči da se ova dvojka „skrati", izračunavanje postaje bespotrebno dugačko.
    </div>
  </div>

  <!-- ═══════ OPTIONAL CHALLENGE ═══════ -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127942;</span> Bonus izazov</div>
    <div class="challenge-box">
      <p><strong>Izazov:</strong> Koliko bi iznosilo minimalno rastojanje od tačke \(M(0, -2)\) ako bi kriva bila
      \(y = \dfrac{c}{\sqrt{3}\, x^3} - 2\) za neku konstantu \(c > 0\)?
      Izrazi odgovor u zavisnosti od \(c\).</p>
      <p style="margin-top:12px; color:#94a3b8; font-size:0.9rem;">
        <em>Pomoć:</em> Ponovi isti postupak. Videćeš da je \(x^8 = \dfrac{c^2}{2}\), a minimalno rastojanje zavisi od \(c\) na elegantan način.
      </p>
    </div>
  </div>

</div>

<!-- ═══════ CANVAS SCRIPT ═══════ -->
<script>
(function() {
  var canvas = document.getElementById('graphCanvas');
  var ctx = canvas.getContext('2d');
  var W = canvas.width, H = canvas.height;

  /* Coordinate system:  math coords -> canvas coords */
  var xMin = -1.5, xMax = 6.5, yMin = -5, yMax = 8;

  function toCanvasX(mx) { return (mx - xMin) / (xMax - xMin) * W; }
  function toCanvasY(my) { return H - (my - yMin) / (yMax - yMin) * H; }
  function toMathX(cx) { return xMin + cx / W * (xMax - xMin); }
  function toMathY(cy) { return yMin + (H - cy) / H * (yMax - yMin); }

  /* The curve */
  function curveY(x) {
    if (x <= 0) return NaN;
    return 16 / (Math.sqrt(3) * x * x * x) - 2;
  }

  /* Distance from M(0,-2) to (x, curveY(x)) */
  function dist(x) {
    var y = curveY(x);
    return Math.sqrt(x * x + (y + 2) * (y + 2));
  }

  /* State */
  var hoverX = 2; /* default to optimal */
  var isDragging = false;
  var optimalX = 2;

  function findNearestCurveX(canvasX, canvasY) {
    var mx = toMathX(canvasX);
    if (mx < 0.3) mx = 0.3;
    if (mx > 6) mx = 6;
    return mx;
  }

  function drawGrid() {
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (var gx = Math.ceil(xMin); gx <= xMax; gx++) {
      ctx.beginPath();
      ctx.moveTo(toCanvasX(gx), 0);
      ctx.lineTo(toCanvasX(gx), H);
      ctx.stroke();
    }
    for (var gy = Math.ceil(yMin); gy <= yMax; gy++) {
      ctx.beginPath();
      ctx.moveTo(0, toCanvasY(gy));
      ctx.lineTo(W, toCanvasY(gy));
      ctx.stroke();
    }
  }

  function drawAxes() {
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    /* x-axis */
    ctx.beginPath();
    ctx.moveTo(0, toCanvasY(0));
    ctx.lineTo(W, toCanvasY(0));
    ctx.stroke();
    /* y-axis */
    ctx.beginPath();
    ctx.moveTo(toCanvasX(0), 0);
    ctx.lineTo(toCanvasX(0), H);
    ctx.stroke();

    /* Labels */
    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px sans-serif';
    ctx.textAlign = 'center';
    for (var gx = Math.ceil(xMin); gx <= xMax; gx++) {
      if (gx === 0) continue;
      ctx.fillText(gx, toCanvasX(gx), toCanvasY(0) + 16);
    }
    ctx.textAlign = 'right';
    for (var gy = Math.ceil(yMin); gy <= yMax; gy++) {
      if (gy === 0) continue;
      ctx.fillText(gy, toCanvasX(0) - 6, toCanvasY(gy) + 4);
    }
  }

  function drawCurve() {
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    var started = false;
    for (var px = 0; px < W; px++) {
      var mx = toMathX(px);
      if (mx <= 0.01) continue;
      var my = curveY(mx);
      if (isNaN(my) || my > yMax + 2 || my < yMin - 2) {
        started = false;
        continue;
      }
      var cy = toCanvasY(my);
      if (!started) {
        ctx.moveTo(px, cy);
        started = true;
      } else {
        ctx.lineTo(px, cy);
      }
    }
    ctx.stroke();
  }

  function drawPointM() {
    var cx = toCanvasX(0), cy = toCanvasY(-2);
    ctx.beginPath();
    ctx.arc(cx, cy, 7, 0, 2 * Math.PI);
    ctx.fillStyle = '#f472b6';
    ctx.fill();
    ctx.strokeStyle = '#0f172a';
    ctx.lineWidth = 2;
    ctx.stroke();
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 13px sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('M(0, −2)', cx + 12, cy + 5);
  }

  function drawOptimalPoint() {
    var ox = optimalX, oy = curveY(optimalX);
    var cx = toCanvasX(ox), cy = toCanvasY(oy);
    ctx.beginPath();
    ctx.arc(cx, cy, 6, 0, 2 * Math.PI);
    ctx.fillStyle = '#4ade80';
    ctx.fill();
    ctx.strokeStyle = '#0f172a';
    ctx.lineWidth = 2;
    ctx.stroke();

    /* Dashed green line from M to optimal */
    ctx.setLineDash([6, 4]);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(toCanvasX(0), toCanvasY(-2));
    ctx.lineTo(cx, cy);
    ctx.stroke();
    ctx.setLineDash([]);

    /* Label */
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 12px sans-serif';
    ctx.textAlign = 'left';
    var dOpt = dist(optimalX);
    ctx.fillText('d_min = 4/\u221A3 \u2248 ' + dOpt.toFixed(2), cx + 10, cy - 10);
  }

  function drawHoverPoint() {
    var hx = hoverX;
    if (hx < 0.2) hx = 0.2;
    var hy = curveY(hx);
    if (isNaN(hy)) return;

    var cxP = toCanvasX(hx), cyP = toCanvasY(hy);
    var cxM = toCanvasX(0), cyM = toCanvasY(-2);

    /* Red distance line */
    ctx.strokeStyle = '#ef4444';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(cxM, cyM);
    ctx.lineTo(cxP, cyP);
    ctx.stroke();

    /* Hover point */
    ctx.beginPath();
    ctx.arc(cxP, cyP, 5, 0, 2 * Math.PI);
    ctx.fillStyle = '#fbbf24';
    ctx.fill();
    ctx.strokeStyle = '#0f172a';
    ctx.lineWidth = 1.5;
    ctx.stroke();

    /* Info box */
    var d = dist(hx);
    var info = 'x = ' + hx.toFixed(2) + ',  d = ' + d.toFixed(3);
    ctx.fillStyle = 'rgba(15,23,42,0.85)';
    var textW = ctx.measureText(info).width + 20;
    var boxX = Math.min(cxP + 12, W - textW - 8);
    var boxY = cyP - 30;
    if (boxY < 10) boxY = cyP + 12;
    ctx.fillRect(boxX, boxY, textW, 24);
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1;
    ctx.strokeRect(boxX, boxY, textW, 24);
    ctx.fillStyle = '#e2e8f0';
    ctx.font = '12px monospace';
    ctx.textAlign = 'left';
    ctx.fillText(info, boxX + 10, boxY + 16);
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    drawGrid();
    drawAxes();
    drawCurve();
    drawOptimalPoint();
    drawPointM();
    drawHoverPoint();
  }

  draw();

  canvas.addEventListener('mousedown', function(e) { isDragging = true; });
  canvas.addEventListener('mouseup', function(e) { isDragging = false; });
  canvas.addEventListener('mouseleave', function(e) { isDragging = false; });
  canvas.addEventListener('mousemove', function(e) {
    var rect = canvas.getBoundingClientRect();
    var scaleX = W / rect.width;
    var scaleY = H / rect.height;
    var cx = (e.clientX - rect.left) * scaleX;
    var cy = (e.clientY - rect.top) * scaleY;
    hoverX = findNearestCurveX(cx, cy);
    draw();
  });

  /* Touch support */
  canvas.addEventListener('touchmove', function(e) {
    e.preventDefault();
    var rect = canvas.getBoundingClientRect();
    var touch = e.touches[0];
    var scaleX = W / rect.width;
    var cx = (touch.clientX - rect.left) * scaleX;
    hoverX = findNearestCurveX(cx, 0);
    draw();
  }, { passive: false });

  canvas.addEventListener('touchstart', function(e) {
    e.preventDefault();
    var rect = canvas.getBoundingClientRect();
    var touch = e.touches[0];
    var scaleX = W / rect.width;
    var cx = (touch.clientX - rect.left) * scaleX;
    hoverX = findNearestCurveX(cx, 0);
    draw();
  }, { passive: false });
})();
</script>

<!-- ═══════ COLLAPSIBLE + CHECKPOINT SCRIPTS ═══════ -->
<script>
(function() {
  window.toggleCollapsible = function(header) {
    header.classList.toggle('open');
    var body = header.nextElementSibling;
    body.classList.toggle('open');
  };

  window.toggleAnswer = function(btn) {
    var ans = btn.nextElementSibling;
    if (ans.style.display === 'block') {
      ans.style.display = 'none';
      btn.textContent = 'Prikaži odgovor';
    } else {
      ans.style.display = 'block';
      btn.textContent = 'Sakrij odgovor';
    }
  };
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{"title":"Najmanje rastojanje tačke od krive","subject":"math","unit":"calculus","topic_tags":["optimizacija","rastojanje","izvod","ekstremi funkcije","analiza"]}
BRAINSPARK_META-->