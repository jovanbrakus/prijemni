<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rastojanje taÄke od prave</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
Problem: Rastojanje taÄke (1, -1) od prave x + 2y - 4 = 0.

Formula za rastojanje taÄke (xâ‚€, yâ‚€) od prave ax + by + c = 0:
  d = |aÂ·xâ‚€ + bÂ·yâ‚€ + c| / âˆš(aÂ² + bÂ²)

Identifikacija parametara:
  Prava: x + 2y - 4 = 0  â†’  a = 1, b = 2, c = -4
  TaÄka: (xâ‚€, yâ‚€) = (1, -1)

IzraÄunavanje:
  Brojilac: |1Â·1 + 2Â·(-1) + (-4)| = |1 - 2 - 4| = |-5| = 5
  Imenilac: âˆš(1Â² + 2Â²) = âˆš(1 + 4) = âˆš5

  d = 5 / âˆš5 = 5âˆš5 / 5 = âˆš5

Provera: âˆš5 â‰ˆ 2,236

NoÅ¾iÅ¡te normale iz taÄke na pravu:
  Pravac normale na pravu x + 2y - 4 = 0 ima vektor pravca (1, 2).
  Parametarski: x = 1 + t, y = -1 + 2t
  UvrÅ¡tavanje u jednaÄinu prave: (1 + t) + 2(-1 + 2t) - 4 = 0
    1 + t - 2 + 4t - 4 = 0  â†’  5t - 5 = 0  â†’  t = 1
  NoÅ¾iÅ¡te: (1 + 1, -1 + 2) = (2, 1)
  Provera rastojanja: âˆš((2-1)Â² + (1-(-1))Â²) = âˆš(1 + 4) = âˆš5 âœ“

Odgovor: (E) âˆš5
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.card-title {
  font-size: 1.3rem;
  font-weight: 700;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.4rem;
}

.problem-statement {
  border-left: 4px solid #60a5fa;
}

.problem-text {
  font-size: 1.15rem;
  line-height: 1.8;
}

.options-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 10px;
  margin-top: 16px;
}

.option {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 16px;
  text-align: center;
  font-size: 1.05rem;
  transition: all 0.3s ease;
}

.option.correct {
  border-color: #4ade80;
  background: rgba(74, 222, 128, 0.1);
  color: #4ade80;
  font-weight: 700;
}

.plan-card {
  border-left: 4px solid #a78bfa;
}

.plan-list {
  list-style: none;
  counter-reset: plan-counter;
}

.plan-list li {
  counter-increment: plan-counter;
  padding: 8px 0;
  padding-left: 40px;
  position: relative;
}

.plan-list li::before {
  content: counter(plan-counter);
  position: absolute;
  left: 0;
  top: 8px;
  background: linear-gradient(135deg, #a78bfa, #60a5fa);
  color: #0f172a;
  font-weight: 700;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.85rem;
}

details {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 12px;
  margin-top: 12px;
  overflow: hidden;
}

details summary {
  padding: 14px 20px;
  cursor: pointer;
  font-weight: 600;
  color: #a78bfa;
  transition: background 0.2s;
  list-style: none;
}

details summary::-webkit-details-marker { display: none; }

details summary::before {
  content: "â–¸ ";
  display: inline-block;
  transition: transform 0.2s;
}

details[open] summary::before {
  transform: rotate(90deg);
}

details summary:hover {
  background: rgba(167, 139, 250, 0.08);
}

details .details-content {
  padding: 16px 20px;
  border-top: 1px solid #334155;
}

.step-card {
  border-left: 4px solid #60a5fa;
  position: relative;
}

.step-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  font-weight: 800;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  font-size: 0.95rem;
  margin-right: 10px;
  flex-shrink: 0;
}

.step-title {
  font-size: 1.2rem;
  font-weight: 700;
  display: flex;
  align-items: center;
  margin-bottom: 14px;
}

.formula-box {
  background: rgba(96, 165, 250, 0.08);
  border: 1px solid rgba(96, 165, 250, 0.3);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 14px 0;
  text-align: center;
  font-size: 1.1rem;
}

.highlight-blue {
  color: #60a5fa;
  font-weight: 600;
}

.highlight-purple {
  color: #a78bfa;
  font-weight: 600;
}

.highlight-green {
  color: #4ade80;
  font-weight: 600;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

.canvas-container {
  position: relative;
  width: 100%;
  max-width: 600px;
  margin: 0 auto;
}

canvas {
  width: 100%;
  height: auto;
  border-radius: 12px;
  display: block;
  touch-action: none;
}

.canvas-controls {
  display: flex;
  gap: 10px;
  justify-content: center;
  margin-top: 12px;
  flex-wrap: wrap;
}

.canvas-btn {
  background: #334155;
  border: 1px solid #475569;
  border-radius: 8px;
  color: #e2e8f0;
  padding: 8px 16px;
  cursor: pointer;
  font-size: 0.9rem;
  transition: all 0.2s;
}

.canvas-btn:hover {
  background: #475569;
}

.canvas-btn.active {
  background: rgba(96, 165, 250, 0.2);
  border-color: #60a5fa;
  color: #60a5fa;
}

.insight-card {
  border: 1px solid rgba(52, 211, 153, 0.3);
  background: rgba(52, 211, 153, 0.05);
  border-left: 4px solid #34d399;
}

.final-answer-card {
  border: 2px solid #4ade80;
  background: rgba(74, 222, 128, 0.06);
  text-align: center;
}

.final-answer-value {
  font-size: 2.5rem;
  font-weight: 800;
  color: #4ade80;
  margin: 16px 0;
}

.pitfall-card {
  border-left: 4px solid #f472b6;
}

.pitfall-item {
  background: rgba(244, 114, 182, 0.06);
  border: 1px solid rgba(244, 114, 182, 0.2);
  border-radius: 10px;
  padding: 14px 18px;
  margin-bottom: 12px;
}

.pitfall-item:last-child {
  margin-bottom: 0;
}

.pitfall-label {
  color: #f472b6;
  font-weight: 700;
  font-size: 0.9rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 4px;
}

.challenge-card {
  border: 1px dashed #a78bfa;
  background: rgba(167, 139, 250, 0.05);
}

.param-table {
  width: 100%;
  border-collapse: collapse;
  margin: 14px 0;
}

.param-table th, .param-table td {
  border: 1px solid #334155;
  padding: 10px 16px;
  text-align: center;
}

.param-table th {
  background: rgba(96, 165, 250, 0.12);
  color: #60a5fa;
  font-weight: 700;
}

.param-table td {
  background: #0f172a;
}

.verification-box {
  background: rgba(74, 222, 128, 0.06);
  border: 1px solid rgba(74, 222, 128, 0.2);
  border-radius: 10px;
  padding: 16px 20px;
  margin-top: 14px;
  text-align: left;
}

@media (max-width: 768px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 18px; }
  .options-grid { grid-template-columns: repeat(3, 1fr); }
  .container { padding: 10px; }
  body { padding: 10px; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Rastojanje taÄke od prave</h1>
  <p class="subtitle">AnalitiÄka geometrija u ravni â€” formula za rastojanje taÄke od prave</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <div class="card-title"><span class="icon">ğŸ“‹</span> Tekst zadatka</div>
    <div class="problem-text">
      Rastojanje taÄke \((1,\, -1)\) od prave \(x + 2y - 4 = 0\) iznosi:
    </div>
    <div class="options-grid">
      <div class="option">(A) \(\sqrt{2}\)</div>
      <div class="option">(B) \(3\)</div>
      <div class="option">(C) \(\sqrt{3}\)</div>
      <div class="option">(D) \(4\)</div>
      <div class="option correct">(E) \(\sqrt{5}\)</div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <div class="card-title"><span class="icon">ğŸ—ºï¸</span> Plan reÅ¡avanja</div>
    <ol class="plan-list">
      <li>Prepoznati oblik jednaÄine prave i identifikovati koeficijente \(a\), \(b\), \(c\)</li>
      <li>Primeniti formulu za rastojanje taÄke od prave</li>
      <li>IzraÄunati brojilac (apsolutna vrednost) i imenilac (koren)</li>
      <li>Racionalizovati razlomak i odrediti konaÄno rastojanje</li>
      <li>Proveriti rezultat nalaÅ¾ejem noÅ¾iÅ¡ta normale</li>
    </ol>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <div class="card-title"><span class="icon">ğŸ“š</span> Teorijska osnova</div>
    <details>
      <summary>Formula za rastojanje taÄke od prave</summary>
      <div class="details-content">
        <p>Neka je data prava u opÅ¡tem obliku:</p>
        <div class="formula-box">
          \[ ax + by + c = 0 \]
        </div>
        <p>i taÄka \(T(x_0,\, y_0)\). Rastojanje taÄke \(T\) od te prave iznosi:</p>
        <div class="formula-box">
          \[ d = \frac{|a \cdot x_0 + b \cdot y_0 + c|}{\sqrt{a^2 + b^2}} \]
        </div>
        <p>Ova formula se izvodi iz Äinjenice da je rastojanje jednako duÅ¾ini projekcije vektora od bilo koje taÄke prave do taÄke \(T\) na vektor normale prave \(\vec{n} = (a, b)\).</p>
        <p style="margin-top: 10px;"><strong>KljuÄno:</strong> jednaÄina prave <em>mora</em> biti u obliku \(ax + by + c = 0\) (sa nulom na desnoj strani).</p>
      </div>
    </details>
    <details style="margin-top: 8px;">
      <summary>Geometrijska interpretacija</summary>
      <div class="details-content">
        <p>Rastojanje taÄke od prave je duÅ¾ina <span class="highlight-blue">normale</span> (upravne duÅ¾i) spuÅ¡tene iz te taÄke na pravu. To je najkraÄ‡e rastojanje od taÄke do bilo koje taÄke na pravoj.</p>
        <p style="margin-top: 8px;">NoÅ¾iÅ¡te normale je taÄka na pravoj koja je najbliÅ¾a datoj taÄki. Pravac normale poklapa se sa vektorom normale prave \(\vec{n} = (a, b)\).</p>
      </div>
    </details>
  </div>

  <!-- Interactive Canvas -->
  <div class="card">
    <div class="card-title"><span class="icon">ğŸ“</span> Interaktivni dijagram</div>
    <p style="color: #94a3b8; margin-bottom: 12px;">PrevlaÄite taÄku \(T\) da vidite kako se menja rastojanje. Dugme â€Resetuj" vraÄ‡a taÄku na poÄetni poloÅ¾aj.</p>
    <div class="canvas-container">
      <canvas id="distCanvas" width="600" height="600"></canvas>
    </div>
    <div class="canvas-controls">
      <button class="canvas-btn" id="btnReset">Resetuj</button>
      <button class="canvas-btn" id="btnToggleGrid">MreÅ¾a</button>
      <button class="canvas-btn" id="btnToggleNormal">Normala</button>
    </div>
  </div>

  <!-- Step 1 -->
  <div class="card step-card">
    <div class="step-title"><span class="step-badge">1</span> Identifikujemo koeficijente</div>
    <p>JednaÄina prave je data u opÅ¡tem obliku:</p>
    <div class="formula-box">
      \[ x + 2y - 4 = 0 \]
    </div>
    <p>Poredimo sa opÅ¡tim oblikom \(ax + by + c = 0\):</p>
    <table class="param-table">
      <tr>
        <th>Parametar</th>
        <th>\(a\)</th>
        <th>\(b\)</th>
        <th>\(c\)</th>
      </tr>
      <tr>
        <td>Vrednost</td>
        <td class="highlight-blue">\(1\)</td>
        <td class="highlight-purple">\(2\)</td>
        <td class="highlight-pink">\(-4\)</td>
      </tr>
    </table>
    <p>Koordinate taÄke: \(T(x_0,\, y_0) = T(\underbrace{1}_{x_0},\, \underbrace{-1}_{y_0})\)</p>
    <details>
      <summary>Proveri sebe: Å ta je vektor normale ove prave?</summary>
      <div class="details-content">
        <p>Vektor normale prave \(ax + by + c = 0\) je \(\vec{n} = (a,\, b)\). U naÅ¡em sluÄaju:</p>
        <div class="formula-box">\[\vec{n} = (1,\, 2)\]</div>
      </div>
    </details>
  </div>

  <!-- Step 2 -->
  <div class="card step-card">
    <div class="step-title"><span class="step-badge">2</span> Primenjujemo formulu</div>
    <p>UvrÅ¡tavamo u formulu za rastojanje:</p>
    <div class="formula-box">
      \[ d = \frac{|a \cdot x_0 + b \cdot y_0 + c|}{\sqrt{a^2 + b^2}} = \frac{|1 \cdot 1 + 2 \cdot (-1) + (-4)|}{\sqrt{1^2 + 2^2}} \]
    </div>
  </div>

  <!-- Step 3 -->
  <div class="card step-card">
    <div class="step-title"><span class="step-badge">3</span> RaÄun u brojiocu</div>
    <p>IzraÄunavamo izraz unutar apsolutne vrednosti:</p>
    <div class="formula-box">
      \[ 1 \cdot 1 + 2 \cdot (-1) + (-4) = 1 - 2 - 4 = -5 \]
    </div>
    <p>Uzimamo apsolutnu vrednost:</p>
    <div class="formula-box">
      \[ |-5| = \color{#60a5fa}{5} \]
    </div>
    <details>
      <summary>Proveri sebe: ZaÅ¡to je apsolutna vrednost bitna?</summary>
      <div class="details-content">
        <p>Rastojanje je uvek <strong>nenegativna</strong> veliÄina. Izraz \(a x_0 + b y_0 + c\) moÅ¾e biti pozitivan ili negativan zavisno od toga sa koje strane prave se taÄka nalazi. Apsolutna vrednost obezbeÄ‘uje da rezultat bude pozitivan.</p>
      </div>
    </details>
  </div>

  <!-- Step 4 -->
  <div class="card step-card">
    <div class="step-title"><span class="step-badge">4</span> RaÄun u imeniocu</div>
    <p>IzraÄunavamo duÅ¾inu vektora normale:</p>
    <div class="formula-box">
      \[ \sqrt{a^2 + b^2} = \sqrt{1^2 + 2^2} = \sqrt{1 + 4} = \color{#a78bfa}{\sqrt{5}} \]
    </div>
  </div>

  <!-- Step 5 -->
  <div class="card step-card">
    <div class="step-title"><span class="step-badge">5</span> KonaÄno rastojanje</div>
    <p>Delimo brojilac imeniocem:</p>
    <div class="formula-box">
      \[ d = \frac{5}{\sqrt{5}} \]
    </div>
    <p>Racionalizujemo razlomak mnoÅ¾enjem brojioca i imenioca sa \(\sqrt{5}\):</p>
    <div class="formula-box">
      \[ d = \frac{5}{\sqrt{5}} \cdot \frac{\sqrt{5}}{\sqrt{5}} = \frac{5\sqrt{5}}{5} = \sqrt{5} \]
    </div>
    <p>Alternativno, uoÄavamo da je \(\dfrac{5}{\sqrt{5}} = \dfrac{(\sqrt{5})^2}{\sqrt{5}} = \sqrt{5}\).</p>
  </div>

  <!-- Step 6: Verification -->
  <div class="card step-card">
    <div class="step-title"><span class="step-badge">6</span> Provera â€” noÅ¾iÅ¡te normale</div>
    <p>SpuÅ¡tamo normalu iz taÄke \(T(1, -1)\) na pravu. Normala ima pravac vektora \(\vec{n} = (1, 2)\), pa joj je parametarska jednaÄina:</p>
    <div class="formula-box">
      \[ x = 1 + t, \quad y = -1 + 2t \]
    </div>
    <p>UvrÅ¡tavamo u jednaÄinu prave \(x + 2y - 4 = 0\):</p>
    <div class="formula-box">
      \[ (1 + t) + 2(-1 + 2t) - 4 = 0 \implies 1 + t - 2 + 4t - 4 = 0 \implies 5t - 5 = 0 \implies t = 1 \]
    </div>
    <p>NoÅ¾iÅ¡te normale: \(N = (1 + 1,\; -1 + 2) = (2,\; 1)\). IzraÄunavamo rastojanje \(TN\):</p>
    <div class="formula-box">
      \[ d = \sqrt{(2 - 1)^2 + (1 - (-1))^2} = \sqrt{1 + 4} = \sqrt{5} \;\; \checkmark \]
    </div>
    <details>
      <summary>Proveri sebe: Da li taÄka \(N(2, 1)\) zaista leÅ¾i na pravoj?</summary>
      <div class="details-content">
        <p>UvrÅ¡tavamo \(N(2, 1)\) u jednaÄinu prave: \(2 + 2 \cdot 1 - 4 = 2 + 2 - 4 = 0\). Da, taÄka leÅ¾i na pravoj.</p>
      </div>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="card insight-card">
    <div class="card-title"><span class="icon">ğŸ’¡</span> KljuÄni uvid</div>
    <p>Razlomak oblika \(\dfrac{n}{\sqrt{n}}\) uvek se svodi na \(\sqrt{n}\), jer je \(\dfrac{n}{\sqrt{n}} = \dfrac{(\sqrt{n})^2}{\sqrt{n}} = \sqrt{n}\). Prepoznavanje ovog obrasca znatno ubrzava raÄun.</p>
    <p style="margin-top: 10px;">U ovom zadatku: \(\dfrac{5}{\sqrt{5}} = \sqrt{5}\) â€” nema potrebe za celom racionalizacijom.</p>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer-card">
    <div class="card-title" style="justify-content: center;"><span class="icon">ğŸ†</span> KonaÄan odgovor</div>
    <div class="final-answer-value">\(d = \sqrt{5}\)</div>
    <p style="font-size: 1.2rem;">TaÄan odgovor je <strong style="color: #4ade80;">(E) \(\sqrt{5}\)</strong></p>
    <div class="verification-box">
      <strong style="color: #4ade80;">Verifikacija:</strong>
      <ul style="margin-top: 8px; margin-left: 20px;">
        <li>Formula: \(d = \frac{|1 - 2 - 4|}{\sqrt{1 + 4}} = \frac{5}{\sqrt{5}} = \sqrt{5}\)</li>
        <li>NoÅ¾iÅ¡te normale \(N(2, 1)\) leÅ¾i na pravoj: \(2 + 2 - 4 = 0\) âœ“</li>
        <li>Rastojanje \(TN = \sqrt{1 + 4} = \sqrt{5}\) âœ“</li>
        <li>NumeriÄki: \(\sqrt{5} \approx 2{,}236\)</li>
      </ul>
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfall-card">
    <div class="card-title"><span class="icon">âš ï¸</span> ÄŒeste greÅ¡ke</div>
    <div class="pitfall-item">
      <div class="pitfall-label">PogreÅ¡an predznak za \(c\)</div>
      <p>JednaÄina prave mora biti u obliku \(ax + by + c = 0\). Ako je prava zapisana kao \(x + 2y = 4\), onda je \(c = -4\), a ne \(+4\). GreÅ¡ka u predznaku daje pogreÅ¡an brojilac: \(|1 - 2 + 4| = 3\) umesto \(|1 - 2 - 4| = 5\).</p>
    </div>
    <div class="pitfall-item">
      <div class="pitfall-label">Zaboravljena apsolutna vrednost</div>
      <p>Bez apsolutne vrednosti, rezultat bi bio \(-\sqrt{5}\), Å¡to nema smisla kao rastojanje. Uvek uzimamo \(|a x_0 + b y_0 + c|\).</p>
    </div>
    <div class="pitfall-item">
      <div class="pitfall-label">GreÅ¡ka u racionalizaciji</div>
      <p>Neki uÄenici zapiÅ¡u \(\frac{5}{\sqrt{5}} = 5\sqrt{5}\) umesto taÄnog \(\frac{5}{\sqrt{5}} = \sqrt{5}\). Obavezno proverite deljenjem: \(\sqrt{5} \cdot \sqrt{5} = 5\) âœ“.</p>
    </div>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <div class="card-title"><span class="icon">ğŸ¯</span> Izazov za dodatno veÅ¾banje</div>
    <p>NaÄ‘i taÄku na \(y\)-osi koja je na rastojanju \(2\sqrt{5}\) od prave \(x + 2y - 4 = 0\).</p>
    <details>
      <summary>PrikaÅ¾i reÅ¡enje</summary>
      <div class="details-content">
        <p>TaÄka na \(y\)-osi ima oblik \((0, k)\). Primenjujemo formulu:</p>
        <div class="formula-box">
          \[ d = \frac{|0 + 2k - 4|}{\sqrt{5}} = 2\sqrt{5} \]
        </div>
        <p>Odatle: \(|2k - 4| = 2\sqrt{5} \cdot \sqrt{5} = 10\), pa:</p>
        <p>\(2k - 4 = 10 \implies k = 7\) ili \(2k - 4 = -10 \implies k = -3\).</p>
        <p style="margin-top: 8px;">TaÄke su \((0, 7)\) i \((0, -3)\).</p>
      </div>
    </details>
  </div>

</div>

<script>
(function() {
  const canvas = document.getElementById('distCanvas');
  const ctx = canvas.getContext('2d');

  // State
  let showGrid = true;
  let showNormal = true;
  let dragging = false;

  // Draggable point T
  let pointT = { x: 1, y: -1 };

  // Line: x + 2y - 4 = 0  =>  y = (4 - x) / 2
  function lineY(x) { return (4 - x) / 2; }

  // World bounds
  const worldMinX = -3, worldMaxX = 7;
  const worldMinY = -4, worldMaxY = 5;

  // Coordinate transforms
  const W = canvas.width;
  const H = canvas.height;
  const pad = 50;

  function toCanvasX(wx) {
    return pad + (wx - worldMinX) / (worldMaxX - worldMinX) * (W - 2 * pad);
  }
  function toCanvasY(wy) {
    return H - pad - (wy - worldMinY) / (worldMaxY - worldMinY) * (H - 2 * pad);
  }
  function toWorldX(cx) {
    return worldMinX + (cx - pad) / (W - 2 * pad) * (worldMaxX - worldMinX);
  }
  function toWorldY(cy) {
    return worldMinY + (H - pad - cy) / (H - 2 * pad) * (worldMaxY - worldMinY);
  }

  // Foot of perpendicular from point to line ax+by+c=0
  function footOfPerpendicular(px, py, a, b, c) {
    const denom = a * a + b * b;
    const fx = (b * b * px - a * b * py - a * c) / denom;
    const fy = (a * a * py - a * b * px - b * c) / denom;
    return { x: fx, y: fy };
  }

  // Distance from point to line
  function distToLine(px, py, a, b, c) {
    return Math.abs(a * px + b * py + c) / Math.sqrt(a * a + b * b);
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Grid
    if (showGrid) {
      ctx.strokeStyle = '#1e293b';
      ctx.lineWidth = 1;
      for (let gx = Math.ceil(worldMinX); gx <= Math.floor(worldMaxX); gx++) {
        ctx.beginPath();
        ctx.moveTo(toCanvasX(gx), toCanvasY(worldMinY));
        ctx.lineTo(toCanvasX(gx), toCanvasY(worldMaxY));
        ctx.stroke();
      }
      for (let gy = Math.ceil(worldMinY); gy <= Math.floor(worldMaxY); gy++) {
        ctx.beginPath();
        ctx.moveTo(toCanvasX(worldMinX), toCanvasY(gy));
        ctx.lineTo(toCanvasX(worldMaxX), toCanvasY(gy));
        ctx.stroke();
      }

      // Grid labels
      ctx.fillStyle = '#475569';
      ctx.font = '11px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      for (let gx = Math.ceil(worldMinX); gx <= Math.floor(worldMaxX); gx++) {
        if (gx === 0) continue;
        ctx.fillText(gx, toCanvasX(gx), toCanvasY(0) + 16);
      }
      ctx.textAlign = 'right';
      for (let gy = Math.ceil(worldMinY); gy <= Math.floor(worldMaxY); gy++) {
        if (gy === 0) continue;
        ctx.fillText(gy, toCanvasX(0) - 8, toCanvasY(gy) + 4);
      }
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 2;
    // X-axis
    ctx.beginPath();
    ctx.moveTo(toCanvasX(worldMinX), toCanvasY(0));
    ctx.lineTo(toCanvasX(worldMaxX), toCanvasY(0));
    ctx.stroke();
    // Y-axis
    ctx.beginPath();
    ctx.moveTo(toCanvasX(0), toCanvasY(worldMinY));
    ctx.lineTo(toCanvasX(0), toCanvasY(worldMaxY));
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('x', toCanvasX(worldMaxX) - 5, toCanvasY(0) - 10);
    ctx.fillText('y', toCanvasX(0) + 14, toCanvasY(worldMaxY) + 8);

    // Draw line: x + 2y - 4 = 0
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    const lx1 = worldMinX, ly1 = lineY(worldMinX);
    const lx2 = worldMaxX, ly2 = lineY(worldMaxX);
    ctx.moveTo(toCanvasX(lx1), toCanvasY(ly1));
    ctx.lineTo(toCanvasX(lx2), toCanvasY(ly2));
    ctx.stroke();

    // Line label
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('x + 2y âˆ’ 4 = 0', toCanvasX(4.5) + 5, toCanvasY(lineY(4.5)) - 10);

    // Foot of perpendicular
    const foot = footOfPerpendicular(pointT.x, pointT.y, 1, 2, -4);
    const dist = distToLine(pointT.x, pointT.y, 1, 2, -4);

    // Normal line (dashed)
    if (showNormal) {
      ctx.strokeStyle = '#f472b6';
      ctx.lineWidth = 2;
      ctx.setLineDash([8, 6]);
      ctx.beginPath();
      ctx.moveTo(toCanvasX(pointT.x), toCanvasY(pointT.y));
      ctx.lineTo(toCanvasX(foot.x), toCanvasY(foot.y));
      ctx.stroke();
      ctx.setLineDash([]);

      // Right angle marker at foot
      const dx = pointT.x - foot.x;
      const dy = pointT.y - foot.y;
      const len = Math.sqrt(dx * dx + dy * dy);
      if (len > 0.3) {
        const ux = dx / len * 0.3;
        const uy = dy / len * 0.3;
        // Perpendicular direction along line
        const vx = -uy;
        const vy = ux;
        ctx.strokeStyle = '#f472b6';
        ctx.lineWidth = 1.5;
        ctx.beginPath();
        ctx.moveTo(toCanvasX(foot.x + ux), toCanvasY(foot.y + uy));
        ctx.lineTo(toCanvasX(foot.x + ux + vx), toCanvasY(foot.y + uy + vy));
        ctx.lineTo(toCanvasX(foot.x + vx), toCanvasY(foot.y + vy));
        ctx.stroke();
      }

      // Distance label on normal
      const midX = (pointT.x + foot.x) / 2;
      const midY = (pointT.y + foot.y) / 2;
      ctx.fillStyle = '#f472b6';
      ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText('d = ' + dist.toFixed(3), toCanvasX(midX) + 10, toCanvasY(midY) - 5);

      // Foot point N
      ctx.fillStyle = '#a78bfa';
      ctx.beginPath();
      ctx.arc(toCanvasX(foot.x), toCanvasY(foot.y), 6, 0, 2 * Math.PI);
      ctx.fill();
      ctx.fillStyle = '#a78bfa';
      ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText('N(' + foot.x.toFixed(1) + ', ' + foot.y.toFixed(1) + ')', toCanvasX(foot.x) + 10, toCanvasY(foot.y) + 18);
    }

    // Point T
    ctx.fillStyle = '#4ade80';
    ctx.beginPath();
    ctx.arc(toCanvasX(pointT.x), toCanvasY(pointT.y), 8, 0, 2 * Math.PI);
    ctx.fill();
    // Point T outline
    ctx.strokeStyle = '#fff';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.arc(toCanvasX(pointT.x), toCanvasY(pointT.y), 8, 0, 2 * Math.PI);
    ctx.stroke();

    // Point T label
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('T(' + pointT.x.toFixed(1) + ', ' + pointT.y.toFixed(1) + ')', toCanvasX(pointT.x) + 14, toCanvasY(pointT.y) - 10);

    // Info box in top-left
    ctx.fillStyle = 'rgba(30, 41, 59, 0.9)';
    const boxX = pad + 8, boxY = pad + 8, boxW = 190, boxH = 50;
    ctx.beginPath();
    ctx.roundRect(boxX, boxY, boxW, boxH, 8);
    ctx.fill();
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.roundRect(boxX, boxY, boxW, boxH, 8);
    ctx.stroke();

    ctx.fillStyle = '#e2e8f0';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Rastojanje d = ' + dist.toFixed(4), boxX + 12, boxY + 22);
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('PrevlaÄite taÄku T', boxX + 12, boxY + 40);
  }

  // Event handling
  function getPos(e) {
    const rect = canvas.getBoundingClientRect();
    const scaleX = W / rect.width;
    const scaleY = H / rect.height;
    let cx, cy;
    if (e.touches) {
      cx = (e.touches[0].clientX - rect.left) * scaleX;
      cy = (e.touches[0].clientY - rect.top) * scaleY;
    } else {
      cx = (e.clientX - rect.left) * scaleX;
      cy = (e.clientY - rect.top) * scaleY;
    }
    return { cx, cy };
  }

  function isNearPoint(cx, cy) {
    const px = toCanvasX(pointT.x);
    const py = toCanvasY(pointT.y);
    return Math.hypot(cx - px, cy - py) < 20;
  }

  function onDown(e) {
    const pos = getPos(e);
    if (isNearPoint(pos.cx, pos.cy)) {
      dragging = true;
      e.preventDefault();
    }
  }

  function onMove(e) {
    if (!dragging) return;
    e.preventDefault();
    const pos = getPos(e);
    pointT.x = Math.max(worldMinX, Math.min(worldMaxX, toWorldX(pos.cx)));
    pointT.y = Math.max(worldMinY, Math.min(worldMaxY, toWorldY(pos.cy)));
    draw();
  }

  function onUp() {
    dragging = false;
  }

  canvas.addEventListener('mousedown', onDown);
  canvas.addEventListener('mousemove', onMove);
  canvas.addEventListener('mouseup', onUp);
  canvas.addEventListener('mouseleave', onUp);
  canvas.addEventListener('touchstart', onDown, { passive: false });
  canvas.addEventListener('touchmove', onMove, { passive: false });
  canvas.addEventListener('touchend', onUp);

  // Buttons
  document.getElementById('btnReset').addEventListener('click', function() {
    pointT.x = 1;
    pointT.y = -1;
    draw();
  });

  document.getElementById('btnToggleGrid').addEventListener('click', function() {
    showGrid = !showGrid;
    this.classList.toggle('active', showGrid);
    draw();
  });

  document.getElementById('btnToggleNormal').addEventListener('click', function() {
    showNormal = !showNormal;
    this.classList.toggle('active', showNormal);
    draw();
  });

  // Initial state for toggle buttons
  document.getElementById('btnToggleGrid').classList.add('active');
  document.getElementById('btnToggleNormal').classList.add('active');

  draw();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{"title":"Rastojanje taÄke od prave","subject":"math","unit":"analytic_geometry","topic_tags":["rastojanje taÄke od prave","analitiÄka geometrija","jednaÄina prave","formula za rastojanje"]}
BRAINSPARK_META-->