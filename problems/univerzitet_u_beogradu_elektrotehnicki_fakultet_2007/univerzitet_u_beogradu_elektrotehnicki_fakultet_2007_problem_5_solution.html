<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Apsolutna vrednost izraza ||x| − a|</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
Problem: Ako je |x + a| = a (a >= 0), tada je ||x| - a| jednako?
Ponudjeni odgovori: (A) 0, (B) a, (C) 2a, (D) 3a, (E) a/2

Korak 1: Razrešimo jednačinu |x + a| = a
  |x + a| = a znači: -a <= x + a <= a
  Oduzimamo a: -2a <= x <= 0
  Dakle x pripada intervalu [-2a, 0].

Korak 2: Odredimo |x| za x iz [-2a, 0]
  Pošto je x <= 0, važi |x| = -x.

Korak 3: Izračunajmo |x| - a
  |x| - a = -x - a = -(x + a)

Korak 4: Izračunajmo ||x| - a|
  ||x| - a| = |-(x + a)| = |x + a|

Korak 5: Ali znamo da je |x + a| = a (dato u zadatku!)
  Dakle ||x| - a| = a.

Odgovor: (B) a

Alternativna provera sa konkretnim vrednostima:
  Neka je a = 3.
  Tada x ∈ [-6, 0].
  Za x = 0: |0 + 3| = 3 ✓, ||0| - 3| = |0 - 3| = 3 = a ✓
  Za x = -3: |-3 + 3| = 0... ali to nije = a = 3. Greška!

  Čekaj, |x + a| = a ne znači da za svako x iz [-2a, 0] važi jednakost,
  već je to JEDNAČINA - x je fiksiran tako da |x + a| = a važi.

  Zapravo, |x + a| = a daje x + a ∈ {-a, a}, tj. x + a = a ili x + a = -a,
  tj. x = 0 ili x = -2a.

  Ali ne, |x + a| = a znači -a ≤ x + a ≤ a (jer je a ≥ 0), tj. x + a ∈ [-a, a].
  Zapravo, |x + a| = a znači da je x + a = a ili x + a = -a,
  jer apsolutna vrednost nečega je a onda je to nešto ili a ili -a.

  Hmm, ali zadatak kaže |x + a| = a, što je JEDNAČINA koja ima rešenja
  x = 0 i x = -2a. Za oba:

  x = 0: ||0| - a| = |0 - a| = |-a| = a ✓
  x = -2a: ||-2a| - a| = |2a - a| = |a| = a ✓

  U oba slučaja dobijamo a.

  Ali zapravo, ako posmatramo |x + a| = a za bilo koje x iz tog skupa,
  ključni trik je algebarski:
  |x| = -x (jer x ≤ 0)
  |x| - a = -x - a = -(x + a)
  ||x| - a| = |-(x+a)| = |x+a| = a

  Ovo važi za SVAKO x koje zadovoljava polaznu jednačinu, ne samo za x=0 i x=-2a.
  Zapravo, |x+a| = a ima rešenja upravo x ∈ [-2a, 0] (ceo interval!),
  jer apsolutna vrednost: |t| = a ⟺ t ∈ [-a, a] SAMO ako je a = |t|...

  Ne: |t| = a ⟺ t = a ili t = -a (za a > 0), ili t = 0 (za a = 0).

  Dakle |x+a| = a ⟺ x+a = a ili x+a = -a ⟺ x = 0 ili x = -2a.
  (Za a = 0: x = 0.)

  Ali svejedno, za oba rešenja x = 0 i x = -2a, algebarski trik daje:
  ||x| - a| = |x + a| = a.

Odgovor: (B) a
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 12px 0;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 14px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 100px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #60a5fa;
  font-size: 1.15rem;
  font-weight: 700;
}

.plan-card {
  border-left: 4px solid #a78bfa;
}

.plan-card h2 { color: #a78bfa; }

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 10px 14px;
  background: rgba(96,165,250,0.06);
  border-radius: 8px;
  border: 1px solid rgba(96,165,250,0.12);
  list-style: none;
  user-select: none;
}

details summary::-webkit-details-marker { display: none; }

details summary::before {
  content: '\25B8 ';
  display: inline;
}

details[open] summary::before {
  content: '\25BE ';
}

details .details-content {
  padding: 14px 18px;
  margin-top: 8px;
  background: rgba(96,165,250,0.04);
  border-radius: 8px;
  border: 1px solid rgba(96,165,250,0.08);
}

.step-container {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  align-items: flex-start;
}

.step-badge {
  min-width: 34px;
  height: 34px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: 0.95rem;
  color: #0f172a;
  margin-top: 2px;
  flex-shrink: 0;
}

.step-content {
  flex: 1;
  min-width: 0;
}

.step-content h3 {
  margin-bottom: 8px;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 14px;
  padding: 22px 26px;
  margin-bottom: 24px;
}

.insight-box h2 { color: #a78bfa; }

.final-answer-box {
  background: linear-gradient(135deg, rgba(52,211,153,0.1), rgba(74,222,128,0.08));
  border: 2px solid rgba(52,211,153,0.35);
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin-bottom: 24px;
}

.final-answer-box .answer-value {
  font-size: 2.4rem;
  font-weight: 800;
  color: #4ade80;
  margin: 16px 0;
}

.options-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin: 18px 0;
}

.option-chip {
  background: rgba(96,165,250,0.08);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 22px;
  font-size: 1.05rem;
  color: #94a3b8;
  transition: all 0.2s;
}

.option-chip.correct {
  background: rgba(52,211,153,0.15);
  border-color: #34d399;
  color: #4ade80;
  font-weight: 700;
  box-shadow: 0 0 20px rgba(52,211,153,0.15);
}

.pitfall-box {
  border-left: 4px solid #e09468;
}

.pitfall-box h2 { color: #e09468; }

.challenge-box {
  border-left: 4px solid #a78bfa;
}

.challenge-box h2 { color: #a78bfa; }

.canvas-wrapper {
  background: #0c1222;
  border-radius: 12px;
  border: 1px solid #334155;
  overflow: hidden;
  margin: 14px 0;
}

canvas {
  width: 100%;
  display: block;
  touch-action: none;
}

.provera-note {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 12px;
  padding: 12px 16px;
  background: rgba(52,211,153,0.05);
  border-radius: 8px;
  border: 1px solid rgba(52,211,153,0.12);
}

.formula-list {
  list-style: none;
  padding: 0;
}

.formula-list li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
}

.formula-list li:last-child { border-bottom: none; }

.case-box {
  background: rgba(167,139,250,0.06);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 12px 0;
}

.case-box .case-label {
  color: #a78bfa;
  font-weight: 700;
  font-size: 1.05rem;
  margin-bottom: 8px;
}

.arrow-chain {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
  margin: 10px 0;
}

.arrow-chain .chain-item {
  background: rgba(96,165,250,0.1);
  border: 1px solid rgba(96,165,250,0.2);
  border-radius: 8px;
  padding: 6px 14px;
  color: #60a5fa;
  font-weight: 600;
}

.arrow-chain .chain-arrow {
  color: #94a3b8;
  font-size: 1.2rem;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step-container { flex-direction: column; gap: 8px; }
  .given-grid { flex-direction: column; }
  .options-grid { flex-direction: column; align-items: center; }
  .final-answer-box .answer-value { font-size: 1.8rem; }
}
</style>
</head>
<body>

<div class="container">

  <!-- Title -->
  <h1>Apsolutna vrednost ugneždenog izraza</h1>
  <p class="subtitle">Elegantna primena osobina apsolutne vrednosti i algebarskog preuređivanja</p>

  <!-- Problem Statement -->
  <div class="card">
    <h2>Postavka zadatka</h2>
    <p>Ako je \(|x + a| = a\) \((a \geq 0)\), tada je \(||x| - a|\) jednako:</p>
    <div class="given-grid">
      <div class="given-item">
        <div class="label">Odgovor (A)</div>
        <div class="value">\(0\)</div>
      </div>
      <div class="given-item">
        <div class="label">Odgovor (B)</div>
        <div class="value">\(a\)</div>
      </div>
      <div class="given-item">
        <div class="label">Odgovor (C)</div>
        <div class="value">\(2a\)</div>
      </div>
      <div class="given-item">
        <div class="label">Odgovor (D)</div>
        <div class="value">\(3a\)</div>
      </div>
      <div class="given-item">
        <div class="label">Odgovor (E)</div>
        <div class="value">\(\dfrac{a}{2}\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan rešavanja</h2>
    <p>Iz uslova \(|x + a| = a\) prvo odredimo moguće vrednosti za \(x\). Zatim iskoristimo
       činjenicu da je \(x \leq 0\) kako bismo \(|x|\) zapisali kao \(-x\), i tada ćemo izraz
       \(||x| - a|\) svesti nazad na polazni uslov. Ključ je prepoznati algebarsku vezu
       između traženog i datog izraza.</p>
    <div class="arrow-chain">
      <div class="chain-item">\(|x+a| = a\)</div>
      <div class="chain-arrow">\(\Rightarrow\)</div>
      <div class="chain-item">\(x \leq 0\)</div>
      <div class="chain-arrow">\(\Rightarrow\)</div>
      <div class="chain-item">\(|x| = -x\)</div>
      <div class="chain-arrow">\(\Rightarrow\)</div>
      <div class="chain-item">\(||x|-a| = |x+a| = a\)</div>
    </div>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Ključne formule i osobine</summary>
      <div class="details-content">
        <ul class="formula-list">
          <li>Definicija apsolutne vrednosti: \(|t| = \begin{cases} t, & t \geq 0 \\ -t, & t < 0 \end{cases}\)</li>
          <li>Jednačina \(|t| = c\) za \(c \geq 0\): ima rešenja \(t = c\) ili \(t = -c\)</li>
          <li>Za \(x \leq 0\): važi \(|x| = -x\)</li>
          <li>Osobina: \(|-t| = |t|\) za svako realno \(t\)</li>
          <li>Apsolutna vrednost kao rastojanje: \(|x + a|\) je rastojanje broja \(x\) od \(-a\) na brojevnoj pravoj</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <h2>Vizuelni prikaz</h2>
    <p style="color: #94a3b8; margin-bottom: 10px;">Brojevna prava prikazuje rešenja jednačine \(|x + a| = a\) i geometrijsko tumačenje. Prevlačite klizač da menjate vrednost \(a\).</p>
    <div class="canvas-wrapper">
      <canvas id="diagram" width="800" height="400"></canvas>
    </div>
    <p style="color: #94a3b8; font-size: 0.85rem; margin-top: 6px;">Prevlačite klizač ili dodirnite da menjate vrednost parametra \(a\).</p>
  </div>

  <!-- Step-by-step Solution -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Rešimo jednačinu \(|x + a| = a\)</h3>
        <p>Jednačina \(|t| = c\) (gde je \(c \geq 0\)) ima rešenja \(t = c\) ili \(t = -c\). Primenimo ovo na \(t = x + a\), \(c = a\):</p>
        <div class="math-box">
          \[
          |x + a| = a \quad \Longleftrightarrow \quad x + a = a \;\;\text{ili}\;\; x + a = -a
          \]
        </div>
        <p>Odavde dobijamo dva rešenja:</p>
        <div class="math-box">
          \[
          x + a = a \;\Rightarrow\; \boxed{x = 0} \qquad \text{ili} \qquad x + a = -a \;\Rightarrow\; \boxed{x = -2a}
          \]
        </div>
        <p>Napomena: za \(a = 0\), oba rešenja se poklapaju u \(x = 0\).</p>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details>
      <summary>Proveri se: Zašto ne \(x \in [-2a, 0]\)?</summary>
      <div class="details-content">
        <p>Nejednačina \(|x + a| \leq a\) bi dala interval \(x \in [-2a, 0]\). Međutim,
           ovde imamo <em>jednačinu</em> \(|x + a| = a\) (sa znakom jednakosti), pa rešenja
           čine samo krajnje tačke tog intervala: \(x = 0\) i \(x = -2a\).</p>
        <p>Ipak, naš algebarski pristup u narednim koracima funkcioniše za obe vrednosti
           istovremeno, jer se oslanja na zajedničku osobinu: oba rešenja zadovoljavaju \(x \leq 0\).</p>
      </div>
    </details>

    <!-- Step 2 -->
    <div class="step-container">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Uočimo ključnu osobinu: \(x \leq 0\)</h3>
        <p>Oba rešenja zadovoljavaju \(x \leq 0\) (jer je \(a \geq 0\)):</p>
        <div class="case-box">
          <div class="case-label">Rešenje 1:</div>
          <p>\(x = 0 \leq 0\) \(\checkmark\)</p>
        </div>
        <div class="case-box">
          <div class="case-label">Rešenje 2:</div>
          <p>\(x = -2a \leq 0\) jer je \(a \geq 0\) \(\checkmark\)</p>
        </div>
        <p style="margin-top: 12px;">Pošto je \(x \leq 0\), možemo primeniti definiciju apsolutne vrednosti:</p>
        <div class="math-box">
          \[
          x \leq 0 \quad \Longrightarrow \quad |x| = -x
          \]
        </div>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step-container">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Transformišemo izraz \(|x| - a\)</h3>
        <p>Zamenom \(|x| = -x\) u traženi izraz dobijamo:</p>
        <div class="math-box">
          \[
          |x| - a = -x - a = -(x + a)
          \]
        </div>
        <p>Ovo je ključno zapažanje: izraz \(|x| - a\) je zapravo <span class="highlight">\(-(x + a)\)</span>!</p>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step-container">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Primenimo spoljašnju apsolutnu vrednost</h3>
        <p>Sada računamo \(||x| - a|\):</p>
        <div class="math-box">
          \[
          ||x| - a| = |-(x + a)| = |x + a|
          \]
        </div>
        <p>Iskoristili smo osobinu \(|-t| = |t|\) za svako realno \(t\).</p>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step-container">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Primenimo polazni uslov</h3>
        <p>Iz zadatka znamo da važi \(|x + a| = a\). Upravo smo pokazali da je
           \(||x| - a| = |x + a|\). Dakle:</p>
        <div class="math-box">
          \[
          ||x| - a| = |x + a| = \boxed{a}
          \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details>
      <summary>Proveri se: Numerička verifikacija za oba rešenja</summary>
      <div class="details-content">
        <p>Neka je, na primer, \(a = 5\). Tada su rešenja \(x = 0\) i \(x = -10\).</p>
        <div class="case-box">
          <div class="case-label">Za \(x = 0\), \(a = 5\):</div>
          <p>\(||x| - a| = ||0| - 5| = |0 - 5| = |-5| = 5 = a\) \(\checkmark\)</p>
        </div>
        <div class="case-box">
          <div class="case-label">Za \(x = -10\), \(a = 5\):</div>
          <p>\(||x| - a| = ||-10| - 5| = |10 - 5| = |5| = 5 = a\) \(\checkmark\)</p>
        </div>
        <p style="margin-top: 10px;">Oba slučaja potvrđuju rezultat \(||x| - a| = a\).</p>
      </div>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Ključni uvid</h2>
    <p>Čitav trik leži u prepoznavanju da je za \(x \leq 0\) apsolutna vrednost \(|x| = -x\),
       pa se izraz \(|x| - a\) svodi na \(-x - a = -(x + a)\). Spoljašnja apsolutna vrednost
       \(|-(x + a)|\) tada daje \(|x + a|\), što je upravo ono što nam je <em>dato</em> u zadatku!
       Ovaj elegantni krug nas vraća nazad na polazni uslov, dajući odmah odgovor \(a\).</p>
    <p style="margin-top: 10px; color: #94a3b8;">Suština: nije potrebno razmatrati pojedinačne slučajeve --
       dovoljna je jedna algebarska transformacija u tri reda.</p>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <h2 style="color: #34d399; margin-bottom: 10px;">Konačan odgovor</h2>
    <div class="options-grid">
      <div class="option-chip">(A) \(0\)</div>
      <div class="option-chip correct">(B) \(a\)</div>
      <div class="option-chip">(C) \(2a\)</div>
      <div class="option-chip">(D) \(3a\)</div>
      <div class="option-chip">(E) \(\dfrac{a}{2}\)</div>
    </div>
    <div class="answer-value">Odgovor je (B) \(a\)</div>
    <div class="provera-note">
      <strong>Provera:</strong> Za \(a = 5\): rešenja su \(x = 0\) i \(x = -10\).
      U oba slučaja \(||x| - a| = 5 = a\). Algebarski: \(||x| - a| = |-(x+a)| = |x+a| = a\).
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfall-box">
    <h2>Česte greške</h2>
    <ul style="list-style: disc; padding-left: 20px; color: #e2e8f0;">
      <li style="margin-bottom: 10px;"><strong>Zaboravljanje da je \(x \leq 0\):</strong>
        Ako se ne uoči da sva rešenja zadovoljavaju \(x \leq 0\), ne može se zaključiti
        da je \(|x| = -x\). Bez toga, izraz se ne može jednostavno transformisati.</li>
      <li style="margin-bottom: 10px;"><strong>Pokušaj sa intervalom umesto rešenjima:</strong>
        Mnogi studenti mešaju jednačinu \(|x+a| = a\) sa nejednačinom \(|x+a| \leq a\).
        Jednačina ima tačno dva rešenja (\(x = 0\) i \(x = -2a\)), a ne čitav interval.
        Ipak, algebarski pristup funkcioniše jer se oslanja samo na \(x \leq 0\) i polazni uslov.</li>
      <li><strong>Odgovor 0 ili 2a usled parcijalne analize:</strong>
        Ako se razmotri samo \(x = 0\), dobija se \(||0| - a| = a\), ali ako se pogrešno
        izračuna za \(x = -2a\) (npr. bez apsolutne vrednosti), može se dobiti pogrešan rezultat.</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-box">
    <h2>Bonus izazov</h2>
    <p>Ako je \(|x - a| = 2a\) \((a \geq 0)\), koliko je \(||x| + a|\)?</p>
    <details>
      <summary>Pogledaj nagoveštaj</summary>
      <div class="details-content">
        <p>Reši jednačinu \(|x - a| = 2a\): dobićeš \(x = 3a\) ili \(x = -a\). Za svako od
           ovih rešenja izračunaj \(||x| + a|\). Pošto je \(|x| + a \geq 0\) uvek, spoljašnja
           apsolutna vrednost je suvišna. Proveri da li dobijaš isti rezultat u oba slučaja!</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('diagram');
  const ctx = canvas.getContext('2d');

  let aVal = 3;
  let dragging = false;
  let hoverSlider = false;

  // Slider parameters
  const sliderY = 370;
  const sliderLeft = 100;
  const sliderRight = 700;

  function aToSliderX(a) {
    return sliderLeft + (a / 5) * (sliderRight - sliderLeft);
  }

  function sliderXToA(sx) {
    let a = ((sx - sliderLeft) / (sliderRight - sliderLeft)) * 5;
    return Math.max(0, Math.min(5, a));
  }

  function draw() {
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    canvas.width = rect.width * dpr;
    canvas.height = 400 * dpr;
    canvas.style.height = '400px';
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    const W = rect.width;
    const H = 400;

    const scaleX = W / 800;
    const scaleSliderLeft = sliderLeft * scaleX;
    const scaleSliderRight = sliderRight * scaleX;

    function aToSX(a) {
      return scaleSliderLeft + (a / 5) * (scaleSliderRight - scaleSliderLeft);
    }

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Number line parameters
    const marginL = 60 * scaleX;
    const marginR = 40 * scaleX;
    const lineY = 140;
    const lineW = W - marginL - marginR;
    const minVal = -11;
    const maxVal = 6;
    const range = maxVal - minVal;

    function xPos(val) {
      return marginL + ((val - minVal) / range) * lineW;
    }

    // Title
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold ' + (15 * scaleX) + 'px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Geometrijsko tumačenje: |x + a| = rastojanje od x do -a', marginL, 28 * scaleX);

    // Grid lines
    ctx.strokeStyle = 'rgba(96,165,250,0.06)';
    ctx.lineWidth = 1;
    for (let i = Math.ceil(minVal); i <= maxVal; i++) {
      const x = xPos(i);
      ctx.beginPath();
      ctx.moveTo(x, 40);
      ctx.lineTo(x, lineY + 30);
      ctx.stroke();
    }

    // Main number line
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(marginL, lineY);
    ctx.lineTo(W - marginR, lineY);
    ctx.stroke();

    // Arrow at end
    ctx.fillStyle = '#475569';
    ctx.beginPath();
    ctx.moveTo(W - marginR, lineY);
    ctx.lineTo(W - marginR - 8 * scaleX, lineY - 4);
    ctx.lineTo(W - marginR - 8 * scaleX, lineY + 4);
    ctx.closePath();
    ctx.fill();

    // Arrow at start
    ctx.beginPath();
    ctx.moveTo(marginL, lineY);
    ctx.lineTo(marginL + 8 * scaleX, lineY - 4);
    ctx.lineTo(marginL + 8 * scaleX, lineY + 4);
    ctx.closePath();
    ctx.fill();

    // Tick marks
    ctx.fillStyle = '#94a3b8';
    ctx.font = (11 * scaleX) + 'px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    for (let i = Math.ceil(minVal); i <= maxVal; i++) {
      const x = xPos(i);
      ctx.strokeStyle = '#64748b';
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.moveTo(x, lineY - 4);
      ctx.lineTo(x, lineY + 4);
      ctx.stroke();
      ctx.fillStyle = '#64748b';
      ctx.fillText(i.toString(), x, lineY + 18);
    }

    const a = aVal;
    const x1 = 0;
    const x2 = -2 * a;
    const negA = -a;

    // Highlight the distance arc for x = -2a to -a
    if (a > 0) {
      // Arc from x2 to negA (distance = a)
      const ax2 = xPos(x2);
      const anA = xPos(negA);
      const ax1 = xPos(x1);

      // Distance bracket for x = -2a
      const arcY1 = lineY - 45;
      ctx.strokeStyle = '#f472b6';
      ctx.lineWidth = 2;
      ctx.setLineDash([5, 3]);
      ctx.beginPath();
      ctx.moveTo(ax2, lineY - 8);
      ctx.lineTo(ax2, arcY1);
      ctx.lineTo(anA, arcY1);
      ctx.lineTo(anA, lineY - 8);
      ctx.stroke();
      ctx.setLineDash([]);

      // Label for distance
      ctx.fillStyle = '#f472b6';
      ctx.font = 'bold ' + (12 * scaleX) + 'px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('rastojanje = a', (ax2 + anA) / 2, arcY1 - 6);

      // Distance bracket for x = 0
      const arcY2 = lineY - 70;
      ctx.strokeStyle = '#34d399';
      ctx.lineWidth = 2;
      ctx.setLineDash([5, 3]);
      ctx.beginPath();
      ctx.moveTo(ax1, lineY - 8);
      ctx.lineTo(ax1, arcY2);
      ctx.lineTo(anA, arcY2);
      ctx.lineTo(anA, lineY - 8);
      ctx.stroke();
      ctx.setLineDash([]);

      ctx.fillStyle = '#34d399';
      ctx.font = 'bold ' + (12 * scaleX) + 'px Segoe UI, system-ui, sans-serif';
      ctx.fillText('rastojanje = a', (ax1 + anA) / 2, arcY2 - 6);
    }

    // Draw points
    // Point: -a
    const pNegA = xPos(negA);
    ctx.fillStyle = '#a78bfa';
    ctx.beginPath();
    ctx.arc(pNegA, lineY, 7, 0, Math.PI * 2);
    ctx.fill();
    ctx.shadowColor = '#a78bfa';
    ctx.shadowBlur = 12;
    ctx.beginPath();
    ctx.arc(pNegA, lineY, 4, 0, Math.PI * 2);
    ctx.fill();
    ctx.shadowBlur = 0;
    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold ' + (13 * scaleX) + 'px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('-a = ' + (-a).toFixed(0), pNegA, lineY + 34);

    // Point: x = 0
    const p0 = xPos(0);
    ctx.fillStyle = '#34d399';
    ctx.beginPath();
    ctx.arc(p0, lineY, 7, 0, Math.PI * 2);
    ctx.fill();
    ctx.shadowColor = '#34d399';
    ctx.shadowBlur = 12;
    ctx.beginPath();
    ctx.arc(p0, lineY, 4, 0, Math.PI * 2);
    ctx.fill();
    ctx.shadowBlur = 0;
    ctx.fillStyle = '#34d399';
    ctx.font = 'bold ' + (13 * scaleX) + 'px Segoe UI, system-ui, sans-serif';
    ctx.fillText('x = 0', p0, lineY + 34);

    // Point: x = -2a
    if (a > 0) {
      const p2a = xPos(x2);
      ctx.fillStyle = '#f472b6';
      ctx.beginPath();
      ctx.arc(p2a, lineY, 7, 0, Math.PI * 2);
      ctx.fill();
      ctx.shadowColor = '#f472b6';
      ctx.shadowBlur = 12;
      ctx.beginPath();
      ctx.arc(p2a, lineY, 4, 0, Math.PI * 2);
      ctx.fill();
      ctx.shadowBlur = 0;
      ctx.fillStyle = '#f472b6';
      ctx.font = 'bold ' + (13 * scaleX) + 'px Segoe UI, system-ui, sans-serif';
      ctx.fillText('x = -2a = ' + x2.toFixed(0), p2a, lineY + 34);
    }

    // Results section below number line
    const resY = lineY + 70;
    ctx.fillStyle = '#e2e8f0';
    ctx.font = (13 * scaleX) + 'px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';

    ctx.fillStyle = '#94a3b8';
    ctx.fillText('Trenutna vrednost: a = ' + a.toFixed(1), marginL, resY);

    // Case 1
    ctx.fillStyle = '#34d399';
    ctx.font = 'bold ' + (13 * scaleX) + 'px Segoe UI, system-ui, sans-serif';
    ctx.fillText('x = 0:', marginL, resY + 28);
    ctx.font = (13 * scaleX) + 'px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#e2e8f0';
    ctx.fillText('||0| - ' + a.toFixed(1) + '| = |0 - ' + a.toFixed(1) + '| = ' + a.toFixed(1) + ' = a', marginL + 60 * scaleX, resY + 28);

    // Case 2
    if (a > 0) {
      ctx.fillStyle = '#f472b6';
      ctx.font = 'bold ' + (13 * scaleX) + 'px Segoe UI, system-ui, sans-serif';
      ctx.fillText('x = ' + x2.toFixed(1) + ':', marginL, resY + 54);
      ctx.font = (13 * scaleX) + 'px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = '#e2e8f0';
      const absX2 = Math.abs(x2);
      ctx.fillText('||' + x2.toFixed(1) + '| - ' + a.toFixed(1) + '| = |' + absX2.toFixed(1) + ' - ' + a.toFixed(1) + '| = |' + (absX2 - a).toFixed(1) + '| = ' + a.toFixed(1) + ' = a', marginL + 80 * scaleX, resY + 54);
    }

    // Conclusion
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold ' + (14 * scaleX) + 'px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('U oba slucaja: ||x| - a| = a', W / 2, resY + 90);

    // Slider
    const sY = (resY + 120) > (H - 30) ? H - 30 : resY + 120;
    const sLeft = scaleSliderLeft;
    const sRight = scaleSliderRight;
    const sThumbX = aToSX(a);

    // Slider track
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 4;
    ctx.lineCap = 'round';
    ctx.beginPath();
    ctx.moveTo(sLeft, sY);
    ctx.lineTo(sRight, sY);
    ctx.stroke();

    // Active portion
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 4;
    ctx.beginPath();
    ctx.moveTo(sLeft, sY);
    ctx.lineTo(sThumbX, sY);
    ctx.stroke();

    // Thumb
    ctx.fillStyle = hoverSlider || dragging ? '#93c5fd' : '#60a5fa';
    ctx.beginPath();
    ctx.arc(sThumbX, sY, 10, 0, Math.PI * 2);
    ctx.fill();
    ctx.strokeStyle = '#0f172a';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.arc(sThumbX, sY, 10, 0, Math.PI * 2);
    ctx.stroke();

    // Slider labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = (11 * scaleX) + 'px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('a = 0', sLeft, sY + 22);
    ctx.fillText('a = 5', sRight, sY + 22);
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold ' + (12 * scaleX) + 'px Segoe UI, system-ui, sans-serif';
    ctx.fillText('a = ' + a.toFixed(1), sThumbX, sY - 18);
  }

  function getCanvasCoords(e) {
    const rect = canvas.getBoundingClientRect();
    const scaleX = rect.width / 800;
    if (e.touches) {
      return {
        x: e.touches[0].clientX - rect.left,
        y: e.touches[0].clientY - rect.top,
        scaleX: scaleX
      };
    }
    return {
      x: e.clientX - rect.left,
      y: e.clientY - rect.top,
      scaleX: scaleX
    };
  }

  function isOnSlider(cx, cy, scaleX) {
    const sY = 330;
    const sLeft = sliderLeft * scaleX;
    const sRight = sliderRight * scaleX;
    const sThumbX = sLeft + (aVal / 5) * (sRight - sLeft);
    return Math.abs(cy - sY) < 25 && cx >= sLeft - 15 && cx <= sRight + 15;
  }

  function updateA(cx, scaleX) {
    const sLeft = sliderLeft * scaleX;
    const sRight = sliderRight * scaleX;
    let newA = ((cx - sLeft) / (sRight - sLeft)) * 5;
    newA = Math.max(0, Math.min(5, newA));
    newA = Math.round(newA * 10) / 10;
    if (newA !== aVal) {
      aVal = newA;
      draw();
    }
  }

  canvas.addEventListener('mousedown', (e) => {
    const {x, y, scaleX} = getCanvasCoords(e);
    if (isOnSlider(x, y, scaleX)) {
      dragging = true;
      updateA(x, scaleX);
    }
  });

  canvas.addEventListener('mousemove', (e) => {
    const {x, y, scaleX} = getCanvasCoords(e);
    hoverSlider = isOnSlider(x, y, scaleX);
    if (dragging) {
      updateA(x, scaleX);
    } else {
      canvas.style.cursor = hoverSlider ? 'pointer' : 'default';
      draw();
    }
  });

  canvas.addEventListener('mouseup', () => { dragging = false; });
  canvas.addEventListener('mouseleave', () => { dragging = false; hoverSlider = false; draw(); });

  canvas.addEventListener('touchstart', (e) => {
    e.preventDefault();
    const {x, y, scaleX} = getCanvasCoords(e);
    if (isOnSlider(x, y, scaleX)) {
      dragging = true;
      updateA(x, scaleX);
    }
  }, { passive: false });

  canvas.addEventListener('touchmove', (e) => {
    e.preventDefault();
    if (dragging) {
      const {x, y, scaleX} = getCanvasCoords(e);
      updateA(x, scaleX);
    }
  }, { passive: false });

  canvas.addEventListener('touchend', () => { dragging = false; });

  draw();
  window.addEventListener('resize', draw);
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Apsolutna vrednost ugneždenog izraza ||x| - a|",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["apsolutna vrednost", "jednačine sa apsolutnom vrednošću", "algebarske transformacije", "osobine apsolutne vrednosti"]
}
BRAINSPARK_META-->