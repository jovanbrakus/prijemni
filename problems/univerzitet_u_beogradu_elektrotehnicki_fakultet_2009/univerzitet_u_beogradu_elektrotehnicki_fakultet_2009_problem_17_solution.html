<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vrednost izraza x^2009 + x^(-2009) za koren jednačine x² + x + 1 = 0</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
PROBLEM:
Ako je x² + x + 1 = 0, tada je izraz x^2009 + x^(-2009) jednak:
(A) −1    (B) 1    (C) x − 1    (D) x + 1    (E) 0    (N) Ne znam

SOLUTION:

1. Key identity: x² + x + 1 = 0 is related to cube roots of unity.
   Multiply both sides by (x - 1):
   (x - 1)(x² + x + 1) = x³ - 1 = 0
   So x³ = 1 (but x ≠ 1, since x² + x + 1 = 0 has no real root x = 1).

2. x is a primitive cube root of unity: x = ω or x = ω² where ω = e^{2πi/3}.

3. Reduce the exponent modulo 3:
   2009 = 3 · 669 + 2, so 2009 mod 3 = 2.
   x^2009 = (x³)^669 · x² = 1^669 · x² = x².

4. For x^(-2009):
   x^(-2009) = 1/x^2009 = 1/x².
   Since x³ = 1, we have x · x² = x³ = 1, so 1/x² = x.
   Therefore x^(-2009) = x.

5. Sum:
   x^2009 + x^(-2009) = x² + x.
   From the original equation x² + x + 1 = 0:
   x² + x = -1.

ANSWER: (A) −1

VERIFICATION:
Let x = ω = e^{2πi/3} = -1/2 + i√3/2.
x² = ω² = -1/2 - i√3/2.
x² + x = (-1/2 - i√3/2) + (-1/2 + i√3/2) = -1. ✓

Also verify: x² + x + 1 = -1 + 1 = 0. ✓
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 28px;
  margin-bottom: 24px;
}

.card-title {
  font-size: 1.3rem;
  font-weight: 700;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  width: 32px;
  height: 32px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.1rem;
  flex-shrink: 0;
}

.blue-icon { background: rgba(96,165,250,0.15); color: #60a5fa; }
.purple-icon { background: rgba(167,139,250,0.15); color: #a78bfa; }
.green-icon { background: rgba(52,211,153,0.15); color: #34d399; }
.pink-icon { background: rgba(244,114,182,0.15); color: #f472b6; }
.amber-icon { background: rgba(251,191,36,0.15); color: #fbbf24; }
.cyan-icon { background: rgba(34,211,238,0.15); color: #22d3ee; }

.problem-statement {
  background: linear-gradient(135deg, rgba(96,165,250,0.08), rgba(167,139,250,0.08));
  border: 1px solid rgba(96,165,250,0.25);
  border-radius: 12px;
  padding: 24px;
  font-size: 1.1rem;
  line-height: 1.8;
}

.options-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 10px;
  margin-top: 16px;
}

.option-item {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 8px;
  padding: 10px 16px;
  text-align: center;
  font-size: 1.05rem;
  transition: all 0.3s;
}

.option-item.correct {
  border-color: #34d399;
  background: rgba(52,211,153,0.1);
  color: #34d399;
  font-weight: 600;
}

.option-item.wrong {
  border-color: #f87171;
  background: rgba(248,113,113,0.1);
  color: #f87171;
  text-decoration: line-through;
}

.plan-steps {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.plan-step {
  display: flex;
  align-items: flex-start;
  gap: 14px;
  padding: 12px 16px;
  background: #0f172a;
  border-radius: 10px;
  border-left: 3px solid #60a5fa;
}

.plan-step-num {
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  flex-shrink: 0;
}

.collapsible-header {
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  user-select: none;
}

.collapsible-header:hover {
  opacity: 0.85;
}

.collapsible-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.4s ease, padding 0.3s ease;
}

.collapsible-content.open {
  max-height: 3000px;
  padding-top: 16px;
}

.arrow-indicator {
  font-size: 0.9rem;
  transition: transform 0.3s;
  color: #94a3b8;
}

.arrow-indicator.open {
  transform: rotate(180deg);
}

.theory-block {
  background: #0f172a;
  border-radius: 10px;
  padding: 20px;
  margin-top: 8px;
  border-left: 3px solid #a78bfa;
}

.theory-block p, .theory-block li {
  margin-bottom: 8px;
}

.theory-block ul {
  padding-left: 20px;
}

.step-section {
  border-left: 3px solid transparent;
  padding: 20px;
  margin-bottom: 20px;
  background: #0f172a;
  border-radius: 10px;
  position: relative;
}

.step-section.blue-border { border-left-color: #60a5fa; }
.step-section.purple-border { border-left-color: #a78bfa; }
.step-section.green-border { border-left-color: #34d399; }
.step-section.pink-border { border-left-color: #f472b6; }
.step-section.amber-border { border-left-color: #fbbf24; }
.step-section.cyan-border { border-left-color: #22d3ee; }

.step-label {
  font-size: 0.8rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  margin-bottom: 10px;
}

.step-label.blue { color: #60a5fa; }
.step-label.purple { color: #a78bfa; }
.step-label.green { color: #34d399; }
.step-label.pink { color: #f472b6; }
.step-label.amber { color: #fbbf24; }
.step-label.cyan { color: #22d3ee; }

.checkpoint {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.2);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 16px 0;
  font-size: 0.95rem;
}

.checkpoint-label {
  font-weight: 700;
  color: #60a5fa;
  margin-bottom: 4px;
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.insight-box {
  background: linear-gradient(135deg, rgba(167,139,250,0.1), rgba(244,114,182,0.1));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 12px;
  padding: 22px;
  margin: 16px 0;
}

.insight-box .insight-title {
  color: #a78bfa;
  font-weight: 700;
  font-size: 1.05rem;
  margin-bottom: 8px;
}

.final-answer {
  background: linear-gradient(135deg, rgba(52,211,153,0.12), rgba(74,222,128,0.12));
  border: 2px solid #34d399;
  border-radius: 14px;
  padding: 28px;
  text-align: center;
}

.final-answer .label {
  font-size: 0.85rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: #34d399;
  margin-bottom: 10px;
}

.final-answer .value {
  font-size: 1.8rem;
  font-weight: 800;
  color: #4ade80;
  line-height: 1.4;
}

.final-answer .explanation {
  color: #94a3b8;
  margin-top: 10px;
  font-size: 0.95rem;
}

.verification-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 12px;
}

.verification-table th,
.verification-table td {
  padding: 10px 14px;
  text-align: center;
  border-bottom: 1px solid #334155;
}

.verification-table th {
  color: #94a3b8;
  font-size: 0.85rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.verification-table tr:last-child td {
  border-bottom: none;
}

.badge-yes {
  display: inline-block;
  background: rgba(52,211,153,0.15);
  color: #34d399;
  padding: 2px 10px;
  border-radius: 6px;
  font-weight: 600;
  font-size: 0.85rem;
}

.badge-no {
  display: inline-block;
  background: rgba(248,113,113,0.15);
  color: #f87171;
  padding: 2px 10px;
  border-radius: 6px;
  font-weight: 600;
  font-size: 0.85rem;
}

canvas {
  width: 100%;
  border-radius: 12px;
  display: block;
  cursor: crosshair;
  touch-action: none;
}

.canvas-wrapper {
  position: relative;
  margin: 16px 0;
}

.canvas-controls {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 12px;
}

.canvas-btn {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 8px;
  padding: 8px 16px;
  color: #e2e8f0;
  cursor: pointer;
  font-size: 0.9rem;
  transition: all 0.2s;
  font-family: inherit;
}

.canvas-btn:hover {
  border-color: #60a5fa;
  color: #60a5fa;
}

.canvas-btn.active {
  background: rgba(96,165,250,0.15);
  border-color: #60a5fa;
  color: #60a5fa;
  font-weight: 600;
}

.canvas-legend {
  display: flex;
  flex-wrap: wrap;
  gap: 14px;
  margin-top: 10px;
  font-size: 0.85rem;
  color: #94a3b8;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 6px;
}

.legend-dot {
  width: 12px;
  height: 12px;
  border-radius: 3px;
  flex-shrink: 0;
}

.pitfall-item {
  padding: 14px 18px;
  background: #0f172a;
  border-radius: 10px;
  border-left: 3px solid #f87171;
  margin-bottom: 10px;
}

.pitfall-item .pitfall-title {
  color: #f87171;
  font-weight: 700;
  margin-bottom: 4px;
  font-size: 0.95rem;
}

.challenge-box {
  background: linear-gradient(135deg, rgba(251,191,36,0.08), rgba(244,114,182,0.08));
  border: 1px solid rgba(251,191,36,0.25);
  border-radius: 12px;
  padding: 22px;
}

.power-table {
  width: 100%;
  border-collapse: collapse;
  margin: 12px 0;
}

.power-table th,
.power-table td {
  padding: 8px 14px;
  text-align: center;
  border-bottom: 1px solid #334155;
}

.power-table th {
  color: #94a3b8;
  font-size: 0.85rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.power-table tr:last-child td {
  border-bottom: none;
}

.power-table tr.highlight td {
  background: rgba(96,165,250,0.08);
  color: #60a5fa;
  font-weight: 600;
}

@media (max-width: 700px) {
  body { padding: 10px; }
  .container { padding: 10px; }
  h1 { font-size: 1.6rem; }
  .card { padding: 18px; }
  .options-grid { grid-template-columns: repeat(3, 1fr); }
  .verification-table { font-size: 0.85rem; }
  .verification-table th, .verification-table td { padding: 6px 8px; }
  .final-answer .value { font-size: 1.4rem; }
  .power-table th, .power-table td { padding: 6px 8px; font-size: 0.85rem; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Vrednost izraza \(x^{2009} + x^{-2009}\)</h1>
  <p class="subtitle">ETF Beograd 2009 &mdash; Zadatak 17 &mdash; Kompleksni brojevi i koreni jedinice</p>

  <!-- Problem Statement -->
  <div class="card">
    <div class="card-title">
      <span class="icon blue-icon">?</span>
      Tekst zadatka
    </div>
    <div class="problem-statement">
      Ako je \(x^2 + x + 1 = 0\), tada je izraz \(x^{2009} + x^{-2009}\) jednak:
      <div class="options-grid" id="options-grid">
        <div class="option-item correct" data-val="A">(A) \(-1\)</div>
        <div class="option-item" data-val="B">(B) \(1\)</div>
        <div class="option-item" data-val="C">(C) \(x - 1\)</div>
        <div class="option-item" data-val="D">(D) \(x + 1\)</div>
        <div class="option-item" data-val="E">(E) \(0\)</div>
        <div class="option-item" data-val="N">(N) Ne znam</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <div class="card-title">
      <span class="icon purple-icon">P</span>
      Plan rešavanja
    </div>
    <div class="plan-steps">
      <div class="plan-step">
        <span class="plan-step-num">1</span>
        <span>Prepoznati vezu jednačine \(x^2 + x + 1 = 0\) sa trećim korenima jedinice</span>
      </div>
      <div class="plan-step">
        <span class="plan-step-num">2</span>
        <span>Dokazati da je \(x^3 = 1\) za svako rešenje date jednačine</span>
      </div>
      <div class="plan-step">
        <span class="plan-step-num">3</span>
        <span>Svesti \(x^{2009}\) i \(x^{-2009}\) na niže stepene pomoću ostatka pri deljenju sa 3</span>
      </div>
      <div class="plan-step">
        <span class="plan-step-num">4</span>
        <span>Iskoristiti polaznu jednačinu za izračunavanje konačnog rezultata</span>
      </div>
    </div>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <div class="collapsible-header" onclick="toggleCollapsible(this)">
      <div class="card-title" style="margin-bottom:0">
        <span class="icon amber-icon">T</span>
        Teorijski podsetnik
      </div>
      <span class="arrow-indicator">&#9660;</span>
    </div>
    <div class="collapsible-content">
      <div class="theory-block">
        <p><strong>Treći koreni jedinice:</strong></p>
        <p>Jednačina \(x^3 = 1\) ima tri rešenja u skupu kompleksnih brojeva:</p>
        \[x_1 = 1, \quad x_2 = \omega = e^{2\pi i/3} = -\frac{1}{2} + \frac{\sqrt{3}}{2}i, \quad x_3 = \omega^2 = e^{4\pi i/3} = -\frac{1}{2} - \frac{\sqrt{3}}{2}i\]
        <p style="margin-top:12px"><strong>Faktorizacija:</strong></p>
        \[x^3 - 1 = (x - 1)(x^2 + x + 1)\]
        <p>Dakle, jednačina \(x^2 + x + 1 = 0\) daje upravo dva <em>primitivna</em> treća korena jedinice (\(\omega\) i \(\omega^2\)).</p>
        <p style="margin-top:12px"><strong>Osnovna svojstva:</strong></p>
        <ul>
          <li>\(\omega^3 = 1\) &mdash; ciklično ponavljanje stepena</li>
          <li>\(1 + \omega + \omega^2 = 0\) &mdash; zbir svih trećih korena</li>
          <li>\(\omega \cdot \omega^2 = \omega^3 = 1\) &mdash; recipročna veza</li>
          <li>\(\overline{\omega} = \omega^2\) &mdash; konjugovani su jedan drugom</li>
        </ul>
        <p style="margin-top:12px"><strong>Redukcija eksponenta:</strong></p>
        <p>Pošto je \(x^3 = 1\), stepen \(x^n\) zavisi samo od ostatka \(n \mod 3\):</p>
        \[x^n = x^{n \bmod 3}\]
      </div>
    </div>
  </div>

  <!-- Visual Aid (Canvas) -->
  <div class="card">
    <div class="card-title">
      <span class="icon cyan-icon">G</span>
      Grafički prikaz &mdash; Koreni jedinice u kompleksnoj ravni
    </div>
    <p style="color:#94a3b8; margin-bottom:8px;">Interaktivni dijagram: kliknite na korene da vidite detalje. Prikazani su treći koreni jedinice na jediničnoj kružnici.</p>
    <div class="canvas-wrapper">
      <canvas id="mainCanvas" width="800" height="600"></canvas>
    </div>
    <div class="canvas-controls">
      <button class="canvas-btn active" onclick="setView(this, 'roots')">Koreni jedinice</button>
      <button class="canvas-btn" onclick="setView(this, 'powers')">Stepeni od \(\omega\)</button>
      <button class="canvas-btn" onclick="setView(this, 'sum')">Zbir \(x^2 + x\)</button>
    </div>
    <div class="canvas-legend">
      <div class="legend-item"><div class="legend-dot" style="background:#60a5fa;"></div>Jedinična kružnica</div>
      <div class="legend-item"><div class="legend-dot" style="background:#fbbf24;"></div>\(\omega\) (koren jednačine)</div>
      <div class="legend-item"><div class="legend-dot" style="background:#a78bfa;"></div>\(\omega^2\) (koren jednačine)</div>
      <div class="legend-item"><div class="legend-dot" style="background:#34d399;"></div>\(1\) (treći koren, nije rešenje)</div>
    </div>
  </div>

  <!-- Step-by-Step -->
  <div class="card">
    <div class="card-title">
      <span class="icon green-icon">R</span>
      Rešavanje korak po korak
    </div>

    <!-- Step 1 -->
    <div class="step-section blue-border">
      <div class="step-label blue">Korak 1 &mdash; Veza sa trećim korenima jedinice</div>
      <p>Polazimo od date jednačine:</p>
      \[x^2 + x + 1 = 0\]
      <p>Pomnožimo obe strane sa \((x - 1)\):</p>
      \[(x - 1)(x^2 + x + 1) = 0\]
      <p>Leva strana se faktoriše korišćenjem poznate formule za razliku kubova:</p>
      \[x^3 - 1 = 0\]
      <p>Dakle:</p>
      \[\boxed{x^3 = 1}\]
      <p style="margin-top:8px">Napomena: pošto \(x^2 + x + 1 = 0\) nema rešenje \(x = 1\) (jer bi bilo \(1 + 1 + 1 = 3 \neq 0\)), množenje sa \((x-1)\) ne uvodi lažna rešenja za naš problem.</p>
      <div class="checkpoint">
        <div class="checkpoint-label">Kontrolna tačka</div>
        Svako rešenje jednačine \(x^2 + x + 1 = 0\) zadovoljava \(x^3 = 1\). To je primitivni treći koren jedinice.
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-section purple-border">
      <div class="step-label purple">Korak 2 &mdash; Redukcija eksponenta 2009</div>
      <p>Pošto je \(x^3 = 1\), stepen \(x^n\) zavisi samo od ostatka pri deljenju \(n\) sa 3. Izračunajmo:</p>
      \[2009 = 3 \cdot 669 + 2\]
      <p>Dakle, \(2009 \bmod 3 = 2\), pa:</p>
      \[x^{2009} = x^{3 \cdot 669 + 2} = (x^3)^{669} \cdot x^2 = 1^{669} \cdot x^2 = x^2\]
      <div class="checkpoint">
        <div class="checkpoint-label">Kontrolna tačka</div>
        \(x^{2009} = x^2\) &mdash; visok stepen se svodi na kvadrat zahvaljujući svojstvu \(x^3 = 1\).
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step-section green-border">
      <div class="step-label green">Korak 3 &mdash; Redukcija eksponenta \(-2009\)</div>
      <p>Slično, za negativan stepen:</p>
      \[x^{-2009} = \frac{1}{x^{2009}} = \frac{1}{x^2}\]
      <p>Treba nam \(\frac{1}{x^2}\). Pošto je \(x^3 = 1\), važi \(x \cdot x^2 = x^3 = 1\), što znači:</p>
      \[\frac{1}{x^2} = x\]
      <p>(jer je \(x\) recipročno od \(x^2\), budući da im je proizvod jednak 1).</p>
      <p style="margin-top:10px">Dakle:</p>
      \[\boxed{x^{-2009} = x}\]
      <div class="checkpoint">
        <div class="checkpoint-label">Kontrolna tačka</div>
        Koristimo \(x^3 = 1\) da bismo izrazili recipročnu vrednost: \(1/x^2 = x^{3-2} = x\).
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step-section pink-border">
      <div class="step-label pink">Korak 4 &mdash; Izračunavanje konačnog zbira</div>
      <p>Sada sabiramo:</p>
      \[x^{2009} + x^{-2009} = x^2 + x\]
      <p>Iz polazne jednačine \(x^2 + x + 1 = 0\) direktno sledi:</p>
      \[x^2 + x = -1\]
      <p>Dakle:</p>
      \[\boxed{x^{2009} + x^{-2009} = -1}\]
    </div>

    <!-- Verification Step -->
    <div class="step-section amber-border">
      <div class="step-label amber">Korak 5 &mdash; Numerička verifikacija</div>
      <p>Proverimo koristeći konkretnu vrednost \(x = \omega = -\frac{1}{2} + \frac{\sqrt{3}}{2}i\):</p>
      \[x^2 = \omega^2 = -\frac{1}{2} - \frac{\sqrt{3}}{2}i\]
      <p>Zbir:</p>
      \[x^2 + x = \left(-\frac{1}{2} - \frac{\sqrt{3}}{2}i\right) + \left(-\frac{1}{2} + \frac{\sqrt{3}}{2}i\right) = -1\]
      <p>Imaginarni delovi se ponište, a realni delovi daju \(-\frac{1}{2} - \frac{1}{2} = -1\). Potvrda!</p>
      <div class="checkpoint">
        <div class="checkpoint-label">Kontrolna tačka</div>
        Numerička provera sa \(\omega = e^{2\pi i/3}\) potvrdjuje algebarski rezultat: \(x^{2009} + x^{-2009} = -1\).
      </div>
    </div>
  </div>

  <!-- Powers Table -->
  <div class="card">
    <div class="card-title">
      <span class="icon cyan-icon">C</span>
      Ciklična priroda stepena &mdash; Tabela
    </div>
    <p style="color:#94a3b8; margin-bottom:12px;">Stepeni broja \(x\) (gde je \(x^3 = 1\)) se ciklično ponavljaju sa periodom 3:</p>
    <table class="power-table">
      <thead>
        <tr>
          <th>Stepen \(n\)</th>
          <th>\(n \bmod 3\)</th>
          <th>\(x^n\)</th>
          <th>Pojednostavljen oblik</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>0</td>
          <td>0</td>
          <td>\(x^0\)</td>
          <td>\(1\)</td>
        </tr>
        <tr>
          <td>1</td>
          <td>1</td>
          <td>\(x^1\)</td>
          <td>\(x\)</td>
        </tr>
        <tr class="highlight">
          <td>2</td>
          <td>2</td>
          <td>\(x^2\)</td>
          <td>\(-x - 1\)</td>
        </tr>
        <tr>
          <td>3</td>
          <td>0</td>
          <td>\(x^3\)</td>
          <td>\(1\)</td>
        </tr>
        <tr>
          <td>4</td>
          <td>1</td>
          <td>\(x^4\)</td>
          <td>\(x\)</td>
        </tr>
        <tr class="highlight">
          <td>5</td>
          <td>2</td>
          <td>\(x^5\)</td>
          <td>\(-x - 1\)</td>
        </tr>
        <tr>
          <td>\(\vdots\)</td>
          <td>\(\vdots\)</td>
          <td>\(\vdots\)</td>
          <td>\(\vdots\)</td>
        </tr>
        <tr class="highlight">
          <td>2009</td>
          <td>2</td>
          <td>\(x^{2009}\)</td>
          <td>\(x^2 = -x - 1\)</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Key Insight -->
  <div class="card">
    <div class="insight-box">
      <div class="insight-title">Ključni uvid</div>
      <p>Jednačina \(x^2 + x + 1 = 0\) je ekvivalentna tome da je \(x\) <em>primitivni treći koren jedinice</em>. To znači da važi \(x^3 = 1\), pa se svaki stepen \(x^n\) svodi na \(x^{n \bmod 3}\). Ovo transformiše naizgled komplikovan izraz \(x^{2009} + x^{-2009}\) u jednostavan \(x^2 + x = -1\), što je direktna posledica polazne jednačine.</p>
    </div>
  </div>

  <!-- Final Answer -->
  <div class="card">
    <div class="final-answer">
      <div class="label">Konačan odgovor</div>
      <div class="value">(A) \(-1\)</div>
      <div class="explanation">
        \(x^{2009} + x^{-2009} = x^2 + x = -1\), jer je \(x^3 = 1\) i \(x^2 + x + 1 = 0\).
      </div>
    </div>
    <div style="margin-top:18px;">
      <p style="color:#94a3b8; font-size:0.95rem;"><strong>Pregled svih ponudjenih odgovora:</strong></p>
      <table class="verification-table" style="margin-top:8px;">
        <thead>
          <tr>
            <th>Opcija</th>
            <th>Vrednost</th>
            <th>Tačno?</th>
          </tr>
        </thead>
        <tbody>
          <tr style="background:rgba(52,211,153,0.06)">
            <td>(A)</td>
            <td>\(-1\)</td>
            <td><span class="badge-yes">Da</span></td>
          </tr>
          <tr>
            <td>(B)</td>
            <td>\(1\)</td>
            <td><span class="badge-no">Ne</span></td>
          </tr>
          <tr>
            <td>(C)</td>
            <td>\(x - 1\)</td>
            <td><span class="badge-no">Ne</span></td>
          </tr>
          <tr>
            <td>(D)</td>
            <td>\(x + 1\)</td>
            <td><span class="badge-no">Ne</span></td>
          </tr>
          <tr>
            <td>(E)</td>
            <td>\(0\)</td>
            <td><span class="badge-no">Ne</span></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <div class="card-title">
      <span class="icon pink-icon">!</span>
      Najčešće greške
    </div>
    <div class="pitfall-item">
      <div class="pitfall-title">Zaboravljanje da je \(x^3 = 1\)</div>
      <p>Bez prepoznavanja veze sa korenima jedinice, zadatak deluje nerešiv. Ključ je množenje jednačine sa \((x-1)\) da se dobije \(x^3 - 1 = 0\).</p>
    </div>
    <div class="pitfall-item">
      <div class="pitfall-title">Pogrešan ostatak pri deljenju</div>
      <p>Greška u računanju \(2009 \div 3\) vodi do pogrešnog rezultata. Treba proveriti: \(3 \times 669 = 2007\), pa je ostatak \(2009 - 2007 = 2\).</p>
    </div>
    <div class="pitfall-item">
      <div class="pitfall-title">Greška pri računanju \(x^{-2009}\)</div>
      <p>Učenici često zaborave da iz \(x^3 = 1\) sledi \(1/x^2 = x\). Alternativno: \(x^{-2009} = x^{-2009 + 3 \cdot 670} = x^{2010 - 2009} = x^1 = x\).</p>
    </div>
    <div class="pitfall-item">
      <div class="pitfall-title">Odabir opcije (D) \(x + 1\)</div>
      <p>Iz \(x^2 + x + 1 = 0\) sledi \(x^2 = -x - 1\), pa se može pogrešno zapisati samo \(x^{2009} = -x - 1\) i zaboraviti dodati \(x^{-2009} = x\).</p>
    </div>
  </div>

  <!-- Optional Challenge -->
  <div class="card">
    <div class="card-title">
      <span class="icon amber-icon">*</span>
      Bonus izazov
    </div>
    <div class="challenge-box">
      <p><strong>Pitanje:</strong> Ako je \(x^2 + x + 1 = 0\), izračunaj vrednost izraza \(x^{2009} + x^{2010} + x^{2011}\).</p>
      <p style="margin-top:10px; color:#94a3b8"><em>Savet: Koristi \(x^3 = 1\) i sumu \(1 + x + x^2 = 0\).</em></p>
      <div class="collapsible-header" onclick="toggleCollapsible(this)" style="margin-top:14px">
        <span style="color:#fbbf24; font-weight:600; cursor:pointer;">Prikaži odgovor</span>
        <span class="arrow-indicator">&#9660;</span>
      </div>
      <div class="collapsible-content">
        <div class="theory-block" style="border-left-color:#fbbf24; margin-top:12px">
          <p>Svedimo eksponente:</p>
          <p>\(2009 \bmod 3 = 2\), \(2010 \bmod 3 = 0\), \(2011 \bmod 3 = 1\).</p>
          <p>Dakle:</p>
          \[x^{2009} + x^{2010} + x^{2011} = x^2 + x^0 + x^1 = x^2 + 1 + x\]
          <p>Ali iz polazne jednačine \(x^2 + x + 1 = 0\), pa:</p>
          \[\boxed{x^{2009} + x^{2010} + x^{2011} = 0}\]
        </div>
      </div>
    </div>
  </div>

</div>

<script>
(function() {
  /* --- Collapsible sections --- */
  window.toggleCollapsible = function(header) {
    var content = header.nextElementSibling;
    while (content && !content.classList.contains('collapsible-content')) {
      content = content.nextElementSibling;
    }
    if (!content) return;
    content.classList.toggle('open');
    var arrow = header.querySelector('.arrow-indicator');
    if (arrow) arrow.classList.toggle('open');
  };

  /* --- Canvas visualization --- */
  var canvas = document.getElementById('mainCanvas');
  var ctx = canvas.getContext('2d');
  var dpr = window.devicePixelRatio || 1;
  var W, H;
  var currentView = 'roots';
  var mouseX = -1, mouseY = -1;
  var hoveredRoot = -1;
  var animPhase = 0;
  var animId = null;

  /* Roots of unity */
  var roots = [
    { re: 1, im: 0, label: '1', color: '#34d399', desc: 'x = 1 (nije rešenje x\u00B2+x+1=0)' },
    { re: -0.5, im: Math.sqrt(3)/2, label: '\u03C9', color: '#fbbf24', desc: 'x = \u03C9 = -1/2 + \u221A3/2 \u00B7 i' },
    { re: -0.5, im: -Math.sqrt(3)/2, label: '\u03C9\u00B2', color: '#a78bfa', desc: 'x = \u03C9\u00B2 = -1/2 - \u221A3/2 \u00B7 i' }
  ];

  /* Coordinate system centered at origin, range [-1.8, 1.8] */
  var viewRange = 1.8;

  function resize() {
    var rect = canvas.getBoundingClientRect();
    W = rect.width;
    H = rect.height;
    canvas.width = W * dpr;
    canvas.height = H * dpr;
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
  }

  function toScreen(re, im) {
    var cx = W / 2;
    var cy = H / 2;
    var scale = Math.min(W, H) / (2 * viewRange);
    return [cx + re * scale, cy - im * scale];
  }

  function toWorld(sx, sy) {
    var cx = W / 2;
    var cy = H / 2;
    var scale = Math.min(W, H) / (2 * viewRange);
    return [(sx - cx) / scale, (cy - sy) / scale];
  }

  function drawGrid() {
    var cx = W / 2;
    var cy = H / 2;
    var scale = Math.min(W, H) / (2 * viewRange);

    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;

    for (var g = -1; g <= 1; g++) {
      if (g === 0) continue;
      var p = toScreen(g, 0);
      ctx.beginPath();
      ctx.moveTo(p[0], 0);
      ctx.lineTo(p[0], H);
      ctx.stroke();

      p = toScreen(0, g);
      ctx.beginPath();
      ctx.moveTo(0, p[1]);
      ctx.lineTo(W, p[1]);
      ctx.stroke();
    }
  }

  function drawAxes() {
    var cx = W / 2;
    var cy = H / 2;

    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;

    /* Real axis */
    ctx.beginPath();
    ctx.moveTo(0, cy);
    ctx.lineTo(W, cy);
    ctx.stroke();

    /* Imaginary axis */
    ctx.beginPath();
    ctx.moveTo(cx, 0);
    ctx.lineTo(cx, H);
    ctx.stroke();

    /* Labels */
    ctx.fillStyle = '#64748b';
    ctx.font = '12px system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';

    var ticks = [-1, 1];
    for (var i = 0; i < ticks.length; i++) {
      var p = toScreen(ticks[i], 0);
      ctx.fillText(ticks[i].toString(), p[0], cy + 8);

      p = toScreen(0, ticks[i]);
      ctx.textAlign = 'right';
      ctx.textBaseline = 'middle';
      ctx.fillText(ticks[i] + 'i', cx - 8, p[1]);
      ctx.textAlign = 'center';
      ctx.textBaseline = 'top';
    }

    /* Axis labels */
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 13px system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.textBaseline = 'bottom';
    ctx.fillText('Re', W - 30, cy - 8);
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    ctx.fillText('Im', cx + 16, 10);
  }

  function drawUnitCircle() {
    var center = toScreen(0, 0);
    var edgeP = toScreen(1, 0);
    var radius = edgeP[0] - center[0];

    ctx.strokeStyle = 'rgba(96, 165, 250, 0.3)';
    ctx.lineWidth = 2;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.arc(center[0], center[1], radius, 0, Math.PI * 2);
    ctx.stroke();
    ctx.setLineDash([]);

    /* Fill */
    ctx.fillStyle = 'rgba(96, 165, 250, 0.04)';
    ctx.beginPath();
    ctx.arc(center[0], center[1], radius, 0, Math.PI * 2);
    ctx.fill();
  }

  function drawRoot(idx, pulseAmount) {
    var root = roots[idx];
    var p = toScreen(root.re, root.im);
    var baseSize = 7;
    var size = baseSize + (pulseAmount || 0);

    /* Glow */
    var grad = ctx.createRadialGradient(p[0], p[1], 0, p[0], p[1], 25 + (pulseAmount || 0) * 2);
    grad.addColorStop(0, root.color + '66');
    grad.addColorStop(1, root.color + '00');
    ctx.fillStyle = grad;
    ctx.beginPath();
    ctx.arc(p[0], p[1], 25 + (pulseAmount || 0) * 2, 0, Math.PI * 2);
    ctx.fill();

    /* Dot */
    ctx.fillStyle = root.color;
    ctx.beginPath();
    ctx.arc(p[0], p[1], size, 0, Math.PI * 2);
    ctx.fill();
    ctx.strokeStyle = '#0f172a';
    ctx.lineWidth = 2;
    ctx.stroke();

    /* Label */
    ctx.fillStyle = root.color;
    ctx.font = 'bold 14px system-ui, sans-serif';
    var offsetX = root.re > 0 ? 14 : -14;
    var offsetY = root.im >= 0 ? -16 : 20;
    ctx.textAlign = root.re > 0 ? 'left' : 'right';
    ctx.textBaseline = root.im >= 0 ? 'bottom' : 'top';
    ctx.fillText(root.label, p[0] + offsetX, p[1] + offsetY);
  }

  function drawLineFromOrigin(re, im, color, dashed) {
    var o = toScreen(0, 0);
    var p = toScreen(re, im);
    ctx.strokeStyle = color;
    ctx.lineWidth = 1.5;
    if (dashed) ctx.setLineDash([4, 4]);
    else ctx.setLineDash([]);
    ctx.beginPath();
    ctx.moveTo(o[0], o[1]);
    ctx.lineTo(p[0], p[1]);
    ctx.stroke();
    ctx.setLineDash([]);
  }

  function drawAngleArc(re, im, color) {
    var o = toScreen(0, 0);
    var edgeP = toScreen(1, 0);
    var arcRadius = (edgeP[0] - o[0]) * 0.2;
    var angle = Math.atan2(im, re);
    if (angle < 0) angle += 2 * Math.PI;

    ctx.strokeStyle = color + '88';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.arc(o[0], o[1], arcRadius, 0, -angle, true);
    ctx.stroke();
  }

  function drawPowerAnnotations() {
    /* Show how omega^1 -> omega^2 -> omega^3=1 -> cycle */
    var arrowPts = [
      { from: 1, to: 2, label: '\u00D7\u03C9' },
      { from: 2, to: 0, label: '\u00D7\u03C9' },
      { from: 0, to: 1, label: '\u00D7\u03C9' }
    ];

    var center = toScreen(0, 0);
    var edgeP = toScreen(1, 0);
    var radius = (edgeP[0] - center[0]) * 1.2;

    ctx.font = 'bold 12px system-ui, sans-serif';
    ctx.fillStyle = '#f472b6';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';

    for (var i = 0; i < arrowPts.length; i++) {
      var fromR = roots[arrowPts[i].from];
      var toR = roots[arrowPts[i].to];
      var midRe = (fromR.re + toR.re) / 2;
      var midIm = (fromR.im + toR.im) / 2;
      /* Push outward a bit */
      var dist = Math.sqrt(midRe * midRe + midIm * midIm);
      if (dist < 0.01) { midRe = 0.5; midIm = 0.3; }
      var normRe = midRe / (dist || 1);
      var normIm = midIm / (dist || 1);
      var labelRe = midRe + normRe * 0.4;
      var labelIm = midIm + normIm * 0.4;

      var p = toScreen(labelRe, labelIm);
      ctx.fillText(arrowPts[i].label, p[0], p[1]);

      /* Draw curved arrow */
      var fromP = toScreen(fromR.re, fromR.im);
      var toP = toScreen(toR.re, toR.im);
      var cp = toScreen(labelRe * 1.1, labelIm * 1.1);

      ctx.strokeStyle = '#f472b6';
      ctx.lineWidth = 1.5;
      ctx.setLineDash([3, 3]);
      ctx.beginPath();
      ctx.moveTo(fromP[0], fromP[1]);
      ctx.quadraticCurveTo(cp[0], cp[1], toP[0], toP[1]);
      ctx.stroke();
      ctx.setLineDash([]);

      /* Arrowhead */
      var dx = toP[0] - cp[0];
      var dy = toP[1] - cp[1];
      var len = Math.sqrt(dx*dx + dy*dy);
      dx /= len; dy /= len;
      ctx.fillStyle = '#f472b6';
      ctx.beginPath();
      ctx.moveTo(toP[0], toP[1]);
      ctx.lineTo(toP[0] - dx*8 + dy*4, toP[1] - dy*8 - dx*4);
      ctx.lineTo(toP[0] - dx*8 - dy*4, toP[1] - dy*8 + dx*4);
      ctx.closePath();
      ctx.fill();
    }
  }

  function drawSumVisualization() {
    /* Show x^2 + x as vector sum */
    var omega = roots[1]; /* omega */
    var omega2 = roots[2]; /* omega^2 = x^2 */

    /* x^{2009} = x^2 = omega^2 */
    /* x^{-2009} = x = omega */
    /* Draw vectors: omega^2 from origin, then omega from omega^2 tip */

    /* Vector 1: x^2009 = omega^2 */
    drawLineFromOrigin(omega2.re, omega2.im, '#a78bfa', false);

    /* Vector 2: x^(-2009) = omega, starting from omega^2 */
    var tip2 = toScreen(omega2.re, omega2.im);
    var endP = toScreen(omega2.re + omega.re, omega2.im + omega.im);
    ctx.strokeStyle = '#fbbf24';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(tip2[0], tip2[1]);
    ctx.lineTo(endP[0], endP[1]);
    ctx.stroke();

    /* The sum should be at (-1, 0) */
    var sumRe = omega2.re + omega.re;
    var sumIm = omega2.im + omega.im;
    var sumP = toScreen(sumRe, sumIm);

    /* Draw result vector from origin to sum */
    ctx.strokeStyle = '#f87171';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    var o = toScreen(0, 0);
    ctx.moveTo(o[0], o[1]);
    ctx.lineTo(sumP[0], sumP[1]);
    ctx.stroke();

    /* Arrowhead for result */
    var dx = sumP[0] - o[0];
    var dy = sumP[1] - o[1];
    var len = Math.sqrt(dx*dx + dy*dy);
    dx /= len; dy /= len;
    ctx.fillStyle = '#f87171';
    ctx.beginPath();
    ctx.moveTo(sumP[0], sumP[1]);
    ctx.lineTo(sumP[0] - dx*10 + dy*5, sumP[1] - dy*10 - dx*5);
    ctx.lineTo(sumP[0] - dx*10 - dy*5, sumP[1] - dy*10 + dx*5);
    ctx.closePath();
    ctx.fill();

    /* Point at the sum */
    var grad = ctx.createRadialGradient(sumP[0], sumP[1], 0, sumP[0], sumP[1], 20);
    grad.addColorStop(0, 'rgba(248,113,113,0.5)');
    grad.addColorStop(1, 'rgba(248,113,113,0)');
    ctx.fillStyle = grad;
    ctx.beginPath();
    ctx.arc(sumP[0], sumP[1], 20, 0, Math.PI * 2);
    ctx.fill();

    ctx.fillStyle = '#f87171';
    ctx.beginPath();
    ctx.arc(sumP[0], sumP[1], 6, 0, Math.PI * 2);
    ctx.fill();
    ctx.strokeStyle = '#0f172a';
    ctx.lineWidth = 2;
    ctx.stroke();

    /* Labels */
    ctx.font = 'bold 12px system-ui, sans-serif';
    ctx.textAlign = 'right';
    ctx.textBaseline = 'top';

    var v1mid = toScreen(omega2.re / 2 - 0.1, omega2.im / 2);
    ctx.fillStyle = '#a78bfa';
    ctx.fillText('x\u00B2\u2070\u2070\u2079 = x\u00B2', v1mid[0] - 8, v1mid[1]);

    var v2mid = toScreen(omega2.re + omega.re / 2, omega2.im + omega.im / 2);
    ctx.fillStyle = '#fbbf24';
    ctx.textAlign = 'left';
    ctx.fillText('x\u207B\u00B2\u2070\u2070\u2079 = x', v2mid[0] + 8, v2mid[1] - 14);

    ctx.fillStyle = '#f87171';
    ctx.font = 'bold 14px system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    ctx.fillText('Zbir = \u22121', sumP[0], sumP[1] + 12);
  }

  function drawHoverInfo() {
    if (mouseX < 0 || mouseY < 0) return;
    var w = toWorld(mouseX, mouseY);

    /* Check if hovering near a root */
    hoveredRoot = -1;
    for (var i = 0; i < roots.length; i++) {
      var dx = w[0] - roots[i].re;
      var dy = w[1] - roots[i].im;
      if (Math.sqrt(dx*dx + dy*dy) < 0.15) {
        hoveredRoot = i;
        break;
      }
    }

    if (hoveredRoot >= 0) {
      var root = roots[hoveredRoot];
      var p = toScreen(root.re, root.im);

      /* Info box */
      var boxW = 260, boxH = 50;
      var bx = p[0] + 20;
      var by = p[1] - 60;
      if (bx + boxW > W) bx = p[0] - boxW - 20;
      if (by < 0) by = p[1] + 20;

      ctx.fillStyle = 'rgba(15,23,42,0.95)';
      ctx.strokeStyle = root.color;
      ctx.lineWidth = 1.5;
      roundRect(ctx, bx, by, boxW, boxH, 8);
      ctx.fill();
      ctx.stroke();

      ctx.font = '12px system-ui, sans-serif';
      ctx.fillStyle = '#e2e8f0';
      ctx.textAlign = 'left';
      ctx.textBaseline = 'top';
      ctx.fillText(root.desc, bx + 10, by + 10);

      var isRoot = (hoveredRoot === 1 || hoveredRoot === 2);
      ctx.fillStyle = isRoot ? '#34d399' : '#f87171';
      ctx.fillText(isRoot ? 'Rešenje jednačine x\u00B2+x+1=0' : 'Nije rešenje (1+1+1=3\u22600)', bx + 10, by + 28);
    }

    /* Crosshair with world coords */
    ctx.strokeStyle = 'rgba(148,163,184,0.15)';
    ctx.lineWidth = 1;
    ctx.setLineDash([4, 4]);
    ctx.beginPath();
    ctx.moveTo(mouseX, 0);
    ctx.lineTo(mouseX, H);
    ctx.moveTo(0, mouseY);
    ctx.lineTo(W, mouseY);
    ctx.stroke();
    ctx.setLineDash([]);
  }

  function roundRect(ctx, x, y, w, h, r) {
    ctx.beginPath();
    ctx.moveTo(x + r, y);
    ctx.lineTo(x + w - r, y);
    ctx.quadraticCurveTo(x + w, y, x + w, y + r);
    ctx.lineTo(x + w, y + h - r);
    ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
    ctx.lineTo(x + r, y + h);
    ctx.quadraticCurveTo(x, y + h, x, y + h - r);
    ctx.lineTo(x, y + r);
    ctx.quadraticCurveTo(x, y, x + r, y);
    ctx.closePath();
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    drawGrid();
    drawUnitCircle();
    drawAxes();

    /* View-specific content */
    if (currentView === 'roots') {
      /* Lines from origin to each root */
      for (var i = 0; i < roots.length; i++) {
        drawLineFromOrigin(roots[i].re, roots[i].im, roots[i].color + '55', true);
        drawAngleArc(roots[i].re, roots[i].im, roots[i].color);
      }

      /* Angle labels */
      ctx.font = '11px system-ui, sans-serif';
      ctx.fillStyle = '#94a3b8';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      var arcLabelR = 0.35;
      var p0 = toScreen(arcLabelR * Math.cos(Math.PI / 6), arcLabelR * Math.sin(Math.PI / 6));
      ctx.fillText('0\u00B0', p0[0] + 10, p0[1] + 10);

      var p120 = toScreen(arcLabelR * Math.cos(Math.PI * 2 / 3 / 2 + 0.1), arcLabelR * Math.sin(Math.PI * 2 / 3 / 2 + 0.1));
      ctx.fillStyle = '#fbbf24';
      ctx.fillText('120\u00B0', p120[0] - 4, p120[1]);

      var p240 = toScreen(arcLabelR * Math.cos(-Math.PI * 2 / 3 / 2 - 0.1), arcLabelR * Math.sin(-Math.PI * 2 / 3 / 2 - 0.1));
      ctx.fillStyle = '#a78bfa';
      ctx.fillText('240\u00B0', p240[0] - 4, p240[1]);

      /* Draw roots */
      for (var i = 0; i < roots.length; i++) {
        var pulse = (hoveredRoot === i) ? 3 : 0;
        drawRoot(i, pulse);
      }

      /* Title */
      ctx.fillStyle = '#e2e8f0';
      ctx.font = 'bold 15px system-ui, sans-serif';
      ctx.textAlign = 'left';
      ctx.textBaseline = 'top';
      ctx.fillText('Tri treceg korena jedinice', 14, 14);
      ctx.font = '12px system-ui, sans-serif';
      ctx.fillStyle = '#94a3b8';
      ctx.fillText('na jedinicnoj kruznici |x| = 1', 14, 34);
    }
    else if (currentView === 'powers') {
      for (var i = 0; i < roots.length; i++) {
        drawLineFromOrigin(roots[i].re, roots[i].im, roots[i].color + '55', true);
        drawRoot(i, 0);
      }
      drawPowerAnnotations();

      ctx.fillStyle = '#e2e8f0';
      ctx.font = 'bold 15px system-ui, sans-serif';
      ctx.textAlign = 'left';
      ctx.textBaseline = 'top';
      ctx.fillText('Ciklicni stepeni: \u03C9 \u2192 \u03C9\u00B2 \u2192 1 \u2192 \u03C9 \u2192 ...', 14, 14);
      ctx.font = '12px system-ui, sans-serif';
      ctx.fillStyle = '#94a3b8';
      ctx.fillText('Mnozenje sa \u03C9 je rotacija za 120\u00B0', 14, 34);
    }
    else if (currentView === 'sum') {
      for (var i = 0; i < roots.length; i++) {
        drawRoot(i, 0);
      }
      drawSumVisualization();

      ctx.fillStyle = '#e2e8f0';
      ctx.font = 'bold 15px system-ui, sans-serif';
      ctx.textAlign = 'left';
      ctx.textBaseline = 'top';
      ctx.fillText('Vektorski zbir: x\u00B2 + x = \u22121', 14, 14);
      ctx.font = '12px system-ui, sans-serif';
      ctx.fillStyle = '#94a3b8';
      ctx.fillText('x\u00B2\u2070\u2070\u2079 + x\u207B\u00B2\u2070\u2070\u2079 = x\u00B2 + x = \u22121', 14, 34);
    }

    drawHoverInfo();
  }

  window.setView = function(btn, view) {
    currentView = view;
    var btns = document.querySelectorAll('.canvas-btn');
    btns.forEach(function(b) { b.classList.remove('active'); });
    btn.classList.add('active');
    draw();
  };

  /* Mouse tracking */
  canvas.addEventListener('mousemove', function(e) {
    var rect = canvas.getBoundingClientRect();
    mouseX = e.clientX - rect.left;
    mouseY = e.clientY - rect.top;
    draw();
  });

  canvas.addEventListener('mouseleave', function() {
    mouseX = -1;
    mouseY = -1;
    hoveredRoot = -1;
    draw();
  });

  /* Touch */
  canvas.addEventListener('touchmove', function(e) {
    e.preventDefault();
    var rect = canvas.getBoundingClientRect();
    var touch = e.touches[0];
    mouseX = touch.clientX - rect.left;
    mouseY = touch.clientY - rect.top;
    draw();
  }, { passive: false });

  canvas.addEventListener('touchend', function() {
    mouseX = -1;
    mouseY = -1;
    hoveredRoot = -1;
    draw();
  });

  /* Init */
  function init() {
    resize();
    draw();
  }

  window.addEventListener('resize', function() { resize(); draw(); });
  window.addEventListener('load', init);
  if (document.readyState === 'complete') init();
  else document.addEventListener('DOMContentLoaded', init);
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{"title":"Vrednost izraza x^2009 + x^(-2009) za koren jednačine x² + x + 1 = 0","subject":"math","unit":"algebra","topic_tags":["kompleksni brojevi","koreni jedinice","stepeni","ciklične grupe","algebarske jednačine"]}
BRAINSPARK_META-->