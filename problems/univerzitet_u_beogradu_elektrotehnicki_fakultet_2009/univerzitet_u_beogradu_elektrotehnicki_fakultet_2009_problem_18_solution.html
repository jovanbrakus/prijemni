<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zapremina valjka upisanog u kupu sa najvećim omotačem</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
PROBLEM:
U pravu kupu upisan je valjak sa najvećim omotačem. Ako je zapremina kupe V,
tada je zapremina tog valjka jednaka:
(A) 2V/3   (B) V/4   (C) 3V/8   (D) 3V/16   (E) 3V/4   (N) Ne znam

SOLUTION:

1. Setup:
   Let cone have height H and base radius R.
   Let inscribed cylinder have height h and radius r.
   The cylinder sits on the base of the cone with its top circle touching the cone's lateral surface.

2. Similar triangles relation:
   By similar triangles in the axial cross-section:
   r/R = (H - h)/H => r = R(1 - h/H) = R(H - h)/H

3. Lateral surface area of cylinder (omotač):
   S = 2πrh = 2πR·h·(H - h)/H = (2πR/H)·(hH - h²)

4. Maximize S with respect to h:
   dS/dh = (2πR/H)·(H - 2h) = 0
   H - 2h = 0
   h = H/2

   d²S/dh² = (2πR/H)·(-2) < 0  => maximum confirmed

5. Corresponding r:
   r = R(H - H/2)/H = R·(H/2)/H = R/2

6. Volume of the optimal cylinder:
   V_cyl = πr²h = π(R/2)²(H/2) = π·R²/4·H/2 = πR²H/8

7. Volume of the cone:
   V = (1/3)πR²H

8. Express V_cyl in terms of V:
   πR²H = 3V
   V_cyl = πR²H/8 = 3V/8

ANSWER: (C) 3V/8

VERIFICATION:
- h = H/2 is in valid range (0, H)
- r = R/2 is in valid range (0, R)
- The second derivative is negative, confirming maximum
- V_cyl/V = (πR²H/8)/(πR²H/3) = 3/8 ✓
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 28px;
  margin-bottom: 24px;
}

.card-title {
  font-size: 1.3rem;
  font-weight: 700;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  width: 32px;
  height: 32px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.1rem;
  flex-shrink: 0;
}

.blue-icon { background: rgba(96,165,250,0.15); color: #60a5fa; }
.purple-icon { background: rgba(167,139,250,0.15); color: #a78bfa; }
.green-icon { background: rgba(52,211,153,0.15); color: #34d399; }
.pink-icon { background: rgba(244,114,182,0.15); color: #f472b6; }
.amber-icon { background: rgba(251,191,36,0.15); color: #fbbf24; }
.cyan-icon { background: rgba(34,211,238,0.15); color: #22d3ee; }

.problem-statement {
  background: linear-gradient(135deg, rgba(96,165,250,0.08), rgba(167,139,250,0.08));
  border: 1px solid rgba(96,165,250,0.25);
  border-radius: 12px;
  padding: 24px;
  font-size: 1.1rem;
  line-height: 1.8;
}

.options-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 10px;
  margin-top: 16px;
}

.option-item {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 8px;
  padding: 10px 16px;
  text-align: center;
  font-size: 1.05rem;
  transition: all 0.3s;
}

.option-item.correct {
  border-color: #34d399;
  background: rgba(52,211,153,0.1);
  color: #34d399;
  font-weight: 600;
}

.option-item.wrong {
  border-color: #475569;
  background: rgba(71,85,105,0.1);
  color: #64748b;
}

.plan-steps {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.plan-step {
  display: flex;
  align-items: flex-start;
  gap: 14px;
  padding: 12px 16px;
  background: #0f172a;
  border-radius: 10px;
  border-left: 3px solid #60a5fa;
}

.plan-step-num {
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  flex-shrink: 0;
}

.collapsible-header {
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  user-select: none;
}

.collapsible-header:hover {
  opacity: 0.85;
}

.collapsible-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.4s ease, padding 0.3s ease;
}

.collapsible-content.open {
  max-height: 3000px;
  padding-top: 16px;
}

.arrow-indicator {
  font-size: 0.9rem;
  transition: transform 0.3s;
  color: #94a3b8;
}

.arrow-indicator.open {
  transform: rotate(180deg);
}

.theory-block {
  background: #0f172a;
  border-radius: 10px;
  padding: 20px;
  margin-top: 8px;
  border-left: 3px solid #a78bfa;
}

.theory-block p, .theory-block li {
  margin-bottom: 8px;
}

.theory-block ul {
  padding-left: 20px;
}

.step-section {
  border-left: 3px solid transparent;
  padding: 20px;
  margin-bottom: 20px;
  background: #0f172a;
  border-radius: 10px;
  position: relative;
}

.step-section.blue-border { border-left-color: #60a5fa; }
.step-section.purple-border { border-left-color: #a78bfa; }
.step-section.green-border { border-left-color: #34d399; }
.step-section.pink-border { border-left-color: #f472b6; }
.step-section.amber-border { border-left-color: #fbbf24; }
.step-section.cyan-border { border-left-color: #22d3ee; }

.step-label {
  font-size: 0.8rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  margin-bottom: 10px;
}

.step-label.blue { color: #60a5fa; }
.step-label.purple { color: #a78bfa; }
.step-label.green { color: #34d399; }
.step-label.pink { color: #f472b6; }
.step-label.amber { color: #fbbf24; }
.step-label.cyan { color: #22d3ee; }

.checkpoint {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.2);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 16px 0;
  font-size: 0.95rem;
}

.checkpoint-label {
  font-weight: 700;
  color: #60a5fa;
  margin-bottom: 4px;
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.insight-box {
  background: linear-gradient(135deg, rgba(167,139,250,0.1), rgba(244,114,182,0.1));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 12px;
  padding: 22px;
  margin: 16px 0;
}

.insight-box .insight-title {
  color: #a78bfa;
  font-weight: 700;
  font-size: 1.05rem;
  margin-bottom: 8px;
}

.final-answer {
  background: linear-gradient(135deg, rgba(52,211,153,0.12), rgba(74,222,128,0.12));
  border: 2px solid #34d399;
  border-radius: 14px;
  padding: 28px;
  text-align: center;
}

.final-answer .label {
  font-size: 0.85rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: #34d399;
  margin-bottom: 10px;
}

.final-answer .value {
  font-size: 1.8rem;
  font-weight: 800;
  color: #4ade80;
  line-height: 1.4;
}

.final-answer .explanation {
  color: #94a3b8;
  margin-top: 10px;
  font-size: 0.95rem;
}

canvas {
  width: 100%;
  border-radius: 12px;
  display: block;
  cursor: crosshair;
  touch-action: none;
}

.canvas-wrapper {
  position: relative;
  margin: 16px 0;
}

.canvas-controls {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 12px;
}

.canvas-btn {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 8px;
  padding: 8px 16px;
  color: #e2e8f0;
  cursor: pointer;
  font-size: 0.9rem;
  transition: all 0.2s;
  font-family: inherit;
}

.canvas-btn:hover {
  border-color: #60a5fa;
  color: #60a5fa;
}

.canvas-btn.active {
  background: rgba(96,165,250,0.15);
  border-color: #60a5fa;
  color: #60a5fa;
  font-weight: 600;
}

.canvas-legend {
  display: flex;
  flex-wrap: wrap;
  gap: 14px;
  margin-top: 10px;
  font-size: 0.85rem;
  color: #94a3b8;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 6px;
}

.legend-dot {
  width: 12px;
  height: 12px;
  border-radius: 3px;
  flex-shrink: 0;
}

.pitfall-item {
  padding: 14px 18px;
  background: #0f172a;
  border-radius: 10px;
  border-left: 3px solid #f87171;
  margin-bottom: 10px;
}

.pitfall-item .pitfall-title {
  color: #f87171;
  font-weight: 700;
  margin-bottom: 4px;
  font-size: 0.95rem;
}

.challenge-box {
  background: linear-gradient(135deg, rgba(251,191,36,0.08), rgba(244,114,182,0.08));
  border: 1px solid rgba(251,191,36,0.25);
  border-radius: 12px;
  padding: 22px;
}

.slider-container {
  display: flex;
  align-items: center;
  gap: 12px;
  margin: 10px 0;
}

.slider-container input[type="range"] {
  flex: 1;
  accent-color: #60a5fa;
  height: 6px;
}

.slider-label {
  font-size: 0.9rem;
  color: #94a3b8;
  min-width: 90px;
}

.slider-value {
  font-weight: 600;
  color: #60a5fa;
  min-width: 60px;
  text-align: right;
  font-family: 'Courier New', monospace;
}

@media (max-width: 700px) {
  body { padding: 10px; }
  .container { padding: 10px; }
  h1 { font-size: 1.6rem; }
  .card { padding: 18px; }
  .options-grid { grid-template-columns: repeat(3, 1fr); }
  .final-answer .value { font-size: 1.4rem; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Zapremina valjka upisanog u kupu sa najvećim omotačem</h1>
  <p class="subtitle">Optimizacija &mdash; Kupa, valjak, izvod, ekstremna vrednost</p>

  <!-- Problem Statement -->
  <div class="card">
    <div class="card-title">
      <span class="icon blue-icon">?</span>
      Tekst zadatka
    </div>
    <div class="problem-statement">
      U pravu kupu upisan je valjak sa <strong>najvećim omotačem</strong>. Ako je zapremina kupe \(V\), tada je zapremina tog valjka jednaka:
      <div class="options-grid" id="options-grid">
        <div class="option-item" data-val="A">(A) \(\dfrac{2V}{3}\)</div>
        <div class="option-item" data-val="B">(B) \(\dfrac{V}{4}\)</div>
        <div class="option-item correct" data-val="C">(C) \(\dfrac{3V}{8}\)</div>
        <div class="option-item" data-val="D">(D) \(\dfrac{3V}{16}\)</div>
        <div class="option-item" data-val="E">(E) \(\dfrac{3V}{4}\)</div>
        <div class="option-item" data-val="N" style="color:#64748b">(N) Ne znam</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <div class="card-title">
      <span class="icon purple-icon">P</span>
      Plan rešavanja
    </div>
    <div class="plan-steps">
      <div class="plan-step">
        <span class="plan-step-num">1</span>
        <span>Postaviti oznake: kupa visine \(H\), poluprečnika osnove \(R\); valjak visine \(h\), poluprečnika \(r\)</span>
      </div>
      <div class="plan-step">
        <span class="plan-step-num">2</span>
        <span>Iz sličnosti trouglova izraziti \(r\) preko \(h\) (ili obrnuto)</span>
      </div>
      <div class="plan-step">
        <span class="plan-step-num">3</span>
        <span>Napisati funkciju omotača valjka \(S(h) = 2\pi r h\) i naći njen maksimum</span>
      </div>
      <div class="plan-step">
        <span class="plan-step-num">4</span>
        <span>Izračunati zapreminu valjka za optimalno \(h\) i izraziti je preko \(V\)</span>
      </div>
    </div>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <div class="collapsible-header" onclick="toggleCollapsible(this)">
      <div class="card-title" style="margin-bottom:0">
        <span class="icon amber-icon">T</span>
        Teorijski podsetnik
      </div>
      <span class="arrow-indicator">&#9660;</span>
    </div>
    <div class="collapsible-content">
      <div class="theory-block">
        <p><strong>Prava kupa</strong> je obrtno telo nastalo rotacijom pravouglog trougla oko jedne katete.</p>
        <ul>
          <li>Zapremina kupe: \(V_{\text{kupa}} = \dfrac{1}{3}\pi R^2 H\)</li>
          <li>Zapremina valjka: \(V_{\text{valj}} = \pi r^2 h\)</li>
          <li><strong>Omotač valjka</strong> (bočna površina, bez osnova): \(S = 2\pi r h\)</li>
        </ul>
        <p style="margin-top:12px"><strong>Sličnost trouglova u aksijalnom preseku:</strong></p>
        <p>Kada je valjak upisan u kupu (osnova valjka leži na osnovi kupe), u aksijalnom preseku nastaje pravougaonik upisan u jednakokraki trougao. Gornja ivica pravougaonika dodiruje bočnu stranicu trougla. Iz proporcionalnosti:</p>
        \[\frac{r}{R} = \frac{H - h}{H}\]
        <p style="margin-top:12px"><strong>Optimizacija izvodom:</strong></p>
        <p>Da bismo našli maksimum funkcije \(f(x)\), tražimo gde je \(f'(x) = 0\) i proveravamo da li je to zaista maksimum (pomoću drugog izvoda ili analize znaka).</p>
      </div>
    </div>
  </div>

  <!-- Visual Aid (Canvas) -->
  <div class="card">
    <div class="card-title">
      <span class="icon cyan-icon">G</span>
      Grafički prikaz &mdash; Aksijalni presek kupe sa upisanim valjkom
    </div>
    <p style="color:#94a3b8; margin-bottom:8px;">Interaktivni dijagram: pomerajte klizač da vidite kako se menjaju dimenzije valjka. Optimalni položaj je označen zelenom bojom.</p>
    <div class="canvas-wrapper">
      <canvas id="mainCanvas" width="800" height="600"></canvas>
    </div>
    <div class="slider-container">
      <span class="slider-label">Visina \(h\):</span>
      <input type="range" id="hSlider" min="0" max="100" step="1" value="50">
      <span class="slider-value" id="hSliderVal">H/2</span>
    </div>
    <div class="canvas-legend">
      <div class="legend-item"><div class="legend-dot" style="background:#60a5fa;"></div>Kupa (aksijalni presek)</div>
      <div class="legend-item"><div class="legend-dot" style="background:#fbbf24;"></div>Valjak (aksijalni presek)</div>
      <div class="legend-item"><div class="legend-dot" style="background:#34d399;"></div>Optimalni položaj</div>
      <div class="legend-item"><div class="legend-dot" style="background:#f472b6;"></div>Omotač (graf S(h))</div>
    </div>
  </div>

  <!-- Step-by-Step -->
  <div class="card">
    <div class="card-title">
      <span class="icon green-icon">R</span>
      Rešavanje korak po korak
    </div>

    <!-- Step 1 -->
    <div class="step-section blue-border">
      <div class="step-label blue">Korak 1 &mdash; Oznake i veza između dimenzija</div>
      <p>Neka je kupa visine \(H\) i poluprečnika osnove \(R\). U nju je upisan valjak visine \(h\) i poluprečnika \(r\), tako da osnova valjka leži na osnovi kupe.</p>
      <p style="margin-top:8px">Posmatrajmo aksijalni presek (presek koji prolazi kroz osu kupe). Kupa daje jednakokraki trougao, a valjak pravougaonik upisan u njega. Iz sličnosti trouglova:</p>
      \[\frac{r}{R} = \frac{H - h}{H} \quad \Longrightarrow \quad r = R\left(1 - \frac{h}{H}\right)\]
      <div class="checkpoint">
        <div class="checkpoint-label">Kontrolna tačka</div>
        Za \(h = 0\): \(r = R\) (valjak degenerisan u disk). Za \(h = H\): \(r = 0\) (valjak degenerisan u segment ose). Sve logično.
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-section purple-border">
      <div class="step-label purple">Korak 2 &mdash; Funkcija omotača valjka</div>
      <p>Omotač (bočna površina) valjka je:</p>
      \[S = 2\pi r h\]
      <p>Zamenimo \(r = R\!\left(1 - \dfrac{h}{H}\right)\):</p>
      \[S(h) = 2\pi R \cdot h \cdot \left(1 - \frac{h}{H}\right) = \frac{2\pi R}{H}\left(Hh - h^2\right)\]
      <p style="margin-top:8px">Ovo je kvadratna funkcija po \(h\) sa negativnim koeficijentom uz \(h^2\), dakle ima <strong>maksimum</strong>.</p>
    </div>

    <!-- Step 3 -->
    <div class="step-section green-border">
      <div class="step-label green">Korak 3 &mdash; Nalaženje maksimuma izvodom</div>
      <p>Izvod po \(h\):</p>
      \[\frac{dS}{dh} = \frac{2\pi R}{H}(H - 2h)\]
      <p>Izjednačimo sa nulom:</p>
      \[H - 2h = 0 \quad \Longrightarrow \quad \boxed{h = \frac{H}{2}}\]
      <p style="margin-top:8px">Odgovarajući poluprečnik:</p>
      \[r = R\left(1 - \frac{H/2}{H}\right) = R \cdot \frac{1}{2} = \boxed{\frac{R}{2}}\]
      <div class="checkpoint">
        <div class="checkpoint-label">Provera drugog izvoda</div>
        \(\dfrac{d^2S}{dh^2} = \dfrac{2\pi R}{H} \cdot (-2) = -\dfrac{4\pi R}{H} < 0\) &mdash; potvrđen je maksimum.
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step-section pink-border">
      <div class="step-label pink">Korak 4 &mdash; Zapremina optimalnog valjka</div>
      <p>Za \(h = \dfrac{H}{2}\) i \(r = \dfrac{R}{2}\):</p>
      \[V_{\text{valj}} = \pi r^2 h = \pi \left(\frac{R}{2}\right)^2 \cdot \frac{H}{2} = \pi \cdot \frac{R^2}{4} \cdot \frac{H}{2} = \frac{\pi R^2 H}{8}\]
    </div>

    <!-- Step 5 -->
    <div class="step-section amber-border">
      <div class="step-label amber">Korak 5 &mdash; Izražavanje preko zapremine kupe V</div>
      <p>Zapremina kupe je:</p>
      \[V = \frac{1}{3}\pi R^2 H \quad \Longrightarrow \quad \pi R^2 H = 3V\]
      <p>Zamenom u izraz za zapreminu valjka:</p>
      \[V_{\text{valj}} = \frac{\pi R^2 H}{8} = \frac{3V}{8}\]
      <div class="checkpoint">
        <div class="checkpoint-label">Kontrolna tačka</div>
        Odnos \(\dfrac{V_{\text{valj}}}{V} = \dfrac{3}{8} = 0{,}375\), što znači da valjak zauzima 37,5% zapremine kupe. To je razumno &mdash; manje od polovine, ali značajan deo.
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="card">
    <div class="insight-box">
      <div class="insight-title">Ključni uvid</div>
      <p>Zadatak traži valjak sa <strong>najvećim omotačem</strong>, ne sa najvećom zapreminom! Ovo je suštinski bitno &mdash; da smo tražili valjak sa najvećom zapreminom, dobili bismo drugačije dimenzije (\(h = H/3\), \(r = 2R/3\)) i drugačiji rezultat (\(V_{\text{valj}} = 4V/9\)). Ovde optimizujemo omotač \(S = 2\pi rh\), što daje \(h = H/2\) i \(r = R/2\).</p>
    </div>
  </div>

  <!-- Final Answer -->
  <div class="card">
    <div class="final-answer">
      <div class="label">Konačan odgovor</div>
      <div class="value">(C) \(\dfrac{3V}{8}\)</div>
      <div class="explanation">
        Valjak sa najvećim omotačem upisan u kupu ima visinu \(h = H/2\) i poluprečnik \(r = R/2\). Njegova zapremina je \(\dfrac{3V}{8}\).
      </div>
    </div>
    <div class="options-grid" style="margin-top:16px;">
      <div class="option-item wrong" data-val="A">(A) \(\dfrac{2V}{3}\)</div>
      <div class="option-item wrong" data-val="B">(B) \(\dfrac{V}{4}\)</div>
      <div class="option-item correct" data-val="C">(C) \(\dfrac{3V}{8}\)</div>
      <div class="option-item wrong" data-val="D">(D) \(\dfrac{3V}{16}\)</div>
      <div class="option-item wrong" data-val="E">(E) \(\dfrac{3V}{4}\)</div>
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <div class="card-title">
      <span class="icon pink-icon">!</span>
      Najčešće greške
    </div>
    <div class="pitfall-item">
      <div class="pitfall-title">Optimizacija pogrešne veličine</div>
      <p>Mnogi studenti automatski traže valjak sa najvećom <em>zapreminom</em> umesto sa najvećim <em>omotačem</em>. Pažljivo pročitajte šta se traži! Maksimizacija zapremine daje \(h = H/3\), dok maksimizacija omotača daje \(h = H/2\).</p>
    </div>
    <div class="pitfall-item">
      <div class="pitfall-title">Pogrešna veza iz sličnosti trouglova</div>
      <p>Česta greška je pisanje \(r/R = h/H\) umesto ispravnog \(r/R = (H-h)/H\). Zapamtite: kad valjak raste u visinu, njegov poluprečnik se <em>smanjuje</em> (jer se kupa sužava ka vrhu).</p>
    </div>
    <div class="pitfall-item">
      <div class="pitfall-title">Zaboravljanje da je omotač samo bočna površina</div>
      <p>Omotač valjka je \(2\pi rh\), <strong>bez</strong> osnova. Nemojte koristiti punu površinu \(2\pi r(r+h)\).</p>
    </div>
  </div>

  <!-- Optional Challenge -->
  <div class="card">
    <div class="card-title">
      <span class="icon amber-icon">*</span>
      Bonus izazov
    </div>
    <div class="challenge-box">
      <p><strong>Pitanje:</strong> Odredite zapreminu valjka <em>sa najvećom zapreminom</em> upisanog u istu kupu zapremine \(V\). Uporedite sa rezultatom ovog zadatka.</p>
      <p style="margin-top:10px; color:#94a3b8"><em>Savet: Maksimizujte \(V_{\text{valj}} = \pi r^2 h\) uz istu vezu iz sličnosti trouglova. Izvedite \(\pi r^2 h\) kao funkciju po \(h\) i nađite maksimum.</em></p>
      <div class="collapsible-header" onclick="toggleCollapsible(this)" style="margin-top:14px">
        <span style="color:#fbbf24; font-weight:600; cursor:pointer;">Prikaži odgovor</span>
        <span class="arrow-indicator">&#9660;</span>
      </div>
      <div class="collapsible-content">
        <div class="theory-block" style="border-left-color:#fbbf24; margin-top:12px">
          <p>Zapremina valjka kao funkcija \(h\):</p>
          \[V_{\text{valj}}(h) = \pi R^2 \left(1 - \frac{h}{H}\right)^2 h = \frac{\pi R^2}{H^2}(H - h)^2 h\]
          <p>Izvod:</p>
          \[\frac{dV_{\text{valj}}}{dh} = \frac{\pi R^2}{H^2}\left[2(H-h)(-1) \cdot h + (H-h)^2\right] = \frac{\pi R^2}{H^2}(H-h)(H - 3h)\]
          <p>Jednačimo sa nulom: \(h = H\) (trivijalno) ili \(h = H/3\).</p>
          <p>Za \(h = H/3\): \(r = R(1 - 1/3) = 2R/3\).</p>
          \[V_{\text{valj, max}} = \pi \left(\frac{2R}{3}\right)^2 \cdot \frac{H}{3} = \frac{4\pi R^2 H}{27} = \frac{4}{9}V\]
          <p style="margin-top:8px">Dakle, valjak sa najvećom zapreminom zauzima \(\dfrac{4}{9}V \approx 44{,}4\%\) zapremine kupe, dok valjak sa najvećim omotačem zauzima \(\dfrac{3}{8}V = 37{,}5\%\).</p>
        </div>
      </div>
    </div>
  </div>

</div>

<script>
(function() {
  /* --- Collapsible sections --- */
  window.toggleCollapsible = function(header) {
    var content = header.nextElementSibling;
    while (content && !content.classList.contains('collapsible-content')) {
      content = content.nextElementSibling;
    }
    if (!content) return;
    content.classList.toggle('open');
    var arrow = header.querySelector('.arrow-indicator');
    if (arrow) arrow.classList.toggle('open');
  };

  /* --- Canvas visualization --- */
  var canvas = document.getElementById('mainCanvas');
  var ctx = canvas.getContext('2d');
  var dpr = window.devicePixelRatio || 1;
  var W, H;

  /* Cone parameters (for drawing) */
  var coneH = 1.0;
  var coneR = 0.5;

  /* Current slider value: h as fraction of coneH (0..1) */
  var hFrac = 0.5;

  function resize() {
    var rect = canvas.getBoundingClientRect();
    W = rect.width;
    H = rect.height;
    canvas.width = W * dpr;
    canvas.height = H * dpr;
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
  }

  /* Drawing coordinates: we'll use a split layout
     Left side: axial cross-section of cone+cylinder
     Right side: graph of S(h) */

  var margin = 40;

  function drawAll() {
    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    var splitX = W * 0.5;

    drawCrossSection(margin, margin, splitX - margin * 1.5, H - margin * 2);
    drawGraph(splitX + margin * 0.5, margin, W - splitX - margin * 1.5, H - margin * 2);
  }

  function drawCrossSection(ox, oy, w, h) {
    /* Draw axial cross-section of cone with inscribed cylinder */
    /* Cone: triangle with apex at top-center, base at bottom */
    var cx = ox + w / 2; /* center x */
    var baseY = oy + h;  /* bottom */
    var apexY = oy;      /* top */
    var baseHalfW = w * 0.4; /* half-width of cone base */

    /* Cone triangle */
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(cx, apexY);
    ctx.lineTo(cx - baseHalfW, baseY);
    ctx.lineTo(cx + baseHalfW, baseY);
    ctx.closePath();
    ctx.stroke();

    /* Fill cone lightly */
    ctx.fillStyle = 'rgba(96,165,250,0.06)';
    ctx.fill();

    /* Cylinder: rectangle inscribed in the triangle */
    var cylH = hFrac; /* fraction of cone height */
    var cylR = 1 - cylH; /* fraction of cone radius (from similar triangles) */

    var cylTopY = baseY - cylH * (baseY - apexY);
    var cylHalfW = cylR * baseHalfW;

    /* Determine if this is the optimal */
    var isOptimal = Math.abs(hFrac - 0.5) < 0.02;

    var cylColor = isOptimal ? '#34d399' : '#fbbf24';
    var cylFill = isOptimal ? 'rgba(52,211,153,0.12)' : 'rgba(251,191,36,0.08)';

    /* Draw cylinder rectangle */
    if (cylH > 0.01 && cylR > 0.01) {
      ctx.fillStyle = cylFill;
      ctx.fillRect(cx - cylHalfW, cylTopY, cylHalfW * 2, baseY - cylTopY);
      ctx.strokeStyle = cylColor;
      ctx.lineWidth = 2.5;
      ctx.strokeRect(cx - cylHalfW, cylTopY, cylHalfW * 2, baseY - cylTopY);

      /* Dashed lines to show the similar triangles */
      ctx.strokeStyle = 'rgba(148,163,184,0.3)';
      ctx.lineWidth = 1;
      ctx.setLineDash([4, 4]);
      /* Horizontal from cylinder top to cone sides */
      ctx.beginPath();
      ctx.moveTo(cx - baseHalfW, cylTopY);
      ctx.lineTo(cx + baseHalfW, cylTopY);
      ctx.stroke();
      ctx.setLineDash([]);
    }

    /* Dimension labels */
    ctx.font = 'bold 13px system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';

    /* Cone height H - on the left side */
    ctx.fillStyle = '#60a5fa';
    ctx.save();
    ctx.translate(ox + 8, (apexY + baseY) / 2);
    ctx.rotate(-Math.PI / 2);
    ctx.fillText('H', 0, 0);
    ctx.restore();

    /* Cone radius R */
    ctx.fillStyle = '#60a5fa';
    ctx.textBaseline = 'top';
    ctx.fillText('R', cx + baseHalfW / 2, baseY + 8);

    if (cylH > 0.05 && cylR > 0.05) {
      /* Cylinder height h */
      ctx.fillStyle = cylColor;
      ctx.textAlign = 'left';
      ctx.textBaseline = 'middle';
      var hMid = (cylTopY + baseY) / 2;
      ctx.fillText('h', cx + cylHalfW + 10, hMid);

      /* Cylinder radius r */
      ctx.textAlign = 'center';
      ctx.textBaseline = 'bottom';
      ctx.fillText('r', cx - cylHalfW / 2, cylTopY - 6);

      /* Show ratio values */
      ctx.font = '12px system-ui, sans-serif';
      ctx.fillStyle = '#94a3b8';
      ctx.textAlign = 'left';
      ctx.textBaseline = 'top';
      var infoX = ox + 4;
      var infoY = baseY + 26;
      ctx.fillText('h/H = ' + hFrac.toFixed(2).replace('.', ','), infoX, infoY);
      ctx.fillText('r/R = ' + cylR.toFixed(2).replace('.', ','), infoX, infoY + 18);

      /* Lateral surface area (relative) */
      var sRel = 2 * cylR * hFrac; /* S / (π R H) */
      ctx.fillText('S ~ ' + sRel.toFixed(3).replace('.', ','), infoX, infoY + 36);

      /* Volume (relative to V) */
      var vRel = 3 * cylR * cylR * hFrac; /* V_valj / V = 3 r² h / (R² H) */
      ctx.fillStyle = cylColor;
      ctx.font = 'bold 12px system-ui, sans-serif';
      ctx.fillText('V_valj/V = ' + vRel.toFixed(3).replace('.', ','), infoX, infoY + 56);
    }

    /* Title */
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 14px system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'bottom';
    ctx.fillText('Aksijalni presek', cx, apexY - 8);

    /* Apex label */
    ctx.fillStyle = '#94a3b8';
    ctx.font = '11px system-ui, sans-serif';
    ctx.textAlign = 'right';
    ctx.textBaseline = 'bottom';
    ctx.fillText('vrh', cx - 8, apexY + 2);
  }

  function drawGraph(ox, oy, w, h) {
    /* Graph of S(h) = (2πR/H) * h(H - h) which is proportional to h(1-h/H) */
    /* We'll plot S_normalized = h_frac * (1 - h_frac) on [0, 1] */
    /* Max at h_frac = 0.5, S_max = 0.25 */

    var gLeft = ox + 30;
    var gRight = ox + w - 10;
    var gTop = oy + 30;
    var gBot = oy + h - 30;
    var gW = gRight - gLeft;
    var gH = gBot - gTop;

    /* Axes */
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(gLeft, gBot);
    ctx.lineTo(gRight, gBot);
    ctx.moveTo(gLeft, gBot);
    ctx.lineTo(gLeft, gTop);
    ctx.stroke();

    /* Axis labels */
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 12px system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    ctx.fillText('h', (gLeft + gRight) / 2, gBot + 14);

    ctx.save();
    ctx.translate(gLeft - 20, (gTop + gBot) / 2);
    ctx.rotate(-Math.PI / 2);
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText('S(h)', 0, 0);
    ctx.restore();

    /* Tick marks on h axis */
    ctx.fillStyle = '#64748b';
    ctx.font = '10px system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    var ticks = [0, 0.25, 0.5, 0.75, 1.0];
    var tickLabels = ['0', 'H/4', 'H/2', '3H/4', 'H'];
    for (var i = 0; i < ticks.length; i++) {
      var tx = gLeft + ticks[i] * gW;
      ctx.beginPath();
      ctx.moveTo(tx, gBot);
      ctx.lineTo(tx, gBot + 4);
      ctx.stroke();
      ctx.fillText(tickLabels[i], tx, gBot + 5);
    }

    /* Plot the curve S = h(1-h) normalized so max = 1 */
    /* S_norm = 4 * hf * (1 - hf) to scale max to 1 */
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    for (var px = 0; px <= gW; px++) {
      var hf = px / gW;
      var sn = 4 * hf * (1 - hf); /* normalized to [0, 1] */
      var sy = gBot - sn * gH * 0.9;
      if (px === 0) ctx.moveTo(gLeft + px, sy);
      else ctx.lineTo(gLeft + px, sy);
    }
    ctx.stroke();

    /* Mark the current position */
    var curX = gLeft + hFrac * gW;
    var curS = 4 * hFrac * (1 - hFrac);
    var curY = gBot - curS * gH * 0.9;

    var isOptimal = Math.abs(hFrac - 0.5) < 0.02;
    var dotColor = isOptimal ? '#34d399' : '#fbbf24';

    /* Dashed lines to axes */
    ctx.strokeStyle = 'rgba(148,163,184,0.25)';
    ctx.lineWidth = 1;
    ctx.setLineDash([4, 4]);
    ctx.beginPath();
    ctx.moveTo(curX, curY);
    ctx.lineTo(curX, gBot);
    ctx.moveTo(curX, curY);
    ctx.lineTo(gLeft, curY);
    ctx.stroke();
    ctx.setLineDash([]);

    /* Dot */
    var grad = ctx.createRadialGradient(curX, curY, 0, curX, curY, 14);
    grad.addColorStop(0, dotColor === '#34d399' ? 'rgba(52,211,153,0.4)' : 'rgba(251,191,36,0.4)');
    grad.addColorStop(1, 'rgba(0,0,0,0)');
    ctx.fillStyle = grad;
    ctx.beginPath();
    ctx.arc(curX, curY, 14, 0, Math.PI * 2);
    ctx.fill();

    ctx.fillStyle = dotColor;
    ctx.beginPath();
    ctx.arc(curX, curY, 5, 0, Math.PI * 2);
    ctx.fill();

    /* Mark the maximum point always */
    if (!isOptimal) {
      var maxX = gLeft + 0.5 * gW;
      var maxY = gBot - 1.0 * gH * 0.9;
      ctx.fillStyle = 'rgba(52,211,153,0.3)';
      ctx.beginPath();
      ctx.arc(maxX, maxY, 4, 0, Math.PI * 2);
      ctx.fill();
      ctx.fillStyle = '#34d399';
      ctx.font = '10px system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'bottom';
      ctx.fillText('max', maxX, maxY - 6);
    }

    /* Label current point */
    ctx.fillStyle = dotColor;
    ctx.font = 'bold 11px system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.textBaseline = 'bottom';
    var labelText = isOptimal ? 'MAKSIMUM!' : 'S(h)';
    ctx.fillText(labelText, curX + 10, curY - 4);

    /* Title */
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 14px system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'bottom';
    ctx.fillText('Graf omotača S(h)', (gLeft + gRight) / 2, gTop - 8);

    /* Also draw the volume graph lightly for comparison */
    ctx.strokeStyle = 'rgba(96,165,250,0.3)';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    /* V_norm = (27/4) * hf * (1 - hf)^2, scaled so max = 1 at hf = 1/3 */
    for (var px = 0; px <= gW; px++) {
      var hf = px / gW;
      var vn = (27 / 4) * hf * (1 - hf) * (1 - hf); /* max = 1 at hf=1/3 */
      var sy = gBot - vn * gH * 0.9;
      if (px === 0) ctx.moveTo(gLeft + px, sy);
      else ctx.lineTo(gLeft + px, sy);
    }
    ctx.stroke();
    ctx.setLineDash([]);

    /* Legend in graph area */
    ctx.font = '10px system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.textBaseline = 'top';
    /* S legend */
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(gLeft + 10, gTop + 6);
    ctx.lineTo(gLeft + 30, gTop + 6);
    ctx.stroke();
    ctx.fillStyle = '#f472b6';
    ctx.fillText('Omotač S(h)', gLeft + 34, gTop + 1);
    /* V legend */
    ctx.strokeStyle = 'rgba(96,165,250,0.5)';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.moveTo(gLeft + 10, gTop + 22);
    ctx.lineTo(gLeft + 30, gTop + 22);
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = 'rgba(96,165,250,0.6)';
    ctx.fillText('Zapremina V(h)', gLeft + 34, gTop + 17);
  }

  /* --- Slider --- */
  var slider = document.getElementById('hSlider');
  slider.addEventListener('input', function() {
    hFrac = parseInt(this.value) / 100;
    var label = document.getElementById('hSliderVal');
    if (Math.abs(hFrac - 0.5) < 0.02) {
      label.textContent = 'H/2';
      label.style.color = '#34d399';
    } else if (Math.abs(hFrac - 1/3) < 0.02) {
      label.textContent = 'H/3';
      label.style.color = '#60a5fa';
    } else {
      label.textContent = (hFrac).toFixed(2).replace('.', ',') + 'H';
      label.style.color = '#60a5fa';
    }
    drawAll();
  });

  /* --- Init --- */
  function init() {
    resize();
    drawAll();
  }

  window.addEventListener('resize', function() { resize(); drawAll(); });
  window.addEventListener('load', init);
  if (document.readyState === 'complete') init();
  else document.addEventListener('DOMContentLoaded', init);
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{"title":"Zapremina valjka upisanog u kupu sa najvećim omotačem","subject":"math","unit":"geometry","topic_tags":["optimizacija","kupa","valjak","izvod","ekstremna vrednost","sličnost trouglova","zapremina"]}
BRAINSPARK_META-->