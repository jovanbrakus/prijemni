<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Povr≈°ina kocke preko dijagonale prostora</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
Problem: Ako je D du≈æina dijagonale kocke, tada je njena povr≈°ina jednaka?
Ponuƒëeni odgovori: (A) 2D¬≤  (B) (1/3)D¬≤  (C) (1/2)D¬≤  (D) 6D¬≤  (E) 4D¬≤

Re≈°enje:

Neka je stranica kocke a.

Korak 1: Dijagonala stranice (face diagonal)
  Dijagonala jedne stranice kocke (kvadrata) je d_s = a*sqrt(2)

Korak 2: Dijagonala prostora (space diagonal)
  Dijagonala prostora kocke se izraƒçunava pomoƒáu Pitagorine teoreme u 3D:
  D¬≤ = a¬≤ + a¬≤ + a¬≤  = 3a¬≤
  Dakle: D = a*sqrt(3)

Korak 3: Izrazimo a¬≤ preko D
  Iz D¬≤ = 3a¬≤ sledi:
  a¬≤ = D¬≤/3

Korak 4: Povr≈°ina kocke
  Kocka ima 6 jednakih stranica (kvadrata).
  Povr≈°ina jedne stranice = a¬≤
  Ukupna povr≈°ina: P = 6a¬≤

Korak 5: Zamena
  P = 6 * (D¬≤/3) = 6D¬≤/3 = 2D¬≤

Odgovor: (A) 2D¬≤

Provera: Ako a = 1, onda D = sqrt(3), D¬≤ = 3, P = 6*1 = 6, i 2D¬≤ = 2*3 = 6. ‚úì
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card h2 .icon {
  font-size: 1.5rem;
}

.highlight-box {
  background: rgba(96, 165, 250, 0.08);
  border-left: 4px solid #60a5fa;
  padding: 16px 20px;
  border-radius: 0 12px 12px 0;
  margin: 12px 0;
  font-size: 1.08rem;
}

.options-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
  gap: 10px;
  margin-top: 16px;
}

.option {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 12px 16px;
  text-align: center;
  font-size: 1.05rem;
  transition: all 0.3s;
}

.option.correct {
  border-color: #34d399;
  background: rgba(52, 211, 153, 0.1);
  color: #34d399;
  font-weight: 700;
}

.plan-list {
  list-style: none;
  padding: 0;
}

.plan-list li {
  padding: 8px 0;
  padding-left: 28px;
  position: relative;
  color: #94a3b8;
}

.plan-list li::before {
  content: attr(data-num);
  position: absolute;
  left: 0;
  top: 8px;
  width: 20px;
  height: 20px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.72rem;
  font-weight: 700;
  color: #0f172a;
  line-height: 20px;
  text-align: center;
}

details {
  margin-top: 8px;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  padding: 8px 0;
  user-select: none;
}

details summary:hover {
  color: #c4b5fd;
}

details[open] summary {
  margin-bottom: 12px;
}

.formula-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
}

.formula-card {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 16px;
}

.formula-card .label {
  color: #94a3b8;
  font-size: 0.88rem;
  margin-bottom: 6px;
}

.formula-card .formula {
  font-size: 1.1rem;
}

.canvas-wrapper {
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 16px 0;
}

canvas {
  border-radius: 12px;
  background: #0f172a;
  max-width: 100%;
  touch-action: none;
}

.step {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  align-items: flex-start;
}

.step-badge {
  min-width: 36px;
  height: 36px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: 1rem;
  color: #0f172a;
  flex-shrink: 0;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  color: #e2e8f0;
  font-size: 1.1rem;
  margin-bottom: 6px;
}

.step-content p {
  color: #94a3b8;
  margin-bottom: 8px;
}

.math-block {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 16px 20px;
  margin: 10px 0;
  overflow-x: auto;
}

.checkpoint {
  background: rgba(167, 139, 250, 0.08);
  border: 1px dashed #a78bfa;
  border-radius: 10px;
  padding: 14px 18px;
  margin: 14px 0;
  color: #c4b5fd;
  font-size: 0.95rem;
}

.checkpoint strong {
  color: #a78bfa;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.1), rgba(167, 139, 250, 0.1));
  border: 1px solid rgba(167, 139, 250, 0.3);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.insight-box h2 {
  color: #a78bfa;
  margin-bottom: 12px;
}

.final-answer {
  text-align: center;
  padding: 30px;
}

.final-answer .answer-label {
  color: #94a3b8;
  font-size: 1rem;
  margin-bottom: 8px;
  text-transform: uppercase;
  letter-spacing: 2px;
}

.final-answer .answer-value {
  font-size: 2.5rem;
  font-weight: 800;
  color: #34d399;
  margin-bottom: 16px;
}

.final-answer .answer-letter {
  display: inline-block;
  background: rgba(52, 211, 153, 0.15);
  border: 2px solid #34d399;
  border-radius: 12px;
  padding: 6px 20px;
  color: #34d399;
  font-weight: 700;
  font-size: 1.2rem;
  margin-bottom: 16px;
}

.verification {
  background: rgba(52, 211, 153, 0.06);
  border: 1px solid rgba(52, 211, 153, 0.2);
  border-radius: 12px;
  padding: 16px 20px;
  margin-top: 16px;
  text-align: left;
  display: inline-block;
}

.verification h3 {
  color: #34d399;
  font-size: 1rem;
  margin-bottom: 8px;
}

.verification p {
  color: #94a3b8;
  font-size: 0.95rem;
}

.pitfall {
  display: flex;
  gap: 12px;
  align-items: flex-start;
  padding: 12px 0;
  border-bottom: 1px solid #334155;
}

.pitfall:last-child {
  border-bottom: none;
}

.pitfall-icon {
  color: #f472b6;
  font-size: 1.2rem;
  flex-shrink: 0;
  margin-top: 2px;
}

.pitfall-text {
  color: #94a3b8;
}

.pitfall-text strong {
  color: #f472b6;
}

.challenge-box {
  background: rgba(244, 114, 182, 0.06);
  border: 1px solid rgba(244, 114, 182, 0.2);
  border-radius: 16px;
  padding: 24px;
}

.challenge-box h2 {
  color: #f472b6;
}

.slider-container {
  margin: 20px 0;
  text-align: center;
}

.slider-container label {
  color: #94a3b8;
  font-size: 0.95rem;
  display: block;
  margin-bottom: 8px;
}

.slider-container input[type="range"] {
  -webkit-appearance: none;
  appearance: none;
  width: 280px;
  height: 6px;
  border-radius: 3px;
  background: #334155;
  outline: none;
}

.slider-container input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  cursor: pointer;
}

.slider-container .value-display {
  color: #60a5fa;
  font-weight: 700;
  font-size: 1.1rem;
  margin-top: 8px;
}

.derivation-table {
  width: 100%;
  border-collapse: collapse;
  margin: 12px 0;
}

.derivation-table th {
  color: #60a5fa;
  text-align: left;
  padding: 10px 14px;
  border-bottom: 2px solid #334155;
  font-size: 0.92rem;
}

.derivation-table td {
  color: #e2e8f0;
  padding: 10px 14px;
  border-bottom: 1px solid #1e293b;
}

.derivation-table tr:hover td {
  background: rgba(96, 165, 250, 0.04);
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .formula-grid { grid-template-columns: 1fr; }
  .options-grid { grid-template-columns: repeat(2, 1fr); }
  .step { gap: 12px; }
  .step-badge { min-width: 30px; height: 30px; font-size: 0.85rem; }
  .final-answer .answer-value { font-size: 1.8rem; }
  .container { padding: 10px; }
  body { padding: 10px; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Povr≈°ina kocke preko dijagonale prostora</h1>
  <p class="subtitle">Stereometrija -- Veza izmeƒëu dijagonale prostora i povr≈°ine kocke</p>

  <!-- Problem Statement -->
  <div class="card">
    <h2><span class="icon">üìã</span> Zadatak</h2>
    <div class="highlight-box">
      Ako je \( D \) du≈æina dijagonale kocke, tada je njena povr≈°ina jednaka:
    </div>
    <div class="options-grid">
      <div class="option correct">(A) \( 2D^2 \)</div>
      <div class="option">(B) \( \tfrac{1}{3}D^2 \)</div>
      <div class="option">(C) \( \tfrac{1}{2}D^2 \)</div>
      <div class="option">(D) \( 6D^2 \)</div>
      <div class="option">(E) \( 4D^2 \)</div>
      <div class="option">(N) Ne znam</div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <h2><span class="icon">üó∫Ô∏è</span> Plan re≈°avanja</h2>
    <ul class="plan-list">
      <li data-num="1">Izraziti dijagonalu prostora kocke \( D \) preko stranice \( a \)</li>
      <li data-num="2">Iz te veze izraziti \( a^2 \) preko \( D^2 \)</li>
      <li data-num="3">Izraƒçunati ukupnu povr≈°inu kocke \( P = 6a^2 \) zamenom</li>
      <li data-num="4">Pojednostaviti i proveriti rezultat</li>
    </ul>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <h2><span class="icon">üìñ</span> Podsetnik teorije</h2>
    <details>
      <summary>Klikni za pregled kljuƒçnih formula</summary>
      <div class="formula-grid">
        <div class="formula-card">
          <div class="label">Dijagonala stranice kocke</div>
          <div class="formula">\( d = a\sqrt{2} \)</div>
        </div>
        <div class="formula-card">
          <div class="label">Dijagonala prostora kocke</div>
          <div class="formula">\( D = a\sqrt{3} \)</div>
        </div>
        <div class="formula-card">
          <div class="label">Povr≈°ina kocke</div>
          <div class="formula">\( P = 6a^2 \)</div>
        </div>
        <div class="formula-card">
          <div class="label">Pitagorina teorema (3D)</div>
          <div class="formula">\( D^2 = a^2 + a^2 + a^2 \)</div>
        </div>
      </div>
    </details>
  </div>

  <!-- Interactive 3D Diagram -->
  <div class="card">
    <h2><span class="icon">üé®</span> Interaktivni dijagram kocke</h2>
    <p style="color:#94a3b8; margin-bottom:12px;">Prevuci kursor levo-desno da rotira≈° kocku. Dijagonala prostora je prikazana crvenom linijom.</p>
    <div class="canvas-wrapper">
      <canvas id="cubeCanvas" width="560" height="480"></canvas>
    </div>
    <div class="slider-container">
      <label for="rotSlider">Rotacija kocke</label>
      <input type="range" id="rotSlider" min="0" max="360" value="25">
      <div class="value-display" id="angleDisplay">25¬∞</div>
    </div>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2><span class="icon">üî¢</span> Re≈°enje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Dijagonala prostora kocke</h3>
        <p>Neka je stranica kocke \( a \). Dijagonala prostora kocke spaja dva nasuprotna temena koja ne pripadaju istoj stranici. Da bismo je izraƒçunali, primenjujemo Pitagorinu teoremu dva puta.</p>
        <div class="math-block">
          <strong>Prvo</strong> nalazimo dijagonalu donje baze (kvadrata stranice \( a \)):
          \[ d_{\text{baze}} = \sqrt{a^2 + a^2} = a\sqrt{2} \]
        </div>
        <div class="math-block">
          <strong>Zatim</strong> primenjujemo Pitagorinu teoremu na pravougli trougao ƒçije su katete dijagonala baze \( d_{\text{baze}} = a\sqrt{2} \) i boƒçna ivica \( a \):
          \[ D = \sqrt{d_{\text{baze}}^2 + a^2} = \sqrt{(a\sqrt{2})^2 + a^2} = \sqrt{2a^2 + a^2} = \sqrt{3a^2} = a\sqrt{3} \]
        </div>
        <div class="checkpoint">
          <strong>Proveri sebe:</strong> Dijagonala prostora kocke sa stranicom \( a \) je uvek \( a\sqrt{3} \). Da li se seƒáa≈° za≈°to? Zato ≈°to primenjujemo Pitagorinu teoremu u tri ortogonalna pravca!
        </div>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Izrazimo \( a^2 \) preko \( D \)</h3>
        <p>Iz prethodnog koraka imamo \( D = a\sqrt{3} \). Kvadriramo obe strane:</p>
        <div class="math-block">
          \[ D^2 = (a\sqrt{3})^2 = a^2 \cdot 3 = 3a^2 \]
        </div>
        <p>Delimo obe strane sa 3:</p>
        <div class="math-block">
          \[ a^2 = \frac{D^2}{3} \]
        </div>
        <div class="checkpoint">
          <strong>Kljuƒçna veza:</strong> Kvadrat stranice kocke je taƒçno treƒáina kvadrata njene prostorne dijagonale.
        </div>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Ukupna povr≈°ina kocke</h3>
        <p>Kocka ima <strong>6 jednakih stranica</strong>, od kojih je svaka kvadrat stranice \( a \). Povr≈°ina jedne stranice je \( a^2 \), pa je ukupna povr≈°ina:</p>
        <div class="math-block">
          \[ P = 6 \cdot a^2 \]
        </div>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Zamena i pojednostavljenje</h3>
        <p>Zamenimo \( a^2 = \dfrac{D^2}{3} \) u formulu za povr≈°inu:</p>
        <div class="math-block">
          \[ P = 6 \cdot \frac{D^2}{3} = \frac{6D^2}{3} = 2D^2 \]
        </div>
        <div class="checkpoint">
          <strong>Proveri sebe:</strong> Imamo \( 6 \div 3 = 2 \). ≈†estica dolazi od 6 stranica kocke, a trojka od veze \( D^2 = 3a^2 \). Elegantno!
        </div>
      </div>
    </div>
  </div>

  <!-- Summary Table -->
  <div class="card">
    <h2><span class="icon">üìä</span> Pregled izvoƒëenja</h2>
    <table class="derivation-table">
      <thead>
        <tr>
          <th>Veliƒçina</th>
          <th>Formula</th>
          <th>Veza sa \( D \)</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Stranica kocke</td>
          <td>\( a \)</td>
          <td>\( a = \dfrac{D}{\sqrt{3}} \)</td>
        </tr>
        <tr>
          <td>Kvadrat stranice</td>
          <td>\( a^2 \)</td>
          <td>\( a^2 = \dfrac{D^2}{3} \)</td>
        </tr>
        <tr>
          <td>Povr≈°ina jedne stranice</td>
          <td>\( a^2 \)</td>
          <td>\( \dfrac{D^2}{3} \)</td>
        </tr>
        <tr>
          <td>Ukupna povr≈°ina (6 stranica)</td>
          <td>\( 6a^2 \)</td>
          <td>\( 6 \cdot \dfrac{D^2}{3} = 2D^2 \)</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2><span class="icon">üí°</span> Kljuƒçni uvid</h2>
    <p>Veza \( P = 2D^2 \) je izuzetno elegantna. Ona proizlazi iz ƒçinjenice da dijagonala prostora kocke "nosi" informaciju o sve tri dimenzije istovremeno (jer \( D^2 = 3a^2 \)), dok povr≈°ina kocke koristi samo dve dimenzije ali se raƒçuna za svih 6 stranica (jer \( P = 6a^2 \)). Koliƒçnik \( \frac{6}{3} = 2 \) daje koeficijent uz \( D^2 \).</p>
    <p style="margin-top:12px; color:#94a3b8;">Na sliƒçan naƒçin, zapremina kocke se mo≈æe izraziti kao \( V = \dfrac{D^3}{3\sqrt{3}} = \dfrac{D^3\sqrt{3}}{9} \).</p>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer">
    <div class="answer-label">Konaƒçan odgovor</div>
    <div class="answer-value">\( P = 2D^2 \)</div>
    <div class="answer-letter">Odgovor: (A)</div>

    <div class="verification">
      <h3>Numeriƒçka provera</h3>
      <p>Neka je \( a = 1 \). Tada:</p>
      <p>\( D = 1 \cdot \sqrt{3} = \sqrt{3} \implies D^2 = 3 \)</p>
      <p>\( P = 6 \cdot 1^2 = 6 \)</p>
      <p>\( 2D^2 = 2 \cdot 3 = 6 = P \quad \checkmark \)</p>
      <br>
      <p>Neka je \( a = 2 \). Tada:</p>
      <p>\( D = 2\sqrt{3} \implies D^2 = 12 \)</p>
      <p>\( P = 6 \cdot 4 = 24 \)</p>
      <p>\( 2D^2 = 2 \cdot 12 = 24 = P \quad \checkmark \)</p>
    </div>
  </div>

  <!-- Why other answers are wrong -->
  <div class="card">
    <h2><span class="icon">üîç</span> Za≈°to su ostali odgovori netaƒçni?</h2>
    <div class="math-block">
      <p style="margin-bottom:8px;"><strong>(B) \( \frac{1}{3}D^2 \)</strong> ‚Äî Ovo bi bila povr≈°ina samo jedne od ≈°est stranica (\( a^2 = \frac{D^2}{3} \)). Zaboravljen je faktor 6.</p>
      <p style="margin-bottom:8px;"><strong>(C) \( \frac{1}{2}D^2 \)</strong> ‚Äî Nema geometrijsko opravdanje; verovatno zamka za povr≈°no raƒçunanje.</p>
      <p style="margin-bottom:8px;"><strong>(D) \( 6D^2 \)</strong> ‚Äî Ovo bi bio odgovor da je \( D = a \), tj. da je dijagonala jednaka stranici. Ali \( D = a\sqrt{3} \neq a \).</p>
      <p><strong>(E) \( 4D^2 \)</strong> ‚Äî Nema geometrijsko opravdanje; ne odgovara nijednom korektnom izvoƒëenju.</p>
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2><span class="icon">‚ö†Ô∏è</span> ƒåeste gre≈°ke</h2>
    <div class="pitfall">
      <span class="pitfall-icon">‚úó</span>
      <div class="pitfall-text">
        <strong>Me≈°anje dijagonale stranice i dijagonale prostora:</strong> Dijagonala stranice je \( a\sqrt{2} \), dok je dijagonala prostora \( a\sqrt{3} \). Ako se gre≈°kom koristi \( d = a\sqrt{2} \) umesto \( D = a\sqrt{3} \), dobija se pogre≈°an rezultat \( P = 3D^2 \).
      </div>
    </div>
    <div class="pitfall">
      <span class="pitfall-icon">‚úó</span>
      <div class="pitfall-text">
        <strong>Zaboravljanje faktora 6:</strong> Ako se izraƒçuna samo \( a^2 = \frac{D^2}{3} \) i ne pomno≈æi sa 6 (za svih ≈°est stranica kocke), dobija se \( \frac{D^2}{3} \) -- odgovor (B), koji odgovara povr≈°ini samo jedne stranice.
      </div>
    </div>
  </div>

  <!-- Optional Challenge -->
  <div class="challenge-box">
    <h2><span class="icon">üèÜ</span> Dodatni izazov</h2>
    <p style="color:#94a3b8; margin-top:10px;">Ako je \( D \) dijagonala prostora kocke, izrazi njenu zapreminu \( V \) samo preko \( D \).</p>
    <details>
      <summary>Prika≈æi re≈°enje</summary>
      <div class="math-block" style="margin-top:12px;">
        <p>Iz \( D = a\sqrt{3} \) sledi \( a = \dfrac{D}{\sqrt{3}} \).</p>
        <p style="margin-top:8px;">Zapremina kocke:</p>
        \[ V = a^3 = \left(\frac{D}{\sqrt{3}}\right)^3 = \frac{D^3}{(\sqrt{3})^3} = \frac{D^3}{3\sqrt{3}} = \frac{D^3 \sqrt{3}}{9} \]
      </div>
    </details>
  </div>

</div>

<script>
(function() {
  var canvas = document.getElementById('cubeCanvas');
  var ctx = canvas.getContext('2d');
  var slider = document.getElementById('rotSlider');
  var angleDisplay = document.getElementById('angleDisplay');

  var angleY = 25 * Math.PI / 180;
  var angleX = 25 * Math.PI / 180;

  // Cube vertices (centered at origin, side length 2)
  var size = 1;
  var vertices = [
    [-size, -size, -size], // 0: back-bottom-left
    [ size, -size, -size], // 1: back-bottom-right
    [ size,  size, -size], // 2: back-top-right
    [-size,  size, -size], // 3: back-top-left
    [-size, -size,  size], // 4: front-bottom-left
    [ size, -size,  size], // 5: front-bottom-right
    [ size,  size,  size], // 6: front-top-right
    [-size,  size,  size]  // 7: front-top-left
  ];

  // Edges of the cube
  var edges = [
    [0,1],[1,2],[2,3],[3,0], // back face
    [4,5],[5,6],[6,7],[7,4], // front face
    [0,4],[1,5],[2,6],[3,7]  // connecting edges
  ];

  // Faces (for painting)
  var faces = [
    { verts: [0,1,2,3], color: 'rgba(96,165,250,0.08)' },   // back
    { verts: [4,5,6,7], color: 'rgba(96,165,250,0.12)' },   // front
    { verts: [0,3,7,4], color: 'rgba(167,139,250,0.08)' },  // left
    { verts: [1,2,6,5], color: 'rgba(167,139,250,0.12)' },  // right
    { verts: [3,2,6,7], color: 'rgba(52,211,153,0.10)' },   // top
    { verts: [0,1,5,4], color: 'rgba(52,211,153,0.06)' }    // bottom
  ];

  // Space diagonal: vertex 0 to vertex 6
  var diagStart = 0;
  var diagEnd = 6;

  // Face diagonal on bottom face: vertex 0 to vertex 5
  var faceDiagStart = 4;
  var faceDiagEnd = 1;

  function rotateY(v, a) {
    var c = Math.cos(a), s = Math.sin(a);
    return [v[0]*c + v[2]*s, v[1], -v[0]*s + v[2]*c];
  }

  function rotateX(v, a) {
    var c = Math.cos(a), s = Math.sin(a);
    return [v[0], v[1]*c - v[2]*s, v[1]*s + v[2]*c];
  }

  function project(v) {
    var scale = 140;
    var perspective = 5;
    var factor = perspective / (perspective + v[2]);
    return [
      canvas.width / 2 + v[0] * scale * factor,
      canvas.height / 2 - v[1] * scale * factor
    ];
  }

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Transform all vertices
    var transformed = vertices.map(function(v) {
      var r = rotateY(v, angleY);
      r = rotateX(r, angleX);
      return r;
    });

    var projected = transformed.map(function(v) {
      return project(v);
    });

    // Sort faces by average z (painter's algorithm)
    var sortedFaces = faces.map(function(f, i) {
      var avgZ = 0;
      f.verts.forEach(function(vi) { avgZ += transformed[vi][2]; });
      avgZ /= f.verts.length;
      return { face: f, avgZ: avgZ, idx: i };
    });
    sortedFaces.sort(function(a, b) { return a.avgZ - b.avgZ; });

    // Draw faces
    sortedFaces.forEach(function(item) {
      var f = item.face;
      ctx.beginPath();
      ctx.moveTo(projected[f.verts[0]][0], projected[f.verts[0]][1]);
      for (var i = 1; i < f.verts.length; i++) {
        ctx.lineTo(projected[f.verts[i]][0], projected[f.verts[i]][1]);
      }
      ctx.closePath();
      ctx.fillStyle = f.color;
      ctx.fill();
    });

    // Draw edges
    edges.forEach(function(e) {
      ctx.beginPath();
      ctx.moveTo(projected[e[0]][0], projected[e[0]][1]);
      ctx.lineTo(projected[e[1]][0], projected[e[1]][1]);
      ctx.strokeStyle = 'rgba(148, 163, 184, 0.5)';
      ctx.lineWidth = 1.5;
      ctx.stroke();
    });

    // Draw face diagonal (dashed, yellow)
    ctx.beginPath();
    ctx.moveTo(projected[faceDiagStart][0], projected[faceDiagStart][1]);
    ctx.lineTo(projected[faceDiagEnd][0], projected[faceDiagEnd][1]);
    ctx.setLineDash([8, 5]);
    ctx.strokeStyle = '#fbbf24';
    ctx.lineWidth = 2.5;
    ctx.stroke();
    ctx.setLineDash([]);

    // Draw vertical edge from vertex 1 to vertex 5 highlighted (green dashed)
    // Actually let's highlight the right-angle triangle for the derivation:
    // Bottom-left-back (0) -> bottom-right-back (1) bottom edge
    // Then 1 -> 5 (going forward on bottom)
    // Then 5 -> top connecting... actually we want the derivation triangle.
    // Let's highlight the triangle: 4 -> 1 (face diagonal), 1 -> 6 via edge 1->2->... no.
    // Better: show the right triangle for space diagonal:
    // face diagonal: 4 -> 1 (on bottom face)
    // vertical edge: 1 -> 2 (going up)
    // space diagonal: 4 -> 2... actually 0 -> 6 is the standard.

    // Let's use: 0 (back-bottom-left) -> 5 (front-bottom-right) face diagonal of bottom
    // Then 5 -> 6 (vertical edge, going up)
    // Then 6 -> 0 space diagonal

    // Draw vertical edge highlighted (green, dashed)
    ctx.beginPath();
    ctx.moveTo(projected[1][0], projected[1][1]);
    ctx.lineTo(projected[2][0], projected[2][1]);
    ctx.setLineDash([6, 4]);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2.5;
    ctx.stroke();
    ctx.setLineDash([]);

    // Draw space diagonal (thick red)
    ctx.beginPath();
    ctx.moveTo(projected[diagStart][0], projected[diagStart][1]);
    ctx.lineTo(projected[diagEnd][0], projected[diagEnd][1]);
    ctx.strokeStyle = '#ef4444';
    ctx.lineWidth = 3.5;
    ctx.stroke();

    // Draw glow for space diagonal
    ctx.beginPath();
    ctx.moveTo(projected[diagStart][0], projected[diagStart][1]);
    ctx.lineTo(projected[diagEnd][0], projected[diagEnd][1]);
    ctx.strokeStyle = 'rgba(239, 68, 68, 0.3)';
    ctx.lineWidth = 8;
    ctx.stroke();

    // Draw vertices as dots
    projected.forEach(function(p, i) {
      ctx.beginPath();
      ctx.arc(p[0], p[1], 4, 0, Math.PI * 2);
      ctx.fillStyle = '#e2e8f0';
      ctx.fill();
      ctx.beginPath();
      ctx.arc(p[0], p[1], 2, 0, Math.PI * 2);
      ctx.fillStyle = '#60a5fa';
      ctx.fill();
    });

    // Highlight diagonal endpoints
    [diagStart, diagEnd].forEach(function(i) {
      ctx.beginPath();
      ctx.arc(projected[i][0], projected[i][1], 6, 0, Math.PI * 2);
      ctx.fillStyle = '#ef4444';
      ctx.fill();
      ctx.beginPath();
      ctx.arc(projected[i][0], projected[i][1], 3, 0, Math.PI * 2);
      ctx.fillStyle = '#fff';
      ctx.fill();
    });

    // Labels
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';

    // Label "a" on a bottom edge (edge 4->5)
    var mid45x = (projected[4][0] + projected[5][0]) / 2;
    var mid45y = (projected[4][1] + projected[5][1]) / 2;
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('a', mid45x, mid45y + 22);

    // Label "a" on a side edge (edge 5->6)
    var mid56x = (projected[5][0] + projected[6][0]) / 2;
    var mid56y = (projected[5][1] + projected[6][1]) / 2;
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('a', mid56x + 18, mid56y);

    // Label "D" on space diagonal
    var midDx = (projected[diagStart][0] + projected[diagEnd][0]) / 2;
    var midDy = (projected[diagStart][1] + projected[diagEnd][1]) / 2;
    ctx.fillStyle = '#ef4444';
    ctx.font = 'bold 18px Segoe UI, system-ui, sans-serif';
    ctx.fillText('D = a‚àö3', midDx - 55, midDy - 8);

    // Label face diagonal
    var midFDx = (projected[faceDiagStart][0] + projected[faceDiagEnd][0]) / 2;
    var midFDy = (projected[faceDiagStart][1] + projected[faceDiagEnd][1]) / 2;
    ctx.fillStyle = '#fbbf24';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.fillText('d = a‚àö2', midFDx + 5, midFDy + 22);

    // Label vertical edge
    var midVx = (projected[1][0] + projected[2][0]) / 2;
    var midVy = (projected[1][1] + projected[2][1]) / 2;
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.fillText('a', midVx + 16, midVy);

    // Legend
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';

    var legendX = 18;
    var legendY = canvas.height - 60;

    ctx.fillStyle = '#ef4444';
    ctx.fillRect(legendX, legendY, 20, 3);
    ctx.fillStyle = '#e2e8f0';
    ctx.fillText('Dijagonala prostora (D)', legendX + 28, legendY + 5);

    ctx.fillStyle = '#fbbf24';
    ctx.setLineDash([4, 3]);
    ctx.beginPath();
    ctx.moveTo(legendX, legendY + 20);
    ctx.lineTo(legendX + 20, legendY + 20);
    ctx.strokeStyle = '#fbbf24';
    ctx.lineWidth = 2;
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = '#e2e8f0';
    ctx.fillText('Dijagonala stranice (d)', legendX + 28, legendY + 24);

    ctx.fillStyle = '#4ade80';
    ctx.setLineDash([4, 3]);
    ctx.beginPath();
    ctx.moveTo(legendX, legendY + 40);
    ctx.lineTo(legendX + 20, legendY + 40);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2;
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = '#e2e8f0';
    ctx.fillText('Boƒçna ivica (a)', legendX + 28, legendY + 44);
  }

  // Slider interaction
  slider.addEventListener('input', function() {
    var val = parseInt(this.value);
    angleY = val * Math.PI / 180;
    angleDisplay.textContent = val + '¬∞';
    draw();
  });

  // Mouse drag
  var isDragging = false;
  var lastX = 0, lastY = 0;

  canvas.addEventListener('mousedown', function(e) {
    isDragging = true;
    lastX = e.clientX;
    lastY = e.clientY;
  });

  window.addEventListener('mousemove', function(e) {
    if (!isDragging) return;
    var dx = e.clientX - lastX;
    var dy = e.clientY - lastY;
    angleY += dx * 0.008;
    angleX -= dy * 0.008;
    // Clamp angleX
    angleX = Math.max(-Math.PI / 3, Math.min(Math.PI / 3, angleX));
    lastX = e.clientX;
    lastY = e.clientY;
    // Update slider
    var deg = ((angleY * 180 / Math.PI) % 360 + 360) % 360;
    slider.value = deg;
    angleDisplay.textContent = Math.round(deg) + '¬∞';
    draw();
  });

  window.addEventListener('mouseup', function() {
    isDragging = false;
  });

  // Touch support
  canvas.addEventListener('touchstart', function(e) {
    e.preventDefault();
    isDragging = true;
    lastX = e.touches[0].clientX;
    lastY = e.touches[0].clientY;
  }, { passive: false });

  canvas.addEventListener('touchmove', function(e) {
    e.preventDefault();
    if (!isDragging) return;
    var dx = e.touches[0].clientX - lastX;
    var dy = e.touches[0].clientY - lastY;
    angleY += dx * 0.008;
    angleX -= dy * 0.008;
    angleX = Math.max(-Math.PI / 3, Math.min(Math.PI / 3, angleX));
    lastX = e.touches[0].clientX;
    lastY = e.touches[0].clientY;
    var deg = ((angleY * 180 / Math.PI) % 360 + 360) % 360;
    slider.value = deg;
    angleDisplay.textContent = Math.round(deg) + '¬∞';
    draw();
  }, { passive: false });

  canvas.addEventListener('touchend', function() {
    isDragging = false;
  });

  // Initial draw
  draw();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Povr≈°ina kocke preko dijagonale prostora",
  "subject": "math",
  "unit": "geometry",
  "topic_tags": ["stereometrija", "kocka", "dijagonala prostora", "povr≈°ina kocke", "Pitagorina teorema"]
}
BRAINSPARK_META-->