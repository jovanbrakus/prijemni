<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kompozicija funkcija f(g(x)) − g(f(x))</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
PROBLEM:
Date su funkcije f(x) = 1 − x i g(x) = 2 − x.
Tada je izraz f(g(x)) − g(f(x)) jednak:
(A) 0   (B) −x   (C) x   (D) −2   (E) 2   (N) Ne znam

SOLUTION:

1. Compute f(g(x)):
   g(x) = 2 − x
   f(g(x)) = f(2 − x) = 1 − (2 − x) = 1 − 2 + x = x − 1

2. Compute g(f(x)):
   f(x) = 1 − x
   g(f(x)) = g(1 − x) = 2 − (1 − x) = 2 − 1 + x = x + 1

3. Compute the difference:
   f(g(x)) − g(f(x)) = (x − 1) − (x + 1) = x − 1 − x − 1 = −2

ANSWER: (D) −2

VERIFICATION:
- Let's check with x = 0:
  f(g(0)) = f(2) = 1 − 2 = −1
  g(f(0)) = g(1) = 2 − 1 = 1
  f(g(0)) − g(f(0)) = −1 − 1 = −2 ✓

- Let's check with x = 3:
  f(g(3)) = f(2 − 3) = f(−1) = 1 − (−1) = 2
  g(f(3)) = g(1 − 3) = g(−2) = 2 − (−2) = 4
  f(g(3)) − g(f(3)) = 2 − 4 = −2 ✓

KEY INSIGHT:
The result is a constant (−2) regardless of x. This happens because both
compositions are linear functions of x with slope +1, so when we subtract
them the x-terms cancel out and only the constant difference remains.

f(g(x)) = x − 1  (slope 1, intercept −1)
g(f(x)) = x + 1  (slope 1, intercept +1)
Difference of intercepts: −1 − 1 = −2
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card h3 {
  color: #a78bfa;
  font-size: 1.15rem;
  margin-bottom: 10px;
  margin-top: 16px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.highlight-blue {
  color: #60a5fa;
  font-weight: 600;
}

.highlight-green {
  color: #4ade80;
  font-weight: 600;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 14px;
}

.given-item {
  background: rgba(96, 165, 250, 0.08);
  border: 1px solid rgba(96, 165, 250, 0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 160px;
  flex: 1;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #60a5fa;
  font-size: 1.15rem;
  font-weight: 700;
}

.math-box {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 14px 0;
  overflow-x: auto;
}

.step-container {
  margin-bottom: 22px;
  padding-left: 16px;
  border-left: 3px solid #334155;
}

.step-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  color: #fff;
  font-weight: 700;
  font-size: 0.9rem;
  margin-right: 10px;
  flex-shrink: 0;
}

.step-title {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 700;
  display: flex;
  align-items: center;
  margin-bottom: 10px;
}

.step-text {
  color: #cbd5e1;
  margin-bottom: 10px;
}

details {
  margin: 15px 0;
  background: rgba(167, 139, 250, 0.07);
  border: 1px solid rgba(167, 139, 250, 0.2);
  border-radius: 10px;
  padding: 12px 16px;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  user-select: none;
}

details[open] summary {
  margin-bottom: 10px;
}

details p, details ul {
  color: #cbd5e1;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167, 139, 250, 0.3);
  border-radius: 14px;
  padding: 20px 24px;
  margin-bottom: 24px;
}

.insight-box h2 {
  color: #a78bfa;
}

.answer-box {
  background: linear-gradient(135deg, rgba(52,211,153,0.1), rgba(74,222,128,0.1));
  border: 2px solid rgba(52, 211, 153, 0.4);
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  text-align: center;
}

.answer-box .final-answer {
  color: #4ade80;
  font-size: 1.6rem;
  font-weight: 800;
  margin: 12px 0;
}

.answer-box .answer-label {
  color: #34d399;
  font-size: 1rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 2px;
}

.options-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin: 16px 0;
  justify-content: center;
}

.option {
  background: rgba(51, 65, 85, 0.5);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 18px;
  color: #94a3b8;
  font-size: 1rem;
  transition: all 0.2s;
}

.option.correct {
  background: rgba(52, 211, 153, 0.15);
  border-color: #34d399;
  color: #4ade80;
  font-weight: 700;
}

.pitfall-box {
  background: rgba(224, 148, 104, 0.07);
  border: 1px solid rgba(224, 148, 104, 0.25);
  border-radius: 14px;
  padding: 20px 24px;
  margin-bottom: 24px;
}

.pitfall-box h2 {
  color: #e09468;
}

.pitfall-box ul {
  list-style: none;
  padding-left: 0;
}

.pitfall-box li {
  color: #cbd5e1;
  margin-bottom: 8px;
  padding-left: 22px;
  position: relative;
}

.pitfall-box li::before {
  content: "\26A0";
  position: absolute;
  left: 0;
}

.canvas-card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 20px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
  display: flex;
  flex-direction: column;
  align-items: center;
}

.canvas-card h2 {
  align-self: flex-start;
}

.canvas-controls {
  display: flex;
  gap: 10px;
  margin-top: 12px;
  flex-wrap: wrap;
  justify-content: center;
}

.canvas-btn {
  background: rgba(96, 165, 250, 0.15);
  border: 1px solid rgba(96, 165, 250, 0.3);
  border-radius: 8px;
  color: #60a5fa;
  padding: 8px 16px;
  font-size: 0.9rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  font-family: inherit;
}

.canvas-btn:hover {
  background: rgba(96, 165, 250, 0.25);
}

.canvas-btn.active {
  background: rgba(96, 165, 250, 0.3);
  border-color: #60a5fa;
}

canvas {
  border-radius: 10px;
  touch-action: none;
  max-width: 100%;
  height: auto;
}

.challenge-box {
  background: rgba(96, 165, 250, 0.06);
  border: 1px solid rgba(96, 165, 250, 0.2);
  border-radius: 14px;
  padding: 20px 24px;
  margin-bottom: 24px;
}

.challenge-box h2 {
  color: #60a5fa;
}

.composition-diagram {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  flex-wrap: wrap;
  margin: 16px 0;
}

.comp-box {
  background: rgba(96, 165, 250, 0.1);
  border: 1px solid rgba(96, 165, 250, 0.3);
  border-radius: 10px;
  padding: 10px 16px;
  text-align: center;
  min-width: 80px;
}

.comp-box.fn-f {
  border-color: rgba(244, 114, 182, 0.4);
  background: rgba(244, 114, 182, 0.1);
}

.comp-box.fn-g {
  border-color: rgba(96, 165, 250, 0.4);
  background: rgba(96, 165, 250, 0.1);
}

.comp-box.result {
  border-color: rgba(52, 211, 153, 0.4);
  background: rgba(52, 211, 153, 0.1);
}

.comp-arrow {
  color: #94a3b8;
  font-size: 1.3rem;
  font-weight: bold;
}

.comp-label {
  font-size: 0.75rem;
  color: #94a3b8;
  margin-bottom: 2px;
}

.comp-value {
  font-size: 1rem;
  font-weight: 700;
}

.comp-box.fn-f .comp-value { color: #f472b6; }
.comp-box.fn-g .comp-value { color: #60a5fa; }
.comp-box.result .comp-value { color: #4ade80; }

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .given-grid { flex-direction: column; }
  .options-grid { flex-direction: column; align-items: stretch; }
  .option { text-align: center; }
  .composition-diagram { flex-direction: column; }
  .canvas-controls { flex-direction: column; align-items: stretch; }
  .canvas-btn { text-align: center; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Kompozicija funkcija: f(g(x)) - g(f(x))</h1>
  <p class="subtitle">Kompozicija funkcija — osnove algebre funkcija</p>

  <!-- Problem Statement -->
  <div class="card">
    <h2>Zadatak</h2>
    <p>Date su funkcije \(f(x) = 1 - x\) i \(g(x) = 2 - x\). Tada je izraz \(f(g(x)) - g(f(x))\) jednak:</p>

    <div class="options-grid" style="margin-top: 16px;">
      <div class="option">(A) \(0\)</div>
      <div class="option">(B) \(-x\)</div>
      <div class="option">(C) \(x\)</div>
      <div class="option">(D) \(-2\)</div>
      <div class="option">(E) \(2\)</div>
      <div class="option">(N) Ne znam</div>
    </div>

    <div class="given-grid">
      <div class="given-item">
        <div class="label">Funkcija f</div>
        <div class="value">\(f(x) = 1 - x\)</div>
      </div>
      <div class="given-item">
        <div class="label">Funkcija g</div>
        <div class="value">\(g(x) = 2 - x\)</div>
      </div>
      <div class="given-item">
        <div class="label">Trazi se</div>
        <div class="value">\(f(g(x)) - g(f(x))\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <h2>Plan resavanja</h2>
    <p>Izracunacemo <span class="highlight-blue">kompoziciju \(f(g(x))\)</span> i <span class="highlight">kompoziciju \(g(f(x))\)</span> zasebno, a zatim oduzeti drugi izraz od prvog. Kompozicija funkcija znaci da rezultat jedne funkcije uvrstavamo kao argument druge.</p>
  </div>

  <!-- Theory Refresher -->
  <details>
    <summary>Podsecanje na teoriju: Kompozicija funkcija</summary>
    <ul style="list-style: disc; padding-left: 20px; margin-top: 10px;">
      <li style="margin-bottom: 8px;"><strong>Kompozicija \(f \circ g\):</strong> Zapisuje se kao \(f(g(x))\). Prvo izracunamo \(g(x)\), a zatim taj rezultat uvrstimo u \(f\).</li>
      <li style="margin-bottom: 8px;"><strong>Kompozicija \(g \circ f\):</strong> Zapisuje se kao \(g(f(x))\). Prvo izracunamo \(f(x)\), a zatim taj rezultat uvrstimo u \(g\).</li>
      <li style="margin-bottom: 8px;"><strong>Vazno:</strong> Kompozicija funkcija <em>nije komutativna</em> - u opstem slucaju \(f(g(x)) \neq g(f(x))\).</li>
      <li style="margin-bottom: 8px;"><strong>Postupak:</strong> Da bismo izracunali \(f(g(x))\), svuda gde se u definiciji funkcije \(f\) pojavljuje \(x\), zamenimo ga izrazom \(g(x)\).</li>
    </ul>
  </details>

  <!-- Composition Diagram -->
  <div class="card">
    <h2>Dijagram kompozicije</h2>

    <h3>Kompozicija \(f(g(x))\): prvo \(g\), pa \(f\)</h3>
    <div class="composition-diagram">
      <div class="comp-box">
        <div class="comp-label">ulaz</div>
        <div class="comp-value" style="color: #e2e8f0;">\(x\)</div>
      </div>
      <div class="comp-arrow">&rarr;</div>
      <div class="comp-box fn-g">
        <div class="comp-label">primeni g</div>
        <div class="comp-value">\(2 - x\)</div>
      </div>
      <div class="comp-arrow">&rarr;</div>
      <div class="comp-box fn-f">
        <div class="comp-label">primeni f</div>
        <div class="comp-value">\(1 - (2-x)\)</div>
      </div>
      <div class="comp-arrow">&rarr;</div>
      <div class="comp-box result">
        <div class="comp-label">rezultat</div>
        <div class="comp-value">\(x - 1\)</div>
      </div>
    </div>

    <h3>Kompozicija \(g(f(x))\): prvo \(f\), pa \(g\)</h3>
    <div class="composition-diagram">
      <div class="comp-box">
        <div class="comp-label">ulaz</div>
        <div class="comp-value" style="color: #e2e8f0;">\(x\)</div>
      </div>
      <div class="comp-arrow">&rarr;</div>
      <div class="comp-box fn-f">
        <div class="comp-label">primeni f</div>
        <div class="comp-value">\(1 - x\)</div>
      </div>
      <div class="comp-arrow">&rarr;</div>
      <div class="comp-box fn-g">
        <div class="comp-label">primeni g</div>
        <div class="comp-value">\(2 - (1-x)\)</div>
      </div>
      <div class="comp-arrow">&rarr;</div>
      <div class="comp-box result">
        <div class="comp-label">rezultat</div>
        <div class="comp-value">\(x + 1\)</div>
      </div>
    </div>
  </div>

  <!-- Canvas Visualization -->
  <div class="canvas-card">
    <h2>Graficki prikaz funkcija</h2>
    <canvas id="funcCanvas" width="700" height="500"></canvas>
    <div class="canvas-controls">
      <button class="canvas-btn active" id="btnAll" onclick="setView('all')">Sve funkcije</button>
      <button class="canvas-btn" id="btnFG" onclick="setView('fg')">f(g(x)) = x - 1</button>
      <button class="canvas-btn" id="btnGF" onclick="setView('gf')">g(f(x)) = x + 1</button>
      <button class="canvas-btn" id="btnDiff" onclick="setView('diff')">Razlika = -2</button>
    </div>
  </div>

  <!-- Step-by-step Solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container">
      <div class="step-title"><span class="step-badge">1</span>Izracunavanje \(f(g(x))\)</div>
      <p class="step-text">Kompozicija \(f(g(x))\) znaci: prvo izracunamo \(g(x)\), pa taj rezultat uvrstimo u \(f\).</p>
      <p class="step-text">Znamo da je \(g(x) = 2 - x\). Sada uvrstimo \(2 - x\) umesto \(x\) u definiciju funkcije \(f\):</p>
      <div class="math-box">
        \[f(g(x)) = f(2 - x) = 1 - \underbrace{(2 - x)}_{\text{uvrstavamo umesto } x}\]
      </div>
      <p class="step-text">Sklonimo zagradu (obratiti paznju na predznak ispred zagrade):</p>
      <div class="math-box">
        \[f(g(x)) = 1 - 2 + x = x - 1\]
      </div>
      <div class="math-box" style="text-align: center; border-color: rgba(244, 114, 182, 0.3); background: rgba(244, 114, 182, 0.06);">
        \[\boxed{f(g(x)) = x - 1}\]
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container">
      <div class="step-title"><span class="step-badge">2</span>Izracunavanje \(g(f(x))\)</div>
      <p class="step-text">Kompozicija \(g(f(x))\) znaci: prvo izracunamo \(f(x)\), pa taj rezultat uvrstimo u \(g\).</p>
      <p class="step-text">Znamo da je \(f(x) = 1 - x\). Sada uvrstimo \(1 - x\) umesto \(x\) u definiciju funkcije \(g\):</p>
      <div class="math-box">
        \[g(f(x)) = g(1 - x) = 2 - \underbrace{(1 - x)}_{\text{uvrstavamo umesto } x}\]
      </div>
      <p class="step-text">Sklonimo zagradu:</p>
      <div class="math-box">
        \[g(f(x)) = 2 - 1 + x = x + 1\]
      </div>
      <div class="math-box" style="text-align: center; border-color: rgba(96, 165, 250, 0.3); background: rgba(96, 165, 250, 0.06);">
        \[\boxed{g(f(x)) = x + 1}\]
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step-container">
      <div class="step-title"><span class="step-badge">3</span>Izracunavanje razlike \(f(g(x)) - g(f(x))\)</div>
      <p class="step-text">Sada oduzimamo drugi izraz od prvog:</p>
      <div class="math-box">
        \[f(g(x)) - g(f(x)) = (x - 1) - (x + 1)\]
      </div>
      <p class="step-text">Pazljivo otvaramo zagradu (minus ispred zagrade menja znake svim clanovima unutar zagrade):</p>
      <div class="math-box">
        \[= x - 1 - x - 1\]
      </div>
      <p class="step-text">Grupisemo slicne clanove:</p>
      <div class="math-box">
        \[= \underbrace{(x - x)}_{= \, 0} + \underbrace{(-1 - 1)}_{= \, -2} = -2\]
      </div>
      <div class="math-box" style="text-align: center; border-color: rgba(52,211,153,0.3); background: rgba(52,211,153,0.06);">
        \[\boxed{f(g(x)) - g(f(x)) = -2}\]
      </div>
    </div>

    <!-- Step 4: Verification -->
    <div class="step-container">
      <div class="step-title"><span class="step-badge">4</span>Verifikacija numerickim primerom</div>
      <p class="step-text">Proverimo rezultat za konkretnu vrednost, npr. \(x = 3\):</p>

      <details>
        <summary>Provera za \(x = 3\)</summary>
        <div class="math-box" style="margin-top: 10px;">
          \[g(3) = 2 - 3 = -1 \quad \Longrightarrow \quad f(g(3)) = f(-1) = 1 - (-1) = 2\]
        </div>
        <div class="math-box">
          \[f(3) = 1 - 3 = -2 \quad \Longrightarrow \quad g(f(3)) = g(-2) = 2 - (-2) = 4\]
        </div>
        <div class="math-box">
          \[f(g(3)) - g(f(3)) = 2 - 4 = -2 \quad \checkmark\]
        </div>
      </details>

      <details>
        <summary>Provera za \(x = 0\)</summary>
        <div class="math-box" style="margin-top: 10px;">
          \[g(0) = 2 \quad \Longrightarrow \quad f(g(0)) = f(2) = 1 - 2 = -1\]
        </div>
        <div class="math-box">
          \[f(0) = 1 \quad \Longrightarrow \quad g(f(0)) = g(1) = 2 - 1 = 1\]
        </div>
        <div class="math-box">
          \[f(g(0)) - g(f(0)) = -1 - 1 = -2 \quad \checkmark\]
        </div>
      </details>

      <details>
        <summary>Provera za \(x = -5\)</summary>
        <div class="math-box" style="margin-top: 10px;">
          \[g(-5) = 2 - (-5) = 7 \quad \Longrightarrow \quad f(g(-5)) = f(7) = 1 - 7 = -6\]
        </div>
        <div class="math-box">
          \[f(-5) = 1 - (-5) = 6 \quad \Longrightarrow \quad g(f(-5)) = g(6) = 2 - 6 = -4\]
        </div>
        <div class="math-box">
          \[f(g(-5)) - g(f(-5)) = -6 - (-4) = -6 + 4 = -2 \quad \checkmark\]
        </div>
      </details>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Kljucni uvid</h2>
    <p style="margin-top: 8px;">Rezultat \(f(g(x)) - g(f(x)) = -2\) je <span class="highlight-green">konstanta</span> - ne zavisi od \(x\)! Zasto?</p>
    <p style="margin-top: 8px;">Obe kompozicije su <span class="highlight-blue">linearne funkcije sa istim koeficijentom nagiba</span> (obe imaju nagib \(+1\) uz \(x\)). Zato se pri oduzimanju clanovi sa \(x\) ponistavaju, a ostaje samo razlika slobodnih clanova:</p>
    <div class="math-box">
      \[\underbrace{(x - 1)}_{f(g(x))} - \underbrace{(x + 1)}_{g(f(x))} = \underbrace{(x - x)}_{0} + \underbrace{(-1 - 1)}_{-2} = -2\]
    </div>
    <p style="margin-top: 8px;">Graficki, to su dva <span class="highlight">paralelna prava</span> ciji je vertikalni razmak svuda jednak \(2\) (donji minus gornji daje \(-2\)).</p>
  </div>

  <!-- Final Answer -->
  <div class="answer-box">
    <div class="answer-label">Konacan odgovor</div>
    <div class="final-answer">(D) \(-2\)</div>
    <div class="options-grid">
      <div class="option">(A) \(0\)</div>
      <div class="option">(B) \(-x\)</div>
      <div class="option">(C) \(x\)</div>
      <div class="option correct">(D) \(-2\)</div>
      <div class="option">(E) \(2\)</div>
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="pitfall-box">
    <h2>Ceste greske</h2>
    <ul>
      <li><strong>Zamena redosleda kompozicije:</strong> Kod \(f(g(x))\), prvo se primenjuje \(g\), pa \(f\) (cita se „f od g od x"). Mnogi studenti greski prvo primene \(f\).</li>
      <li><strong>Greska sa predznakom pri otvaranju zagrade:</strong> Kada racunamo \(1 - (2 - x)\), minus ispred zagrade menja znake: dobijamo \(1 - 2 + x\), a ne \(1 - 2 - x\). Ista greska moze nastati i pri oduzimanju \((x-1) - (x+1)\).</li>
      <li><strong>Odgovor \(0\) umesto \(-2\):</strong> Neki studenti pretpostave da je \(f(g(x)) = g(f(x))\) jer su funkcije „slicne". Kompozicija opcenito nije komutativna!</li>
      <li><strong>Odgovor \(2\) umesto \(-2\):</strong> Ako se obrne redosled oduzimanja, tj. ako se greski racuna \(g(f(x)) - f(g(x))\) umesto \(f(g(x)) - g(f(x))\), dobija se \(+2\).</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="challenge-box">
    <h2>Dodatni izazov</h2>
    <p>Neka su \(f(x) = a - x\) i \(g(x) = b - x\) za proizvoljne konstante \(a\) i \(b\). Koliko je \(f(g(x)) - g(f(x))\)?</p>
    <details>
      <summary>Prikazi nagovestaj</summary>
      <p style="margin-top: 8px;">Izracunaj \(f(g(x)) = a - (b - x)\) i \(g(f(x)) = b - (a - x)\). Koji clanovi se poniste pri oduzimanju?</p>
    </details>
    <details>
      <summary>Prikazi resenje</summary>
      <div class="math-box" style="margin-top: 10px;">
        \[f(g(x)) = a - b + x, \qquad g(f(x)) = b - a + x\]
      </div>
      <div class="math-box">
        \[f(g(x)) - g(f(x)) = (a - b + x) - (b - a + x) = 2a - 2b = 2(a - b)\]
      </div>
      <p style="margin-top: 8px;">Za \(a = 1\), \(b = 2\): dobijamo \(2(1 - 2) = 2 \cdot (-1) = -2\), sto se poklapa sa nasim rezultatom. Rezultat je uvek konstanta \(2(a - b)\) i nikada ne zavisi od \(x\).</p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('funcCanvas');
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  // Coordinate system: math coords mapped to canvas
  const xMin = -5, xMax = 7;
  const yMin = -6, yMax = 6;
  const marginL = 55, marginR = 20, marginT = 30, marginB = 40;
  const plotW = W - marginL - marginR;
  const plotH = H - marginT - marginB;

  let currentView = 'all';
  let animProgress = 1;
  let animTarget = 1;
  let animFrame = null;

  function toCanvasX(x) {
    return marginL + (x - xMin) / (xMax - xMin) * plotW;
  }
  function toCanvasY(y) {
    return marginT + (1 - (y - yMin) / (yMax - yMin)) * plotH;
  }

  // Functions
  function f(x) { return 1 - x; }
  function g(x) { return 2 - x; }
  function fg(x) { return x - 1; } // f(g(x))
  function gf(x) { return x + 1; } // g(f(x))
  function diff(x) { return -2; }  // f(g(x)) - g(f(x))

  function drawGrid() {
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Grid lines
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (let x = Math.ceil(xMin); x <= Math.floor(xMax); x++) {
      ctx.beginPath();
      ctx.moveTo(toCanvasX(x), marginT);
      ctx.lineTo(toCanvasX(x), H - marginB);
      ctx.stroke();
    }
    for (let y = Math.ceil(yMin); y <= Math.floor(yMax); y++) {
      ctx.beginPath();
      ctx.moveTo(marginL, toCanvasY(y));
      ctx.lineTo(W - marginR, toCanvasY(y));
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 2;
    // X-axis
    if (yMin <= 0 && yMax >= 0) {
      ctx.beginPath();
      ctx.moveTo(marginL, toCanvasY(0));
      ctx.lineTo(W - marginR, toCanvasY(0));
      ctx.stroke();
    }
    // Y-axis
    if (xMin <= 0 && xMax >= 0) {
      ctx.beginPath();
      ctx.moveTo(toCanvasX(0), marginT);
      ctx.lineTo(toCanvasX(0), H - marginB);
      ctx.stroke();
    }

    // Axis labels
    ctx.fillStyle = '#64748b';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    for (let x = Math.ceil(xMin); x <= Math.floor(xMax); x++) {
      if (x === 0) continue;
      ctx.fillText(x.toString(), toCanvasX(x), toCanvasY(0) + 6);
    }
    ctx.textAlign = 'right';
    ctx.textBaseline = 'middle';
    for (let y = Math.ceil(yMin); y <= Math.floor(yMax); y++) {
      if (y === 0) continue;
      ctx.fillText(y.toString(), toCanvasX(0) - 8, toCanvasY(y));
    }

    // Origin label
    ctx.textAlign = 'right';
    ctx.textBaseline = 'top';
    ctx.fillText('0', toCanvasX(0) - 6, toCanvasY(0) + 6);

    // Axis names
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    ctx.fillText('x', W - marginR + 10, toCanvasY(0) - 6);
    ctx.textAlign = 'right';
    ctx.fillText('y', toCanvasX(0) - 8, marginT - 5);
  }

  function drawFunction(fn, color, alpha, dashPattern) {
    ctx.save();
    ctx.globalAlpha = alpha;
    ctx.strokeStyle = color;
    ctx.lineWidth = 2.5;
    if (dashPattern) ctx.setLineDash(dashPattern);
    ctx.beginPath();
    let started = false;
    for (let px = marginL; px <= W - marginR; px += 1) {
      const x = xMin + (px - marginL) / plotW * (xMax - xMin);
      const y = fn(x);
      const py = toCanvasY(y);
      if (py < marginT - 20 || py > H - marginB + 20) {
        started = false;
        continue;
      }
      if (!started) {
        ctx.moveTo(px, py);
        started = true;
      } else {
        ctx.lineTo(px, py);
      }
    }
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.restore();
  }

  function drawLabel(text, x, y, color, bgColor) {
    ctx.save();
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    const metrics = ctx.measureText(text);
    const pad = 6;
    const lx = toCanvasX(x);
    const ly = toCanvasY(y);

    ctx.fillStyle = bgColor || 'rgba(12, 18, 34, 0.85)';
    ctx.fillRect(lx - pad, ly - 10 - pad, metrics.width + pad * 2, 20 + pad);
    ctx.fillStyle = color;
    ctx.textAlign = 'left';
    ctx.textBaseline = 'middle';
    ctx.fillText(text, lx, ly);
    ctx.restore();
  }

  function drawDiffAnnotation() {
    // Draw vertical distance marker at x=2
    const x = 2;
    const y1 = fg(x); // 1
    const y2 = gf(x); // 3
    const cx = toCanvasX(x);
    const cy1 = toCanvasY(y1);
    const cy2 = toCanvasY(y2);

    ctx.save();
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([5, 3]);
    ctx.beginPath();
    ctx.moveTo(cx, cy1);
    ctx.lineTo(cx, cy2);
    ctx.stroke();
    ctx.setLineDash([]);

    // Arrow heads
    const arrowSize = 6;
    ctx.fillStyle = '#4ade80';
    // Top arrow (pointing up to g(f(x)))
    ctx.beginPath();
    ctx.moveTo(cx, cy2);
    ctx.lineTo(cx - arrowSize, cy2 + arrowSize * 1.5);
    ctx.lineTo(cx + arrowSize, cy2 + arrowSize * 1.5);
    ctx.closePath();
    ctx.fill();
    // Bottom arrow (pointing down to f(g(x)))
    ctx.beginPath();
    ctx.moveTo(cx, cy1);
    ctx.lineTo(cx - arrowSize, cy1 - arrowSize * 1.5);
    ctx.lineTo(cx + arrowSize, cy1 - arrowSize * 1.5);
    ctx.closePath();
    ctx.fill();

    // Label
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#4ade80';
    ctx.textAlign = 'left';
    ctx.textBaseline = 'middle';
    ctx.fillText('razlika = -2', cx + 10, (cy1 + cy2) / 2);
    ctx.restore();
  }

  function draw() {
    drawGrid();

    const showF = currentView === 'all';
    const showG = currentView === 'all';
    const showFG = currentView === 'all' || currentView === 'fg' || currentView === 'diff';
    const showGF = currentView === 'all' || currentView === 'gf' || currentView === 'diff';
    const showDiff = currentView === 'diff';

    // Draw original functions in muted colors when showing all
    if (showF && !showDiff) {
      drawFunction(f, '#f472b6', 0.3, [6, 4]);
      drawLabel('f(x) = 1 - x', 3.5, f(3.5), '#f472b6');
    }
    if (showG && !showDiff) {
      drawFunction(g, '#60a5fa', 0.3, [6, 4]);
      drawLabel('g(x) = 2 - x', 4.5, g(4.5), '#60a5fa');
    }

    // Draw compositions
    if (showFG) {
      const alpha = (currentView === 'gf') ? 0.2 : 1;
      drawFunction(fg, '#f472b6', alpha, null);
      if (alpha > 0.5) {
        drawLabel('f(g(x)) = x - 1', 3.8, fg(3.8) + 0.5, '#f472b6');
      }
    }
    if (showGF) {
      const alpha = (currentView === 'fg') ? 0.2 : 1;
      drawFunction(gf, '#60a5fa', alpha, null);
      if (alpha > 0.5) {
        drawLabel('g(f(x)) = x + 1', 2.5, gf(2.5) + 0.5, '#60a5fa');
      }
    }

    // Draw difference line
    if (showDiff) {
      drawFunction(diff, '#4ade80', 1, null);
      drawLabel('f(g(x)) - g(f(x)) = -2', 1.5, -2 + 0.6, '#4ade80');
      drawDiffAnnotation();
    }

    // Title
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    let title = '';
    switch (currentView) {
      case 'all': title = 'Sve funkcije: f, g i njihove kompozicije'; break;
      case 'fg': title = 'Kompozicija f(g(x)) = x - 1'; break;
      case 'gf': title = 'Kompozicija g(f(x)) = x + 1'; break;
      case 'diff': title = 'Razlika: f(g(x)) - g(f(x)) = -2 (konstantna!)'; break;
    }
    ctx.fillText(title, W / 2, 8);

    // Legend at bottom
    if (currentView === 'all') {
      const legendY = H - 12;
      ctx.font = '11px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';

      ctx.setLineDash([6, 4]);
      ctx.strokeStyle = '#f472b6';
      ctx.lineWidth = 2;
      ctx.beginPath(); ctx.moveTo(50, legendY); ctx.lineTo(75, legendY); ctx.stroke();
      ctx.setLineDash([]);
      ctx.fillStyle = '#cbd5e1';
      ctx.fillText('f(x) = 1 - x', 80, legendY + 4);

      ctx.setLineDash([6, 4]);
      ctx.strokeStyle = '#60a5fa';
      ctx.beginPath(); ctx.moveTo(200, legendY); ctx.lineTo(225, legendY); ctx.stroke();
      ctx.setLineDash([]);
      ctx.fillStyle = '#cbd5e1';
      ctx.fillText('g(x) = 2 - x', 230, legendY + 4);

      ctx.strokeStyle = '#f472b6';
      ctx.lineWidth = 2.5;
      ctx.beginPath(); ctx.moveTo(360, legendY); ctx.lineTo(385, legendY); ctx.stroke();
      ctx.fillStyle = '#cbd5e1';
      ctx.fillText('f(g(x)) = x - 1', 390, legendY + 4);

      ctx.strokeStyle = '#60a5fa';
      ctx.beginPath(); ctx.moveTo(520, legendY); ctx.lineTo(545, legendY); ctx.stroke();
      ctx.fillStyle = '#cbd5e1';
      ctx.fillText('g(f(x)) = x + 1', 550, legendY + 4);
    }
  }

  // Button handling
  window.setView = function(view) {
    currentView = view;
    document.querySelectorAll('.canvas-btn').forEach(btn => btn.classList.remove('active'));
    document.getElementById({
      'all': 'btnAll',
      'fg': 'btnFG',
      'gf': 'btnGF',
      'diff': 'btnDiff'
    }[view]).classList.add('active');
    draw();
  };

  // Mouse/touch interaction - show coordinates
  let mousePos = null;

  function getMousePos(e) {
    const rect = canvas.getBoundingClientRect();
    const scaleX = W / rect.width;
    const scaleY = H / rect.height;
    const clientX = e.touches ? e.touches[0].clientX : e.clientX;
    const clientY = e.touches ? e.touches[0].clientY : e.clientY;
    return {
      x: (clientX - rect.left) * scaleX,
      y: (clientY - rect.top) * scaleY
    };
  }

  function handleMove(e) {
    e.preventDefault();
    const pos = getMousePos(e);
    if (pos.x < marginL || pos.x > W - marginR || pos.y < marginT || pos.y > H - marginB) {
      mousePos = null;
      draw();
      return;
    }

    const mathX = xMin + (pos.x - marginL) / plotW * (xMax - xMin);
    mousePos = { x: mathX, canvasX: pos.x, canvasY: pos.y };
    draw();

    // Draw crosshair and values
    ctx.save();
    ctx.strokeStyle = 'rgba(148, 163, 184, 0.3)';
    ctx.lineWidth = 1;
    ctx.setLineDash([3, 3]);
    ctx.beginPath();
    ctx.moveTo(pos.x, marginT);
    ctx.lineTo(pos.x, H - marginB);
    ctx.stroke();
    ctx.setLineDash([]);

    // Show function values
    const mx = mathX;
    const vals = [
      { label: 'f(g(x))', val: fg(mx), color: '#f472b6' },
      { label: 'g(f(x))', val: gf(mx), color: '#60a5fa' },
      { label: 'razlika', val: diff(mx), color: '#4ade80' }
    ];

    const tooltipX = pos.x + 15;
    const tooltipY = Math.max(marginT + 10, Math.min(pos.y - 30, H - marginB - 80));

    ctx.fillStyle = 'rgba(15, 23, 42, 0.92)';
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    const tw = 180;
    const th = 82;
    ctx.beginPath();
    ctx.roundRect(tooltipX, tooltipY, tw, th, 8);
    ctx.fill();
    ctx.stroke();

    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('x = ' + mx.toFixed(1).replace('.', ','), tooltipX + 10, tooltipY + 18);

    vals.forEach((v, i) => {
      ctx.fillStyle = v.color;
      ctx.fillText(v.label + ' = ' + v.val.toFixed(1).replace('.', ','), tooltipX + 10, tooltipY + 36 + i * 17);

      // Draw dot on function
      const dotY = toCanvasY(v.val);
      if (dotY >= marginT && dotY <= H - marginB) {
        ctx.beginPath();
        ctx.arc(pos.x, dotY, 4, 0, Math.PI * 2);
        ctx.fillStyle = v.color;
        ctx.fill();
      }
    });

    ctx.restore();
  }

  function handleLeave() {
    mousePos = null;
    draw();
  }

  canvas.addEventListener('mousemove', handleMove);
  canvas.addEventListener('touchmove', handleMove, { passive: false });
  canvas.addEventListener('mouseleave', handleLeave);
  canvas.addEventListener('touchend', handleLeave);

  draw();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Kompozicija funkcija f(g(x)) − g(f(x))",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["kompozicija funkcija", "linearne funkcije", "algebra funkcija", "operacije sa funkcijama"]
}
BRAINSPARK_META-->