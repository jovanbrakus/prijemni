<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Deljivost polinoma sa x^2 + 1</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
Problem: Polinom P(x) = x^2009 + ax^2 + bx + 1 je deljiv polinomom x^2 + 1.
Naći 2a + b.

Korak 1: Ako je x^2 + 1 | P(x), onda su nule od x^2 + 1 ujedno i nule od P(x).
  Nule od x^2 + 1 su x = i i x = -i (imaginarni koren).

Korak 2: Supstituišemo x = i u P(x) = 0:
  i^2009 + a*i^2 + b*i + 1 = 0

Korak 3: Izračunamo i^2009.
  Ciklus stepena od i: i^1 = i, i^2 = -1, i^3 = -i, i^4 = 1, i^5 = i, ...
  Perioda je 4.
  2009 = 4 * 502 + 1, dakle i^2009 = i^1 = i.

Korak 4: Zamena:
  i + a*(-1) + b*i + 1 = 0
  (1 - a) + (1 + b)*i = 0

Korak 5: Da bi kompleksan broj bio jednak nuli,
  i realni i imaginarni deo moraju biti nula:
  Realni deo: 1 - a = 0  =>  a = 1
  Imaginarni deo: 1 + b = 0  =>  b = -1

Korak 6: 2a + b = 2*1 + (-1) = 2 - 1 = 1

Verifikacija sa x = -i:
  (-i)^2009 + a*(-i)^2 + b*(-i) + 1
  = -i + a*(-1) + (-b*i) + 1
  = (1 - a) + (-1 - b)*i
  = (1 - 1) + (-1 - (-1))*i
  = 0 + 0*i = 0  ✓

Odgovor: (A) 1
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 14px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 120px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #60a5fa;
  font-size: 1.15rem;
  font-weight: 700;
}

.plan-card {
  border-left: 4px solid #a78bfa;
}

.plan-card h2 { color: #a78bfa; }

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 10px 14px;
  background: rgba(96,165,250,0.06);
  border-radius: 8px;
  border: 1px solid rgba(96,165,250,0.12);
  list-style: none;
  user-select: none;
}

details summary::-webkit-details-marker { display: none; }

details summary::before {
  content: '\25B8 ';
  display: inline;
}

details[open] summary::before {
  content: '\25BE ';
}

details .details-content {
  padding: 14px 18px;
  margin-top: 8px;
  background: rgba(96,165,250,0.04);
  border-radius: 8px;
  border: 1px solid rgba(96,165,250,0.08);
}

.step-container {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  align-items: flex-start;
}

.step-badge {
  min-width: 34px;
  height: 34px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: 0.95rem;
  color: #0f172a;
  margin-top: 2px;
  flex-shrink: 0;
}

.step-content {
  flex: 1;
  min-width: 0;
}

.step-content h3 {
  margin-bottom: 8px;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 14px;
  padding: 22px 26px;
  margin-bottom: 24px;
}

.insight-box h2 { color: #a78bfa; }

.final-answer-box {
  background: linear-gradient(135deg, rgba(52,211,153,0.1), rgba(74,222,128,0.08));
  border: 2px solid rgba(52,211,153,0.35);
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin-bottom: 24px;
}

.final-answer-box .answer-value {
  font-size: 2.4rem;
  font-weight: 800;
  color: #4ade80;
  margin: 16px 0;
}

.options-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin: 18px 0;
}

.option-chip {
  background: rgba(96,165,250,0.08);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 22px;
  font-size: 1.05rem;
  color: #94a3b8;
  transition: all 0.2s;
}

.option-chip.correct {
  background: rgba(52,211,153,0.15);
  border-color: #34d399;
  color: #4ade80;
  font-weight: 700;
  box-shadow: 0 0 20px rgba(52,211,153,0.15);
}

.pitfall-box {
  border-left: 4px solid #e09468;
}

.pitfall-box h2 { color: #e09468; }

.challenge-box {
  border-left: 4px solid #a78bfa;
}

.challenge-box h2 { color: #a78bfa; }

.canvas-wrapper {
  background: #0c1222;
  border-radius: 12px;
  border: 1px solid #334155;
  overflow: hidden;
  margin: 14px 0;
}

canvas {
  width: 100%;
  display: block;
  touch-action: none;
}

.provera-note {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 12px;
  padding: 12px 16px;
  background: rgba(52,211,153,0.05);
  border-radius: 8px;
  border: 1px solid rgba(52,211,153,0.12);
}

.formula-list {
  list-style: none;
  padding: 0;
}

.formula-list li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
}

.formula-list li:last-child { border-bottom: none; }

.cycle-table {
  width: 100%;
  border-collapse: collapse;
  margin: 14px 0;
}

.cycle-table th, .cycle-table td {
  padding: 10px 14px;
  text-align: center;
  border: 1px solid #334155;
}

.cycle-table th {
  background: rgba(96,165,250,0.1);
  color: #60a5fa;
  font-weight: 700;
}

.cycle-table td {
  background: rgba(30,41,59,0.5);
}

.cycle-table .active-cell {
  background: rgba(244,114,182,0.15);
  border-color: #f472b6;
  color: #f472b6;
  font-weight: 700;
}

.system-box {
  background: rgba(167,139,250,0.06);
  border: 1px solid rgba(167,139,250,0.2);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 12px 0;
}

.system-row {
  display: flex;
  gap: 16px;
  align-items: center;
  margin: 8px 0;
}

.system-label {
  color: #94a3b8;
  font-size: 0.9rem;
  min-width: 120px;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step-container { flex-direction: column; gap: 8px; }
  .given-grid { flex-direction: column; }
  .options-grid { flex-direction: column; align-items: center; }
  .final-answer-box .answer-value { font-size: 1.8rem; }
  .cycle-table th, .cycle-table td { padding: 6px 8px; font-size: 0.9rem; }
}
</style>
</head>
<body>

<div class="container">

  <!-- Title -->
  <h1>Deljivost polinoma sa \(x^2 + 1\)</h1>
  <p class="subtitle">Odredjivanje koeficijenata polinoma koriscenjem kompleksnih korena -- ETF Beograd 2009, zadatak 6</p>

  <!-- Problem Statement -->
  <div class="card">
    <h2>Postavka zadatka</h2>
    <p>Ako je polinom</p>
    <div class="math-box">
      \[ P(x) = x^{2009} + ax^2 + bx + 1 \]
    </div>
    <p>(gde su \(a, b\) realni brojevi) deljiv polinomom \(x^2 + 1\), tada je \(2a + b\) jednako:</p>
    <div class="given-grid">
      <div class="given-item">
        <div class="label">Odgovor (A)</div>
        <div class="value">\(1\)</div>
      </div>
      <div class="given-item">
        <div class="label">Odgovor (B)</div>
        <div class="value">\(-1\)</div>
      </div>
      <div class="given-item">
        <div class="label">Odgovor (C)</div>
        <div class="value">\(-3\)</div>
      </div>
      <div class="given-item">
        <div class="label">Odgovor (D)</div>
        <div class="value">\(3\)</div>
      </div>
      <div class="given-item">
        <div class="label">Odgovor (E)</div>
        <div class="value">\(0\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>Ako polinom \(x^2+1\) deli \(P(x)\), onda su nule od \(x^2+1\) -- to jest \(x = i\) i \(x = -i\) --
       ujedno i nule od \(P(x)\). Supstituisacemo \(x = i\) u jednacinu \(P(x) = 0\),
       izracunati \(i^{2009}\) koristeci ciklicnost stepena imaginarne jedinice,
       razdvojiti realni i imaginarni deo, i resiti sistem jednacina za \(a\) i \(b\).</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Podsetnik: kompleksni brojevi i stepeni od \(i\)</summary>
      <div class="details-content">
        <ul class="formula-list">
          <li><strong>Imaginarna jedinica:</strong> \(i = \sqrt{-1}\), pa \(i^2 = -1\)</li>
          <li><strong>Ciklicnost stepena od \(i\):</strong> Stepeni od \(i\) se ponavljaju sa periodom 4:
            \(i^1 = i,\; i^2 = -1,\; i^3 = -i,\; i^4 = 1,\; i^5 = i, \ldots\)</li>
          <li><strong>Odredjivanje \(i^n\):</strong> Dovoljno je izracunati \(n \mod 4\) -- ostatak odredjuje vrednost</li>
          <li><strong>Nule polinoma:</strong> Ako je \(q(x) \mid P(x)\) i \(q(x_0) = 0\), onda je i \(P(x_0) = 0\)</li>
          <li><strong>Kompleksan broj = 0:</strong> Ako je \(\alpha + \beta i = 0\) (gde su \(\alpha, \beta \in \mathbb{R}\)), onda \(\alpha = 0\) i \(\beta = 0\)</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- Visual Aid: Complex Plane -->
  <div class="card">
    <h2>Vizuelni prikaz -- koreni na kompleksnoj ravni</h2>
    <p style="color: #94a3b8; margin-bottom: 10px;">Nule polinoma \(x^2 + 1\) su tacke \(i\) i \(-i\) na imaginarnoj osi. Obe moraju biti nule polinoma \(P(x)\).</p>
    <div class="canvas-wrapper">
      <canvas id="complexPlane" width="800" height="500"></canvas>
    </div>
    <p style="color:#94a3b8; font-size:0.9rem; margin-top:8px;">Pomeranje misa/prsta preko platna prikazuje koordinate tacke.</p>
  </div>

  <!-- Step-by-step Solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Odredimo nule polinoma \(x^2 + 1\)</h3>
        <p>Resavamo jednacinu \(x^2 + 1 = 0\):</p>
        <div class="math-box">
          \[ x^2 = -1 \quad \Rightarrow \quad x = \pm i \]
        </div>
        <p>Dakle, nule polinoma \(x^2 + 1\) su <span class="highlight">\(x = i\)</span> i <span class="highlight">\(x = -i\)</span>.</p>
        <p>Posto \(x^2 + 1\) deli \(P(x)\), to znaci da mora vaziti \(P(i) = 0\) i \(P(-i) = 0\).</p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Izracunajmo \(i^{2009}\) koriscenjem ciklicnosti</h3>
        <p>Stepeni imaginarne jedinice \(i\) se ciklicno ponavljaju sa periodom 4:</p>
        <table class="cycle-table">
          <tr>
            <th>Ostatak pri deljenju sa 4</th>
            <th>\(n \equiv 0\)</th>
            <th>\(n \equiv 1\)</th>
            <th>\(n \equiv 2\)</th>
            <th>\(n \equiv 3\)</th>
          </tr>
          <tr>
            <td>\(i^n = \)</td>
            <td>\(1\)</td>
            <td class="active-cell">\(i\)</td>
            <td>\(-1\)</td>
            <td>\(-i\)</td>
          </tr>
        </table>
        <p>Delimo 2009 sa 4:</p>
        <div class="math-box">
          \[ 2009 = 4 \cdot 502 + 1 \quad \Rightarrow \quad 2009 \equiv 1 \pmod{4} \]
        </div>
        <p>Dakle:</p>
        <div class="math-box">
          \[ i^{2009} = i^{4 \cdot 502 + 1} = \left(i^4\right)^{502} \cdot i^1 = 1^{502} \cdot i = i \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details>
      <summary>Proveri se: Zasto se stepeni od \(i\) ponavljaju sa periodom 4?</summary>
      <div class="details-content">
        <p>Zato sto je \(i^4 = (i^2)^2 = (-1)^2 = 1\). Kad pomnozimo sa \(i^4 = 1\), nista se ne menja. Zato za bilo koji eksponent \(n\) vazi \(i^n = i^{n \bmod 4}\). Na primer, \(i^{2009} = i^{2009 \bmod 4} = i^1 = i\).</p>
      </div>
    </details>

    <!-- Step 3 -->
    <div class="step-container">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Supstituisemo \(x = i\) u \(P(x) = 0\)</h3>
        <p>Uvrstimo \(x = i\) u polinom \(P(x) = x^{2009} + ax^2 + bx + 1\):</p>
        <div class="math-box">
          \[ P(i) = i^{2009} + a \cdot i^2 + b \cdot i + 1 = 0 \]
        </div>
        <p>Vec znamo da je \(i^{2009} = i\) i \(i^2 = -1\), pa zamenjujemo:</p>
        <div class="math-box">
          \[ i + a \cdot (-1) + b \cdot i + 1 = 0 \]
        </div>
        <p>Sredjujemo -- grupisemo realni i imaginarni deo:</p>
        <div class="math-box">
          \[ \underbrace{(1 - a)}_{\text{realni deo}} + \underbrace{(1 + b)}_{\text{imaginarni deo}} \cdot i = 0 \]
        </div>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step-container">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Postavimo sistem jednacina</h3>
        <p>Kompleksan broj je jednak nuli ako i samo ako su mu i realni i imaginarni deo jednaki nuli.
           Posto su \(a\) i \(b\) realni brojevi, dobijamo sistem:</p>
        <div class="system-box">
          <div class="system-row">
            <span class="system-label">Realni deo = 0:</span>
            <span>\(1 - a = 0 \quad \Rightarrow \quad \boxed{a = 1}\)</span>
          </div>
          <div class="system-row">
            <span class="system-label">Imaginarni deo = 0:</span>
            <span>\(1 + b = 0 \quad \Rightarrow \quad \boxed{b = -1}\)</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details>
      <summary>Proveri se: Da li uslov \(P(-i) = 0\) daje isti rezultat?</summary>
      <div class="details-content">
        <p>Da! Proverimo. Posto je \((-i)^{2009} = -i^{2009} = -i\) (jer je 2009 neparan stepen), imamo:</p>
        <div class="math-box">
          \[ P(-i) = (-i)^{2009} + a(-i)^2 + b(-i) + 1 \]
          \[ = -i + a(-1) - bi + 1 \]
          \[ = (1 - a) + (-1 - b) \cdot i \]
        </div>
        <p>Za \(a = 1\) i \(b = -1\): \((1-1) + (-1-(-1))i = 0 + 0 \cdot i = 0\). Potvrdjeno!</p>
        <p style="color:#94a3b8; margin-top:8px;">Ovo je ocekivano: posto su \(a\) i \(b\) realni, konjugovani koreni uvek daju konzistentne uslove.</p>
      </div>
    </details>

    <!-- Step 5 -->
    <div class="step-container">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Izracunajmo trazenu vrednost \(2a + b\)</h3>
        <p>Sada kad znamo \(a = 1\) i \(b = -1\), uvrstimo:</p>
        <div class="math-box">
          \[ 2a + b = 2 \cdot 1 + (-1) = 2 - 1 = 1 \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details>
      <summary>Proveri se: Verifikacija celokupnog polinoma</summary>
      <div class="details-content">
        <p>Sa \(a = 1\) i \(b = -1\) nas polinom je:</p>
        <div class="math-box">
          \[ P(x) = x^{2009} + x^2 - x + 1 \]
        </div>
        <p>Proverimo da li \(x^2 + 1\) zaista deli ovaj polinom. Polinom \(P(x)\) se moze napisati kao:</p>
        <div class="math-box">
          \[ x^{2009} + x^2 - x + 1 = x^{2009} - x + (x^2 + 1) \]
        </div>
        <p>Sada treba samo pokazati da \(x^2 + 1 \mid x^{2009} - x\), tj. da \(x^2 + 1 \mid x(x^{2008} - 1)\).</p>
        <p>Posto \(x^2 + 1\) nema zajednicki faktor sa \(x\) (nula od \(x\) je 0, a nule od \(x^2+1\) su \(\pm i\)),
           dovoljno je pokazati da \(x^2 + 1 \mid x^{2008} - 1\). Zaista, \(i^{2008} = i^{4 \cdot 502} = 1\),
           pa \(i^{2008} - 1 = 0\). Analogno za \(-i\). Dakle, potvrdjeno!</p>
      </div>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Kljucni uvid</h2>
    <p>Kada polinom sa realnim koeficijentima treba da bude deljiv sa \(x^2 + 1\), dovoljno je
       supstituisati <span class="highlight">\(x = i\)</span> i zahtevati da realni i imaginarni deo budu jednaki nuli.
       To daje sistem od dve jednacine sa dve nepoznate. Kljucan korak je izracunavanje visokog stepena od \(i\)
       koriscenjem ciklicnosti sa periodom 4 -- dovoljno je samo naci ostatak eksponenta pri deljenju sa 4.</p>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <h2 style="color: #34d399; margin-bottom: 10px;">Konacan odgovor</h2>
    <div class="options-grid">
      <div class="option-chip correct">(A) \(1\)</div>
      <div class="option-chip">(B) \(-1\)</div>
      <div class="option-chip">(C) \(-3\)</div>
      <div class="option-chip">(D) \(3\)</div>
      <div class="option-chip">(E) \(0\)</div>
    </div>
    <div class="answer-value">\(2a + b = 1\)</div>
    <p style="color: #94a3b8; margin-top: 8px;">Gde je \(a = 1\) i \(b = -1\)</p>
    <div class="provera-note">
      <strong>Provera:</strong> Supstitucijom \(x = i\) u polinom \(x^{2009} + x^2 - x + 1\) dobijamo
      \(i - 1 - i + 1 = 0\), sto potvrdjuje da je \(x^2 + 1\) zaista delilac.
      Supstitucijom \(x = -i\) takodje dobijamo \(-i - 1 + i + 1 = 0\).
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfall-box">
    <h2>Ceste greske</h2>
    <ul style="list-style: disc; padding-left: 20px; color: #e2e8f0;">
      <li style="margin-bottom: 10px;"><strong>Pogresan izracun \(i^{2009}\):</strong> Najcesca greska je
        netacno izracunavanje ostatka pri deljenju sa 4. Neki studenti pogrece i dobiju \(i^{2009} = -i\) ili \(-1\),
        sto dovodi do pogresnih vrednosti za \(a\) i \(b\). Uvek proverite: \(2009 = 4 \times 502 + 1\).</li>
      <li style="margin-bottom: 10px;"><strong>Zaboravljanje imaginarnog dela:</strong> Posto \(a\) i \(b\) jesu realni,
        iz jedne supstitucije (\(x = i\)) dobijamo dva uslova (realni i imaginarni deo = 0). Neki studenti
        koriste samo jedan uslov i ne dobiju jedinstven odgovor.</li>
      <li><strong>Mesanje znaka kod \((-i)^{2009}\):</strong> Za neparan eksponent vazi
        \((-i)^n = (-1)^n \cdot i^n = -i^n\). Za paran eksponent vazi \((-i)^n = i^n\). Pazljivo sa znakovima!</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-box">
    <h2>Bonus izazov</h2>
    <p>Odredite realne brojeve \(a\) i \(b\) ako je polinom</p>
    <div class="math-box">
      \[ Q(x) = x^{2024} + ax^3 + bx^2 + 1 \]
    </div>
    <p>deljiv polinomom \(x^2 + 1\).</p>
    <details>
      <summary>Pogledaj nagovestaj</summary>
      <div class="details-content">
        <p>Isti pristup: supstituisi \(x = i\) i izracunaj \(i^{2024}\). Posto je \(2024 = 4 \times 506\),
           to znaci da je \(i^{2024} = 1\). Takodje, \(i^3 = -i\) i \(i^2 = -1\). Znaci:</p>
        <div class="math-box">
          \[ 1 + a(-i) + b(-1) + 1 = 0 \]
          \[ (2 - b) + (-a)i = 0 \]
        </div>
        <p>Odatle: \(b = 2\) i \(a = 0\). Proverite!</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('complexPlane');
  const ctx = canvas.getContext('2d');
  let mouseX = -1, mouseY = -1;

  function draw() {
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    canvas.width = rect.width * dpr;
    canvas.height = 500 * dpr;
    canvas.style.height = '500px';
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    const W = rect.width;
    const H = 500;

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Center and scale
    const cx = W / 2;
    const cy = H / 2;
    const scale = Math.min(W, H) * 0.3;

    // Grid
    ctx.strokeStyle = 'rgba(96,165,250,0.06)';
    ctx.lineWidth = 1;
    for (let i = -3; i <= 3; i++) {
      // Vertical
      const gx = cx + i * scale;
      ctx.beginPath();
      ctx.moveTo(gx, 30);
      ctx.lineTo(gx, H - 30);
      ctx.stroke();
      // Horizontal
      const gy = cy - i * scale;
      ctx.beginPath();
      ctx.moveTo(30, gy);
      ctx.lineTo(W - 30, gy);
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 2;
    // Real axis
    ctx.beginPath();
    ctx.moveTo(30, cy);
    ctx.lineTo(W - 30, cy);
    ctx.stroke();
    // Imaginary axis
    ctx.beginPath();
    ctx.moveTo(cx, 30);
    ctx.lineTo(cx, H - 30);
    ctx.stroke();

    // Arrows
    ctx.fillStyle = '#334155';
    // Right arrow (Re)
    ctx.beginPath();
    ctx.moveTo(W - 30, cy);
    ctx.lineTo(W - 40, cy - 5);
    ctx.lineTo(W - 40, cy + 5);
    ctx.closePath();
    ctx.fill();
    // Up arrow (Im)
    ctx.beginPath();
    ctx.moveTo(cx, 30);
    ctx.lineTo(cx - 5, 40);
    ctx.lineTo(cx + 5, 40);
    ctx.closePath();
    ctx.fill();

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Re', W - 55, cy - 12);
    ctx.textAlign = 'center';
    ctx.fillText('Im', cx + 18, 42);

    // Tick marks and numbers
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#64748b';
    for (let i = -2; i <= 2; i++) {
      if (i === 0) continue;
      // Real axis ticks
      const tx = cx + i * scale;
      ctx.strokeStyle = '#64748b';
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.moveTo(tx, cy - 4);
      ctx.lineTo(tx, cy + 4);
      ctx.stroke();
      ctx.textAlign = 'center';
      ctx.fillText(i.toString(), tx, cy + 20);

      // Imaginary axis ticks
      const ty = cy - i * scale;
      ctx.beginPath();
      ctx.moveTo(cx - 4, ty);
      ctx.lineTo(cx + 4, ty);
      ctx.stroke();
      ctx.textAlign = 'left';
      ctx.fillText(i + 'i', cx + 10, ty + 4);
    }

    // Origin label
    ctx.textAlign = 'right';
    ctx.fillText('0', cx - 8, cy + 16);

    // Unit circle (dashed)
    ctx.strokeStyle = 'rgba(96,165,250,0.15)';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([6, 6]);
    ctx.beginPath();
    ctx.arc(cx, cy, scale, 0, Math.PI * 2);
    ctx.stroke();
    ctx.setLineDash([]);

    // Label unit circle
    ctx.fillStyle = 'rgba(96,165,250,0.3)';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('|z| = 1', cx + scale * 0.72, cy + scale * 0.72 + 4);

    // Draw the cycle of powers of i
    const powers = [
      { re: 1, im: 0, label: 'i\u2070 = 1', color: '#94a3b8', labelDx: 14, labelDy: 18 },
      { re: 0, im: 1, label: 'i\u00B9 = i', color: '#f472b6', labelDx: -55, labelDy: -10, main: true },
      { re: -1, im: 0, label: 'i\u00B2 = \u22121', color: '#94a3b8', labelDx: -80, labelDy: 18 },
      { re: 0, im: -1, label: 'i\u00B3 = \u2212i', color: '#60a5fa', labelDx: -60, labelDy: 22, main: true }
    ];

    // Draw cycle arrows
    ctx.strokeStyle = 'rgba(148,163,184,0.2)';
    ctx.lineWidth = 1.5;
    for (let k = 0; k < 4; k++) {
      const startAngle = -Math.PI / 2 + k * Math.PI / 2 + 0.15;
      const endAngle = -Math.PI / 2 + (k + 1) * Math.PI / 2 - 0.15;
      ctx.beginPath();
      ctx.arc(cx, cy, scale * 1.12, startAngle, endAngle);
      ctx.stroke();
      // Small arrowhead
      const ax = cx + scale * 1.12 * Math.cos(endAngle);
      const ay = cy + scale * 1.12 * Math.sin(endAngle);
      const angle = endAngle + Math.PI / 2;
      ctx.fillStyle = 'rgba(148,163,184,0.3)';
      ctx.beginPath();
      ctx.moveTo(ax, ay);
      ctx.lineTo(ax + 6 * Math.cos(angle + 0.4), ay + 6 * Math.sin(angle + 0.4));
      ctx.lineTo(ax + 6 * Math.cos(angle - 0.4), ay + 6 * Math.sin(angle - 0.4));
      ctx.closePath();
      ctx.fill();
    }

    // Draw roots of x^2+1: i and -i
    powers.forEach((p) => {
      const px = cx + p.re * scale;
      const py = cy - p.im * scale;

      if (p.main) {
        // Highlight main roots
        // Glow ring
        ctx.strokeStyle = p.color + '44';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.arc(px, py, 16, 0, Math.PI * 2);
        ctx.stroke();

        // Filled dot
        ctx.fillStyle = p.color;
        ctx.beginPath();
        ctx.arc(px, py, 8, 0, Math.PI * 2);
        ctx.fill();

        // Outer glow
        ctx.shadowColor = p.color;
        ctx.shadowBlur = 18;
        ctx.beginPath();
        ctx.arc(px, py, 5, 0, Math.PI * 2);
        ctx.fill();
        ctx.shadowBlur = 0;
      } else {
        // Secondary points
        ctx.fillStyle = p.color + '88';
        ctx.beginPath();
        ctx.arc(px, py, 5, 0, Math.PI * 2);
        ctx.fill();
      }

      // Label
      ctx.fillStyle = p.color;
      ctx.font = (p.main ? 'bold ' : '') + '13px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText(p.label, px + p.labelDx, py + p.labelDy);
    });

    // Annotation: "Nule od x^2+1"
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    const rootLabelX = cx - scale * 0.8;
    const rootLabelYTop = cy - scale - 30;
    ctx.fillText('Nule od x\u00B2+1:', rootLabelX, rootLabelYTop);
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.fillText('x = i  i  x = \u2212i', rootLabelX, rootLabelYTop + 18);

    // i^2009 annotation
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    const annX = cx + scale * 0.4;
    const annY = 55;
    ctx.fillText('i\u00B2\u2070\u2070\u2079 = i\u2074\u00B7\u2075\u2070\u00B2\u207A\u00B9 = i', annX, annY);
    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.fillText('2009 = 4 \u00D7 502 + 1', annX, annY + 18);
    ctx.fillText('ostatak 1 \u2192 i\u00B2\u2070\u2070\u2079 = i', annX, annY + 36);

    // Solution annotation at bottom
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('P(i) = 0  \u21D2  (1\u2212a) + (1+b)i = 0', cx, H - 60);
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.fillText('a = 1,  b = \u22121  \u21D2  2a + b = 1', cx, H - 35);

    // Mouse coordinate display
    if (mouseX >= 0 && mouseX <= W && mouseY >= 0 && mouseY <= H) {
      const re = ((mouseX - cx) / scale).toFixed(2);
      const im = ((cy - mouseY) / scale).toFixed(2);
      ctx.fillStyle = 'rgba(30,41,59,0.85)';
      ctx.fillRect(mouseX + 10, mouseY - 30, 130, 24);
      ctx.strokeStyle = '#334155';
      ctx.lineWidth = 1;
      ctx.strokeRect(mouseX + 10, mouseY - 30, 130, 24);
      ctx.fillStyle = '#e2e8f0';
      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';
      const reStr = re.replace('.', ',');
      const imStr = im.replace('.', ',').replace('-', '\u2212');
      ctx.fillText('z = ' + reStr + ' + ' + imStr + 'i', mouseX + 16, mouseY - 13);
    }
  }

  function handleMove(e) {
    const rect = canvas.getBoundingClientRect();
    if (e.touches) {
      mouseX = e.touches[0].clientX - rect.left;
      mouseY = e.touches[0].clientY - rect.top;
    } else {
      mouseX = e.clientX - rect.left;
      mouseY = e.clientY - rect.top;
    }
    draw();
  }

  function handleLeave() {
    mouseX = -1;
    mouseY = -1;
    draw();
  }

  canvas.addEventListener('mousemove', handleMove);
  canvas.addEventListener('mouseleave', handleLeave);
  canvas.addEventListener('touchmove', (e) => { e.preventDefault(); handleMove(e); }, { passive: false });
  canvas.addEventListener('touchend', handleLeave);

  draw();
  window.addEventListener('resize', draw);
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Deljivost polinoma sa x^2 + 1 -- odredjivanje koeficijenata",
  "subject": "math",
  "unit": "complex_numbers",
  "topic_tags": ["kompleksni brojevi", "polinomi", "deljivost polinoma", "imaginarna jedinica", "stepeni od i", "koreni polinoma"]
}
BRAINSPARK_META-->
