<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jednakokraki trougao sa normalnim težišnim dužima</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
Problem: Osnovica jednakokrakog trougla iznosi √2 cm. Težišne duži povučene
na krake se seku pod pravim uglom. Naći površinu trougla.

Postavljanje koordinatnog sistema:
  A = (-√2/2, 0), B = (√2/2, 0), C = (0, h)
  Osnovica |AB| = √2

Težišne duži povučene NA KRAKE:
  Krak AC → težišna duž iz B ka sredini AC
  Krak BC → težišna duž iz A ka sredini BC

Sredina kraka BC:
  M_BC = ((√2/2 + 0)/2, (0 + h)/2) = (√2/4, h/2)

Sredina kraka AC:
  M_AC = ((-√2/2 + 0)/2, (0 + h)/2) = (-√2/4, h/2)

Težišna duž iz A ka M_BC:
  Vektor smera: (√2/4 - (-√2/2), h/2 - 0) = (√2/4 + √2/2, h/2) = (3√2/4, h/2)

Težišna duž iz B ka M_AC:
  Vektor smera: (-√2/4 - √2/2, h/2 - 0) = (-√2/4 - √2/2, h/2) = (-3√2/4, h/2)

Uslov upravnosti (skalarni proizvod = 0):
  (3√2/4)·(-3√2/4) + (h/2)·(h/2) = 0
  -9·2/16 + h²/4 = 0
  -9/8 + h²/4 = 0
  h² = 9/2
  h = 3/√2 = 3√2/2

Površina:
  P = (1/2) · a · h = (1/2) · √2 · 3√2/2
    = (1/2) · (3·2)/2
    = (1/2) · 3
    = 3/2 = 1,5

Odgovor: (A) 1,5 cm²
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-top: 16px;
  margin-bottom: 8px;
}

.problem-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1.5px solid #60a5fa;
  border-radius: 12px;
  padding: 20px;
  font-size: 1.15rem;
}

.plan-box {
  background: rgba(167,139,250,0.08);
  border-left: 4px solid #a78bfa;
  border-radius: 0 10px 10px 0;
  padding: 16px 20px;
}

.plan-box ol {
  padding-left: 20px;
  color: #cbd5e1;
}

.plan-box li {
  margin-bottom: 6px;
}

.theory-toggle {
  width: 100%;
  background: rgba(96,165,250,0.08);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 14px 20px;
  color: #60a5fa;
  font-size: 1.05rem;
  font-weight: 600;
  cursor: pointer;
  text-align: left;
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: background 0.2s;
}

.theory-toggle:hover {
  background: rgba(96,165,250,0.15);
}

.theory-toggle .arrow {
  transition: transform 0.3s;
  font-size: 1.2rem;
}

.theory-toggle.open .arrow {
  transform: rotate(180deg);
}

.theory-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.4s ease, padding 0.3s ease;
  padding: 0 20px;
}

.theory-content.show {
  max-height: 1200px;
  padding: 16px 20px;
}

.theory-content p, .theory-content ul {
  color: #cbd5e1;
  margin-bottom: 10px;
}

.theory-content ul {
  padding-left: 22px;
}

.theory-content li {
  margin-bottom: 4px;
}

.step {
  position: relative;
  padding: 20px 20px 20px 28px;
  border-left: 3px solid #334155;
  margin-left: 16px;
  margin-bottom: 4px;
}

.step:last-child {
  border-left-color: transparent;
}

.step::before {
  content: attr(data-step);
  position: absolute;
  left: -16px;
  top: 18px;
  width: 30px;
  height: 30px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.85rem;
  color: #0f172a;
}

.step p, .step div {
  color: #cbd5e1;
}

.step .math-block {
  background: rgba(15,23,42,0.5);
  border: 1px solid #334155;
  border-radius: 8px;
  padding: 12px 16px;
  margin: 10px 0;
  overflow-x: auto;
}

.checkpoint {
  background: rgba(96,165,250,0.08);
  border: 1px dashed #60a5fa;
  border-radius: 8px;
  padding: 10px 16px;
  margin: 12px 0 4px 0;
  font-size: 0.95rem;
  color: #94a3b8;
}

.checkpoint strong {
  color: #60a5fa;
}

.insight-box {
  background: linear-gradient(135deg, rgba(167,139,250,0.12), rgba(244,114,182,0.10));
  border: 1.5px solid #a78bfa;
  border-radius: 12px;
  padding: 20px;
}

.insight-box p {
  color: #cbd5e1;
}

.final-answer {
  background: linear-gradient(135deg, rgba(52,211,153,0.12), rgba(74,222,128,0.12));
  border: 2px solid #34d399;
  border-radius: 14px;
  padding: 24px;
  text-align: center;
}

.final-answer .label {
  color: #34d399;
  font-weight: 700;
  font-size: 1.1rem;
  margin-bottom: 10px;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.final-answer .value {
  font-size: 1.7rem;
  font-weight: 800;
  color: #4ade80;
}

.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 16px;
  margin-bottom: 8px;
  background: rgba(244,114,182,0.06);
  border-left: 3px solid #f472b6;
  border-radius: 0 8px 8px 0;
  color: #cbd5e1;
}

.pitfall-list li strong {
  color: #f472b6;
}

.challenge-box {
  background: rgba(251,191,36,0.06);
  border: 1px solid rgba(251,191,36,0.3);
  border-radius: 12px;
  padding: 20px;
}

.challenge-box p {
  color: #cbd5e1;
}

.challenge-box strong {
  color: #fbbf24;
}

canvas {
  display: block;
  margin: 0 auto;
  max-width: 100%;
  border-radius: 10px;
  cursor: grab;
}

canvas:active {
  cursor: grabbing;
}

.canvas-controls {
  display: flex;
  gap: 10px;
  justify-content: center;
  margin-top: 12px;
  flex-wrap: wrap;
}

.canvas-btn {
  background: rgba(96,165,250,0.12);
  border: 1px solid #334155;
  border-radius: 8px;
  padding: 8px 16px;
  color: #60a5fa;
  font-size: 0.9rem;
  cursor: pointer;
  transition: all 0.2s;
  font-weight: 600;
}

.canvas-btn:hover {
  background: rgba(96,165,250,0.25);
  border-color: #60a5fa;
}

.canvas-btn.active {
  background: rgba(96,165,250,0.3);
  border-color: #60a5fa;
}

.option-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
  gap: 8px;
  margin-top: 12px;
}

.option {
  padding: 8px 12px;
  border-radius: 8px;
  text-align: center;
  font-weight: 600;
  border: 1px solid #334155;
  background: rgba(15,23,42,0.4);
  color: #94a3b8;
}

.option.correct {
  border-color: #34d399;
  background: rgba(52,211,153,0.12);
  color: #4ade80;
}

@media (max-width: 700px) {
  body { padding: 10px; }
  .container { padding: 10px; }
  h1 { font-size: 1.5rem; }
  .card { padding: 16px; }
  .step { padding: 14px 14px 14px 22px; margin-left: 12px; }
  .final-answer .value { font-size: 1.3rem; }
  .option-grid { grid-template-columns: repeat(3, 1fr); }
}
</style>
</head>
<body>
<div class="container">

<h1>Jednakokraki trougao sa normalnim težišnim dužima</h1>
<p class="subtitle">ETF Beograd 2009 &mdash; Zadatak 8 &mdash; Geometrija</p>

<!-- Problem Statement -->
<div class="card">
  <h2>Tekst zadatka</h2>
  <div class="problem-box">
    <p>Osnovica jednakokrakog trougla iznosi \(\sqrt{2}\) cm. Težišne duži koje su povučene na krake seku se pod pravim uglom. Površina tog trougla (u cm\(^2\)) iznosi:</p>
    <div class="option-grid">
      <div class="option correct">(A) 1,5</div>
      <div class="option">(B) 2,5</div>
      <div class="option">(C) 2</div>
      <div class="option">(D) 3,5</div>
      <div class="option">(E) 4</div>
      <div class="option">(N) Ne znam</div>
    </div>
  </div>
</div>

<!-- Plan -->
<div class="card">
  <h2>Plan rešavanja</h2>
  <div class="plan-box">
    <ol>
      <li>Postaviti jednakokraki trougao u koordinatni sistem sa osnovicom na \(x\)-osi</li>
      <li>Odrediti središta krakova (nožišta težišnih duži)</li>
      <li>Naći vektore pravca obe težišne duži</li>
      <li>Primeniti uslov upravnosti (skalarni proizvod = 0) da se nađe visina \(h\)</li>
      <li>Izračunati površinu trougla</li>
    </ol>
  </div>
</div>

<!-- Theory Refresher -->
<div class="card">
  <h2>Teorijska osnova</h2>
  <button class="theory-toggle" id="theoryBtn" onclick="toggleTheory()">
    Težišna duž i uslov upravnosti vektora
    <span class="arrow">&#9660;</span>
  </button>
  <div class="theory-content" id="theoryContent">
    <p><strong>Težišna duž</strong> trougla je duž koja spaja teme trougla sa sredinom naspramne stranice. Svaki trougao ima tri težišne duži i one se seku u jednoj tački &mdash; <em>težištu</em> (centroidu).</p>
    <p>U ovom zadatku posmatramo dve težišne duži povučene <em>na krake</em>, tj.:</p>
    <ul>
      <li>Iz temena \(A\) ka sredini kraka \(BC\)</li>
      <li>Iz temena \(B\) ka sredini kraka \(AC\)</li>
    </ul>
    <p><strong>Uslov upravnosti dva vektora:</strong> Dva vektora \(\vec{u} = (u_1, u_2)\) i \(\vec{v} = (v_1, v_2)\) su međusobno upravna (normalna) ako i samo ako je njihov skalarni proizvod jednak nuli:</p>
    \[
      \vec{u} \cdot \vec{v} = u_1 v_1 + u_2 v_2 = 0
    \]
    <p><strong>Površina trougla:</strong></p>
    \[
      P = \frac{1}{2} \cdot a \cdot h_a
    \]
    <p>gde je \(a\) dužina osnovice, a \(h_a\) odgovarajuća visina.</p>
  </div>
</div>

<!-- Visual Aid -->
<div class="card">
  <h2>Vizuelni prikaz</h2>
  <canvas id="geoCanvas" width="600" height="500"></canvas>
  <div class="canvas-controls">
    <button class="canvas-btn active" id="btnAll" onclick="setView('all')">Kompletna slika</button>
    <button class="canvas-btn" id="btnMedians" onclick="setView('medians')">Težišne duži</button>
    <button class="canvas-btn" id="btnAngle" onclick="setView('angle')">Pravi ugao</button>
    <button class="canvas-btn" id="btnCoords" onclick="setView('coords')">Koordinate</button>
  </div>
</div>

<!-- Step-by-Step -->
<div class="card">
  <h2>Rešenje korak po korak</h2>

  <div class="step" data-step="1">
    <h3>Postavljanje koordinatnog sistema</h3>
    <p>Postavimo jednakokraki trougao \(ABC\) tako da je osnovica \(AB = \sqrt{2}\) na \(x\)-osi, simetrično u odnosu na \(y\)-osu. Neka je visina trougla jednaka \(h\).</p>
    <div class="math-block">
      \[
        A = \left(-\frac{\sqrt{2}}{2},\ 0\right), \quad
        B = \left(\frac{\sqrt{2}}{2},\ 0\right), \quad
        C = \left(0,\ h\right)
      \]
    </div>
    <p>Ovim postavljanjem koristimo simetriju trougla, što znatno pojednostavljuje račun.</p>
  </div>

  <div class="step" data-step="2">
    <h3>Središta krakova</h3>
    <p>Težišne duži su povučene <strong>na krake</strong>, dakle idemo od jednog temena ka sredini naspramnog kraka:</p>
    <div class="math-block">
      \[
        M_{BC} = \frac{B + C}{2} = \left(\frac{\frac{\sqrt{2}}{2} + 0}{2},\ \frac{0 + h}{2}\right) = \left(\frac{\sqrt{2}}{4},\ \frac{h}{2}\right)
      \]
    </div>
    <div class="math-block">
      \[
        M_{AC} = \frac{A + C}{2} = \left(\frac{-\frac{\sqrt{2}}{2} + 0}{2},\ \frac{0 + h}{2}\right) = \left(-\frac{\sqrt{2}}{4},\ \frac{h}{2}\right)
      \]
    </div>
    <div class="checkpoint"><strong>Kontrola:</strong> Sredine su simetrične u odnosu na \(y\)-osu, što je u skladu sa simetrijom trougla.</div>
  </div>

  <div class="step" data-step="3">
    <h3>Vektori pravca težišnih duži</h3>
    <p><strong>Težišna duž iz \(A\) ka \(M_{BC}\)</strong> (od temena \(A\) do sredine kraka \(BC\)):</p>
    <div class="math-block">
      \[
        \vec{m}_1 = M_{BC} - A = \left(\frac{\sqrt{2}}{4} - \left(-\frac{\sqrt{2}}{2}\right),\ \frac{h}{2} - 0\right) = \left(\frac{\sqrt{2}}{4} + \frac{2\sqrt{2}}{4},\ \frac{h}{2}\right) = \left(\frac{3\sqrt{2}}{4},\ \frac{h}{2}\right)
      \]
    </div>
    <p><strong>Težišna duž iz \(B\) ka \(M_{AC}\)</strong> (od temena \(B\) do sredine kraka \(AC\)):</p>
    <div class="math-block">
      \[
        \vec{m}_2 = M_{AC} - B = \left(-\frac{\sqrt{2}}{4} - \frac{\sqrt{2}}{2},\ \frac{h}{2} - 0\right) = \left(-\frac{\sqrt{2}}{4} - \frac{2\sqrt{2}}{4},\ \frac{h}{2}\right) = \left(-\frac{3\sqrt{2}}{4},\ \frac{h}{2}\right)
      \]
    </div>
    <div class="checkpoint"><strong>Kontrola:</strong> Vektori su simetrični po prvoj koordinati: \(\vec{m}_2\) ima suprotnu \(x\)-komponentu od \(\vec{m}_1\), a istu \(y\)-komponentu. To odgovara simetriji trougla.</div>
  </div>

  <div class="step" data-step="4">
    <h3>Uslov upravnosti</h3>
    <p>Težišne duži se seku pod pravim uglom, tj. \(\vec{m}_1 \perp \vec{m}_2\). Primenjujemo uslov:</p>
    <div class="math-block">
      \[
        \vec{m}_1 \cdot \vec{m}_2 = 0
      \]
    </div>
    <p>Računamo skalarni proizvod:</p>
    <div class="math-block">
      \[
        \frac{3\sqrt{2}}{4} \cdot \left(-\frac{3\sqrt{2}}{4}\right) + \frac{h}{2} \cdot \frac{h}{2} = 0
      \]
    </div>
    <div class="math-block">
      \[
        -\frac{9 \cdot 2}{16} + \frac{h^2}{4} = 0
      \]
    </div>
    <div class="math-block">
      \[
        -\frac{9}{8} + \frac{h^2}{4} = 0
      \]
    </div>
    <p>Rešavamo po \(h^2\):</p>
    <div class="math-block">
      \[
        \frac{h^2}{4} = \frac{9}{8} \quad \Longrightarrow \quad h^2 = \frac{9}{2} \quad \Longrightarrow \quad h = \frac{3}{\sqrt{2}} = \frac{3\sqrt{2}}{2}
      \]
    </div>
    <div class="checkpoint"><strong>Kontrola:</strong> Visina \(h = \frac{3\sqrt{2}}{2} \approx 2{,}12\) cm je pozitivna i veća od polovine osnovice, što je smisleno za jednakokraki trougao.</div>
  </div>

  <div class="step" data-step="5">
    <h3>Računanje površine</h3>
    <p>Sada imamo sve podatke: osnovica \(a = \sqrt{2}\), visina \(h = \frac{3\sqrt{2}}{2}\).</p>
    <div class="math-block">
      \[
        P = \frac{1}{2} \cdot a \cdot h = \frac{1}{2} \cdot \sqrt{2} \cdot \frac{3\sqrt{2}}{2}
      \]
    </div>
    <p>Množimo u brojiocu:</p>
    <div class="math-block">
      \[
        P = \frac{1}{2} \cdot \frac{3 \cdot \sqrt{2} \cdot \sqrt{2}}{2} = \frac{1}{2} \cdot \frac{3 \cdot 2}{2} = \frac{1}{2} \cdot 3 = \frac{3}{2} = 1{,}5
      \]
    </div>
  </div>
</div>

<!-- Key Insight -->
<div class="card">
  <h2>Ključni uvid</h2>
  <div class="insight-box">
    <p>Kada jednakokraki trougao postavimo simetrično u koordinatni sistem, vektori pravca težišnih duži imaju suprotne \(x\)-komponente, ali iste \(y\)-komponente. Uslov upravnosti tada daje jednu jednačinu sa jednom nepoznatom (visinom \(h\)), čime se problem svodi na jednostavno rešavanje kvadratne jednačine. Ovaj pristup je moćan jer simetrija prepolovi posao!</p>
  </div>
</div>

<!-- Final Answer -->
<div class="card">
  <div class="final-answer">
    <div class="label">Konačan odgovor</div>
    <div class="value">\(\displaystyle P = \frac{3}{2} = 1{,}5 \text{ cm}^2\)</div>
    <p style="margin-top:10px; color:#34d399; font-weight:600;">Tačan odgovor je (A) 1,5</p>
  </div>
</div>

<!-- Common Pitfalls -->
<div class="card">
  <h2>Česte greške</h2>
  <ul class="pitfall-list">
    <li><strong>Pogrešna identifikacija težišnih duži:</strong> Zadatak kaže "težišne duži povučene na krake". To znači da su stranice na koje se spuštaju težišne duži upravo <em>krakovi</em> (a ne osnovica). Svaka od ovih težišnih duži ide od jednog krajnjeg temena osnovice ka sredini naspramnog kraka.</li>
    <li><strong>Greška pri računanju sredina:</strong> Sredina duži \(BC\) je \(\frac{B+C}{2}\), ne \(\frac{B-C}{2}\). Pažljivo sa koordinatama!</li>
    <li><strong>Zaboravljen uslov upravnosti:</strong> Dva pravca su upravna kada je skalarni proizvod njihovih vektora pravca jednak nuli, a ne kada je jednak jedinici.</li>
    <li><strong>Uzimanje pogrešnog znaka za \(h\):</strong> Iz \(h^2 = \frac{9}{2}\) uzimamo pozitivnu vrednost jer je \(h\) visina (dužina).</li>
  </ul>
</div>

<!-- Optional Challenge -->
<div class="card">
  <h2>Dodatni izazov</h2>
  <div class="challenge-box">
    <p><strong>Za razmišljanje:</strong> Ako su se težišne duži povučene na krake sekle pod uglom od \(60°\) (umesto \(90°\)), kolika bi bila površina jednakokrakog trougla sa istom osnovicom \(\sqrt{2}\) cm?</p>
    <p style="margin-top:8px;"><strong>Savet:</strong> Umesto skalarnog proizvoda jednakog nuli, koristite formulu \(\cos\theta = \frac{\vec{m}_1 \cdot \vec{m}_2}{|\vec{m}_1| \cdot |\vec{m}_2|}\) i iskoristite činjenicu da su dužine oba vektora jednake (opet zahvaljujući simetriji).</p>
  </div>
</div>

</div>

<script>
(function() {
  // Theory toggle
  window.toggleTheory = function() {
    var btn = document.getElementById('theoryBtn');
    var content = document.getElementById('theoryContent');
    btn.classList.toggle('open');
    content.classList.toggle('show');
  };

  // Canvas drawing
  var canvas = document.getElementById('geoCanvas');
  var ctx = canvas.getContext('2d');
  var currentView = 'all';
  var dpr = window.devicePixelRatio || 1;
  var animProgress = 0;
  var animTarget = 1;
  var animFrame = null;

  function setupCanvas() {
    var rect = canvas.getBoundingClientRect();
    var w = rect.width || 600;
    canvas.width = w * dpr;
    canvas.height = (w * 500 / 600) * dpr;
    canvas.style.width = w + 'px';
    canvas.style.height = (w * 500 / 600) + 'px';
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
  }

  // Math coordinates -> canvas coordinates
  var sqrt2 = Math.sqrt(2);
  var h = 3 * sqrt2 / 2;

  // Triangle vertices in math coords
  var Ax = -sqrt2 / 2, Ay = 0;
  var Bx = sqrt2 / 2, By = 0;
  var Cx = 0, Cy = h;

  // Midpoints
  var Mbc_x = sqrt2 / 4, Mbc_y = h / 2;
  var Mac_x = -sqrt2 / 4, Mac_y = h / 2;

  // Find intersection of medians from A->Mbc and B->Mac
  // Parametric: A + t*(Mbc - A) = B + s*(Mac - B)
  // Solve for t:
  var dx1 = Mbc_x - Ax, dy1 = Mbc_y - Ay;
  var dx2 = Mac_x - Bx, dy2 = Mac_y - By;
  // Ax + t*dx1 = Bx + s*dx2
  // Ay + t*dy1 = By + s*dy2
  // From second eq (Ay=By=0): t*dy1 = s*dy2 => t = s (since dy1=dy2)
  // From first: Ax + t*dx1 = Bx + t*dx2
  // t*(dx1 - dx2) = Bx - Ax
  var t_param = (Bx - Ax) / (dx1 - dx2);
  var Gx = Ax + t_param * dx1;
  var Gy = Ay + t_param * dy1;

  function toCanvas(mx, my, cw, ch) {
    var padding = 50;
    var drawW = cw - 2 * padding;
    var drawH = ch - 2 * padding;

    // Range of math coords
    var xMin = -1.2, xMax = 1.2;
    var yMin = -0.4, yMax = h + 0.4;
    var xRange = xMax - xMin;
    var yRange = yMax - yMin;

    var scaleX = drawW / xRange;
    var scaleY = drawH / yRange;
    var scale = Math.min(scaleX, scaleY);

    var cx = padding + drawW / 2 + (mx - (xMin + xMax) / 2) * scale;
    var cy = padding + drawH / 2 - (my - (yMin + yMax) / 2) * scale;
    return [cx, cy];
  }

  function drawLine(x1, y1, x2, y2, color, width, dash, cw, ch) {
    var p1 = toCanvas(x1, y1, cw, ch);
    var p2 = toCanvas(x2, y2, cw, ch);
    ctx.beginPath();
    ctx.strokeStyle = color;
    ctx.lineWidth = width;
    if (dash) ctx.setLineDash(dash);
    else ctx.setLineDash([]);
    ctx.moveTo(p1[0], p1[1]);
    ctx.lineTo(p2[0], p2[1]);
    ctx.stroke();
    ctx.setLineDash([]);
  }

  function drawPoint(x, y, color, radius, cw, ch) {
    var p = toCanvas(x, y, cw, ch);
    ctx.beginPath();
    ctx.arc(p[0], p[1], radius, 0, 2 * Math.PI);
    ctx.fillStyle = color;
    ctx.fill();
  }

  function drawLabel(text, x, y, color, offsetX, offsetY, fontSize, cw, ch) {
    var p = toCanvas(x, y, cw, ch);
    ctx.font = (fontSize || 14) + 'px "Segoe UI", system-ui, sans-serif';
    ctx.fillStyle = color;
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText(text, p[0] + (offsetX || 0), p[1] + (offsetY || 0));
  }

  function drawRightAngleMark(ox, oy, dx1, dy1, dx2, dy2, size, cw, ch) {
    var po = toCanvas(ox, oy, cw, ch);
    var p1 = toCanvas(ox + dx1, oy + dy1, cw, ch);
    var p2 = toCanvas(ox + dx2, oy + dy2, cw, ch);

    // Directions in canvas coords
    var v1x = p1[0] - po[0], v1y = p1[1] - po[1];
    var v2x = p2[0] - po[0], v2y = p2[1] - po[1];
    var len1 = Math.sqrt(v1x * v1x + v1y * v1y);
    var len2 = Math.sqrt(v2x * v2x + v2y * v2y);
    v1x /= len1; v1y /= len1;
    v2x /= len2; v2y /= len2;

    var s = size || 14;
    var ax = po[0] + v1x * s;
    var ay = po[1] + v1y * s;
    var bx = ax + v2x * s;
    var by = ay + v2y * s;
    var cx2 = po[0] + v2x * s;
    var cy2 = po[1] + v2y * s;

    ctx.beginPath();
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2;
    ctx.moveTo(ax, ay);
    ctx.lineTo(bx, by);
    ctx.lineTo(cx2, cy2);
    ctx.stroke();
  }

  function draw() {
    var cw = canvas.width / dpr;
    var ch = canvas.height / dpr;
    ctx.clearRect(0, 0, cw, ch);

    // Background
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, cw, ch);

    var showCoords = (currentView === 'coords' || currentView === 'all');
    var showMedians = (currentView === 'medians' || currentView === 'all');
    var showAngle = (currentView === 'angle' || currentView === 'all');

    // Draw axes if coords view
    if (showCoords) {
      // x-axis
      drawLine(-1.15, 0, 1.15, 0, 'rgba(148,163,184,0.3)', 1, [4, 4], cw, ch);
      // y-axis
      drawLine(0, -0.3, 0, h + 0.3, 'rgba(148,163,184,0.3)', 1, [4, 4], cw, ch);
      drawLabel('x', 1.12, -0.12, '#94a3b8', 0, 0, 12, cw, ch);
      drawLabel('y', 0.08, h + 0.25, '#94a3b8', 10, 0, 12, cw, ch);
    }

    // Draw triangle (always)
    var triColor = '#60a5fa';
    drawLine(Ax, Ay, Bx, By, triColor, 2.5, null, cw, ch);
    drawLine(Bx, By, Cx, Cy, triColor, 2.5, null, cw, ch);
    drawLine(Cx, Cy, Ax, Ay, triColor, 2.5, null, cw, ch);

    // Fill triangle lightly
    var pA = toCanvas(Ax, Ay, cw, ch);
    var pB = toCanvas(Bx, By, cw, ch);
    var pC = toCanvas(Cx, Cy, cw, ch);
    ctx.beginPath();
    ctx.moveTo(pA[0], pA[1]);
    ctx.lineTo(pB[0], pB[1]);
    ctx.lineTo(pC[0], pC[1]);
    ctx.closePath();
    ctx.fillStyle = 'rgba(96,165,250,0.06)';
    ctx.fill();

    // Draw medians
    if (showMedians) {
      // Median from A to Mbc (on krak BC)
      drawLine(Ax, Ay, Mbc_x, Mbc_y, '#a78bfa', 2, null, cw, ch);
      // Median from B to Mac (on krak AC)
      drawLine(Bx, By, Mac_x, Mac_y, '#f472b6', 2, null, cw, ch);

      // Midpoint markers
      drawPoint(Mbc_x, Mbc_y, '#a78bfa', 5, cw, ch);
      drawPoint(Mac_x, Mac_y, '#f472b6', 5, cw, ch);

      drawLabel('M_BC', Mbc_x, Mbc_y, '#a78bfa', 22, -12, 13, cw, ch);
      drawLabel('M_AC', Mac_x, Mac_y, '#f472b6', -26, -12, 13, cw, ch);

      // Intersection point (centroid G)
      drawPoint(Gx, Gy, '#fbbf24', 6, cw, ch);
      drawLabel('T', Gx, Gy, '#fbbf24', 14, -10, 14, cw, ch);
    }

    // Right angle mark
    if (showAngle && showMedians) {
      // Directions from G along each median
      var d1x = Mbc_x - Ax, d1y = Mbc_y - Ay;
      var d2x = Mac_x - Bx, d2y = Mac_y - By;
      var len1 = Math.sqrt(d1x * d1x + d1y * d1y);
      var len2 = Math.sqrt(d2x * d2x + d2y * d2y);
      var s = 0.12;
      drawRightAngleMark(Gx, Gy, d1x / len1 * s, d1y / len1 * s, d2x / len2 * s, d2y / len2 * s, 16, cw, ch);

      // Label "90°"
      drawLabel('90°', Gx, Gy, '#f472b6', 0, 22, 13, cw, ch);
    }

    // Vertex labels
    drawPoint(Ax, Ay, '#e2e8f0', 5, cw, ch);
    drawPoint(Bx, By, '#e2e8f0', 5, cw, ch);
    drawPoint(Cx, Cy, '#e2e8f0', 5, cw, ch);

    if (showCoords) {
      drawLabel('A (-√2/2, 0)', Ax, Ay, '#e2e8f0', -10, 20, 12, cw, ch);
      drawLabel('B (√2/2, 0)', Bx, By, '#e2e8f0', 10, 20, 12, cw, ch);
      drawLabel('C (0, 3√2/2)', Cx, Cy, '#e2e8f0', 0, -18, 12, cw, ch);
    } else {
      drawLabel('A', Ax, Ay, '#e2e8f0', -16, 14, 16, cw, ch);
      drawLabel('B', Bx, By, '#e2e8f0', 16, 14, 16, cw, ch);
      drawLabel('C', Cx, Cy, '#e2e8f0', 0, -18, 16, cw, ch);
    }

    // Base label
    drawLabel('√2', (Ax + Bx) / 2, (Ay + By) / 2, '#34d399', 0, 22, 14, cw, ch);

    // Height dashed line
    if (showCoords) {
      drawLine(0, 0, 0, Cy, 'rgba(52,211,153,0.5)', 1.5, [6, 4], cw, ch);
      drawLabel('h = 3√2/2', 0, Cy / 2, '#34d399', 50, 0, 12, cw, ch);
    }

    // Legend
    if (showMedians) {
      var ly = ch - 20;
      ctx.font = '12px "Segoe UI", system-ui, sans-serif';

      ctx.fillStyle = '#a78bfa';
      ctx.fillRect(15, ly - 6, 20, 3);
      ctx.fillText('Težišna iz A ka M_BC', 42, ly);

      ctx.fillStyle = '#f472b6';
      ctx.fillRect(200, ly - 6, 20, 3);
      ctx.fillText('Težišna iz B ka M_AC', 227, ly);
    }
  }

  window.setView = function(view) {
    currentView = view;
    document.querySelectorAll('.canvas-btn').forEach(function(b) {
      b.classList.remove('active');
    });
    document.getElementById('btn' + view.charAt(0).toUpperCase() + view.slice(1)).classList.add('active');
    // Map button ids
    var idMap = { all: 'btnAll', medians: 'btnMedians', angle: 'btnAngle', coords: 'btnCoords' };
    document.querySelectorAll('.canvas-btn').forEach(function(b) { b.classList.remove('active'); });
    document.getElementById(idMap[view]).classList.add('active');
    draw();
  };

  setupCanvas();
  draw();

  window.addEventListener('resize', function() {
    setupCanvas();
    draw();
  });

  // Touch/click interactivity - cycle through views
  var views = ['all', 'medians', 'angle', 'coords'];
  var viewIdx = 0;
  canvas.addEventListener('click', function() {
    viewIdx = (viewIdx + 1) % views.length;
    setView(views[viewIdx]);
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{"title":"Jednakokraki trougao sa normalnim težišnim dužima","subject":"math","unit":"geometry","topic_tags":["geometrija","jednakokraki trougao","težišne duži","upravnost vektora","površina trougla","skalarni proizvod","koordinatni sistem"]}
BRAINSPARK_META-->