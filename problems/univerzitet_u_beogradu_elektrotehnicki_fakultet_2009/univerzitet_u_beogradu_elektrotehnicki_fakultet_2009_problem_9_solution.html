<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kosinusna teorema i zbir razlomaka u trouglu</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
Problem: Neka su α, β, γ uglovi, a a, b, c dužine stranica naspram datih uglova proizvoljnog trougla.
Naći vrednost izraza: (cos α)/a + (cos β)/b + (cos γ)/c

Step 1: Kosinusna teorema daje:
  cos α = (b² + c² − a²) / (2bc)
  cos β = (a² + c² − b²) / (2ac)
  cos γ = (a² + b² − c²) / (2ab)

Step 2: Delimo svaki kosinus odgovarajućom stranicom:
  cos α / a = (b² + c² − a²) / (2abc)
  cos β / b = (a² + c² − b²) / (2abc)
  cos γ / c = (a² + b² − c²) / (2abc)

Step 3: Sabiramo sve tri razlomka (isti imenilac 2abc):
  Zbir brojilaca:
  (b² + c² − a²) + (a² + c² − b²) + (a² + b² − c²)
  = b² + c² − a² + a² + c² − b² + a² + b² − c²
  = a² + b² + c²

  Dakle: (cos α)/a + (cos β)/b + (cos γ)/c = (a² + b² + c²) / (2abc)

Step 4: Proverimo odgovor (B):
  (1/2)(a/bc + b/ac + c/ab)
  = (1/2)(a²/(abc) + b²/(abc) + c²/(abc))
  = (a² + b² + c²) / (2abc) ✓

Answer: (B)
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 12px 0;
  overflow-x: auto;
}

.step {
  background: rgba(96,165,250,0.06);
  border-left: 3px solid #60a5fa;
  padding: 16px 20px;
  margin: 16px 0;
  border-radius: 0 10px 10px 0;
}

.step-number {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  color: #0f172a;
  font-weight: 800;
  font-size: 0.95rem;
  margin-right: 10px;
  flex-shrink: 0;
}

.step h3 {
  display: flex;
  align-items: center;
}

.final-answer {
  background: rgba(52,211,153,0.12);
  border: 2px solid #34d399;
  border-radius: 14px;
  padding: 24px;
  margin: 24px 0;
  text-align: center;
}

.final-answer h2 {
  color: #34d399;
  justify-content: center;
}

.final-answer .answer-value {
  font-size: 1.5rem;
  color: #4ade80;
  font-weight: 700;
  margin: 12px 0;
}

.collapsible-toggle {
  background: rgba(167,139,250,0.12);
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 10px;
  padding: 12px 20px;
  color: #a78bfa;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  width: 100%;
  text-align: left;
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: background 0.2s;
}

.collapsible-toggle:hover {
  background: rgba(167,139,250,0.2);
}

.collapsible-content {
  display: none;
  padding: 16px 0 0;
  animation: fadeIn 0.3s ease;
}

.collapsible-content.open {
  display: block;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-6px); }
  to { opacity: 1; transform: translateY(0); }
}

.arrow-icon {
  transition: transform 0.3s;
  font-size: 1.2rem;
}

.arrow-icon.open {
  transform: rotate(180deg);
}

.checkpoint {
  background: rgba(167,139,250,0.1);
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 16px 0;
}

.checkpoint h3 {
  color: #a78bfa;
}

.checkpoint button {
  background: linear-gradient(135deg, #a78bfa, #60a5fa);
  border: none;
  border-radius: 8px;
  color: #0f172a;
  font-weight: 700;
  padding: 8px 20px;
  cursor: pointer;
  font-size: 0.95rem;
  margin-top: 10px;
  transition: transform 0.15s, box-shadow 0.15s;
}

.checkpoint button:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 16px rgba(167,139,250,0.4);
}

.checkpoint .answer-reveal {
  display: none;
  margin-top: 12px;
  padding: 10px 16px;
  background: rgba(52,211,153,0.1);
  border-radius: 8px;
  color: #34d399;
}

.checkpoint .answer-reveal.visible {
  display: block;
}

.insight-box {
  background: rgba(244,114,182,0.1);
  border: 1px solid rgba(244,114,182,0.3);
  border-radius: 12px;
  padding: 20px;
  margin: 16px 0;
}

.insight-box h3 {
  color: #f472b6;
  margin-bottom: 8px;
}

.pitfall-box {
  background: rgba(251,146,60,0.1);
  border: 1px solid rgba(251,146,60,0.3);
  border-radius: 12px;
  padding: 20px;
  margin: 16px 0;
}

.pitfall-box h3 {
  color: #fb923c;
  margin-bottom: 8px;
}

.option-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 12px;
  margin: 16px 0;
}

.option-item {
  background: rgba(96,165,250,0.06);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 12px 16px;
  text-align: center;
  transition: all 0.2s;
}

.option-item.correct {
  border-color: #34d399;
  background: rgba(52,211,153,0.12);
}

.option-item.correct::after {
  content: ' \2714';
  color: #34d399;
  font-weight: bold;
}

canvas {
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  max-width: 100%;
  touch-action: none;
}

.canvas-controls {
  display: flex;
  gap: 10px;
  justify-content: center;
  flex-wrap: wrap;
  margin-top: 12px;
}

.canvas-controls button {
  background: rgba(96,165,250,0.15);
  border: 1px solid rgba(96,165,250,0.3);
  border-radius: 8px;
  color: #60a5fa;
  padding: 8px 16px;
  cursor: pointer;
  font-size: 0.9rem;
  font-weight: 600;
  transition: all 0.2s;
}

.canvas-controls button:hover {
  background: rgba(96,165,250,0.25);
}

.canvas-controls button.active {
  background: rgba(96,165,250,0.3);
  border-color: #60a5fa;
}

.plan-list {
  list-style: none;
  padding: 0;
}

.plan-list li {
  padding: 8px 0;
  padding-left: 28px;
  position: relative;
  color: #94a3b8;
}

.plan-list li::before {
  content: attr(data-num);
  position: absolute;
  left: 0;
  top: 8px;
  width: 22px;
  height: 22px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #0f172a;
  font-size: 0.75rem;
  font-weight: 800;
}

.challenge-box {
  background: rgba(96,165,250,0.08);
  border: 1px dashed rgba(96,165,250,0.4);
  border-radius: 12px;
  padding: 20px;
  margin-top: 16px;
}

.challenge-box h3 {
  color: #60a5fa;
}

@media (max-width: 700px) {
  body { padding: 10px; }
  .container { padding: 10px; }
  h1 { font-size: 1.5rem; }
  .card { padding: 16px; }
  .card h2 { font-size: 1.15rem; }
  .option-grid { grid-template-columns: 1fr; }
  .step { padding: 12px 14px; }
}
</style>
</head>
<body>
<div class="container">

  <!-- NASLOV -->
  <h1>Kosinusna teorema i zbir razlomaka u trouglu</h1>
  <p class="subtitle">ETF Beograd 2009 &mdash; Zadatak 9 &bull; Trigonometrija &bull; Kosinusna teorema</p>

  <!-- TEKST ZADATKA -->
  <div class="card">
    <h2>Tekst zadatka</h2>
    <p>Neka su \(\alpha\), \(\beta\) i \(\gamma\) uglovi, a \(a\), \(b\) i \(c\) dužine stranica naspram datih uglova proizvoljnog trougla. Tada je izraz</p>
    <div class="math-box">
      \[\frac{\cos\alpha}{a} + \frac{\cos\beta}{b} + \frac{\cos\gamma}{c}\]
    </div>
    <p>jednak:</p>
    <div class="option-grid">
      <div class="option-item">(A) \(\;\dfrac{1}{4}(a^2 + b^2 + c^2)\)</div>
      <div class="option-item correct">(B) \(\;\dfrac{1}{2}\!\left(\dfrac{a}{bc} + \dfrac{b}{ac} + \dfrac{c}{ab}\right)\)</div>
      <div class="option-item">(C) \(\;\dfrac{1}{3}(ab + ac + bc)\)</div>
      <div class="option-item">(D) \(\;\dfrac{(a+b+c)^2}{abc}\)</div>
      <div class="option-item">(E) Nijedan od ponuđenih</div>
      <div class="option-item">(N) Ne znam</div>
    </div>
  </div>

  <!-- PLAN REŠAVANJA -->
  <div class="card">
    <h2>Plan rešavanja</h2>
    <ul class="plan-list">
      <li data-num="1">Primeniti kosinusnu teoremu za svaki ugao trougla</li>
      <li data-num="2">Podeliti svaki kosinusni izraz odgovarajućom stranicom</li>
      <li data-num="3">Svesti sve razlomke na zajednički imenilac \(2abc\)</li>
      <li data-num="4">Sabrati brojioce i pojednostaviti</li>
      <li data-num="5">Uporediti dobijeni rezultat sa ponuđenim odgovorima</li>
    </ul>
  </div>

  <!-- TEORIJSKO PODSETNIK -->
  <div class="card">
    <h2>Teorijsko podsetnik</h2>
    <button class="collapsible-toggle" onclick="toggleCollapsible(this)">
      Kosinusna teorema &mdash; podsetnik
      <span class="arrow-icon">&#9660;</span>
    </button>
    <div class="collapsible-content">
      <p style="margin-bottom:12px;">U proizvoljnom trouglu sa stranicama \(a\), \(b\), \(c\) i naspramnim uglovima \(\alpha\), \(\beta\), \(\gamma\), kosinusna teorema glasi:</p>
      <div class="math-box">
        \[a^2 = b^2 + c^2 - 2bc\cos\alpha\]
        \[b^2 = a^2 + c^2 - 2ac\cos\beta\]
        \[c^2 = a^2 + b^2 - 2ab\cos\gamma\]
      </div>
      <p style="margin-top:12px;">Iz svake jednačine se može izraziti odgovarajući kosinus:</p>
      <div class="math-box">
        \[\cos\alpha = \frac{b^2 + c^2 - a^2}{2bc}, \quad
          \cos\beta = \frac{a^2 + c^2 - b^2}{2ac}, \quad
          \cos\gamma = \frac{a^2 + b^2 - c^2}{2ab}\]
      </div>
      <p style="margin-top:12px;">Ove formule su ključne za ovaj zadatak jer omogućavaju da kosinuse uglova izrazimo samo pomoću stranica trougla.</p>
    </div>
  </div>

  <!-- VIZUELNI PRIKAZ -->
  <div class="card">
    <h2>Vizuelni prikaz &mdash; Trougao</h2>
    <canvas id="triangleCanvas" width="600" height="450"></canvas>
    <div class="canvas-controls">
      <button id="btnDefault" class="active" onclick="setTriangleType('default')">Proizvoljni trougao</button>
      <button id="btnRight" onclick="setTriangleType('right')">Pravougli trougao</button>
      <button id="btnEquilateral" onclick="setTriangleType('equilateral')">Jednakostranični</button>
    </div>
  </div>

  <!-- KORAK PO KORAK -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <!-- Korak 1 -->
    <div class="step">
      <h3><span class="step-number">1</span> Primenimo kosinusnu teoremu</h3>
      <p>Iz kosinusne teoreme izražavamo kosinuse svih uglova trougla:</p>
      <div class="math-box">
        \[\cos\alpha = \frac{b^2 + c^2 - a^2}{2bc}\]
        \[\cos\beta = \frac{a^2 + c^2 - b^2}{2ac}\]
        \[\cos\gamma = \frac{a^2 + b^2 - c^2}{2ab}\]
      </div>
    </div>

    <!-- Korak 2 -->
    <div class="step">
      <h3><span class="step-number">2</span> Podelimo svaki kosinus odgovarajućom stranicom</h3>
      <p>Sada delimo \(\cos\alpha\) sa \(a\), \(\cos\beta\) sa \(b\) i \(\cos\gamma\) sa \(c\):</p>
      <div class="math-box">
        \[\frac{\cos\alpha}{a} = \frac{b^2 + c^2 - a^2}{2bc \cdot a} = \frac{b^2 + c^2 - a^2}{2abc}\]
      </div>
      <div class="math-box">
        \[\frac{\cos\beta}{b} = \frac{a^2 + c^2 - b^2}{2ac \cdot b} = \frac{a^2 + c^2 - b^2}{2abc}\]
      </div>
      <div class="math-box">
        \[\frac{\cos\gamma}{c} = \frac{a^2 + b^2 - c^2}{2ab \cdot c} = \frac{a^2 + b^2 - c^2}{2abc}\]
      </div>
      <p>Sva tri razlomka imaju <span class="highlight">isti imenilac</span> \(2abc\). To nam značajno olakšava sabiranje!</p>
    </div>

    <!-- Kontrolna tačka -->
    <div class="checkpoint">
      <h3>Kontrolna tačka</h3>
      <p>Pre nego što nastavimo &mdash; šta očekujete da se desi sa brojiocem kada saberemo sva tri razlomka?</p>
      <button onclick="revealAnswer(this)">Prikaži odgovor</button>
      <div class="answer-reveal">
        Mnogi članovi će se poništiti! Svaki kvadrat stranice se pojavljuje jednom sa pozitivnim i jednom sa negativnim predznakom, pa se ti parovi skrate. Na kraju ostaje samo po jedan od svakog \(a^2\), \(b^2\), \(c^2\).
      </div>
    </div>

    <!-- Korak 3 -->
    <div class="step">
      <h3><span class="step-number">3</span> Saberemo sve tri razlomke</h3>
      <p>Pošto je imenilac isti, sabiramo samo brojioce:</p>
      <div class="math-box">
        \[\frac{\cos\alpha}{a} + \frac{\cos\beta}{b} + \frac{\cos\gamma}{c}
          = \frac{(b^2 + c^2 - a^2) + (a^2 + c^2 - b^2) + (a^2 + b^2 - c^2)}{2abc}\]
      </div>
      <p>Razvijemo brojilac i grupišemo po promenljivama:</p>
      <div class="math-box">
        \[\underbrace{-a^2 + a^2 + a^2}_{= a^2} + \underbrace{b^2 - b^2 + b^2}_{= b^2} + \underbrace{c^2 + c^2 - c^2}_{= c^2}\]
      </div>
      <p>Dakle, brojilac je:</p>
      <div class="math-box">
        \[a^2 + b^2 + c^2\]
      </div>
    </div>

    <!-- Korak 4 -->
    <div class="step">
      <h3><span class="step-number">4</span> Konačni rezultat</h3>
      <p>Zamenom u razlomak dobijamo:</p>
      <div class="math-box">
        \[\frac{\cos\alpha}{a} + \frac{\cos\beta}{b} + \frac{\cos\gamma}{c}
          = \frac{a^2 + b^2 + c^2}{2abc}\]
      </div>
    </div>

    <!-- Korak 5 -->
    <div class="step">
      <h3><span class="step-number">5</span> Proverimo odgovor (B)</h3>
      <p>Odgovor (B) glasi: \(\;\dfrac{1}{2}\!\left(\dfrac{a}{bc} + \dfrac{b}{ac} + \dfrac{c}{ab}\right)\). Proverimo:</p>
      <div class="math-box">
        \[\frac{1}{2}\!\left(\frac{a}{bc} + \frac{b}{ac} + \frac{c}{ab}\right)
          = \frac{1}{2}\!\left(\frac{a^2}{abc} + \frac{b^2}{abc} + \frac{c^2}{abc}\right)
          = \frac{a^2 + b^2 + c^2}{2abc}\]
      </div>
      <p>Ovo je <span class="highlight">identično</span> našem rezultatu! Tačan odgovor je <strong>(B)</strong>.</p>
    </div>

    <!-- Kontrolna tačka 2 -->
    <div class="checkpoint">
      <h3>Kontrolna tačka &mdash; Numerička provera</h3>
      <p>Proverimo na konkretnom primeru. Za jednakostranični trougao sa \(a = b = c = 2\) važi \(\alpha = \beta = \gamma = 60°\), pa je \(\cos 60° = 0{,}5\).</p>
      <button onclick="revealAnswer(this)">Prikaži numeričku proveru</button>
      <div class="answer-reveal">
        <p>Leva strana: \(\;\dfrac{0{,}5}{2} + \dfrac{0{,}5}{2} + \dfrac{0{,}5}{2} = 0{,}25 + 0{,}25 + 0{,}25 = 0{,}75\)</p>
        <p style="margin-top:8px;">Naša formula: \(\;\dfrac{4 + 4 + 4}{2 \cdot 2 \cdot 2 \cdot 2} = \dfrac{12}{16} = 0{,}75\) &nbsp;&mdash;&nbsp; Tačno!</p>
      </div>
    </div>
  </div>

  <!-- KLJUČNI UVID -->
  <div class="card">
    <div class="insight-box">
      <h3>Ključni uvid</h3>
      <p>Čim vidite kosinuse uglova trougla u zadatku, treba razmišljati o <strong>kosinusnoj teoremi</strong>. Njenom primenom kosinusi se eliminišu i izraz se svodi na algebarski oblik koji zavisi samo od stranica. Posebno elegantno je to što se sva tri razlomka svode na isti imenilac \(2abc\), a u brojiocu dolazi do masovnog kraćenja.</p>
    </div>
  </div>

  <!-- KONAČAN ODGOVOR -->
  <div class="final-answer">
    <h2>Konačan odgovor</h2>
    <div class="answer-value">
      \[\frac{\cos\alpha}{a} + \frac{\cos\beta}{b} + \frac{\cos\gamma}{c}
        = \frac{a^2 + b^2 + c^2}{2abc}\]
    </div>
    <p style="font-size:1.2rem; margin-top:10px;">Odgovor je <strong style="color:#4ade80;">(B)</strong> \(\;\dfrac{1}{2}\!\left(\dfrac{a}{bc} + \dfrac{b}{ac} + \dfrac{c}{ab}\right)\)</p>
  </div>

  <!-- ČESTE GREŠKE -->
  <div class="card">
    <h2>Česte greške</h2>
    <div class="pitfall-box">
      <h3>Greška br. 1: Zaboraviti faktor 2 u imeniocu</h3>
      <p>Kosinusna teorema glasi \(a^2 = b^2 + c^2 - \mathbf{2}bc\cos\alpha\). Ako se izostavi dvojka pri izražavanju kosinusa, dobija se pogrešan rezultat.</p>
    </div>
    <div class="pitfall-box">
      <h3>Greška br. 2: Pogrešno rasporediti stranice</h3>
      <p>Svaki kosinus se izražava pomoću <em>druge dve</em> stranice umanjene za kvadrat naspramne stranice. Na primer, \(\cos\alpha\) zavisi od \(b\) i \(c\), ali ne od \(a^2\) sa pozitivnim predznakom.</p>
    </div>
    <div class="pitfall-box">
      <h3>Greška br. 3: Ne proveriti odgovor (B)</h3>
      <p>Odgovor (B) je zapisan u obliku \(\frac{1}{2}\!\left(\frac{a}{bc} + \frac{b}{ac} + \frac{c}{ab}\right)\), što nije odmah očigledno da je isto što i \(\frac{a^2+b^2+c^2}{2abc}\). Treba svaki sabirak dovesti na zajednički imenilac \(abc\) da bi se videla jednakost.</p>
    </div>
  </div>

  <!-- DODATNI IZAZOV -->
  <div class="card">
    <h2>Dodatni izazov</h2>
    <div class="challenge-box">
      <h3>Za razmišljanje</h3>
      <p>Koristeći sličan pristup, pokušajte da odredite vrednost izraza:</p>
      <div class="math-box">
        \[\frac{a\cos\alpha + b\cos\beta + c\cos\gamma}{a + b + c}\]
      </div>
      <p style="margin-top:10px; color:#94a3b8;">Savet: ponovo primenite kosinusnu teoremu i grupišite članove. Primetite da se u brojiocu pojavljuju izrazi oblika \(a^2b^2\).</p>
    </div>
  </div>

</div>

<script>
(function() {
  // === Collapsible toggle ===
  window.toggleCollapsible = function(btn) {
    var content = btn.nextElementSibling;
    var arrow = btn.querySelector('.arrow-icon');
    content.classList.toggle('open');
    arrow.classList.toggle('open');
  };

  // === Checkpoint reveal ===
  window.revealAnswer = function(btn) {
    var reveal = btn.nextElementSibling;
    reveal.classList.toggle('visible');
    btn.textContent = reveal.classList.contains('visible') ? 'Sakrij odgovor' : 'Prikaži odgovor';
  };

  // === Canvas drawing ===
  var canvas = document.getElementById('triangleCanvas');
  var ctx = canvas.getContext('2d');
  var currentType = 'default';
  var dpr = window.devicePixelRatio || 1;

  function setupCanvas() {
    var rect = canvas.getBoundingClientRect();
    var w = rect.width || 600;
    var h = 450;
    canvas.width = w * dpr;
    canvas.height = h * dpr;
    canvas.style.width = w + 'px';
    canvas.style.height = h + 'px';
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
  }

  var triangles = {
    'default': {
      A: {x: 100, y: 370}, B: {x: 500, y: 370}, C: {x: 220, y: 80},
      a: null, b: null, c: null,
      labels: {sideA: 'a', sideB: 'b', sideC: 'c'},
      alphaLabel: '\u03B1', betaLabel: '\u03B2', gammaLabel: '\u03B3'
    },
    'right': {
      A: {x: 120, y: 370}, B: {x: 480, y: 370}, C: {x: 120, y: 80},
      labels: {sideA: 'a', sideB: 'b', sideC: 'c'},
      alphaLabel: '\u03B1', betaLabel: '\u03B2', gammaLabel: '90\u00B0'
    },
    'equilateral': {
      A: {x: 110, y: 370}, B: {x: 490, y: 370}, C: {x: 300, y: 40},
      labels: {sideA: 'a', sideB: 'b', sideC: 'c'},
      alphaLabel: '60\u00B0', betaLabel: '60\u00B0', gammaLabel: '60\u00B0'
    }
  };

  function dist(p1, p2) {
    return Math.sqrt((p2.x - p1.x) ** 2 + (p2.y - p1.y) ** 2);
  }

  function midpoint(p1, p2) {
    return {x: (p1.x + p2.x) / 2, y: (p1.y + p2.y) / 2};
  }

  function drawAngleArc(center, p1, p2, radius, label) {
    var angle1 = Math.atan2(p1.y - center.y, p1.x - center.x);
    var angle2 = Math.atan2(p2.y - center.y, p2.x - center.x);

    // Ensure we draw the smaller arc
    var diff = angle2 - angle1;
    while (diff > Math.PI) diff -= 2 * Math.PI;
    while (diff < -Math.PI) diff += 2 * Math.PI;

    var startAngle, endAngle;
    if (diff > 0) {
      startAngle = angle1;
      endAngle = angle2;
    } else {
      startAngle = angle2;
      endAngle = angle1;
    }

    ctx.beginPath();
    ctx.arc(center.x, center.y, radius, startAngle, endAngle);
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Label
    var midAngle = (startAngle + endAngle) / 2;
    var labelR = radius + 18;
    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText(label, center.x + labelR * Math.cos(midAngle), center.y + labelR * Math.sin(midAngle));
  }

  function drawTriangle() {
    setupCanvas();
    var t = triangles[currentType];
    var A = t.A, B = t.B, C = t.C;

    var w = canvas.width / dpr;
    var h = canvas.height / dpr;

    // Clear
    ctx.clearRect(0, 0, w, h);

    // Fill background
    ctx.fillStyle = '#1e293b';
    ctx.fillRect(0, 0, w, h);

    // Draw triangle fill
    ctx.beginPath();
    ctx.moveTo(A.x, A.y);
    ctx.lineTo(B.x, B.y);
    ctx.lineTo(C.x, C.y);
    ctx.closePath();
    ctx.fillStyle = 'rgba(96, 165, 250, 0.06)';
    ctx.fill();

    // Draw triangle edges
    ctx.beginPath();
    ctx.moveTo(A.x, A.y);
    ctx.lineTo(B.x, B.y);
    ctx.lineTo(C.x, C.y);
    ctx.closePath();
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.stroke();

    // Vertices
    var vertices = [A, B, C];
    var vertexLabels = ['A', 'B', 'C'];
    var offsets = [
      {x: -18, y: 20},
      {x: 18, y: 20},
      {x: 0, y: -20}
    ];

    if (currentType === 'right') {
      offsets = [{x: -18, y: 20}, {x: 18, y: 20}, {x: -22, y: -10}];
    }

    vertices.forEach(function(v, i) {
      ctx.beginPath();
      ctx.arc(v.x, v.y, 5, 0, 2 * Math.PI);
      ctx.fillStyle = '#60a5fa';
      ctx.fill();

      ctx.fillStyle = '#e2e8f0';
      ctx.font = 'bold 18px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText(vertexLabels[i], v.x + offsets[i].x, v.y + offsets[i].y);
    });

    // Side labels (a = BC, b = AC, c = AB)
    var midBC = midpoint(B, C);
    var midAC = midpoint(A, C);
    var midAB = midpoint(A, B);

    ctx.font = 'bold 20px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#f472b6';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';

    // side a (opposite A = BC)
    var nBC = {x: -(C.y - B.y), y: C.x - B.x};
    var lenBC = Math.sqrt(nBC.x * nBC.x + nBC.y * nBC.y);
    nBC.x /= lenBC; nBC.y /= lenBC;
    ctx.fillText('a', midBC.x + nBC.x * 22, midBC.y + nBC.y * 22);

    // side b (opposite B = AC)
    var nAC = {x: -(C.y - A.y), y: C.x - A.x};
    var lenAC = Math.sqrt(nAC.x * nAC.x + nAC.y * nAC.y);
    nAC.x /= lenAC; nAC.y /= lenAC;
    ctx.fillText('b', midAC.x - nAC.x * 22, midAC.y - nAC.y * 22);

    // side c (opposite C = AB)
    ctx.fillText('c', midAB.x, midAB.y + 24);

    // Angle arcs
    drawAngleArc(A, B, C, 35, t.alphaLabel);
    drawAngleArc(B, A, C, 35, t.betaLabel);
    drawAngleArc(C, A, B, 35, t.gammaLabel);

    // Right angle marker for right triangle
    if (currentType === 'right') {
      var sq = 18;
      ctx.beginPath();
      ctx.moveTo(C.x + sq, C.y);
      ctx.lineTo(C.x + sq, C.y + sq);
      ctx.lineTo(C.x, C.y + sq);
      ctx.strokeStyle = '#a78bfa';
      ctx.lineWidth = 2;
      ctx.stroke();
    }

    // Formula display
    ctx.fillStyle = '#94a3b8';
    ctx.font = '15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('cos\u03B1/a + cos\u03B2/b + cos\u03B3/c = (a\u00B2+b\u00B2+c\u00B2)/(2abc)', w / 2, h - 15);

    // Compute and display numerical value
    var la = dist(B, C), lb = dist(A, C), lc = dist(A, B);
    var cosA = (lb*lb + lc*lc - la*la) / (2*lb*lc);
    var cosB = (la*la + lc*lc - lb*lb) / (2*la*lc);
    var cosC = (la*la + lb*lb - lc*lc) / (2*la*lb);
    var lhs = cosA/la + cosB/lb + cosC/lc;
    var rhs = (la*la + lb*lb + lc*lc) / (2*la*lb*lc);

    ctx.fillStyle = '#34d399';
    ctx.font = '14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText('Leva = Desna = ' + lhs.toFixed(6).replace('.', ','), w - 20, h - 15);
  }

  window.setTriangleType = function(type) {
    currentType = type;
    document.querySelectorAll('.canvas-controls button').forEach(function(b) {
      b.classList.remove('active');
    });
    document.getElementById('btn' + type.charAt(0).toUpperCase() + type.slice(1)).classList.add('active');
    drawTriangle();
  };

  // === Dragging ===
  var dragging = null;

  function getMousePos(e) {
    var rect = canvas.getBoundingClientRect();
    var clientX, clientY;
    if (e.touches) {
      clientX = e.touches[0].clientX;
      clientY = e.touches[0].clientY;
    } else {
      clientX = e.clientX;
      clientY = e.clientY;
    }
    return {
      x: clientX - rect.left,
      y: clientY - rect.top
    };
  }

  function findVertex(pos) {
    var t = triangles[currentType];
    var verts = [t.A, t.B, t.C];
    for (var i = 0; i < verts.length; i++) {
      if (dist(pos, verts[i]) < 20) return verts[i];
    }
    return null;
  }

  canvas.addEventListener('mousedown', function(e) {
    var pos = getMousePos(e);
    dragging = findVertex(pos);
  });

  canvas.addEventListener('mousemove', function(e) {
    if (!dragging) return;
    var pos = getMousePos(e);
    dragging.x = Math.max(20, Math.min(pos.x, (canvas.width / dpr) - 20));
    dragging.y = Math.max(20, Math.min(pos.y, (canvas.height / dpr) - 20));
    drawTriangle();
  });

  canvas.addEventListener('mouseup', function() { dragging = null; });
  canvas.addEventListener('mouseleave', function() { dragging = null; });

  // Touch events
  canvas.addEventListener('touchstart', function(e) {
    e.preventDefault();
    var pos = getMousePos(e);
    dragging = findVertex(pos);
  }, {passive: false});

  canvas.addEventListener('touchmove', function(e) {
    e.preventDefault();
    if (!dragging) return;
    var pos = getMousePos(e);
    dragging.x = Math.max(20, Math.min(pos.x, (canvas.width / dpr) - 20));
    dragging.y = Math.max(20, Math.min(pos.y, (canvas.height / dpr) - 20));
    drawTriangle();
  }, {passive: false});

  canvas.addEventListener('touchend', function() { dragging = null; });

  // Initial draw
  window.addEventListener('load', drawTriangle);
  window.addEventListener('resize', drawTriangle);
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{"title":"Kosinusna teorema i zbir razlomaka u trouglu","subject":"math","unit":"trigonometry","topic_tags":["kosinusna teorema","trougao","trigonometrija","algebarski izrazi"]}
BRAINSPARK_META-->