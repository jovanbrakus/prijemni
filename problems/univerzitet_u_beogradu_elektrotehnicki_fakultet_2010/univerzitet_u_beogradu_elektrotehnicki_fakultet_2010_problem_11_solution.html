<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Poluprečnik osnove valjka — Rešenje</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM:
Valjak ima početnu visinu h = 2 i nepoznat poluprečnik r.
1) Kada se poluprečnik poveća za 6, zapremina se poveća za y.
2) Kada se visina poveća za 6, zapremina se takođe poveća za y.
Naći r.

SOLUTION:
Zapremina valjka: V = π·r²·h

Početna zapremina: V₀ = π·r²·2 = 2πr²

Slučaj 1: Poluprečnik se poveća za 6 (r → r+6), visina ostaje h=2:
V₁ = π·(r+6)²·2 = 2π(r+6)²
Povećanje: y = V₁ - V₀ = 2π(r+6)² - 2πr²
y = 2π[(r+6)² - r²]
y = 2π[r² + 12r + 36 - r²]
y = 2π(12r + 36)

Slučaj 2: Visina se poveća za 6 (h → 2+6 = 8), poluprečnik ostaje r:
V₂ = π·r²·8 = 8πr²
Povećanje: y = V₂ - V₀ = 8πr² - 2πr² = 6πr²

Izjednačavanje:
2π(12r + 36) = 6πr²
Delimo sa 2π:
12r + 36 = 3r²
3r² - 12r - 36 = 0
r² - 4r - 12 = 0

Diskriminanta: D = 16 + 48 = 64
r = (4 ± 8) / 2
r₁ = (4 + 8)/2 = 6
r₂ = (4 - 8)/2 = -2 (odbacujemo, r > 0)

Odgovor: r = 6

VERIFIKACIJA:
V₀ = 2π·36 = 72π
Slučaj 1: V₁ = 2π·144 = 288π → y = 288π - 72π = 216π ✓
Slučaj 2: V₂ = 8π·36 = 288π → y = 288π - 72π = 216π ✓
Oba povećanja daju y = 216π. ✓
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.card-title {
  font-size: 1.3rem;
  font-weight: 700;
  color: #60a5fa;
  margin-bottom: 14px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.4rem;
}

.problem-text {
  font-size: 1.08rem;
  line-height: 1.85;
  color: #e2e8f0;
}

.highlight {
  background: rgba(56, 189, 248, 0.08);
  color: #60a5fa;
  padding: 2px 8px;
  border-radius: 6px;
  font-family: monospace;
  font-size: 0.97em;
}

.highlight-green {
  background: rgba(52, 211, 153, 0.1);
  color: #34d399;
  padding: 2px 8px;
  border-radius: 6px;
  font-family: monospace;
  font-size: 0.97em;
}

.plan-text {
  font-size: 1.05rem;
  color: #94a3b8;
  border-left: 3px solid #a78bfa;
  padding-left: 16px;
}

details {
  margin-top: 10px;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  padding: 8px 0;
  user-select: none;
}

details summary:hover {
  color: #c4b5fd;
}

details .details-content {
  padding: 14px 0 6px 0;
  color: #e2e8f0;
  line-height: 1.8;
}

.step {
  display: flex;
  gap: 16px;
  margin-bottom: 22px;
}

.step-badge {
  flex-shrink: 0;
  width: 38px;
  height: 38px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: 1rem;
  color: #0f172a;
}

.step-content {
  flex: 1;
}

.step-title {
  font-weight: 700;
  font-size: 1.1rem;
  color: #e2e8f0;
  margin-bottom: 6px;
}

.step-body {
  color: #cbd5e1;
  line-height: 1.85;
}

.math-block {
  background: rgba(56, 189, 248, 0.06);
  border: 1px solid rgba(96, 165, 250, 0.15);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 12px 0;
  overflow-x: auto;
}

.checkpoint {
  background: rgba(167, 139, 250, 0.07);
  border: 1px solid rgba(167, 139, 250, 0.2);
  border-radius: 10px;
  padding: 12px 16px;
  margin: 14px 0;
}

.checkpoint summary {
  color: #f472b6;
}

.key-insight {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.12), rgba(167, 139, 250, 0.12));
  border: 1px solid rgba(167, 139, 250, 0.3);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.key-insight .insight-title {
  font-size: 1.2rem;
  font-weight: 700;
  color: #a78bfa;
  margin-bottom: 10px;
}

.final-answer-box {
  background: linear-gradient(135deg, rgba(52, 211, 153, 0.1), rgba(74, 222, 128, 0.08));
  border: 2px solid rgba(52, 211, 153, 0.35);
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin-bottom: 24px;
}

.final-answer-label {
  font-size: 1rem;
  color: #94a3b8;
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 10px;
}

.final-answer-value {
  font-size: 2rem;
  font-weight: 800;
  color: #4ade80;
  margin-bottom: 10px;
}

.final-answer-note {
  font-size: 0.95rem;
  color: #94a3b8;
  margin-top: 8px;
}

.pitfall-item {
  display: flex;
  gap: 10px;
  align-items: flex-start;
  margin-bottom: 12px;
}

.pitfall-icon {
  color: #f472b6;
  font-size: 1.2rem;
  flex-shrink: 0;
  margin-top: 2px;
}

canvas {
  width: 100%;
  border-radius: 12px;
  display: block;
  touch-action: none;
}

.canvas-wrapper {
  position: relative;
  margin: 16px 0;
}

.canvas-controls {
  display: flex;
  gap: 10px;
  margin-top: 10px;
  flex-wrap: wrap;
}

.canvas-btn {
  background: #334155;
  border: 1px solid #475569;
  color: #e2e8f0;
  padding: 8px 16px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.9rem;
  font-family: inherit;
  transition: background 0.2s;
}

.canvas-btn:hover {
  background: #475569;
}

.canvas-btn.active {
  background: rgba(96, 165, 250, 0.2);
  border-color: #60a5fa;
  color: #60a5fa;
}

.challenge-card {
  background: rgba(244, 114, 182, 0.06);
  border: 1px solid rgba(244, 114, 182, 0.2);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.challenge-title {
  color: #f472b6;
  font-weight: 700;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

@media (max-width: 700px) {
  h1 { font-size: 1.5rem; }
  .container { padding: 10px; }
  .card { padding: 16px; }
  .step { gap: 10px; }
  .step-badge { width: 32px; height: 32px; font-size: 0.9rem; }
  .final-answer-value { font-size: 1.5rem; }
}
</style>
</head>
<body>
<div class="container">

  <!-- TITLE -->
  <h1>Poluprečnik osnove valjka</h1>
  <p class="subtitle">Zapremina valjka, kvadratna jednačina, geometrijska intuicija</p>

  <!-- PROBLEM STATEMENT -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128220;</span> Tekst zadatka</div>
    <div class="problem-text">
      Povećanjem poluprečnika osnove valjka za <span class="highlight">6</span> jedinica njegova zapremina se poveća za <span class="highlight-green">y</span> kubnih jedinica. Povećanjem visine valjka za <span class="highlight">6</span> jedinica njegova zapremina takođe se poveća za <span class="highlight-green">y</span> kubnih jedinica. Ako je početna visina valjka jednaka <span class="highlight">2</span>, tada je početni poluprečnik valjka jednak:
      <br><br>
      <strong>(A)</strong> 2 &emsp; <strong>(B)</strong> 4 &emsp; <strong>(C)</strong> 6 &emsp; <strong>(D)</strong> 8 &emsp; <strong>(E)</strong> \(\pi\) &emsp; <strong>(N)</strong> Ne znam
    </div>
  </div>

  <!-- PLAN -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127919;</span> Plan rešavanja</div>
    <p class="plan-text">
      Izrazićemo povećanje zapremine u oba slučaja pomoću nepoznatog poluprečnika \(r\), a zatim izjednačiti ta dva izraza jer je povećanje u oba slučaja isto (\(y\)). Dobićemo kvadratnu jednačinu po \(r\).
    </p>
  </div>

  <!-- THEORY REFRESHER -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128218;</span> Teorijski podsetnik</div>
    <details>
      <summary>Zapremina valjka — klikni da vidiš formulu</summary>
      <div class="details-content">
        <p>Valjak sa poluprečnikom osnove \(r\) i visinom \(h\) ima zapreminu:</p>
        <div class="math-block">
          \[ V = \pi r^2 h \]
        </div>
        <p>Ova formula potiče od toga što je osnova valjka krug površine \(\pi r^2\), a valjak nastaje „izvlačenjem" tog kruga na visinu \(h\).</p>
      </div>
    </details>
    <details>
      <summary>Kvadratna jednačina — podsetnik</summary>
      <div class="details-content">
        <p>Za jednačinu \(ax^2 + bx + c = 0\), rešenja su:</p>
        <div class="math-block">
          \[ x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a} \]
        </div>
      </div>
    </details>
  </div>

  <!-- VISUAL AID -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127912;</span> Vizuelni prikaz</div>
    <p style="color:#94a3b8; margin-bottom: 12px;">Uporedi originalni valjak sa dva povećana — klikni na dugmad ispod:</p>
    <div class="canvas-wrapper">
      <canvas id="cylinderCanvas" height="500"></canvas>
    </div>
    <div class="canvas-controls">
      <button class="canvas-btn active" id="btnAll">Sva tri valjka</button>
      <button class="canvas-btn" id="btnRadius">Povećan poluprečnik</button>
      <button class="canvas-btn" id="btnHeight">Povećana visina</button>
    </div>
  </div>

  <!-- STEP-BY-STEP -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128736;</span> Rešenje korak po korak</div>

    <!-- Step 1 -->
    <div class="step">
      <div class="step-badge">1</div>
      <div class="step-content">
        <div class="step-title">Označimo poznate i nepoznate veličine</div>
        <div class="step-body">
          <p>Neka je \(r\) početni poluprečnik osnove, a \(h = 2\) početna visina valjka.</p>
          <p>Početna zapremina valjka je:</p>
          <div class="math-block">
            \[ V_0 = \pi r^2 \cdot h = \pi r^2 \cdot 2 = 2\pi r^2 \]
          </div>
        </div>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step">
      <div class="step-badge">2</div>
      <div class="step-content">
        <div class="step-title">Povećanje poluprečnika za 6</div>
        <div class="step-body">
          <p>Novi poluprečnik je \(r + 6\), visina ostaje \(h = 2\). Nova zapremina:</p>
          <div class="math-block">
            \[ V_1 = \pi(r+6)^2 \cdot 2 = 2\pi(r+6)^2 \]
          </div>
          <p>Povećanje zapremine:</p>
          <div class="math-block">
            \[ y = V_1 - V_0 = 2\pi(r+6)^2 - 2\pi r^2 = 2\pi\big[(r+6)^2 - r^2\big] \]
          </div>
          <p>Razvijamo razliku kvadrata:</p>
          <div class="math-block">
            \[ (r+6)^2 - r^2 = r^2 + 12r + 36 - r^2 = 12r + 36 \]
          </div>
          <p>Dakle:</p>
          <div class="math-block">
            \[ \boxed{y = 2\pi(12r + 36)} \]
          </div>

          <div class="checkpoint">
            <details>
              <summary>&#10004; Proveri sebe: Zašto se \(r^2\) poništi?</summary>
              <div class="details-content">
                Jer oduzimamo \((r+6)^2 - r^2\). Kada razvijemo \((r+6)^2 = r^2 + 12r + 36\), članovi \(r^2\) se pokrate. Ostaje samo linearan izraz po \(r\): \(12r + 36\).
              </div>
            </details>
          </div>
        </div>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step">
      <div class="step-badge">3</div>
      <div class="step-content">
        <div class="step-title">Povećanje visine za 6</div>
        <div class="step-body">
          <p>Poluprečnik ostaje \(r\), nova visina je \(h + 6 = 2 + 6 = 8\). Nova zapremina:</p>
          <div class="math-block">
            \[ V_2 = \pi r^2 \cdot 8 = 8\pi r^2 \]
          </div>
          <p>Povećanje zapremine:</p>
          <div class="math-block">
            \[ y = V_2 - V_0 = 8\pi r^2 - 2\pi r^2 = 6\pi r^2 \]
          </div>
          <p>Dakle:</p>
          <div class="math-block">
            \[ \boxed{y = 6\pi r^2} \]
          </div>
        </div>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step">
      <div class="step-badge">4</div>
      <div class="step-content">
        <div class="step-title">Izjednačavanje — ključni korak</div>
        <div class="step-body">
          <p>Oba povećanja su jednaka \(y\), pa izjednačavamo:</p>
          <div class="math-block">
            \[ 2\pi(12r + 36) = 6\pi r^2 \]
          </div>
          <p>Podelimo obe strane sa \(2\pi\) (sigurno je \(\pi \neq 0\)):</p>
          <div class="math-block">
            \[ 12r + 36 = 3r^2 \]
          </div>
          <p>Preuredimo u standardni oblik:</p>
          <div class="math-block">
            \[ 3r^2 - 12r - 36 = 0 \]
          </div>
          <p>Podelimo celу jednačinu sa 3 radi jednostavnosti:</p>
          <div class="math-block">
            \[ r^2 - 4r - 12 = 0 \]
          </div>

          <div class="checkpoint">
            <details>
              <summary>&#10004; Proveri sebe: Kako smo podelili sa \(2\pi\)?</summary>
              <div class="details-content">
                <p>Leva strana: \(\frac{2\pi(12r+36)}{2\pi} = 12r + 36\)</p>
                <p>Desna strana: \(\frac{6\pi r^2}{2\pi} = 3r^2\)</p>
                <p>Deljenje je dozvoljeno jer je \(2\pi > 0\), pa se znak nejednakosti (ili jednakosti) ne menja.</p>
              </div>
            </details>
          </div>
        </div>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step">
      <div class="step-badge">5</div>
      <div class="step-content">
        <div class="step-title">Rešavanje kvadratne jednačine</div>
        <div class="step-body">
          <p>Imamo: \(r^2 - 4r - 12 = 0\)</p>
          <p>Tražimo dva broja čiji je proizvod \(-12\) a zbir \(-4\). To su \(-6\) i \(+2\):</p>
          <div class="math-block">
            \[ r^2 - 4r - 12 = (r - 6)(r + 2) = 0 \]
          </div>
          <p>Rešenja:</p>
          <div class="math-block">
            \[ r_1 = 6, \qquad r_2 = -2 \]
          </div>
          <p>Pošto je poluprečnik geometrijska veličina, mora biti pozitivan: \(r > 0\).</p>
          <p>Odbacujemo \(r_2 = -2\), pa je:</p>
          <div class="math-block">
            \[ r = 6 \]
          </div>

          <div class="checkpoint">
            <details>
              <summary>&#10004; Proveri sebe: Može li se ovo rešiti i formulom?</summary>
              <div class="details-content">
                <p>Naravno! Za \(r^2 - 4r - 12 = 0\) koristimo \(a=1,\; b=-4,\; c=-12\):</p>
                <p>\(D = b^2 - 4ac = 16 + 48 = 64\)</p>
                <p>\(r = \frac{4 \pm \sqrt{64}}{2} = \frac{4 \pm 8}{2}\)</p>
                <p>\(r_1 = \frac{12}{2} = 6, \qquad r_2 = \frac{-4}{2} = -2\)</p>
                <p>Isti rezultat!</p>
              </div>
            </details>
          </div>
        </div>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step">
      <div class="step-badge">6</div>
      <div class="step-content">
        <div class="step-title">Verifikacija rešenja</div>
        <div class="step-body">
          <p>Za \(r = 6\), \(h = 2\):</p>
          <div class="math-block">
            \[ V_0 = 2\pi \cdot 36 = 72\pi \]
          </div>
          <p><strong>Slučaj 1</strong> — povećan poluprečnik za 6 (novi \(r = 12\)):</p>
          <div class="math-block">
            \[ V_1 = 2\pi \cdot 144 = 288\pi \implies y = 288\pi - 72\pi = 216\pi \; \checkmark \]
          </div>
          <p><strong>Slučaj 2</strong> — povećana visina za 6 (nova \(h = 8\)):</p>
          <div class="math-block">
            \[ V_2 = 8\pi \cdot 36 = 288\pi \implies y = 288\pi - 72\pi = 216\pi \; \checkmark \]
          </div>
          <p style="color:#4ade80; font-weight:600; margin-top:8px;">Oba povećanja daju \(y = 216\pi\). Rešenje je tačno!</p>
        </div>
      </div>
    </div>
  </div>

  <!-- KEY INSIGHT -->
  <div class="key-insight">
    <div class="insight-title">&#128161; Ključni uvid</div>
    <p>Povećanje poluprečnika utiče <em>kvadratno</em> na zapreminu (jer se \(r\) pojavljuje kao \(r^2\) u formuli), dok povećanje visine utiče <em>linearno</em>. Zato ista promena (+6) daje različite izraze za povećanje zapremine — i upravo ta razlika nam omogućava da nađemo \(r\).</p>
    <p style="margin-top:10px; color:#94a3b8;">Zanimljivo je primetiti da je novo zapreminski odnos \(V_1 = V_2 = 288\pi\) — oba načina povećanja dovode do <strong>iste apsolutne zapremine</strong>, ne samo istog povećanja!</p>
  </div>

  <!-- FINAL ANSWER -->
  <div class="final-answer-box">
    <div class="final-answer-label">Konačan odgovor</div>
    <div class="final-answer-value">\(r = 6\) &mdash; odgovor (C)</div>
    <div class="final-answer-note">Verifikovano: oba povećanja zapremine iznose \(y = 216\pi\) kubnih jedinica.</div>
  </div>

  <!-- COMMON PITFALLS -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9888;</span> Česte greške</div>
    <div class="pitfall-item">
      <span class="pitfall-icon">&#10060;</span>
      <div>
        <strong>Zaboraviti da odbacite negativno rešenje.</strong> Kvadratna jednačina daje \(r = 6\) i \(r = -2\), ali poluprečnik mora biti pozitivan. Uvek proverite fizički smisao rešenja.
      </div>
    </div>
    <div class="pitfall-item">
      <span class="pitfall-icon">&#10060;</span>
      <div>
        <strong>Pogrešno tumačenje „povećanja".</strong> Povećanje zapremine je \(\Delta V = V_{\text{novo}} - V_{\text{staro}}\), a ne nova zapremina sama po sebi. Pažljivo čitajte tekst zadatka.
      </div>
    </div>
    <div class="pitfall-item">
      <span class="pitfall-icon">&#10060;</span>
      <div>
        <strong>Greška pri razvijanju \((r+6)^2\).</strong> Česta greška je pisanje \(r^2 + 36\) umesto \(r^2 + 12r + 36\). Ne zaboravite dvostruki proizvod!
      </div>
    </div>
  </div>

  <!-- OPTIONAL CHALLENGE -->
  <div class="challenge-card">
    <div class="challenge-title">&#127947; Izazov za dodatno vežbanje</div>
    <p>Ako bi umesto povećanja za 6, povećavali poluprečnik za \(a\) a visinu za \(b\) (gde su \(a \neq b\)), i oba povećanja daju istu promenu zapremine \(y\), nađi opštu formulu za početni poluprečnik \(r\) u funkciji od \(a\), \(b\) i \(h\).</p>
    <details>
      <summary>Prikaži nagoveštaj</summary>
      <div class="details-content">
        <p>Postupi isto kao u zadatku: izrazi povećanje zapremine u oba slučaja i izjednači. Dobićeš:</p>
        <p>\(h\left[(r+a)^2 - r^2\right] = r^2 \cdot b\)</p>
        <p>Odnosno: \(h(2ar + a^2) = br^2\), tj. \(br^2 - 2ahr - a^2h = 0\).</p>
        <p>Za \(a = b = 6\), \(h = 2\): dobijamo \(6r^2 - 24r - 72 = 0\), što je upravo naša jednačina!</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('cylinderCanvas');
  const ctx = canvas.getContext('2d');

  let mode = 'all'; // 'all', 'radius', 'height'

  function resizeCanvas() {
    const rect = canvas.parentElement.getBoundingClientRect();
    const dpr = window.devicePixelRatio || 1;
    canvas.width = rect.width * dpr;
    canvas.height = 500 * dpr;
    canvas.style.height = '500px';
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
  }

  function drawEllipse(cx, cy, rx, ry, fill, stroke, dashed) {
    ctx.save();
    if (dashed) ctx.setLineDash([6, 4]);
    else ctx.setLineDash([]);
    ctx.beginPath();
    ctx.ellipse(cx, cy, rx, ry, 0, 0, 2 * Math.PI);
    if (fill) { ctx.fillStyle = fill; ctx.fill(); }
    if (stroke) { ctx.strokeStyle = stroke; ctx.lineWidth = 2; ctx.stroke(); }
    ctx.restore();
  }

  function drawCylinder(cx, cy, rx, ry, height, fillBody, fillTop, strokeColor, label, labelColor, showDimR, showDimH, rVal, hVal) {
    // Body
    ctx.save();
    ctx.setLineDash([]);

    // Bottom ellipse (back half, dashed)
    ctx.save();
    ctx.setLineDash([4, 3]);
    ctx.beginPath();
    ctx.ellipse(cx, cy + height, rx, ry, 0, 0, Math.PI);
    ctx.strokeStyle = strokeColor;
    ctx.lineWidth = 1.5;
    ctx.globalAlpha = 0.4;
    ctx.stroke();
    ctx.restore();

    // Side walls
    ctx.beginPath();
    ctx.moveTo(cx - rx, cy);
    ctx.lineTo(cx - rx, cy + height);
    ctx.strokeStyle = strokeColor;
    ctx.lineWidth = 2;
    ctx.stroke();

    ctx.beginPath();
    ctx.moveTo(cx + rx, cy);
    ctx.lineTo(cx + rx, cy + height);
    ctx.stroke();

    // Body fill
    ctx.beginPath();
    ctx.moveTo(cx - rx, cy);
    ctx.lineTo(cx - rx, cy + height);
    ctx.ellipse(cx, cy + height, rx, ry, 0, Math.PI, 0, true);
    ctx.lineTo(cx + rx, cy);
    ctx.ellipse(cx, cy, rx, ry, 0, 0, Math.PI, false);
    ctx.closePath();
    ctx.fillStyle = fillBody;
    ctx.globalAlpha = 0.5;
    ctx.fill();
    ctx.globalAlpha = 1;

    // Bottom ellipse (front half)
    ctx.setLineDash([]);
    ctx.beginPath();
    ctx.ellipse(cx, cy + height, rx, ry, 0, Math.PI, 2 * Math.PI);
    ctx.strokeStyle = strokeColor;
    ctx.lineWidth = 2;
    ctx.stroke();

    // Top ellipse
    drawEllipse(cx, cy, rx, ry, fillTop, strokeColor, false);

    // Label
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = labelColor;
    ctx.textAlign = 'center';
    ctx.fillText(label, cx, cy - ry - 14);

    // Dimension: radius
    if (showDimR) {
      ctx.save();
      ctx.setLineDash([3, 3]);
      ctx.beginPath();
      ctx.moveTo(cx, cy);
      ctx.lineTo(cx + rx, cy);
      ctx.strokeStyle = '#f472b6';
      ctx.lineWidth = 1.5;
      ctx.stroke();
      ctx.setLineDash([]);
      ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = '#f472b6';
      ctx.textAlign = 'center';
      ctx.fillText('r = ' + rVal, cx + rx / 2, cy - 6);
      ctx.restore();
    }

    // Dimension: height
    if (showDimH) {
      ctx.save();
      var hx = cx + rx + 18;
      ctx.setLineDash([3, 3]);
      ctx.beginPath();
      ctx.moveTo(hx, cy);
      ctx.lineTo(hx, cy + height);
      ctx.strokeStyle = '#60a5fa';
      ctx.lineWidth = 1.5;
      ctx.stroke();
      // Arrows
      ctx.setLineDash([]);
      ctx.beginPath();
      ctx.moveTo(hx - 4, cy + 6);
      ctx.lineTo(hx, cy);
      ctx.lineTo(hx + 4, cy + 6);
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(hx - 4, cy + height - 6);
      ctx.lineTo(hx, cy + height);
      ctx.lineTo(hx + 4, cy + height - 6);
      ctx.stroke();

      ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = '#60a5fa';
      ctx.textAlign = 'left';
      ctx.fillText('h = ' + hVal, hx + 6, cy + height / 2 + 4);
      ctx.restore();
    }

    ctx.restore();
  }

  function draw() {
    var w = canvas.width / (window.devicePixelRatio || 1);
    var h = 500;
    ctx.clearRect(0, 0, w, h);

    // Background
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, w, h);

    // Scale factors
    var scaleR = 3.2;
    var scaleH = 18;
    var ry = 14;

    if (mode === 'all') {
      // Draw three cylinders side by side
      var spacing = w / 4;

      // Original: r=6, h=2
      var r0 = 6 * scaleR, h0 = 2 * scaleH;
      var cy0 = 250 - h0 / 2;
      drawCylinder(spacing, cy0, r0, ry, h0,
        'rgba(96,165,250,0.15)', 'rgba(96,165,250,0.25)', '#60a5fa',
        'Originalni', '#60a5fa', true, true, '6', '2');

      // V label
      ctx.font = '13px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = '#94a3b8';
      ctx.textAlign = 'center';
      ctx.fillText('V = 72\u03C0', spacing, cy0 + h0 + ry + 28);

      // Radius increased: r=12, h=2
      var r1 = 12 * scaleR, h1 = 2 * scaleH;
      var cy1 = 250 - h1 / 2;
      drawCylinder(spacing * 2, cy1, r1, ry, h1,
        'rgba(167,139,250,0.15)', 'rgba(167,139,250,0.25)', '#a78bfa',
        'r + 6 = 12', '#a78bfa', true, true, '12', '2');

      ctx.font = '13px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = '#94a3b8';
      ctx.textAlign = 'center';
      ctx.fillText('V = 288\u03C0', spacing * 2, cy1 + h1 + ry + 28);
      ctx.fillStyle = '#4ade80';
      ctx.fillText('\u0394V = 216\u03C0', spacing * 2, cy1 + h1 + ry + 46);

      // Height increased: r=6, h=8
      var r2 = 6 * scaleR, h2 = 8 * scaleH;
      var cy2 = 250 - h2 / 2;
      drawCylinder(spacing * 3, cy2, r2, ry, h2,
        'rgba(52,211,153,0.15)', 'rgba(52,211,153,0.25)', '#34d399',
        'h + 6 = 8', '#34d399', true, true, '6', '8');

      ctx.font = '13px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = '#94a3b8';
      ctx.textAlign = 'center';
      ctx.fillText('V = 288\u03C0', spacing * 3, cy2 + h2 + ry + 28);
      ctx.fillStyle = '#4ade80';
      ctx.fillText('\u0394V = 216\u03C0', spacing * 3, cy2 + h2 + ry + 46);

      // Equal sign
      ctx.font = 'bold 28px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = '#4ade80';
      ctx.textAlign = 'center';
      ctx.fillText('=', spacing * 2.5, 255);

    } else if (mode === 'radius') {
      // Show original and radius-increased side by side
      var spacing = w / 3;

      var r0 = 6 * scaleR, h0 = 2 * scaleH;
      var cy0 = 240 - h0 / 2;
      drawCylinder(spacing, cy0, r0, ry, h0,
        'rgba(96,165,250,0.15)', 'rgba(96,165,250,0.25)', '#60a5fa',
        'Originalni (r=6, h=2)', '#60a5fa', true, true, '6', '2');
      ctx.font = '14px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = '#94a3b8';
      ctx.textAlign = 'center';
      ctx.fillText('V\u2080 = 72\u03C0', spacing, cy0 + h0 + ry + 30);

      var r1 = 12 * scaleR, h1 = 2 * scaleH;
      var cy1 = 240 - h1 / 2;
      drawCylinder(spacing * 2, cy1, r1, ry, h1,
        'rgba(167,139,250,0.15)', 'rgba(167,139,250,0.25)', '#a78bfa',
        'Povećan r (r=12, h=2)', '#a78bfa', true, true, '12', '2');
      ctx.font = '14px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = '#94a3b8';
      ctx.textAlign = 'center';
      ctx.fillText('V\u2081 = 288\u03C0', spacing * 2, cy1 + h1 + ry + 30);

      // Arrow between them
      ctx.font = 'bold 18px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = '#a78bfa';
      ctx.fillText('\u2192', spacing * 1.5, 240);
      ctx.font = '14px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = '#4ade80';
      ctx.fillText('\u0394V = 216\u03C0', spacing * 1.5, 265);

    } else if (mode === 'height') {
      var spacing = w / 3;

      var r0 = 6 * scaleR, h0 = 2 * scaleH;
      var cy0 = 250 - h0 / 2;
      drawCylinder(spacing, cy0, r0, ry, h0,
        'rgba(96,165,250,0.15)', 'rgba(96,165,250,0.25)', '#60a5fa',
        'Originalni (r=6, h=2)', '#60a5fa', true, true, '6', '2');
      ctx.font = '14px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = '#94a3b8';
      ctx.textAlign = 'center';
      ctx.fillText('V\u2080 = 72\u03C0', spacing, cy0 + h0 + ry + 30);

      var r2 = 6 * scaleR, h2 = 8 * scaleH;
      var cy2 = 250 - h2 / 2;
      drawCylinder(spacing * 2, cy2, r2, ry, h2,
        'rgba(52,211,153,0.15)', 'rgba(52,211,153,0.25)', '#34d399',
        'Povećana h (r=6, h=8)', '#34d399', true, true, '6', '8');
      ctx.font = '14px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = '#94a3b8';
      ctx.textAlign = 'center';
      ctx.fillText('V\u2082 = 288\u03C0', spacing * 2, cy2 + h2 + ry + 30);

      ctx.font = 'bold 18px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = '#34d399';
      ctx.fillText('\u2192', spacing * 1.5, 250);
      ctx.font = '14px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = '#4ade80';
      ctx.fillText('\u0394V = 216\u03C0', spacing * 1.5, 275);
    }
  }

  function setMode(m) {
    mode = m;
    document.querySelectorAll('.canvas-btn').forEach(function(b) { b.classList.remove('active'); });
    document.getElementById(m === 'all' ? 'btnAll' : m === 'radius' ? 'btnRadius' : 'btnHeight').classList.add('active');
    draw();
  }

  document.getElementById('btnAll').addEventListener('click', function() { setMode('all'); });
  document.getElementById('btnRadius').addEventListener('click', function() { setMode('radius'); });
  document.getElementById('btnHeight').addEventListener('click', function() { setMode('height'); });

  window.addEventListener('resize', function() { resizeCanvas(); draw(); });
  resizeCanvas();
  draw();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Poluprečnik osnove valjka pri jednakom povećanju zapremine",
  "subject": "math",
  "unit": "solid geometry",
  "topic_tags": ["zapremina valjka", "kvadratna jednačina", "stereometrija", "geometrijska tela"]
}
BRAINSPARK_META-->