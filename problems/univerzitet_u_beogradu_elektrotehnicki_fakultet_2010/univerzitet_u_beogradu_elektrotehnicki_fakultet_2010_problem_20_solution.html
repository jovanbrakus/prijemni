<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ekstremne vrednosti funkcije sa apsolutnom vrednoscu</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
Problem: Naci najmanju (m) i najvecu (M) vrednost funkcije y = x^3 - 2x|x-2| na [0,3], pa izracunati m + M.

Step 1: Razbijemo apsolutnu vrednost |x-2| po intervalima
  Za x in [0,2]: |x-2| = 2-x, pa y = x^3 - 2x(2-x) = x^3 - 4x + 2x^2 = x^3 + 2x^2 - 4x
  Za x in [2,3]: |x-2| = x-2, pa y = x^3 - 2x(x-2) = x^3 - 2x^2 + 4x

Step 2: Analiza na [0,2]: y = x^3 + 2x^2 - 4x
  y' = 3x^2 + 4x - 4 = (3x-2)(x+2) = 0
  x = 2/3 (u intervalu) ili x = -2 (van intervala)
  y(0) = 0
  y(2/3) = 8/27 + 8/9 - 8/3 = 8/27 + 24/27 - 72/27 = -40/27
  y(2) = 8 + 8 - 8 = 8

Step 3: Analiza na [2,3]: y = x^3 - 2x^2 + 4x
  y' = 3x^2 - 4x + 4
  D = 16 - 48 = -32 < 0 => nema kriticnih tacaka
  y'(2) = 12 - 8 + 4 = 8 > 0 => y strogo rastuca
  y(2) = 8 - 8 + 8 = 8
  y(3) = 27 - 18 + 12 = 21

Step 4: Poredjenje svih vrednosti
  y(0) = 0, y(2/3) = -40/27, y(2) = 8, y(3) = 21
  m = -40/27 (minimum), M = 21 (maksimum)
  m + M = -40/27 + 21 = -40/27 + 567/27 = 527/27

Answer: (B) 527/27
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 12px 0;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 14px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 120px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #60a5fa;
  font-size: 1.15rem;
  font-weight: 700;
}

.plan-card {
  border-left: 4px solid #a78bfa;
}

.plan-card h2 { color: #a78bfa; }

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 10px 14px;
  background: rgba(96,165,250,0.06);
  border-radius: 8px;
  border: 1px solid rgba(96,165,250,0.12);
  list-style: none;
  user-select: none;
}

details summary::-webkit-details-marker { display: none; }

details summary::before {
  content: '\25B8 ';
  display: inline;
}

details[open] summary::before {
  content: '\25BE ';
}

details .details-content {
  padding: 14px 18px;
  margin-top: 8px;
  background: rgba(96,165,250,0.04);
  border-radius: 8px;
  border: 1px solid rgba(96,165,250,0.08);
}

.step-container {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  align-items: flex-start;
}

.step-badge {
  min-width: 34px;
  height: 34px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: 0.95rem;
  color: #0f172a;
  margin-top: 2px;
  flex-shrink: 0;
}

.step-content {
  flex: 1;
  min-width: 0;
}

.step-content h3 {
  margin-bottom: 8px;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 14px;
  padding: 22px 26px;
  margin-bottom: 24px;
}

.insight-box h2 { color: #a78bfa; }

.final-answer-box {
  background: linear-gradient(135deg, rgba(52,211,153,0.1), rgba(74,222,128,0.08));
  border: 2px solid rgba(52,211,153,0.35);
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin-bottom: 24px;
}

.final-answer-box .answer-value {
  font-size: 2.4rem;
  font-weight: 800;
  color: #4ade80;
  margin: 16px 0;
}

.options-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin: 18px 0;
}

.option-chip {
  background: rgba(96,165,250,0.08);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 22px;
  font-size: 1.05rem;
  color: #94a3b8;
  transition: all 0.2s;
}

.option-chip.correct {
  background: rgba(52,211,153,0.15);
  border-color: #34d399;
  color: #4ade80;
  font-weight: 700;
  box-shadow: 0 0 20px rgba(52,211,153,0.15);
}

.pitfall-box {
  border-left: 4px solid #e09468;
}

.pitfall-box h2 { color: #e09468; }

.challenge-box {
  border-left: 4px solid #a78bfa;
}

.challenge-box h2 { color: #a78bfa; }

.canvas-wrapper {
  background: #0c1222;
  border-radius: 12px;
  border: 1px solid #334155;
  overflow: hidden;
  margin: 14px 0;
}

canvas {
  width: 100%;
  display: block;
  touch-action: none;
}

.provera-note {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 12px;
  padding: 12px 16px;
  background: rgba(52,211,153,0.05);
  border-radius: 8px;
  border: 1px solid rgba(52,211,153,0.12);
}

.formula-list {
  list-style: none;
  padding: 0;
}

.formula-list li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
}

.formula-list li:last-child { border-bottom: none; }

.case-box {
  background: rgba(167,139,250,0.08);
  border: 1px solid rgba(167,139,250,0.2);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 12px 0;
}

.case-box.case-a {
  border-color: rgba(96,165,250,0.3);
  background: rgba(96,165,250,0.06);
}

.case-box.case-b {
  border-color: rgba(244,114,182,0.3);
  background: rgba(244,114,182,0.06);
}

.case-label {
  font-weight: 700;
  font-size: 1.05rem;
  margin-bottom: 6px;
}

.case-label.blue { color: #60a5fa; }
.case-label.pink { color: #f472b6; }

.controls-row {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin: 10px 0;
  align-items: center;
}

.controls-row label {
  color: #94a3b8;
  font-size: 0.9rem;
}

.controls-row input[type="checkbox"] {
  accent-color: #60a5fa;
}

.legend-item {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  margin-right: 16px;
  font-size: 0.85rem;
  color: #94a3b8;
}

.legend-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  display: inline-block;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step-container { flex-direction: column; gap: 8px; }
  .given-grid { flex-direction: column; }
  .options-grid { flex-direction: column; align-items: center; }
  .final-answer-box .answer-value { font-size: 1.8rem; }
}
</style>
</head>
<body>

<div class="container">

  <!-- Title -->
  <h1>Ekstremne vrednosti funkcije sa apsolutnom vrednoscu</h1>
  <p class="subtitle">Nalazenje minimuma i maksimuma funkcije \(y = x^3 - 2x|x-2|\) na segmentu \([0, 3]\)</p>

  <!-- Problem Statement -->
  <div class="card">
    <h2>Postavka zadatka</h2>
    <p>Ako su \(m\) i \(M\) redom najmanja i najveca vrednost funkcije</p>
    <div class="math-box">
      \[ y = x^3 - 2x|x - 2| \]
    </div>
    <p>na segmentu \([0,\, 3]\), tada je zbir \(m + M\) jednak:</p>
    <div class="given-grid">
      <div class="given-item">
        <div class="label">Odgovor (A)</div>
        <div class="value">\(5\)</div>
      </div>
      <div class="given-item">
        <div class="label">Odgovor (B)</div>
        <div class="value">\(\dfrac{527}{27}\)</div>
      </div>
      <div class="given-item">
        <div class="label">Odgovor (C)</div>
        <div class="value">\(\dfrac{31}{27}\)</div>
      </div>
      <div class="given-item">
        <div class="label">Odgovor (D)</div>
        <div class="value">\(29\)</div>
      </div>
      <div class="given-item">
        <div class="label">Odgovor (E)</div>
        <div class="value">\(\dfrac{607}{27}\)</div>
      </div>
      <div class="given-item">
        <div class="label">Odgovor (N)</div>
        <div class="value">Ne znam</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>Resavamo u cetiri koraka:</p>
    <ol style="padding-left: 20px; margin-top: 10px;">
      <li style="margin-bottom: 6px;">Razbijemo apsolutnu vrednost \(|x-2|\) po intervalima: \([0, 2]\) i \([2, 3]\).</li>
      <li style="margin-bottom: 6px;">Na svakom podintervalu nadjemo kriticne tacke (nule izvoda) i izracunamo vrednosti funkcije u njima.</li>
      <li style="margin-bottom: 6px;">Izracunamo vrednosti funkcije na krajevima segmenta i u tacki prekida \(x = 2\).</li>
      <li style="margin-bottom: 6px;">Uporedimo sve dobijene vrednosti i odredimo \(m\) (minimum) i \(M\) (maksimum), pa izracunamo \(m + M\).</li>
    </ol>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Teorija: Ekstremne vrednosti neprekidne funkcije na zatvorenom intervalu</summary>
      <div class="details-content">
        <ul class="formula-list">
          <li><strong>Vajerstrasova teorema:</strong> Neprekidna funkcija na zatvorenom intervalu \([a,b]\) doseze svoj minimum i maksimum.</li>
          <li><strong>Gde traziti ekstreme:</strong> Kandidati za ekstremne vrednosti su: krajevi intervala (\(a\) i \(b\)), stacionarne tacke (gde je \(f'(x) = 0\)), i tacke gde izvod ne postoji.</li>
          <li><strong>Apsolutna vrednost:</strong> \(|x - c| = \begin{cases} c - x, & x < c \\ x - c, & x \geq c \end{cases}\)</li>
          <li><strong>Metod za funkcije sa \(|x-c|\):</strong> Razbijemo domen na potintervale oko tacke \(c\) i na svakom analiziramo funkciju kao obican polinom.</li>
          <li><strong>Nalazenje stacionarnih tacaka:</strong> Resavamo jednacinu \(f'(x) = 0\) i proveravamo da li su resenja u zadatom intervalu.</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <h2>Interaktivni grafik funkcije</h2>
    <p style="color: #94a3b8; margin-bottom: 10px;">Grafik prikazuje funkciju \(y = x^3 - 2x|x-2|\) na segmentu \([0, 3]\). Pomeranjem misa po grafiku mozete ocitavati koordinate. Oznacene su kriticne tacke, minimum i maksimum.</p>
    <div class="controls-row">
      <span class="legend-item"><span class="legend-dot" style="background:#60a5fa;"></span> \(f_1(x) = x^3 + 2x^2 - 4x\) na \([0, 2]\)</span>
      <span class="legend-item"><span class="legend-dot" style="background:#f472b6;"></span> \(f_2(x) = x^3 - 2x^2 + 4x\) na \([2, 3]\)</span>
      <span class="legend-item"><span class="legend-dot" style="background:#4ade80;"></span> Ekstremne tacke</span>
    </div>
    <div class="controls-row">
      <label><input type="checkbox" id="showDerivative"> Prikazi izvod \(y'\)</label>
      <label><input type="checkbox" id="showTangent"> Prikazi tangentu pri prelasku misem</label>
    </div>
    <div class="canvas-wrapper">
      <canvas id="diagram" width="900" height="520"></canvas>
    </div>
    <p id="coordDisplay" style="color: #94a3b8; font-size: 0.9rem; margin-top: 6px; min-height: 1.4em;"></p>
  </div>

  <!-- Step-by-step Solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Razbijanje apsolutne vrednosti po intervalima</h3>
        <p>Izraz \(|x - 2|\) se razbija na dva slucaja u zavisnosti od znaka argumenta:</p>
        <div class="case-box case-a">
          <div class="case-label blue">Slucaj 1: \(x \in [0,\, 2]\) \(\Longrightarrow\) \(x - 2 \leq 0\) \(\Longrightarrow\) \(|x-2| = 2 - x\)</div>
          <div class="math-box">
            \[
            y = x^3 - 2x(2 - x) = x^3 - 4x + 2x^2 = x^3 + 2x^2 - 4x
            \]
          </div>
        </div>
        <div class="case-box case-b">
          <div class="case-label pink">Slucaj 2: \(x \in [2,\, 3]\) \(\Longrightarrow\) \(x - 2 \geq 0\) \(\Longrightarrow\) \(|x-2| = x - 2\)</div>
          <div class="math-box">
            \[
            y = x^3 - 2x(x - 2) = x^3 - 2x^2 + 4x
            \]
          </div>
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details>
      <summary>Proveri se: Da li se delovi poklapaju u tacki \(x = 2\)?</summary>
      <div class="details-content">
        <p>Funkcija mora biti neprekidna, pa proveravamo da li oba izraza daju istu vrednost u \(x = 2\):</p>
        <div class="math-box">
          \[
          f_1(2) = 2^3 + 2 \cdot 2^2 - 4 \cdot 2 = 8 + 8 - 8 = 8
          \]
        </div>
        <div class="math-box">
          \[
          f_2(2) = 2^3 - 2 \cdot 2^2 + 4 \cdot 2 = 8 - 8 + 8 = 8
          \]
        </div>
        <p>Oba dela daju \(y(2) = 8\). Funkcija je neprekidna u tacki spajanja. Potvrdjeno!</p>
      </div>
    </details>

    <!-- Step 2 -->
    <div class="step-container">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Kriticne tacke na intervalu \([0, 2]\)</h3>
        <p>Na ovom intervalu \(y = x^3 + 2x^2 - 4x\). Trazimo stacionarne tacke:</p>
        <div class="math-box">
          \[
          y' = 3x^2 + 4x - 4
          \]
        </div>
        <p>Faktorizujemo kvadratni trinom:</p>
        <div class="math-box">
          \[
          3x^2 + 4x - 4 = 0
          \]
        </div>
        <p>Koristimo formulu za resenja kvadratne jednacine:</p>
        <div class="math-box">
          \[
          x = \frac{-4 \pm \sqrt{16 + 48}}{6} = \frac{-4 \pm \sqrt{64}}{6} = \frac{-4 \pm 8}{6}
          \]
        </div>
        <div class="math-box">
          \[
          x_1 = \frac{-4 + 8}{6} = \frac{4}{6} = \frac{2}{3}, \qquad x_2 = \frac{-4 - 8}{6} = \frac{-12}{6} = -2
          \]
        </div>
        <p>Tacka \(x = -2\) je van segmenta \([0, 3]\), pa je odbacujemo. Ostaje <span class="highlight">\(x = \dfrac{2}{3}\)</span> koja pripada intervalu \([0, 2]\).</p>
        <p>Proverom znaka izvoda: za \(x < \frac{2}{3}\) je \(y' < 0\) (funkcija opada), za \(x > \frac{2}{3}\) je \(y' > 0\) (funkcija raste). Dakle, \(x = \frac{2}{3}\) je <span class="highlight">lokalni minimum</span>.</p>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step-container">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Kriticne tacke na intervalu \([2, 3]\)</h3>
        <p>Na ovom intervalu \(y = x^3 - 2x^2 + 4x\). Racunamo izvod:</p>
        <div class="math-box">
          \[
          y' = 3x^2 - 4x + 4
          \]
        </div>
        <p>Proveravamo diskriminantu:</p>
        <div class="math-box">
          \[
          D = (-4)^2 - 4 \cdot 3 \cdot 4 = 16 - 48 = -32 < 0
          \]
        </div>
        <p>Posto je diskriminanta negativna, <span class="highlight">nema realnih resenja</span> -- izvod nema nula na ovom intervalu. Proverimo znak izvoda u jednoj tacki:</p>
        <div class="math-box">
          \[
          y'(2) = 3 \cdot 4 - 4 \cdot 2 + 4 = 12 - 8 + 4 = 8 > 0
          \]
        </div>
        <p>Dakle, \(y' > 0\) na celom intervalu \([2, 3]\), sto znaci da funkcija <span class="highlight">strogo raste</span> na tom delu. Nema kriticnih tacaka.</p>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details>
      <summary>Proveri se: Zasto nema kriticnih tacaka na \([2, 3]\)?</summary>
      <div class="details-content">
        <p>Izvod \(y' = 3x^2 - 4x + 4\) je kvadratna funkcija sa pozitivnim vodecim koeficijentom (\(a = 3 > 0\)) i negativnom diskriminantom (\(D = -32 < 0\)). To znaci da je parabola okrenuta nagore i nikad ne sece \(x\)-osu, odnosno \(y' > 0\) za svako realno \(x\). Funkcija uvek raste na ovom intervalu.</p>
      </div>
    </details>

    <!-- Step 4 -->
    <div class="step-container">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Izracunavanje vrednosti u svim kandidatima</h3>
        <p>Kandidati za ekstremne vrednosti su: krajevi segmenta (\(x = 0\) i \(x = 3\)), stacionarna tacka (\(x = \frac{2}{3}\)) i tacka prekida (\(x = 2\)):</p>

        <div class="math-box">
          \[
          y(0) = 0^3 + 2 \cdot 0^2 - 4 \cdot 0 = 0
          \]
        </div>

        <div class="math-box">
          \[
          y\!\left(\frac{2}{3}\right) = \left(\frac{2}{3}\right)^3 + 2\left(\frac{2}{3}\right)^2 - 4 \cdot \frac{2}{3} = \frac{8}{27} + \frac{8}{9} - \frac{8}{3}
          \]
        </div>
        <p>Svedimo na zajednicki imenilac 27:</p>
        <div class="math-box">
          \[
          y\!\left(\frac{2}{3}\right) = \frac{8}{27} + \frac{24}{27} - \frac{72}{27} = \frac{8 + 24 - 72}{27} = -\frac{40}{27}
          \]
        </div>

        <div class="math-box">
          \[
          y(2) = 8 + 8 - 8 = 8 \qquad \text{(vec izracunato)}
          \]
        </div>

        <div class="math-box">
          \[
          y(3) = 3^3 - 2 \cdot 3^2 + 4 \cdot 3 = 27 - 18 + 12 = 21
          \]
        </div>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step-container">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Odredjivanje minimuma i maksimuma</h3>
        <p>Uporedimo sve izracunate vrednosti:</p>
        <div class="math-box">
          \[
          \begin{array}{c|c}
          x & y(x) \\[4pt]
          \hline
          0 & 0 \\[3pt]
          \dfrac{2}{3} & -\dfrac{40}{27} \approx -1{,}48 \\[6pt]
          2 & 8 \\[3pt]
          3 & 21
          \end{array}
          \]
        </div>
        <p>Iz tabele jasno vidimo:</p>
        <div class="math-box">
          \[
          m = -\frac{40}{27} \quad \text{(najmanja vrednost, u tacki } x = \tfrac{2}{3}\text{)}
          \]
        </div>
        <div class="math-box">
          \[
          M = 21 \quad \text{(najveca vrednost, u tacki } x = 3\text{)}
          \]
        </div>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step-container">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Izracunavanje zbira \(m + M\)</h3>
        <div class="math-box">
          \[
          m + M = -\frac{40}{27} + 21 = -\frac{40}{27} + \frac{567}{27} = \frac{-40 + 567}{27} = \frac{527}{27}
          \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details>
      <summary>Proveri se: Da li je \(\frac{527}{27}\) pravilno izracunato?</summary>
      <div class="details-content">
        <p>Proverimo: \(21 = \frac{21 \cdot 27}{27} = \frac{567}{27}\). Zatim:</p>
        <div class="math-box">
          \[
          \frac{567 - 40}{27} = \frac{527}{27} \approx 19{,}52
          \]
        </div>
        <p>Proverimo i decimalno: \(-1{,}481 + 21 = 19{,}519 \approx \frac{527}{27}\). Potvrdjeno!</p>
        <p>Takodje, \(527 = 17 \cdot 31\) i \(27 = 3^3\), pa se razlomak ne moze skratiti. Konacni oblik je \(\frac{527}{27}\).</p>
      </div>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Kljucni uvid</h2>
    <p>Kada funkcija sadrzi apsolutnu vrednost \(|x - c|\), kljucni korak je razbijanje na potintervale
       oko tacke \(c\). Na svakom podintervalu funkcija postaje obican polinom, i klasicna analiza
       pomocu izvoda funkcionise normalno. Treba ne zaboraviti da proveru vrsimo ne samo u stacionarnim
       tackama, vec i u <strong>krajnjim tackama segmenta</strong> i u <strong>tackama prekida</strong>
       (gde se menja definicija funkcije, ovde \(x = 2\)), jer i tu mogu nastati globalni ekstremi.</p>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <h2 style="color: #34d399; margin-bottom: 10px;">Konacan odgovor</h2>
    <div class="options-grid">
      <div class="option-chip">(A) \(5\)</div>
      <div class="option-chip correct">(B) \(\dfrac{527}{27}\)</div>
      <div class="option-chip">(C) \(\dfrac{31}{27}\)</div>
      <div class="option-chip">(D) \(29\)</div>
      <div class="option-chip">(E) \(\dfrac{607}{27}\)</div>
      <div class="option-chip">(N) Ne znam</div>
    </div>
    <div class="answer-value">\(m + M = \dfrac{527}{27}\)</div>
    <div class="provera-note">
      <strong>Provera:</strong> Minimum \(m = -\frac{40}{27}\) u tacki \(x = \frac{2}{3}\), maksimum \(M = 21\) u tacki \(x = 3\).
      Zbir: \(-\frac{40}{27} + \frac{567}{27} = \frac{527}{27} \approx 19{,}52\). Tacan odgovor je <strong>(B)</strong>.
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfall-box">
    <h2>Ceste greske</h2>
    <ul style="list-style: disc; padding-left: 20px; color: #e2e8f0;">
      <li style="margin-bottom: 10px;"><strong>Pogresno razbijanje apsolutne vrednosti:</strong> Najcesca greska
        je pisanje \(|x - 2| = x - 2\) za sve \(x\), bez obzira na znak. Za \(x < 2\) vazi
        \(|x - 2| = 2 - x\) (sa promenjenim znakom), sto bitno menja oblik funkcije.</li>
      <li style="margin-bottom: 10px;"><strong>Zaboravljanje tacke prekida \(x = 2\):</strong> Iako se delovi
        poklapaju u \(x = 2\), ova tacka mora uci u spisak kandidata jer se tu menja definicija
        funkcije. U ovom zadatku ona nije ekstrem, ali u slicnim problemima moze biti.</li>
      <li style="margin-bottom: 10px;"><strong>Greska u racunu sa razlomcima:</strong> Kod izracunavanja
        \(y\!\left(\frac{2}{3}\right)\) cesto se pogresi prilikom svodjenja na zajednicki imenilac.
        Precizan racun: \(\frac{8}{27} + \frac{24}{27} - \frac{72}{27} = -\frac{40}{27}\).</li>
      <li><strong>Proglasavanje \(x = 2\) za tacku nedefinisanosti:</strong> Funkcija \(y = x^3 - 2x|x-2|\)
        je savrseno definisana i neprekidna u \(x = 2\). Apsolutna vrednost ne pravi "rupu" u grafiku,
        vec samo lom (promena nagiba).</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-box">
    <h2>Bonus izazov</h2>
    <p>Razmislite o sledecim pitanjima vezanim za istu funkciju \(y = x^3 - 2x|x-2|\):</p>
    <ol style="padding-left: 20px; margin-top: 10px;">
      <li style="margin-bottom: 6px;">Da li je funkcija diferencijabilna u tacki \(x = 2\)? Izracunajte levi i desni izvod.</li>
      <li style="margin-bottom: 6px;">Odredite sve tacke preseka grafika sa \(x\)-osom na segmentu \([0, 3]\).</li>
      <li style="margin-bottom: 6px;">Na kom intervalu funkcija opada? Kolika je duzina tog intervala?</li>
    </ol>
    <details>
      <summary>Pogledaj nagovestaj</summary>
      <div class="details-content">
        <p><strong>1.</strong> Levi izvod u \(x = 2\): \(f_1'(2) = 3 \cdot 4 + 4 \cdot 2 - 4 = 16\). Desni izvod u \(x = 2\): \(f_2'(2) = 3 \cdot 4 - 4 \cdot 2 + 4 = 8\). Posto je \(16 \neq 8\), funkcija <strong>nije diferencijabilna</strong> u \(x = 2\) (grafik ima "lom").</p>
        <p><strong>2.</strong> Na \([0, 2]\): \(x^3 + 2x^2 - 4x = x(x^2 + 2x - 4) = 0\), pa \(x = 0\) ili \(x = -1 + \sqrt{5} \approx 1{,}236\). Na \([2, 3]\): \(x^3 - 2x^2 + 4x = x(x^2 - 2x + 4) = 0\), ali \(x^2 - 2x + 4 > 0\) uvek, pa je jedina nula \(x = 0\) (van tog intervala). Dakle, preseci sa \(x\)-osom: \(x = 0\) i \(x = \sqrt{5} - 1\).</p>
        <p><strong>3.</strong> Funkcija opada na \([0,\, \frac{2}{3}]\), jer je \(y' < 0\) na tom intervalu. Duzina intervala je \(\frac{2}{3}\).</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('diagram');
  const ctx = canvas.getContext('2d');
  const coordDisplay = document.getElementById('coordDisplay');
  const showDerivativeCheckbox = document.getElementById('showDerivative');
  const showTangentCheckbox = document.getElementById('showTangent');

  let mouseX = -1, mouseY = -1;
  let hoveredX = null;

  // Function definitions
  function f(x) {
    if (x <= 2) {
      return x * x * x + 2 * x * x - 4 * x;
    } else {
      return x * x * x - 2 * x * x + 4 * x;
    }
  }

  function fPrime(x) {
    if (x < 2) {
      return 3 * x * x + 4 * x - 4;
    } else if (x > 2) {
      return 3 * x * x - 4 * x + 4;
    } else {
      return NaN; // not differentiable at x=2
    }
  }

  // Key points
  var keyPoints = [
    { x: 0, y: 0, label: 'y(0) = 0', type: 'endpoint' },
    { x: 2/3, y: -40/27, label: 'y(2/3) = -40/27', type: 'minimum' },
    { x: 2, y: 8, label: 'y(2) = 8', type: 'junction' },
    { x: 3, y: 21, label: 'y(3) = 21', type: 'maximum' }
  ];

  function draw() {
    var dpr = window.devicePixelRatio || 1;
    var rect = canvas.getBoundingClientRect();
    canvas.width = rect.width * dpr;
    canvas.height = 520 * dpr;
    canvas.style.height = '520px';
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    var W = rect.width;
    var H = 520;

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Chart area
    var mL = 65, mR = 30, mT = 30, mB = 50;
    var cW = W - mL - mR;
    var cH = H - mT - mB;

    // Domain and range
    var xMin = -0.2, xMax = 3.3;
    var yMinVal = -3, yMaxVal = 23;

    function toCanvasX(x) { return mL + ((x - xMin) / (xMax - xMin)) * cW; }
    function toCanvasY(y) { return mT + (1 - (y - yMinVal) / (yMaxVal - yMinVal)) * cH; }
    function fromCanvasX(cx) { return xMin + ((cx - mL) / cW) * (xMax - xMin); }
    function fromCanvasY(cy) { return yMinVal + (1 - (cy - mT) / cH) * (yMaxVal - yMinVal); }

    // Grid lines
    ctx.strokeStyle = '#1a2332';
    ctx.lineWidth = 0.5;
    for (var gx = 0; gx <= 3; gx += 0.5) {
      var px = toCanvasX(gx);
      ctx.beginPath();
      ctx.moveTo(px, mT);
      ctx.lineTo(px, mT + cH);
      ctx.stroke();
    }
    for (var gy = -2; gy <= 22; gy += 2) {
      var py = toCanvasY(gy);
      ctx.beginPath();
      ctx.moveTo(mL, py);
      ctx.lineTo(mL + cW, py);
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    // x-axis at y=0
    var axisY = toCanvasY(0);
    ctx.beginPath();
    ctx.moveTo(mL, axisY);
    ctx.lineTo(mL + cW, axisY);
    ctx.stroke();
    // y-axis at x=0
    var axisX = toCanvasX(0);
    ctx.beginPath();
    ctx.moveTo(axisX, mT);
    ctx.lineTo(axisX, mT + cH);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    for (var gx = 0; gx <= 3; gx += 1) {
      ctx.fillText(gx.toString(), toCanvasX(gx), mT + cH + 18);
    }
    ctx.textAlign = 'right';
    for (var gy = -2; gy <= 22; gy += 4) {
      ctx.fillText(gy.toString(), mL - 8, toCanvasY(gy) + 4);
    }

    // Axis titles
    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('x', mL + cW + 15, axisY + 4);
    ctx.fillText('y', axisX, mT - 10);

    // Draw segment boundaries [0, 3]
    ctx.strokeStyle = 'rgba(148, 163, 184, 0.3)';
    ctx.lineWidth = 1;
    ctx.setLineDash([4, 4]);
    // x = 2 boundary
    var bx2 = toCanvasX(2);
    ctx.beginPath();
    ctx.moveTo(bx2, mT);
    ctx.lineTo(bx2, mT + cH);
    ctx.stroke();
    ctx.setLineDash([]);

    // Label for x=2
    ctx.fillStyle = '#94a3b8';
    ctx.font = '10px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('x = 2', bx2, mT + cH + 32);

    // Draw derivative curve if enabled
    if (showDerivativeCheckbox && showDerivativeCheckbox.checked) {
      ctx.strokeStyle = 'rgba(167, 139, 250, 0.5)';
      ctx.lineWidth = 1.5;
      ctx.setLineDash([3, 3]);

      // Derivative on [0, 2)
      ctx.beginPath();
      var started = false;
      for (var px = 0; px <= 2; px += 0.01) {
        var dy = 3 * px * px + 4 * px - 4;
        var cx = toCanvasX(px);
        var cy = toCanvasY(dy);
        if (cy >= mT && cy <= mT + cH) {
          if (!started) { ctx.moveTo(cx, cy); started = true; }
          else ctx.lineTo(cx, cy);
        }
      }
      ctx.stroke();

      // Derivative on (2, 3]
      ctx.beginPath();
      started = false;
      for (var px = 2.01; px <= 3; px += 0.01) {
        var dy = 3 * px * px - 4 * px + 4;
        var cx = toCanvasX(px);
        var cy = toCanvasY(dy);
        if (cy >= mT && cy <= mT + cH) {
          if (!started) { ctx.moveTo(cx, cy); started = true; }
          else ctx.lineTo(cx, cy);
        }
      }
      ctx.stroke();
      ctx.setLineDash([]);

      // Legend for derivative
      ctx.fillStyle = 'rgba(167, 139, 250, 0.7)';
      ctx.font = '11px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText("y' (izvod)", mL + 10, mT + 16);
    }

    // Draw main function curve - part 1: [0, 2]
    ctx.lineWidth = 2.5;
    ctx.strokeStyle = '#60a5fa';
    ctx.beginPath();
    for (var px = 0; px <= 2; px += 0.005) {
      var vy = px * px * px + 2 * px * px - 4 * px;
      var cx = toCanvasX(px);
      var cy = toCanvasY(vy);
      if (px === 0) ctx.moveTo(cx, cy);
      else ctx.lineTo(cx, cy);
    }
    ctx.stroke();

    // Draw main function curve - part 2: [2, 3]
    ctx.strokeStyle = '#f472b6';
    ctx.beginPath();
    for (var px = 2; px <= 3; px += 0.005) {
      var vy = px * px * px - 2 * px * px + 4 * px;
      var cx = toCanvasX(px);
      var cy = toCanvasY(vy);
      if (px === 2) ctx.moveTo(cx, cy);
      else ctx.lineTo(cx, cy);
    }
    ctx.stroke();

    // Horizontal dashed lines for min and max
    ctx.setLineDash([5, 5]);
    ctx.lineWidth = 1;

    // Minimum line y = -40/27
    ctx.strokeStyle = 'rgba(52, 211, 153, 0.4)';
    ctx.beginPath();
    ctx.moveTo(mL, toCanvasY(-40/27));
    ctx.lineTo(toCanvasX(2/3), toCanvasY(-40/27));
    ctx.stroke();

    // Maximum line y = 21
    ctx.strokeStyle = 'rgba(52, 211, 153, 0.4)';
    ctx.beginPath();
    ctx.moveTo(mL, toCanvasY(21));
    ctx.lineTo(toCanvasX(3), toCanvasY(21));
    ctx.stroke();

    ctx.setLineDash([]);

    // Min/Max y-axis labels
    ctx.fillStyle = '#34d399';
    ctx.font = 'bold 10px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText('m = -40/27', mL - 4, toCanvasY(-40/27) + 4);
    ctx.fillText('M = 21', mL - 4, toCanvasY(21) + 4);

    // Draw key points
    for (var i = 0; i < keyPoints.length; i++) {
      var pt = keyPoints[i];
      var px = toCanvasX(pt.x);
      var py = toCanvasY(pt.y);

      // Glow
      if (pt.type === 'minimum' || pt.type === 'maximum') {
        ctx.shadowColor = '#4ade80';
        ctx.shadowBlur = 16;
      }

      ctx.beginPath();
      ctx.arc(px, py, pt.type === 'minimum' || pt.type === 'maximum' ? 7 : 5, 0, Math.PI * 2);
      if (pt.type === 'minimum') {
        ctx.fillStyle = '#4ade80';
      } else if (pt.type === 'maximum') {
        ctx.fillStyle = '#4ade80';
      } else if (pt.type === 'junction') {
        ctx.fillStyle = '#a78bfa';
      } else {
        ctx.fillStyle = '#e2e8f0';
      }
      ctx.fill();
      ctx.strokeStyle = '#0c1222';
      ctx.lineWidth = 2;
      ctx.stroke();
      ctx.shadowBlur = 0;

      // Label
      var labelX = px;
      var labelY = py;
      var align = 'center';
      var offsetY = -14;

      if (pt.type === 'minimum') {
        offsetY = 18;
        ctx.fillStyle = '#4ade80';
        ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
      } else if (pt.type === 'maximum') {
        offsetY = -14;
        ctx.fillStyle = '#4ade80';
        ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
      } else if (pt.type === 'junction') {
        offsetY = -14;
        labelX = px + 8;
        align = 'left';
        ctx.fillStyle = '#a78bfa';
        ctx.font = '11px Segoe UI, system-ui, sans-serif';
      } else {
        offsetY = 18;
        ctx.fillStyle = '#e2e8f0';
        ctx.font = '11px Segoe UI, system-ui, sans-serif';
      }

      ctx.textAlign = align;
      ctx.fillText(pt.label, labelX, labelY + offsetY);
    }

    // Min/Max annotations with arrows
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('MINIMUM', toCanvasX(2/3) + 12, toCanvasY(-40/27) + 5);

    ctx.fillText('MAKSIMUM', toCanvasX(3) - 85, toCanvasY(21) - 18);

    // Draw tangent if enabled and mouse is on curve
    if (showTangentCheckbox && showTangentCheckbox.checked && hoveredX !== null) {
      var hx = hoveredX;
      if (hx >= 0 && hx <= 3 && Math.abs(hx - 2) > 0.02) {
        var hy = f(hx);
        var slope = fPrime(hx);
        if (!isNaN(slope)) {
          ctx.strokeStyle = 'rgba(244, 114, 182, 0.6)';
          ctx.lineWidth = 1.5;
          ctx.setLineDash([4, 3]);
          ctx.beginPath();
          var tx1 = Math.max(xMin, hx - 0.8);
          var tx2 = Math.min(xMax, hx + 0.8);
          ctx.moveTo(toCanvasX(tx1), toCanvasY(hy + slope * (tx1 - hx)));
          ctx.lineTo(toCanvasX(tx2), toCanvasY(hy + slope * (tx2 - hx)));
          ctx.stroke();
          ctx.setLineDash([]);

          // Small dot at hover point
          ctx.beginPath();
          ctx.arc(toCanvasX(hx), toCanvasY(hy), 4, 0, Math.PI * 2);
          ctx.fillStyle = '#f472b6';
          ctx.fill();
        }
      }
    }

    // Title
    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('y = x\u00B3 \u2212 2x|x \u2212 2| na [0, 3]', mL + cW / 2, H - 8);
  }

  function handleMouseMove(e) {
    var rect = canvas.getBoundingClientRect();
    mouseX = e.clientX - rect.left;
    mouseY = e.clientY - rect.top;

    var mL = 65, mR = 30, mT = 30, mB = 50;
    var cW = rect.width - mL - mR;
    var xMin = -0.2, xMax = 3.3;

    var hx = xMin + ((mouseX - mL) / cW) * (xMax - xMin);

    if (hx >= 0 && hx <= 3) {
      hoveredX = hx;
      var hy = f(hx);
      var xStr = hx.toFixed(3).replace('.', ',');
      var yStr = hy.toFixed(3).replace('.', ',');
      var info = 'x = ' + xStr + '  |  y = ' + yStr;

      if (Math.abs(hx - 2) > 0.02) {
        var slope = fPrime(hx);
        if (!isNaN(slope)) {
          info += '  |  y\' = ' + slope.toFixed(3).replace('.', ',');
        }
      } else {
        info += '  |  y\' ne postoji (tacka loma)';
      }
      coordDisplay.textContent = info;
    } else {
      hoveredX = null;
      coordDisplay.textContent = '';
    }

    draw();
  }

  function handleMouseLeave() {
    hoveredX = null;
    mouseX = -1;
    mouseY = -1;
    coordDisplay.textContent = '';
    draw();
  }

  canvas.addEventListener('mousemove', handleMouseMove);
  canvas.addEventListener('mouseleave', handleMouseLeave);

  // Touch support
  canvas.addEventListener('touchmove', function(e) {
    e.preventDefault();
    var touch = e.touches[0];
    handleMouseMove({ clientX: touch.clientX, clientY: touch.clientY });
  }, { passive: false });
  canvas.addEventListener('touchend', handleMouseLeave);

  if (showDerivativeCheckbox) showDerivativeCheckbox.addEventListener('change', draw);
  if (showTangentCheckbox) showTangentCheckbox.addEventListener('change', draw);

  draw();
  window.addEventListener('resize', draw);
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Ekstremne vrednosti funkcije sa apsolutnom vrednoscu",
  "subject": "math",
  "unit": "analiza",
  "topic_tags": ["apsolutna vrednost", "ekstremne vrednosti", "minimum i maksimum", "izvod funkcije", "po delovima definisana funkcija", "stacionarne tacke", "neprekidnost"]
}
BRAINSPARK_META-->