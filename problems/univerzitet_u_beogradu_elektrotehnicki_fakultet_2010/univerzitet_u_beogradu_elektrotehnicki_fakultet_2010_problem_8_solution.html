<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tangens razlike uglova i sinusna funkcija</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
Problem: Ako je tg(π/4 - x/2) = √(a/b), (a > 0, b > 0, a ≠ b), tada je sin x jednak:
(A) (b-a)/(b+a)  (B) √b - √a  (C) (a+b)/(a-b)  (D) 1/(√a - √b)  (E) 1 - b/a

Step 1: Let α = π/4 - x/2. Then x/2 = π/4 - α, so x = π/2 - 2α.

Step 2: sin x = sin(π/2 - 2α) = cos(2α)

Step 3: Use the identity cos(2α) = (1 - tg²α)/(1 + tg²α)

Step 4: We know tg(α) = tg(π/4 - x/2) = √(a/b)
So tg²(α) = a/b

Step 5: sin x = cos(2α) = (1 - a/b)/(1 + a/b)
         = ((b - a)/b) / ((b + a)/b)
         = (b - a)/(b + a)

Answer: (A) (b - a)/(b + a)

Alternative verification via tangent subtraction formula:
tg(π/4 - x/2) = (1 - tg(x/2))/(1 + tg(x/2)) = √(a/b)

Let t = tg(x/2). Then (1 - t)/(1 + t) = √a/√b.
Cross multiply: √b(1-t) = √a(1+t)
√b - √b·t = √a + √a·t
t(√a + √b) = √b - √a
t = (√b - √a)/(√b + √a)

sin x = 2t/(1+t²):
t² = (√b - √a)²/(√b + √a)² = (b - 2√(ab) + a)/(b + 2√(ab) + a)

1 + t² = 1 + (a + b - 2√(ab))/(a + b + 2√(ab))
       = ((a+b+2√(ab)) + (a+b-2√(ab))) / (a+b+2√(ab))
       = 2(a+b)/(a+b+2√(ab))

2t = 2(√b - √a)/(√b + √a)

sin x = 2t/(1+t²) = [2(√b-√a)/(√b+√a)] / [2(a+b)/(√b+√a)²]
      = [2(√b-√a)/(√b+√a)] · [(√b+√a)²/(2(a+b))]
      = (√b-√a)(√b+√a)/(a+b)
      = (b-a)/(b+a)

Both methods confirm answer (A).
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 14px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 140px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #60a5fa;
  font-size: 1.15rem;
  font-weight: 700;
}

.plan-card {
  border-left: 4px solid #a78bfa;
}

.plan-card h2 { color: #a78bfa; }

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 10px 14px;
  background: rgba(96,165,250,0.06);
  border-radius: 8px;
  border: 1px solid rgba(96,165,250,0.12);
  list-style: none;
  user-select: none;
}

details summary::-webkit-details-marker { display: none; }

details summary::before {
  content: '\25B8 ';
  display: inline;
}

details[open] summary::before {
  content: '\25BE ';
}

details .details-content {
  padding: 14px 18px;
  margin-top: 8px;
  background: rgba(96,165,250,0.04);
  border-radius: 8px;
  border: 1px solid rgba(96,165,250,0.08);
}

.step-container {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  align-items: flex-start;
}

.step-badge {
  min-width: 34px;
  height: 34px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: 0.95rem;
  color: #0f172a;
  margin-top: 2px;
  flex-shrink: 0;
}

.step-content {
  flex: 1;
  min-width: 0;
}

.step-content h3 {
  margin-bottom: 8px;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 14px;
  padding: 22px 26px;
  margin-bottom: 24px;
}

.insight-box h2 { color: #a78bfa; }

.final-answer-box {
  background: linear-gradient(135deg, rgba(52,211,153,0.1), rgba(74,222,128,0.08));
  border: 2px solid rgba(52,211,153,0.35);
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin-bottom: 24px;
}

.final-answer-box .answer-value {
  font-size: 2.4rem;
  font-weight: 800;
  color: #4ade80;
  margin: 16px 0;
}

.options-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin: 18px 0;
}

.option-chip {
  background: rgba(96,165,250,0.08);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 22px;
  font-size: 1.05rem;
  color: #94a3b8;
  transition: all 0.2s;
}

.option-chip.correct {
  background: rgba(52,211,153,0.15);
  border-color: #34d399;
  color: #4ade80;
  font-weight: 700;
  box-shadow: 0 0 20px rgba(52,211,153,0.15);
}

.pitfall-box {
  border-left: 4px solid #e09468;
}

.pitfall-box h2 { color: #e09468; }

.challenge-box {
  border-left: 4px solid #a78bfa;
}

.challenge-box h2 { color: #a78bfa; }

.canvas-wrapper {
  background: #0c1222;
  border-radius: 12px;
  border: 1px solid #334155;
  overflow: hidden;
  margin: 14px 0;
}

canvas {
  width: 100%;
  display: block;
  touch-action: none;
}

.provera-note {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 12px;
  padding: 12px 16px;
  background: rgba(52,211,153,0.05);
  border-radius: 8px;
  border: 1px solid rgba(52,211,153,0.12);
}

.formula-list {
  list-style: none;
  padding: 0;
}

.formula-list li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
}

.formula-list li:last-child { border-bottom: none; }

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step-container { flex-direction: column; gap: 8px; }
  .given-grid { flex-direction: column; }
  .options-grid { flex-direction: column; align-items: center; }
  .final-answer-box .answer-value { font-size: 1.8rem; }
}
</style>
</head>
<body>

<div class="container">

  <!-- Title -->
  <h1>Tangens razlike uglova i vrednost sinusa</h1>
  <p class="subtitle">Primena trigonometrijskih identiteta za izrazavanje \(\sin x\) preko tangensa poluugla</p>

  <!-- Problem Statement -->
  <div class="card">
    <h2>Postavka zadatka</h2>
    <p>Ako je</p>
    <div class="math-box">
      \[ \operatorname{tg}\!\left(\frac{\pi}{4} - \frac{x}{2}\right) = \sqrt{\frac{a}{b}}, \quad a > 0,\; b > 0,\; a \neq b \]
    </div>
    <p>tada je \(\sin x\) jednak:</p>
    <div class="given-grid">
      <div class="given-item">
        <div class="label">Odgovor (A)</div>
        <div class="value">\(\dfrac{b-a}{b+a}\)</div>
      </div>
      <div class="given-item">
        <div class="label">Odgovor (B)</div>
        <div class="value">\(\sqrt{b} - \sqrt{a}\)</div>
      </div>
      <div class="given-item">
        <div class="label">Odgovor (C)</div>
        <div class="value">\(\dfrac{a+b}{a-b}\)</div>
      </div>
      <div class="given-item">
        <div class="label">Odgovor (D)</div>
        <div class="value">\(\dfrac{1}{\sqrt{a} - \sqrt{b}}\)</div>
      </div>
      <div class="given-item">
        <div class="label">Odgovor (E)</div>
        <div class="value">\(1 - \dfrac{b}{a}\)</div>
      </div>
      <div class="given-item">
        <div class="label">Odgovor (N)</div>
        <div class="value">Ne znam</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>Uvescemo smenu \(\alpha = \frac{\pi}{4} - \frac{x}{2}\) kako bismo izrazili \(\sin x\) preko
       \(\cos 2\alpha\). Zatim cemo primeniti poznati identitet koji povezuje kosinus dvostrukog ugla
       sa tangensom, i direktno uvrstiti datu vrednost tangensa.</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Kljucne formule i teoreme</summary>
      <div class="details-content">
        <ul class="formula-list">
          <li>Tangens razlike: \(\operatorname{tg}(\alpha - \beta) = \dfrac{\operatorname{tg}\alpha - \operatorname{tg}\beta}{1 + \operatorname{tg}\alpha \cdot \operatorname{tg}\beta}\)</li>
          <li>Kosinus dvostrukog ugla preko tangensa: \(\cos 2\alpha = \dfrac{1 - \operatorname{tg}^2\!\alpha}{1 + \operatorname{tg}^2\!\alpha}\)</li>
          <li>Komplementni uglovi: \(\sin\!\left(\frac{\pi}{2} - \theta\right) = \cos\theta\)</li>
          <li>Vajerstrasova (Weierstrass) supstitucija: \(\sin x = \dfrac{2\operatorname{tg}\frac{x}{2}}{1 + \operatorname{tg}^2\!\frac{x}{2}}\)</li>
          <li>Specijalna vrednost: \(\operatorname{tg}\frac{\pi}{4} = 1\)</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <h2>Vizuelni prikaz</h2>
    <p style="color: #94a3b8; margin-bottom: 10px;">Jedinicna kruznica sa prikazom uglova \(x\), \(\frac{x}{2}\) i \(\frac{\pi}{4} - \frac{x}{2}\):</p>
    <div class="canvas-wrapper">
      <canvas id="diagram" width="800" height="500"></canvas>
    </div>
    <p style="color: #94a3b8; font-size: 0.9rem; margin-top: 8px;">Prevuci klizac da menjas ugao \(x\). Prati kako se menjaju uglovi i vrednost sinusa.</p>
  </div>

  <!-- Step-by-step Solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Uvodimo smenu za ugao</h3>
        <p>Neka je \(\alpha = \frac{\pi}{4} - \frac{x}{2}\). Tada vazi:</p>
        <div class="math-box">
          \[
          \frac{x}{2} = \frac{\pi}{4} - \alpha \quad \Longrightarrow \quad x = \frac{\pi}{2} - 2\alpha
          \]
        </div>
        <p>Ova smena nam omogucava da \(\sin x\) izrazimo preko \(\alpha\), ugla ciji tangens poznajemo.</p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Izrazimo \(\sin x\) kao kosinus</h3>
        <p>Koristimo osobinu komplementnih uglova:</p>
        <div class="math-box">
          \[
          \sin x = \sin\!\left(\frac{\pi}{2} - 2\alpha\right) = \cos 2\alpha
          \]
        </div>
        <p>Sada treba da izracunamo \(\cos 2\alpha\), a znamo \(\operatorname{tg}\alpha\).</p>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details>
      <summary>Proveri se: Zasto je \(\sin(\pi/2 - 2\alpha) = \cos 2\alpha\)?</summary>
      <div class="details-content">
        <p>To je osnovna trigonometrijska veza komplementnih uglova. Za bilo koji ugao \(\theta\) vazi:</p>
        <div class="math-box">
          \[
          \sin\!\left(\frac{\pi}{2} - \theta\right) = \cos\theta
          \]
        </div>
        <p>U nasem slucaju \(\theta = 2\alpha\), pa je \(\sin(\frac{\pi}{2} - 2\alpha) = \cos 2\alpha\).</p>
      </div>
    </details>

    <!-- Step 3 -->
    <div class="step-container">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Primenimo identitet za kosinus dvostrukog ugla</h3>
        <p>Koristimo formulu koja izrazava \(\cos 2\alpha\) preko tangensa:</p>
        <div class="math-box">
          \[
          \cos 2\alpha = \frac{1 - \operatorname{tg}^2\!\alpha}{1 + \operatorname{tg}^2\!\alpha}
          \]
        </div>
        <p>Ova formula je izuzetno korisna jer direktno koristi tangens, sto je upravo ono sto je dato u zadatku!</p>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details>
      <summary>Proveri se: Odakle dolazi formula \(\cos 2\alpha = \frac{1 - \operatorname{tg}^2\!\alpha}{1 + \operatorname{tg}^2\!\alpha}\)?</summary>
      <div class="details-content">
        <p>Krecemo od poznatog identiteta \(\cos 2\alpha = \cos^2\!\alpha - \sin^2\!\alpha\) i koristimo \(\cos^2\!\alpha + \sin^2\!\alpha = 1\):</p>
        <div class="math-box">
          \[
          \cos 2\alpha = \frac{\cos^2\!\alpha - \sin^2\!\alpha}{\cos^2\!\alpha + \sin^2\!\alpha}
          \]
        </div>
        <p>Podelimo i brojilac i imenilac sa \(\cos^2\!\alpha\):</p>
        <div class="math-box">
          \[
          = \frac{1 - \frac{\sin^2\!\alpha}{\cos^2\!\alpha}}{1 + \frac{\sin^2\!\alpha}{\cos^2\!\alpha}} = \frac{1 - \operatorname{tg}^2\!\alpha}{1 + \operatorname{tg}^2\!\alpha}
          \]
        </div>
      </div>
    </details>

    <!-- Step 4 -->
    <div class="step-container">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Uvrstimo poznatu vrednost tangensa</h3>
        <p>Iz uslova zadatka imamo:</p>
        <div class="math-box">
          \[
          \operatorname{tg}\alpha = \operatorname{tg}\!\left(\frac{\pi}{4} - \frac{x}{2}\right) = \sqrt{\frac{a}{b}}
          \]
        </div>
        <p>Dakle:</p>
        <div class="math-box">
          \[
          \operatorname{tg}^2\!\alpha = \frac{a}{b}
          \]
        </div>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step-container">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Izracunajmo konacnu vrednost</h3>
        <p>Uvrstavamo \(\operatorname{tg}^2\!\alpha = \frac{a}{b}\) u formulu za kosinus dvostrukog ugla:</p>
        <div class="math-box">
          \[
          \sin x = \cos 2\alpha = \frac{1 - \dfrac{a}{b}}{1 + \dfrac{a}{b}}
          \]
        </div>
        <p>Prosirimo razlomke u brojiocu i imeniocu sa \(b\):</p>
        <div class="math-box">
          \[
          = \frac{\dfrac{b - a}{b}}{\dfrac{b + a}{b}} = \frac{b - a}{b + a}
          \]
        </div>
        <p>Faktor \(b\) u imeniocu razlomaka se skratio, i ostaje elegantan rezultat: <span class="highlight">\(\sin x = \dfrac{b-a}{b+a}\)</span>.</p>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details>
      <summary>Proveri se: Numericka provera sa konkretnim vrednostima</summary>
      <div class="details-content">
        <p>Uzmimo \(a = 1\), \(b = 3\). Tada:</p>
        <div class="math-box">
          \[
          \operatorname{tg}\!\left(\frac{\pi}{4} - \frac{x}{2}\right) = \sqrt{\frac{1}{3}} = \frac{1}{\sqrt{3}} \approx 0{,}5774
          \]
        </div>
        <p>Znamo da je \(\operatorname{tg}\frac{\pi}{6} = \frac{1}{\sqrt{3}}\), pa je \(\frac{\pi}{4} - \frac{x}{2} = \frac{\pi}{6}\),
           odakle \(\frac{x}{2} = \frac{\pi}{4} - \frac{\pi}{6} = \frac{\pi}{12}\), tj. \(x = \frac{\pi}{6}\).</p>
        <div class="math-box">
          \[
          \sin\frac{\pi}{6} = \frac{1}{2}
          \]
        </div>
        <p>Po nasoj formuli:</p>
        <div class="math-box">
          \[
          \frac{b - a}{b + a} = \frac{3 - 1}{3 + 1} = \frac{2}{4} = \frac{1}{2} \quad \checkmark
          \]
        </div>
        <p>Rezultati se poklapaju!</p>
      </div>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Kljucni uvid</h2>
    <p>Umesto da primenjujemo formulu za tangens razlike i Vajerstrasovu supstituciju (sto bi bio dugacak put),
       kljuc je bio uvesti smenu \(\alpha = \frac{\pi}{4} - \frac{x}{2}\). Tada se \(\sin x\) svodi na
       \(\cos 2\alpha\) (zahvaljujuci komplementnim uglovima), a \(\cos 2\alpha\) se elegantno izrazava
       preko \(\operatorname{tg}^2\!\alpha\) &mdash; sto je tacno velicina koja nam je data.</p>
    <p style="margin-top: 10px;">Formula \(\cos 2\alpha = \frac{1 - \operatorname{tg}^2\alpha}{1 + \operatorname{tg}^2\alpha}\)
       je izuzetno mocno orudje kad god u zadatku figurise tangens, a trazi se sinus ili kosinus dvostrukog ugla.</p>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <h2 style="color: #34d399; margin-bottom: 10px;">Konacan odgovor</h2>
    <div class="options-grid">
      <div class="option-chip correct">(A) \(\dfrac{b-a}{b+a}\)</div>
      <div class="option-chip">(B) \(\sqrt{b} - \sqrt{a}\)</div>
      <div class="option-chip">(C) \(\dfrac{a+b}{a-b}\)</div>
      <div class="option-chip">(D) \(\dfrac{1}{\sqrt{a} - \sqrt{b}}\)</div>
      <div class="option-chip">(E) \(1 - \dfrac{b}{a}\)</div>
      <div class="option-chip">(N) Ne znam</div>
    </div>
    <div class="answer-value">\(\sin x = \dfrac{b - a}{b + a}\)</div>
    <div class="provera-note">
      <strong>Provera:</strong> Za \(a = 1, b = 3\) dobijamo \(\sin x = \frac{1}{2}\), sto odgovara
      uglu \(x = \frac{\pi}{6}\). Zaista, \(\operatorname{tg}(\frac{\pi}{4} - \frac{\pi}{12}) = \operatorname{tg}\frac{\pi}{6} = \frac{1}{\sqrt{3}} = \sqrt{\frac{1}{3}}\).
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfall-box">
    <h2>Ceste greske</h2>
    <ul style="list-style: disc; padding-left: 20px; color: #e2e8f0;">
      <li style="margin-bottom: 10px;"><strong>Zamena brojioca i imenioca:</strong> Lako je pomesati
        \(\frac{b-a}{b+a}\) sa \(\frac{a+b}{a-b}\). Obrati paznju na redosled oduzimanja:
        posto je \(\operatorname{tg}^2\alpha = \frac{a}{b}\), u brojiocu formula daje \(1 - \frac{a}{b} = \frac{b-a}{b}\),
        dakle \(b - a\) je u brojiocu.</li>
      <li style="margin-bottom: 10px;"><strong>Dug put preko Vajerstrasove supstitucije:</strong> Ako krenete da koristite
        \(\sin x = \frac{2\operatorname{tg}(x/2)}{1 + \operatorname{tg}^2(x/2)}\), morate prvo iz datog uslova
        izraziti \(\operatorname{tg}(x/2)\) putem formule za tangens razlike, sto je znatno komplikovaniji put.
        Smena \(\alpha\) drasticno skracuje racun.</li>
      <li><strong>Zaboravljanje kvadriranja:</strong> Dato je \(\operatorname{tg}\alpha = \sqrt{\frac{a}{b}}\), pa je
        \(\operatorname{tg}^2\!\alpha = \frac{a}{b}\), a ne \(\frac{a}{b}\) pod korenom. Obavezno kvadriraj pre uvrstavanja!</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-box">
    <h2>Bonus izazov</h2>
    <p>Ako je \(\operatorname{tg}\!\left(\frac{\pi}{4} + \frac{x}{2}\right) = \sqrt{\frac{a}{b}}\), odredi \(\sin x\).</p>
    <details>
      <summary>Pogledaj nagovestaj</summary>
      <div class="details-content">
        <p>Primeni istu tehniku: neka \(\beta = \frac{\pi}{4} + \frac{x}{2}\). Tada je \(x = 2\beta - \frac{\pi}{2}\), pa:</p>
        <div class="math-box">
          \[
          \sin x = \sin\!\left(2\beta - \frac{\pi}{2}\right) = -\cos 2\beta = -\frac{1 - \operatorname{tg}^2\!\beta}{1 + \operatorname{tg}^2\!\beta}
          \]
        </div>
        <p>Uvrstivsi \(\operatorname{tg}^2\beta = \frac{a}{b}\), dobijamo:</p>
        <div class="math-box">
          \[
          \sin x = -\frac{b - a}{b + a} = \frac{a - b}{a + b}
          \]
        </div>
        <p>Primetite da se rezultat razlikuje samo po predznaku u odnosu na originalni zadatak!</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('diagram');
  const ctx = canvas.getContext('2d');

  let angleX = Math.PI / 4;
  let isDragging = false;

  function draw() {
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    canvas.width = rect.width * dpr;
    canvas.height = 500 * dpr;
    canvas.style.height = '500px';
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    const W = rect.width;
    const H = 500;

    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    const cx = W * 0.38;
    const cy = H * 0.5;
    const R = Math.min(W * 0.3, H * 0.38);

    // Grid
    ctx.strokeStyle = 'rgba(96,165,250,0.06)';
    ctx.lineWidth = 1;
    for (let i = -5; i <= 5; i++) {
      const gx = cx + i * R / 2.5;
      ctx.beginPath(); ctx.moveTo(gx, cy - R - 40); ctx.lineTo(gx, cy + R + 40); ctx.stroke();
      const gy = cy + i * R / 2.5;
      ctx.beginPath(); ctx.moveTo(cx - R - 40, gy); ctx.lineTo(cx + R + 40, gy); ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1.5;
    ctx.beginPath(); ctx.moveTo(cx - R - 30, cy); ctx.lineTo(cx + R + 30, cy); ctx.stroke();
    ctx.beginPath(); ctx.moveTo(cx, cy - R - 30); ctx.lineTo(cx, cy + R + 30); ctx.stroke();

    // Unit circle
    ctx.strokeStyle = 'rgba(96,165,250,0.3)';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.arc(cx, cy, R, 0, Math.PI * 2);
    ctx.stroke();

    // Angle x (full angle from positive x-axis)
    const px = cx + R * Math.cos(angleX);
    const py = cy - R * Math.sin(angleX);

    // Angle x/2
    const halfX = angleX / 2;
    const phx = cx + R * Math.cos(halfX);
    const phy = cy - R * Math.sin(halfX);

    // Angle alpha = pi/4 - x/2
    const alpha = Math.PI / 4 - halfX;

    // Draw angle x arc
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.arc(cx, cy, R * 0.22, 0, -angleX, true);
    ctx.stroke();

    // Label x
    const xlx = cx + R * 0.28 * Math.cos(angleX / 2);
    const xly = cy - R * 0.28 * Math.sin(angleX / 2);
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText('x', xlx, xly);

    // Draw angle x/2 arc
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.arc(cx, cy, R * 0.35, 0, -halfX, true);
    ctx.stroke();

    // Label x/2
    const hlx = cx + R * 0.42 * Math.cos(halfX / 2);
    const hly = cy - R * 0.42 * Math.sin(halfX / 2);
    ctx.fillStyle = '#a78bfa';
    ctx.font = '14px Segoe UI, system-ui, sans-serif';
    ctx.fillText('x/2', hlx, hly);

    // Draw pi/4 line (45 degree line)
    ctx.strokeStyle = 'rgba(52,211,153,0.3)';
    ctx.lineWidth = 1;
    ctx.setLineDash([5, 5]);
    const p45x = cx + R * 1.1 * Math.cos(Math.PI / 4);
    const p45y = cy - R * 1.1 * Math.sin(Math.PI / 4);
    ctx.beginPath(); ctx.moveTo(cx, cy); ctx.lineTo(p45x, p45y); ctx.stroke();
    ctx.setLineDash([]);

    // Label pi/4
    ctx.fillStyle = '#34d399';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.fillText('\u03C0/4', cx + R * 0.55 * Math.cos(Math.PI / 4) - 18, cy - R * 0.55 * Math.sin(Math.PI / 4));

    // Draw alpha arc (from x/2 to pi/4)
    if (Math.abs(alpha) > 0.01) {
      ctx.strokeStyle = '#34d399';
      ctx.lineWidth = 2.5;
      ctx.beginPath();
      if (alpha > 0) {
        ctx.arc(cx, cy, R * 0.5, -Math.PI / 4, -halfX, false);
      } else {
        ctx.arc(cx, cy, R * 0.5, -Math.PI / 4, -halfX, true);
      }
      ctx.stroke();

      // Label alpha
      const amid = (Math.PI / 4 + halfX) / 2;
      const alx = cx + R * 0.58 * Math.cos(amid);
      const aly = cy - R * 0.58 * Math.sin(amid);
      ctx.fillStyle = '#34d399';
      ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
      ctx.fillText('\u03B1', alx, aly);
    }

    // Draw radius to point on circle (angle x)
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.beginPath(); ctx.moveTo(cx, cy); ctx.lineTo(px, py); ctx.stroke();

    // Draw radius to point on circle (angle x/2)
    ctx.strokeStyle = 'rgba(167,139,250,0.5)';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([4, 4]);
    ctx.beginPath(); ctx.moveTo(cx, cy); ctx.lineTo(phx, phy); ctx.stroke();
    ctx.setLineDash([]);

    // sin x projection
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2;
    ctx.setLineDash([6, 3]);
    ctx.beginPath(); ctx.moveTo(px, py); ctx.lineTo(px, cy); ctx.stroke();
    ctx.setLineDash([]);

    // sin x label
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('sin x', px + 8, (py + cy) / 2);

    // Point on circle (angle x)
    ctx.fillStyle = '#60a5fa';
    ctx.beginPath();
    ctx.arc(px, py, 6, 0, Math.PI * 2);
    ctx.fill();

    ctx.shadowColor = '#60a5fa';
    ctx.shadowBlur = 12;
    ctx.beginPath();
    ctx.arc(px, py, 4, 0, Math.PI * 2);
    ctx.fill();
    ctx.shadowBlur = 0;

    // Point on x-axis projection
    ctx.fillStyle = '#f472b6';
    ctx.beginPath();
    ctx.arc(px, cy, 4, 0, Math.PI * 2);
    ctx.fill();

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    ctx.fillText('1', cx + R, cy + 8);
    ctx.fillText('-1', cx - R, cy + 8);
    ctx.textBaseline = 'middle';
    ctx.textAlign = 'left';
    ctx.fillText('1', cx + 8, cy - R);
    ctx.fillText('-1', cx + 8, cy + R);

    // Information panel on the right
    const infoX = W * 0.72;
    const infoY = 50;
    const infoW = W * 0.26;

    ctx.fillStyle = 'rgba(30,41,59,0.85)';
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    roundRect(ctx, infoX - 10, infoY - 10, infoW + 20, 280, 10);

    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.textBaseline = 'top';
    ctx.fillText('Vrednosti:', infoX, infoY);

    const xDeg = (angleX * 180 / Math.PI).toFixed(1);
    const halfXDeg = (halfX * 180 / Math.PI).toFixed(1);
    const alphaDeg = (alpha * 180 / Math.PI).toFixed(1);
    const sinVal = Math.sin(angleX).toFixed(4);

    // We pick a = 1, b chosen so that tg(alpha) = sqrt(a/b)
    const tgAlpha = Math.tan(Math.abs(alpha));
    const tgAlphaSq = tgAlpha * tgAlpha;
    // tg^2(alpha) = a/b, so if a = 1, b = 1/tg^2(alpha)
    const aVal = tgAlphaSq.toFixed(3);
    const bVal = '1';
    const formulaVal = ((1 - tgAlphaSq) / (1 + tgAlphaSq)).toFixed(4);

    const lines = [
      { label: 'x', value: xDeg + '\u00B0', color: '#60a5fa' },
      { label: 'x/2', value: halfXDeg + '\u00B0', color: '#a78bfa' },
      { label: '\u03B1 = \u03C0/4 \u2212 x/2', value: alphaDeg + '\u00B0', color: '#34d399' },
      { label: 'tg\u00B2(\u03B1)', value: tgAlphaSq.toFixed(4), color: '#e09468' },
      { label: 'sin x', value: sinVal, color: '#f472b6' },
      { label: '(1\u2212tg\u00B2\u03B1)/(1+tg\u00B2\u03B1)', value: formulaVal, color: '#4ade80' },
    ];

    lines.forEach((line, i) => {
      const ly = infoY + 30 + i * 38;
      ctx.fillStyle = '#94a3b8';
      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      ctx.fillText(line.label + ':', infoX, ly);
      ctx.fillStyle = line.color;
      ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
      ctx.fillText(line.value, infoX, ly + 16);
    });

    // Match indicator
    const match = Math.abs(parseFloat(sinVal) - parseFloat(formulaVal)) < 0.002;
    ctx.fillStyle = match ? '#4ade80' : '#ef4444';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.fillText(match ? 'Poklapaju se!' : 'Razliciti (granicni slucaj)', infoX, infoY + 268);

    // Slider
    const sliderY = H - 35;
    const sliderLeft = 60;
    const sliderRight = W * 0.62;
    const sliderW = sliderRight - sliderLeft;

    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 3;
    ctx.lineCap = 'round';
    ctx.beginPath();
    ctx.moveTo(sliderLeft, sliderY);
    ctx.lineTo(sliderRight, sliderY);
    ctx.stroke();

    // Slider active part
    const sliderPos = sliderLeft + (angleX / (Math.PI / 2)) * sliderW;
    ctx.strokeStyle = '#60a5fa';
    ctx.beginPath();
    ctx.moveTo(sliderLeft, sliderY);
    ctx.lineTo(sliderPos, sliderY);
    ctx.stroke();
    ctx.lineCap = 'butt';

    // Slider handle
    ctx.fillStyle = '#60a5fa';
    ctx.beginPath();
    ctx.arc(sliderPos, sliderY, 10, 0, Math.PI * 2);
    ctx.fill();
    ctx.fillStyle = '#0f172a';
    ctx.beginPath();
    ctx.arc(sliderPos, sliderY, 4, 0, Math.PI * 2);
    ctx.fill();

    // Slider labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('0\u00B0', sliderLeft, sliderY + 20);
    ctx.fillText('90\u00B0', sliderRight, sliderY + 20);
    ctx.fillText('Ugao x: ' + xDeg + '\u00B0', (sliderLeft + sliderRight) / 2, sliderY - 18);
  }

  function roundRect(ctx, x, y, w, h, r) {
    ctx.beginPath();
    ctx.moveTo(x + r, y);
    ctx.lineTo(x + w - r, y);
    ctx.quadraticCurveTo(x + w, y, x + w, y + r);
    ctx.lineTo(x + w, y + h - r);
    ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
    ctx.lineTo(x + r, y + h);
    ctx.quadraticCurveTo(x, y + h, x, y + h - r);
    ctx.lineTo(x, y + r);
    ctx.quadraticCurveTo(x, y, x + r, y);
    ctx.closePath();
    ctx.fill();
    ctx.stroke();
  }

  function getSliderBounds() {
    const rect = canvas.getBoundingClientRect();
    const dpr = window.devicePixelRatio || 1;
    const W = rect.width;
    const H = 500;
    const sliderY = H - 35;
    const sliderLeft = 60;
    const sliderRight = W * 0.62;
    return { sliderY, sliderLeft, sliderRight, rect };
  }

  function handlePointer(e) {
    const { sliderY, sliderLeft, sliderRight, rect } = getSliderBounds();
    let clientX, clientY;
    if (e.touches) {
      clientX = e.touches[0].clientX;
      clientY = e.touches[0].clientY;
    } else {
      clientX = e.clientX;
      clientY = e.clientY;
    }
    const x = clientX - rect.left;
    const y = clientY - rect.top;

    if (!isDragging) {
      const sliderW = sliderRight - sliderLeft;
      const sliderPos = sliderLeft + (angleX / (Math.PI / 2)) * sliderW;
      if (Math.abs(x - sliderPos) < 20 && Math.abs(y - sliderY) < 25) {
        isDragging = true;
      }
    }

    if (isDragging) {
      e.preventDefault();
      const ratio = Math.max(0.01, Math.min(0.99, (x - sliderLeft) / (sliderRight - sliderLeft)));
      angleX = ratio * Math.PI / 2;
      draw();
    }
  }

  canvas.addEventListener('mousedown', handlePointer);
  canvas.addEventListener('mousemove', (e) => { if (isDragging) handlePointer(e); });
  window.addEventListener('mouseup', () => { isDragging = false; });

  canvas.addEventListener('touchstart', handlePointer, { passive: false });
  canvas.addEventListener('touchmove', (e) => { if (isDragging) handlePointer(e); }, { passive: false });
  window.addEventListener('touchend', () => { isDragging = false; });

  draw();
  window.addEventListener('resize', draw);
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Tangens razlike uglova i vrednost sinusa",
  "subject": "math",
  "unit": "trigonometry",
  "topic_tags": ["trigonometrija", "tangens", "sinus", "dvostruki ugao", "komplementni uglovi", "Vajerstrasova supstitucija", "trigonometrijski identiteti"]
}
BRAINSPARK_META-->