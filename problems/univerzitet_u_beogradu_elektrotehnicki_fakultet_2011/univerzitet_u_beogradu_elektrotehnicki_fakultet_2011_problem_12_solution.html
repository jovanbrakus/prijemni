<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zbir beskonačne geometrijske progresije</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
Problem: Find the sum of the infinite geometric series:
  (√2+1)/(√2−1) + 1/(2−√2) + 1/2 + ...

Step 1: Find the first term a₁.
a₁ = (√2+1)/(√2−1)
Rationalize by multiplying by (√2+1)/(√2+1):
a₁ = (√2+1)²/((√2)²−1²) = (2 + 2√2 + 1)/(2−1) = 3 + 2√2

Step 2: Find the second term a₂.
a₂ = 1/(2−√2)
Rationalize by multiplying by (2+√2)/(2+√2):
a₂ = (2+√2)/(4−2) = (2+√2)/2

Step 3: Third term.
a₃ = 1/2

Step 4: Common ratio q.
q = a₂/a₁ = [(2+√2)/2] / (3+2√2)
  = (2+√2) / [2(3+2√2)]
Rationalize by multiplying by (3−2√2)/(3−2√2):
  = (2+√2)(3−2√2) / [2(9−8)]
  = (6 − 4√2 + 3√2 − 2·2) / 2
  = (6 − 4√2 + 3√2 − 4) / 2
  = (2 − √2) / 2

Verify: q = (2−√2)/2 ≈ (2−1.414)/2 ≈ 0.293
Check: a₁·q = (3+2√2)·(2−√2)/2
  = (6 − 3√2 + 4√2 − 2·2)/2
  = (6 + √2 − 4)/2
  = (2 + √2)/2 = a₂ ✓
Check: a₂·q = [(2+√2)/2]·[(2−√2)/2]
  = (4−2)/(4) = 2/4 = 1/2 = a₃ ✓

Step 5: Sum of infinite geometric series.
|q| = (2−√2)/2 ≈ 0.293 < 1, so the series converges.
S = a₁/(1−q) = (3+2√2) / (1 − (2−√2)/2)
  = (3+2√2) / ((2−2+√2)/2)
  = (3+2√2) / (√2/2)
  = 2(3+2√2)/√2
  = (6+4√2)/√2
  = (6+4√2)·√2/2
  = (6√2 + 4·2)/2
  = (6√2 + 8)/2
  = 3√2 + 4
  = 4 + 3√2

Answer: (D) 4 + 3√2 ✓
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  font-size: 1.5rem;
  margin-bottom: 16px;
  color: #60a5fa;
}

.card h3 {
  font-size: 1.2rem;
  margin-bottom: 10px;
  color: #a78bfa;
}

.problem-statement {
  border-left: 4px solid #a78bfa;
}

.problem-statement .problem-text {
  font-size: 1.15rem;
  line-height: 1.8;
  margin-bottom: 16px;
}

.given-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 10px;
  margin-top: 12px;
}

.answer-option {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 8px;
  padding: 10px 14px;
  text-align: center;
  font-size: 1.05rem;
  transition: all 0.2s;
}

.answer-option:hover {
  border-color: #60a5fa;
  background: #1a2744;
}

.answer-option.correct {
  border-color: #34d399;
  background: rgba(52, 211, 153, 0.1);
}

.plan-card {
  border-left: 4px solid #60a5fa;
}

details {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 16px;
  margin-top: 12px;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  font-size: 1.05rem;
  list-style: none;
  display: flex;
  align-items: center;
  gap: 8px;
}

details summary::before {
  content: '▶';
  font-size: 0.8rem;
  transition: transform 0.2s;
}

details[open] summary::before {
  transform: rotate(90deg);
}

details .content {
  margin-top: 14px;
  padding-top: 14px;
  border-top: 1px solid #334155;
}

.step {
  margin-bottom: 20px;
  padding: 16px;
  background: #0f172a;
  border-radius: 10px;
  border: 1px solid #334155;
}

.step-badge {
  display: inline-block;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  font-weight: 700;
  font-size: 0.85rem;
  padding: 3px 12px;
  border-radius: 20px;
  margin-bottom: 10px;
}

.step-title {
  font-weight: 700;
  font-size: 1.1rem;
  color: #e2e8f0;
  margin-bottom: 8px;
}

.step-math {
  margin: 12px 0;
  padding: 12px;
  background: #1e293b;
  border-radius: 8px;
  overflow-x: auto;
}

.checkpoint {
  background: rgba(96, 165, 250, 0.1);
  border: 1px solid rgba(96, 165, 250, 0.3);
  border-radius: 8px;
  padding: 12px 16px;
  margin: 12px 0;
  display: flex;
  align-items: flex-start;
  gap: 10px;
}

.checkpoint-icon {
  font-size: 1.2rem;
  flex-shrink: 0;
}

.key-insight {
  background: linear-gradient(135deg, rgba(167, 139, 250, 0.15), rgba(96, 165, 250, 0.15));
  border: 1px solid rgba(167, 139, 250, 0.3);
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 24px;
}

.key-insight h3 {
  color: #a78bfa;
  margin-bottom: 8px;
}

.final-answer {
  background: linear-gradient(135deg, rgba(52, 211, 153, 0.15), rgba(74, 222, 128, 0.15));
  border: 2px solid #34d399;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  text-align: center;
}

.final-answer h2 {
  color: #34d399;
  margin-bottom: 12px;
}

.final-answer .answer-value {
  font-size: 1.8rem;
  font-weight: 800;
  color: #4ade80;
  margin: 12px 0;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 10px;
  margin-top: 16px;
}

.final-option {
  padding: 8px 18px;
  border-radius: 8px;
  border: 1px solid #334155;
  background: #0f172a;
  color: #94a3b8;
  font-size: 1rem;
}

.final-option.correct-answer {
  border-color: #34d399;
  background: rgba(52, 211, 153, 0.15);
  color: #4ade80;
  font-weight: 700;
}

.pitfalls {
  border-left: 4px solid #f472b6;
}

.pitfalls h2 {
  color: #f472b6;
}

.pitfalls ul {
  list-style: none;
  padding: 0;
}

.pitfalls li {
  padding: 8px 0 8px 24px;
  position: relative;
  color: #e2e8f0;
}

.pitfalls li::before {
  content: '!';
  position: absolute;
  left: 0;
  color: #f472b6;
  font-weight: 700;
  font-size: 1.1rem;
}

.challenge {
  border-left: 4px solid #34d399;
}

.challenge h2 {
  color: #34d399;
}

.hint-btn {
  display: inline-block;
  margin-top: 10px;
  padding: 8px 20px;
  background: linear-gradient(135deg, #34d399, #60a5fa);
  color: #0f172a;
  border: none;
  border-radius: 8px;
  font-weight: 700;
  cursor: pointer;
  font-size: 0.95rem;
  transition: transform 0.15s, box-shadow 0.15s;
}

.hint-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(52, 211, 153, 0.3);
}

.hint-text {
  display: none;
  margin-top: 12px;
  padding: 12px;
  background: rgba(52, 211, 153, 0.1);
  border: 1px solid rgba(52, 211, 153, 0.3);
  border-radius: 8px;
}

canvas {
  display: block;
  margin: 16px auto;
  border-radius: 10px;
  max-width: 100%;
}

@media (max-width: 768px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .given-grid { grid-template-columns: 1fr 1fr; }
  .final-options { flex-direction: column; align-items: center; }
  canvas { max-width: 100%; height: auto; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Zbir beskonačne geometrijske progresije</h1>
  <p class="subtitle">Racionalizacija i formula za zbir beskonačnog geometrijskog reda</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Zadatak</h2>
    <p class="problem-text">
      Zbir beskonačne geometrijske progresije:
      \[
        \frac{\sqrt{2}+1}{\sqrt{2}-1} + \frac{1}{2-\sqrt{2}} + \frac{1}{2} + \cdots
      \]
      jednak je:
    </p>
    <div class="given-grid">
      <div class="answer-option" data-option="A">(A) \(2+\sqrt{2}\)</div>
      <div class="answer-option" data-option="B">(B) \(2-\sqrt{2}\)</div>
      <div class="answer-option" data-option="C">(C) \(1\)</div>
      <div class="answer-option" data-option="D">(D) \(4+3\sqrt{2}\)</div>
      <div class="answer-option" data-option="E">(E) \(4-3\sqrt{2}\)</div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan rešavanja</h2>
    <p>
      Potrebno je pronaći prvi član \(a_1\) i količnik \(q\) geometrijske progresije racionalizacijom iracionalnih razlomaka, a zatim primeniti formulu za zbir beskonačnog geometrijskog reda \(S = \dfrac{a_1}{1-q}\).
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <h2>Teorijska osnova</h2>
    <details>
      <summary>Ključne formule i pojmovi</summary>
      <div class="content">
        <p><strong>Beskonačna geometrijska progresija</strong> (red) sa prvim članom \(a_1\) i količnikom \(q\), gde je \(|q| < 1\):</p>
        \[ S = \frac{a_1}{1 - q} \]
        <p style="margin-top:12px;"><strong>Racionalizacija imenilaca:</strong></p>
        \[ \frac{1}{a - b} = \frac{a + b}{(a-b)(a+b)} = \frac{a+b}{a^2 - b^2} \]
        <p style="margin-top:12px;"><strong>Količnik geometrijske progresije:</strong></p>
        \[ q = \frac{a_{n+1}}{a_n} = \text{const.} \]
      </div>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <h2>Vizuelni prikaz</h2>
    <p style="color:#94a3b8; margin-bottom:12px;">Dijagram prikazuje članove geometrijske progresije i konvergenciju ka zbiru \(S = 4 + 3\sqrt{2}\).</p>
    <canvas id="seriesCanvas" width="750" height="400"></canvas>
  </div>

  <!-- Step-by-Step -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step">
      <span class="step-badge">Korak 1</span>
      <div class="step-title">Odredimo prvi član \(a_1\)</div>
      <p>Racionalizujemo razlomak množenjem brojilaca i imenioca sa \((\sqrt{2}+1)\):</p>
      <div class="step-math">
        \[
          a_1 = \frac{\sqrt{2}+1}{\sqrt{2}-1} = \frac{(\sqrt{2}+1)(\sqrt{2}+1)}{(\sqrt{2}-1)(\sqrt{2}+1)} = \frac{(\sqrt{2}+1)^2}{2 - 1}
        \]
      </div>
      <p>Razvijemo kvadrat binoma u brojiocu:</p>
      <div class="step-math">
        \[
          (\sqrt{2}+1)^2 = 2 + 2\sqrt{2} + 1 = 3 + 2\sqrt{2}
        \]
      </div>
      <p>Dakle:</p>
      <div class="step-math">
        \[
          \boxed{a_1 = 3 + 2\sqrt{2} \approx 5{,}828}
        \]
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step">
      <span class="step-badge">Korak 2</span>
      <div class="step-title">Odredimo drugi član \(a_2\)</div>
      <p>Racionalizujemo razlomak množenjem sa \(\dfrac{2+\sqrt{2}}{2+\sqrt{2}}\):</p>
      <div class="step-math">
        \[
          a_2 = \frac{1}{2-\sqrt{2}} = \frac{2+\sqrt{2}}{(2-\sqrt{2})(2+\sqrt{2})} = \frac{2+\sqrt{2}}{4-2} = \frac{2+\sqrt{2}}{2}
        \]
      </div>
      <p>Dakle:</p>
      <div class="step-math">
        \[
          \boxed{a_2 = \frac{2+\sqrt{2}}{2} \approx 1{,}707}
        \]
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step">
      <span class="step-badge">Korak 3</span>
      <div class="step-title">Treći član \(a_3\)</div>
      <p>Treći član je direktno zadat:</p>
      <div class="step-math">
        \[
          \boxed{a_3 = \frac{1}{2} = 0{,}5}
        \]
      </div>
    </div>

    <!-- Checkpoint -->
    <div class="checkpoint">
      <span class="checkpoint-icon">&#10003;</span>
      <div>
        <strong>Proveri se:</strong> Imamo tri člana: \(a_1 = 3+2\sqrt{2}\), \; \(a_2 = \frac{2+\sqrt{2}}{2}\), \; \(a_3 = \frac{1}{2}\). Da li je odnos uzastopnih članova konstantan?
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step">
      <span class="step-badge">Korak 4</span>
      <div class="step-title">Odredimo količnik \(q\)</div>
      <p>Računamo \(q = \dfrac{a_2}{a_1}\):</p>
      <div class="step-math">
        \[
          q = \frac{\;\dfrac{2+\sqrt{2}}{2}\;}{3+2\sqrt{2}} = \frac{2+\sqrt{2}}{2(3+2\sqrt{2})}
        \]
      </div>
      <p>Racionalizujemo množenjem brojilaca i imenioca sa \((3-2\sqrt{2})\):</p>
      <div class="step-math">
        \[
          q = \frac{(2+\sqrt{2})(3-2\sqrt{2})}{2\bigl(3+2\sqrt{2}\bigr)\bigl(3-2\sqrt{2}\bigr)} = \frac{(2+\sqrt{2})(3-2\sqrt{2})}{2(9-8)}
        \]
      </div>
      <p>Razlažemo brojioc:</p>
      <div class="step-math">
        \[
          (2+\sqrt{2})(3-2\sqrt{2}) = 6 - 4\sqrt{2} + 3\sqrt{2} - 2\cdot 2 = 6 - \sqrt{2} - 4 = 2 - \sqrt{2}
        \]
      </div>
      <p>Konačno:</p>
      <div class="step-math">
        \[
          \boxed{q = \frac{2-\sqrt{2}}{2} \approx 0{,}293}
        \]
      </div>
    </div>

    <!-- Verification -->
    <div class="step">
      <span class="step-badge">Verifikacija</span>
      <div class="step-title">Provera količnika</div>
      <p>Proverimo da li \(a_1 \cdot q = a_2\):</p>
      <div class="step-math">
        \[
          (3+2\sqrt{2}) \cdot \frac{2-\sqrt{2}}{2} = \frac{6-3\sqrt{2}+4\sqrt{2}-2\cdot 2}{2} = \frac{2+\sqrt{2}}{2} = a_2 \;\; \checkmark
        \]
      </div>
      <p>Proverimo da li \(a_2 \cdot q = a_3\):</p>
      <div class="step-math">
        \[
          \frac{2+\sqrt{2}}{2} \cdot \frac{2-\sqrt{2}}{2} = \frac{(2+\sqrt{2})(2-\sqrt{2})}{4} = \frac{4-2}{4} = \frac{1}{2} = a_3 \;\; \checkmark
        \]
      </div>
    </div>

    <!-- Checkpoint -->
    <div class="checkpoint">
      <span class="checkpoint-icon">&#10003;</span>
      <div>
        <strong>Proveri se:</strong> Količnik \(q = \frac{2-\sqrt{2}}{2} \approx 0{,}293\). Pošto je \(|q| < 1\), beskonačni red konvergira i možemo primeniti formulu za zbir.
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step">
      <span class="step-badge">Korak 5</span>
      <div class="step-title">Izračunamo zbir beskonačnog reda</div>
      <p>Primenjujemo formulu \(S = \dfrac{a_1}{1-q}\):</p>
      <div class="step-math">
        \[
          S = \frac{3 + 2\sqrt{2}}{1 - \dfrac{2-\sqrt{2}}{2}} = \frac{3+2\sqrt{2}}{\dfrac{2 - (2-\sqrt{2})}{2}} = \frac{3+2\sqrt{2}}{\;\dfrac{\sqrt{2}}{2}\;}
        \]
      </div>
      <p>Delimo razlomkom — množimo recipročnom vrednošću:</p>
      <div class="step-math">
        \[
          S = (3+2\sqrt{2}) \cdot \frac{2}{\sqrt{2}} = \frac{2(3+2\sqrt{2})}{\sqrt{2}} = \frac{6+4\sqrt{2}}{\sqrt{2}}
        \]
      </div>
      <p>Racionalizujemo imenioc:</p>
      <div class="step-math">
        \[
          S = \frac{(6+4\sqrt{2})\cdot\sqrt{2}}{(\sqrt{2})^2} = \frac{6\sqrt{2}+4\cdot 2}{2} = \frac{6\sqrt{2}+8}{2} = 3\sqrt{2}+4
        \]
      </div>
      <p>Dakle:</p>
      <div class="step-math">
        \[
          \boxed{S = 4 + 3\sqrt{2}}
        \]
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="key-insight">
    <h3>Ključni uvid</h3>
    <p>
      Ceo zadatak se svodi na pažljivu racionalizaciju iracionalnih razlomaka. Kada se svi članovi pravilno racionalizuju, dobijamo elegantan količnik \(q = \frac{2-\sqrt{2}}{2}\), a imenilac u formuli za zbir \(1-q\) se uprošćava u \(\frac{\sqrt{2}}{2}\), što daje konačan rezultat u kompaktnom obliku.
    </p>
  </div>

  <!-- Final Answer -->
  <div class="final-answer">
    <h2>Konačan odgovor</h2>
    <div class="answer-value">\(S = 4 + 3\sqrt{2}\)</div>
    <p style="color:#94a3b8;">Numerički: \(S \approx 4 + 3 \cdot 1{,}414 \approx 8{,}243\)</p>
    <div class="final-options">
      <div class="final-option" data-option="A">(A) \(2+\sqrt{2}\)</div>
      <div class="final-option" data-option="B">(B) \(2-\sqrt{2}\)</div>
      <div class="final-option" data-option="C">(C) \(1\)</div>
      <div class="final-option correct-answer" data-option="D">(D) \(4+3\sqrt{2}\) &#10004;</div>
      <div class="final-option" data-option="E">(E) \(4-3\sqrt{2}\)</div>
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfalls">
    <h2>Česte greške</h2>
    <ul>
      <li>
        <strong>Pogrešna racionalizacija prvog člana:</strong> Ako se pri racionalizaciji \(\frac{\sqrt{2}+1}{\sqrt{2}-1}\) pogrešno primeni formula za razliku kvadrata ili se zaboravi da je \((\sqrt{2})^2 - 1^2 = 1\), a ne \(2\), dolazi se do pogrešnog \(a_1\).
      </li>
      <li>
        <strong>Greška pri računanju \(1-q\):</strong> Mnogi studenti pogrešno izračunaju \(1 - \frac{2-\sqrt{2}}{2}\). Pravilno: \(\frac{2-(2-\sqrt{2})}{2} = \frac{\sqrt{2}}{2}\), a ne \(\frac{2-\sqrt{2}}{2}\) ili nešto drugo.
      </li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge">
    <h2>Dodatni izazov</h2>
    <p>
      Odredi zbir beskonačne geometrijske progresije čiji je prvi član \(a_1 = \dfrac{\sqrt{3}+1}{\sqrt{3}-1}\) a količnik \(q = \dfrac{3-\sqrt{3}}{6}\).
    </p>
    <button class="hint-btn" id="hintBtn">Prikaži nagoveštaj</button>
    <div class="hint-text" id="hintText">
      <p>
        Racionalizuj prvi član: \(a_1 = \frac{(\sqrt{3}+1)^2}{3-1} = \frac{4+2\sqrt{3}}{2} = 2+\sqrt{3}\).
        Zatim izračunaj \(1-q = 1 - \frac{3-\sqrt{3}}{6} = \frac{3+\sqrt{3}}{6}\).
        Konačno, \(S = \frac{a_1}{1-q} = \frac{(2+\sqrt{3})\cdot 6}{3+\sqrt{3}}\). Racionalizuj i pojednostavi!
      </p>
    </div>
  </div>

</div>

<script>
(() => {
  // Hint button
  const hintBtn = document.getElementById('hintBtn');
  const hintText = document.getElementById('hintText');
  if (hintBtn && hintText) {
    hintBtn.addEventListener('click', () => {
      const visible = hintText.style.display === 'block';
      hintText.style.display = visible ? 'none' : 'block';
      hintBtn.textContent = visible ? 'Prikaži nagoveštaj' : 'Sakrij nagoveštaj';
    });
  }

  // Canvas visualization
  const canvas = document.getElementById('seriesCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  const sqrt2 = Math.sqrt(2);
  const a1 = 3 + 2 * sqrt2;
  const q = (2 - sqrt2) / 2;
  const S = 4 + 3 * sqrt2;

  // Generate partial sums
  const N = 10;
  const terms = [];
  const partialSums = [];
  let currentTerm = a1;
  let currentSum = 0;
  for (let i = 0; i < N; i++) {
    terms.push(currentTerm);
    currentSum += currentTerm;
    partialSums.push(currentSum);
    currentTerm *= q;
  }

  // Margins
  const mLeft = 70;
  const mRight = 30;
  const mTop = 40;
  const mBot = 60;
  const plotW = W - mLeft - mRight;
  const plotH = H - mTop - mBot;

  // Scales
  const xMax = N + 0.5;
  const yMax = S * 1.15;
  const xScale = plotW / xMax;
  const yScale = plotH / yMax;

  function toX(n) { return mLeft + n * xScale; }
  function toY(val) { return H - mBot - val * yScale; }

  // Background
  ctx.fillStyle = '#0f172a';
  ctx.fillRect(0, 0, W, H);

  // Grid lines
  ctx.strokeStyle = '#1e293b';
  ctx.lineWidth = 1;
  for (let y = 0; y <= yMax; y += 2) {
    ctx.beginPath();
    ctx.moveTo(mLeft, toY(y));
    ctx.lineTo(W - mRight, toY(y));
    ctx.stroke();
  }

  // Axes
  ctx.strokeStyle = '#475569';
  ctx.lineWidth = 2;
  // X-axis
  ctx.beginPath();
  ctx.moveTo(mLeft, H - mBot);
  ctx.lineTo(W - mRight, H - mBot);
  ctx.stroke();
  // Y-axis
  ctx.beginPath();
  ctx.moveTo(mLeft, mTop);
  ctx.lineTo(mLeft, H - mBot);
  ctx.stroke();

  // Y-axis labels
  ctx.fillStyle = '#94a3b8';
  ctx.font = '12px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'right';
  ctx.textBaseline = 'middle';
  for (let y = 0; y <= yMax; y += 2) {
    ctx.fillText(y.toFixed(0), mLeft - 10, toY(y));
  }

  // X-axis labels
  ctx.textAlign = 'center';
  ctx.textBaseline = 'top';
  for (let i = 1; i <= N; i++) {
    ctx.fillText('n=' + i, toX(i), H - mBot + 8);
  }

  // Label for x-axis
  ctx.fillStyle = '#94a3b8';
  ctx.font = '13px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'center';
  ctx.fillText('Redni broj člana', W / 2, H - 10);

  // S = 4 + 3sqrt(2) line (asymptote)
  ctx.strokeStyle = '#34d399';
  ctx.lineWidth = 2;
  ctx.setLineDash([8, 4]);
  ctx.beginPath();
  ctx.moveTo(mLeft, toY(S));
  ctx.lineTo(W - mRight, toY(S));
  ctx.stroke();
  ctx.setLineDash([]);

  // Label for S
  ctx.fillStyle = '#34d399';
  ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'left';
  ctx.fillText('S = 4 + 3\u221A2 \u2248 ' + S.toFixed(3).replace('.', ','), mLeft + 8, toY(S) - 10);

  // Bar chart for individual terms
  const barWidth = xScale * 0.35;
  for (let i = 0; i < N; i++) {
    const x = toX(i + 1) - barWidth / 2 - barWidth * 0.3;
    const barH = terms[i] * yScale;
    const gradient = ctx.createLinearGradient(x, toY(terms[i]), x, H - mBot);
    gradient.addColorStop(0, '#a78bfa');
    gradient.addColorStop(1, '#6d28d9');
    ctx.fillStyle = gradient;
    ctx.beginPath();
    ctx.roundRect(x, toY(terms[i]), barWidth, barH, [4, 4, 0, 0]);
    ctx.fill();
  }

  // Partial sum line + dots
  ctx.strokeStyle = '#60a5fa';
  ctx.lineWidth = 2.5;
  ctx.beginPath();
  for (let i = 0; i < N; i++) {
    const x = toX(i + 1);
    const y = toY(partialSums[i]);
    if (i === 0) ctx.moveTo(x, y);
    else ctx.lineTo(x, y);
  }
  ctx.stroke();

  // Dots for partial sums
  for (let i = 0; i < N; i++) {
    const x = toX(i + 1);
    const y = toY(partialSums[i]);
    ctx.beginPath();
    ctx.arc(x, y, 5, 0, 2 * Math.PI);
    ctx.fillStyle = '#60a5fa';
    ctx.fill();
    ctx.strokeStyle = '#0f172a';
    ctx.lineWidth = 2;
    ctx.stroke();
  }

  // Legend
  const legX = W - mRight - 200;
  const legY = mTop + 10;
  ctx.fillStyle = 'rgba(30,41,59,0.9)';
  ctx.strokeStyle = '#334155';
  ctx.lineWidth = 1;
  ctx.beginPath();
  ctx.roundRect(legX, legY, 190, 80, 8);
  ctx.fill();
  ctx.stroke();

  // Legend items
  ctx.font = '12px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'left';
  ctx.textBaseline = 'middle';

  // Term bars
  ctx.fillStyle = '#a78bfa';
  ctx.fillRect(legX + 12, legY + 16, 16, 12);
  ctx.fillStyle = '#e2e8f0';
  ctx.fillText('Članovi aₙ', legX + 36, legY + 22);

  // Partial sum line
  ctx.strokeStyle = '#60a5fa';
  ctx.lineWidth = 2.5;
  ctx.beginPath();
  ctx.moveTo(legX + 12, legY + 42);
  ctx.lineTo(legX + 28, legY + 42);
  ctx.stroke();
  ctx.beginPath();
  ctx.arc(legX + 20, legY + 42, 3, 0, 2 * Math.PI);
  ctx.fillStyle = '#60a5fa';
  ctx.fill();
  ctx.fillStyle = '#e2e8f0';
  ctx.fillText('Parcijalni zbir Sₙ', legX + 36, legY + 42);

  // Sum line
  ctx.strokeStyle = '#34d399';
  ctx.lineWidth = 2;
  ctx.setLineDash([6, 3]);
  ctx.beginPath();
  ctx.moveTo(legX + 12, legY + 62);
  ctx.lineTo(legX + 28, legY + 62);
  ctx.stroke();
  ctx.setLineDash([]);
  ctx.fillStyle = '#e2e8f0';
  ctx.fillText('Zbir S = 4 + 3\u221A2', legX + 36, legY + 62);

})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Zbir beskonačne geometrijske progresije sa iracionalnim članovima",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["geometrijska progresija", "beskonačni red", "racionalizacija", "iracionalni brojevi", "zbir reda"]
}
BRAINSPARK_META-->