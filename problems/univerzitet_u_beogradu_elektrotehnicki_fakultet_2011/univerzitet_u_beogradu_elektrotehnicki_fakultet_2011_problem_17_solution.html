<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Maksimalni obim pravougaonika upisanog u krug</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
Problem: Maksimalni obim pravougaonika upisanog u krug poluprečnika r.

Pravougaonik je upisan u krug poluprečnika r. Dijagonala pravougaonika je prečnik kruga = 2r.

Neka su stranice pravougaonika a i b.
Po Pitagorinoj teoremi: a² + b² = (2r)² = 4r²

Obim pravougaonika: P = 2(a + b)

Treba maksimizovati P = 2(a + b) uz ograničenje a² + b² = 4r².

Koristimo nejednakost Koši-Švarca (ili AM-QM nejednakost):

(a + b)² ≤ 2(a² + b²) = 2 · 4r² = 8r²

Dakle: a + b ≤ 2√2 · r

Odatle: P = 2(a + b) ≤ 4√2 · r

Jednakost važi kada a = b, tj. kada je pravougaonik kvadrat.
Tada a = b, a² + a² = 4r², 2a² = 4r², a² = 2r², a = r√2.

Provera: P = 2(r√2 + r√2) = 2 · 2r√2 = 4r√2. Tačno!

Odgovor: (B) 4√2 r
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 14px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 120px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #60a5fa;
  font-size: 1.15rem;
  font-weight: 700;
}

.plan-card {
  border-left: 4px solid #a78bfa;
}

.plan-card h2 { color: #a78bfa; }

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 10px 14px;
  background: rgba(96,165,250,0.06);
  border-radius: 8px;
  border: 1px solid rgba(96,165,250,0.12);
  list-style: none;
  user-select: none;
}

details summary::-webkit-details-marker { display: none; }

details summary::before {
  content: '\25B8 ';
  display: inline;
}

details[open] summary::before {
  content: '\25BE ';
}

details .details-content {
  padding: 14px 18px;
  margin-top: 8px;
  background: rgba(96,165,250,0.04);
  border-radius: 8px;
  border: 1px solid rgba(96,165,250,0.08);
}

.step-container {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  align-items: flex-start;
  cursor: pointer;
  padding: 8px;
  border-left: 3px solid transparent;
  border-radius: 8px;
  transition: all 0.2s;
}

.step-container:hover {
  background: rgba(96,165,250,0.04);
  border-left-color: #4ade80;
}

.step-container.active {
  background: rgba(52,211,153,0.06);
  border-left-color: #4ade80;
}

.step-badge {
  min-width: 34px;
  height: 34px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: 0.95rem;
  color: #0f172a;
  margin-top: 2px;
  flex-shrink: 0;
}

.step-content {
  flex: 1;
  min-width: 0;
}

.step-content h3 {
  margin-bottom: 8px;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 14px;
  padding: 22px 26px;
  margin-bottom: 24px;
}

.insight-box h2 { color: #a78bfa; }

.final-answer-box {
  background: linear-gradient(135deg, rgba(52,211,153,0.1), rgba(74,222,128,0.08));
  border: 2px solid rgba(52,211,153,0.35);
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin-bottom: 24px;
}

.final-answer-box .answer-value {
  font-size: 2.4rem;
  font-weight: 800;
  color: #4ade80;
  margin: 16px 0;
}

.options-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin: 18px 0;
}

.option-chip {
  background: rgba(96,165,250,0.08);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 22px;
  font-size: 1.05rem;
  color: #94a3b8;
  transition: all 0.2s;
}

.option-chip.correct {
  background: rgba(52,211,153,0.15);
  border-color: #34d399;
  color: #4ade80;
  font-weight: 700;
  box-shadow: 0 0 20px rgba(52,211,153,0.15);
}

.pitfall-box {
  border-left: 4px solid #e09468;
}

.pitfall-box h2 { color: #e09468; }

.challenge-box {
  border-left: 4px solid #a78bfa;
}

.challenge-box h2 { color: #a78bfa; }

.canvas-wrapper {
  background: #0c1222;
  border-radius: 12px;
  border: 1px solid #334155;
  overflow: hidden;
  margin: 14px 0;
}

canvas {
  width: 100%;
  display: block;
  touch-action: none;
}

.provera-note {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 12px;
  padding: 12px 16px;
  background: rgba(52,211,153,0.05);
  border-radius: 8px;
  border: 1px solid rgba(52,211,153,0.12);
}

.formula-list {
  list-style: none;
  padding: 0;
}

.formula-list li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
}

.formula-list li:last-child { border-bottom: none; }

.slider-container {
  display: flex;
  align-items: center;
  gap: 14px;
  margin: 12px 0;
  padding: 10px 16px;
  background: rgba(96,165,250,0.06);
  border-radius: 10px;
  border: 1px solid rgba(96,165,250,0.12);
  flex-wrap: wrap;
}

.slider-container label {
  color: #94a3b8;
  font-size: 0.95rem;
  font-weight: 600;
  white-space: nowrap;
}

.slider-container input[type="range"] {
  flex: 1;
  min-width: 120px;
  accent-color: #60a5fa;
}

.slider-value {
  color: #60a5fa;
  font-weight: 700;
  font-size: 1.05rem;
  min-width: 60px;
  text-align: center;
}

.drag-hint {
  color: #64748b;
  font-size: 0.85rem;
  text-align: center;
  margin-top: 6px;
  font-style: italic;
}

.info-row {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  margin-top: 10px;
}

.info-box {
  background: rgba(96,165,250,0.06);
  border: 1px solid rgba(96,165,250,0.12);
  border-radius: 8px;
  padding: 8px 16px;
  font-size: 0.95rem;
}

.info-box .info-label {
  color: #94a3b8;
  font-size: 0.8rem;
}

.info-box .info-value {
  color: #60a5fa;
  font-weight: 700;
}

.info-box.max-highlight .info-value {
  color: #4ade80;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step-container { flex-direction: column; gap: 8px; }
  .given-grid { flex-direction: column; }
  .options-grid { flex-direction: column; align-items: center; }
  .final-answer-box .answer-value { font-size: 1.8rem; }
  .slider-container { flex-direction: column; align-items: stretch; }
  .info-row { flex-direction: column; }
}
</style>
</head>
<body>

<div class="container">

  <!-- Title -->
  <h1>Maksimalni obim pravougaonika upisanog u krug</h1>
  <p class="subtitle">Optimizacija obima pravougaonika upisanog u krug poluprečnika \(r\) pomoću nejednakosti</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Maksimalni obim pravougaonika upisanog u krug datog poluprečnika \(r\) iznosi:</p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(5\sqrt{2}\, r\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(4\sqrt{2}\, r\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(\sqrt{2}\, r\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(3\sqrt{2}\, r\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">Nijedan od ponuđenih</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan rešavanja</h2>
    <ol style="padding-left: 20px; color: #e2e8f0;">
      <li style="margin-bottom: 8px;">Izraziti vezu između stranica pravougaonika i poluprečnika kruga (Pitagorina teorema).</li>
      <li style="margin-bottom: 8px;">Postaviti funkciju obima \(P = 2(a+b)\) uz ograničenje \(a^2 + b^2 = 4r^2\).</li>
      <li style="margin-bottom: 8px;">Primeniti nejednakost Koši-Švarca da se nađe maksimum zbira \(a + b\).</li>
      <li>Proveriti rezultat: maksimum se dostiže kada je pravougaonik kvadrat.</li>
    </ol>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Podsetnik: Ključne formule i teoreme</summary>
      <div class="details-content">
        <ul class="formula-list">
          <li><strong>Pravougaonik upisan u krug:</strong> Dijagonala pravougaonika upisanog u krug jednaka je prečniku kruga, tj. \(d = 2r\).</li>
          <li><strong>Pitagorina teorema:</strong> Za pravougaonik sa stranicama \(a\) i \(b\) i dijagonalom \(d\): \(a^2 + b^2 = d^2\).</li>
          <li><strong>Nejednakost Koši-Švarca:</strong> Za \(a, b \geq 0\):
            \[(a + b)^2 \leq 2(a^2 + b^2)\]
            sa jednakošću kada je \(a = b\).</li>
          <li><strong>Alternativno (AM-QM):</strong> Aritmetička sredina ne prelazi kvadratnu sredinu:
            \[\frac{a+b}{2} \leq \sqrt{\frac{a^2+b^2}{2}}\]</li>
          <li><strong>Obim pravougaonika:</strong> \(P = 2(a + b)\).</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- Visual Aid / Interactive Diagram -->
  <div class="card">
    <h2>Vizuelni prikaz</h2>
    <p style="color: #94a3b8; margin-bottom: 8px;">Pomerajte klizač da menjate ugao \(\theta\) pravougaonika upisanog u krug. Pratite kako se menja obim.</p>
    <div class="canvas-wrapper">
      <canvas id="diagram" width="900" height="520"></canvas>
    </div>
    <div class="slider-container">
      <label for="angle-slider">Ugao \(\theta\):</label>
      <input type="range" id="angle-slider" min="5" max="85" value="45" step="0.5">
      <span class="slider-value" id="slider-display">45,0°</span>
    </div>
    <div class="info-row">
      <div class="info-box">
        <div class="info-label">Stranica a</div>
        <div class="info-value" id="info-a">1,414r</div>
      </div>
      <div class="info-box">
        <div class="info-label">Stranica b</div>
        <div class="info-value" id="info-b">1,414r</div>
      </div>
      <div class="info-box" id="perimeter-box">
        <div class="info-label">Obim P</div>
        <div class="info-value" id="info-p">5,657r</div>
      </div>
      <div class="info-box max-highlight">
        <div class="info-label">Maksimalni obim</div>
        <div class="info-value">4&radic;2 r &asymp; 5,657r</div>
      </div>
    </div>
    <p class="drag-hint">Pomerajte klizač da istražite kako se obim menja sa oblikom pravougaonika</p>
  </div>

  <!-- Step-by-step Solution -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Veza između stranica i poluprečnika</h3>
        <p>Pravougaonik je upisan u krug poluprečnika \(r\). To znači da su sva četiri temena pravougaonika na kružnici. Dijagonala pravougaonika je prečnik kruga (po Talesovoj teoremi, ugao nad prečnikom je prav ugao):</p>
        <div class="math-box">
          \[
          d = 2r
          \]
        </div>
        <p>Neka su stranice pravougaonika \(a\) i \(b\). Po Pitagorinoj teoremi:</p>
        <div class="math-box">
          \[
          a^2 + b^2 = d^2 = (2r)^2 = 4r^2
          \]
        </div>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Postavljanje funkcije obima</h3>
        <p>Obim pravougaonika je:</p>
        <div class="math-box">
          \[
          P = 2(a + b)
          \]
        </div>
        <p>Cilj je <span class="highlight">maksimizovati</span> \(P = 2(a + b)\) uz ograničenje \(a^2 + b^2 = 4r^2\), gde su \(a, b > 0\).</p>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details>
      <summary>Proveri se: Zašto je dijagonala jednaka prečniku?</summary>
      <div class="details-content">
        <p>Pravougaonik upisan u krug znači da sva četiri temena leže na kružnici. Dijagonale pravougaonika su jednake i dele se na polovine u centru. Pošto obe dijagonale prolaze kroz centar kruga, svaka dijagonala je prečnik: \(d = 2r\).</p>
        <p>Alternativno: po Talesovoj teoremi, ako stranica trougla leži na prečniku i naleglo teme je na kružnici, ugao je \(90°\). Svaka dijagonala pravougaonika deli ga na dva pravougla trougla sa hipotenuzom na prečniku.</p>
      </div>
    </details>

    <!-- Step 3 -->
    <div class="step-container">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Primena nejednakosti Koši-Švarca</h3>
        <p>Koristimo nejednakost Koši-Švarca za vektore \((a, b)\) i \((1, 1)\):</p>
        <div class="math-box">
          \[
          (a \cdot 1 + b \cdot 1)^2 \leq (a^2 + b^2)(1^2 + 1^2)
          \]
        </div>
        <p>Uvrštavamo \(a^2 + b^2 = 4r^2\):</p>
        <div class="math-box">
          \[
          (a + b)^2 \leq 4r^2 \cdot 2 = 8r^2
          \]
        </div>
        <p>Korenujemo obe strane (obe su nenegativne):</p>
        <div class="math-box">
          \[
          a + b \leq 2\sqrt{2}\, r
          \]
        </div>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step-container">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Nalaženje maksimalnog obima</h3>
        <p>Množimo obe strane nejednakosti sa 2:</p>
        <div class="math-box">
          \[
          P = 2(a + b) \leq 2 \cdot 2\sqrt{2}\, r = 4\sqrt{2}\, r
          \]
        </div>
        <p>Dakle, obim pravougaonika upisanog u krug poluprečnika \(r\) ne može preći \(4\sqrt{2}\, r\).</p>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details>
      <summary>Proveri se: Kada važi jednakost u Koši-Švarcu?</summary>
      <div class="details-content">
        <p>U nejednakosti Koši-Švarca jednakost važi kada su vektori proporcionalni, tj. kada:</p>
        <div class="math-box">
          \[\frac{a}{1} = \frac{b}{1} \implies a = b\]
        </div>
        <p>To znači da se maksimum dostiže kada je \(a = b\), odnosno kada je pravougaonik <strong>kvadrat</strong>!</p>
      </div>
    </details>

    <!-- Step 5 -->
    <div class="step-container">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Provera: da li se maksimum zaista dostiže?</h3>
        <p>Jednakost važi za \(a = b\). Izračunajmo stranice kvadrata upisanog u krug:</p>
        <div class="math-box">
          \[
          a = b, \quad a^2 + a^2 = 4r^2 \implies 2a^2 = 4r^2 \implies a^2 = 2r^2 \implies a = r\sqrt{2}
          \]
        </div>
        <p>Obim tog kvadrata:</p>
        <div class="math-box">
          \[
          P_{\max} = 2(a + b) = 2(r\sqrt{2} + r\sqrt{2}) = 2 \cdot 2r\sqrt{2} = 4\sqrt{2}\, r
          \]
        </div>
        <p>Maksimum se zaista dostiže, i iznosi upravo \(4\sqrt{2}\, r\).</p>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step-container">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Alternativni pristup: parametarski (trigonometrijski)</h3>
        <p>Ako uvedemo parametar \(\theta \in (0°, 90°)\) tako da:</p>
        <div class="math-box">
          \[
          a = 2r \cos\theta, \quad b = 2r \sin\theta
          \]
        </div>
        <p>tada je \(a^2 + b^2 = 4r^2(\cos^2\theta + \sin^2\theta) = 4r^2\) automatski zadovoljeno. Obim:</p>
        <div class="math-box">
          \[
          P(\theta) = 2(2r\cos\theta + 2r\sin\theta) = 4r(\cos\theta + \sin\theta)
          \]
        </div>
        <p>Maksimum od \(\cos\theta + \sin\theta = \sqrt{2}\sin\!\left(\theta + 45°\right)\) je \(\sqrt{2}\), za \(\theta = 45°\).</p>
        <div class="math-box">
          \[
          P_{\max} = 4r \cdot \sqrt{2} = 4\sqrt{2}\, r \quad \checkmark
          \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details>
      <summary>Proveri se: Numerička vrednost za \(r = 1\)</summary>
      <div class="details-content">
        <p>Za \(r = 1\): \(\sqrt{2} \approx 1{,}414\), pa je \(4\sqrt{2} \approx 5{,}657\).</p>
        <p>Provera: Kvadrat upisani u jedinični krug ima stranu \(a = \sqrt{2} \approx 1{,}414\). Obim: \(4 \cdot 1{,}414 = 5{,}657\). Tačno!</p>
        <p>Za poređenje, za pravougaonik sa \(a = 1{,}8\) i \(b = \sqrt{4 - 3{,}24} = \sqrt{0{,}76} \approx 0{,}872\): \(P = 2(1{,}8 + 0{,}872) = 5{,}344 < 5{,}657\).</p>
      </div>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Ključni uvid</h2>
    <p>Od svih pravougaonika upisanih u dati krug, <strong>kvadrat</strong> ima najveći obim. Ovo je posledica fundamentalne matematičke činjenice: pri fiksnoj sumi kvadrata, zbir dva nenegativna broja je najveći kada su ti brojevi jednaki. Geometrijski, to znači da je najsimetričniji pravougaonik (kvadrat) ujedno i optimalan po obimu.</p>
    <div class="math-box" style="text-align: center; font-size: 1.15rem;">
      \[
      a^2 + b^2 = \text{const} \implies a + b \text{ je maksimalno za } a = b
      \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <h2 style="color: #34d399; margin-bottom: 10px;">Konačan odgovor</h2>
    <div class="options-grid">
      <div class="option-chip">(A) \(5\sqrt{2}\, r\)</div>
      <div class="option-chip correct">(B) \(4\sqrt{2}\, r\)</div>
      <div class="option-chip">(C) \(\sqrt{2}\, r\)</div>
      <div class="option-chip">(D) \(3\sqrt{2}\, r\)</div>
      <div class="option-chip">(E) Nijedan</div>
    </div>
    <div class="answer-value">Odgovor je (B) \(4\sqrt{2}\, r\)</div>
    <p style="color: #94a3b8; margin-top: 8px;">Maksimalni obim pravougaonika upisanog u krug poluprečnika \(r\) iznosi \(4\sqrt{2}\, r \approx 5{,}657\, r\), a dostiže se kada je pravougaonik kvadrat sa stranicom \(a = r\sqrt{2}\).</p>
    <div class="provera-note">
      <strong>Provera:</strong> Kvadrat upisani u krug: stranica \(a = r\sqrt{2}\), dijagonala \(d = a\sqrt{2} = r\sqrt{2} \cdot \sqrt{2} = 2r\) (prečnik kruga). Obim: \(P = 4a = 4r\sqrt{2}\). Sve se poklapa.
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfall-box">
    <h2>Česte greške</h2>
    <ul style="list-style: disc; padding-left: 20px; color: #e2e8f0;">
      <li style="margin-bottom: 10px;"><strong>Zamena poluprečnika i prečnika:</strong>
        Najčešća greška je koristiti \(r\) umesto \(2r\) za dijagonalu. Dijagonala = prečnik = \(2r\), ne \(r\)!
        Sa pogrešnim \(a^2 + b^2 = r^2\) dobija se \(P_{\max} = 2\sqrt{2}\,r\), što nije među ponuđenim odgovorima.</li>
      <li style="margin-bottom: 10px;"><strong>Maksimizovanje površine umesto obima:</strong>
        Maksimalna površina pravougaonika upisanog u krug je \(2r^2\) (takođe za kvadrat), ali to nije ono što se traži u zadatku.</li>
      <li><strong>Zaboraviti faktor 2 u obimu:</strong>
        Obim je \(P = 2(a+b)\), ne \(a + b\). Ako se zaboravi faktor 2, dobija se \(2\sqrt{2}\,r\) umesto \(4\sqrt{2}\,r\).</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-box">
    <h2>Bonus izazov</h2>
    <p>Kolika je <em>maksimalna površina</em> pravougaonika upisanog u krug poluprečnika \(r\)? Da li se i površina maksimizuje za isti oblik?</p>
    <details>
      <summary>Pogledaj rešenje</summary>
      <div class="details-content">
        <p>Površina pravougaonika je \(S = a \cdot b\). Uz ograničenje \(a^2 + b^2 = 4r^2\), koristimo AM-GM nejednakost:</p>
        <div class="math-box">
          \[
          a^2 + b^2 \geq 2ab \implies 4r^2 \geq 2ab \implies ab \leq 2r^2
          \]
        </div>
        <p>Maksimalna površina je \(S_{\max} = 2r^2\), i dostiže se za \(a = b = r\sqrt{2}\) — ponovo za <strong>kvadrat</strong>!</p>
        <p>Dakle, i obim i površina pravougaonika upisanog u krug su maksimalni kada je taj pravougaonik kvadrat.</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('diagram');
  const ctx = canvas.getContext('2d');
  const slider = document.getElementById('angle-slider');
  const sliderDisplay = document.getElementById('slider-display');
  const infoA = document.getElementById('info-a');
  const infoB = document.getElementById('info-b');
  const infoP = document.getElementById('info-p');
  const perimeterBox = document.getElementById('perimeter-box');

  const maxPerimeter = 4 * Math.sqrt(2); // for r=1

  function formatNum(x) {
    return x.toFixed(3).replace('.', ',');
  }

  function draw() {
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    const W = rect.width;
    const H = 520;
    canvas.width = W * dpr;
    canvas.height = H * dpr;
    canvas.style.height = H + 'px';
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);

    // Clear
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    const theta = parseFloat(slider.value) * Math.PI / 180;
    const r = 1; // unit circle, we scale for drawing

    // Sides
    const a = 2 * r * Math.cos(theta);
    const b = 2 * r * Math.sin(theta);
    const P = 2 * (a + b);
    const ratio = P / maxPerimeter;

    // Update displays
    sliderDisplay.textContent = parseFloat(slider.value).toFixed(1).replace('.', ',') + '\u00B0';
    infoA.textContent = formatNum(a) + 'r';
    infoB.textContent = formatNum(b) + 'r';
    infoP.textContent = formatNum(P) + 'r';

    // Highlight perimeter box when near max
    if (ratio > 0.999) {
      perimeterBox.classList.add('max-highlight');
    } else {
      perimeterBox.classList.remove('max-highlight');
    }

    // ========== LEFT SIDE: Circle + Rectangle Diagram ==========
    const diagramCX = Math.min(W * 0.35, 260);
    const diagramCY = 240;
    const R = Math.min(W * 0.25, 180); // drawing radius

    // Draw circle
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.arc(diagramCX, diagramCY, R, 0, 2 * Math.PI);
    ctx.stroke();

    // Subtle fill for circle
    ctx.fillStyle = 'rgba(96,165,250,0.03)';
    ctx.beginPath();
    ctx.arc(diagramCX, diagramCY, R, 0, 2 * Math.PI);
    ctx.fill();

    // Draw axes (light)
    ctx.strokeStyle = 'rgba(51,65,85,0.5)';
    ctx.lineWidth = 1;
    ctx.setLineDash([4, 4]);
    ctx.beginPath();
    ctx.moveTo(diagramCX - R - 20, diagramCY);
    ctx.lineTo(diagramCX + R + 20, diagramCY);
    ctx.moveTo(diagramCX, diagramCY - R - 20);
    ctx.lineTo(diagramCX, diagramCY + R + 20);
    ctx.stroke();
    ctx.setLineDash([]);

    // Rectangle vertices (Y-up: canvas Y is flipped)
    // Using the parametrization: half-sides are R*cos(theta), R*sin(theta)
    const hw = R * Math.cos(theta); // half-width in canvas coords
    const hh = R * Math.sin(theta); // half-height in canvas coords

    const rectPts = [
      { x: diagramCX + hw, y: diagramCY - hh }, // top-right (A)
      { x: diagramCX - hw, y: diagramCY - hh }, // top-left (B)
      { x: diagramCX - hw, y: diagramCY + hh }, // bottom-left (C)
      { x: diagramCX + hw, y: diagramCY + hh }, // bottom-right (D)
    ];

    // Fill rectangle
    ctx.fillStyle = 'rgba(96,165,250,0.08)';
    ctx.beginPath();
    ctx.moveTo(rectPts[0].x, rectPts[0].y);
    for (let i = 1; i < 4; i++) ctx.lineTo(rectPts[i].x, rectPts[i].y);
    ctx.closePath();
    ctx.fill();

    // Draw rectangle
    const isSquare = Math.abs(a - b) < 0.02;
    ctx.strokeStyle = isSquare ? '#4ade80' : '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(rectPts[0].x, rectPts[0].y);
    for (let i = 1; i < 4; i++) ctx.lineTo(rectPts[i].x, rectPts[i].y);
    ctx.closePath();
    ctx.stroke();

    // Glow effect when square
    if (isSquare) {
      ctx.shadowColor = '#4ade80';
      ctx.shadowBlur = 15;
      ctx.strokeStyle = '#4ade80';
      ctx.lineWidth = 2.5;
      ctx.beginPath();
      ctx.moveTo(rectPts[0].x, rectPts[0].y);
      for (let i = 1; i < 4; i++) ctx.lineTo(rectPts[i].x, rectPts[i].y);
      ctx.closePath();
      ctx.stroke();
      ctx.shadowBlur = 0;
    }

    // Draw diagonal
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.moveTo(rectPts[1].x, rectPts[1].y);
    ctx.lineTo(rectPts[3].x, rectPts[3].y);
    ctx.stroke();
    ctx.setLineDash([]);

    // Draw radius to corner
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(diagramCX, diagramCY);
    ctx.lineTo(rectPts[0].x, rectPts[0].y);
    ctx.stroke();

    // Center dot
    ctx.fillStyle = '#a78bfa';
    ctx.beginPath();
    ctx.arc(diagramCX, diagramCY, 4, 0, 2 * Math.PI);
    ctx.fill();

    // Vertex dots
    rectPts.forEach(function(pt) {
      ctx.fillStyle = isSquare ? '#4ade80' : '#60a5fa';
      ctx.beginPath();
      ctx.arc(pt.x, pt.y, 4, 0, 2 * Math.PI);
      ctx.fill();
    });

    // Labels
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';

    // Label 'a' on top side
    ctx.fillStyle = '#60a5fa';
    ctx.fillText('a', diagramCX, rectPts[0].y - 10);

    // Label 'b' on right side
    ctx.fillText('b', rectPts[0].x + 16, diagramCY);

    // Label 'r' on radius
    ctx.fillStyle = '#a78bfa';
    const midRX = (diagramCX + rectPts[0].x) / 2;
    const midRY = (diagramCY + rectPts[0].y) / 2;
    ctx.fillText('r', midRX + 10, midRY - 6);

    // Label '2r' on diagonal
    ctx.fillStyle = '#f472b6';
    const midDX = (rectPts[1].x + rectPts[3].x) / 2;
    const midDY = (rectPts[1].y + rectPts[3].y) / 2;
    ctx.fillText('2r', midDX - 16, midDY + 4);

    // Angle theta arc
    ctx.strokeStyle = '#94a3b8';
    ctx.lineWidth = 1;
    const arcR = 30;
    ctx.beginPath();
    ctx.arc(diagramCX, diagramCY, arcR, -theta, 0);
    ctx.stroke();
    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.fillText('\u03B8', diagramCX + arcR + 8, diagramCY - 6);

    // Title over diagram
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Pravougaonik upisan u krug', diagramCX, 28);

    // Square badge
    if (isSquare) {
      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
      ctx.fillText('KVADRAT (a = b)', diagramCX, diagramCY + R + 40);
      ctx.fillText('Maksimalni obim!', diagramCX, diagramCY + R + 58);
    }

    // ========== RIGHT SIDE: Perimeter Graph ==========
    const graphLeft = Math.min(W * 0.55, W - 340);
    const graphRight = W - 40;
    const graphTop = 60;
    const graphBottom = 400;
    const graphW = graphRight - graphLeft;
    const graphH = graphBottom - graphTop;

    // Graph title
    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Obim P(\u03B8) = 4r(cos\u03B8 + sin\u03B8)', (graphLeft + graphRight) / 2, 28);

    // Graph background
    ctx.fillStyle = 'rgba(30,41,59,0.4)';
    ctx.beginPath();
    ctx.roundRect(graphLeft - 10, graphTop - 10, graphW + 20, graphH + 30, 10);
    ctx.fill();
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.roundRect(graphLeft - 10, graphTop - 10, graphW + 20, graphH + 30, 10);
    ctx.stroke();

    // Graph axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(graphLeft, graphBottom);
    ctx.lineTo(graphRight, graphBottom);
    ctx.moveTo(graphLeft, graphBottom);
    ctx.lineTo(graphLeft, graphTop);
    ctx.stroke();

    // X-axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    for (let deg = 0; deg <= 90; deg += 15) {
      const x = graphLeft + (deg / 90) * graphW;
      ctx.fillText(deg + '\u00B0', x, graphBottom + 16);

      // Grid line
      if (deg > 0 && deg < 90) {
        ctx.strokeStyle = 'rgba(51,65,85,0.3)';
        ctx.lineWidth = 1;
        ctx.setLineDash([3, 3]);
        ctx.beginPath();
        ctx.moveTo(x, graphBottom);
        ctx.lineTo(x, graphTop);
        ctx.stroke();
        ctx.setLineDash([]);
      }
    }

    // Y-axis: perimeter ranges from 0 to ~6 (for r=1, max = 4*sqrt(2) ~ 5.66)
    const yMax = 6;
    ctx.textAlign = 'right';
    for (let yv = 0; yv <= 6; yv += 1) {
      const y = graphBottom - (yv / yMax) * graphH;
      ctx.fillStyle = '#94a3b8';
      ctx.font = '11px Segoe UI, system-ui, sans-serif';
      ctx.fillText(yv + 'r', graphLeft - 6, y + 4);

      if (yv > 0) {
        ctx.strokeStyle = 'rgba(51,65,85,0.3)';
        ctx.lineWidth = 1;
        ctx.setLineDash([3, 3]);
        ctx.beginPath();
        ctx.moveTo(graphLeft, y);
        ctx.lineTo(graphRight, y);
        ctx.stroke();
        ctx.setLineDash([]);
      }
    }

    // Max line
    const maxY = graphBottom - (maxPerimeter / yMax) * graphH;
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.moveTo(graphLeft, maxY);
    ctx.lineTo(graphRight, maxY);
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('4\u221A2 r \u2248 5,657r', graphRight - 100, maxY - 6);

    // Plot the curve
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    for (let deg = 1; deg <= 89; deg += 0.5) {
      const t = deg * Math.PI / 180;
      const pVal = 4 * (Math.cos(t) + Math.sin(t));
      const x = graphLeft + (deg / 90) * graphW;
      const y = graphBottom - (pVal / yMax) * graphH;
      if (deg === 1) ctx.moveTo(x, y);
      else ctx.lineTo(x, y);
    }
    ctx.stroke();

    // Current point
    const currentDeg = parseFloat(slider.value);
    const currentX = graphLeft + (currentDeg / 90) * graphW;
    const currentPVal = 4 * (Math.cos(currentDeg * Math.PI / 180) + Math.sin(currentDeg * Math.PI / 180));
    const currentY = graphBottom - (currentPVal / yMax) * graphH;

    // Vertical guide line
    ctx.strokeStyle = 'rgba(244,114,182,0.4)';
    ctx.lineWidth = 1;
    ctx.setLineDash([4, 4]);
    ctx.beginPath();
    ctx.moveTo(currentX, graphBottom);
    ctx.lineTo(currentX, currentY);
    ctx.stroke();
    ctx.setLineDash([]);

    // Horizontal guide line
    ctx.strokeStyle = 'rgba(244,114,182,0.4)';
    ctx.setLineDash([4, 4]);
    ctx.beginPath();
    ctx.moveTo(graphLeft, currentY);
    ctx.lineTo(currentX, currentY);
    ctx.stroke();
    ctx.setLineDash([]);

    // Point dot with glow
    ctx.shadowColor = isSquare ? '#4ade80' : '#f472b6';
    ctx.shadowBlur = isSquare ? 15 : 10;
    ctx.fillStyle = isSquare ? '#4ade80' : '#f472b6';
    ctx.beginPath();
    ctx.arc(currentX, currentY, 6, 0, 2 * Math.PI);
    ctx.fill();
    ctx.shadowBlur = 0;

    // Point label
    ctx.fillStyle = isSquare ? '#4ade80' : '#f472b6';
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('P = ' + formatNum(currentPVal) + 'r', currentX + 10, currentY - 10);

    // 45 degree mark
    const deg45X = graphLeft + (45 / 90) * graphW;
    ctx.strokeStyle = 'rgba(74,222,128,0.3)';
    ctx.lineWidth = 1;
    ctx.setLineDash([3, 3]);
    ctx.beginPath();
    ctx.moveTo(deg45X, graphBottom);
    ctx.lineTo(deg45X, maxY);
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = '#4ade80';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('45\u00B0', deg45X, graphBottom + 16);

    // Percentage bar at bottom
    const barY = H - 50;
    const barX = 40;
    const barW = W - 80;
    const barH = 20;

    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Iskorišćenost maksimalnog obima:', barX, barY - 8);

    // Bar background
    ctx.fillStyle = 'rgba(51,65,85,0.5)';
    ctx.beginPath();
    ctx.roundRect(barX, barY, barW, barH, 6);
    ctx.fill();

    // Bar fill
    const fillW = ratio * barW;
    const barGrad = ctx.createLinearGradient(barX, 0, barX + fillW, 0);
    if (ratio > 0.99) {
      barGrad.addColorStop(0, '#34d399');
      barGrad.addColorStop(1, '#4ade80');
    } else {
      barGrad.addColorStop(0, '#60a5fa');
      barGrad.addColorStop(1, '#a78bfa');
    }
    ctx.fillStyle = barGrad;
    ctx.beginPath();
    ctx.roundRect(barX, barY, Math.max(fillW, 8), barH, 6);
    ctx.fill();

    // Percentage text
    const pct = (ratio * 100).toFixed(1).replace('.', ',');
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText(pct + '%', barX + barW, barY + barH + 16);

    // Legend at bottom-left
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillStyle = barX + fillW > barX + 80 ? '#0f172a' : '#e2e8f0';
  }

  slider.addEventListener('input', function() {
    draw();
  });

  // Step click highlighting
  document.querySelectorAll('.step-container').forEach(function(step) {
    step.addEventListener('click', function() {
      document.querySelectorAll('.step-container').forEach(function(s) {
        s.classList.remove('active');
      });
      step.classList.toggle('active');
    });
  });

  draw();
  window.addEventListener('resize', draw);
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Maksimalni obim pravougaonika upisanog u krug",
  "subject": "math",
  "unit": "geometry",
  "topic_tags": ["optimizacija", "nejednakost Koši-Švarca", "pravougaonik upisan u krug", "obim", "trigonometrija", "Pitagorina teorema"]
}
BRAINSPARK_META-->