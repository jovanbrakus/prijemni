<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zapremina prave četvorostrane piramide sa pravougaonom osnovom</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
Problem: A right quadrilateral pyramid has a rectangular base with diagonal d and angle α
between diagonals. Lateral edges make angle β with the base. Find the volume.

Step 1: Find the sides of the rectangle.
  The diagonals of a rectangle are equal, both = d. They bisect each other.
  The angle between diagonals is α.
  Half-diagonal = d/2.

  Consider the triangle formed by two half-diagonals and one side of the rectangle.
  The two half-diagonals have length d/2 each, and the angle between them is α.
  Using the law of cosines or simply recognizing the isosceles triangle:

  Side a = 2 · (d/2) · sin(α/2) = d · sin(α/2)
  Side b = 2 · (d/2) · cos(α/2) = d · cos(α/2)

  Actually, let's be more careful. The diagonals meet at angle α. The four triangles
  formed have angles α, π-α, α, π-α. Consider two adjacent triangles:

  In one triangle: sides d/2, d/2, angle α between them.
  The opposite side (one side of rectangle) = 2·(d/2)·sin(α/2) = d·sin(α/2)

  In the adjacent triangle: sides d/2, d/2, angle (π-α) between them.
  The opposite side (other side of rectangle) = 2·(d/2)·sin((π-α)/2) = d·cos(α/2)

  So: a = d·sin(α/2), b = d·cos(α/2)

Step 2: Area of the rectangle base.
  P = a · b = d·sin(α/2) · d·cos(α/2) = d² · sin(α/2) · cos(α/2)
  Using double angle formula: sin(α/2)·cos(α/2) = (1/2)·sin(α)
  P = d²/2 · sin(α)

Step 3: Height of the pyramid.
  "Prava četvorostrana piramida" = right pyramid, apex directly above center of base.
  Center of rectangle = intersection of diagonals.
  Distance from center to any vertex = d/2 (half-diagonal).

  Lateral edge makes angle β with the base plane.
  In the right triangle formed by: height H, half-diagonal d/2, and lateral edge:
  tan(β) = H / (d/2)
  H = (d/2) · tan(β)

Step 4: Volume.
  V = (1/3) · P · H
  V = (1/3) · (d²/2 · sin α) · (d/2 · tan β)
  V = (1/3) · (d²/2) · (d/2) · sin α · tan β
  V = (1/3) · (d³/4) · sin α · tan β
  V = d³/12 · sin α · tan β

Answer: (B) (d³/12) sin α · tg β

Verification:
- Base area = d²·sin(α)/2 ✓
- Height = (d/2)·tan(β) ✓
- V = (1/3)·(d²/2)·sin(α)·(d/2)·tan(β) = d³/(3·4)·sin(α)·tan(β) = d³/12·sin(α)·tan(β) ✓
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 12px 0;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 14px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 100px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #60a5fa;
  font-size: 1.15rem;
  font-weight: 700;
}

.plan-card {
  border-left: 4px solid #a78bfa;
}

.plan-card h2 { color: #a78bfa; }

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 10px 14px;
  background: rgba(96,165,250,0.06);
  border-radius: 8px;
  border: 1px solid rgba(96,165,250,0.12);
  list-style: none;
  user-select: none;
}

details summary::-webkit-details-marker { display: none; }

details summary::before {
  content: '\25B8 ';
  display: inline;
}

details[open] summary::before {
  content: '\25BE ';
}

details .details-content {
  padding: 14px 18px;
  margin-top: 8px;
  background: rgba(96,165,250,0.04);
  border-radius: 8px;
  border: 1px solid rgba(96,165,250,0.08);
}

.step-container {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  align-items: flex-start;
  padding: 8px;
  border-left: 3px solid transparent;
  border-radius: 8px;
  transition: all 0.2s;
  cursor: pointer;
}

.step-container:hover {
  background: rgba(96,165,250,0.04);
  border-left-color: #4ade80;
}

.step-container.active {
  background: rgba(52,211,153,0.06);
  border-left-color: #4ade80;
}

.step-badge {
  min-width: 34px;
  height: 34px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: 0.95rem;
  color: #0f172a;
  margin-top: 2px;
  flex-shrink: 0;
}

.step-content {
  flex: 1;
  min-width: 0;
}

.step-content h3 {
  margin-bottom: 8px;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 14px;
  padding: 22px 26px;
  margin-bottom: 24px;
}

.insight-box h2 { color: #a78bfa; }

.final-answer-box {
  background: linear-gradient(135deg, rgba(52,211,153,0.1), rgba(74,222,128,0.08));
  border: 2px solid rgba(52,211,153,0.35);
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin-bottom: 24px;
}

.final-answer-box .answer-value {
  font-size: 2.4rem;
  font-weight: 800;
  color: #4ade80;
  margin: 16px 0;
}

.options-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin: 18px 0;
}

.option-chip {
  background: rgba(96,165,250,0.08);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 22px;
  font-size: 1.05rem;
  color: #94a3b8;
  transition: all 0.2s;
}

.option-chip.correct {
  background: rgba(52,211,153,0.15);
  border-color: #34d399;
  color: #4ade80;
  font-weight: 700;
  box-shadow: 0 0 20px rgba(52,211,153,0.15);
}

.pitfall-box {
  border-left: 4px solid #e09468;
}

.pitfall-box h2 { color: #e09468; }

.challenge-box {
  border-left: 4px solid #a78bfa;
}

.challenge-box h2 { color: #a78bfa; }

.canvas-wrapper {
  background: #0c1222;
  border-radius: 12px;
  border: 1px solid #334155;
  overflow: hidden;
  margin: 14px 0;
}

canvas {
  width: 100%;
  display: block;
  touch-action: none;
}

.drag-hint {
  color: #64748b;
  font-size: 0.85rem;
  text-align: center;
  margin-top: 6px;
  font-style: italic;
}

.provera-note {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 12px;
  padding: 12px 16px;
  background: rgba(52,211,153,0.05);
  border-radius: 8px;
  border: 1px solid rgba(52,211,153,0.12);
}

.formula-list {
  list-style: none;
  padding: 0;
}

.formula-list li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
}

.formula-list li:last-child { border-bottom: none; }

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step-container { flex-direction: column; gap: 8px; }
  .given-grid { flex-direction: column; }
  .options-grid { flex-direction: column; align-items: center; }
  .final-answer-box .answer-value { font-size: 1.8rem; }
}
</style>
</head>
<body>

<div class="container">

  <!-- Title -->
  <h1>Zapremina prave četvorostrane piramide</h1>
  <p class="subtitle">Stereometrija: pravougaona osnova sa dijagonalom d, ugao među dijagonalama i ugao bočnih ivica sa osnovom</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Osnova prave četvorostrane piramide je <span class="highlight">pravougaonik</span> dijagonale \(d\) i ugla \(\alpha\) među dijagonalama.
       Ako bočne ivice obrazuju sa osnovom piramide ugao \(\beta\), tada je zapremina ove piramide jednaka:</p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(\dfrac{d^3}{12}\sin\alpha \cdot \operatorname{ctg}\beta\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(\dfrac{d^3}{12}\sin\alpha \cdot \operatorname{tg}\beta\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(\dfrac{d^3}{4}\sin\alpha \cdot \operatorname{tg}\beta\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(\dfrac{d^3}{12}\sin\dfrac{\alpha}{2} \cdot \operatorname{tg}\beta\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(\dfrac{d^3}{12}\cos\alpha \cdot \operatorname{tg}\beta\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan rešavanja</h2>
    <p>Zadatak rešavamo u tri koraka:</p>
    <ol style="padding-left: 20px; margin-top: 10px; color: #e2e8f0;">
      <li style="margin-bottom: 8px;"><strong>Stranice pravougaonika</strong> — iz dijagonale \(d\) i ugla \(\alpha\) među dijagonalama odredićemo stranice \(a\) i \(b\) pravougaonika, a zatim i površinu osnove.</li>
      <li style="margin-bottom: 8px;"><strong>Visina piramide</strong> — iz uslova da bočne ivice grade ugao \(\beta\) sa ravni osnove, izrazićemo visinu \(H\).</li>
      <li><strong>Zapremina</strong> — primenjujemo formulu \(V = \frac{1}{3} \cdot P_{\text{osnove}} \cdot H\).</li>
    </ol>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Ključne formule i teoreme</summary>
      <div class="details-content">
        <ul class="formula-list">
          <li><strong>Dijagonale pravougaonika:</strong> Dijagonale pravougaonika su jednake i međusobno se polove. Ako je \(d\) dužina dijagonale, svaka poludijagonala iznosi \(\dfrac{d}{2}\).</li>
          <li><strong>Stranice iz poludijagonala:</strong> Ako se dijagonale seku pod uglom \(\alpha\), u trouglu koji formiraju dve poludijagonale i stranica pravougaonika, ta stranica je \(a = 2 \cdot \dfrac{d}{2} \cdot \sin\dfrac{\alpha}{2} = d\sin\dfrac{\alpha}{2}\).</li>
          <li><strong>Formula dvostrukog ugla:</strong> \(\sin\alpha = 2\sin\dfrac{\alpha}{2}\cos\dfrac{\alpha}{2}\)</li>
          <li><strong>Prava piramida:</strong> Vrh piramide se projektuje u centar osnove — u presečnu tačku dijagonala pravougaonika.</li>
          <li><strong>Zapremina piramide:</strong> \(V = \dfrac{1}{3} \cdot P_{\text{osnove}} \cdot H\)</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- Visual Aid / Interactive 3D Diagram -->
  <div class="card">
    <h2>3D vizualizacija piramide</h2>
    <p style="color: #94a3b8; margin-bottom: 10px;">Prevucite mišem za rotaciju piramide. Sve ključne dimenzije su obeležene.</p>
    <div class="canvas-wrapper">
      <canvas id="pyramid3d" width="800" height="600"></canvas>
    </div>
    <p class="drag-hint">Prevucite mišem ili prstom za rotaciju 3D pogleda</p>
  </div>

  <!-- Step-by-step Solution -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Stranice pravougaonika iz dijagonale i ugla</h3>
        <p>Dijagonale pravougaonika su jednake (obe imaju dužinu \(d\)) i međusobno se polove u tački \(O\). Svaka poludijagonala ima dužinu \(\dfrac{d}{2}\).</p>
        <p>Ugao između dijagonala je \(\alpha\). Posmatrajmo trougao koji formiraju dve poludijagonale i jedna stranica pravougaonika. To je jednakokraki trougao sa kracima \(\dfrac{d}{2}\) i uglom \(\alpha\) pri vrhu \(O\):</p>
        <div class="math-box">
          \[
          a = 2 \cdot \frac{d}{2} \cdot \sin\frac{\alpha}{2} = d\sin\frac{\alpha}{2}
          \]
        </div>
        <p>Susedni trougao ima ugao \(\pi - \alpha\) pri vrhu \(O\), pa je druga stranica:</p>
        <div class="math-box">
          \[
          b = 2 \cdot \frac{d}{2} \cdot \sin\frac{\pi - \alpha}{2} = d\cos\frac{\alpha}{2}
          \]
        </div>
        <p>jer je \(\sin\dfrac{\pi - \alpha}{2} = \cos\dfrac{\alpha}{2}\).</p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Površina osnove</h3>
        <p>Površina pravougaonika je proizvod stranica:</p>
        <div class="math-box">
          \[
          P = a \cdot b = d\sin\frac{\alpha}{2} \cdot d\cos\frac{\alpha}{2} = d^2 \cdot \sin\frac{\alpha}{2} \cdot \cos\frac{\alpha}{2}
          \]
        </div>
        <p>Primenom formule dvostrukog ugla \(\sin\alpha = 2\sin\dfrac{\alpha}{2}\cos\dfrac{\alpha}{2}\), dobijamo:</p>
        <div class="math-box">
          \[
          \boxed{P = \frac{d^2}{2}\sin\alpha}
          \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details>
      <summary>Proveri se: Koji je oblik formule za površinu pravougaonika preko dijagonala?</summary>
      <div class="details-content">
        <p>Površina pravougaonika sa dijagonalama dužine \(d\) koje se seku pod uglom \(\alpha\) je:</p>
        <div class="math-box">
          \[ P = \frac{d^2}{2}\sin\alpha \]
        </div>
        <p>Ovo je analogno formuli za površinu romba (\(P = \frac{d_1 \cdot d_2}{2}\)), samo što kod pravougaonika dijagonale su jednake (\(d_1 = d_2 = d\)) pa se pojavljuje i \(\sin\alpha\) jer dijagonale ne moraju biti normalne.</p>
        <p>Zapravo, uopštena formula za četvorougao sa dijagonalama \(d_1\) i \(d_2\) pod uglom \(\alpha\) je \(P = \frac{d_1 \cdot d_2}{2}\sin\alpha\). Za pravougaonik: \(d_1 = d_2 = d\), pa \(P = \frac{d^2}{2}\sin\alpha\).</p>
      </div>
    </details>

    <!-- Step 3 -->
    <div class="step-container">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Visina piramide</h3>
        <p>Pošto je piramida <span class="highlight">prava</span>, njen vrh \(S\) se projektuje tačno u centar pravougaonika — tačku \(O\) u kojoj se seku dijagonale.</p>
        <p>Rastojanje od centra \(O\) do svakog temena osnove je jednako poludijagonali:</p>
        <div class="math-box">
          \[ |OA| = |OB| = |OC| = |OD| = \frac{d}{2} \]
        </div>
        <p>Bočna ivica (npr. \(SA\)) gradi ugao \(\beta\) sa ravni osnove. U pravouglom trouglu \(\triangle SOA\), gde je \(\angle OAS = \beta\), važi:</p>
        <div class="math-box">
          \[
          \tan\beta = \frac{H}{|OA|} = \frac{H}{\dfrac{d}{2}}
          \]
        </div>
        <p>Odatle:</p>
        <div class="math-box">
          \[
          \boxed{H = \frac{d}{2}\tan\beta}
          \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details>
      <summary>Proveri se: Zašto su rastojanja od centra do svih temena jednaka?</summary>
      <div class="details-content">
        <p>Dijagonale pravougaonika se polove, što znači da se seku u tački koja je jednako udaljena od sva četiri temena. Ta tačka je centar opisanog kruga pravougaonika. Rastojanje od centra do svakog temena je polovina dijagonale: \(\dfrac{d}{2}\).</p>
        <p>Upravo zato su sve bočne ivice prave piramide nad pravougaonikom jednake — vrh \(S\) je iznad centra, a sva četiri temena su na istom rastojanju od centra.</p>
      </div>
    </details>

    <!-- Step 4 -->
    <div class="step-container">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Izračunavanje zapremine</h3>
        <p>Sada imamo sve što nam treba. Primenjujemo formulu za zapreminu piramide:</p>
        <div class="math-box">
          \[
          V = \frac{1}{3} \cdot P \cdot H
          \]
        </div>
        <p>Uvrštavamo:</p>
        <div class="math-box">
          \[
          V = \frac{1}{3} \cdot \frac{d^2}{2}\sin\alpha \cdot \frac{d}{2}\tan\beta
          \]
        </div>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step-container">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Sredimo izraz</h3>
        <p>Množimo koeficijente:</p>
        <div class="math-box">
          \[
          V = \frac{1}{3} \cdot \frac{d^2}{2} \cdot \frac{d}{2} \cdot \sin\alpha \cdot \tan\beta = \frac{d^3}{3 \cdot 2 \cdot 2} \cdot \sin\alpha \cdot \tan\beta
          \]
        </div>
        <div class="math-box">
          \[
          \boxed{V = \frac{d^3}{12}\sin\alpha \cdot \operatorname{tg}\beta}
          \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details>
      <summary>Proveri se: Provera dimenzija i specijalnih slučajeva</summary>
      <div class="details-content">
        <p><strong>Dimenzionalna analiza:</strong> \(d^3\) je kub dužine, \(\sin\alpha\) i \(\tan\beta\) su bezdimenzionalni. Dakle \(V\) ima dimenziju zapremine (\(\text{dužina}^3\)) — tačno!</p>
        <p><strong>Specijalan slučaj \(\alpha = 90°\):</strong> Tada je osnova kvadrat (dijagonale su normalne), pa \(\sin 90° = 1\) i \(V = \frac{d^3}{12}\tan\beta\). Stranica kvadrata je \(a = d\sin 45° = \frac{d\sqrt{2}}{2}\), pa je \(P = a^2 = \frac{d^2}{2}\). Visina \(H = \frac{d}{2}\tan\beta\). Zapremina: \(\frac{1}{3} \cdot \frac{d^2}{2} \cdot \frac{d}{2}\tan\beta = \frac{d^3}{12}\tan\beta\). Poklapa se!</p>
        <p><strong>Granica \(\alpha \to 0\):</strong> Pravougaonik degenieriše u duž, \(\sin\alpha \to 0\), pa \(V \to 0\). Logično!</p>
      </div>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Ključni uvid</h2>
    <p>Najvažniji trik u ovom zadatku je prepoznati da se <span class="highlight">površina pravougaonika</span> može elegantno izraziti preko dijagonale i ugla među dijagonalama korišćenjem formule dvostrukog ugla:</p>
    <div class="math-box" style="text-align: center;">
      \[
      P = d\sin\frac{\alpha}{2} \cdot d\cos\frac{\alpha}{2} = \frac{d^2}{2}\sin\alpha
      \]
    </div>
    <p style="margin-top: 12px;">Drugi ključni korak je uočiti da je u pravoj piramidi nad pravougaonikom centar osnove jednako udaljen od svih temena (jer je to centar opisanog kruga pravougaonika), što omogućava da visinu izrazimo direktno iz ugla \(\beta\).</p>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <h2 style="color: #34d399; margin-bottom: 10px;">Konačan odgovor</h2>
    <div class="options-grid">
      <div class="option-chip">(A) \(\dfrac{d^3}{12}\sin\alpha \cdot \operatorname{ctg}\beta\)</div>
      <div class="option-chip correct">(B) \(\dfrac{d^3}{12}\sin\alpha \cdot \operatorname{tg}\beta\)</div>
      <div class="option-chip">(C) \(\dfrac{d^3}{4}\sin\alpha \cdot \operatorname{tg}\beta\)</div>
      <div class="option-chip">(D) \(\dfrac{d^3}{12}\sin\dfrac{\alpha}{2} \cdot \operatorname{tg}\beta\)</div>
      <div class="option-chip">(E) \(\dfrac{d^3}{12}\cos\alpha \cdot \operatorname{tg}\beta\)</div>
    </div>
    <div class="answer-value">\(V = \dfrac{d^3}{12}\sin\alpha \cdot \operatorname{tg}\beta\)</div>
    <div class="provera-note">
      <strong>Provera:</strong> Osnova pravougaonika ima površinu \(P = \frac{d^2}{2}\sin\alpha\). Visina piramide je \(H = \frac{d}{2}\tan\beta\).
      Zapremina: \(V = \frac{1}{3} \cdot \frac{d^2}{2}\sin\alpha \cdot \frac{d}{2}\tan\beta = \frac{d^3}{12}\sin\alpha \cdot \tan\beta\).
      Odgovor (B) je tačan. Odgovor (C) je netačan jer ima \(\frac{1}{4}\) umesto \(\frac{1}{12}\) (zaboravljen je faktor \(\frac{1}{3}\) iz formule za zapreminu).
      Odgovor (D) je netačan jer ima \(\sin\frac{\alpha}{2}\) umesto \(\sin\alpha\) (propuštena primena formule dvostrukog ugla).
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfall-box">
    <h2>Česte greške</h2>
    <ul style="list-style: disc; padding-left: 20px; color: #e2e8f0;">
      <li style="margin-bottom: 10px;"><strong>Zaboraviti faktor \(\frac{1}{3}\):</strong> Formula za zapreminu piramide je \(V = \frac{1}{3}PH\), ne \(V = PH\). Bez ovog faktora dobija se odgovor (C) umesto (B).</li>
      <li style="margin-bottom: 10px;"><strong>Ne primeniti formulu dvostrukog ugla:</strong> Površina osnove se najpre dobije kao \(d^2 \sin\frac{\alpha}{2}\cos\frac{\alpha}{2}\). Ako se ne uoči da je to \(\frac{d^2}{2}\sin\alpha\), može se dobiti odgovor (D) sa \(\sin\frac{\alpha}{2}\).</li>
      <li style="margin-bottom: 10px;"><strong>Zameniti tangens i kotangens:</strong> Ugao \(\beta\) je između bočne ivice i osnove, pa je \(\tan\beta = \frac{H}{d/2}\), što daje \(H = \frac{d}{2}\tan\beta\). Ako se pogrešno protumači da je ugao pri vrhu piramide, dobija se kotangens — odgovor (A).</li>
      <li style="margin-bottom: 10px;"><strong>Pogrešno odrediti rastojanje od centra do temena:</strong> Centar pravougaonika je na poluprečniku opisanog kruga, koji iznosi \(\frac{d}{2}\), ne \(\frac{a}{2}\) ili \(\frac{b}{2}\).</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-box">
    <h2>Bonus izazov</h2>
    <p>Ako je \(d = 6\), \(\alpha = 60°\) i \(\beta = 45°\), izračunajte:</p>
    <ol style="padding-left: 20px; margin-top: 8px; color: #e2e8f0;">
      <li style="margin-bottom: 6px;">Konkretnu zapreminu piramide.</li>
      <li style="margin-bottom: 6px;">Dužinu bočne ivice.</li>
      <li>Površinu bočne strane piramide koja odgovara stranici \(a\).</li>
    </ol>
    <details>
      <summary>Pogledaj rešenje</summary>
      <div class="details-content">
        <p><strong>1.</strong> Zapremina:</p>
        <div class="math-box">
          \[V = \frac{6^3}{12}\sin 60° \cdot \tan 45° = \frac{216}{12} \cdot \frac{\sqrt{3}}{2} \cdot 1 = 18 \cdot \frac{\sqrt{3}}{2} = 9\sqrt{3} \approx 15{,}59\]
        </div>
        <p><strong>2.</strong> Stranice osnove: \(a = 6\sin 30° = 3\), \(b = 6\cos 30° = 3\sqrt{3}\). Visina: \(H = 3\tan 45° = 3\). Bočna ivica: \(l = \sqrt{H^2 + (d/2)^2} = \sqrt{9 + 9} = 3\sqrt{2}\).</p>
        <p><strong>3.</strong> Apotema bočne strane prema stranici \(a\): \(h_a = \sqrt{H^2 + (b/2)^2} = \sqrt{9 + \frac{27}{4}} = \sqrt{\frac{63}{4}} = \frac{3\sqrt{7}}{2}\). Površina: \(S_a = \frac{1}{2} \cdot a \cdot h_a = \frac{1}{2} \cdot 3 \cdot \frac{3\sqrt{7}}{2} = \frac{9\sqrt{7}}{4} \approx 5{,}95\).</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('pyramid3d');
  const ctx = canvas.getContext('2d');

  // Rotation state
  let rotX = -0.45;
  let rotZ = 0.65;
  let isDragging = false;
  let dragStartX = 0, dragStartY = 0;
  let rotStartX = 0, rotStartZ = 0;

  // Pyramid parameters (for visualization with nice proportions)
  const alpha = Math.PI / 3;  // 60 degrees for nice visual
  const beta = Math.PI / 4;   // 45 degrees
  const d = 4;

  const a = d * Math.sin(alpha / 2);
  const b = d * Math.cos(alpha / 2);
  const H = (d / 2) * Math.tan(beta);

  // 3D points of the pyramid
  // Base rectangle centered at origin: vertices at (+-a/2, +-b/2, 0)
  const basePoints = [
    [-a / 2, -b / 2, 0],  // A (index 0)
    [ a / 2, -b / 2, 0],  // B (index 1)
    [ a / 2,  b / 2, 0],  // C (index 2)
    [-a / 2,  b / 2, 0],  // D (index 3)
  ];
  const apex = [0, 0, H];    // S (index 4)
  const center = [0, 0, 0];  // O

  function rotateX(p, angle) {
    const c = Math.cos(angle), s = Math.sin(angle);
    return [p[0], p[1] * c - p[2] * s, p[1] * s + p[2] * c];
  }

  function rotateZ(p, angle) {
    const c = Math.cos(angle), s = Math.sin(angle);
    return [p[0] * c - p[1] * s, p[0] * s + p[1] * c, p[2]];
  }

  function project(p3d, W, HH, scale) {
    // Rotate
    let pt = rotateZ(p3d, rotZ);
    pt = rotateX(pt, rotX);

    // Orthographic projection with slight perspective feel
    const perspFactor = 1.0 / (1.0 - pt[2] * 0.02);
    const x2d = W / 2 + pt[0] * scale * perspFactor;
    const y2d = HH / 2 - pt[1] * scale * perspFactor * 0.7 - pt[2] * scale * 0.55;
    return { x: x2d, y: y2d, z: pt[2] };
  }

  function draw() {
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    const W = rect.width;
    const HH = 600;
    canvas.width = W * dpr;
    canvas.height = HH * dpr;
    canvas.style.height = HH + 'px';
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, HH);

    const scale = Math.min(W, HH) / 7.5;

    // Project all points
    const projBase = basePoints.map(function(p) { return project(p, W, HH, scale); });
    const projApex = project(apex, W, HH, scale);
    const projCenter = project(center, W, HH, scale);

    // Determine which faces are visible based on normals
    // For a better visualization, draw back edges first, then faces, then front edges

    // Calculate midpoint of base diagonal for diagonal drawing
    const projMidAC = {
      x: (projBase[0].x + projBase[2].x) / 2,
      y: (projBase[0].y + projBase[2].y) / 2
    };

    // Sort base edges by z for proper occlusion
    // Draw all base edges
    function drawEdge(p1, p2, color, lineWidth, dash) {
      ctx.strokeStyle = color;
      ctx.lineWidth = lineWidth;
      ctx.setLineDash(dash || []);
      ctx.beginPath();
      ctx.moveTo(p1.x, p1.y);
      ctx.lineTo(p2.x, p2.y);
      ctx.stroke();
      ctx.setLineDash([]);
    }

    // Determine back vs front faces for base
    // Average z of each base edge to decide drawing order
    var edges = [];
    for (var i = 0; i < 4; i++) {
      var j = (i + 1) % 4;
      edges.push({
        from: i,
        to: j,
        avgZ: (projBase[i].z + projBase[j].z) / 2
      });
    }
    // Sort edges by z (back first)
    edges.sort(function(ea, eb) { return ea.avgZ - eb.avgZ; });

    // Draw base fill (semi-transparent)
    ctx.fillStyle = 'rgba(96,165,250,0.08)';
    ctx.beginPath();
    ctx.moveTo(projBase[0].x, projBase[0].y);
    for (var i = 1; i < 4; i++) {
      ctx.lineTo(projBase[i].x, projBase[i].y);
    }
    ctx.closePath();
    ctx.fill();

    // Lateral face fills
    var lateralFaces = [];
    for (var i = 0; i < 4; i++) {
      var j = (i + 1) % 4;
      var midZ = (projBase[i].z + projBase[j].z + projApex.z) / 3;
      lateralFaces.push({ i: i, j: j, midZ: midZ });
    }
    lateralFaces.sort(function(fa, fb) { return fa.midZ - fb.midZ; });

    // Draw lateral faces from back to front
    var faceColors = [
      'rgba(167,139,250,0.10)',
      'rgba(167,139,250,0.08)',
      'rgba(96,165,250,0.12)',
      'rgba(96,165,250,0.14)'
    ];
    for (var fi = 0; fi < lateralFaces.length; fi++) {
      var face = lateralFaces[fi];
      ctx.fillStyle = faceColors[fi];
      ctx.beginPath();
      ctx.moveTo(projBase[face.i].x, projBase[face.i].y);
      ctx.lineTo(projBase[face.j].x, projBase[face.j].y);
      ctx.lineTo(projApex.x, projApex.y);
      ctx.closePath();
      ctx.fill();
    }

    // Draw diagonals of the base (dashed)
    drawEdge(projBase[0], projBase[2], 'rgba(244,114,182,0.5)', 1.8, [6, 4]);
    drawEdge(projBase[1], projBase[3], 'rgba(244,114,182,0.5)', 1.8, [6, 4]);

    // Draw base edges
    for (var ei = 0; ei < edges.length; ei++) {
      var e = edges[ei];
      drawEdge(projBase[e.from], projBase[e.to], '#60a5fa', 2.5);
    }

    // Draw lateral edges
    for (var i = 0; i < 4; i++) {
      drawEdge(projBase[i], projApex, '#a78bfa', 2.2);
    }

    // Draw height line (dashed, from apex to center)
    drawEdge(projApex, projCenter, '#4ade80', 2.2, [8, 5]);

    // Draw angle beta arc at vertex A (base[0])
    // The angle is between edge OA (in base) and edge SA (lateral)
    var angleArcRadius = 28;
    // Direction from A to O
    var dxAO = projCenter.x - projBase[0].x;
    var dyAO = projCenter.y - projBase[0].y;
    var angAO = Math.atan2(dyAO, dxAO);
    // Direction from A to S
    var dxAS = projApex.x - projBase[0].x;
    var dyAS = projApex.y - projBase[0].y;
    var angAS = Math.atan2(dyAS, dxAS);

    // Draw the arc for angle beta
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2;
    // Determine the correct arc direction
    var arcStart = angAO;
    var arcEnd = angAS;
    // Always draw the smaller angle
    var angleDiff = angAS - angAO;
    while (angleDiff > Math.PI) angleDiff -= 2 * Math.PI;
    while (angleDiff < -Math.PI) angleDiff += 2 * Math.PI;
    var counterclockwise = angleDiff < 0;

    ctx.beginPath();
    ctx.arc(projBase[0].x, projBase[0].y, angleArcRadius, arcStart, arcEnd, counterclockwise);
    ctx.stroke();

    // Beta label
    var midBetaAngle = arcStart + angleDiff / 2;
    var betaLabelR = angleArcRadius + 16;
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText('\u03B2', projBase[0].x + betaLabelR * Math.cos(midBetaAngle),
                           projBase[0].y + betaLabelR * Math.sin(midBetaAngle));

    // Draw angle alpha arc at center O
    var alphaArcRadius = 22;
    // Direction from O to A
    var dxOA = projBase[0].x - projCenter.x;
    var dyOA = projBase[0].y - projCenter.y;
    var angOA = Math.atan2(dyOA, dxOA);
    // Direction from O to B
    var dxOB = projBase[1].x - projCenter.x;
    var dyOB = projBase[1].y - projCenter.y;
    var angOB = Math.atan2(dyOB, dxOB);

    var alphaAngleDiff = angOB - angOA;
    while (alphaAngleDiff > Math.PI) alphaAngleDiff -= 2 * Math.PI;
    while (alphaAngleDiff < -Math.PI) alphaAngleDiff += 2 * Math.PI;
    var alphaCC = alphaAngleDiff < 0;

    ctx.strokeStyle = '#34d399';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.arc(projCenter.x, projCenter.y, alphaArcRadius, angOA, angOB, alphaCC);
    ctx.stroke();

    // Alpha label
    var midAlphaAngle = angOA + alphaAngleDiff / 2;
    var alphaLabelR = alphaArcRadius + 15;
    ctx.fillStyle = '#34d399';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.fillText('\u03B1', projCenter.x + alphaLabelR * Math.cos(midAlphaAngle),
                            projCenter.y + alphaLabelR * Math.sin(midAlphaAngle));

    // Draw right angle mark at O for height
    var rightAngleSize = 10;
    // Direction from O along the base (towards A)
    var normOA = Math.sqrt(dxOA * dxOA + dyOA * dyOA);
    if (normOA > 0) {
      var uxOA = dxOA / normOA * rightAngleSize;
      var uyOA = dyOA / normOA * rightAngleSize;
      // Direction from O upward along height
      var dxOH = projApex.x - projCenter.x;
      var dyOH = projApex.y - projCenter.y;
      var normOH = Math.sqrt(dxOH * dxOH + dyOH * dyOH);
      if (normOH > 0) {
        var uxOH = dxOH / normOH * rightAngleSize;
        var uyOH = dyOH / normOH * rightAngleSize;

        ctx.strokeStyle = '#94a3b8';
        ctx.lineWidth = 1.5;
        ctx.beginPath();
        ctx.moveTo(projCenter.x + uxOA, projCenter.y + uyOA);
        ctx.lineTo(projCenter.x + uxOA + uxOH, projCenter.y + uyOA + uyOH);
        ctx.lineTo(projCenter.x + uxOH, projCenter.y + uyOH);
        ctx.stroke();
      }
    }

    // Point labels
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textBaseline = 'middle';
    var labels = ['A', 'B', 'C', 'D'];
    var offsets = [
      { dx: -16, dy: 14 },
      { dx: 14, dy: 14 },
      { dx: 14, dy: -10 },
      { dx: -16, dy: -10 }
    ];

    // Draw base vertex dots and labels
    for (var i = 0; i < 4; i++) {
      ctx.fillStyle = '#60a5fa';
      ctx.beginPath();
      ctx.arc(projBase[i].x, projBase[i].y, 5, 0, 2 * Math.PI);
      ctx.fill();

      ctx.fillStyle = '#e2e8f0';
      ctx.textAlign = offsets[i].dx < 0 ? 'right' : 'left';
      ctx.fillText(labels[i], projBase[i].x + offsets[i].dx, projBase[i].y + offsets[i].dy);
    }

    // Apex dot and label
    ctx.fillStyle = '#a78bfa';
    ctx.beginPath();
    ctx.arc(projApex.x, projApex.y, 6, 0, 2 * Math.PI);
    ctx.fill();

    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('S', projApex.x, projApex.y - 16);

    // Center dot and label
    ctx.fillStyle = '#4ade80';
    ctx.beginPath();
    ctx.arc(projCenter.x, projCenter.y, 4, 0, 2 * Math.PI);
    ctx.fill();

    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('O', projCenter.x + 10, projCenter.y + 4);

    // Dimension labels
    // Height H label - midpoint of height line
    var hMidX = (projApex.x + projCenter.x) / 2;
    var hMidY = (projApex.y + projCenter.y) / 2;
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('H', hMidX + 10, hMidY);

    // Side a label - midpoint of edge AB
    var aMidX = (projBase[0].x + projBase[1].x) / 2;
    var aMidY = (projBase[0].y + projBase[1].y) / 2;
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('a', aMidX, aMidY + 18);

    // Side b label - midpoint of edge BC
    var bMidX = (projBase[1].x + projBase[2].x) / 2;
    var bMidY = (projBase[1].y + projBase[2].y) / 2;
    ctx.fillStyle = '#60a5fa';
    ctx.textAlign = 'left';
    ctx.fillText('b', bMidX + 12, bMidY);

    // Diagonal d label - midpoint of diagonal AC
    var dMidX = (projBase[0].x + projBase[2].x) / 2;
    var dMidY = (projBase[0].y + projBase[2].y) / 2;
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText('d', dMidX - 8, dMidY - 8);

    // d/2 label near center on one half-diagonal
    var hdMidX = (projBase[0].x + projCenter.x) / 2;
    var hdMidY = (projBase[0].y + projCenter.y) / 2;
    ctx.fillStyle = '#f472b6';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('d/2', hdMidX - 14, hdMidY + 14);

    // Legend box
    var legendX = 16;
    var legendY = HH - 110;
    ctx.fillStyle = 'rgba(15,23,42,0.9)';
    ctx.fillRect(legendX - 6, legendY - 18, 280, 108);
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.strokeRect(legendX - 6, legendY - 18, 280, 108);

    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.textBaseline = 'middle';

    // Legend items
    var legendItems = [
      { color: '#60a5fa', text: 'Osnova (pravougaonik)' },
      { color: '#a78bfa', text: 'Bočne ivice' },
      { color: '#4ade80', text: 'Visina H (isprekidano)' },
      { color: '#f472b6', text: 'Dijagonale osnove (isprekidano)' }
    ];

    for (var li = 0; li < legendItems.length; li++) {
      var item = legendItems[li];
      var ly = legendY + li * 22;
      ctx.strokeStyle = item.color;
      ctx.lineWidth = 2.5;
      if (li >= 2) {
        ctx.setLineDash([5, 3]);
      } else {
        ctx.setLineDash([]);
      }
      ctx.beginPath();
      ctx.moveTo(legendX, ly);
      ctx.lineTo(legendX + 24, ly);
      ctx.stroke();
      ctx.setLineDash([]);

      ctx.fillStyle = item.color;
      ctx.fillText(item.text, legendX + 32, ly);
    }

    // Info text
    ctx.fillStyle = '#64748b';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textBaseline = 'alphabetic';
    ctx.textAlign = 'right';
    ctx.fillText('d = ' + d.toFixed(1) + ', \u03B1 = 60\u00B0, \u03B2 = 45\u00B0', W - 16, HH - 12);
  }

  // Mouse/touch rotation interaction
  function getPointer(e) {
    var rect = canvas.getBoundingClientRect();
    if (e.touches) {
      return { x: e.touches[0].clientX - rect.left, y: e.touches[0].clientY - rect.top };
    }
    return { x: e.clientX - rect.left, y: e.clientY - rect.top };
  }

  function onPointerDown(e) {
    isDragging = true;
    var p = getPointer(e);
    dragStartX = p.x;
    dragStartY = p.y;
    rotStartX = rotX;
    rotStartZ = rotZ;
    canvas.style.cursor = 'grabbing';
  }

  function onPointerMove(e) {
    if (!isDragging) return;
    e.preventDefault();
    var p = getPointer(e);
    var dx = p.x - dragStartX;
    var dy = p.y - dragStartY;
    rotZ = rotStartZ + dx * 0.008;
    rotX = rotStartX + dy * 0.008;
    // Clamp rotX to avoid flipping
    rotX = Math.max(-Math.PI / 2 + 0.05, Math.min(-0.05, rotX));
    draw();
  }

  function onPointerUp() {
    isDragging = false;
    canvas.style.cursor = 'grab';
  }

  canvas.addEventListener('mousedown', onPointerDown);
  canvas.addEventListener('mousemove', onPointerMove);
  canvas.addEventListener('mouseup', onPointerUp);
  canvas.addEventListener('mouseleave', onPointerUp);
  canvas.addEventListener('touchstart', onPointerDown, { passive: false });
  canvas.addEventListener('touchmove', onPointerMove, { passive: false });
  canvas.addEventListener('touchend', onPointerUp);
  canvas.style.cursor = 'grab';

  // Step click highlighting
  document.querySelectorAll('.step-container').forEach(function(step) {
    step.addEventListener('click', function() {
      document.querySelectorAll('.step-container').forEach(function(s) {
        s.classList.remove('active');
      });
      step.classList.toggle('active');
    });
  });

  draw();
  window.addEventListener('resize', draw);
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Zapremina prave četvorostrane piramide sa pravougaonom osnovom",
  "subject": "math",
  "unit": "geometry",
  "topic_tags": ["stereometrija", "zapremina piramide", "pravougaonik", "dijagonale pravougaonika", "trigonometrija", "formula dvostrukog ugla"]
}
BRAINSPARK_META-->