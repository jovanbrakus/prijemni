<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dijagonale pravilnog desetougla</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM:
Ukupan broj dijagonala pravilnog desetougla je:
(A) 15    (B) 20    (C) 25    (D) 30    (E) 35

SOLUTION:

A diagonal of a polygon is a line segment connecting two non-adjacent vertices.

For a polygon with n vertices:
- Total number of line segments connecting any two vertices = C(n,2) = n(n-1)/2
- Number of sides (which are NOT diagonals) = n
- Number of diagonals = C(n,2) - n = n(n-1)/2 - n = n(n-1-2)/2 = n(n-3)/2

For a regular decagon (n = 10):
  Number of diagonals = 10 * (10-3) / 2 = 10 * 7 / 2 = 70 / 2 = 35

Answer: (E) 35

Verification by alternative counting:
Each vertex connects to n-3 = 7 other vertices via diagonals (cannot connect to itself or its 2 neighbors).
Total connections = 10 * 7 = 70, but each diagonal is counted twice (once from each endpoint).
Number of diagonals = 70 / 2 = 35. Confirmed.

Additional check for small cases:
- Triangle (n=3): 3(0)/2 = 0 diagonals. Correct.
- Square (n=4): 4(1)/2 = 2 diagonals. Correct.
- Pentagon (n=5): 5(2)/2 = 5 diagonals. Correct.
- Hexagon (n=6): 6(3)/2 = 9 diagonals. Correct.

The answer is (E) 35.
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
  transition: border-color 0.2s;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 10px 0;
  user-select: none;
}

details summary:hover {
  color: #93bbfc;
}

details[open] summary {
  margin-bottom: 10px;
}

.theory-content ul {
  list-style: none;
  padding-left: 0;
}

.theory-content li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #cbd5e1;
}

.theory-content li:last-child {
  border-bottom: none;
}

.canvas-card {
  text-align: center;
}

canvas {
  border-radius: 10px;
  width: 100%;
  max-width: 650px;
  touch-action: none;
}

.drag-hint {
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

.step-container {
  margin-bottom: 18px;
  padding: 18px;
  padding-left: 24px;
  background: rgba(30,41,59,0.5);
  border-left: 3px solid #334155;
  border-radius: 0 10px 10px 0;
  cursor: pointer;
  transition: border-color 0.25s, background 0.25s;
}

.step-container:hover,
.step-container.active {
  border-left-color: #4ade80;
  background: rgba(30,41,59,0.9);
}

.step-badge {
  display: inline-block;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  font-weight: 700;
  font-size: 0.8rem;
  padding: 3px 10px;
  border-radius: 20px;
  margin-bottom: 8px;
}

.step-title {
  font-size: 1.1rem;
  font-weight: 600;
  color: #e2e8f0;
  margin-bottom: 8px;
}

.step-text {
  color: #cbd5e1;
  font-size: 0.97rem;
}

.checkpoint {
  background: rgba(167,139,250,0.08);
  border: 1px solid rgba(167,139,250,0.2);
  border-radius: 8px;
  padding: 12px 16px;
  margin: 15px 0;
}

.checkpoint summary {
  color: #a78bfa;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.25);
  border-radius: 14px;
  padding: 22px;
  margin-bottom: 24px;
}

.insight-box h3 {
  color: #a78bfa;
  margin-bottom: 10px;
}

.final-answer {
  text-align: center;
  padding: 30px;
  border: 2px solid rgba(74,222,128,0.3);
  background: rgba(74,222,128,0.06);
}

.final-answer .answer-value {
  font-size: 2rem;
  font-weight: 700;
  color: #4ade80;
  margin: 16px 0;
}

.final-answer .answer-label {
  color: #94a3b8;
  font-size: 0.95rem;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 12px;
  margin: 20px 0;
}

.option-box {
  padding: 12px 22px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: rgba(30,41,59,0.6);
  color: #94a3b8;
  font-size: 1.05rem;
  font-weight: 600;
  transition: all 0.3s;
}

.option-box.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.12);
  color: #4ade80;
}

.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 0;
  padding-left: 16px;
  position: relative;
  color: #cbd5e1;
}

.pitfall-list li::before {
  content: '\26A0';
  position: absolute;
  left: 0;
}

.challenge-box {
  border-left: 3px solid #f472b6;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 10px;
}

.toggle-container {
  display: flex;
  justify-content: center;
  gap: 12px;
  margin: 14px 0 8px 0;
  flex-wrap: wrap;
}

.toggle-btn {
  padding: 8px 18px;
  border-radius: 8px;
  border: 1px solid #334155;
  background: rgba(30,41,59,0.7);
  color: #94a3b8;
  font-size: 0.9rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.25s;
}

.toggle-btn:hover {
  border-color: #60a5fa;
  color: #e2e8f0;
}

.toggle-btn.active {
  border-color: #60a5fa;
  background: rgba(96,165,250,0.15);
  color: #60a5fa;
}

@media (max-width: 700px) {
  h1 { font-size: 1.5rem; }
  .container { padding: 10px; }
  .card { padding: 16px; }
  .given-grid { flex-direction: column; }
  .options-row { flex-direction: column; align-items: center; }
  .toggle-container { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Dijagonale pravilnog desetougla</h1>
  <p class="subtitle">Kombinatorika i geometrija pravilnih mnogouglova</p>

  <!-- PROBLEM STATEMENT -->
  <div class="card problem-statement">
    <h2>Zadatak</h2>
    <p>Ukupan broj dijagonala <span class="highlight">pravilnog desetougla</span> je:</p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(15\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(20\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(25\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(30\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(35\)</div>
      </div>
    </div>
  </div>

  <!-- PLAN -->
  <div class="card plan-card">
    <h2>Plan re≈°avanja</h2>
    <p>Iskoristiƒáemo kombinatornu formulu za broj dijagonala pravilnog \(n\)-tougla. Kljuƒçna ideja: od svih moguƒáih du≈æi koje spajaju dva temena, odbrojimo one koje su stranice mnogougla. Rezultat ƒáemo verifikovati i alternativnim pristupom.</p>
  </div>

  <!-- THEORY -->
  <div class="card">
    <details>
      <summary>üìê Kljuƒçne formule i teoreme</summary>
      <div class="theory-content">
        <ul>
          <li><strong>Binomni koeficijent:</strong> Broj naƒçina da se izaberu 2 elementa iz skupa od \(n\) elemenata je \(\displaystyle \binom{n}{2} = \frac{n(n-1)}{2}\)</li>
          <li><strong>Broj dijagonala \(n\)-tougla:</strong> \(\displaystyle d = \binom{n}{2} - n = \frac{n(n-1)}{2} - n = \frac{n(n-3)}{2}\)</li>
          <li><strong>Alternativni pristup:</strong> Iz svakog temena polazi \(n-3\) dijagonale (ne raƒçuna se samo teme i dva susedna temena). Ukupno \(\frac{n(n-3)}{2}\) jer se svaka dijagonala broji dvaput.</li>
          <li><strong>Pravilni mnogougao:</strong> Sva temena le≈æe na kru≈ænici (opisana kru≈ænica). Sve stranice i svi uglovi su jednaki.</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- VISUAL AID -->
  <div class="card canvas-card">
    <h2>Interaktivni dijagram</h2>
    <p style="color:#94a3b8; margin-bottom:10px;">Pravilni desetougao sa svim dijagonalama. Koristite dugmad ispod da prika≈æete dijagonale po temenu ili sve odjednom.</p>
    <canvas id="diagram" width="650" height="650"></canvas>
    <div class="toggle-container">
      <button class="toggle-btn active" id="btn-all">Sve dijagonale</button>
      <button class="toggle-btn" id="btn-vertex">Po temenu</button>
    </div>
    <div id="vertex-controls" class="toggle-container" style="display:none;">
      <button class="toggle-btn" id="btn-prev">&#9664; Prethodno</button>
      <span id="vertex-label" style="color:#94a3b8; padding:8px 12px; font-size:0.9rem;">Teme 1: 7 dijagonala</span>
      <button class="toggle-btn" id="btn-next">Sledeƒáe &#9654;</button>
    </div>
    <p class="drag-hint">Kliknite na dugmad za promenu prikaza</p>
  </div>

  <!-- STEP-BY-STEP -->
  <div class="card">
    <h2>Re≈°enje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container" id="step1">
      <span class="step-badge">Korak 1</span>
      <div class="step-title">Identifikujemo podatke</div>
      <div class="step-text">
        <p>Pravilni desetougao ima \(n = 10\) temena. Potrebno je naƒái ukupan broj dijagonala.</p>
        <p><strong>Dijagonala</strong> je du≈æ koja spaja dva temena mnogougla, a pritom <em>nije</em> stranica tog mnogougla.</p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container" id="step2">
      <span class="step-badge">Korak 2</span>
      <div class="step-title">Prebrojimo sve moguƒáe du≈æi izmeƒëu temena</div>
      <div class="step-text">
        <p>Svaka dva temena mo≈æemo spojiti du≈æju. Broj naƒçina da izaberemo 2 temena od 10 je:</p>
        <div class="math-box">
          \[ \binom{10}{2} = \frac{10!}{2! \cdot 8!} = \frac{10 \cdot 9}{2} = 45 \]
        </div>
        <p>Dakle, postoji ukupno <span class="highlight">45 du≈æi</span> koje spajaju neka dva temena desetougla.</p>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step-container" id="step3">
      <span class="step-badge">Korak 3</span>
      <div class="step-title">Odbrojimo stranice</div>
      <div class="step-text">
        <p>Od tih 45 du≈æi, taƒçno \(n = 10\) su stranice desetougla (jer desetougao ima 10 stranica).</p>
        <p>Sve ostale du≈æi su dijagonale:</p>
        <div class="math-box">
          \[ d = 45 - 10 = 35 \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>üß† Proveri se: Koliko dijagonala polazi iz jednog temena desetougla?</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        Iz jednog temena ne mo≈æemo povuƒái dijagonalu ka samom sebi, niti ka dva susedna temena (to bi bile stranice). Dakle, iz jednog temena polazi \(10 - 3 = 7\) dijagonala.
      </p>
    </details>

    <!-- Step 4 -->
    <div class="step-container" id="step4">
      <span class="step-badge">Korak 4</span>
      <div class="step-title">Primena op≈°te formule</div>
      <div class="step-text">
        <p>Koristimo formulu za broj dijagonala \(n\)-tougla:</p>
        <div class="math-box">
          \[ d = \frac{n(n-3)}{2} \]
        </div>
        <p>Za \(n = 10\):</p>
        <div class="math-box">
          \[ d = \frac{10 \cdot (10-3)}{2} = \frac{10 \cdot 7}{2} = \frac{70}{2} = 35 \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>üß† Proveri se: Za≈°to delimo sa 2 u formuli?</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        Zato ≈°to svaku dijagonalu brojimo dvaput ‚Äî jednom iz svakog njenog krajnjeg temena. Na primer, dijagonala od temena A do temena C se broji i kao dijagonala iz A i kao dijagonala iz C. Deljenjem sa 2 korigujemo ovo dvostruko brojanje.
      </p>
    </details>

    <!-- Step 5 -->
    <div class="step-container" id="step5">
      <span class="step-badge">Korak 5</span>
      <div class="step-title">Alternativna verifikacija</div>
      <div class="step-text">
        <p>Proverimo rezultat alternativnim pristupom:</p>
        <p>Iz svakog od 10 temena polazi po 7 dijagonala.</p>
        <div class="math-box">
          \[ \text{Ukupno prebrojanih} = 10 \cdot 7 = 70 \]
        </div>
        <p>Svaka dijagonala je prebrojana taƒçno dva puta (po jednom za svaki kraj), pa je stvarni broj:</p>
        <div class="math-box">
          \[ d = \frac{70}{2} = 35 \]
        </div>
        <p>Rezultat se poklapa. Odgovor je potvrƒëen.</p>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details class="checkpoint">
      <summary>üß† Proveri se: Koliko dijagonala ima petougao (za kontrolu formule)?</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        Za \(n = 5\): \(d = \frac{5 \cdot 2}{2} = 5\). Nacrtajte petougao i prebrojte ‚Äî zaista ima taƒçno 5 dijagonala (one formiraju poznatu zvezdicu).
      </p>
    </details>
  </div>

  <!-- KEY INSIGHT -->
  <div class="insight-box">
    <h3>Kljuƒçni uvid</h3>
    <p>Dijagonale mnogougla su zapravo sve moguƒáe du≈æi izmeƒëu temena <em>minus</em> stranice. Kombinatorika nam daje elegantan alat: \(\binom{n}{2}\) za ukupne du≈æi, pa oduzimanje \(n\) stranica. Rezultat je kompaktna formula:</p>
    <div class="math-box" style="text-align:center; font-size:1.2rem;">
      \[ d = \frac{n(n-3)}{2} \]
    </div>
  </div>

  <!-- FINAL ANSWER -->
  <div class="card final-answer">
    <h2>Konaƒçan odgovor</h2>
    <p class="answer-label">Ukupan broj dijagonala pravilnog desetougla je:</p>
    <div class="answer-value">(E) 35</div>
    <div class="options-row">
      <div class="option-box">(A) 15</div>
      <div class="option-box">(B) 20</div>
      <div class="option-box">(C) 25</div>
      <div class="option-box">(D) 30</div>
      <div class="option-box correct">(E) 35</div>
    </div>
    <p class="verification-note">Provera: Formula \(\frac{n(n-3)}{2}\) za \(n=10\) daje \(\frac{10 \cdot 7}{2} = 35\). Alternativni pristup (10 temena, po 7 dijagonala iz svakog, deljeno sa 2) daje isti rezultat. Za kontrolu: ƒçetvorougao ima 2, petougao 5, ≈°estougao 9 dijagonala ‚Äî formula radi ispravno za sve.</p>
  </div>

  <!-- PITFALLS -->
  <div class="card">
    <h2>ƒåeste gre≈°ke</h2>
    <ul class="pitfall-list">
      <li>Zaboraviti da se deli sa 2 pri brojanju dijagonala iz svakog temena. Bez deljenja, dobili bismo 70 umesto 35 ‚Äî duplo vi≈°e od taƒçnog odgovora.</li>
      <li>Pome≈°ati formulu sa formulom za ukupan broj du≈æi \(\binom{n}{2}\), koja daje 45. Odgovor 45 bi bio taƒçan samo ako bismo i stranice smatrali dijagonalama, ≈°to nije sluƒçaj.</li>
    </ul>
  </div>

  <!-- CHALLENGE -->
  <div class="card challenge-box">
    <h2>Dodatni izazov</h2>
    <p>Koliko taƒçaka preseka imaju dijagonale pravilnog desetougla unutar mnogougla (ne raƒçunajuƒái temena), pod pretpostavkom da se nikoje tri dijagonale ne seku u istoj taƒçki?</p>
    <details>
      <summary>Pomoƒá</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        Svaka taƒçka preseka dva dijagonale unutar mnogougla je jednoznaƒçno odreƒëena izborom 4 temena (jer svaki izbor od 4 temena daje taƒçno jednu taƒçku preseka dijagonala). Dakle, broj preseƒçnih taƒçaka je \(\binom{10}{4} = 210\). Ovo va≈æi za pravilne mnogouglove jer se kod njih nikoje tri dijagonale ne seku u jednoj taƒçki (osim za neke specijalne sluƒçajeve, ali za desetougao ovo u principu va≈æi).
      </p>
    </details>
  </div>

</div>

<script>
(() => {
  // Step click highlighting
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.toggle('active');
    });
  });

  // Canvas diagram
  const canvas = document.getElementById('diagram');
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;
  const cx = W / 2;
  const cy = H / 2;
  const R = Math.min(W, H) * 0.38;
  const n = 10;

  // Compute vertices of regular decagon
  const vertices = [];
  for (let i = 0; i < n; i++) {
    const angle = -Math.PI / 2 + (2 * Math.PI * i) / n;
    vertices.push({
      x: cx + R * Math.cos(angle),
      y: cy + R * Math.sin(angle)
    });
  }

  // State
  let mode = 'all'; // 'all' or 'vertex'
  let selectedVertex = 0;

  function isAdjacent(i, j) {
    const diff = Math.abs(i - j);
    return diff === 1 || diff === n - 1;
  }

  function drawDiagram() {
    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Draw subtle circle
    ctx.strokeStyle = 'rgba(96,165,250,0.12)';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.arc(cx, cy, R, 0, 2 * Math.PI);
    ctx.stroke();

    // Draw diagonals
    if (mode === 'all') {
      // Draw all diagonals
      let diagCount = 0;
      for (let i = 0; i < n; i++) {
        for (let j = i + 1; j < n; j++) {
          if (!isAdjacent(i, j)) {
            diagCount++;
            const hue = (diagCount / 35) * 0.6;
            const r = Math.floor(96 + 70 * Math.sin(hue * Math.PI * 2));
            const g = Math.floor(140 + 80 * Math.sin(hue * Math.PI * 2 + 2));
            const b = Math.floor(200 + 55 * Math.sin(hue * Math.PI * 2 + 4));
            ctx.strokeStyle = 'rgba(' + r + ',' + g + ',' + b + ',0.35)';
            ctx.lineWidth = 1.2;
            ctx.beginPath();
            ctx.moveTo(vertices[i].x, vertices[i].y);
            ctx.lineTo(vertices[j].x, vertices[j].y);
            ctx.stroke();
          }
        }
      }
    } else {
      // Draw diagonals from selected vertex only
      const sv = selectedVertex;

      // Draw faded other diagonals first
      for (let i = 0; i < n; i++) {
        for (let j = i + 1; j < n; j++) {
          if (!isAdjacent(i, j) && i !== sv && j !== sv) {
            ctx.strokeStyle = 'rgba(100,116,139,0.08)';
            ctx.lineWidth = 0.8;
            ctx.beginPath();
            ctx.moveTo(vertices[i].x, vertices[i].y);
            ctx.lineTo(vertices[j].x, vertices[j].y);
            ctx.stroke();
          }
        }
      }

      // Draw highlighted diagonals from selected vertex
      let diagFromVertex = 0;
      for (let j = 0; j < n; j++) {
        if (j !== sv && !isAdjacent(sv, j)) {
          diagFromVertex++;
          const colors = ['#60a5fa', '#a78bfa', '#f472b6', '#34d399', '#38bdf8', '#c084fc', '#fb7185'];
          ctx.strokeStyle = colors[(diagFromVertex - 1) % colors.length];
          ctx.lineWidth = 2.5;
          ctx.shadowColor = colors[(diagFromVertex - 1) % colors.length];
          ctx.shadowBlur = 6;
          ctx.beginPath();
          ctx.moveTo(vertices[sv].x, vertices[sv].y);
          ctx.lineTo(vertices[j].x, vertices[j].y);
          ctx.stroke();
          ctx.shadowBlur = 0;
        }
      }

      // Draw sides from selected vertex (dashed, to show they're NOT diagonals)
      for (let j = 0; j < n; j++) {
        if (isAdjacent(sv, j)) {
          ctx.strokeStyle = 'rgba(148,163,184,0.35)';
          ctx.lineWidth = 1.5;
          ctx.setLineDash([5, 5]);
          ctx.beginPath();
          ctx.moveTo(vertices[sv].x, vertices[sv].y);
          ctx.lineTo(vertices[j].x, vertices[j].y);
          ctx.stroke();
          ctx.setLineDash([]);
        }
      }
    }

    // Draw polygon sides
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(vertices[0].x, vertices[0].y);
    for (let i = 1; i < n; i++) {
      ctx.lineTo(vertices[i].x, vertices[i].y);
    }
    ctx.closePath();
    ctx.stroke();

    // Draw vertices
    for (let i = 0; i < n; i++) {
      const isSelected = (mode === 'vertex' && i === selectedVertex);
      const isHighlighted = isSelected;

      // Glow
      if (isHighlighted) {
        ctx.beginPath();
        ctx.arc(vertices[i].x, vertices[i].y, 14, 0, 2 * Math.PI);
        ctx.fillStyle = 'rgba(74,222,128,0.3)';
        ctx.fill();
      }

      // Point
      ctx.beginPath();
      ctx.arc(vertices[i].x, vertices[i].y, isHighlighted ? 7 : 5, 0, 2 * Math.PI);
      ctx.fillStyle = isHighlighted ? '#4ade80' : '#e2e8f0';
      ctx.fill();
      ctx.strokeStyle = isHighlighted ? '#166534' : '#475569';
      ctx.lineWidth = 1.5;
      ctx.stroke();

      // Label
      const labelR = R + 22;
      const angle = -Math.PI / 2 + (2 * Math.PI * i) / n;
      const lx = cx + labelR * Math.cos(angle);
      const ly = cy + labelR * Math.sin(angle);
      ctx.fillStyle = isHighlighted ? '#4ade80' : '#94a3b8';
      ctx.font = (isHighlighted ? 'bold ' : '') + '14px Segoe UI, sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText('V' + (i + 1), lx, ly);
    }

    // Info text at top
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';

    if (mode === 'all') {
      ctx.fillText('Pravilni desetougao sa svih 35 dijagonala', cx, 14);
    } else {
      ctx.fillStyle = '#4ade80';
      ctx.fillText('Iz temena V' + (selectedVertex + 1) + ' polazi 7 dijagonala', cx, 14);
      ctx.fillStyle = '#64748b';
      ctx.fillText('(isprekidane linije = stranice, nisu dijagonale)', cx, 32);
    }

    // Diagonal count indicator
    if (mode === 'all') {
      ctx.fillStyle = 'rgba(30,41,59,0.85)';
      const boxW = 180;
      const boxH = 50;
      const boxX = cx - boxW / 2;
      const boxY = H - 65;
      ctx.beginPath();
      roundRect(ctx, boxX, boxY, boxW, boxH, 10);
      ctx.fill();
      ctx.strokeStyle = '#334155';
      ctx.lineWidth = 1;
      ctx.beginPath();
      roundRect(ctx, boxX, boxY, boxW, boxH, 10);
      ctx.stroke();

      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 20px Segoe UI, sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText('35 dijagonala', cx, boxY + boxH / 2);
    }
  }

  function roundRect(ctx, x, y, w, h, r) {
    ctx.moveTo(x + r, y);
    ctx.lineTo(x + w - r, y);
    ctx.arcTo(x + w, y, x + w, y + r, r);
    ctx.lineTo(x + w, y + h - r);
    ctx.arcTo(x + w, y + h, x + w - r, y + h, r);
    ctx.lineTo(x + r, y + h);
    ctx.arcTo(x, y + h, x, y + h - r, r);
    ctx.lineTo(x, y + r);
    ctx.arcTo(x, y, x + r, y, r);
  }

  drawDiagram();

  // Toggle controls
  const btnAll = document.getElementById('btn-all');
  const btnVertex = document.getElementById('btn-vertex');
  const vertexControls = document.getElementById('vertex-controls');
  const btnPrev = document.getElementById('btn-prev');
  const btnNext = document.getElementById('btn-next');
  const vertexLabel = document.getElementById('vertex-label');

  function updateVertexLabel() {
    vertexLabel.textContent = 'Teme ' + (selectedVertex + 1) + ': 7 dijagonala';
  }

  btnAll.addEventListener('click', function() {
    mode = 'all';
    btnAll.classList.add('active');
    btnVertex.classList.remove('active');
    vertexControls.style.display = 'none';
    drawDiagram();
  });

  btnVertex.addEventListener('click', function() {
    mode = 'vertex';
    btnVertex.classList.add('active');
    btnAll.classList.remove('active');
    vertexControls.style.display = 'flex';
    updateVertexLabel();
    drawDiagram();
  });

  btnPrev.addEventListener('click', function() {
    selectedVertex = (selectedVertex - 1 + n) % n;
    updateVertexLabel();
    drawDiagram();
  });

  btnNext.addEventListener('click', function() {
    selectedVertex = (selectedVertex + 1) % n;
    updateVertexLabel();
    drawDiagram();
  });

  // Touch/click on canvas to select nearest vertex (in vertex mode)
  function getCanvasCoords(e) {
    const rect = canvas.getBoundingClientRect();
    const scaleX = W / rect.width;
    const scaleY = H / rect.height;
    let clientX, clientY;
    if (e.touches && e.touches.length > 0) {
      clientX = e.touches[0].clientX;
      clientY = e.touches[0].clientY;
    } else {
      clientX = e.clientX;
      clientY = e.clientY;
    }
    return {
      x: (clientX - rect.left) * scaleX,
      y: (clientY - rect.top) * scaleY
    };
  }

  function handleCanvasClick(e) {
    if (mode !== 'vertex') {
      mode = 'vertex';
      btnVertex.classList.add('active');
      btnAll.classList.remove('active');
      vertexControls.style.display = 'flex';
    }
    const pos = getCanvasCoords(e);
    let minDist = Infinity;
    let closest = 0;
    for (let i = 0; i < n; i++) {
      const dx = pos.x - vertices[i].x;
      const dy = pos.y - vertices[i].y;
      const dist = dx * dx + dy * dy;
      if (dist < minDist) {
        minDist = dist;
        closest = i;
      }
    }
    if (minDist < 2500) { // within ~50px
      selectedVertex = closest;
      updateVertexLabel();
      drawDiagram();
    }
  }

  canvas.addEventListener('click', handleCanvasClick);
  canvas.addEventListener('touchstart', function(e) {
    e.preventDefault();
    handleCanvasClick(e);
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Ukupan broj dijagonala pravilnog desetougla",
  "subject": "math",
  "unit": "combinatorics",
  "topic_tags": ["dijagonale", "pravilni mnogougao", "kombinatorika", "binomni koeficijent", "desetougao"]
}
BRAINSPARK_META-->