<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Eksponencijalna jednačina sa stepenima dvojke</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM:
Rešenje jednačine 2^(16^x) = 16^(2^x) jeste:
(A) 1/2    (B) 2/3    (C) 3/4    (D) 4/5    (E) 5/6

SOLUTION:

Step 1: Express everything in base 2.
  16 = 2^4

Step 2: Transform left side.
  2^(16^x) = 2^((2^4)^x) = 2^(2^(4x))

Step 3: Transform right side.
  16^(2^x) = (2^4)^(2^x) = 2^(4 * 2^x) = 2^(2^2 * 2^x) = 2^(2^(x+2))

Step 4: Since bases are equal (both base 2), equate exponents.
  2^(4x) = 2^(x+2)

Step 5: Since the bases are equal (both base 2), equate exponents again.
  4x = x + 2

Step 6: Solve for x.
  4x - x = 2
  3x = 2
  x = 2/3

VERIFICATION:
Left side: 2^(16^(2/3)) = 2^((2^4)^(2/3)) = 2^(2^(8/3))
Right side: 16^(2^(2/3)) = (2^4)^(2^(2/3)) = 2^(4 * 2^(2/3)) = 2^(2^2 * 2^(2/3)) = 2^(2^(2 + 2/3)) = 2^(2^(8/3))
Left = Right. Confirmed!

Answer: (B) 2/3
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
  transition: border-color 0.2s;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 10px 0;
  user-select: none;
}

details summary:hover {
  color: #93bbfc;
}

details[open] summary {
  margin-bottom: 10px;
}

.theory-content ul {
  list-style: none;
  padding-left: 0;
}

.theory-content li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #cbd5e1;
}

.theory-content li:last-child {
  border-bottom: none;
}

.canvas-card {
  text-align: center;
}

canvas {
  border-radius: 10px;
  width: 100%;
  max-width: 650px;
  touch-action: none;
}

.drag-hint {
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

.step-container {
  margin-bottom: 18px;
  padding: 18px;
  padding-left: 24px;
  background: rgba(30,41,59,0.5);
  border-left: 3px solid #334155;
  border-radius: 0 10px 10px 0;
  cursor: pointer;
  transition: border-color 0.25s, background 0.25s;
}

.step-container:hover,
.step-container.active {
  border-left-color: #4ade80;
  background: rgba(30,41,59,0.9);
}

.step-badge {
  display: inline-block;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  font-weight: 700;
  font-size: 0.8rem;
  padding: 3px 10px;
  border-radius: 20px;
  margin-bottom: 8px;
}

.step-title {
  font-size: 1.1rem;
  font-weight: 600;
  color: #e2e8f0;
  margin-bottom: 8px;
}

.step-text {
  color: #cbd5e1;
  font-size: 0.97rem;
}

.checkpoint {
  background: rgba(167,139,250,0.08);
  border: 1px solid rgba(167,139,250,0.2);
  border-radius: 8px;
  padding: 12px 16px;
  margin: 15px 0;
}

.checkpoint summary {
  color: #a78bfa;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.25);
  border-radius: 14px;
  padding: 22px;
  margin-bottom: 24px;
}

.insight-box h3 {
  color: #a78bfa;
  margin-bottom: 10px;
}

.final-answer {
  text-align: center;
  padding: 30px;
  border: 2px solid rgba(74,222,128,0.3);
  background: rgba(74,222,128,0.06);
}

.final-answer .answer-value {
  font-size: 2rem;
  font-weight: 700;
  color: #4ade80;
  margin: 16px 0;
}

.final-answer .answer-label {
  color: #94a3b8;
  font-size: 0.95rem;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 12px;
  margin: 20px 0;
}

.option-box {
  padding: 12px 22px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: rgba(30,41,59,0.6);
  color: #94a3b8;
  font-size: 1.05rem;
  font-weight: 600;
  transition: all 0.3s;
}

.option-box.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.12);
  color: #4ade80;
}

.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 0;
  padding-left: 16px;
  position: relative;
  color: #cbd5e1;
}

.pitfall-list li::before {
  content: '\26A0';
  position: absolute;
  left: 0;
}

.challenge-box {
  border-left: 3px solid #f472b6;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 10px;
}

.tower-illustration {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  justify-content: center;
  margin: 16px 0;
}

.tower-card {
  background: rgba(15,23,42,0.6);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 16px 24px;
  text-align: center;
  min-width: 200px;
}

.tower-card .tower-label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 8px;
}

.tower-card .tower-expr {
  font-size: 1.15rem;
  color: #e2e8f0;
}

@media (max-width: 700px) {
  h1 { font-size: 1.5rem; }
  .container { padding: 10px; }
  .card { padding: 16px; }
  .given-grid { flex-direction: column; }
  .options-row { flex-direction: column; align-items: center; }
  .tower-illustration { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Eksponencijalna jednačina sa stepenima dvojke</h1>
  <p class="subtitle">Eksponencijalne jednačine, stepenovanje, svođenje na istu osnovu</p>

  <!-- PROBLEM STATEMENT -->
  <div class="card problem-statement">
    <h2>Zadatak</h2>
    <p>Rešenje jednačine:</p>
    <div class="math-box">
      \[ 2^{16^x} = 16^{2^x} \]
    </div>
    <p>jeste:</p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(\dfrac{1}{2}\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(\dfrac{2}{3}\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(\dfrac{3}{4}\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(\dfrac{4}{5}\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(\dfrac{5}{6}\)</div>
      </div>
    </div>
  </div>

  <!-- PLAN -->
  <div class="card plan-card">
    <h2>Plan rešavanja</h2>
    <p>Ključna ideja je da i broj \(16\) i broj \(2\) možemo izraziti kao stepene dvojke: \(16 = 2^4\). Svešćemo obe strane jednačine na oblik \(2^{\text{nešto}}\), pa ćemo izjednačiti eksponente. To će nas dovesti do proste linearne jednačine po \(x\).</p>
  </div>

  <!-- THEORY -->
  <div class="card">
    <details>
      <summary>Ključne formule i teoreme</summary>
      <div class="theory-content">
        <ul>
          <li><strong>Stepen stepena:</strong> \(\left(a^m\right)^n = a^{m \cdot n}\)</li>
          <li><strong>Stepen proizvoda eksponenata:</strong> \(\left(a^m\right)^x = a^{m \cdot x}\), gde je \(a > 0\)</li>
          <li><strong>Jednakost eksponenata:</strong> Ako je \(a^p = a^q\) i \(a > 0,\; a \neq 1\), tada \(p = q\)</li>
          <li><strong>Sabiranje eksponenata:</strong> \(a^m \cdot a^n = a^{m+n}\)</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- VISUAL AID -->
  <div class="card canvas-card">
    <h2>Vizuelni prikaz transformacije</h2>
    <p style="color:#94a3b8; margin-bottom:14px;">Dijagram prikazuje kako se obe strane jednačine svode na isti oblik. Koristite dugme za animaciju koraka.</p>
    <canvas id="diagram" width="650" height="420"></canvas>
    <p class="drag-hint">Kliknite dugme ispod za prikaz koraka transformacije</p>
    <div style="margin-top: 14px;">
      <button id="animBtn" style="background: linear-gradient(135deg, #60a5fa, #a78bfa); color: #0f172a; border: none; padding: 10px 24px; border-radius: 8px; font-weight: 700; font-size: 0.95rem; cursor: pointer;">Sledeći korak</button>
      <button id="resetBtn" style="background: #334155; color: #94a3b8; border: 1px solid #475569; padding: 10px 18px; border-radius: 8px; font-weight: 600; font-size: 0.95rem; cursor: pointer; margin-left: 8px;">Ponovo</button>
    </div>
  </div>

  <!-- STEP-BY-STEP -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container" id="step1">
      <span class="step-badge">Korak 1</span>
      <div class="step-title">Zapišimo \(16\) kao stepen broja \(2\)</div>
      <div class="step-text">
        <p>Uočavamo da je \(16\) stepen dvojke:</p>
        <div class="math-box">
          \[ 16 = 2^4 \]
        </div>
        <p>Ovo nam omogućava da obe strane jednačine izrazimo samo pomoću osnove \(2\).</p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container" id="step2">
      <span class="step-badge">Korak 2</span>
      <div class="step-title">Transformacija leve strane</div>
      <div class="step-text">
        <p>Leva strana jednačine je \(2^{16^x}\). Zamenimo \(16\) sa \(2^4\):</p>
        <div class="math-box">
          \[ 2^{16^x} = 2^{(2^4)^x} \]
        </div>
        <p>Primenimo pravilo <span class="highlight">\((a^m)^n = a^{mn}\)</span> na eksponent:</p>
        <div class="math-box">
          \[ (2^4)^x = 2^{4x} \]
        </div>
        <p>Dakle, leva strana postaje:</p>
        <div class="math-box">
          \[ \text{Leva strana} = 2^{2^{4x}} \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri se: Šta je \((2^4)^3\)?</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        \((2^4)^3 = 2^{4 \cdot 3} = 2^{12} = 4096\). Isto kao \(16^3 = 4096\). Potvrda da pravilo \((a^m)^n = a^{mn}\) radi ispravno.
      </p>
    </details>

    <!-- Step 3 -->
    <div class="step-container" id="step3">
      <span class="step-badge">Korak 3</span>
      <div class="step-title">Transformacija desne strane</div>
      <div class="step-text">
        <p>Desna strana jednačine je \(16^{2^x}\). Zamenimo \(16\) sa \(2^4\):</p>
        <div class="math-box">
          \[ 16^{2^x} = (2^4)^{2^x} \]
        </div>
        <p>Ponovo primenimo pravilo <span class="highlight">\((a^m)^n = a^{mn}\)</span>:</p>
        <div class="math-box">
          \[ (2^4)^{2^x} = 2^{4 \cdot 2^x} \]
        </div>
        <p>Primetimo da je \(4 = 2^2\), pa:</p>
        <div class="math-box">
          \[ 4 \cdot 2^x = 2^2 \cdot 2^x = 2^{x+2} \]
        </div>
        <p>Dakle, desna strana postaje:</p>
        <div class="math-box">
          \[ \text{Desna strana} = 2^{2^{x+2}} \]
        </div>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step-container" id="step4">
      <span class="step-badge">Korak 4</span>
      <div class="step-title">Izjednačavanje eksponenata (prvi put)</div>
      <div class="step-text">
        <p>Sada imamo jednačinu u obliku:</p>
        <div class="math-box">
          \[ 2^{2^{4x}} = 2^{2^{x+2}} \]
        </div>
        <p>Pošto je osnova \(2 > 0\) i \(2 \neq 1\), važi: ako \(2^A = 2^B\), onda \(A = B\). Izjednačavamo eksponente:</p>
        <div class="math-box">
          \[ 2^{4x} = 2^{x+2} \]
        </div>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step-container" id="step5">
      <span class="step-badge">Korak 5</span>
      <div class="step-title">Izjednačavanje eksponenata (drugi put)</div>
      <div class="step-text">
        <p>Ponovo imamo jednakost dve potencije sa osnovom \(2\). Izjednačavamo eksponente:</p>
        <div class="math-box">
          \[ 4x = x + 2 \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri se: Zašto smemo dva puta redom izjednačiti eksponente?</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        Funkcija \(f(t) = 2^t\) je strogo rastuća (eksponencijalna funkcija sa osnovom > 1). Zato iz \(2^A = 2^B\) nužno sledi \(A = B\). Ovaj korak se može primeniti koliko god puta treba, jer svaki put imamo isti oblik jednakosti.
      </p>
    </details>

    <!-- Step 6 -->
    <div class="step-container" id="step6">
      <span class="step-badge">Korak 6</span>
      <div class="step-title">Rešavanje linearne jednačine</div>
      <div class="step-text">
        <p>Rešavamo \(4x = x + 2\):</p>
        <div class="math-box">
          \[ 4x - x = 2 \]
        </div>
        <div class="math-box">
          \[ 3x = 2 \]
        </div>
        <div class="math-box">
          \[ \boxed{x = \frac{2}{3}} \]
        </div>
      </div>
    </div>

    <!-- Step 7 -->
    <div class="step-container" id="step7">
      <span class="step-badge">Korak 7</span>
      <div class="step-title">Provera rešenja</div>
      <div class="step-text">
        <p>Uvrštavamo \(x = \frac{2}{3}\) u polaznu jednačinu:</p>
        <p><strong>Leva strana:</strong></p>
        <div class="math-box">
          \[ 2^{16^{2/3}} = 2^{(2^4)^{2/3}} = 2^{2^{4 \cdot 2/3}} = 2^{2^{8/3}} \]
        </div>
        <p><strong>Desna strana:</strong></p>
        <div class="math-box">
          \[ 16^{2^{2/3}} = (2^4)^{2^{2/3}} = 2^{4 \cdot 2^{2/3}} = 2^{2^2 \cdot 2^{2/3}} = 2^{2^{2+2/3}} = 2^{2^{8/3}} \]
        </div>
        <p style="color:#4ade80; font-weight:600;">Leva strana = Desna strana. Rešenje je tačno!</p>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details class="checkpoint">
      <summary>Proveri se: Koliko iznosi \(16^{2/3}\)?</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        \(16^{2/3} = (2^4)^{2/3} = 2^{8/3} = 2^{2{,}\overline{6}} \approx 6{,}35\). Ovo je eksponent u koji se ugradi leva strana.
      </p>
    </details>
  </div>

  <!-- KEY INSIGHT -->
  <div class="insight-box">
    <h3>Ključni uvid</h3>
    <p>Kada se u eksponencijalnoj jednačini pojave „kule stepena" (stepen na stepen na stepen...), ključ je svesti sve na <strong>istu osnovu</strong>. Ovde je osnova \(2\), a \(16 = 2^4\). Nakon toga, jednakost eksponencijalnih funkcija sa istom osnovom nam omogućava da „skinemo" slojeve stepenovanja jedan po jedan, dok ne dođemo do obične linearne jednačine.</p>
    <div class="math-box" style="text-align:center; font-size:1.1rem;">
      \[ 2^{2^{4x}} = 2^{2^{x+2}} \;\;\Longrightarrow\;\; 2^{4x} = 2^{x+2} \;\;\Longrightarrow\;\; 4x = x+2 \;\;\Longrightarrow\;\; x = \frac{2}{3} \]
    </div>
  </div>

  <!-- FINAL ANSWER -->
  <div class="card final-answer">
    <h2>Konačan odgovor</h2>
    <p class="answer-label">Rešenje jednačine \(2^{16^x} = 16^{2^x}\) je:</p>
    <div class="answer-value">\(\displaystyle x = \frac{2}{3}\)</div>
    <div class="options-row">
      <div class="option-box">(A) \(\frac{1}{2}\)</div>
      <div class="option-box correct">(B) \(\frac{2}{3}\)</div>
      <div class="option-box">(C) \(\frac{3}{4}\)</div>
      <div class="option-box">(D) \(\frac{4}{5}\)</div>
      <div class="option-box">(E) \(\frac{5}{6}\)</div>
    </div>
    <p class="verification-note">Provera: Za \(x = \frac{2}{3}\), obe strane jednačine daju \(2^{2^{8/3}}\), čime je potvrđena tačnost rešenja.</p>
  </div>

  <!-- PITFALLS -->
  <div class="card">
    <h2>Česte greške</h2>
    <ul class="pitfall-list">
      <li>Mešanje redosleda stepenovanja: \(2^{(16^x)}\) nije isto što i \((2^{16})^x\). „Kula" se čita odozgo nadole — prvo se izračuna gornji stepen, pa zatim donji. Pravilo \((a^m)^n = a^{mn}\) važi samo kada je ceo izraz u zagradi.</li>
      <li>Greška pri transformaciji desne strane: \(4 \cdot 2^x\) treba prepoznati kao \(2^2 \cdot 2^x = 2^{x+2}\), a NE kao \(2^{4x}\). Množenje stepena sa istom osnovom znači sabiranje eksponenata, ne množenje!</li>
    </ul>
  </div>

  <!-- CHALLENGE -->
  <div class="card challenge-box">
    <h2>Dodatni izazov</h2>
    <p>Rešite jednačinu \(3^{81^x} = 81^{3^x}\). Da li vidite sličnost sa polaznim zadatkom?</p>
    <details>
      <summary>Pomoć</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        Primetite da je \(81 = 3^4\), pa je struktura potpuno analogna. Leva strana postaje \(3^{3^{4x}}\), a desna \(3^{3^{x+4}}\). Izjednačavanjem eksponenata dva puta dobijate \(4x = x + 4\), odakle je \(x = \frac{4}{3}\).
      </p>
    </details>
  </div>

</div>

<script>
(() => {
  // Step click highlighting
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.toggle('active');
    });
  });

  // Canvas visualization
  const canvas = document.getElementById('diagram');
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  let currentPhase = 0;
  const maxPhase = 4;

  const animBtn = document.getElementById('animBtn');
  const resetBtn = document.getElementById('resetBtn');

  animBtn.addEventListener('click', () => {
    if (currentPhase < maxPhase) {
      currentPhase++;
      drawDiagram();
    }
  });

  resetBtn.addEventListener('click', () => {
    currentPhase = 0;
    drawDiagram();
  });

  function roundRect(x, y, w, h, r) {
    ctx.beginPath();
    ctx.moveTo(x + r, y);
    ctx.lineTo(x + w - r, y);
    ctx.arcTo(x + w, y, x + w, y + r, r);
    ctx.lineTo(x + w, y + h - r);
    ctx.arcTo(x + w, y + h, x + w - r, y + h, r);
    ctx.lineTo(x + r, y + h);
    ctx.arcTo(x, y + h, x, y + h - r, r);
    ctx.lineTo(x, y + r);
    ctx.arcTo(x, y, x + r, y, r);
    ctx.closePath();
  }

  function drawBox(x, y, w, h, bgColor, borderColor, text, textColor, fontSize) {
    roundRect(x, y, w, h, 8);
    ctx.fillStyle = bgColor;
    ctx.fill();
    ctx.strokeStyle = borderColor;
    ctx.lineWidth = 1.5;
    ctx.stroke();

    ctx.fillStyle = textColor || '#e2e8f0';
    ctx.font = (fontSize || 16) + 'px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';

    const lines = text.split('\n');
    const lineH = (fontSize || 16) + 6;
    const totalH = lines.length * lineH;
    const startY = y + h / 2 - totalH / 2 + lineH / 2;
    lines.forEach((line, i) => {
      ctx.fillText(line, x + w / 2, startY + i * lineH);
    });
  }

  function drawArrow(x1, y1, x2, y2, color) {
    ctx.strokeStyle = color || '#60a5fa';
    ctx.lineWidth = 2;
    ctx.setLineDash([]);
    ctx.beginPath();
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.stroke();

    const angle = Math.atan2(y2 - y1, x2 - x1);
    const headLen = 10;
    ctx.beginPath();
    ctx.moveTo(x2, y2);
    ctx.lineTo(x2 - headLen * Math.cos(angle - 0.4), y2 - headLen * Math.sin(angle - 0.4));
    ctx.moveTo(x2, y2);
    ctx.lineTo(x2 - headLen * Math.cos(angle + 0.4), y2 - headLen * Math.sin(angle + 0.4));
    ctx.stroke();
  }

  function drawDiagram() {
    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Title
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';

    const phaseLabels = [
      'Polazna jednačina',
      'Korak 1: Zamenimo 16 = 2\u2074',
      'Korak 2: Primenimo (a\u1D50)\u207F = a\u1D50\u207F',
      'Korak 3: Izjednačimo eksponente',
      'Korak 4: Rešenje!'
    ];
    ctx.fillText(phaseLabels[currentPhase], W / 2, 12);

    // Phase indicator dots
    for (let i = 0; i <= maxPhase; i++) {
      ctx.beginPath();
      ctx.arc(W / 2 - (maxPhase * 10) + i * 20, H - 18, 5, 0, 2 * Math.PI);
      ctx.fillStyle = i <= currentPhase ? '#60a5fa' : '#334155';
      ctx.fill();
    }

    const leftX = 60;
    const rightX = 350;
    const midX = W / 2;

    if (currentPhase === 0) {
      // Original equation
      drawBox(leftX, 80, 230, 60, 'rgba(96,165,250,0.1)', '#60a5fa', '2^(16^x)', '#60a5fa', 22);
      ctx.fillStyle = '#e2e8f0';
      ctx.font = '24px Segoe UI, sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText('=', midX, 110);
      drawBox(rightX, 80, 230, 60, 'rgba(167,139,250,0.1)', '#a78bfa', '16^(2^x)', '#a78bfa', 22);

      // Hint
      ctx.fillStyle = '#4ade80';
      ctx.font = '15px Segoe UI, sans-serif';
      ctx.fillText('16 = 2\u2074', midX, 190);
      drawBox(midX - 120, 210, 240, 45, 'rgba(52,211,153,0.08)', 'rgba(52,211,153,0.3)', 'Sve svedimo na osnovu 2!', '#4ade80', 15);
    }

    if (currentPhase === 1) {
      // Replace 16 with 2^4
      drawBox(leftX, 60, 250, 50, 'rgba(96,165,250,0.1)', '#60a5fa', '2^((2\u2074)^x)', '#60a5fa', 20);
      ctx.fillStyle = '#e2e8f0';
      ctx.font = '24px Segoe UI, sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText('=', midX, 85);
      drawBox(rightX, 60, 250, 50, 'rgba(167,139,250,0.1)', '#a78bfa', '(2\u2074)^(2^x)', '#a78bfa', 20);

      // Show substitution
      drawArrow(leftX + 125, 130, leftX + 125, 160, '#4ade80');
      drawArrow(rightX + 125, 130, rightX + 125, 160, '#4ade80');

      ctx.fillStyle = '#94a3b8';
      ctx.font = '13px Segoe UI, sans-serif';
      ctx.fillText('(2\u2074)^x = 2^(4x)', leftX + 125, 145);
      ctx.fillText('(2\u2074)^(2^x) = 2^(4\u00B72^x)', rightX + 125, 145);

      drawBox(leftX, 170, 250, 50, 'rgba(96,165,250,0.15)', '#60a5fa', '2^(2^(4x))', '#60a5fa', 20);
      ctx.fillStyle = '#e2e8f0';
      ctx.font = '24px Segoe UI, sans-serif';
      ctx.fillText('=', midX, 195);
      drawBox(rightX, 170, 250, 50, 'rgba(167,139,250,0.15)', '#a78bfa', '2^(4\u00B72^x)', '#a78bfa', 20);

      // Note about 4*2^x
      drawArrow(rightX + 125, 240, rightX + 125, 270, '#f472b6');
      ctx.fillStyle = '#f472b6';
      ctx.font = '13px Segoe UI, sans-serif';
      ctx.fillText('4\u00B72^x = 2\u00B2\u00B72^x = 2^(x+2)', rightX + 125, 255);

      drawBox(rightX, 280, 250, 50, 'rgba(167,139,250,0.2)', '#a78bfa', '2^(2^(x+2))', '#a78bfa', 20);
    }

    if (currentPhase === 2) {
      // Both sides in canonical form
      drawBox(leftX + 20, 60, 220, 55, 'rgba(96,165,250,0.15)', '#60a5fa', '2^(2^(4x))', '#60a5fa', 22);
      ctx.fillStyle = '#e2e8f0';
      ctx.font = '28px Segoe UI, sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText('=', midX, 87);
      drawBox(rightX + 10, 60, 220, 55, 'rgba(167,139,250,0.15)', '#a78bfa', '2^(2^(x+2))', '#a78bfa', 22);

      // Same base highlight
      drawBox(midX - 130, 150, 260, 40, 'rgba(52,211,153,0.08)', 'rgba(52,211,153,0.3)', 'Ista osnova 2 \u2192 jednači eksponente', '#4ade80', 14);

      drawArrow(midX, 200, midX, 230, '#4ade80');

      // Exponents equal
      drawBox(midX - 110, 240, 220, 50, 'rgba(52,211,153,0.12)', 'rgba(52,211,153,0.4)', '2^(4x) = 2^(x+2)', '#4ade80', 20);

      ctx.fillStyle = '#94a3b8';
      ctx.font = '13px Segoe UI, sans-serif';
      ctx.fillText('Ponovo ista osnova \u2192 jednači eksponente', midX, 315);

      drawArrow(midX, 325, midX, 345, '#4ade80');
      drawBox(midX - 80, 350, 160, 45, 'rgba(52,211,153,0.15)', 'rgba(52,211,153,0.5)', '4x = x + 2', '#4ade80', 20);
    }

    if (currentPhase === 3) {
      // Linear equation solving
      ctx.fillStyle = '#94a3b8';
      ctx.font = '14px Segoe UI, sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText('Linearna jednačina:', midX, 60);

      drawBox(midX - 100, 75, 200, 50, 'rgba(96,165,250,0.1)', '#60a5fa', '4x = x + 2', '#60a5fa', 22);

      drawArrow(midX, 140, midX, 165, '#94a3b8');
      ctx.fillStyle = '#94a3b8';
      ctx.font = '13px Segoe UI, sans-serif';
      ctx.fillText('oduzmi x sa obe strane', midX + 90, 153);

      drawBox(midX - 80, 175, 160, 45, 'rgba(96,165,250,0.12)', '#60a5fa', '3x = 2', '#60a5fa', 22);

      drawArrow(midX, 235, midX, 260, '#94a3b8');
      ctx.fillStyle = '#94a3b8';
      ctx.font = '13px Segoe UI, sans-serif';
      ctx.fillText('podeli sa 3', midX + 70, 248);

      drawBox(midX - 90, 270, 180, 55, 'rgba(74,222,128,0.12)', 'rgba(74,222,128,0.5)', 'x = 2/3', '#4ade80', 26);
    }

    if (currentPhase === 4) {
      // Final answer with verification
      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 28px Segoe UI, sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText('x = 2/3', midX, 80);

      // Verification
      ctx.fillStyle = '#94a3b8';
      ctx.font = '14px Segoe UI, sans-serif';
      ctx.fillText('Provera:', midX, 130);

      drawBox(leftX - 20, 155, 280, 45, 'rgba(96,165,250,0.1)', '#60a5fa', 'Leva: 2^(16^(2/3))', '#60a5fa', 16);
      drawBox(rightX + 20, 155, 280, 45, 'rgba(167,139,250,0.1)', '#a78bfa', 'Desna: 16^(2^(2/3))', '#a78bfa', 16);

      drawArrow(leftX + 120, 215, leftX + 120, 245, '#60a5fa');
      drawArrow(rightX + 160, 215, rightX + 160, 245, '#a78bfa');

      drawBox(leftX - 20, 255, 280, 45, 'rgba(96,165,250,0.15)', '#60a5fa', '= 2^(2^(8/3))', '#60a5fa', 16);
      drawBox(rightX + 20, 255, 280, 45, 'rgba(167,139,250,0.15)', '#a78bfa', '= 2^(2^(8/3))', '#a78bfa', 16);

      // Equal sign
      drawBox(midX - 60, 330, 120, 40, 'rgba(74,222,128,0.15)', 'rgba(74,222,128,0.5)', 'Jednako!', '#4ade80', 18);

      // Draw checkmark
      ctx.strokeStyle = '#4ade80';
      ctx.lineWidth = 3;
      ctx.beginPath();
      ctx.moveTo(midX - 15, 395);
      ctx.lineTo(midX - 3, 408);
      ctx.lineTo(midX + 18, 382);
      ctx.stroke();

      ctx.fillStyle = '#4ade80';
      ctx.font = '14px Segoe UI, sans-serif';
      ctx.fillText('Odgovor: (B) 2/3', midX + 60, 398);
    }

    // Button text update
    if (currentPhase >= maxPhase) {
      animBtn.textContent = 'Završeno';
      animBtn.style.opacity = '0.5';
    } else {
      animBtn.textContent = 'Sledeći korak';
      animBtn.style.opacity = '1';
    }
  }

  drawDiagram();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Eksponencijalna jednačina sa kulama stepena dvojke",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["eksponencijalne jednačine", "stepeni dvojke", "svođenje na istu osnovu", "kule stepena"]
}
BRAINSPARK_META-->