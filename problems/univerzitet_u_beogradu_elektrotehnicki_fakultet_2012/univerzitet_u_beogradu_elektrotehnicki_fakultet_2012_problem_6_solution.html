<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Koeficijent u razvoju binoma</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM:
Koeficijent uz x^27 * y^2 u razvoju binoma (x^3 + sqrt(y))^13 jednak je:
(A) 12    (B) 1516    (C) 1312    (D) 715    (E) 78

SOLUTION:

Step 1: Apply the binomial theorem.
The general term of (a + b)^n is C(n,k) * a^(n-k) * b^k.

Here a = x^3, b = sqrt(y) = y^(1/2), n = 13.

General term T_{k+1} = C(13, k) * (x^3)^(13-k) * (y^(1/2))^k
                     = C(13, k) * x^(3(13-k)) * y^(k/2)

Step 2: Match powers of x and y.
We need:
  - Power of x: 3(13-k) = 27  =>  13-k = 9  =>  k = 4
  - Power of y: k/2 = 2  =>  k = 4

Both conditions give k = 4, confirming it is consistent.

Step 3: Calculate the binomial coefficient C(13, 4).
C(13, 4) = 13! / (4! * 9!)
         = (13 * 12 * 11 * 10) / (4 * 3 * 2 * 1)
         = 17160 / 24
         = 715

Step 4: Verify.
T_5 = C(13,4) * (x^3)^9 * (y^(1/2))^4
    = 715 * x^27 * y^2

The coefficient is 715.

Answer: (D) 715

Cross-check with symmetry: C(13,4) = C(13,9).
C(13,9) = 13!/(9!*4!) = same = 715. Consistent.

Also verify: C(13,0)=1, C(13,1)=13, C(13,2)=78, C(13,3)=286, C(13,4)=715. Yes.
Note: (E) 78 = C(13,2), (A) 12 is not a standard C(13,k) value.
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
  transition: border-color 0.2s;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 10px 0;
  user-select: none;
}

details summary:hover {
  color: #93bbfc;
}

details[open] summary {
  margin-bottom: 10px;
}

.theory-content ul {
  list-style: none;
  padding-left: 0;
}

.theory-content li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #cbd5e1;
}

.theory-content li:last-child {
  border-bottom: none;
}

.canvas-card {
  text-align: center;
}

canvas {
  border-radius: 10px;
  width: 100%;
  max-width: 700px;
  touch-action: none;
}

.step-container {
  margin-bottom: 18px;
  padding: 18px;
  padding-left: 24px;
  background: rgba(30,41,59,0.5);
  border-left: 3px solid #334155;
  border-radius: 0 10px 10px 0;
  cursor: pointer;
  transition: border-color 0.25s, background 0.25s;
}

.step-container:hover,
.step-container.active {
  border-left-color: #4ade80;
  background: rgba(30,41,59,0.9);
}

.step-badge {
  display: inline-block;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  font-weight: 700;
  font-size: 0.8rem;
  padding: 3px 10px;
  border-radius: 20px;
  margin-bottom: 8px;
}

.step-title {
  font-size: 1.1rem;
  font-weight: 600;
  color: #e2e8f0;
  margin-bottom: 8px;
}

.step-text {
  color: #cbd5e1;
  font-size: 0.97rem;
}

.checkpoint {
  background: rgba(167,139,250,0.08);
  border: 1px solid rgba(167,139,250,0.2);
  border-radius: 8px;
  padding: 12px 16px;
  margin: 15px 0;
}

.checkpoint summary {
  color: #a78bfa;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.25);
  border-radius: 14px;
  padding: 22px;
  margin-bottom: 24px;
}

.insight-box h3 {
  color: #a78bfa;
  margin-bottom: 10px;
}

.final-answer {
  text-align: center;
  padding: 30px;
  border: 2px solid rgba(74,222,128,0.3);
  background: rgba(74,222,128,0.06);
}

.final-answer .answer-value {
  font-size: 2rem;
  font-weight: 700;
  color: #4ade80;
  margin: 16px 0;
}

.final-answer .answer-label {
  color: #94a3b8;
  font-size: 0.95rem;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 12px;
  margin: 20px 0;
}

.option-box {
  padding: 12px 22px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: rgba(30,41,59,0.6);
  color: #94a3b8;
  font-size: 1.05rem;
  font-weight: 600;
  transition: all 0.3s;
}

.option-box.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.12);
  color: #4ade80;
}

.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 0;
  padding-left: 16px;
  position: relative;
  color: #cbd5e1;
}

.pitfall-list li::before {
  content: '\26A0';
  position: absolute;
  left: 0;
}

.challenge-box {
  border-left: 3px solid #f472b6;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 10px;
}

.pascal-table {
  border-collapse: collapse;
  margin: 12px auto;
  font-size: 0.92rem;
}

.pascal-table th, .pascal-table td {
  padding: 6px 14px;
  border: 1px solid #334155;
  text-align: center;
  color: #cbd5e1;
}

.pascal-table th {
  background: rgba(96,165,250,0.12);
  color: #60a5fa;
  font-weight: 600;
}

.pascal-table .highlighted-cell {
  background: rgba(74,222,128,0.15);
  color: #4ade80;
  font-weight: 700;
}

@media (max-width: 700px) {
  h1 { font-size: 1.5rem; }
  .container { padding: 10px; }
  .card { padding: 16px; }
  .given-grid { flex-direction: column; }
  .options-row { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Koeficijent u razvoju binoma</h1>
  <p class="subtitle">Binomna teorema, kombinatorika, razvoj binomnog izraza</p>

  <!-- PROBLEM STATEMENT -->
  <div class="card problem-statement">
    <h2>Zadatak</h2>
    <p>Koeficijent uz \(x^{27}y^{2}\) u razvoju binoma \((x^3 + \sqrt{y})^{13}\) jednak je:</p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(12\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(1516\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(1312\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(715\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(78\)</div>
      </div>
    </div>
  </div>

  <!-- PLAN -->
  <div class="card plan-card">
    <h2>Plan re코avanja</h2>
    <p>Primeni캖emo <span class="highlight">binomnu teoremu</span> da zapi코emo op코ti 캜lan razvoja \((x^3 + \sqrt{y})^{13}\), a zatim 캖emo odrediti vrednost parametra \(k\) tako da se dobiju tra쬰ni stepeni \(x^{27}\) i \(y^{2}\). Na kraju 캖emo izra캜unati odgovaraju캖i binomni koeficijent.</p>
  </div>

  <!-- THEORY -->
  <div class="card">
    <details>
      <summary>游늻 Klju캜ne formule i teoreme</summary>
      <div class="theory-content">
        <ul>
          <li><strong>Binomna teorema:</strong> \(\displaystyle (a+b)^n = \sum_{k=0}^{n} \binom{n}{k}\, a^{n-k}\, b^{k}\)</li>
          <li><strong>Binomni koeficijent:</strong> \(\displaystyle \binom{n}{k} = \frac{n!}{k!\,(n-k)!}\)</li>
          <li><strong>Op코ti (k+1)-vi 캜lan:</strong> \(\displaystyle T_{k+1} = \binom{n}{k}\, a^{n-k}\, b^{k}\), gde \(k = 0, 1, 2, \ldots, n\)</li>
          <li><strong>Pravilo stepena:</strong> \((x^m)^p = x^{mp}\) i \((\sqrt{y})^k = y^{k/2}\)</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- VISUAL AID -->
  <div class="card canvas-card">
    <h2>Vizuelni prikaz: Paskalov trougao i binomni koeficijenti</h2>
    <p style="color:#94a3b8; margin-bottom:14px;">Paskalov trougao za \(n = 13\) sa istaknutim koeficijentom \(\binom{13}{4} = 715\). Svaki element je zbir dva elementa iznad njega.</p>
    <canvas id="pascal-canvas" width="700" height="520"></canvas>
    <p style="color:#64748b; font-size:0.85rem; margin-top:8px;">Zeleno je ozna캜en koeficijent \(\binom{13}{4} = 715\) koji tra쬴mo</p>
  </div>

  <!-- STEP-BY-STEP -->
  <div class="card">
    <h2>Re코enje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container" id="step1">
      <span class="step-badge">Korak 1</span>
      <div class="step-title">Zapi코imo op코ti 캜lan razvoja binoma</div>
      <div class="step-text">
        <p>Prema binomnoj teoremi, op코ti 캜lan razvoja \((a+b)^n\) je:</p>
        <div class="math-box">
          \[ T_{k+1} = \binom{n}{k}\, a^{n-k}\, b^{k} \]
        </div>
        <p>U na코em slu캜aju: \(a = x^3\), \(b = \sqrt{y} = y^{1/2}\), \(n = 13\). Zamenom dobijamo:</p>
        <div class="math-box">
          \[ T_{k+1} = \binom{13}{k}\, (x^3)^{13-k}\, (y^{1/2})^{k} \]
        </div>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container" id="step2">
      <span class="step-badge">Korak 2</span>
      <div class="step-title">Pojednostavimo stepene</div>
      <div class="step-text">
        <p>Primenimo pravilo stepena \((x^m)^p = x^{mp}\) na oba faktora:</p>
        <div class="math-box">
          \[ (x^3)^{13-k} = x^{3(13-k)} = x^{39-3k} \]
        </div>
        <div class="math-box">
          \[ (y^{1/2})^{k} = y^{k/2} \]
        </div>
        <p>Dakle, op코ti 캜lan postaje:</p>
        <div class="math-box">
          \[ T_{k+1} = \binom{13}{k}\, x^{39-3k}\, y^{k/2} \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>游 Proveri se: Za \(k = 0\), koji 캜lan razvoja dobijamo?</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        Za \(k = 0\): \(T_1 = \binom{13}{0}\, x^{39}\, y^{0} = x^{39}\). To je prvi 캜lan razvoja, tj. \((x^3)^{13} = x^{39}\). Ta캜no!
      </p>
    </details>

    <!-- Step 3 -->
    <div class="step-container" id="step3">
      <span class="step-badge">Korak 3</span>
      <div class="step-title">Odredimo \(k\) iz uslova za stepen od \(x\)</div>
      <div class="step-text">
        <p>Tra쬴mo 캜lan koji sadr쬴 \(x^{27}\). Izjedna캜avamo eksponent od \(x\) sa 27:</p>
        <div class="math-box">
          \[ 39 - 3k = 27 \]
        </div>
        <p>Re코avamo po \(k\):</p>
        <div class="math-box">
          \[ 3k = 39 - 27 = 12 \quad \Longrightarrow \quad k = 4 \]
        </div>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step-container" id="step4">
      <span class="step-badge">Korak 4</span>
      <div class="step-title">Proverimo uslov za stepen od \(y\)</div>
      <div class="step-text">
        <p>Za \(k = 4\), eksponent od \(y\) je:</p>
        <div class="math-box">
          \[ \frac{k}{2} = \frac{4}{2} = 2 \]
        </div>
        <p>Dakle, stepen od \(y\) je ta캜no \(y^2\), 코to se poklapa sa zadatim. Oba uslova daju istu vrednost <span class="highlight">\(k = 4\)</span>, pa je sve konzistentno.</p>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>游 Proveri se: 맚a bi se desilo ako uslovi za \(x\) i \(y\) daju razli캜ite vrednosti \(k\)?</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        Ako bismo dobili razli캜ite vrednosti \(k\), to bi zna캜ilo da ne postoji nijedan 캜lan u razvoju binoma koji sadr쬴 ta캜no \(x^{27}y^{2}\), pa bi koeficijent bio 0. Ovde se, sre캖om, oba uslova sla쬿.
      </p>
    </details>

    <!-- Step 5 -->
    <div class="step-container" id="step5">
      <span class="step-badge">Korak 5</span>
      <div class="step-title">Izra캜unajmo binomni koeficijent \(\binom{13}{4}\)</div>
      <div class="step-text">
        <p>Koeficijent uz \(x^{27}y^{2}\) je \(\binom{13}{4}\). Izra캜unajmo ga:</p>
        <div class="math-box">
          \[ \binom{13}{4} = \frac{13!}{4!\cdot 9!} = \frac{13 \cdot 12 \cdot 11 \cdot 10}{4 \cdot 3 \cdot 2 \cdot 1} \]
        </div>
        <p>Ra캜unamo brojilac i imenilac posebno:</p>
        <div class="math-box">
          \[ \text{Brojilac: } 13 \cdot 12 = 156 \]
          \[ 156 \cdot 11 = 1716 \]
          \[ 1716 \cdot 10 = 17160 \]
        </div>
        <div class="math-box">
          \[ \text{Imenilac: } 4! = 4 \cdot 3 \cdot 2 \cdot 1 = 24 \]
        </div>
        <p>Kona캜no:</p>
        <div class="math-box">
          \[ \binom{13}{4} = \frac{17160}{24} = 715 \]
        </div>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step-container" id="step6">
      <span class="step-badge">Korak 6</span>
      <div class="step-title">Zapi코imo tra쬰ni 캜lan</div>
      <div class="step-text">
        <p>Peti 캜lan razvoja (\(k = 4\), tj. \(T_5\)) glasi:</p>
        <div class="math-box">
          \[ T_5 = \binom{13}{4}\, x^{27}\, y^{2} = 715\, x^{27}\, y^{2} \]
        </div>
        <p>Dakle, koeficijent uz \(x^{27}y^{2}\) je <span class="highlight">\(715\)</span>.</p>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details class="checkpoint">
      <summary>游 Proveri se: Kako mo쬰mo brzo proveriti da je \(\binom{13}{4} = 715\)?</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        Koristimo simetriju: \(\binom{13}{4} = \binom{13}{9}\). Tako캠e, mo쬰mo postepeno skra캖ivati:
        \(\frac{13 \cdot 12}{4 \cdot 3} = \frac{156}{12} = 13\), zatim \(13 \cdot \frac{11}{2} = \frac{143}{2}\), pa \(\frac{143}{2} \cdot 10 = \frac{1430}{2} = 715\). Potvr캠eno!
      </p>
    </details>
  </div>

  <!-- KEY INSIGHT -->
  <div class="insight-box">
    <h3>Klju캜ni uvid</h3>
    <p>Kada tra쬴mo koeficijent uz konkretan monom \(x^{a} y^{b}\) u razvoju binoma, klju캜 je da oba uslova (za stepen od \(x\) i za stepen od \(y\)) daju <strong>istu vrednost</strong> parametra \(k\). Ako se sla쬿, koeficijent je odgovaraju캖i binomni koeficijent \(\binom{n}{k}\). Ovde je to:</p>
    <div style="text-align:center; margin-top:12px;">
      <span style="font-size:1.6rem; font-weight:700; color:#4ade80;">\(\displaystyle \binom{13}{4} = 715\)</span>
    </div>
  </div>

  <!-- FINAL ANSWER -->
  <div class="card final-answer">
    <h2>Kona캜an odgovor</h2>
    <p class="answer-label">Koeficijent uz \(x^{27}y^{2}\) u razvoju binoma \((x^3 + \sqrt{y})^{13}\) jednak je:</p>
    <div class="answer-value">(D) 715</div>
    <div class="options-row">
      <div class="option-box">(A) 12</div>
      <div class="option-box">(B) 1516</div>
      <div class="option-box">(C) 1312</div>
      <div class="option-box correct">(D) 715</div>
      <div class="option-box">(E) 78</div>
    </div>
    <p class="verification-note">Provera: Za \(k = 4\) dobijamo \(x^{39-12} = x^{27}\) i \(y^{4/2} = y^{2}\), 코to odgovara tra쬰nom momu. Koeficijent \(\binom{13}{4} = \frac{13 \cdot 12 \cdot 11 \cdot 10}{24} = 715\). Primetimo da je (E) 78 = \(\binom{13}{2}\), 코to je 캜esta zamka za one koji pogre코no odrede \(k\).</p>
  </div>

  <!-- PITFALLS -->
  <div class="card">
    <h2>캛este gre코ke</h2>
    <ul class="pitfall-list">
      <li>Zaboraviti da \(\sqrt{y} = y^{1/2}\), pa umesto \(y^{k/2}\) pisati \(y^{k}\), 코to daje pogre코nu vrednost za \(k\).</li>
      <li>Pogre코no primeniti stepen na \(x^3\): pisati \(x^{3 \cdot k}\) umesto \(x^{3(13-k)}\). U binomnom razvoju, \(a\) se stepenuje sa \(n-k\), ne sa \(k\).</li>
    </ul>
  </div>

  <!-- CHALLENGE -->
  <div class="card challenge-box">
    <h2>Dodatni izazov</h2>
    <p>Koji je koeficijent uz \(x^{24}y^{3}\) u razvoju istog binoma \((x^3 + \sqrt{y})^{13}\)?</p>
    <details>
      <summary>Pomo캖</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        Iz uslova \(39 - 3k = 24\) dobijamo \(k = 5\). Proverimo: \(y^{k/2} = y^{5/2}\), ali nam treba \(y^3\), 코to zna캜i \(k/2 = 3\), tj. \(k = 6\). Uslovi su protivure캜ni (\(k = 5 \neq 6\)), pa u razvoju <strong>ne postoji</strong> 캜lan sa \(x^{24}y^{3}\). Koeficijent je \(0\)!
      </p>
    </details>
  </div>

</div>

<script>
(() => {
  // Step click highlighting
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.toggle('active');
    });
  });

  // Pascal's Triangle Canvas
  const canvas = document.getElementById('pascal-canvas');
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  // Pre-compute Pascal's triangle up to row 13
  const maxRow = 13;
  const pascal = [];
  for (let n = 0; n <= maxRow; n++) {
    pascal[n] = [];
    for (let k = 0; k <= n; k++) {
      if (k === 0 || k === n) {
        pascal[n][k] = 1;
      } else {
        pascal[n][k] = pascal[n-1][k-1] + pascal[n-1][k];
      }
    }
  }

  function drawPascal() {
    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Title
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 16px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Paskalov trougao (redovi 0-13)', W / 2, 24);

    const startY = 46;
    const rowHeight = 35;
    const highlightRow = 13;
    const highlightK = 4;

    // Draw rows 0 through 13
    // For fitting, we show all rows but make font smaller for larger rows
    for (let n = 0; n <= maxRow; n++) {
      const numElements = n + 1;
      const cellWidth = Math.min(50, (W - 40) / numElements);
      const totalWidth = numElements * cellWidth;
      const startX = (W - totalWidth) / 2;
      const y = startY + n * rowHeight;

      // Font size decreases for larger rows
      let fontSize = 13;
      if (n >= 10) fontSize = 10;
      if (n >= 12) fontSize = 9;

      for (let k = 0; k <= n; k++) {
        const x = startX + k * cellWidth + cellWidth / 2;
        const val = pascal[n][k];

        const isHighlighted = (n === highlightRow && k === highlightK);

        if (isHighlighted) {
          // Glow effect
          const gradient = ctx.createRadialGradient(x, y, 0, x, y, 22);
          gradient.addColorStop(0, 'rgba(74,222,128,0.35)');
          gradient.addColorStop(1, 'rgba(74,222,128,0)');
          ctx.fillStyle = gradient;
          ctx.fillRect(x - 22, y - 14, 44, 24);

          // Highlighted box
          ctx.fillStyle = 'rgba(74,222,128,0.18)';
          ctx.strokeStyle = '#4ade80';
          ctx.lineWidth = 2;
          const boxW = 38;
          const boxH = 20;
          ctx.beginPath();
          ctx.roundRect(x - boxW/2, y - boxH/2 - 2, boxW, boxH, 4);
          ctx.fill();
          ctx.stroke();

          ctx.fillStyle = '#4ade80';
          ctx.font = `bold ${fontSize}px Segoe UI, sans-serif`;
        } else if (n === maxRow) {
          // Row 13: slightly brighter
          ctx.fillStyle = '#94a3b8';
          ctx.font = `${fontSize}px Segoe UI, sans-serif`;
        } else if (n < 6) {
          ctx.fillStyle = '#64748b';
          ctx.font = `${fontSize}px Segoe UI, sans-serif`;
        } else {
          ctx.fillStyle = '#7890ab';
          ctx.font = `${fontSize}px Segoe UI, sans-serif`;
        }

        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText(String(val), x, y);
      }

      // Row label
      if (n === maxRow) {
        ctx.fillStyle = '#60a5fa';
        ctx.font = 'bold 11px Segoe UI, sans-serif';
        ctx.textAlign = 'right';
        ctx.fillText('n=' + n + ' \u2192', (W - (numElements * cellWidth)) / 2 - 8, y);
      }
    }

    // Arrow pointing to highlighted element
    const highlightY = startY + highlightRow * rowHeight;
    const numEl = highlightRow + 1;
    const cw = Math.min(50, (W - 40) / numEl);
    const tw = numEl * cw;
    const sx = (W - tw) / 2;
    const highlightX = sx + highlightK * cw + cw / 2;

    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2;
    ctx.setLineDash([4, 3]);
    ctx.beginPath();
    ctx.moveTo(highlightX, highlightY + 14);
    ctx.lineTo(highlightX, highlightY + 36);
    ctx.stroke();
    ctx.setLineDash([]);

    // Arrow tip
    ctx.fillStyle = '#4ade80';
    ctx.beginPath();
    ctx.moveTo(highlightX, highlightY + 40);
    ctx.lineTo(highlightX - 5, highlightY + 34);
    ctx.lineTo(highlightX + 5, highlightY + 34);
    ctx.closePath();
    ctx.fill();

    // Label below arrow
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 13px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('C(13,4) = 715', highlightX, highlightY + 56);

    // Additional info box
    ctx.fillStyle = 'rgba(96,165,250,0.08)';
    ctx.strokeStyle = 'rgba(96,165,250,0.2)';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.roundRect(20, H - 50, W - 40, 38, 8);
    ctx.fill();
    ctx.stroke();

    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Red n = 13:  1, 13, 78, 286, 715, 1287, 1716, 1716, 1287, 715, 286, 78, 13, 1', W / 2, H - 27);
  }

  drawPascal();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Koeficijent uz x^27*y^2 u razvoju binoma (x^3 + sqrt(y))^13",
  "subject": "math",
  "unit": "combinatorics",
  "topic_tags": ["binomna teorema", "binomni koeficijent", "razvoj binoma", "Paskalov trougao", "kombinatorika"]
}
BRAINSPARK_META-->