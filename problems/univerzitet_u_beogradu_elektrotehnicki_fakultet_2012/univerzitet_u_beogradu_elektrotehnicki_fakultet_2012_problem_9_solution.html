<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zbir aritmetičke progresije</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
Problem: Zbir prvih 2012 članova aritmetičke progresije 2011/2012, 2010/2012, 2009/2012, ...

Step 1: Identify the arithmetic progression parameters.
  a₁ = 2011/2012
  a₂ = 2010/2012
  d = a₂ - a₁ = 2010/2012 - 2011/2012 = -1/2012

Step 2: Find the general term.
  aₙ = a₁ + (n-1)d = 2011/2012 + (n-1)(-1/2012)
  aₙ = 2011/2012 - (n-1)/2012
  aₙ = (2011 - n + 1)/2012
  aₙ = (2012 - n)/2012

Step 3: Find the 2012th term.
  a₂₀₁₂ = (2012 - 2012)/2012 = 0/2012 = 0

Step 4: Use the sum formula S_n = n/2 * (a₁ + aₙ).
  S₂₀₁₂ = 2012/2 * (a₁ + a₂₀₁₂)
  S₂₀₁₂ = 1006 * (2011/2012 + 0)
  S₂₀₁₂ = 1006 * 2011/2012
  S₂₀₁₂ = (1006 * 2011) / 2012

Step 5: Simplify.
  2012 = 2 * 1006
  So: (1006 * 2011) / (2 * 1006) = 2011/2

Answer: S₂₀₁₂ = 2011/2

This matches option (D).

Verification:
- Alternative: S_n = n/2 * (2a₁ + (n-1)d)
  S₂₀₁₂ = 2012/2 * (2 * 2011/2012 + 2011 * (-1/2012))
  = 1006 * (4022/2012 - 2011/2012)
  = 1006 * (2011/2012)
  = 2011/2 ✓

- Quick sanity: The terms go from 2011/2012 ≈ 0.999 down to 0.
  Average term ≈ 0.5, times 2012 terms ≈ 1006 ≈ 2011/2 ✓

Answer: (D) 2011/2
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 14px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 120px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #60a5fa;
  font-size: 1.15rem;
  font-weight: 700;
}

.plan-card {
  border-left: 4px solid #a78bfa;
}

.plan-card h2 { color: #a78bfa; }

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 10px 14px;
  background: rgba(96,165,250,0.06);
  border-radius: 8px;
  border: 1px solid rgba(96,165,250,0.12);
  list-style: none;
  user-select: none;
}

details summary::-webkit-details-marker { display: none; }

details summary::before {
  content: '\25B8 ';
  display: inline;
}

details[open] summary::before {
  content: '\25BE ';
}

details .details-content {
  padding: 14px 18px;
  margin-top: 8px;
  background: rgba(96,165,250,0.04);
  border-radius: 8px;
  border: 1px solid rgba(96,165,250,0.08);
}

.step-container {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  align-items: flex-start;
  cursor: pointer;
  padding: 8px;
  border-left: 3px solid transparent;
  border-radius: 8px;
  transition: all 0.2s;
}

.step-container:hover {
  background: rgba(96,165,250,0.04);
  border-left-color: #4ade80;
}

.step-container.active {
  background: rgba(52,211,153,0.06);
  border-left-color: #4ade80;
}

.step-badge {
  min-width: 34px;
  height: 34px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: 0.95rem;
  color: #0f172a;
  margin-top: 2px;
  flex-shrink: 0;
}

.step-content {
  flex: 1;
  min-width: 0;
}

.step-content h3 {
  margin-bottom: 8px;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 14px;
  padding: 22px 26px;
  margin-bottom: 24px;
}

.insight-box h2 { color: #a78bfa; }

.final-answer-box {
  background: linear-gradient(135deg, rgba(52,211,153,0.1), rgba(74,222,128,0.08));
  border: 2px solid rgba(52,211,153,0.35);
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin-bottom: 24px;
}

.final-answer-box .answer-value {
  font-size: 2.4rem;
  font-weight: 800;
  color: #4ade80;
  margin: 16px 0;
}

.options-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin: 18px 0;
}

.option-chip {
  background: rgba(96,165,250,0.08);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 22px;
  font-size: 1.05rem;
  color: #94a3b8;
  transition: all 0.2s;
}

.option-chip.correct {
  background: rgba(52,211,153,0.15);
  border-color: #34d399;
  color: #4ade80;
  font-weight: 700;
  box-shadow: 0 0 20px rgba(52,211,153,0.15);
}

.pitfall-box {
  border-left: 4px solid #e09468;
}

.pitfall-box h2 { color: #e09468; }

.challenge-box {
  border-left: 4px solid #a78bfa;
}

.challenge-box h2 { color: #a78bfa; }

.canvas-wrapper {
  background: #0c1222;
  border-radius: 12px;
  border: 1px solid #334155;
  overflow: hidden;
  margin: 14px 0;
}

canvas {
  width: 100%;
  display: block;
  touch-action: none;
}

.provera-note {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 12px;
  padding: 12px 16px;
  background: rgba(52,211,153,0.05);
  border-radius: 8px;
  border: 1px solid rgba(52,211,153,0.12);
}

.formula-list {
  list-style: none;
  padding: 0;
}

.formula-list li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
}

.formula-list li:last-child { border-bottom: none; }

.slider-container {
  display: flex;
  align-items: center;
  gap: 14px;
  margin: 12px 0;
  padding: 10px 16px;
  background: rgba(96,165,250,0.06);
  border-radius: 10px;
  border: 1px solid rgba(96,165,250,0.12);
  flex-wrap: wrap;
}

.slider-container label {
  color: #94a3b8;
  font-size: 0.95rem;
  font-weight: 600;
  white-space: nowrap;
}

.slider-container input[type="range"] {
  flex: 1;
  min-width: 120px;
  accent-color: #60a5fa;
}

.slider-value {
  color: #60a5fa;
  font-weight: 700;
  font-size: 1.05rem;
  min-width: 80px;
  text-align: center;
}

.drag-hint {
  color: #64748b;
  font-size: 0.85rem;
  text-align: center;
  margin-top: 6px;
  font-style: italic;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step-container { flex-direction: column; gap: 8px; }
  .given-grid { flex-direction: column; }
  .options-grid { flex-direction: column; align-items: center; }
  .final-answer-box .answer-value { font-size: 1.8rem; }
  .slider-container { flex-direction: column; align-items: stretch; }
}
</style>
</head>
<body>

<div class="container">

  <!-- Title -->
  <h1>Zbir članova aritmetičke progresije</h1>
  <p class="subtitle">Primena formule za zbir aritmetičkog niza sa razlomljenim članovima</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Zbir prvih <span class="highlight">2012</span> članova aritmetičke progresije
    \(\dfrac{2011}{2012},\; \dfrac{2010}{2012},\; \dfrac{2009}{2012},\; \ldots\) iznosi:</p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(\dfrac{2013}{2}\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(\dfrac{2013}{4}\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(\dfrac{2011}{4}\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(\dfrac{2011}{2}\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">Nijedan od ponuđenih</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan rešavanja</h2>
    <p>Odredićemo prvi član \(a_1\) i razliku \(d\) aritmetičke progresije, zatim naći poslednji (2012-ti) član, i primeniti formulu za zbir \(S_n = \dfrac{n}{2}(a_1 + a_n)\) da dobijemo konačan rezultat.</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Ključne formule i teoreme</summary>
      <div class="details-content">
        <ul class="formula-list">
          <li><strong>Opšti član aritmetičke progresije:</strong> \(a_n = a_1 + (n-1) \cdot d\), gde je \(a_1\) prvi član, a \(d\) razlika progresije.</li>
          <li><strong>Zbir prvih \(n\) članova:</strong> \(S_n = \dfrac{n}{2}(a_1 + a_n)\) — prosek prvog i poslednjeg člana, pomnožen brojem članova.</li>
          <li><strong>Alternativna formula za zbir:</strong> \(S_n = \dfrac{n}{2}\big(2a_1 + (n-1)d\big)\) — koristi se kad je lakše izraziti zbir preko \(a_1\) i \(d\).</li>
          <li><strong>Razlika progresije:</strong> \(d = a_2 - a_1 = a_3 - a_2 = \ldots\) — konstantna razlika između uzastopnih članova.</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- Visual Aid / Interactive Diagram -->
  <div class="card">
    <h2>Vizuelni prikaz progresije</h2>
    <p style="color: #94a3b8; margin-bottom: 8px;">Članovi niza opadaju linearno od \(\frac{2011}{2012}\) do 0. Pomerajte klizač da vidite koliko prvih članova sabirate.</p>
    <div class="canvas-wrapper">
      <canvas id="diagram" width="900" height="450"></canvas>
    </div>
    <div class="slider-container">
      <label for="n-slider">Broj članova \(n\):</label>
      <input type="range" id="n-slider" min="1" max="2012" value="2012" step="1">
      <span class="slider-value" id="slider-display">n = 2012</span>
    </div>
    <p class="drag-hint">Pomerajte klizač da istražite kako zbir raste sa brojem članova</p>
  </div>

  <!-- Step-by-step Solution -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Odredimo parametre progresije</h3>
        <p>Iz zadatog niza čitamo prvi član i razliku:</p>
        <div class="math-box">
          \[
          a_1 = \frac{2011}{2012}, \quad a_2 = \frac{2010}{2012}, \quad a_3 = \frac{2009}{2012}
          \]
        </div>
        <p>Razlika progresije je:</p>
        <div class="math-box">
          \[
          d = a_2 - a_1 = \frac{2010}{2012} - \frac{2011}{2012} = \frac{2010 - 2011}{2012} = -\frac{1}{2012}
          \]
        </div>
        <p style="color: #94a3b8; font-size: 0.9rem;">Svaki sledeći član je za \(\frac{1}{2012}\) manji od prethodnog.</p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Odredimo opšti član progresije</h3>
        <p>Koristimo formulu za opšti član \(a_n = a_1 + (n-1)d\):</p>
        <div class="math-box">
          \[
          a_n = \frac{2011}{2012} + (n-1)\!\cdot\!\left(-\frac{1}{2012}\right)
          \]
        </div>
        <p>Sredimo izraz:</p>
        <div class="math-box">
          \[
          a_n = \frac{2011}{2012} - \frac{n-1}{2012} = \frac{2011 - (n-1)}{2012} = \frac{2012 - n}{2012}
          \]
        </div>
        <p style="color: #94a3b8; font-size: 0.9rem;">Dobili smo elegantan obrazac: \(n\)-ti član je \(\frac{2012 - n}{2012}\).</p>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details>
      <summary>Proveri se: Koliko iznosi \(a_1\) po ovoj formuli?</summary>
      <div class="details-content">
        <p>Za \(n = 1\): \(a_1 = \frac{2012 - 1}{2012} = \frac{2011}{2012}\). Tačno se poklapa sa zadatim prvim članom!</p>
      </div>
    </details>

    <!-- Step 3 -->
    <div class="step-container">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Nađimo poslednji (2012-ti) član</h3>
        <p>Uvrstimo \(n = 2012\) u formulu za opšti član:</p>
        <div class="math-box">
          \[
          a_{2012} = \frac{2012 - 2012}{2012} = \frac{0}{2012} = 0
          \]
        </div>
        <p>Poslednji član niza je <span class="highlight">nula</span>. To nam značajno pojednostavljuje računanje zbira!</p>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step-container">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Primenimo formulu za zbir</h3>
        <p>Koristimo \(S_n = \frac{n}{2}(a_1 + a_n)\) sa \(n = 2012\):</p>
        <div class="math-box">
          \[
          S_{2012} = \frac{2012}{2} \cdot \left(a_1 + a_{2012}\right)
          \]
        </div>
        <p>Uvrstimo poznate vrednosti \(a_1 = \frac{2011}{2012}\) i \(a_{2012} = 0\):</p>
        <div class="math-box">
          \[
          S_{2012} = \frac{2012}{2} \cdot \left(\frac{2011}{2012} + 0\right) = 1006 \cdot \frac{2011}{2012}
          \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details>
      <summary>Proveri se: Zašto koristimo baš ovu formulu za zbir?</summary>
      <div class="details-content">
        <p>Formula \(S_n = \frac{n}{2}(a_1 + a_n)\) je najzgodnija jer znamo i prvi i poslednji član. Alternativna formula \(S_n = \frac{n}{2}(2a_1 + (n-1)d)\) daje isti rezultat, ali zahteva nešto više računanja.</p>
      </div>
    </details>

    <!-- Step 5 -->
    <div class="step-container">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Skratimo razlomak</h3>
        <p>Uočavamo da se 2012 u imeniocu može razložiti:</p>
        <div class="math-box">
          \[
          2012 = 2 \times 1006
          \]
        </div>
        <p>Sada skraćujemo:</p>
        <div class="math-box">
          \[
          S_{2012} = 1006 \cdot \frac{2011}{2012} = \frac{1006 \cdot 2011}{2012} = \frac{1006 \cdot 2011}{2 \cdot 1006} = \frac{2011}{2}
          \]
        </div>
        <p>Broj <span class="highlight">1006</span> se pojavljuje i u brojiocu i u imeniocu, pa se skraćuje!</p>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details>
      <summary>Proveri se: Da li je rezultat \(\frac{2011}{2}\) smislen?</summary>
      <div class="details-content">
        <p>Članovi niza opadaju linearno od skoro 1 (tačnije \(\frac{2011}{2012} \approx 0{,}9995\)) do 0. Prosečna vrednost člana je otprilike \(\frac{1}{2}\), a imamo 2012 članova. Dakle, zbir je otprilike \(2012 \times 0{,}5 = 1006\). Proverimo: \(\frac{2011}{2} = 1005{,}5\). Veoma blizu proceni, što potvrđuje da je rezultat smislen.</p>
      </div>
    </details>

  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Ključni uvid</h2>
    <p>Elegancija ovog zadatka leži u tome što je 2012-ti član progresije tačno <strong>nula</strong>. To drastično pojednostavljuje zbir: umesto da sabiramo 2012 razlomaka, koristimo činjenicu da je zbir aritmetičkog niza jednak proizvodu broja članova i proseka prvog i poslednjeg člana. Kada je poslednji član nula, prosek je jednostavno \(\frac{a_1}{2}\).</p>
    <div class="math-box" style="text-align: center; font-size: 1.15rem;">
      \[
      S_{2012} = \frac{2012}{2} \cdot \frac{2011}{2012} = \frac{2011}{2}
      \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <h2 style="color: #34d399; margin-bottom: 10px;">Konačan odgovor</h2>
    <div class="options-grid">
      <div class="option-chip">(A) \(\dfrac{2013}{2}\)</div>
      <div class="option-chip">(B) \(\dfrac{2013}{4}\)</div>
      <div class="option-chip">(C) \(\dfrac{2011}{4}\)</div>
      <div class="option-chip correct">(D) \(\dfrac{2011}{2}\)</div>
      <div class="option-chip">(E) Nijedan od ponuđenih</div>
    </div>
    <div class="answer-value">Odgovor je (D) \(\dfrac{2011}{2}\)</div>
    <p style="color: #94a3b8; margin-top: 8px;">Zbir prvih 2012 članova date aritmetičke progresije iznosi \(\dfrac{2011}{2} = 1005{,}5\).</p>
    <div class="provera-note">
      <strong>Verifikacija:</strong> Alternativnom formulom: \(S_{2012} = \frac{2012}{2}\big(2 \cdot \frac{2011}{2012} + 2011 \cdot (-\frac{1}{2012})\big) = 1006 \cdot \frac{4022 - 2011}{2012} = 1006 \cdot \frac{2011}{2012} = \frac{2011}{2}\). Rezultat se poklapa.
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfall-box">
    <h2>Česte greške</h2>
    <ul style="list-style: disc; padding-left: 20px; color: #e2e8f0;">
      <li style="margin-bottom: 10px;"><strong>Pogrešan broj članova u zbiru:</strong> Učenici ponekad broje članove od 0 umesto od 1, pa stave \(n = 2011\) ili \(n = 2013\). Pažljivo prebrojte: ako je \(a_n = \frac{2012-n}{2012}\), za \(n=1\) dobijamo \(\frac{2011}{2012}\), za \(n=2012\) dobijamo 0 -- dakle tačno 2012 članova.</li>
      <li><strong>Zamena brojioca u rezultatu:</strong> Lako je pomešati 2011 i 2013 u završnom koraku. Ključno je zapamtiti da je prvi član \(\frac{2011}{2012}\) (ne \(\frac{2013}{2012}\)), pa se u brojiocu pojavljuje 2011, ne 2013.</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-box">
    <h2>Bonus izazov</h2>
    <p>Za koji broj članova \(n\) zbir ove aritmetičke progresije dostiže svoju maksimalnu vrednost?</p>
    <details>
      <summary>Pogledaj nagoveštaj</summary>
      <div class="details-content">
        <p>Članovi progresije su pozitivni dok je \(a_n > 0\), tj. dok je \(\frac{2012 - n}{2012} > 0\), odnosno \(n < 2012\). Za \(n = 2012\) je \(a_n = 0\), a za \(n > 2012\) članovi postaju negativni. Dakle, zbir je maksimalan za \(n = 2011\) ili \(n = 2012\) (jer dodavanje nule ne menja zbir). Izračunajte \(S_{2011}\) i uverite se da važi \(S_{2011} = S_{2012}\).</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('diagram');
  const ctx = canvas.getContext('2d');
  const slider = document.getElementById('n-slider');
  const sliderDisplay = document.getElementById('slider-display');

  let currentN = 2012;

  function aTerm(k) {
    return (2012 - k) / 2012;
  }

  function sumN(n) {
    // S_n = n/2 * (a_1 + a_n)
    return n / 2 * (aTerm(1) + aTerm(n));
  }

  function draw() {
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    canvas.width = rect.width * dpr;
    canvas.height = 450 * dpr;
    canvas.style.height = '450px';
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    const W = rect.width;
    const H = 450;

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    const marginL = 70;
    const marginR = 30;
    const marginTop = 50;
    const marginBot = 70;
    const plotW = W - marginL - marginR;
    const plotH = H - marginTop - marginBot;

    // Title
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Članovi aritmetičke progresije i površina zbira', W / 2, 28);

    // Axes
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;

    // Y-axis
    ctx.beginPath();
    ctx.moveTo(marginL, marginTop);
    ctx.lineTo(marginL, marginTop + plotH);
    ctx.stroke();

    // X-axis
    ctx.beginPath();
    ctx.moveTo(marginL, marginTop + plotH);
    ctx.lineTo(marginL + plotW, marginTop + plotH);
    ctx.stroke();

    // Grid lines (horizontal)
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 0.5;
    const yTicks = [0, 0.25, 0.5, 0.75, 1.0];
    yTicks.forEach(function(val) {
      const yPos = marginTop + plotH - (val / 1.0) * plotH;
      ctx.beginPath();
      ctx.moveTo(marginL, yPos);
      ctx.lineTo(marginL + plotW, yPos);
      ctx.stroke();

      ctx.fillStyle = '#94a3b8';
      ctx.font = '11px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'right';
      ctx.fillText(val.toFixed(2).replace('.', ','), marginL - 8, yPos + 4);
    });

    // X-axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    var xLabels = [1, 500, 1000, 1500, 2012];
    xLabels.forEach(function(n) {
      var xPos = marginL + ((n - 1) / 2011) * plotW;
      ctx.fillText(String(n), xPos, marginTop + plotH + 18);
    });

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('n (redni broj člana)', marginL + plotW / 2, marginTop + plotH + 40);

    ctx.save();
    ctx.translate(16, marginTop + plotH / 2);
    ctx.rotate(-Math.PI / 2);
    ctx.textAlign = 'center';
    ctx.fillText('Vrednost člana a\u2099', 0, 0);
    ctx.restore();

    // Draw the filled area (sum) for selected n
    var toX = function(n) { return marginL + ((n - 1) / 2011) * plotW; };
    var toY = function(val) { return marginTop + plotH - (val / 1.0) * plotH; };

    // Shaded area representing the sum (trapezoid under the line from n=1 to n=currentN)
    ctx.fillStyle = 'rgba(96,165,250,0.12)';
    ctx.beginPath();
    ctx.moveTo(toX(1), toY(0));
    var step = Math.max(1, Math.floor(currentN / 200));
    for (var i = 1; i <= currentN; i += step) {
      ctx.lineTo(toX(i), toY(Math.max(0, aTerm(i))));
    }
    ctx.lineTo(toX(currentN), toY(Math.max(0, aTerm(currentN))));
    ctx.lineTo(toX(currentN), toY(0));
    ctx.closePath();
    ctx.fill();

    // Outline of the shaded area
    ctx.strokeStyle = 'rgba(96,165,250,0.3)';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(toX(1), toY(aTerm(1)));
    for (var i = 1; i <= currentN; i += step) {
      ctx.lineTo(toX(i), toY(Math.max(0, aTerm(i))));
    }
    ctx.lineTo(toX(currentN), toY(Math.max(0, aTerm(currentN))));
    ctx.stroke();

    // Draw the full line of the progression (all 2012 terms)
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(toX(1), toY(aTerm(1)));
    ctx.lineTo(toX(2012), toY(aTerm(2012)));
    ctx.stroke();

    // Mark first term
    ctx.fillStyle = '#4ade80';
    ctx.beginPath();
    ctx.arc(toX(1), toY(aTerm(1)), 5, 0, Math.PI * 2);
    ctx.fill();
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('a\u2081 = 2011/2012', toX(1) + 10, toY(aTerm(1)) - 8);

    // Mark last term (2012)
    ctx.fillStyle = '#f472b6';
    ctx.beginPath();
    ctx.arc(toX(2012), toY(0), 5, 0, Math.PI * 2);
    ctx.fill();
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText('a\u2082\u2080\u2081\u2082 = 0', toX(2012) - 10, toY(0) - 12);

    // Mark current n position with vertical dashed line
    if (currentN < 2012) {
      ctx.strokeStyle = '#a78bfa';
      ctx.lineWidth = 1.5;
      ctx.setLineDash([5, 5]);
      ctx.beginPath();
      ctx.moveTo(toX(currentN), marginTop);
      ctx.lineTo(toX(currentN), marginTop + plotH);
      ctx.stroke();
      ctx.setLineDash([]);

      // Mark current n point on the line
      ctx.fillStyle = '#a78bfa';
      ctx.beginPath();
      ctx.arc(toX(currentN), toY(Math.max(0, aTerm(currentN))), 5, 0, Math.PI * 2);
      ctx.fill();
    }

    // Show sum value
    var currentSum = sumN(currentN);
    var sumText = 'S\u2099 = ' + currentSum.toFixed(4).replace('.', ',');

    // Sum info box
    var boxX = W - marginR - 220;
    var boxY = marginTop + 10;
    ctx.fillStyle = 'rgba(30,41,59,0.9)';
    ctx.beginPath();
    ctx.roundRect(boxX, boxY, 200, 80, 10);
    ctx.fill();
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.roundRect(boxX, boxY, 200, 80, 10);
    ctx.stroke();

    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Broj članova: ' + currentN, boxX + 14, boxY + 22);

    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
    ctx.fillText(sumText, boxX + 14, boxY + 50);

    if (currentN === 2012) {
      ctx.fillStyle = '#a78bfa';
      ctx.font = '11px Segoe UI, system-ui, sans-serif';
      ctx.fillText('= 2011/2', boxX + 14, boxY + 68);
    }

    // Legend
    var legendY = H - 18;
    ctx.fillStyle = '#60a5fa';
    ctx.beginPath();
    ctx.arc(marginL + 10, legendY, 4, 0, Math.PI * 2);
    ctx.fill();
    ctx.fillStyle = '#94a3b8';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Linija progresije', marginL + 20, legendY + 4);

    ctx.fillStyle = 'rgba(96,165,250,0.35)';
    ctx.fillRect(marginL + 140, legendY - 5, 12, 10);
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('Površina = zbir S\u2099', marginL + 158, legendY + 4);
  }

  slider.addEventListener('input', function() {
    currentN = parseInt(this.value);
    sliderDisplay.textContent = 'n = ' + currentN;
    draw();
  });

  // Touch support for slider
  slider.addEventListener('touchstart', function(e) {
    e.stopPropagation();
  });

  // Step click highlighting
  document.querySelectorAll('.step-container').forEach(function(step) {
    step.addEventListener('click', function() {
      document.querySelectorAll('.step-container').forEach(function(s) {
        s.classList.remove('active');
      });
      step.classList.toggle('active');
    });
  });

  draw();
  window.addEventListener('resize', draw);
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Zbir članova aritmetičke progresije sa razlomljenim članovima",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["aritmetička progresija", "zbir niza", "razlomci", "aritmetički niz", "formula za zbir"]
}
BRAINSPARK_META-->