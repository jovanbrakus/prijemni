<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kompozicija funkcija f(g(x))</title>
<script type="text/info" id="logic-scratchpad">
Problem: Ako je f(x) = 2x + |x| i g(x) = (2/3)x - (1/3)|x|, tada je f(g(x)) jednako?

Strategija: Razmatramo dva slucaja po znaku x, jer imamo apsolutnu vrednost.

Slucaj 1: x >= 0
  |x| = x
  g(x) = (2/3)x - (1/3)x = (2/3 - 1/3)x = (1/3)x
  Posto x >= 0, to je g(x) = (1/3)x >= 0, pa je |g(x)| = g(x) = (1/3)x
  f(g(x)) = 2·(1/3)x + |(1/3)x| = (2/3)x + (1/3)x = (3/3)x = x

Slucaj 2: x < 0
  |x| = -x
  g(x) = (2/3)x - (1/3)(-x) = (2/3)x + (1/3)x = (3/3)x = x
  Posto x < 0, to je g(x) = x < 0, pa je |g(x)| = -g(x) = -x
  f(g(x)) = 2·x + |x| = 2x + (-x) = 2x - x = x

U oba slucaja f(g(x)) = x.

Odgovor: (D) x
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  font-size: 1.05rem;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
  transition: transform 0.2s, border-color 0.2s;
}

.given-item:hover {
  transform: translateY(-2px);
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
}

/* Plan card */
.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card h2 {
  color: #a78bfa;
}

/* Details/collapsible */
details {
  margin: 15px 0;
  background: rgba(167,139,250,0.06);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 1.05rem;
  user-select: none;
}

details summary:hover {
  color: #c4b5fd;
}

details[open] summary {
  margin-bottom: 12px;
}

details ul {
  list-style: none;
  padding-left: 0;
}

details li {
  padding: 6px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #e2e8f0;
}

details li:last-child {
  border-bottom: none;
}

/* Canvas card */
.canvas-card {
  text-align: center;
}

.canvas-card canvas {
  width: 100%;
  max-width: 700px;
  border-radius: 10px;
  border: 1px solid #334155;
  touch-action: none;
}

/* Steps */
.step {
  display: flex;
  gap: 16px;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 14px;
  border-left: 3px solid transparent;
  transition: border-color 0.2s, background 0.2s;
  cursor: pointer;
}

.step:hover, .step.active {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}

.step-badge {
  flex-shrink: 0;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.95rem;
}

.step-content {
  flex: 1;
}

.step-content p {
  color: #94a3b8;
  margin-top: 6px;
}

/* Checkpoint */
.checkpoint {
  background: rgba(52,211,153,0.06);
  border: 1px solid rgba(52,211,153,0.18);
}

.checkpoint summary {
  color: #34d399;
}

/* Key insight */
.insight-card {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid rgba(167,139,250,0.25);
}

.insight-card h2 {
  color: #a78bfa;
}

/* Final answer */
.final-answer {
  border: 2px solid rgba(74,222,128,0.3);
  background: linear-gradient(135deg, rgba(74,222,128,0.06), rgba(52,211,153,0.04));
}

.final-answer h2 {
  color: #4ade80;
}

.answer-big {
  font-size: 1.6rem;
  font-weight: 700;
  color: #4ade80;
  text-align: center;
  margin: 20px 0;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 16px 0;
}

.option-box {
  padding: 10px 20px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: #1e293b;
  text-align: center;
  min-width: 90px;
  transition: transform 0.2s;
}

.option-box.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.1);
  transform: scale(1.05);
}

.option-box .opt-label {
  color: #94a3b8;
  font-size: 0.85rem;
}

.option-box .opt-value {
  font-size: 1.15rem;
  font-weight: 600;
  color: #e2e8f0;
}

.option-box.correct .opt-value {
  color: #4ade80;
}

.verification {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 14px;
  padding-top: 14px;
  border-top: 1px solid #334155;
}

/* Pitfalls */
.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 14px;
  margin-bottom: 8px;
  background: rgba(224,148,104,0.06);
  border-left: 3px solid #e09468;
  border-radius: 0 8px 8px 0;
  color: #e2e8f0;
}

.pitfall-list li strong {
  color: #e09468;
}

/* Challenge */
.challenge-card {
  border: 1px solid rgba(244,114,182,0.2);
  background: rgba(244,114,182,0.04);
}

.challenge-card h2 {
  color: #f472b6;
}

/* Legend */
.legend {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  justify-content: center;
  margin-top: 14px;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 8px;
  color: #94a3b8;
  font-size: 0.95rem;
}

.legend-swatch {
  width: 24px;
  height: 4px;
  border-radius: 2px;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step { flex-direction: column; gap: 10px; }
  .given-grid { flex-direction: column; }
  .options-row { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Kompozicija funkcija f(g(x))</h1>
  <p class="subtitle">Analiza po slucajevima za funkcije sa apsolutnom vrednoscu</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Ako je \(f(x) = 2x + |x|\) i \(g(x) = \dfrac{2}{3}x - \dfrac{1}{3}|x|\), tada je \(f(g(x))\) jednako:</p>

    <div class="given-grid" style="margin-bottom: 18px;">
      <div class="given-item">
        <div class="label">Funkcija \(f\)</div>
        <div class="value">\(f(x) = 2x + |x|\)</div>
      </div>
      <div class="given-item">
        <div class="label">Funkcija \(g\)</div>
        <div class="value">\(g(x) = \dfrac{2}{3}x - \dfrac{1}{3}|x|\)</div>
      </div>
    </div>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(\dfrac{2}{3}x\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(|x|\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(-x\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(x\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(3x\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>Funkcije \(f\) i \(g\) sadrze apsolutnu vrednost, pa ih najpre zapisujemo po granama (za \(x \geq 0\) i za \(x < 0\)). Zatim za svaki slucaj odredjujemo \(g(x)\), proveravamo znak rezultata, i konacno racunamo \(f(g(x))\).</p>
  </div>

  <!-- Theory Refresher -->
  <details>
    <summary>Kljucne formule i pravila</summary>
    <ul>
      <li>Definicija apsolutne vrednosti: \(|x| = \begin{cases} x, & x \geq 0 \\ -x, & x < 0 \end{cases}\)</li>
      <li>Kompozicija funkcija: \((f \circ g)(x) = f(g(x))\) &mdash; prvo primenimo \(g\), pa na rezultat primenimo \(f\).</li>
      <li>Funkcija sa apsolutnom vrednoscu se analizira po slucajevima (po znaku argumenta).</li>
      <li>Kod kompozicije, ako unutrasnja funkcija sadrzi \(|x|\), potrebno je odrediti znak \(g(x)\) da bismo izracunali \(|g(x)|\) u spoljasnjoj funkciji.</li>
    </ul>
  </details>

  <!-- Canvas Visualization -->
  <div class="card canvas-card">
    <h2>Graficki prikaz</h2>
    <p style="color:#94a3b8; margin-bottom: 14px;">Grafici funkcija \(f(x)\), \(g(x)\) i kompozicije \(f(g(x))\)</p>
    <canvas id="graph-canvas" width="700" height="500"></canvas>
    <div class="legend">
      <div class="legend-item">
        <div class="legend-swatch" style="background: #60a5fa;"></div>
        <span>\(f(x) = 2x + |x|\)</span>
      </div>
      <div class="legend-item">
        <div class="legend-swatch" style="background: #f472b6;"></div>
        <span>\(g(x) = \tfrac{2}{3}x - \tfrac{1}{3}|x|\)</span>
      </div>
      <div class="legend-item">
        <div class="legend-swatch" style="background: #4ade80;"></div>
        <span>\(f(g(x)) = x\)</span>
      </div>
    </div>
  </div>

  <!-- Step-by-step solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <div class="step" id="step-1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Zapisimo \(f\) i \(g\) po granama</h3>
        <p>Razdvojimo svaku funkciju na slucaj \(x \geq 0\) i \(x < 0\):</p>
        <div class="math-box">
          \[ f(x) = 2x + |x| = \begin{cases} 2x + x = 3x, & x \geq 0 \\ 2x + (-x) = 2x - x = x, & x < 0 \end{cases} \]
        </div>
        <div class="math-box">
          \[ g(x) = \frac{2}{3}x - \frac{1}{3}|x| = \begin{cases} \frac{2}{3}x - \frac{1}{3}x = \frac{1}{3}x, & x \geq 0 \\ \frac{2}{3}x - \frac{1}{3}(-x) = \frac{2}{3}x + \frac{1}{3}x = x, & x < 0 \end{cases} \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Zasto je \(g(x) = x\) za \(x < 0\)?</summary>
      <p>Kada je \(x < 0\), vazi \(|x| = -x\). Zamenom: \(g(x) = \frac{2}{3}x - \frac{1}{3}(-x) = \frac{2}{3}x + \frac{1}{3}x = \frac{2+1}{3}x = x\).</p>
    </details>

    <div class="step" id="step-2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Slucaj 1: \(x \geq 0\)</h3>
        <p>Odredimo \(g(x)\) i njegov znak:</p>
        <div class="math-box">
          \[ g(x) = \frac{1}{3}x \]
        </div>
        <p>Posto je \(x \geq 0\), sledi da je \(g(x) = \frac{1}{3}x \geq 0\). Dakle, primenjujemo granu \(f\) za nenegativan argument:</p>
        <div class="math-box">
          \[ f(g(x)) = 3 \cdot g(x) = 3 \cdot \frac{1}{3}x = x \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Zasto koristimo \(f(t) = 3t\)?</summary>
      <p>Posto je \(g(x) = \frac{1}{3}x \geq 0\) (jer je \(x \geq 0\)), argument funkcije \(f\) je nenegativan. Za nenegativan argument vazi \(f(t) = 2t + |t| = 2t + t = 3t\).</p>
    </details>

    <div class="step" id="step-3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Slucaj 2: \(x < 0\)</h3>
        <p>Odredimo \(g(x)\) i njegov znak:</p>
        <div class="math-box">
          \[ g(x) = x \]
        </div>
        <p>Posto je \(x < 0\), sledi da je \(g(x) = x < 0\). Dakle, primenjujemo granu \(f\) za negativan argument:</p>
        <div class="math-box">
          \[ f(g(x)) = g(x) = x \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Zasto koristimo \(f(t) = t\) ovde?</summary>
      <p>Posto je \(g(x) = x < 0\), argument funkcije \(f\) je negativan. Za negativan argument vazi \(f(t) = 2t + |t| = 2t + (-t) = 2t - t = t\).</p>
    </details>

    <div class="step" id="step-4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Zakljucak</h3>
        <p>U oba slucaja dobijamo isti rezultat:</p>
        <div class="math-box">
          \[ f(g(x)) = \begin{cases} x, & x \geq 0 \\ x, & x < 0 \end{cases} = x \quad \text{za svako } x \in \mathbb{R} \]
        </div>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="card insight-card">
    <h2>Kljucni uvid</h2>
    <p>Funkcija \(g\) je konstruisana kao <span class="highlight">inverzna funkcija</span> od \(f\). Iako su i \(f\) i \(g\) razlomljene linearne funkcije sa apsolutnom vrednoscu (svaka ima dve grane), njihova kompozicija se savrseno "skrati" i daje identitet \(f(g(x)) = x\). Kljuc je da se za svaki slucaj proveri <span class="highlight">znak medjurezultata</span> \(g(x)\), jer on odredjuje koju granu funkcije \(f\) primenjujemo.</p>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer">
    <h2>Konacan odgovor</h2>
    <div class="answer-big">\(f(g(x)) = x\)</div>

    <div class="options-row">
      <div class="option-box">
        <div class="opt-label">(A)</div>
        <div class="opt-value">\(\dfrac{2}{3}x\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(B)</div>
        <div class="opt-value">\(|x|\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(C)</div>
        <div class="opt-value">\(-x\)</div>
      </div>
      <div class="option-box correct">
        <div class="opt-label">(D)</div>
        <div class="opt-value">\(x\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(E)</div>
        <div class="opt-value">\(3x\)</div>
      </div>
    </div>

    <p class="verification"><strong>Provera numericki:</strong> Za \(x = 2\): \(g(2) = \frac{1}{3} \cdot 2 = \frac{2}{3}\), \(f\!\left(\frac{2}{3}\right) = 2 \cdot \frac{2}{3} + \frac{2}{3} = \frac{4}{3} + \frac{2}{3} = 2 = x\) &check; Za \(x = -3\): \(g(-3) = -3\), \(f(-3) = 2 \cdot (-3) + |-3| = -6 + 3 = -3 = x\) &check;</p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Ceste greske</h2>
    <ul class="pitfall-list">
      <li><strong>Zaboravljanje da se proveri znak \(g(x)\):</strong> Nije dovoljno samo izracunati \(g(x)\) &mdash; pre primene \(f\) na \(g(x)\), moramo znati da li je \(g(x) \geq 0\) ili \(g(x) < 0\), jer to odredjuje koju granu funkcije \(f\) koristimo.</li>
      <li><strong>Mesanje \(|g(x)|\) sa \(g(|x|)\):</strong> Apsolutna vrednost u \(f\) se primenjuje na ceo \(g(x)\), ne na \(x\) posebno. Dakle, \(|g(x)| \neq g(|x|)\) u opstem slucaju.</li>
      <li><strong>Pogresno pojednostavljivanje razlomaka:</strong> Pri racunanju \(g(x)\) za \(x < 0\), paziti na predznake: \(-\frac{1}{3} \cdot (-x) = +\frac{1}{3}x\), a ne \(-\frac{1}{3}x\).</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Da li vazi i obrnuto, tj. da li je \(g(f(x)) = x\) za svako \(x\)? Ako jeste, to znaci da su \(f\) i \(g\) medjusobno inverzne funkcije. Ako nije, za koje vrednosti \(x\) vazi, a za koje ne vazi?</p>
    <details>
      <summary>Pomoc</summary>
      <p>Za \(x \geq 0\): \(f(x) = 3x \geq 0\), pa \(g(3x) = \frac{1}{3} \cdot 3x = x\). Vazi!</p>
      <p>Za \(x < 0\): \(f(x) = x < 0\), pa \(g(x) = x\). Vazi!</p>
      <p>Dakle, \(g(f(x)) = x\) za svako \(x\), sto znaci da su \(f\) i \(g\) zaista medjusobno inverzne funkcije.</p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('graph-canvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  // Functions
  function f(x) {
    return 2 * x + Math.abs(x);
  }

  function g(x) {
    return (2 / 3) * x - (1 / 3) * Math.abs(x);
  }

  function fog(x) {
    return f(g(x));
  }

  // Coordinate system
  const xMin = -4, xMax = 4;
  const yMin = -5, yMax = 10;

  function toCanvasX(x) {
    return ((x - xMin) / (xMax - xMin)) * W;
  }
  function toCanvasY(y) {
    return H - ((y - yMin) / (yMax - yMin)) * H;
  }

  // Background
  ctx.fillStyle = '#0c1222';
  ctx.fillRect(0, 0, W, H);

  // Grid lines
  ctx.strokeStyle = '#1e293b';
  ctx.lineWidth = 1;
  for (let x = Math.ceil(xMin); x <= xMax; x += 1) {
    ctx.beginPath();
    ctx.moveTo(toCanvasX(x), 0);
    ctx.lineTo(toCanvasX(x), H);
    ctx.stroke();
  }
  for (let y = Math.ceil(yMin); y <= yMax; y += 1) {
    ctx.beginPath();
    ctx.moveTo(0, toCanvasY(y));
    ctx.lineTo(W, toCanvasY(y));
    ctx.stroke();
  }

  // Axes
  ctx.strokeStyle = '#475569';
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(0, toCanvasY(0));
  ctx.lineTo(W, toCanvasY(0));
  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(toCanvasX(0), 0);
  ctx.lineTo(toCanvasX(0), H);
  ctx.stroke();

  // Axis labels
  ctx.fillStyle = '#64748b';
  ctx.font = '12px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'center';
  for (let x = Math.ceil(xMin); x <= xMax; x += 1) {
    if (x === 0) continue;
    ctx.fillText(String(x), toCanvasX(x), toCanvasY(0) + 16);
  }
  ctx.textAlign = 'right';
  for (let y = Math.ceil(yMin); y <= yMax; y += 2) {
    if (y === 0) continue;
    ctx.fillText(String(y), toCanvasX(0) - 8, toCanvasY(y) + 4);
  }

  // Helper: draw a piecewise linear function
  function drawFunc(fn, color, lineWidth, dash) {
    ctx.strokeStyle = color;
    ctx.lineWidth = lineWidth;
    ctx.setLineDash(dash || []);
    ctx.beginPath();
    let started = false;
    for (let px = 0; px <= W; px++) {
      const x = xMin + (px / W) * (xMax - xMin);
      const y = fn(x);
      const cy = toCanvasY(y);
      if (cy < -50 || cy > H + 50) {
        started = false;
        continue;
      }
      if (!started) {
        ctx.moveTo(px, cy);
        started = true;
      } else {
        ctx.lineTo(px, cy);
      }
    }
    ctx.stroke();
    ctx.setLineDash([]);
  }

  // Draw f(x) - blue
  drawFunc(f, '#60a5fa', 2.5);

  // Draw g(x) - pink
  drawFunc(g, '#f472b6', 2.5);

  // Draw f(g(x)) = x - green, dashed
  drawFunc(fog, '#4ade80', 3, [8, 5]);

  // Labels for functions
  ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';

  // f(x) label - on the right side where f is steep (positive side, slope 3)
  ctx.fillStyle = '#60a5fa';
  ctx.textAlign = 'left';
  ctx.fillText('f(x) = 2x + |x|', toCanvasX(2.2) + 4, toCanvasY(f(2.2)) - 10);

  // g(x) label
  ctx.fillStyle = '#f472b6';
  ctx.textAlign = 'left';
  ctx.fillText('g(x) = \u2154x \u2212 \u2153|x|', toCanvasX(2.5) + 4, toCanvasY(g(2.5)) + 22);

  // f(g(x)) label
  ctx.fillStyle = '#4ade80';
  ctx.textAlign = 'left';
  ctx.fillText('f(g(x)) = x', toCanvasX(3.0) + 4, toCanvasY(fog(3.0)) - 12);

  // Origin label
  ctx.fillStyle = '#64748b';
  ctx.font = '12px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'right';
  ctx.fillText('O', toCanvasX(0) - 8, toCanvasY(0) + 16);

  // Mark the origin point where all three pass through
  ctx.fillStyle = '#e2e8f0';
  ctx.beginPath();
  ctx.arc(toCanvasX(0), toCanvasY(0), 5, 0, Math.PI * 2);
  ctx.fill();
  ctx.strokeStyle = '#0c1222';
  ctx.lineWidth = 2;
  ctx.stroke();

  // Highlight a sample point: x = 2
  const xSample = 2;
  const gVal = g(xSample); // 1/3 * 2 = 2/3
  const fgVal = f(gVal);   // 3 * 2/3 = 2

  // Dotted lines showing the composition path
  ctx.setLineDash([4, 3]);
  ctx.strokeStyle = 'rgba(74, 222, 128, 0.4)';
  ctx.lineWidth = 1.5;

  // Vertical from x=2 on x-axis down to g(2)
  ctx.beginPath();
  ctx.moveTo(toCanvasX(xSample), toCanvasY(0));
  ctx.lineTo(toCanvasX(xSample), toCanvasY(gVal));
  ctx.stroke();

  // Horizontal from g(2) to y-axis
  ctx.beginPath();
  ctx.moveTo(toCanvasX(xSample), toCanvasY(gVal));
  ctx.lineTo(toCanvasX(0), toCanvasY(gVal));
  ctx.stroke();

  ctx.setLineDash([]);

  // Point on g at x=2
  ctx.fillStyle = '#f472b6';
  ctx.beginPath();
  ctx.arc(toCanvasX(xSample), toCanvasY(gVal), 5, 0, Math.PI * 2);
  ctx.fill();

  // Annotation
  ctx.fillStyle = '#f472b6';
  ctx.font = '11px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'left';
  ctx.fillText('g(2) = \u2154', toCanvasX(xSample) + 8, toCanvasY(gVal) + 4);

  // Point on fog at x=2
  ctx.fillStyle = '#4ade80';
  ctx.beginPath();
  ctx.arc(toCanvasX(xSample), toCanvasY(fgVal), 5, 0, Math.PI * 2);
  ctx.fill();

  ctx.fillStyle = '#4ade80';
  ctx.font = '11px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'left';
  ctx.fillText('f(g(2)) = 2', toCanvasX(xSample) + 8, toCanvasY(fgVal) - 10);

  // Step click interactivity
  const steps = document.querySelectorAll('.step');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.add('active');
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Kompozicija funkcija f(g(x)) sa apsolutnom vrednoscu",
  "subject": "math",
  "unit": "funkcije",
  "topic_tags": ["kompozicija funkcija", "apsolutna vrednost", "analiza po slucajevima", "inverzna funkcija", "linearne funkcije"]
}
BRAINSPARK_META-->