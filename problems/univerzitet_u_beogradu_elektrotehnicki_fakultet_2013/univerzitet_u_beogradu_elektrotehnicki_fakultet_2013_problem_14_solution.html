<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zapremina prizme upisane u valjak</title>
<script type="text/info" id="logic-scratchpad">
Problem: U valjak precnika osnove 14*sqrt(3) cm i visine 20 cm upisana je prava trostrana prizma
cija osnova je trougao ABC gde je BC = 9 cm, a ugao naspram stranice AC je 120 deg.
Naci zapreminu prizme.

Korak 1: Odrediti poluprecnik opisanog kruga
Precnik valjka = 14*sqrt(3) cm
R = 14*sqrt(3)/2 = 7*sqrt(3) cm
Visina valjka (= visina prizme) H = 20 cm

Korak 2: Identifikacija elemenata trougla
BC = a = 9 cm
Ugao naspram stranice AC je 120 deg.
Ugao naspram AC = ugao B = 120 deg (ugao kod temena B je naspram stranice AC).

Korak 3: Primena sinusne teoreme za AC
AC / sin B = 2R
AC / sin 120 = 2 * 7*sqrt(3) = 14*sqrt(3)
AC = 14*sqrt(3) * sin 120 = 14*sqrt(3) * sqrt(3)/2 = 14*3/2 = 21 cm

Korak 4: Naci ugao A koristeci sinusnu teoremu
BC / sin A = 2R
sin A = BC / (2R) = 9 / (14*sqrt(3)) = 9*sqrt(3)/42 = 3*sqrt(3)/14

Korak 5: Naci cos A
cos A = sqrt(1 - sin^2 A) = sqrt(1 - 27/196) = sqrt(169/196) = 13/14
(Ugao A je ost jer sin A = 3*sqrt(3)/14 ≈ 0.371, dakle A ≈ 21.8 deg)

Korak 6: Naci ugao C
A + B + C = 180 deg
C = 180 - 120 - A = 60 - A

sin C = sin(60 - A) = sin60*cosA - cos60*sinA
     = (sqrt(3)/2)(13/14) - (1/2)(3*sqrt(3)/14)
     = 13*sqrt(3)/28 - 3*sqrt(3)/28
     = 10*sqrt(3)/28
     = 5*sqrt(3)/14

Korak 7: Naci stranicu AB = c
c / sin C = 2R
c = 2R * sin C = 14*sqrt(3) * 5*sqrt(3)/14 = sqrt(3) * 5*sqrt(3) = 5*3 = 15 cm

Korak 8: Izracunati povrsinu trougla ABC
S = (1/2) * b * c * sin A = (1/2) * AC * AB * sin A
S = (1/2) * 21 * 15 * (3*sqrt(3)/14)
S = (1/2) * (21 * 15 * 3*sqrt(3)) / 14
S = (1/2) * (945*sqrt(3)) / 14
S = 945*sqrt(3) / 28

Provera alternativnom formulom:
S = abc / (4R) = 9 * 21 * 15 / (4 * 7*sqrt(3))
  = 2835 / (28*sqrt(3))
  = 2835*sqrt(3) / 84
  = 945*sqrt(3) / 28   ✓

Korak 9: Izracunati zapreminu prizme
V = S * H = (945*sqrt(3)/28) * 20 = 18900*sqrt(3)/28 = 675*sqrt(3) cm^3

Odgovor: (D) 675*sqrt(3)
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  font-size: 1.05rem;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
  transition: transform 0.2s, border-color 0.2s;
}

.given-item:hover {
  transform: translateY(-2px);
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
}

/* Plan card */
.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card h2 {
  color: #a78bfa;
}

/* Details/collapsible */
details {
  margin: 15px 0;
  background: rgba(167,139,250,0.06);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 1.05rem;
  user-select: none;
}

details summary:hover {
  color: #c4b5fd;
}

details[open] summary {
  margin-bottom: 12px;
}

details ul {
  list-style: none;
  padding-left: 0;
}

details li {
  padding: 6px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #e2e8f0;
}

details li:last-child {
  border-bottom: none;
}

/* Canvas card */
.canvas-card {
  text-align: center;
}

.canvas-card canvas {
  width: 100%;
  max-width: 700px;
  border-radius: 10px;
  border: 1px solid #334155;
  touch-action: none;
}

/* Steps */
.step {
  display: flex;
  gap: 16px;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 14px;
  border-left: 3px solid transparent;
  transition: border-color 0.2s, background 0.2s;
  cursor: pointer;
}

.step:hover, .step.active {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}

.step-badge {
  flex-shrink: 0;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.95rem;
}

.step-content {
  flex: 1;
}

.step-content p {
  color: #94a3b8;
  margin-top: 6px;
}

/* Checkpoint */
.checkpoint {
  background: rgba(52,211,153,0.06);
  border: 1px solid rgba(52,211,153,0.18);
}

.checkpoint summary {
  color: #34d399;
}

/* Key insight */
.insight-card {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid rgba(167,139,250,0.25);
}

.insight-card h2 {
  color: #a78bfa;
}

/* Final answer */
.final-answer {
  border: 2px solid rgba(74,222,128,0.3);
  background: linear-gradient(135deg, rgba(74,222,128,0.06), rgba(52,211,153,0.04));
}

.final-answer h2 {
  color: #4ade80;
}

.answer-big {
  font-size: 1.6rem;
  font-weight: 700;
  color: #4ade80;
  text-align: center;
  margin: 20px 0;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 16px 0;
}

.option-box {
  padding: 10px 20px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: #1e293b;
  text-align: center;
  min-width: 90px;
  transition: transform 0.2s;
}

.option-box.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.1);
  transform: scale(1.05);
}

.option-box .opt-label {
  color: #94a3b8;
  font-size: 0.85rem;
}

.option-box .opt-value {
  font-size: 1.15rem;
  font-weight: 600;
  color: #e2e8f0;
}

.option-box.correct .opt-value {
  color: #4ade80;
}

.verification {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 14px;
  padding-top: 14px;
  border-top: 1px solid #334155;
}

/* Pitfalls */
.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 14px;
  margin-bottom: 8px;
  background: rgba(224,148,104,0.06);
  border-left: 3px solid #e09468;
  border-radius: 0 8px 8px 0;
  color: #e2e8f0;
}

.pitfall-list li strong {
  color: #e09468;
}

/* Challenge */
.challenge-card {
  border: 1px solid rgba(244,114,182,0.2);
  background: rgba(244,114,182,0.04);
}

.challenge-card h2 {
  color: #f472b6;
}

.drag-hint {
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step { flex-direction: column; gap: 10px; }
  .given-grid { flex-direction: column; }
  .options-row { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Zapremina prizme upisane u valjak</h1>
  <p class="subtitle">Stereometrija: sinusna teorema, trougao upisan u krug i zapremina prizme</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>U valjak precnika osnove <span class="highlight">\(14\sqrt{3}\) cm</span> i visine <span class="highlight">\(20\) cm</span> upisana je prava trostrana prizma cija osnova je trougao \(ABC\) gde je stranica \(BC = 9\) cm, a ugao naspram stranice \(AC\) je \(120°\). Odrediti zapreminu prizme (u cm\(^3\)).</p>

    <div class="given-grid" style="margin-bottom: 18px;">
      <div class="given-item">
        <div class="label">Precnik valjka</div>
        <div class="value">\(14\sqrt{3}\) cm</div>
      </div>
      <div class="given-item">
        <div class="label">Visina valjka</div>
        <div class="value">\(20\) cm</div>
      </div>
      <div class="given-item">
        <div class="label">Stranica \(BC\)</div>
        <div class="value">\(9\) cm</div>
      </div>
      <div class="given-item">
        <div class="label">Ugao naspram \(AC\)</div>
        <div class="value">\(120°\)</div>
      </div>
    </div>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(1890\sqrt{3}\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(3780\sqrt{3}\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(810\sqrt{3}\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(675\sqrt{3}\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(825\sqrt{3}\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>Posto je prizma upisana u valjak, osnova trougla je upisana u krug poluprecnika \(R\). Odredicesmo \(R\) iz precnika valjka, zatim koristiti sinusnu teoremu da nadjemo sve stranice trougla, izracunati povrsinu osnove i na kraju zapreminu prizme kao \(V = P \cdot H\).</p>
  </div>

  <!-- Theory Refresher -->
  <details>
    <summary>Kljucne formule i teoreme</summary>
    <ul>
      <li><strong>Sinusna teorema:</strong> \(\displaystyle \frac{a}{\sin A} = \frac{b}{\sin B} = \frac{c}{\sin C} = 2R\), gde je \(R\) poluprecnik opisanog kruga trougla.</li>
      <li><strong>Povrsina trougla pomocu dve stranice i ugla:</strong> \(\displaystyle S = \frac{1}{2}\,b\,c\,\sin A\)</li>
      <li><strong>Alternativno:</strong> \(\displaystyle S = \frac{a \cdot b \cdot c}{4R}\)</li>
      <li><strong>Zapremina prizme:</strong> \(V = P_{\text{osnove}} \cdot H\), gde je \(H\) visina prizme (jednaka visini valjka).</li>
      <li><strong>Adiciona formula:</strong> \(\sin(\alpha - \beta) = \sin\alpha\cos\beta - \cos\alpha\sin\beta\)</li>
    </ul>
  </details>

  <!-- Canvas Visualization -->
  <div class="card canvas-card">
    <h2>3D prikaz: Prizma upisana u valjak</h2>
    <p style="color:#94a3b8; margin-bottom: 14px;">Rotirajte prikaz prevlacenjem levo-desno</p>
    <canvas id="viz-canvas" width="700" height="520"></canvas>
    <p class="drag-hint">Prevucite levo-desno za rotaciju prikaza</p>
  </div>

  <!-- Step-by-step solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <div class="step" id="step-1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Odredimo poluprecnik opisanog kruga</h3>
        <p>Precnik osnove valjka je \(14\sqrt{3}\) cm. Posto je prizma upisana u valjak, temena osnove trougla leze na krugu osnove valjka, pa je poluprecnik opisanog kruga trougla:</p>
        <div class="math-box">
          \[ R = \frac{d}{2} = \frac{14\sqrt{3}}{2} = 7\sqrt{3} \text{ cm} \]
        </div>
        <p>Visina prizme jednaka je visini valjka: \(H = 20\) cm.</p>
      </div>
    </div>

    <div class="step" id="step-2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Identifikujemo elemente trougla</h3>
        <p>U trouglu \(ABC\) imamo:</p>
        <div class="math-box">
          \[ BC = a = 9 \text{ cm}, \quad \angle B = 120° \]
        </div>
        <p>Ugao naspram stranice \(AC\) je ugao pri temenu \(B\) (jer se stranica \(AC\) nalazi naspram temena \(B\)).</p>
      </div>
    </div>

    <div class="step" id="step-3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Izracunajmo stranicu \(AC\) pomocu sinusne teoreme</h3>
        <p>Primenimo sinusnu teoremu za stranicu \(AC = b\) i ugao \(B\):</p>
        <div class="math-box">
          \[ \frac{AC}{\sin B} = 2R \]
          \[ AC = 2R \cdot \sin 120° = 14\sqrt{3} \cdot \frac{\sqrt{3}}{2} \]
          \[ AC = \frac{14 \cdot 3}{2} = 21 \text{ cm} \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Koliko je \(\sin 120°\)?</summary>
      <p>\(\sin 120° = \sin(180° - 60°) = \sin 60° = \dfrac{\sqrt{3}}{2}\). Ovo je standardna vrednost koju treba znati napamet.</p>
    </details>

    <div class="step" id="step-4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Nadjimo ugao \(A\)</h3>
        <p>Primenimo sinusnu teoremu za stranicu \(BC = a = 9\) i ugao \(A\):</p>
        <div class="math-box">
          \[ \frac{BC}{\sin A} = 2R \implies \sin A = \frac{BC}{2R} = \frac{9}{14\sqrt{3}} \]
          \[ \sin A = \frac{9}{14\sqrt{3}} \cdot \frac{\sqrt{3}}{\sqrt{3}} = \frac{9\sqrt{3}}{42} = \frac{3\sqrt{3}}{14} \]
        </div>
      </div>
    </div>

    <div class="step" id="step-5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Izracunajmo \(\cos A\)</h3>
        <p>Koristimo osnovni trigonometrijski identitet \(\sin^2 A + \cos^2 A = 1\):</p>
        <div class="math-box">
          \[ \sin^2 A = \left(\frac{3\sqrt{3}}{14}\right)^2 = \frac{9 \cdot 3}{196} = \frac{27}{196} \]
          \[ \cos^2 A = 1 - \frac{27}{196} = \frac{169}{196} \]
          \[ \cos A = \frac{13}{14} \]
        </div>
        <p>Uzimamo pozitivnu vrednost jer je \(\angle A\) ost ugao (zbir uglova trougla je \(180°\), a \(\angle B = 120°\), pa su \(\angle A\) i \(\angle C\) ostri).</p>
      </div>
    </div>

    <div class="step" id="step-6">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Nadjimo ugao \(C\) i stranicu \(AB\)</h3>
        <p>Posto je zbir uglova \(A + B + C = 180°\), sledi \(C = 60° - A\). Koristimo adicionu formulu:</p>
        <div class="math-box">
          \[ \sin C = \sin(60° - A) = \sin 60° \cos A - \cos 60° \sin A \]
          \[ = \frac{\sqrt{3}}{2} \cdot \frac{13}{14} - \frac{1}{2} \cdot \frac{3\sqrt{3}}{14} \]
          \[ = \frac{13\sqrt{3}}{28} - \frac{3\sqrt{3}}{28} = \frac{10\sqrt{3}}{28} = \frac{5\sqrt{3}}{14} \]
        </div>
        <p>Sada nadjimo stranicu \(AB = c\):</p>
        <div class="math-box">
          \[ c = 2R \cdot \sin C = 14\sqrt{3} \cdot \frac{5\sqrt{3}}{14} = 5 \cdot 3 = 15 \text{ cm} \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Koliki je zbir uglova \(A + C\)?</summary>
      <p>Posto je \(\angle B = 120°\), imamo \(\angle A + \angle C = 180° - 120° = 60°\). Oba ugla su ostra, sto je u skladu sa tim da trougao ima jedan tup ugao.</p>
    </details>

    <div class="step" id="step-7">
      <div class="step-badge">7</div>
      <div class="step-content">
        <h3>Izracunajmo povrsinu trougla \(ABC\)</h3>
        <p>Koristimo formulu \(S = \frac{1}{2} \cdot b \cdot c \cdot \sin A\) gde su \(b = AC = 21\), \(c = AB = 15\):</p>
        <div class="math-box">
          \[ S = \frac{1}{2} \cdot 21 \cdot 15 \cdot \frac{3\sqrt{3}}{14} \]
          \[ S = \frac{1}{2} \cdot \frac{21 \cdot 15 \cdot 3\sqrt{3}}{14} = \frac{1}{2} \cdot \frac{945\sqrt{3}}{14} \]
          \[ S = \frac{945\sqrt{3}}{28} \text{ cm}^2 \]
        </div>
      </div>
    </div>

    <div class="step" id="step-8">
      <div class="step-badge">8</div>
      <div class="step-content">
        <h3>Proverimo povrsinu alternativnom formulom</h3>
        <p>Formula \(S = \dfrac{a \cdot b \cdot c}{4R}\) daje:</p>
        <div class="math-box">
          \[ S = \frac{9 \cdot 21 \cdot 15}{4 \cdot 7\sqrt{3}} = \frac{2835}{28\sqrt{3}} = \frac{2835\sqrt{3}}{84} = \frac{945\sqrt{3}}{28} \; \checkmark \]
        </div>
      </div>
    </div>

    <div class="step" id="step-9">
      <div class="step-badge">9</div>
      <div class="step-content">
        <h3>Izracunajmo zapreminu prizme</h3>
        <p>Zapremina prave prizme jednaka je proizvodu povrsine osnove i visine:</p>
        <div class="math-box">
          \[ V = S \cdot H = \frac{945\sqrt{3}}{28} \cdot 20 = \frac{18900\sqrt{3}}{28} = 675\sqrt{3} \text{ cm}^3 \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Koliko je \(\frac{18900}{28}\)?</summary>
      <p>\(\dfrac{18900}{28} = \dfrac{4725}{7} = 675\). Mozemo proveriti: \(675 \cdot 28 = 675 \cdot 28 = 18900\). Tacno!</p>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="card insight-card">
    <h2>Kljucni uvid</h2>
    <p>Kada je prizma upisana u valjak, temena osnove prizme leze na krugu osnove valjka. To znaci da je poluprecnik opisanog kruga trougla jednak poluprecniku osnove valjka. Sinusna teorema \(\frac{a}{\sin A} = 2R\) direktno povezuje stranice i uglove trougla sa tim poluprecnikom, sto nam omogucava da nadjemo sve potrebne elemente trougla iz samo dva podatka (jedna stranica i jedan ugao).</p>
    <div class="math-box" style="text-align:center; font-size: 1.2rem;">
      \[ V = \frac{945\sqrt{3}}{28} \cdot 20 = 675\sqrt{3} \text{ cm}^3 \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer">
    <h2>Konacan odgovor</h2>
    <div class="answer-big">\(V = 675\sqrt{3} \text{ cm}^3\)</div>

    <div class="options-row">
      <div class="option-box">
        <div class="opt-label">(A)</div>
        <div class="opt-value">\(1890\sqrt{3}\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(B)</div>
        <div class="opt-value">\(3780\sqrt{3}\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(C)</div>
        <div class="opt-value">\(810\sqrt{3}\)</div>
      </div>
      <div class="option-box correct">
        <div class="opt-label">(D)</div>
        <div class="opt-value">\(675\sqrt{3}\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(E)</div>
        <div class="opt-value">\(825\sqrt{3}\)</div>
      </div>
    </div>

    <p class="verification"><strong>Provera:</strong> Stranice trougla su \(a = 9\), \(b = 21\), \(c = 15\) cm. Sve tri stranice zadovoljavaju nejednakost trougla. Opisani poluprecnik \(R = \frac{a}{2\sin A} = \frac{9}{2 \cdot \frac{3\sqrt{3}}{14}} = \frac{9 \cdot 14}{6\sqrt{3}} = \frac{126}{6\sqrt{3}} = \frac{21}{\sqrt{3}} = 7\sqrt{3}\) cm &#x2714;. Zapremina \(675\sqrt{3} \approx 1169\) cm\(^3\) je razumna za valjak tog precnika i visine.</p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Ceste greske</h2>
    <ul class="pitfall-list">
      <li><strong>Pogresna identifikacija ugla:</strong> "Ugao naspram stranice \(AC\)" je ugao pri temenu \(B\), ne ugao \(C\). Ugao naspram stranice je uvek ugao u temenu koje NE pripada toj stranici.</li>
      <li><strong>Zaboravljanje racionalizacije:</strong> Prilikom deljenja sa \(\sqrt{3}\) (npr. \(\frac{9}{14\sqrt{3}}\)), treba racionalizovati imenilac mnozenjem i brojioca i imenioca sa \(\sqrt{3}\).</li>
      <li><strong>Zamena precnika i poluprecnika:</strong> Precnik valjka je \(14\sqrt{3}\), ali u sinusnoj teoremi figurise poluprecnik \(R = 7\sqrt{3}\). Cesta greska je koristiti precnik umesto poluprecnika.</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Koja je maksimalna moguca zapremina prave trostrane prizme koja se moze upisati u isti valjak (precnik osnove \(14\sqrt{3}\) cm, visina \(20\) cm)?</p>
    <details>
      <summary>Pomoc</summary>
      <p>Maksimalna povrsina trougla upisanog u krug poluprecnika \(R\) dobija se za jednakostranicni trougao. Stranica jednakostranicnog trougla upisanog u krug poluprecnika \(R\) iznosi \(a = R\sqrt{3}\). Povrsina je \(S = \frac{a^2\sqrt{3}}{4}\). Za \(R = 7\sqrt{3}\): \(a = 7\sqrt{3} \cdot \sqrt{3} = 21\) cm, \(S = \frac{441\sqrt{3}}{4}\) cm\(^2\), \(V = \frac{441\sqrt{3}}{4} \cdot 20 = 2205\sqrt{3}\) cm\(^3\).</p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('viz-canvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  let angleY = 0.45;
  let dragging = false;
  let lastX = 0;

  // 3D projection parameters
  const cx = W / 2;
  const cy = H / 2 + 30;
  const scale = 18;

  // Cylinder parameters
  const R3d = 7 * Math.sqrt(3); // radius ~12.12
  const height3d = 20;

  // Triangle vertices on circumscribed circle
  // BC = 9, angle B = 120 deg, AC = 21, AB = 15
  // Place triangle on circle of radius R = 7*sqrt(3)
  // Using computed angles: sin A = 3*sqrt(3)/14, cos A = 13/14
  // A ~ 21.79 deg, B = 120 deg, C ~ 38.21 deg
  // Central angles: arc BC = 2A, arc AC = 2B = 240 deg, arc AB = 2C
  // Let's place vertices by central angles
  // Place A at angle 0, then B at angle corresponding to arc AB (= 2C)
  // arc subtended by AB at center = 2C
  // sin C = 5*sqrt(3)/14, C = arcsin(5*sqrt(3)/14)
  const sinA = 3 * Math.sqrt(3) / 14;
  const angA = Math.asin(sinA);
  const sinC = 5 * Math.sqrt(3) / 14;
  const angC = Math.asin(sinC);
  // Central angle for arc opposite to vertex = 2 * inscribed angle at that vertex
  // Arc BC (opposite A) = 2*angA
  // Arc AC (opposite B) = 2*120*pi/180 = 240 deg = 4*pi/3
  // Arc AB (opposite C) = 2*angC

  // Place vertex A at theta0
  const theta0 = -Math.PI / 2; // top
  // Vertex B: go counterclockwise by arc AB = 2*angC
  const thetaB = theta0 + 2 * angC;
  // Vertex C: go clockwise from A by arc AC... Actually let's use the other direction
  // Going around: A -> B via arc AB (2C), B -> C via arc BC (2A), C -> A via arc CA (2B)
  const thetaC_val = thetaB + 2 * angA;

  // 3D vertices of the bottom triangle
  function getTriVerts() {
    return [
      { x: R3d * Math.cos(theta0), z: R3d * Math.sin(theta0), y: -height3d / 2 },
      { x: R3d * Math.cos(thetaB), z: R3d * Math.sin(thetaB), y: -height3d / 2 },
      { x: R3d * Math.cos(thetaC_val), z: R3d * Math.sin(thetaC_val), y: -height3d / 2 }
    ];
  }

  function project(p) {
    // Rotate around Y axis
    const cosA2 = Math.cos(angleY);
    const sinA2 = Math.sin(angleY);
    const rx = p.x * cosA2 - p.z * sinA2;
    const rz = p.x * sinA2 + p.z * cosA2;
    // Slight tilt for 3D effect
    const tilt = 0.35;
    const cosT = Math.cos(tilt);
    const sinT = Math.sin(tilt);
    const ry2 = p.y * cosT - rz * sinT;
    const rz2 = p.y * sinT + rz * cosT;
    return { x: cx + rx * scale, y: cy - ry2 * scale, depth: rz2 };
  }

  function drawEllipse(yLevel, color, lineWidth, dash) {
    ctx.strokeStyle = color;
    ctx.lineWidth = lineWidth;
    ctx.setLineDash(dash || []);
    ctx.beginPath();
    const pts = [];
    for (let i = 0; i <= 72; i++) {
      const theta = (i / 72) * 2 * Math.PI;
      const p = project({ x: R3d * Math.cos(theta), z: R3d * Math.sin(theta), y: yLevel });
      pts.push(p);
      if (i === 0) ctx.moveTo(p.x, p.y);
      else ctx.lineTo(p.x, p.y);
    }
    ctx.stroke();
    ctx.setLineDash([]);
    return pts;
  }

  function draw() {
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    const halfH = height3d / 2;
    const bottomVerts = getTriVerts();
    const topVerts = bottomVerts.map(v => ({ x: v.x, z: v.z, y: halfH }));

    // Project all
    const bProj = bottomVerts.map(project);
    const tProj = topVerts.map(project);

    // Draw bottom ellipse (dashed for back parts)
    drawEllipse(-halfH, '#334155', 1.5, [4, 4]);

    // Draw cylinder vertical lines (back)
    const vertLines = 24;
    for (let i = 0; i < vertLines; i++) {
      const theta = (i / vertLines) * 2 * Math.PI;
      const bottom = project({ x: R3d * Math.cos(theta), z: R3d * Math.sin(theta), y: -halfH });
      const top = project({ x: R3d * Math.cos(theta), z: R3d * Math.sin(theta), y: halfH });
      if (bottom.depth < 0) {
        ctx.strokeStyle = 'rgba(51,65,85,0.25)';
        ctx.lineWidth = 0.5;
        ctx.setLineDash([3, 5]);
        ctx.beginPath();
        ctx.moveTo(bottom.x, bottom.y);
        ctx.lineTo(top.x, top.y);
        ctx.stroke();
        ctx.setLineDash([]);
      }
    }

    // Draw prism faces (back faces first, then front)
    // Determine face visibility by normal direction
    const faces = [
      { vb: [0, 1], label: 'AB side' },
      { vb: [1, 2], label: 'BC side' },
      { vb: [2, 0], label: 'CA side' }
    ];

    // Sort faces back to front
    faces.forEach(f => {
      const midZ = (bProj[f.vb[0]].depth + bProj[f.vb[1]].depth +
                     tProj[f.vb[0]].depth + tProj[f.vb[1]].depth) / 4;
      f.midDepth = midZ;
    });
    faces.sort((a, b) => a.midDepth - b.midDepth);

    // Draw lateral faces
    faces.forEach(f => {
      const i0 = f.vb[0], i1 = f.vb[1];
      ctx.fillStyle = f.midDepth < 0 ? 'rgba(96,165,250,0.04)' : 'rgba(96,165,250,0.08)';
      ctx.strokeStyle = f.midDepth < 0 ? 'rgba(96,165,250,0.15)' : 'rgba(96,165,250,0.4)';
      ctx.lineWidth = f.midDepth < 0 ? 1 : 1.5;
      if (f.midDepth < 0) ctx.setLineDash([4, 4]);
      ctx.beginPath();
      ctx.moveTo(bProj[i0].x, bProj[i0].y);
      ctx.lineTo(bProj[i1].x, bProj[i1].y);
      ctx.lineTo(tProj[i1].x, tProj[i1].y);
      ctx.lineTo(tProj[i0].x, tProj[i0].y);
      ctx.closePath();
      ctx.fill();
      ctx.stroke();
      ctx.setLineDash([]);
    });

    // Draw front cylinder vertical lines
    for (let i = 0; i < vertLines; i++) {
      const theta = (i / vertLines) * 2 * Math.PI;
      const bottom = project({ x: R3d * Math.cos(theta), z: R3d * Math.sin(theta), y: -halfH });
      const top = project({ x: R3d * Math.cos(theta), z: R3d * Math.sin(theta), y: halfH });
      if (bottom.depth >= 0) {
        ctx.strokeStyle = 'rgba(51,65,85,0.35)';
        ctx.lineWidth = 0.5;
        ctx.beginPath();
        ctx.moveTo(bottom.x, bottom.y);
        ctx.lineTo(top.x, top.y);
        ctx.stroke();
      }
    }

    // Draw top ellipse
    drawEllipse(halfH, '#475569', 1.5);

    // Draw bottom triangle
    ctx.strokeStyle = 'rgba(96,165,250,0.5)';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([4, 4]);
    ctx.beginPath();
    ctx.moveTo(bProj[0].x, bProj[0].y);
    ctx.lineTo(bProj[1].x, bProj[1].y);
    ctx.lineTo(bProj[2].x, bProj[2].y);
    ctx.closePath();
    ctx.stroke();
    ctx.setLineDash([]);

    // Draw top triangle (solid)
    ctx.fillStyle = 'rgba(96,165,250,0.1)';
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(tProj[0].x, tProj[0].y);
    ctx.lineTo(tProj[1].x, tProj[1].y);
    ctx.lineTo(tProj[2].x, tProj[2].y);
    ctx.closePath();
    ctx.fill();
    ctx.stroke();

    // Draw vertical edges of prism
    for (let i = 0; i < 3; i++) {
      ctx.strokeStyle = '#60a5fa';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(bProj[i].x, bProj[i].y);
      ctx.lineTo(tProj[i].x, tProj[i].y);
      ctx.stroke();
    }

    // Draw radius line from center to vertex A (top)
    const centerTop = project({ x: 0, z: 0, y: halfH });
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([5, 4]);
    ctx.beginPath();
    ctx.moveTo(centerTop.x, centerTop.y);
    ctx.lineTo(tProj[0].x, tProj[0].y);
    ctx.stroke();
    ctx.setLineDash([]);

    // Labels for vertices
    ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    const labels = ['A', 'B', 'C'];
    const offsets = [
      { dx: 0, dy: -14 },
      { dx: 14, dy: 6 },
      { dx: -14, dy: 6 }
    ];
    for (let i = 0; i < 3; i++) {
      // Top vertex labels
      ctx.fillStyle = '#4ade80';
      ctx.fillText(labels[i], tProj[i].x + offsets[i].dx, tProj[i].y + offsets[i].dy);
    }

    // Dimension labels on edges (top face)
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';

    // BC = 9
    const midBC_x = (tProj[1].x + tProj[2].x) / 2;
    const midBC_y = (tProj[1].y + tProj[2].y) / 2;
    ctx.fillStyle = '#f472b6';
    ctx.fillText('BC = 9', midBC_x, midBC_y - 10);

    // AC = 21
    const midAC_x = (tProj[0].x + tProj[2].x) / 2;
    const midAC_y = (tProj[0].y + tProj[2].y) / 2;
    ctx.fillStyle = '#f472b6';
    ctx.fillText('AC = 21', midAC_x - 20, midAC_y);

    // AB = 15
    const midAB_x = (tProj[0].x + tProj[1].x) / 2;
    const midAB_y = (tProj[0].y + tProj[1].y) / 2;
    ctx.fillStyle = '#f472b6';
    ctx.fillText('AB = 15', midAB_x + 22, midAB_y);

    // R label
    const midR_x = (centerTop.x + tProj[0].x) / 2;
    const midR_y = (centerTop.y + tProj[0].y) / 2;
    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.fillText('R = 7\u221A3', midR_x + 10, midR_y + 4);

    // Height label
    const hMid = project({ x: R3d + 2, z: 0, y: 0 });
    const hTop = project({ x: R3d + 2, z: 0, y: halfH });
    const hBot = project({ x: R3d + 2, z: 0, y: -halfH });
    ctx.strokeStyle = '#34d399';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([3, 3]);
    ctx.beginPath();
    ctx.moveTo(hBot.x, hBot.y);
    ctx.lineTo(hTop.x, hTop.y);
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = '#34d399';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('H = 20', hMid.x + 8, hMid.y);

    // Angle B label
    // Draw arc at vertex B on top face
    const bAngle1 = Math.atan2(tProj[0].y - tProj[1].y, tProj[0].x - tProj[1].x);
    const bAngle2 = Math.atan2(tProj[2].y - tProj[1].y, tProj[2].x - tProj[1].x);
    ctx.strokeStyle = '#fbbf24';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.arc(tProj[1].x, tProj[1].y, 20, Math.min(bAngle1, bAngle2), Math.max(bAngle1, bAngle2));
    ctx.stroke();
    ctx.fillStyle = '#fbbf24';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    const arcMidAngle = (bAngle1 + bAngle2) / 2;
    ctx.fillText('120\u00B0', tProj[1].x + 30 * Math.cos(arcMidAngle), tProj[1].y + 30 * Math.sin(arcMidAngle));

    // Center dot
    ctx.fillStyle = '#a78bfa';
    ctx.beginPath();
    ctx.arc(centerTop.x, centerTop.y, 3, 0, Math.PI * 2);
    ctx.fill();
  }

  draw();

  // Mouse drag interaction
  canvas.addEventListener('mousedown', (e) => {
    dragging = true;
    lastX = e.clientX;
  });
  canvas.addEventListener('mousemove', (e) => {
    if (!dragging) return;
    const dx = e.clientX - lastX;
    angleY += dx * 0.008;
    lastX = e.clientX;
    draw();
  });
  canvas.addEventListener('mouseup', () => { dragging = false; });
  canvas.addEventListener('mouseleave', () => { dragging = false; });

  // Touch support
  canvas.addEventListener('touchstart', (e) => {
    dragging = true;
    lastX = e.touches[0].clientX;
  });
  canvas.addEventListener('touchmove', (e) => {
    if (!dragging) return;
    const dx = e.touches[0].clientX - lastX;
    angleY += dx * 0.008;
    lastX = e.touches[0].clientX;
    draw();
  });
  canvas.addEventListener('touchend', () => { dragging = false; });

  // Step click interactivity
  const steps = document.querySelectorAll('.step');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.add('active');
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Zapremina prizme upisane u valjak",
  "subject": "math",
  "unit": "geometry",
  "topic_tags": ["stereometrija", "sinusna teorema", "opisani krug", "prizma", "valjak", "zapremina"]
}
BRAINSPARK_META-->