<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kolicnik geometrijske progresije iz aritmeticke</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM:
Zbir prva tri clana rastuce aritmeticke progresije je 54. Ako od prvog clana
te progresije oduzmemo 3, drugi clan ostane nepromenjen, a trecem clanu dodamo 12,
dobijamo prva tri clana geometrijske progresije. Kolicnik te geometrijske progresije je:
(A) 6  (B) 2  (C) -3  (D) 1/2  (E) 1/6

SOLUTION:

Step 1: Parametrize the AP.
  Let AP members be: a-d, a, a+d where d > 0 (increasing).
  Sum = (a-d) + a + (a+d) = 3a = 54 => a = 18.
  AP: 18-d, 18, 18+d.

Step 2: Form the GP.
  GP: (18-d) - 3, 18, (18+d) + 12 = (15-d), 18, (30+d).

Step 3: Use GP condition (middle term squared = product of outer terms).
  18^2 = (15-d)(30+d)
  324 = 450 + 15d - 30d - d^2
  324 = 450 - 15d - d^2
  d^2 + 15d - 126 = 0

Step 4: Solve the quadratic.
  d = (-15 +/- sqrt(225 + 504)) / 2
  d = (-15 +/- sqrt(729)) / 2
  d = (-15 +/- 27) / 2
  d = 6 or d = -21.
  Since d > 0 (increasing AP), d = 6.

Step 5: Find the ratio.
  AP: 12, 18, 24.
  GP: 9, 18, 36.
  Ratio q = 18/9 = 2.

ANSWER: (B) 2
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
  transition: border-color 0.2s;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 10px 0;
  user-select: none;
}

details summary:hover {
  color: #93bbfc;
}

details[open] summary {
  margin-bottom: 10px;
}

.theory-content ul {
  list-style: none;
  padding-left: 0;
}

.theory-content li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #cbd5e1;
}

.theory-content li:last-child {
  border-bottom: none;
}

.canvas-card {
  text-align: center;
}

canvas {
  border-radius: 10px;
  width: 100%;
  max-width: 650px;
  touch-action: none;
}

.drag-hint {
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

.step-container {
  margin-bottom: 18px;
  padding: 18px;
  padding-left: 24px;
  background: rgba(30,41,59,0.5);
  border-left: 3px solid #334155;
  border-radius: 0 10px 10px 0;
  cursor: pointer;
  transition: border-color 0.25s, background 0.25s;
}

.step-container:hover,
.step-container.active {
  border-left-color: #4ade80;
  background: rgba(30,41,59,0.9);
}

.step-badge {
  display: inline-block;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  font-weight: 700;
  font-size: 0.8rem;
  padding: 3px 10px;
  border-radius: 20px;
  margin-bottom: 8px;
}

.step-title {
  font-size: 1.1rem;
  font-weight: 600;
  color: #e2e8f0;
  margin-bottom: 8px;
}

.step-text {
  color: #cbd5e1;
  font-size: 0.97rem;
}

.checkpoint {
  background: rgba(167,139,250,0.08);
  border: 1px solid rgba(167,139,250,0.2);
  border-radius: 8px;
  padding: 12px 16px;
  margin: 15px 0;
}

.checkpoint summary {
  color: #a78bfa;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.25);
  border-radius: 14px;
  padding: 22px;
  margin-bottom: 24px;
}

.insight-box h3 {
  color: #a78bfa;
  margin-bottom: 10px;
}

.insight-formula {
  text-align: center;
  font-size: 1.3rem;
  margin: 14px 0;
}

.final-answer {
  text-align: center;
  padding: 30px;
  border: 2px solid rgba(74,222,128,0.3);
  background: rgba(74,222,128,0.06);
}

.final-answer .answer-value {
  font-size: 2rem;
  font-weight: 700;
  color: #4ade80;
  margin: 16px 0;
}

.final-answer .answer-label {
  color: #94a3b8;
  font-size: 0.95rem;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 12px;
  margin: 20px 0;
}

.option-box {
  padding: 12px 22px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: rgba(30,41,59,0.6);
  color: #94a3b8;
  font-size: 1.05rem;
  font-weight: 600;
  transition: all 0.3s;
}

.option-box.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.12);
  color: #4ade80;
}

.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 0;
  padding-left: 16px;
  position: relative;
  color: #cbd5e1;
}

.pitfall-list li::before {
  content: '\26A0';
  position: absolute;
  left: 0;
}

.challenge-box {
  border-left: 3px solid #f472b6;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 10px;
}

.slider-container {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 14px;
  margin: 14px 0 6px 0;
  flex-wrap: wrap;
}

.slider-container label {
  color: #94a3b8;
  font-size: 0.95rem;
}

.slider-container input[type="range"] {
  accent-color: #60a5fa;
  width: 200px;
}

.slider-value {
  color: #60a5fa;
  font-weight: 700;
  font-size: 1rem;
  min-width: 60px;
  text-align: center;
}

.seq-display {
  display: flex;
  justify-content: center;
  gap: 18px;
  flex-wrap: wrap;
  margin: 12px 0;
}

.seq-term {
  background: rgba(96,165,250,0.1);
  border: 1px solid rgba(96,165,250,0.25);
  border-radius: 10px;
  padding: 10px 18px;
  text-align: center;
  min-width: 70px;
}

.seq-term .term-label {
  color: #94a3b8;
  font-size: 0.75rem;
  margin-bottom: 2px;
}

.seq-term .term-value {
  color: #e2e8f0;
  font-size: 1.2rem;
  font-weight: 700;
}

.seq-term.gp-term {
  background: rgba(52,211,153,0.1);
  border-color: rgba(52,211,153,0.25);
}

.arrow-between {
  display: flex;
  align-items: center;
  color: #64748b;
  font-size: 1.2rem;
}

@media (max-width: 700px) {
  h1 { font-size: 1.5rem; }
  .container { padding: 10px; }
  .card { padding: 16px; }
  .given-grid { flex-direction: column; }
  .options-row { flex-direction: column; align-items: center; }
  .slider-container { flex-direction: column; }
  .seq-display { gap: 8px; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Kolicnik geometrijske progresije iz aritmeticke</h1>
  <p class="subtitle">Algebra, aritmeticka progresija, geometrijska progresija, kvadratna jednacina</p>

  <!-- PROBLEM STATEMENT -->
  <div class="card problem-statement">
    <h2>Zadatak</h2>
    <p>Zbir prva tri clana rastuce aritmeticke progresije je 54. Ako od prvog clana te progresije oduzmemo 3, drugi clan ostane nepromenjen, a trecem clanu dodamo 12, dobijamo prva tri clana geometrijske progresije. Kolicnik te geometrijske progresije je:</p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(6\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(2\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(-3\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(\dfrac{1}{2}\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(\dfrac{1}{6}\)</div>
      </div>
    </div>
  </div>

  <!-- PLAN -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>Tri clana aritmeticke progresije (AP) parametrizujemo kao \( a - d,\; a,\; a + d \), gde je \( d > 0 \) jer je progresija rastuca. Iz uslova za zbir nalazimo \( a \). Zatim formiramo geometrijsku progresiju (GP) po zadatim transformacijama i koristimo <span class="highlight">uslov za GP</span> (kvadrat srednjeg clana jednak proizvodu krajnjih) da dobijemo kvadratnu jednacinu po \( d \). Na kraju racunamo kolicnik.</p>
  </div>

  <!-- THEORY -->
  <div class="card">
    <details>
      <summary>Kljucne formule i teoreme</summary>
      <div class="theory-content">
        <ul>
          <li><strong>Aritmeticka progresija (AP):</strong> Niz oblika \( a_1,\; a_1 + d,\; a_1 + 2d,\; \ldots \) gde je \( d \) zajednicka razlika. Tri clana simetricno: \( a - d,\; a,\; a + d \) sa zbirom \( 3a \).</li>
          <li><strong>Geometrijska progresija (GP):</strong> Niz oblika \( b_1,\; b_1 q,\; b_1 q^2,\; \ldots \) gde je \( q \) kolicnik. Uslov: \( b_2^2 = b_1 \cdot b_3 \).</li>
          <li><strong>Kvadratna jednacina:</strong> \( ax^2 + bx + c = 0 \) ima resenja \( x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a} \).</li>
          <li><strong>Veza AP i GP:</strong> Kada se clanovi AP transformisu u GP, dobija se algebarski uslov koji vodi na kvadratnu jednacinu po razlici \( d \).</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- VISUAL AID -->
  <div class="card canvas-card">
    <h2>Interaktivni prikaz</h2>
    <p style="color:#94a3b8; margin-bottom:14px;">Vizuelizacija transformacije iz AP u GP. Pomerajte klizac da vidite kako razlika \(d\) utice na oba niza.</p>
    <div class="slider-container">
      <label for="sliderD">Razlika \(d\):</label>
      <input type="range" id="sliderD" min="1" max="14" step="0.5" value="6">
      <span class="slider-value" id="sliderDVal">6</span>
    </div>
    <canvas id="diagram" width="650" height="460"></canvas>
    <p class="drag-hint">Pomerajte klizac da istrazite kako razlicite vrednosti razlike \(d\) uticu na formiranje GP</p>
  </div>

  <!-- STEP-BY-STEP -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container" id="step1">
      <span class="step-badge">Korak 1</span>
      <div class="step-title">Parametrizacija aritmeticke progresije</div>
      <div class="step-text">
        <p>Neka su tri clana rastuce AP:</p>
        <div class="math-box">
          \[ a - d, \quad a, \quad a + d \quad (d > 0) \]
        </div>
        <p>Ova simetricna parametrizacija omogucava da se zbir izrazi veoma jednostavno:</p>
        <div class="math-box">
          \[ (a - d) + a + (a + d) = 3a = 54 \implies a = 18 \]
        </div>
        <p>Dakle, AP glasi: \( 18 - d, \; 18, \; 18 + d \).</p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container" id="step2">
      <span class="step-badge">Korak 2</span>
      <div class="step-title">Formiranje geometrijske progresije</div>
      <div class="step-text">
        <p>Prema uslovu zadatka, od prvog clana AP oduzimamo 3, drugi clan ostaje nepromenjen, a trecem dodajemo 12:</p>
        <div class="math-box">
          \[ \text{GP}: \quad (18 - d) - 3, \quad 18, \quad (18 + d) + 12 \]
          \[ \text{GP}: \quad 15 - d, \quad 18, \quad 30 + d \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri se: Zasto koristimo simetricnu parametrizaciju za AP?</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        Kada pisemo tri clana AP kao \( a - d,\; a,\; a + d \), razlike \( d \) se poniste u zbiru, pa direktno dobijamo \( 3a = S \). Da smo pisali \( a_1,\; a_1 + d,\; a_1 + 2d \), zbir bi bio \( 3a_1 + 3d = 54 \), sto daje jednu jednacinu sa dva nepoznate &mdash; teze za rad. Simetricna forma odmah eliminise jednu nepoznatu.
      </p>
    </details>

    <!-- Step 3 -->
    <div class="step-container" id="step3">
      <span class="step-badge">Korak 3</span>
      <div class="step-title">Uslov za geometrijsku progresiju</div>
      <div class="step-text">
        <p>Tri broja \( b_1, b_2, b_3 \) cine GP ako i samo ako vazi:</p>
        <div class="math-box">
          \[ b_2^2 = b_1 \cdot b_3 \]
        </div>
        <p>Primenjujemo na nase clanove GP:</p>
        <div class="math-box">
          \[ 18^2 = (15 - d)(30 + d) \]
          \[ 324 = 450 + 15d - 30d - d^2 \]
          \[ 324 = 450 - 15d - d^2 \]
        </div>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step-container" id="step4">
      <span class="step-badge">Korak 4</span>
      <div class="step-title">Kvadratna jednacina po \(d\)</div>
      <div class="step-text">
        <p>Preuredimo jednacinu u standardni oblik:</p>
        <div class="math-box">
          \[ d^2 + 15d - 126 = 0 \]
        </div>
        <p>Primenjujemo formulu za resenja kvadratne jednacine:</p>
        <div class="math-box">
          \[ d = \frac{-15 \pm \sqrt{15^2 + 4 \cdot 126}}{2} = \frac{-15 \pm \sqrt{225 + 504}}{2} = \frac{-15 \pm \sqrt{729}}{2} \]
        </div>
        <p>Kako je \( \sqrt{729} = 27 \):</p>
        <div class="math-box">
          \[ d = \frac{-15 + 27}{2} = 6 \quad \text{ili} \quad d = \frac{-15 - 27}{2} = -21 \]
        </div>
        <p>Posto je AP rastuca, mora biti \( d > 0 \), pa je \( d = 6 \).</p>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri se: Zasto odbacujemo \(d = -21\)?</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        Zadatak eksplicitno kaze da je aritmeticka progresija <em>rastuca</em>, sto znaci da je razlika \( d > 0 \). Za \( d = -21 \), AP bi bila: \( 39,\; 18,\; -3 \), sto je opadajuci niz. Takodje, za \( d = -21 \), GP bi bila: \( 36,\; 18,\; 9 \) sa kolicnikom \( q = \frac{1}{2} \). To je matematicki validna GP, ali ne odgovara uslovu da je polazna AP rastuca.
      </p>
    </details>

    <!-- Step 5 -->
    <div class="step-container" id="step5">
      <span class="step-badge">Korak 5</span>
      <div class="step-title">Odredjivanje AP i GP</div>
      <div class="step-text">
        <p>Za \( d = 6 \), aritmeticka progresija glasi:</p>
        <div class="math-box">
          \[ \text{AP}: \quad 18 - 6 = 12, \quad 18, \quad 18 + 6 = 24 \]
        </div>
        <p>Geometrijska progresija je:</p>
        <div class="math-box">
          \[ \text{GP}: \quad 12 - 3 = 9, \quad 18, \quad 24 + 12 = 36 \]
        </div>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step-container" id="step6">
      <span class="step-badge">Korak 6</span>
      <div class="step-title">Racunanje kolicnika GP</div>
      <div class="step-text">
        <p>Kolicnik geometrijske progresije racunamo kao odnos uzastopnih clanova:</p>
        <div class="math-box">
          \[ q = \frac{b_2}{b_1} = \frac{18}{9} = 2 \]
        </div>
        <p>Proverimo i drugi odnos:</p>
        <div class="math-box">
          \[ q = \frac{b_3}{b_2} = \frac{36}{18} = 2 \quad \checkmark \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details class="checkpoint">
      <summary>Proveri se: Kompletna verifikacija svih uslova</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        <strong>AP uslovi:</strong><br>
        - Clanovi: \(12, \; 18, \; 24\). Razlika: \(18 - 12 = 6 = 24 - 18\) &check;<br>
        - Rastuca: \(12 < 18 < 24\) &check;<br>
        - Zbir: \(12 + 18 + 24 = 54\) &check;<br><br>
        <strong>GP uslovi:</strong><br>
        - Transformacija: \(12 - 3 = 9\), \(18\) (nepromenjen), \(24 + 12 = 36\) &check;<br>
        - Kolicnik: \(\frac{18}{9} = \frac{36}{18} = 2\) &check;<br>
        - Uslov \(b_2^2 = b_1 \cdot b_3\): \(18^2 = 324 = 9 \cdot 36\) &check;
      </p>
    </details>
  </div>

  <!-- KEY INSIGHT -->
  <div class="insight-box">
    <h3>Kljucni uvid</h3>
    <p>Simetricna parametrizacija AP kao \( a - d,\; a,\; a + d \) je kljuc efikasnog resavanja. Zbir odmah daje \( a \), a jedina nepoznata ostaje razlika \( d \). Uslov za GP (\( b_2^2 = b_1 \cdot b_3 \)) tada vodi na jednu kvadratnu jednacinu &mdash; ceo problem se svodi na:</p>
    <div class="insight-formula">
      \[ d^2 + 15d - 126 = 0 \implies d = 6 \implies q = 2 \]
    </div>
    <p style="color:#94a3b8; text-align:center;">Dva resenja kvadratne jednacine odgovaraju rastucem i opadajucem nizu.</p>
  </div>

  <!-- FINAL ANSWER -->
  <div class="card final-answer">
    <h2>Konacan odgovor</h2>
    <p class="answer-label">Kolicnik geometrijske progresije je:</p>
    <div class="answer-value">\(\displaystyle (B) \;\; q = 2\)</div>
    <div class="options-row">
      <div class="option-box">(A) \(6\)</div>
      <div class="option-box correct">(B) \(2\)</div>
      <div class="option-box">(C) \(-3\)</div>
      <div class="option-box">(D) \(\frac{1}{2}\)</div>
      <div class="option-box">(E) \(\frac{1}{6}\)</div>
    </div>
    <p class="verification-note">Provera: AP \(12, 18, 24\) (zbir 54, rastuca). GP \(9, 18, 36\) (kolicnik \(q = 2\), \(18^2 = 9 \cdot 36 = 324\) &check;)</p>
  </div>

  <!-- PITFALLS -->
  <div class="card">
    <h2>Ceste greske</h2>
    <ul class="pitfall-list">
      <li>Zaboraviti uslov \(d > 0\): obe vrednosti \(d = 6\) i \(d = -21\) zadovoljavaju algebarski uslov, ali samo \(d = 6\) daje rastucu AP. Za \(d = -21\) kolicnik GP bi bio \(\frac{1}{2}\) (opcija D) &mdash; cesta zamka na testu.</li>
      <li>Pogresno formiranje GP clanova: pazljivo procitati koji clan se menja i kako. Oduzimanje 3 ide na <em>prvi</em> clan, dok se 12 dodaje <em>trecem</em> clanu.</li>
      <li>Greska u znaku pri razvijanju proizvoda \((15 - d)(30 + d)\): cest propust je pogresno izmnoziti \(-d \cdot 30 = -30d\) i \(15 \cdot d = 15d\), i pritom pogresiti u sabiranju.</li>
      <li>Racunanje diskriminante: \(15^2 + 4 \cdot 126 = 225 + 504 = 729\). Treba prepoznati da je \(729 = 27^2\) (jer \(27^2 = 729\)).</li>
    </ul>
  </div>

  <!-- CHALLENGE -->
  <div class="card challenge-box">
    <h2>Dodatni izazov</h2>
    <p>Zbir prva tri clana rastuce aritmeticke progresije je 36. Ako prvom clanu dodamo 1, drugi ostavimo nepromenjen, a od treceg oduzmemo 1, dobijamo tri clana geometrijske progresije. Odredite kolicnik te GP i sve clanove obe progresije.</p>
    <details>
      <summary>Pomoc</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        Isti pristup: \(a = 12\), AP: \(12 - d, \; 12, \; 12 + d\). GP: \(13 - d, \; 12, \; 11 + d\). Uslov \(12^2 = (13 - d)(11 + d)\) daje \(144 = 143 + 2d - d^2\), tj. \(d^2 - 2d + 1 = 0\), odakle \((d-1)^2 = 0\), pa \(d = 1\). AP: \(11, 12, 13\). GP: \(12, 12, 12\), kolicnik \(q = 1\). Razmislite: sta je specificno kod ove GP?
      </p>
    </details>
  </div>

</div>

<script>
(() => {
  // Step click highlighting
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.toggle('active');
    });
  });

  // Canvas diagram
  const canvas = document.getElementById('diagram');
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;
  const slider = document.getElementById('sliderD');
  const sliderVal = document.getElementById('sliderDVal');

  function drawDiagram(d) {
    const a = 18;

    // AP members
    const ap1 = a - d;
    const ap2 = a;
    const ap3 = a + d;

    // GP members
    const gp1 = ap1 - 3;
    const gp2 = ap2;
    const gp3 = ap3 + 12;

    // Check if valid GP
    const isGP = Math.abs(gp2 * gp2 - gp1 * gp3) < 0.5;
    const ratio = gp1 !== 0 ? gp2 / gp1 : NaN;
    const ratio2 = gp2 !== 0 ? gp3 / gp2 : NaN;
    const ratiosMatch = Math.abs(ratio - ratio2) < 0.01;

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Title
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 15px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Transformacija: AP \u2192 GP', 18, 28);

    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, sans-serif';
    ctx.fillText('d = ' + d.toFixed(1).replace('.', ',') + ',  a = 18', 18, 50);

    // Layout: two rows of three boxes with arrows between them
    const boxW = 110;
    const boxH = 70;
    const gap = 50;
    const totalW = 3 * boxW + 2 * gap;
    const startX = (W - totalW) / 2;

    // AP row
    const apY = 100;
    const apMembers = [ap1, ap2, ap3];
    const apLabels = ['a - d', 'a', 'a + d'];
    const apTransforms = ['\u2212 3', 'isto', '+ 12'];

    // GP row
    const gpY = 310;
    const gpMembers = [gp1, gp2, gp3];

    // Draw AP boxes
    ctx.font = '12px Segoe UI, sans-serif';
    ctx.textAlign = 'center';

    for (let i = 0; i < 3; i++) {
      const x = startX + i * (boxW + gap);

      // AP box
      ctx.fillStyle = 'rgba(96, 165, 250, 0.1)';
      ctx.strokeStyle = 'rgba(96, 165, 250, 0.4)';
      ctx.lineWidth = 2;
      roundRect(ctx, x, apY, boxW, boxH, 10);
      ctx.fill();
      ctx.stroke();

      // AP label
      ctx.fillStyle = '#94a3b8';
      ctx.font = '11px Segoe UI, sans-serif';
      ctx.fillText(apLabels[i], x + boxW / 2, apY - 8);

      // AP value
      ctx.fillStyle = '#60a5fa';
      ctx.font = 'bold 22px Segoe UI, sans-serif';
      ctx.fillText(formatNum(apMembers[i]), x + boxW / 2, apY + boxH / 2 + 8);

      // Transform arrow
      const arrowStartY = apY + boxH + 10;
      const arrowEndY = gpY - 10;
      const arrowX = x + boxW / 2;

      ctx.strokeStyle = '#a78bfa';
      ctx.lineWidth = 2;
      ctx.setLineDash([5, 3]);
      ctx.beginPath();
      ctx.moveTo(arrowX, arrowStartY);
      ctx.lineTo(arrowX, arrowEndY);
      ctx.stroke();
      ctx.setLineDash([]);

      // Arrowhead
      ctx.fillStyle = '#a78bfa';
      ctx.beginPath();
      ctx.moveTo(arrowX, arrowEndY);
      ctx.lineTo(arrowX - 5, arrowEndY - 8);
      ctx.lineTo(arrowX + 5, arrowEndY - 8);
      ctx.closePath();
      ctx.fill();

      // Transform label
      ctx.fillStyle = '#f472b6';
      ctx.font = 'bold 14px Segoe UI, sans-serif';
      ctx.fillText(apTransforms[i], arrowX + 30, (arrowStartY + arrowEndY) / 2 + 4);

      // GP box
      const gpColor = isGP ? 'rgba(52, 211, 153, 0.15)' : 'rgba(248, 113, 113, 0.1)';
      const gpBorder = isGP ? 'rgba(52, 211, 153, 0.5)' : 'rgba(248, 113, 113, 0.4)';
      ctx.fillStyle = gpColor;
      ctx.strokeStyle = gpBorder;
      ctx.lineWidth = 2;
      roundRect(ctx, x, gpY, boxW, boxH, 10);
      ctx.fill();
      ctx.stroke();

      // GP value
      ctx.fillStyle = isGP ? '#34d399' : '#f87171';
      ctx.font = 'bold 22px Segoe UI, sans-serif';
      ctx.fillText(formatNum(gpMembers[i]), x + boxW / 2, gpY + boxH / 2 + 8);
    }

    // Row labels
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 13px Segoe UI, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText('AP:', startX - 12, apY + boxH / 2 + 5);

    ctx.fillStyle = isGP ? '#34d399' : '#f87171';
    ctx.fillText('GP:', startX - 12, gpY + boxH / 2 + 5);

    // Ratio display
    const ratioY = gpY + boxH + 40;

    if (gp1 !== 0 && isFinite(ratio)) {
      // Show ratio between first two
      ctx.fillStyle = '#94a3b8';
      ctx.font = '13px Segoe UI, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('b\u2082 / b\u2081 = ' + formatNum(gp2) + ' / ' + formatNum(gp1) + ' = ' + ratio.toFixed(3).replace('.', ','), W / 2 - 140, ratioY);

      if (gp2 !== 0 && isFinite(ratio2)) {
        ctx.fillText('b\u2083 / b\u2082 = ' + formatNum(gp3) + ' / ' + formatNum(gp2) + ' = ' + ratio2.toFixed(3).replace('.', ','), W / 2 + 140, ratioY);
      }
    }

    // GP validity indicator
    const statusY = ratioY + 30;
    if (isGP && ratiosMatch) {
      ctx.fillStyle = '#34d399';
      ctx.font = 'bold 15px Segoe UI, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('\u2714 Validna GP! Kolicnik q = ' + ratio.toFixed(1).replace('.', ','), W / 2, statusY);
    } else {
      // Show how far from GP condition
      const gpCheck = gp2 * gp2 - gp1 * gp3;
      ctx.fillStyle = '#f87171';
      ctx.font = '14px Segoe UI, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('b\u2082\u00B2 \u2212 b\u2081\u00B7b\u2083 = ' + gpCheck.toFixed(1).replace('.', ',') + ' \u2260 0  (nije GP)', W / 2, statusY);
    }

    // d = 6 indicator
    if (Math.abs(d - 6) < 0.05) {
      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 13px Segoe UI, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText('\u2714 d = 6: Tacan odgovor! q = 2', 18, 72);
    } else if (Math.abs(d - (-21)) < 0.05) {
      ctx.fillStyle = '#fbbf24';
      ctx.font = 'bold 13px Segoe UI, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText('d = \u221221: AP je opadajuca (ne ispunjava uslov)', 18, 72);
    }

    // Sum verification
    const apSum = ap1 + ap2 + ap3;
    ctx.fillStyle = '#64748b';
    ctx.font = '12px Segoe UI, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText('Zbir AP: ' + formatNum(ap1) + ' + ' + formatNum(ap2) + ' + ' + formatNum(ap3) + ' = ' + formatNum(apSum), W - 18, H - 14);
  }

  function formatNum(n) {
    if (Number.isInteger(n)) return n.toString();
    return n.toFixed(1).replace('.', ',');
  }

  function roundRect(ctx, x, y, w, h, r) {
    ctx.beginPath();
    ctx.moveTo(x + r, y);
    ctx.lineTo(x + w - r, y);
    ctx.quadraticCurveTo(x + w, y, x + w, y + r);
    ctx.lineTo(x + w, y + h - r);
    ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
    ctx.lineTo(x + r, y + h);
    ctx.quadraticCurveTo(x, y + h, x, y + h - r);
    ctx.lineTo(x, y + r);
    ctx.quadraticCurveTo(x, y, x + r, y);
    ctx.closePath();
  }

  function update() {
    const dVal = parseFloat(slider.value);
    sliderVal.textContent = dVal.toFixed(1).replace('.', ',');
    drawDiagram(dVal);
  }

  slider.addEventListener('input', update);
  update();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Kolicnik geometrijske progresije iz aritmeticke",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["aritmeticka progresija", "geometrijska progresija", "kvadratna jednacina", "nizovi", "algebra"]
}
BRAINSPARK_META-->