<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Izbor tri broja sa neparnim zbirom iz skupa {1, 2, ..., 40}</title>
<script type="text/info" id="logic-scratchpad">
Problem: Na koliko načina se mogu izabrati tri broja iz skupa {1, 2, 3, ..., 40}
tako da im zbir bude neparan broj?

Analiza parnosti:
Skup {1, 2, ..., 40} ima 20 neparnih i 20 parnih brojeva.
Neparni: {1, 3, 5, ..., 39} — 20 brojeva
Parni: {2, 4, 6, ..., 40} — 20 brojeva

Zbir tri broja je neparan u tačno dva slučaja:
Slučaj 1: Sva tri broja su neparna (N + N + N = N)
Slučaj 2: Tačno jedan neparan i dva parna (N + P + P = N)

Ostali slučajevi daju paran zbir:
- Sva tri parna: P + P + P = P
- Dva neparna i jedan paran: N + N + P = P

Računanje:
Slučaj 1: C(20, 3) = 20! / (3! · 17!) = (20 · 19 · 18) / (3 · 2 · 1) = 6840 / 6 = 1140
Slučaj 2: C(20, 1) · C(20, 2) = 20 · (20 · 19) / (2 · 1) = 20 · 190 = 3800

Ukupno: 1140 + 3800 = 4940

Provera: Ukupan broj načina za izbor 3 iz 40 je C(40, 3) = (40 · 39 · 38) / 6 = 9880
Broj sa parnim zbirom:
- Sva tri parna: C(20, 3) = 1140
- Dva neparna, jedan paran: C(20, 2) · C(20, 1) = 190 · 20 = 3800
Ukupno parnih: 1140 + 3800 = 4940
Neparan + paran = 4940 + 4940 = 9880 = C(40, 3) ✓

Simetrija! Jednako je verovatno dobiti paran i neparan zbir — po 4940 načina.

Odgovor: (D) 4940
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  font-size: 1.05rem;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
  transition: transform 0.2s, border-color 0.2s;
}

.given-item:hover {
  transform: translateY(-2px);
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
}

/* Plan card */
.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card h2 {
  color: #a78bfa;
}

/* Details/collapsible */
details {
  margin: 15px 0;
  background: rgba(167,139,250,0.06);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 1.05rem;
  user-select: none;
}

details summary:hover {
  color: #c4b5fd;
}

details[open] summary {
  margin-bottom: 12px;
}

details ul {
  list-style: none;
  padding-left: 0;
}

details li {
  padding: 6px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #e2e8f0;
}

details li:last-child {
  border-bottom: none;
}

/* Canvas card */
.canvas-card {
  text-align: center;
}

.canvas-card canvas {
  width: 100%;
  max-width: 700px;
  border-radius: 10px;
  border: 1px solid #334155;
  touch-action: none;
}

/* Steps */
.step {
  display: flex;
  gap: 16px;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 14px;
  border-left: 3px solid transparent;
  transition: border-color 0.2s, background 0.2s;
  cursor: pointer;
}

.step:hover, .step.active {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}

.step-badge {
  flex-shrink: 0;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.95rem;
}

.step-content {
  flex: 1;
}

.step-content p {
  color: #94a3b8;
  margin-top: 6px;
}

/* Checkpoint */
.checkpoint {
  background: rgba(52,211,153,0.06);
  border: 1px solid rgba(52,211,153,0.18);
}

.checkpoint summary {
  color: #34d399;
}

/* Key insight */
.insight-card {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid rgba(167,139,250,0.25);
}

.insight-card h2 {
  color: #a78bfa;
}

/* Final answer */
.final-answer {
  border: 2px solid rgba(74,222,128,0.3);
  background: linear-gradient(135deg, rgba(74,222,128,0.06), rgba(52,211,153,0.04));
}

.final-answer h2 {
  color: #4ade80;
}

.answer-big {
  font-size: 1.6rem;
  font-weight: 700;
  color: #4ade80;
  text-align: center;
  margin: 20px 0;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 16px 0;
}

.option-box {
  padding: 10px 20px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: #1e293b;
  text-align: center;
  min-width: 90px;
  transition: transform 0.2s;
}

.option-box.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.1);
  transform: scale(1.05);
}

.option-box .opt-label {
  color: #94a3b8;
  font-size: 0.85rem;
}

.option-box .opt-value {
  font-size: 1.15rem;
  font-weight: 600;
  color: #e2e8f0;
}

.option-box.correct .opt-value {
  color: #4ade80;
}

.verification {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 14px;
  padding-top: 14px;
  border-top: 1px solid #334155;
}

/* Pitfalls */
.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 14px;
  margin-bottom: 8px;
  background: rgba(224,148,104,0.06);
  border-left: 3px solid #e09468;
  border-radius: 0 8px 8px 0;
  color: #e2e8f0;
}

.pitfall-list li strong {
  color: #e09468;
}

/* Challenge */
.challenge-card {
  border: 1px solid rgba(244,114,182,0.2);
  background: rgba(244,114,182,0.04);
}

.challenge-card h2 {
  color: #f472b6;
}

/* Parity table */
.parity-table {
  width: 100%;
  border-collapse: collapse;
  margin: 14px 0;
}

.parity-table th, .parity-table td {
  padding: 10px 14px;
  text-align: center;
  border: 1px solid #334155;
}

.parity-table th {
  background: rgba(96,165,250,0.12);
  color: #60a5fa;
  font-weight: 600;
}

.parity-table tr.highlight-row {
  background: rgba(74,222,128,0.08);
}

.parity-table tr.dim-row {
  opacity: 0.5;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step { flex-direction: column; gap: 10px; }
  .given-grid { flex-direction: column; }
  .options-row { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Izbor tri broja sa neparnim zbirom</h1>
  <p class="subtitle">Kombinatorika i analiza parnosti</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Na koliko načina se mogu izabrati tri broja iz skupa prirodnih brojeva \(\{1, 2, 3, \ldots, 40\}\) tako da im zbir bude neparan broj?</p>

    <div class="given-grid" style="margin-bottom: 18px;">
      <div class="given-item">
        <div class="label">Skup</div>
        <div class="value">\(\{1, 2, \ldots, 40\}\)</div>
      </div>
      <div class="given-item">
        <div class="label">Neparnih</div>
        <div class="value">20</div>
      </div>
      <div class="given-item">
        <div class="label">Parnih</div>
        <div class="value">20</div>
      </div>
      <div class="given-item">
        <div class="label">Biramo</div>
        <div class="value">3 broja</div>
      </div>
      <div class="given-item">
        <div class="label">Uslov</div>
        <div class="value">zbir neparan</div>
      </div>
    </div>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">1140</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">3800</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">6480</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">4940</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">14080</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan rešavanja</h2>
    <p>Zbir tri broja je neparan samo u dva slučaja po parnosti sabiraka. Prebrojićemo koliko neparnih i parnih brojeva ima u skupu, odredićemo koji raspored parnosti daje neparan zbir, a zatim kombinatornim formulama izračunati broj načina za svaki slučaj.</p>
  </div>

  <!-- Theory Refresher -->
  <details>
    <summary>Ključne formule i pravila</summary>
    <ul>
      <li><strong>Pravila parnosti zbira:</strong> \(\text{N} + \text{N} = \text{P}\), \(\text{N} + \text{P} = \text{N}\), \(\text{P} + \text{P} = \text{P}\), gde je N &mdash; neparno, P &mdash; parno.</li>
      <li><strong>Binomni koeficijent:</strong> \(\displaystyle \binom{n}{k} = \frac{n!}{k!(n-k)!}\) &mdash; broj načina za izbor \(k\) elemenata iz skupa od \(n\) elemenata.</li>
      <li>\(\displaystyle \binom{20}{3} = \frac{20 \cdot 19 \cdot 18}{3!} = \frac{6840}{6} = 1140\)</li>
      <li>\(\displaystyle \binom{20}{2} = \frac{20 \cdot 19}{2!} = 190\)</li>
      <li>\(\displaystyle \binom{20}{1} = 20\)</li>
      <li><strong>Princip množenja:</strong> Ako se nezavisno bira iz dva skupa, ukupan broj kombinacija je proizvod broja izbora iz svakog skupa.</li>
    </ul>
  </details>

  <!-- Canvas Visualization -->
  <div class="card canvas-card">
    <h2>Vizuelni prikaz &mdash; slučajevi brojanja</h2>
    <p style="color:#94a3b8; margin-bottom: 14px;">Svi mogući rasporedi parnosti pri izboru 3 broja i koji daju neparan zbir</p>
    <canvas id="cases-canvas" width="700" height="480"></canvas>
  </div>

  <!-- Step-by-step solution -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <div class="step" id="step-1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Identifikujemo parnost brojeva u skupu</h3>
        <p>U skupu \(\{1, 2, 3, \ldots, 40\}\) imamo:</p>
        <div class="math-box">
          \[ \text{Neparni: } \{1, 3, 5, \ldots, 39\} \quad \Rightarrow \quad 20 \text{ brojeva} \]
          \[ \text{Parni: } \{2, 4, 6, \ldots, 40\} \quad \Rightarrow \quad 20 \text{ brojeva} \]
        </div>
      </div>
    </div>

    <div class="step" id="step-2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Analiza parnosti zbira</h3>
        <p>Zbir tri broja je neparan ako i samo ako je <span class="highlight">neparan broj sabiraka neparan</span>. Konkretno:</p>
        <table class="parity-table">
          <tr>
            <th>Neparnih</th>
            <th>Parnih</th>
            <th>Parnost zbira</th>
            <th>Daje neparan?</th>
          </tr>
          <tr class="highlight-row">
            <td>3</td>
            <td>0</td>
            <td>N + N + N = N</td>
            <td style="color:#4ade80; font-weight:600;">Da</td>
          </tr>
          <tr class="dim-row">
            <td>2</td>
            <td>1</td>
            <td>N + N + P = P</td>
            <td style="color:#ef4444;">Ne</td>
          </tr>
          <tr class="highlight-row">
            <td>1</td>
            <td>2</td>
            <td>N + P + P = N</td>
            <td style="color:#4ade80; font-weight:600;">Da</td>
          </tr>
          <tr class="dim-row">
            <td>0</td>
            <td>3</td>
            <td>P + P + P = P</td>
            <td style="color:#ef4444;">Ne</td>
          </tr>
        </table>
        <p>Dakle, zbir je neparan u <span class="highlight">dva slučaja</span>: sva tri neparna, ili tačno jedan neparan i dva parna.</p>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Zašto je N + N + N = N?</summary>
      <p>Zbir dva neparna broja je paran: \((2k+1) + (2m+1) = 2(k+m+1)\). Kada tome dodamo treći neparan: \(2(k+m+1) + (2j+1) = 2(k+m+j+1) + 1\), što je neparan broj. Primer: \(1 + 3 + 5 = 9\) (neparan).</p>
    </details>

    <div class="step" id="step-3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Slučaj 1: Sva tri broja su neparna</h3>
        <p>Biramo 3 neparna broja od 20 raspoloživih:</p>
        <div class="math-box">
          \[ \binom{20}{3} = \frac{20 \cdot 19 \cdot 18}{3 \cdot 2 \cdot 1} = \frac{6840}{6} = 1140 \]
        </div>
      </div>
    </div>

    <div class="step" id="step-4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Slučaj 2: Tačno jedan neparan i dva parna</h3>
        <p>Biramo 1 neparan od 20, i nezavisno biramo 2 parna od 20:</p>
        <div class="math-box">
          \[ \binom{20}{1} \cdot \binom{20}{2} = 20 \cdot \frac{20 \cdot 19}{2} = 20 \cdot 190 = 3800 \]
        </div>
      </div>
    </div>

    <div class="step" id="step-5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Ukupan broj načina</h3>
        <p>Sabiramo oba slučaja (disjunktni su):</p>
        <div class="math-box" style="border-color: rgba(74,222,128,0.3); background: rgba(74,222,128,0.06);">
          \[ \text{Ukupno} = 1140 + 3800 = \boxed{4940} \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Verifikacija preko ukupnog broja kombinacija</summary>
      <p>Ukupan broj načina za izbor 3 broja iz 40 je:</p>
      <p>\(\displaystyle \binom{40}{3} = \frac{40 \cdot 39 \cdot 38}{6} = \frac{59280}{6} = 9880\)</p>
      <p>Broj kombinacija sa <strong>parnim</strong> zbirom (preostala dva slučaja):</p>
      <p>Sva tri parna: \(\displaystyle \binom{20}{3} = 1140\)</p>
      <p>Dva neparna, jedan paran: \(\displaystyle \binom{20}{2} \cdot \binom{20}{1} = 190 \cdot 20 = 3800\)</p>
      <p>Ukupno sa parnim zbirom: \(1140 + 3800 = 4940\)</p>
      <p>Provera: \(4940 + 4940 = 9880 = \binom{40}{3}\) &check;</p>
      <p>Zanimljivo: zbog simetrije (jednako neparnih i parnih), tačno polovina kombinacija daje neparan, a polovina paran zbir!</p>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="card insight-card">
    <h2>Ključni uvid</h2>
    <p>Pošto u skupu \(\{1, \ldots, 40\}\) ima <span class="highlight">jednako neparnih i parnih brojeva</span> (po 20), postoji savršena simetrija: broj trojki sa neparnim zbirom jednak je broju trojki sa parnim zbirom. Oba iznose tačno \(\displaystyle \frac{1}{2}\binom{40}{3} = \frac{9880}{2} = 4940\). Ovo je elegantna provera &mdash; dovoljno je bilo izračunati \(\binom{40}{3}/2\)!</p>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer">
    <h2>Konačan odgovor</h2>
    <div class="answer-big">\(1140 + 3800 = 4940\)</div>

    <div class="options-row">
      <div class="option-box">
        <div class="opt-label">(A)</div>
        <div class="opt-value">1140</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(B)</div>
        <div class="opt-value">3800</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(C)</div>
        <div class="opt-value">6480</div>
      </div>
      <div class="option-box correct">
        <div class="opt-label">(D)</div>
        <div class="opt-value">4940</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(E)</div>
        <div class="opt-value">14080</div>
      </div>
    </div>

    <p class="verification"><strong>Provera:</strong> \(\binom{20}{3} + \binom{20}{1}\binom{20}{2} = 1140 + 3800 = 4940\). Takođe: \(\binom{40}{3} = 9880\), a \(9880 - 4940 = 4940\) (parni zbir), pa se potvrđuje: \(4940 + 4940 = 9880\). &check;</p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Česte greške</h2>
    <ul class="pitfall-list">
      <li><strong>Zaboravljanje drugog slučaja:</strong> Mnogi učenici razmotre samo slučaj "sva tri neparna" i dobiju 1140 (odgovor A). Treba uključiti i slučaj "jedan neparan, dva parna" koji daje dodatnih 3800 načina.</li>
      <li><strong>Pogrešan slučaj za neparan zbir:</strong> Zbir N + N + P = P (paran!), ne neparan. Često se greškom računa \(\binom{20}{2}\binom{20}{1}\) umesto \(\binom{20}{1}\binom{20}{2}\) kao slučaj neparnog zbira &mdash; rezultat je isti broj, ali razlog je različit.</li>
      <li><strong>Računanje sa ponavljanjem:</strong> Radi se o <em>kombinacijama</em> (bez ponavljanja i bez obzira na redosled), ne o varijacijama. Koristimo \(\binom{n}{k}\), ne \(n^k\) ili \(P(n,k)\).</li>
      <li><strong>Izbor odgovora (B) = 3800:</strong> To je samo drugi slučaj (1 neparan + 2 parna). Treba sabrati oba slučaja.</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Na koliko načina se mogu izabrati <strong>četiri</strong> broja iz skupa \(\{1, 2, \ldots, 40\}\) tako da im zbir bude neparan?</p>
    <details>
      <summary>Pomoć i rešenje</summary>
      <p>Zbir četiri broja je neparan kada je neparan broj neparnih sabiraka neparan, tj. kad imamo 1 ili 3 neparna broja.</p>
      <p><strong>Slučaj 1:</strong> Tačno 1 neparan i 3 parna: \(\displaystyle \binom{20}{1}\binom{20}{3} = 20 \cdot 1140 = 22800\)</p>
      <p><strong>Slučaj 2:</strong> Tačno 3 neparna i 1 paran: \(\displaystyle \binom{20}{3}\binom{20}{1} = 1140 \cdot 20 = 22800\)</p>
      <p><strong>Ukupno:</strong> \(22800 + 22800 = 45600\)</p>
      <p>Provera simetrijom: \(\displaystyle \binom{40}{4} = 91390\). Hmm, \(91390 / 2 = 45695 \neq 45600\). Simetrija nije savršena jer \(\binom{40}{4}\) je paran ali podela nije tačno pola &mdash; postoji i slučaj sva 4 neparna ili sva 4 parna koji remeti simetriju. Neparan zbir: \(\binom{20}{1}\binom{20}{3} + \binom{20}{3}\binom{20}{1} = 45600\). Paran zbir: \(\binom{20}{4} + \binom{20}{2}\binom{20}{2} + \binom{20}{4} = 4845 + 36100 + 4845 = 45790\). Ukupno: \(45600 + 45790 = 91390\) &check;</p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('cases-canvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  // Background
  ctx.fillStyle = '#0c1222';
  ctx.fillRect(0, 0, W, H);

  // Colors
  const blue = '#60a5fa';
  const purple = '#a78bfa';
  const green = '#4ade80';
  const pink = '#f472b6';
  const dimText = '#64748b';
  const brightText = '#e2e8f0';
  const oddColor = '#f59e0b';   // amber for odd
  const evenColor = '#38bdf8';  // sky for even

  // Title
  ctx.fillStyle = brightText;
  ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'center';
  ctx.fillText('Svi slučajevi izbora 3 broja po parnosti', W / 2, 30);

  // Draw 4 cases as rows
  const cases = [
    { nOdd: 3, nEven: 0, label: '3 neparna + 0 parnih', formula: 'C(20,3) = 1140', result: 1140, odd: true },
    { nOdd: 2, nEven: 1, label: '2 neparna + 1 paran', formula: 'C(20,2)\u00B7C(20,1) = 3800', result: 3800, odd: false },
    { nOdd: 1, nEven: 2, label: '1 neparan + 2 parna', formula: 'C(20,1)\u00B7C(20,2) = 3800', result: 3800, odd: true },
    { nOdd: 0, nEven: 3, label: '0 neparnih + 3 parna', formula: 'C(20,3) = 1140', result: 1140, odd: false }
  ];

  const rowH = 90;
  const startY = 55;
  const circleR = 18;
  const circleGap = 48;
  const circlesStartX = 80;

  cases.forEach((c, i) => {
    const y = startY + i * rowH + rowH / 2;

    // Background highlight for odd-sum cases
    if (c.odd) {
      ctx.fillStyle = 'rgba(74, 222, 128, 0.06)';
      ctx.beginPath();
      ctx.roundRect(20, y - 35, W - 40, 70, 8);
      ctx.fill();

      ctx.strokeStyle = 'rgba(74, 222, 128, 0.2)';
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.roundRect(20, y - 35, W - 40, 70, 8);
      ctx.stroke();
    }

    // Draw circles representing the 3 chosen numbers
    for (let j = 0; j < 3; j++) {
      const cx = circlesStartX + j * circleGap;
      const isOdd = j < c.nOdd;

      ctx.beginPath();
      ctx.arc(cx, y, circleR, 0, Math.PI * 2);

      if (isOdd) {
        ctx.fillStyle = oddColor;
        ctx.fill();
        ctx.fillStyle = '#0c1222';
        ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText('N', cx, y);
      } else {
        ctx.fillStyle = evenColor;
        ctx.fill();
        ctx.fillStyle = '#0c1222';
        ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText('P', cx, y);
      }
    }

    // Plus signs between circles
    ctx.fillStyle = dimText;
    ctx.font = '16px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    for (let j = 0; j < 2; j++) {
      const px = circlesStartX + j * circleGap + circleGap / 2;
      ctx.fillText('+', px, y);
    }

    // Equals sign
    const eqX = circlesStartX + 2 * circleGap + 35;
    ctx.fillText('=', eqX, y);

    // Sum parity label
    const sumX = eqX + 35;
    if (c.odd) {
      ctx.fillStyle = green;
      ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
      ctx.fillText('NEPARNO', sumX + 20, y);
    } else {
      ctx.fillStyle = '#ef4444';
      ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
      ctx.fillText('PARNO', sumX + 14, y);
    }

    // Formula
    ctx.fillStyle = brightText;
    ctx.font = '14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.textBaseline = 'middle';
    ctx.fillText(c.formula, 380, y);

    // Checkmark or X
    const markX = W - 50;
    if (c.odd) {
      ctx.fillStyle = green;
      ctx.font = 'bold 20px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('\u2713', markX, y);
    } else {
      ctx.fillStyle = '#ef4444';
      ctx.font = 'bold 20px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('\u2717', markX, y);
    }
  });

  // Separator line
  const sepY = startY + 4 * rowH + 10;
  ctx.strokeStyle = '#334155';
  ctx.lineWidth = 1;
  ctx.setLineDash([4, 4]);
  ctx.beginPath();
  ctx.moveTo(30, sepY);
  ctx.lineTo(W - 30, sepY);
  ctx.stroke();
  ctx.setLineDash([]);

  // Total calculation
  const totalY = sepY + 35;
  ctx.fillStyle = green;
  ctx.font = 'bold 18px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';
  ctx.fillText('Ukupno sa neparnim zbirom: 1140 + 3800 = 4940', W / 2, totalY);

  // Legend
  const legY = totalY + 40;
  ctx.font = '13px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'left';
  ctx.textBaseline = 'middle';

  // Odd circle legend
  ctx.beginPath();
  ctx.arc(200, legY, 10, 0, Math.PI * 2);
  ctx.fillStyle = oddColor;
  ctx.fill();
  ctx.fillStyle = brightText;
  ctx.fillText('N = neparan broj (20 kom.)', 218, legY);

  // Even circle legend
  ctx.beginPath();
  ctx.arc(430, legY, 10, 0, Math.PI * 2);
  ctx.fillStyle = evenColor;
  ctx.fill();
  ctx.fillStyle = brightText;
  ctx.fillText('P = paran broj (20 kom.)', 448, legY);

  // Step click interactivity
  const steps = document.querySelectorAll('.step');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.add('active');
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Izbor tri broja sa neparnim zbirom iz skupa {1, 2, ..., 40}",
  "subject": "math",
  "unit": "kombinatorika",
  "topic_tags": ["kombinatorika", "binomni koeficijent", "parnost", "prebrojavanje", "princip množenja"]
}
BRAINSPARK_META-->