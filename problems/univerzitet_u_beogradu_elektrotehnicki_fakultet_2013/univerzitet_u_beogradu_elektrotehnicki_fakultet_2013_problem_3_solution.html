<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pojednostavljivanje algebarskog izraza</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM:
Vrednost izraza (x^(0,5) + 1) / (x + x^(0,5) + 1) : 1/(x^(1,5) - 1), za x >= 0, x != 1 je:
(A) x^2 - 1  (B) 2x - 1  (C) 2*sqrt(x) - 1  (D) x - 1  (E) sqrt(x) - 1

SOLUTION:

Key substitution: Let t = sqrt(x) = x^(0.5). Then:
  x = t^2
  x^(0.5) = t
  x^(1.5) = t^3

The expression becomes:
  (t + 1) / (t^2 + t + 1) : 1/(t^3 - 1)

Division by a fraction = multiplication by reciprocal:
  = (t + 1) / (t^2 + t + 1) * (t^3 - 1)

Factor t^3 - 1 using difference of cubes:
  t^3 - 1 = (t - 1)(t^2 + t + 1)

Substitute:
  = (t + 1) / (t^2 + t + 1) * (t - 1)(t^2 + t + 1)

Cancel (t^2 + t + 1):
  = (t + 1)(t - 1)

Use difference of squares:
  = t^2 - 1

Substitute back t^2 = x:
  = x - 1

Answer: (D) x - 1

Verification with x = 4 (so sqrt(x) = 2):
  Numerator of first fraction: sqrt(4) + 1 = 2 + 1 = 3
  Denominator of first fraction: 4 + 2 + 1 = 7
  First fraction: 3/7
  Second fraction: 1/(4^(1.5) - 1) = 1/(8 - 1) = 1/7
  Division: (3/7) / (1/7) = (3/7) * 7 = 3
  Check: x - 1 = 4 - 1 = 3 ✓

Verification with x = 9 (so sqrt(x) = 3):
  Numerator: 3 + 1 = 4
  Denominator: 9 + 3 + 1 = 13
  First fraction: 4/13
  Second fraction: 1/(27 - 1) = 1/26
  Division: (4/13) / (1/26) = (4/13) * 26 = 104/13 = 8
  Check: x - 1 = 9 - 1 = 8 ✓
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
  transition: border-color 0.2s;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 10px 0;
  user-select: none;
}

details summary:hover {
  color: #93bbfc;
}

details[open] summary {
  margin-bottom: 10px;
}

.theory-content ul {
  list-style: none;
  padding-left: 0;
}

.theory-content li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #cbd5e1;
}

.theory-content li:last-child {
  border-bottom: none;
}

.canvas-card {
  text-align: center;
}

canvas {
  border-radius: 10px;
  width: 100%;
  max-width: 700px;
  touch-action: none;
}

.drag-hint {
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

.step-container {
  margin-bottom: 18px;
  padding: 18px;
  padding-left: 24px;
  background: rgba(30,41,59,0.5);
  border-left: 3px solid #334155;
  border-radius: 0 10px 10px 0;
  cursor: pointer;
  transition: border-color 0.25s, background 0.25s;
}

.step-container:hover,
.step-container.active {
  border-left-color: #4ade80;
  background: rgba(30,41,59,0.9);
}

.step-badge {
  display: inline-block;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  font-weight: 700;
  font-size: 0.8rem;
  padding: 3px 10px;
  border-radius: 20px;
  margin-bottom: 8px;
}

.step-title {
  font-size: 1.1rem;
  font-weight: 600;
  color: #e2e8f0;
  margin-bottom: 8px;
}

.step-text {
  color: #cbd5e1;
  font-size: 0.97rem;
}

.checkpoint {
  background: rgba(167,139,250,0.08);
  border: 1px solid rgba(167,139,250,0.2);
  border-radius: 8px;
  padding: 12px 16px;
  margin: 15px 0;
}

.checkpoint summary {
  color: #a78bfa;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.25);
  border-radius: 14px;
  padding: 22px;
  margin-bottom: 24px;
}

.insight-box h3 {
  color: #a78bfa;
  margin-bottom: 10px;
}

.final-answer {
  text-align: center;
  padding: 30px;
  border: 2px solid rgba(74,222,128,0.3);
  background: rgba(74,222,128,0.06);
}

.final-answer .answer-value {
  font-size: 2rem;
  font-weight: 700;
  color: #4ade80;
  margin: 16px 0;
}

.final-answer .answer-label {
  color: #94a3b8;
  font-size: 0.95rem;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 12px;
  margin: 20px 0;
}

.option-box {
  padding: 12px 22px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: rgba(30,41,59,0.6);
  color: #94a3b8;
  font-size: 1.05rem;
  font-weight: 600;
  transition: all 0.3s;
}

.option-box.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.12);
  color: #4ade80;
}

.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 0;
  padding-left: 16px;
  position: relative;
  color: #cbd5e1;
}

.pitfall-list li::before {
  content: '\26A0';
  position: absolute;
  left: 0;
}

.challenge-box {
  border-left: 3px solid #f472b6;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 10px;
}

.subst-highlight {
  display: inline-block;
  background: rgba(167,139,250,0.12);
  border: 1px solid rgba(167,139,250,0.2);
  border-radius: 6px;
  padding: 2px 8px;
  margin: 2px 0;
}

.arrow-flow {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: center;
  gap: 10px;
  margin: 14px 0;
}

.arrow-flow .flow-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.18);
  border-radius: 8px;
  padding: 8px 14px;
  color: #e2e8f0;
  font-size: 0.95rem;
}

.arrow-flow .flow-arrow {
  color: #60a5fa;
  font-size: 1.4rem;
  font-weight: 700;
}

@media (max-width: 700px) {
  h1 { font-size: 1.5rem; }
  .container { padding: 10px; }
  .card { padding: 16px; }
  .given-grid { flex-direction: column; }
  .options-row { flex-direction: column; align-items: center; }
  .arrow-flow { flex-direction: column; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Pojednostavljivanje algebarskog izraza</h1>
  <p class="subtitle">Razlomci sa racionalnim eksponentima, razlika kubova i skracivanje</p>

  <!-- PROBLEM STATEMENT -->
  <div class="card problem-statement">
    <h2>Zadatak</h2>
    <p>Vrednost izraza \(\dfrac{x^{0{,}5} + 1}{x + x^{0{,}5} + 1} : \dfrac{1}{x^{1{,}5} - 1}\), za \(x \geq 0\), \(x \neq 1\) je:</p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(x^2 - 1\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(2x - 1\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(2\sqrt{x} - 1\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(x - 1\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(\sqrt{x} - 1\)</div>
      </div>
    </div>
  </div>

  <!-- PLAN -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>Uvodimo smenu \(t = \sqrt{x}\) da bismo izraz prebacili u oblik sa celim stepenima. Prepoznajemo formulu za <span class="highlight">razliku kubova</span> \(t^3 - 1 = (t-1)(t^2+t+1)\), zatim skracujemo zajednicke faktore i na kraju se vracamo na promenljivu \(x\).</p>
    <div class="arrow-flow">
      <div class="flow-item">Smena \(t = \sqrt{x}\)</div>
      <div class="flow-arrow">&rarr;</div>
      <div class="flow-item">Deljenje &rarr; mnozenje reciprocnom</div>
      <div class="flow-arrow">&rarr;</div>
      <div class="flow-item">Faktorizacija \(t^3 - 1\)</div>
      <div class="flow-arrow">&rarr;</div>
      <div class="flow-item">Skracivanje</div>
      <div class="flow-arrow">&rarr;</div>
      <div class="flow-item">Vracanje u \(x\)</div>
    </div>
  </div>

  <!-- THEORY -->
  <div class="card">
    <details>
      <summary>Kljucne formule i teoreme</summary>
      <div class="theory-content">
        <ul>
          <li><strong>Racionalni eksponenti:</strong> \(x^{0{,}5} = \sqrt{x}\), \(x^{1{,}5} = x \cdot \sqrt{x} = (\sqrt{x})^3\). Generalno: \(x^{m/n} = \sqrt[n]{x^m}\).</li>
          <li><strong>Razlika kubova:</strong> \(a^3 - b^3 = (a - b)(a^2 + ab + b^2)\). Specijalno za \(b = 1\): \(a^3 - 1 = (a - 1)(a^2 + a + 1)\).</li>
          <li><strong>Razlika kvadrata:</strong> \(a^2 - b^2 = (a - b)(a + b)\). Koristi se na kraju za \((t+1)(t-1) = t^2 - 1\).</li>
          <li><strong>Deljenje razlomaka:</strong> \(\dfrac{A}{B} : \dfrac{C}{D} = \dfrac{A}{B} \cdot \dfrac{D}{C}\) — deljenje = mnozenje reciprocnom vrednoscu.</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- VISUAL AID -->
  <div class="card canvas-card">
    <h2>Graficki prikaz</h2>
    <p style="color:#94a3b8; margin-bottom:14px;">Grafici polaznog izraza (plava) i rezultata \(x - 1\) (zelena). Ako se poklapaju, izraz je tacan. Pomerajte klizac da proverite za razlicite vrednosti \(x\).</p>
    <canvas id="diagram" width="700" height="500"></canvas>
    <div style="margin-top:14px;">
      <label for="xSlider" style="color:#94a3b8; font-size:0.9rem;">Vrednost \(x\): </label>
      <input type="range" id="xSlider" min="0" max="500" value="200" style="width:260px; vertical-align:middle;">
      <span id="xValueDisplay" style="color:#60a5fa; font-weight:600; margin-left:8px;">2,00</span>
    </div>
    <div id="valuesDisplay" style="margin-top:8px; color:#94a3b8; font-size:0.9rem;"></div>
    <p class="drag-hint">Pomerajte klizac da uporedite vrednosti oba izraza za razlicite \(x\)</p>
  </div>

  <!-- STEP-BY-STEP -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container" id="step1">
      <span class="step-badge">Korak 1</span>
      <div class="step-title">Uvodimo smenu \(t = \sqrt{x}\)</div>
      <div class="step-text">
        <p>Racionalni eksponenti \(x^{0{,}5}\) i \(x^{1{,}5}\) sugerisuju da se uvede smena. Neka je <span class="subst-highlight">\(t = \sqrt{x} = x^{0{,}5}\)</span>. Tada vazi:</p>
        <div class="math-box">
          \[ x = t^2, \qquad x^{0{,}5} = t, \qquad x^{1{,}5} = x \cdot x^{0{,}5} = t^2 \cdot t = t^3 \]
        </div>
        <p>Polazni izraz postaje:</p>
        <div class="math-box">
          \[ \frac{t + 1}{t^2 + t + 1} \;:\; \frac{1}{t^3 - 1} \]
        </div>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container" id="step2">
      <span class="step-badge">Korak 2</span>
      <div class="step-title">Deljenje pretvaramo u mnozenje</div>
      <div class="step-text">
        <p>Deljenje razlomkom je isto sto i mnozenje njegovom reciprocnom vrednoscu:</p>
        <div class="math-box">
          \[ \frac{t + 1}{t^2 + t + 1} \;:\; \frac{1}{t^3 - 1} \;=\; \frac{t + 1}{t^2 + t + 1} \;\cdot\; (t^3 - 1) \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri se: Zasto je reciprocna vrednost od \(\frac{1}{t^3-1}\) upravo \(t^3-1\)?</summary>
      <p style="padding-top:8px; color:#cbd5e1;">Reciprocna vrednost razlomka \(\frac{a}{b}\) je \(\frac{b}{a}\). Dakle, reciprocna vrednost od \(\frac{1}{t^3-1}\) je \(\frac{t^3-1}{1} = t^3-1\).</p>
    </details>

    <!-- Step 3 -->
    <div class="step-container" id="step3">
      <span class="step-badge">Korak 3</span>
      <div class="step-title">Faktorizacija \(t^3 - 1\) pomocu razlike kubova</div>
      <div class="step-text">
        <p>Koristimo formulu za <span class="highlight">razliku kubova</span>:</p>
        <div class="math-box">
          \[ a^3 - b^3 = (a - b)(a^2 + ab + b^2) \]
        </div>
        <p>Za \(a = t\) i \(b = 1\):</p>
        <div class="math-box">
          \[ t^3 - 1 = t^3 - 1^3 = (t - 1)(t^2 + t \cdot 1 + 1^2) = (t - 1)(t^2 + t + 1) \]
        </div>
        <p>Ovo je kljucna faktorizacija! Primetimo da se faktor \(t^2 + t + 1\) pojavljuje i u imeniocu prvog razlomka.</p>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step-container" id="step4">
      <span class="step-badge">Korak 4</span>
      <div class="step-title">Zamena i skracivanje</div>
      <div class="step-text">
        <p>Zamenjujemo faktorizovani oblik u izraz:</p>
        <div class="math-box">
          \[ \frac{t + 1}{t^2 + t + 1} \cdot (t - 1)\cancel{(t^2 + t + 1)} \;=\; \frac{(t + 1) \cdot \cancel{(t^2 + t + 1)} \cdot (t - 1)}{\cancel{(t^2 + t + 1)}} \]
        </div>
        <p>Posle skracivanja zajednickog faktora \(t^2 + t + 1\), ostaje:</p>
        <div class="math-box">
          \[ (t + 1)(t - 1) \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri se: Zasto smemo da skratimo \(t^2 + t + 1\)?</summary>
      <p style="padding-top:8px; color:#cbd5e1;">Faktor \(t^2 + t + 1\) nikada nije nula za realne \(t \geq 0\). Diskriminanta je \(D = 1 - 4 = -3 < 0\), pa nema realnih korena. Samim tim, deljenje ovim faktorom je uvek dozvoljeno.</p>
    </details>

    <!-- Step 5 -->
    <div class="step-container" id="step5">
      <span class="step-badge">Korak 5</span>
      <div class="step-title">Primena razlike kvadrata</div>
      <div class="step-text">
        <p>Proizvod \((t + 1)(t - 1)\) je razlika kvadrata:</p>
        <div class="math-box">
          \[ (t + 1)(t - 1) = t^2 - 1 \]
        </div>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step-container" id="step6">
      <span class="step-badge">Korak 6</span>
      <div class="step-title">Vracanje na promenljivu \(x\)</div>
      <div class="step-text">
        <p>Posto je \(t = \sqrt{x}\), vazi \(t^2 = x\). Zamenjujemo nazad:</p>
        <div class="math-box">
          \[ t^2 - 1 = x - 1 \]
        </div>
        <p>Dakle, vrednost polaznog izraza je \(\boxed{x - 1}\).</p>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details class="checkpoint">
      <summary>Proveri se: Da li se rezultat poklapa za \(x = 4\)?</summary>
      <p style="padding-top:8px; color:#cbd5e1;">Za \(x = 4\): \(\sqrt{4} = 2\), pa brojilac prvog razlomka: \(2 + 1 = 3\), imenilac: \(4 + 2 + 1 = 7\). Drugi razlomak: \(\frac{1}{4^{1{,}5} - 1} = \frac{1}{8 - 1} = \frac{1}{7}\). Deljenje: \(\frac{3}{7} : \frac{1}{7} = \frac{3}{7} \cdot 7 = 3\). Proveravamo: \(x - 1 = 4 - 1 = 3\). Poklapaju se!</p>
    </details>
  </div>

  <!-- KEY INSIGHT -->
  <div class="insight-box">
    <h3>Kljucni uvid</h3>
    <p>Ceo zadatak se svodi na prepoznavanje da imenilac prvog razlomka \((x + \sqrt{x} + 1)\) predstavlja upravo onaj faktor koji se pojavljuje u formuli za <strong>razliku kubova</strong> \((\sqrt{x})^3 - 1\). Smena \(t = \sqrt{x}\) ovo cini transparentnim:</p>
    <div class="math-box" style="text-align:center; font-size:1.1rem;">
      \[ t^3 - 1 = \underbrace{(t - 1)}_{\sqrt{x} - 1} \cdot \underbrace{(t^2 + t + 1)}_{x + \sqrt{x} + 1} \]
    </div>
    <p>Kada pomnozimo sa ovim faktorom, imenilac se skrati, a preostali cinilac \((t-1)\) sa \((t+1)\) daje razliku kvadrata \(t^2 - 1 = x - 1\).</p>
  </div>

  <!-- FINAL ANSWER -->
  <div class="card final-answer">
    <h2>Konacan odgovor</h2>
    <p class="answer-label">Vrednost izraza je:</p>
    <div class="answer-value">\(\displaystyle (D)\;\; x - 1\)</div>
    <div class="options-row">
      <div class="option-box">(A) \(x^2 - 1\)</div>
      <div class="option-box">(B) \(2x - 1\)</div>
      <div class="option-box">(C) \(2\sqrt{x} - 1\)</div>
      <div class="option-box correct">(D) \(x - 1\)</div>
      <div class="option-box">(E) \(\sqrt{x} - 1\)</div>
    </div>
    <p class="verification-note">Provera za \(x = 4\): izraz = \(\frac{3}{7} : \frac{1}{7} = 3\), a \(x - 1 = 3\). Za \(x = 9\): izraz = \(\frac{4}{13} : \frac{1}{26} = 8\), a \(x - 1 = 8\). Tacan odgovor je (D).</p>
  </div>

  <!-- PITFALLS -->
  <div class="card">
    <h2>Ceste greske</h2>
    <ul class="pitfall-list">
      <li>Zaboravljanje da se deljenje razlomkom pretvara u mnozenje reciprocnom vrednoscu. Mnogi ucenici pogresno pomnoze sa \(\frac{1}{t^3-1}\) umesto sa \(t^3-1\).</li>
      <li>Pogresna primena formule za razliku kubova: \(t^3 - 1 = (t-1)(t^2+t+1)\), a ne \((t-1)(t^2-t+1)\). Drugi oblik vazi za <em>zbir</em> kubova \(t^3 + 1\).</li>
      <li>Brkanje eksponenata: \(x^{1{,}5} = x \cdot \sqrt{x}\), a ne \(x^{1{,}5} = \sqrt{x^{1{,}5}}\). Vazno je tacno prevesti u smenu \(t\).</li>
      <li>Izbor (E) \(\sqrt{x} - 1\): ovo bi bilo tacno samo da nema faktora \((t+1)\), sto bi se desilo da je u brojiocu stajao \(1\) umesto \(t + 1\).</li>
    </ul>
  </div>

  <!-- CHALLENGE -->
  <div class="card challenge-box">
    <h2>Dodatni izazov</h2>
    <p>Pojednostavite izraz: \(\dfrac{x^{0{,}5} - 1}{x - x^{0{,}5} + 1} \cdot (x^{1{,}5} + 1)\) za \(x \geq 0\).</p>
    <details>
      <summary>Pomoc</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        Koristite istu smenu \(t = \sqrt{x}\). Izraz postaje \(\frac{t-1}{t^2-t+1} \cdot (t^3+1)\). Ovaj put primenite formulu za <strong>zbir kubova</strong>: \(t^3 + 1 = (t+1)(t^2-t+1)\). Posle skracivanja dobijate \((t-1)(t+1) = t^2 - 1 = x - 1\). Isti rezultat!
      </p>
    </details>
  </div>

</div>

<script>
(() => {
  // Step click highlighting
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.toggle('active');
    });
  });

  // ==========================================
  // Main canvas: Comparison of original expression vs x-1
  // ==========================================
  const canvas = document.getElementById('diagram');
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  const originX = 80;
  const originY = H - 70;
  const scaleX = 110;
  const scaleY = 45;

  function toCanvas(mx, my) {
    return [originX + mx * scaleX, originY - my * scaleY];
  }

  // Original expression evaluated numerically
  function originalExpr(x) {
    if (x < 0 || x === 1) return NaN;
    const sqrtX = Math.sqrt(x);
    const num = sqrtX + 1;
    const den = x + sqrtX + 1;
    const frac2 = 1 / (Math.pow(x, 1.5) - 1);
    if (!isFinite(frac2)) return NaN;
    return (num / den) / frac2;
  }

  // Simplified result
  function simplified(x) {
    return x - 1;
  }

  let currentX = 2.0;

  function drawGraph() {
    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Grid
    ctx.strokeStyle = '#1a2438';
    ctx.lineWidth = 1;
    for (let i = 0; i <= 6; i++) {
      const [gx] = toCanvas(i, 0);
      ctx.beginPath();
      ctx.moveTo(gx, 0);
      ctx.lineTo(gx, H);
      ctx.stroke();
    }
    for (let i = -2; i <= 8; i++) {
      const [, gy] = toCanvas(0, i);
      if (gy >= 0 && gy <= H) {
        ctx.beginPath();
        ctx.moveTo(0, gy);
        ctx.lineTo(W, gy);
        ctx.stroke();
      }
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(0, originY);
    ctx.lineTo(W, originY);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(originX, 0);
    ctx.lineTo(originX, H);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '14px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('x', W - 20, originY - 8);
    ctx.textAlign = 'center';
    ctx.fillText('y', originX + 16, 18);

    // Tick marks
    ctx.fillStyle = '#64748b';
    ctx.font = '11px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    for (let i = 1; i <= 5; i++) {
      const [tx, ty] = toCanvas(i, 0);
      ctx.fillText(String(i), tx, ty + 16);
    }
    ctx.textAlign = 'right';
    for (let i = -1; i <= 8; i++) {
      if (i === 0) continue;
      const [tx2, ty2] = toCanvas(0, i);
      if (ty2 >= 10 && ty2 <= H - 10) {
        ctx.fillText(String(i), tx2 - 8, ty2 + 4);
      }
    }

    // Plot simplified f(x) = x - 1 (green, background)
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 3;
    ctx.globalAlpha = 0.5;
    ctx.beginPath();
    let started = false;
    for (let px = 0; px < W; px++) {
      const mx = (px - originX) / scaleX;
      if (mx < 0) continue;
      const my = simplified(mx);
      const cy = originY - my * scaleY;
      if (cy < -50 || cy > H + 50) { started = false; continue; }
      if (!started) { ctx.moveTo(px, cy); started = true; }
      else { ctx.lineTo(px, cy); }
    }
    ctx.stroke();
    ctx.globalAlpha = 1.0;

    // Plot original expression (blue, on top)
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    started = false;
    for (let px = 0; px < W; px++) {
      const mx = (px - originX) / scaleX;
      if (mx < 0.001) continue;
      // Skip near x=1 where it's undefined
      if (Math.abs(mx - 1) < 0.015) { started = false; continue; }
      const my = originalExpr(mx);
      if (isNaN(my) || !isFinite(my)) { started = false; continue; }
      const cy = originY - my * scaleY;
      if (cy < -50 || cy > H + 50) { started = false; continue; }
      if (!started) { ctx.moveTo(px, cy); started = true; }
      else { ctx.lineTo(px, cy); }
    }
    ctx.stroke();

    // Vertical dashed line at x=1 (discontinuity)
    const [x1cx] = toCanvas(1, 0);
    ctx.strokeStyle = 'rgba(244,114,182,0.3)';
    ctx.lineWidth = 1;
    ctx.setLineDash([5, 5]);
    ctx.beginPath();
    ctx.moveTo(x1cx, 0);
    ctx.lineTo(x1cx, H);
    ctx.stroke();
    ctx.setLineDash([]);

    ctx.fillStyle = '#f472b6';
    ctx.font = '11px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('x = 1 (nije definisano)', x1cx, 16);

    // Mark current point on the simplified curve
    if (currentX >= 0 && Math.abs(currentX - 1) > 0.01) {
      const fVal = simplified(currentX);
      const origVal = originalExpr(currentX);
      const [ptX, ptY] = toCanvas(currentX, fVal);

      // Dashed lines to axes
      ctx.strokeStyle = 'rgba(74,222,128,0.35)';
      ctx.lineWidth = 1;
      ctx.setLineDash([5, 4]);
      ctx.beginPath();
      ctx.moveTo(ptX, ptY);
      ctx.lineTo(ptX, originY);
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(ptX, ptY);
      ctx.lineTo(originX, ptY);
      ctx.stroke();
      ctx.setLineDash([]);

      // Glow
      const gradient = ctx.createRadialGradient(ptX, ptY, 0, ptX, ptY, 18);
      gradient.addColorStop(0, 'rgba(74,222,128,0.4)');
      gradient.addColorStop(1, 'rgba(74,222,128,0)');
      ctx.fillStyle = gradient;
      ctx.beginPath();
      ctx.arc(ptX, ptY, 18, 0, 2 * Math.PI);
      ctx.fill();

      // Point
      ctx.beginPath();
      ctx.arc(ptX, ptY, 6, 0, 2 * Math.PI);
      ctx.fillStyle = '#4ade80';
      ctx.fill();
      ctx.strokeStyle = '#166534';
      ctx.lineWidth = 2;
      ctx.stroke();

      // Label
      const xStr = currentX.toFixed(2).replace('.', ',');
      const fStr = fVal.toFixed(2).replace('.', ',');
      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 13px Segoe UI, sans-serif';
      ctx.textAlign = 'left';
      const labelOffY = ptY < 60 ? ptY + 22 : ptY - 12;
      ctx.fillText('x = ' + xStr + ', y = ' + fStr, ptX + 12, labelOffY);

      // Update values display
      const dispEl = document.getElementById('valuesDisplay');
      if (dispEl && !isNaN(origVal) && isFinite(origVal)) {
        dispEl.textContent = 'Polazni izraz = ' + origVal.toFixed(4).replace('.', ',') +
          ' | x \u2212 1 = ' + fVal.toFixed(4).replace('.', ',') +
          ' | Razlika: ' + Math.abs(origVal - fVal).toExponential(2);
      } else if (dispEl) {
        dispEl.textContent = 'Za x = 1 izraz nije definisan.';
      }
    }

    // Legend
    ctx.textAlign = 'left';
    ctx.font = '12px Segoe UI, sans-serif';
    let ly = 42;

    ctx.fillStyle = '#60a5fa';
    ctx.fillRect(14, ly - 6, 20, 3);
    ctx.fillText('Polazni izraz', 40, ly);
    ly += 22;

    ctx.fillStyle = '#4ade80';
    ctx.fillRect(14, ly - 6, 20, 3);
    ctx.globalAlpha = 0.5;
    ctx.fillRect(14, ly - 6, 20, 3);
    ctx.globalAlpha = 1.0;
    ctx.fillStyle = '#4ade80';
    ctx.fillText('x \u2212 1 (pojednostavljeni oblik)', 40, ly);
    ly += 22;

    ctx.beginPath();
    ctx.arc(24, ly - 4, 5, 0, 2 * Math.PI);
    ctx.fillStyle = '#4ade80';
    ctx.fill();
    ctx.fillText('Trenutna tacka', 40, ly);
  }

  drawGraph();

  // Slider interaction
  const slider = document.getElementById('xSlider');
  const xDisplay = document.getElementById('xValueDisplay');

  slider.addEventListener('input', () => {
    currentX = parseInt(slider.value, 10) / 100;
    const displayVal = currentX.toFixed(2).replace('.', ',');
    xDisplay.textContent = displayVal;
    drawGraph();
  });

  // Touch support for canvas
  canvas.addEventListener('touchstart', (e) => { e.preventDefault(); }, { passive: false });

})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Pojednostavljivanje algebarskog izraza sa racionalnim eksponentima",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["racionalni eksponenti", "razlika kubova", "razlika kvadrata", "faktorizacija", "algebarski razlomci", "smena promenljive"]
}
BRAINSPARK_META-->