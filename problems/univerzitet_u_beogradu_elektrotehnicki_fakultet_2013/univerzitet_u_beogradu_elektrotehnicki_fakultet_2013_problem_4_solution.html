<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Procenti i osnovne operacije sa brojevima</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM:
Ako 30% broja 2n iznosi 2013, tada 40% broja 5n (n iz N), iznosi:
(A) 6710  (B) 3355  (C) 1342  (D) 6038  (E) 2820

SOLUTION:

Step 1: Postavimo jednacinu iz prvog uslova.
  30% od 2n = 2013
  0,3 * 2n = 2013

Step 2: Resimo za 2n.
  2n = 2013 / 0,3
  2n = 6710

Step 3: Odredimo n.
  n = 6710 / 2
  n = 3355

Step 4: Izracunamo trazenu vrednost.
  40% od 5n = 0,4 * 5n
  = 0,4 * 5 * 3355
  = 0,4 * 16775
  = 6710

VERIFICATION:
Proverimo polazni uslov: 30% od 2*3355 = 0,3 * 6710 = 2013. Tacno!
Trazena vrednost: 40% od 5*3355 = 0,4 * 16775 = 6710. Tacno!

ALTERNATIVE (algebraic shortcut):
0,3 * 2n = 2013  =>  2n = 6710
0,4 * 5n = 0,4 * 5 * (2n/2) = 0,4 * 5/2 * 2n = 0,4 * 2,5 * 6710 = 1 * 6710 = 6710
Notice: 0,4 * 5/2 = 2/2 = 1, so the answer equals 2n = 6710.

Answer: (A) 6710
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
  transition: border-color 0.2s;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 10px 0;
  user-select: none;
}

details summary:hover {
  color: #93bbfc;
}

details[open] summary {
  margin-bottom: 10px;
}

.theory-content ul {
  list-style: none;
  padding-left: 0;
}

.theory-content li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #cbd5e1;
}

.theory-content li:last-child {
  border-bottom: none;
}

.canvas-card {
  text-align: center;
}

canvas {
  border-radius: 10px;
  width: 100%;
  max-width: 650px;
  touch-action: none;
}

.drag-hint {
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

.step-container {
  margin-bottom: 18px;
  padding: 18px;
  padding-left: 24px;
  background: rgba(30,41,59,0.5);
  border-left: 3px solid #334155;
  border-radius: 0 10px 10px 0;
  cursor: pointer;
  transition: border-color 0.25s, background 0.25s;
}

.step-container:hover,
.step-container.active {
  border-left-color: #4ade80;
  background: rgba(30,41,59,0.9);
}

.step-badge {
  display: inline-block;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  font-weight: 700;
  font-size: 0.8rem;
  padding: 3px 10px;
  border-radius: 20px;
  margin-bottom: 8px;
}

.step-title {
  font-size: 1.1rem;
  font-weight: 600;
  color: #e2e8f0;
  margin-bottom: 8px;
}

.step-text {
  color: #cbd5e1;
  font-size: 0.97rem;
}

.checkpoint {
  background: rgba(167,139,250,0.08);
  border: 1px solid rgba(167,139,250,0.2);
  border-radius: 8px;
  padding: 12px 16px;
  margin: 15px 0;
}

.checkpoint summary {
  color: #a78bfa;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.25);
  border-radius: 14px;
  padding: 22px;
  margin-bottom: 24px;
}

.insight-box h3 {
  color: #a78bfa;
  margin-bottom: 10px;
}

.final-answer {
  text-align: center;
  padding: 30px;
  border: 2px solid rgba(74,222,128,0.3);
  background: rgba(74,222,128,0.06);
}

.final-answer .answer-value {
  font-size: 2rem;
  font-weight: 700;
  color: #4ade80;
  margin: 16px 0;
}

.final-answer .answer-label {
  color: #94a3b8;
  font-size: 0.95rem;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 12px;
  margin: 20px 0;
}

.option-box {
  padding: 12px 22px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: rgba(30,41,59,0.6);
  color: #94a3b8;
  font-size: 1.05rem;
  font-weight: 600;
  transition: all 0.3s;
}

.option-box.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.12);
  color: #4ade80;
}

.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 0;
  padding-left: 16px;
  position: relative;
  color: #cbd5e1;
}

.pitfall-list li::before {
  content: '\26A0';
  position: absolute;
  left: 0;
}

.challenge-box {
  border-left: 3px solid #f472b6;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 10px;
}

@media (max-width: 700px) {
  h1 { font-size: 1.5rem; }
  .container { padding: 10px; }
  .card { padding: 16px; }
  .given-grid { flex-direction: column; }
  .options-row { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Procenti i osnovne operacije sa brojevima</h1>
  <p class="subtitle">Procentni racun, linearne jednacine, aritmetika</p>

  <!-- PROBLEM STATEMENT -->
  <div class="card problem-statement">
    <h2>Zadatak</h2>
    <p>Ako \(30\%\) broja \(2n\) iznosi \(2013\), tada \(40\%\) broja \(5n\) \((n \in \mathbb{N})\), iznosi:</p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(6710\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(3355\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(1342\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(6038\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(2820\)</div>
      </div>
    </div>
  </div>

  <!-- PLAN -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>Iz datog uslova da \(30\%\) broja \(2n\) iznosi \(2013\), najpre odredimo vrednost \(2n\), a zatim i \(n\). Posle toga izracunamo \(40\%\) broja \(5n\). Alternativno, mozemo koristiti algebarski precicu i direktno povezati trazeni izraz sa datim.</p>
  </div>

  <!-- THEORY -->
  <div class="card">
    <details>
      <summary>Kljucne formule i pojmovi</summary>
      <div class="theory-content">
        <ul>
          <li><strong>Procenat broja:</strong> \(p\%\) od broja \(a\) iznosi \(\dfrac{p}{100} \cdot a\)</li>
          <li><strong>30% kao razlomak:</strong> \(30\% = \dfrac{30}{100} = \dfrac{3}{10} = 0{,}3\)</li>
          <li><strong>40% kao razlomak:</strong> \(40\% = \dfrac{40}{100} = \dfrac{2}{5} = 0{,}4\)</li>
          <li><strong>Inverzna operacija:</strong> Ako je \(\dfrac{3}{10} \cdot a = b\), tada \(a = \dfrac{10}{3} \cdot b\)</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- VISUAL AID -->
  <div class="card canvas-card">
    <h2>Vizuelni prikaz</h2>
    <p style="color:#94a3b8; margin-bottom:14px;">Dijagram prikazuje tok racunanja: od datog uslova do konacnog rezultata. Koristite dugme za prikaz koraka.</p>
    <canvas id="diagram" width="650" height="440"></canvas>
    <p class="drag-hint">Kliknite dugme ispod za prikaz koraka resavanja</p>
    <div style="margin-top: 14px;">
      <button id="animBtn" style="background: linear-gradient(135deg, #60a5fa, #a78bfa); color: #0f172a; border: none; padding: 10px 24px; border-radius: 8px; font-weight: 700; font-size: 0.95rem; cursor: pointer;">Sledeci korak</button>
      <button id="resetBtn" style="background: #334155; color: #94a3b8; border: 1px solid #475569; padding: 10px 18px; border-radius: 8px; font-weight: 600; font-size: 0.95rem; cursor: pointer; margin-left: 8px;">Ponovo</button>
    </div>
  </div>

  <!-- STEP-BY-STEP -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container" id="step1">
      <span class="step-badge">Korak 1</span>
      <div class="step-title">Zapisemo uslov kao jednacinu</div>
      <div class="step-text">
        <p>Uslov „\(30\%\) broja \(2n\) iznosi \(2013\)" zapisujemo kao:</p>
        <div class="math-box">
          \[ \frac{30}{100} \cdot 2n = 2013 \]
        </div>
        <p>odnosno:</p>
        <div class="math-box">
          \[ 0{,}3 \cdot 2n = 2013 \]
        </div>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container" id="step2">
      <span class="step-badge">Korak 2</span>
      <div class="step-title">Odredimo vrednost \(2n\)</div>
      <div class="step-text">
        <p>Delimo obe strane jednacine sa \(0{,}3\):</p>
        <div class="math-box">
          \[ 2n = \frac{2013}{0{,}3} = \frac{2013}{\;\dfrac{3}{10}\;} = 2013 \cdot \frac{10}{3} = 671 \cdot 10 = 6710 \]
        </div>
        <p>Dakle, <span class="highlight">\(2n = 6710\)</span>.</p>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri se: Da li smo ispravno podelili?</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        Proverimo: \(0{,}3 \cdot 6710 = \dfrac{3}{10} \cdot 6710 = \dfrac{20130}{10} = 2013\). Tacno!
      </p>
    </details>

    <!-- Step 3 -->
    <div class="step-container" id="step3">
      <span class="step-badge">Korak 3</span>
      <div class="step-title">Odredimo vrednost \(n\)</div>
      <div class="step-text">
        <p>Iz \(2n = 6710\) delimo sa \(2\):</p>
        <div class="math-box">
          \[ n = \frac{6710}{2} = 3355 \]
        </div>
        <p>Dakle, <span class="highlight">\(n = 3355\)</span>. Primetimo da je \(n \in \mathbb{N}\), sto je u skladu sa uslovima zadatka.</p>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step-container" id="step4">
      <span class="step-badge">Korak 4</span>
      <div class="step-title">Izracunamo \(5n\)</div>
      <div class="step-text">
        <p>Sada racunamo vrednost \(5n\):</p>
        <div class="math-box">
          \[ 5n = 5 \cdot 3355 = 16775 \]
        </div>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step-container" id="step5">
      <span class="step-badge">Korak 5</span>
      <div class="step-title">Izracunamo \(40\%\) broja \(5n\)</div>
      <div class="step-text">
        <p>Konacno, trazimo \(40\%\) od \(16775\):</p>
        <div class="math-box">
          \[ 0{,}4 \cdot 16775 = \frac{2}{5} \cdot 16775 = \frac{2 \cdot 16775}{5} = \frac{33550}{5} = 6710 \]
        </div>
        <p>Dakle, \(40\%\) broja \(5n\) iznosi <span class="highlight">\(6710\)</span>.</p>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri se: Algebarska precica</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        Mozemo i bez racunanja \(n\) direktno. Iz \(0{,}3 \cdot 2n = 2013\) sledi \(2n = 6710\). Tada:<br>
        \(0{,}4 \cdot 5n = \dfrac{2}{5} \cdot \dfrac{5 \cdot 2n}{2} = \dfrac{2}{5} \cdot \dfrac{5}{2} \cdot 2n = 1 \cdot 2n = 2n = 6710\).<br>
        Primetimo da se koeficijenti idealno poklapaju: \(\dfrac{2}{5} \cdot \dfrac{5}{2} = 1\), pa je rezultat tacno \(2n\).
      </p>
    </details>

    <!-- Step 6 -->
    <div class="step-container" id="step6">
      <span class="step-badge">Korak 6</span>
      <div class="step-title">Provera rezultata</div>
      <div class="step-text">
        <p>Proverimo ceo racun od pocetka:</p>
        <div class="math-box">
          \[ n = 3355, \quad 2n = 6710, \quad 30\% \text{ od } 6710 = 2013 \;\checkmark \]
        </div>
        <div class="math-box">
          \[ 5n = 16775, \quad 40\% \text{ od } 16775 = 6710 \;\checkmark \]
        </div>
        <p style="color:#4ade80; font-weight:600;">Sve se poklapa. Odgovor je \(6710\).</p>
      </div>
    </div>
  </div>

  <!-- KEY INSIGHT -->
  <div class="insight-box">
    <h3>Kljucni uvid</h3>
    <p>Ovaj zadatak ima elegantnu algebarsku strukturu. Primetimo da:</p>
    <div class="math-box" style="text-align:center; font-size:1.05rem;">
      \[ 0{,}4 \cdot 5n = \frac{2}{5} \cdot 5n = 2n \]
    </div>
    <p>A iz uslova znamo da je \(2n = 6710\). Dakle, <strong>\(40\%\) broja \(5n\) je uvek jednako \(2n\)</strong>, bez obzira na vrednost \(n\). Ovo je posledica cinjenice da se \(\frac{2}{5}\) i \(5\) medusobno „skrate", ostavljajuci faktor \(2\).</p>
    <div class="math-box" style="text-align:center;">
      \[ \frac{2}{\cancel{5}} \cdot \cancel{5} \cdot n = 2n = 6710 \]
    </div>
  </div>

  <!-- FINAL ANSWER -->
  <div class="card final-answer">
    <h2>Konacan odgovor</h2>
    <p class="answer-label">\(40\%\) broja \(5n\) iznosi:</p>
    <div class="answer-value">\(6710\)</div>
    <div class="options-row">
      <div class="option-box correct">(A) \(6710\)</div>
      <div class="option-box">(B) \(3355\)</div>
      <div class="option-box">(C) \(1342\)</div>
      <div class="option-box">(D) \(6038\)</div>
      <div class="option-box">(E) \(2820\)</div>
    </div>
    <p class="verification-note">Provera: \(n = 3355\), \(5n = 16775\), \(0{,}4 \cdot 16775 = 6710\).</p>
  </div>

  <!-- PITFALLS -->
  <div class="card">
    <h2>Ceste greske</h2>
    <ul class="pitfall-list">
      <li>Mesanje \(2n\) i \(n\): Zadatak kaze da je \(30\%\) broja \(\mathbf{2n}\) (ne \(n\)) jednako \(2013\). Ako se podeli direktno \(2013 / 0{,}3 = 6710\) i to proglasi za \(n\), dobija se pogresan rezultat.</li>
      <li>Pogresan procenat: Trazi se \(40\%\) broja \(\mathbf{5n}\), ne \(40\%\) od \(n\) ili \(40\%\) od \(2n\). Pazljivo procitajte sta se mnozi sa kojim procentom.</li>
      <li>Racunska greska pri deljenju: \(2013 / 0{,}3\) se lako pogresi. Korisno je zapisati kao \(2013 \cdot \frac{10}{3} = 6710\), pri cemu \(2013 / 3 = 671\).</li>
    </ul>
  </div>

  <!-- CHALLENGE -->
  <div class="card challenge-box">
    <h2>Dodatni izazov</h2>
    <p>Ako \(25\%\) broja \(3m\) iznosi \(600\), koliko iznosi \(60\%\) broja \(4m\)?</p>
    <details>
      <summary>Pomoc</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        Iz \(0{,}25 \cdot 3m = 600\) sledi \(3m = 2400\), pa \(m = 800\). Tada \(0{,}6 \cdot 4m = 0{,}6 \cdot 3200 = 1920\).<br>
        Algebarska precica: \(0{,}6 \cdot 4m = \frac{3}{5} \cdot 4m = \frac{12m}{5}\). Iz uslova \(3m = 2400\), pa \(m = 800\), sledi \(\frac{12 \cdot 800}{5} = \frac{9600}{5} = 1920\).
      </p>
    </details>
  </div>

</div>

<script>
(() => {
  // Step click highlighting
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.toggle('active');
    });
  });

  // Canvas visualization
  const canvas = document.getElementById('diagram');
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  let currentPhase = 0;
  const maxPhase = 4;

  const animBtn = document.getElementById('animBtn');
  const resetBtn = document.getElementById('resetBtn');

  animBtn.addEventListener('click', () => {
    if (currentPhase < maxPhase) {
      currentPhase++;
      drawDiagram();
    }
  });

  resetBtn.addEventListener('click', () => {
    currentPhase = 0;
    drawDiagram();
  });

  function roundRect(x, y, w, h, r) {
    ctx.beginPath();
    ctx.moveTo(x + r, y);
    ctx.lineTo(x + w - r, y);
    ctx.arcTo(x + w, y, x + w, y + r, r);
    ctx.lineTo(x + w, y + h - r);
    ctx.arcTo(x + w, y + h, x + w - r, y + h, r);
    ctx.lineTo(x + r, y + h);
    ctx.arcTo(x, y + h, x, y + h - r, r);
    ctx.lineTo(x, y + r);
    ctx.arcTo(x, y, x + r, y, r);
    ctx.closePath();
  }

  function drawBox(x, y, w, h, bgColor, borderColor, text, textColor, fontSize) {
    roundRect(x, y, w, h, 8);
    ctx.fillStyle = bgColor;
    ctx.fill();
    ctx.strokeStyle = borderColor;
    ctx.lineWidth = 1.5;
    ctx.stroke();

    ctx.fillStyle = textColor || '#e2e8f0';
    ctx.font = (fontSize || 16) + 'px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';

    const lines = text.split('\n');
    const lineH = (fontSize || 16) + 6;
    const totalH = lines.length * lineH;
    const startY = y + h / 2 - totalH / 2 + lineH / 2;
    lines.forEach((line, i) => {
      ctx.fillText(line, x + w / 2, startY + i * lineH);
    });
  }

  function drawArrow(x1, y1, x2, y2, color) {
    ctx.strokeStyle = color || '#60a5fa';
    ctx.lineWidth = 2;
    ctx.setLineDash([]);
    ctx.beginPath();
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.stroke();

    const angle = Math.atan2(y2 - y1, x2 - x1);
    const headLen = 10;
    ctx.beginPath();
    ctx.moveTo(x2, y2);
    ctx.lineTo(x2 - headLen * Math.cos(angle - 0.4), y2 - headLen * Math.sin(angle - 0.4));
    ctx.moveTo(x2, y2);
    ctx.lineTo(x2 - headLen * Math.cos(angle + 0.4), y2 - headLen * Math.sin(angle + 0.4));
    ctx.stroke();
  }

  function drawDiagram() {
    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    const midX = W / 2;

    // Phase label
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';

    const phaseLabels = [
      'Polazni uslov',
      'Korak 1: Odredimo 2n',
      'Korak 2: Odredimo n',
      'Korak 3: Racunamo 40% od 5n',
      'Rezultat!'
    ];
    ctx.fillText(phaseLabels[currentPhase], midX, 12);

    // Phase indicator dots
    for (let i = 0; i <= maxPhase; i++) {
      ctx.beginPath();
      ctx.arc(midX - (maxPhase * 10) + i * 20, H - 18, 5, 0, 2 * Math.PI);
      ctx.fillStyle = i <= currentPhase ? '#60a5fa' : '#334155';
      ctx.fill();
    }

    if (currentPhase === 0) {
      // Show the problem setup
      drawBox(midX - 160, 50, 320, 50, 'rgba(96,165,250,0.1)', '#60a5fa', '30% od 2n = 2013', '#60a5fa', 22);

      ctx.fillStyle = '#94a3b8';
      ctx.font = '15px Segoe UI, sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText('Trazimo:', midX, 140);

      drawBox(midX - 140, 160, 280, 50, 'rgba(167,139,250,0.1)', '#a78bfa', '40% od 5n = ?', '#a78bfa', 22);

      // Hint box
      drawBox(midX - 150, 260, 300, 80, 'rgba(52,211,153,0.08)', 'rgba(52,211,153,0.3)', 'Plan:\n1. Nadji 2n\n2. Nadji n\n3. Izracunaj 40% od 5n', '#4ade80', 14);
    }

    if (currentPhase === 1) {
      // Find 2n
      drawBox(midX - 150, 45, 300, 45, 'rgba(96,165,250,0.1)', '#60a5fa', '0,3 \u00D7 2n = 2013', '#60a5fa', 20);

      drawArrow(midX, 105, midX, 135, '#94a3b8');
      ctx.fillStyle = '#94a3b8';
      ctx.font = '13px Segoe UI, sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText('delimo sa 0,3', midX + 100, 120);

      drawBox(midX - 140, 145, 280, 45, 'rgba(96,165,250,0.12)', '#60a5fa', '2n = 2013 / 0,3', '#60a5fa', 20);

      drawArrow(midX, 205, midX, 235, '#94a3b8');
      ctx.fillStyle = '#94a3b8';
      ctx.fillText('2013 \u00D7 10/3 = 671 \u00D7 10', midX + 120, 220);

      drawBox(midX - 110, 245, 220, 55, 'rgba(74,222,128,0.12)', 'rgba(74,222,128,0.4)', '2n = 6710', '#4ade80', 24);

      // Verification
      drawBox(midX - 130, 340, 260, 40, 'rgba(52,211,153,0.06)', 'rgba(52,211,153,0.2)', 'Provera: 0,3 \u00D7 6710 = 2013 \u2713', '#34d399', 13);
    }

    if (currentPhase === 2) {
      // Find n
      drawBox(midX - 110, 50, 220, 50, 'rgba(74,222,128,0.12)', 'rgba(74,222,128,0.4)', '2n = 6710', '#4ade80', 22);

      drawArrow(midX, 115, midX, 145, '#94a3b8');
      ctx.fillStyle = '#94a3b8';
      ctx.font = '13px Segoe UI, sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText('delimo sa 2', midX + 80, 130);

      drawBox(midX - 100, 155, 200, 55, 'rgba(167,139,250,0.15)', '#a78bfa', 'n = 3355', '#a78bfa', 24);

      // Show 5n calculation
      drawArrow(midX, 225, midX, 260, '#94a3b8');
      ctx.fillStyle = '#94a3b8';
      ctx.fillText('pomnozimo sa 5', midX + 90, 242);

      drawBox(midX - 120, 270, 240, 50, 'rgba(96,165,250,0.12)', '#60a5fa', '5n = 5 \u00D7 3355 = 16775', '#60a5fa', 18);

      // n is natural number
      drawBox(midX - 110, 360, 220, 35, 'rgba(52,211,153,0.06)', 'rgba(52,211,153,0.2)', 'n = 3355 \u2208 N \u2713', '#34d399', 13);
    }

    if (currentPhase === 3) {
      // Calculate 40% of 5n
      drawBox(midX - 130, 50, 260, 45, 'rgba(96,165,250,0.1)', '#60a5fa', '5n = 16775', '#60a5fa', 20);

      drawArrow(midX, 110, midX, 140, '#94a3b8');
      ctx.fillStyle = '#94a3b8';
      ctx.font = '13px Segoe UI, sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText('racunamo 40%', midX + 90, 125);

      drawBox(midX - 155, 150, 310, 45, 'rgba(167,139,250,0.1)', '#a78bfa', '0,4 \u00D7 16775 = 2/5 \u00D7 16775', '#a78bfa', 17);

      drawArrow(midX, 210, midX, 240, '#94a3b8');
      ctx.fillStyle = '#94a3b8';
      ctx.fillText('33550 / 5', midX + 70, 225);

      drawBox(midX - 100, 250, 200, 55, 'rgba(74,222,128,0.15)', 'rgba(74,222,128,0.5)', '= 6710', '#4ade80', 26);

      // Shortcut note
      drawBox(midX - 155, 345, 310, 50, 'rgba(244,114,182,0.08)', 'rgba(244,114,182,0.25)', 'Precica: 0,4 \u00D7 5n = 2/5 \u00D7 5n = 2n\nA 2n = 6710!', '#f472b6', 13);
    }

    if (currentPhase === 4) {
      // Final result
      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 30px Segoe UI, sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText('40% od 5n = 6710', midX, 70);

      // Flow summary
      var flowY = 120;
      var boxW = 140;
      var boxH = 40;
      var gap = 30;
      var startX = midX - 2.5 * boxW - 2 * gap + boxW / 2 + gap;

      // Box 1: 30% x 2n = 2013
      drawBox(45, flowY, 130, boxH, 'rgba(96,165,250,0.1)', '#60a5fa', '0,3\u00D72n=2013', '#60a5fa', 13);
      drawArrow(175, flowY + boxH / 2, 200, flowY + boxH / 2, '#94a3b8');

      // Box 2: 2n = 6710
      drawBox(200, flowY, 105, boxH, 'rgba(96,165,250,0.15)', '#60a5fa', '2n = 6710', '#60a5fa', 14);
      drawArrow(305, flowY + boxH / 2, 330, flowY + boxH / 2, '#94a3b8');

      // Box 3: n = 3355
      drawBox(330, flowY, 100, boxH, 'rgba(167,139,250,0.12)', '#a78bfa', 'n = 3355', '#a78bfa', 14);
      drawArrow(430, flowY + boxH / 2, 455, flowY + boxH / 2, '#94a3b8');

      // Box 4: 5n = 16775
      drawBox(455, flowY, 115, boxH, 'rgba(167,139,250,0.15)', '#a78bfa', '5n = 16775', '#a78bfa', 13);

      // Arrow down from 5n
      drawArrow(512, flowY + boxH + 5, 512, flowY + boxH + 40, '#4ade80');

      // Box 5: 40% x 16775 = 6710
      drawBox(midX - 120, flowY + boxH + 50, 240, 45, 'rgba(74,222,128,0.15)', 'rgba(74,222,128,0.5)', '0,4 \u00D7 16775 = 6710', '#4ade80', 18);

      // Verification section
      ctx.fillStyle = '#94a3b8';
      ctx.font = '14px Segoe UI, sans-serif';
      ctx.fillText('Provera:', midX, 280);

      drawBox(midX - 170, 295, 340, 40, 'rgba(52,211,153,0.06)', 'rgba(52,211,153,0.2)', '30% od 6710 = 2013 \u2713   |   40% od 16775 = 6710 \u2713', '#34d399', 13);

      // Final checkmark and answer
      ctx.strokeStyle = '#4ade80';
      ctx.lineWidth = 3;
      ctx.beginPath();
      ctx.moveTo(midX - 15, 375);
      ctx.lineTo(midX - 3, 388);
      ctx.lineTo(midX + 18, 362);
      ctx.stroke();

      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 16px Segoe UI, sans-serif';
      ctx.fillText('Odgovor: (A) 6710', midX + 75, 378);
    }

    // Button text update
    if (currentPhase >= maxPhase) {
      animBtn.textContent = 'Zavrseno';
      animBtn.style.opacity = '0.5';
    } else {
      animBtn.textContent = 'Sledeci korak';
      animBtn.style.opacity = '1';
    }
  }

  drawDiagram();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Procenti i osnovne operacije sa brojevima",
  "subject": "math",
  "unit": "aritmetika",
  "topic_tags": ["procenti", "procentni racun", "linearne jednacine", "aritmetika", "prirodni brojevi"]
}
BRAINSPARK_META-->