<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kvadrat upisan u jednakokraki trougao</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM:
U jednakokraki trougao cija je osnovica a = 10 cm i krak b = 13 cm upisan je kvadrat
tako da mu dva temena leze na osnovici trougla, a druga dva na kracima.
Duzina stranice kvadrata (u cm) jednaka je:
(A) 64/11  (B) 63/11  (C) 62/11  (D) 61/11  (E) 60/11

SOLUTION:

Step 1: Find the height of the isosceles triangle.
  The altitude from the apex bisects the base: half-base = 5 cm.
  h = sqrt(13^2 - 5^2) = sqrt(169 - 25) = sqrt(144) = 12 cm.

Step 2: Set up coordinates.
  Place the base along the x-axis from (-5, 0) to (5, 0).
  Apex at (0, 12).

Step 3: Find the equations of the equal sides.
  Left side: from (-5, 0) to (0, 12). Slope = (12-0)/(0-(-5)) = 12/5.
  Equation: y = (12/5)(x + 5), i.e., x = 5y/12 - 5.
  Right side: from (5, 0) to (0, 12). Slope = (12-0)/(0-5) = -12/5.
  Equation: y = (-12/5)(x - 5), i.e., x = -5y/12 + 5.

Step 4: The square sits on the base with side length s.
  Bottom side: from (-s/2, 0) to (s/2, 0) on the base.
  Top side: from (-s/2, s) to (s/2, s) at height s.

Step 5: At height y = s, the width of the triangle is:
  Right boundary: x_R = -5s/12 + 5 = 5(1 - s/12) = 5(12 - s)/12
  Left boundary: x_L = 5s/12 - 5 = -5(12 - s)/12
  Width = x_R - x_L = 2 * 5(12 - s)/12 = 10(12 - s)/12

Step 6: The top side of the square has length s and must fit exactly at the triangle
  width at height s. The top-right corner (s/2, s) lies on the right side:
  s/2 = 5(12 - s)/12

Step 7: Solve for s.
  s/2 = 5(12 - s)/12
  12s/2 = 5(12 - s)
  6s = 60 - 5s
  6s + 5s = 60
  11s = 60
  s = 60/11

ANSWER: (E) 60/11
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
  transition: border-color 0.2s;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 10px 0;
  user-select: none;
}

details summary:hover {
  color: #93bbfc;
}

details[open] summary {
  margin-bottom: 10px;
}

.theory-content ul {
  list-style: none;
  padding-left: 0;
}

.theory-content li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #cbd5e1;
}

.theory-content li:last-child {
  border-bottom: none;
}

.canvas-card {
  text-align: center;
}

canvas {
  border-radius: 10px;
  width: 100%;
  max-width: 650px;
  touch-action: none;
}

.drag-hint {
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

.step-container {
  margin-bottom: 18px;
  padding: 18px;
  padding-left: 24px;
  background: rgba(30,41,59,0.5);
  border-left: 3px solid #334155;
  border-radius: 0 10px 10px 0;
  cursor: pointer;
  transition: border-color 0.25s, background 0.25s;
}

.step-container:hover,
.step-container.active {
  border-left-color: #4ade80;
  background: rgba(30,41,59,0.9);
}

.step-badge {
  display: inline-block;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  font-weight: 700;
  font-size: 0.8rem;
  padding: 3px 10px;
  border-radius: 20px;
  margin-bottom: 8px;
}

.step-title {
  font-size: 1.1rem;
  font-weight: 600;
  color: #e2e8f0;
  margin-bottom: 8px;
}

.step-text {
  color: #cbd5e1;
  font-size: 0.97rem;
}

.checkpoint {
  background: rgba(167,139,250,0.08);
  border: 1px solid rgba(167,139,250,0.2);
  border-radius: 8px;
  padding: 12px 16px;
  margin: 15px 0;
}

.checkpoint summary {
  color: #a78bfa;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.25);
  border-radius: 14px;
  padding: 22px;
  margin-bottom: 24px;
}

.insight-box h3 {
  color: #a78bfa;
  margin-bottom: 10px;
}

.insight-formula {
  text-align: center;
  font-size: 1.3rem;
  margin: 14px 0;
}

.final-answer {
  text-align: center;
  padding: 30px;
  border: 2px solid rgba(74,222,128,0.3);
  background: rgba(74,222,128,0.06);
}

.final-answer .answer-value {
  font-size: 2rem;
  font-weight: 700;
  color: #4ade80;
  margin: 16px 0;
}

.final-answer .answer-label {
  color: #94a3b8;
  font-size: 0.95rem;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 12px;
  margin: 20px 0;
}

.option-box {
  padding: 12px 22px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: rgba(30,41,59,0.6);
  color: #94a3b8;
  font-size: 1.05rem;
  font-weight: 600;
  transition: all 0.3s;
}

.option-box.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.12);
  color: #4ade80;
}

.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 0;
  padding-left: 16px;
  position: relative;
  color: #cbd5e1;
}

.pitfall-list li::before {
  content: '\26A0';
  position: absolute;
  left: 0;
}

.challenge-box {
  border-left: 3px solid #f472b6;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 10px;
}

.slider-container {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 14px;
  margin: 14px 0 6px 0;
  flex-wrap: wrap;
}

.slider-container label {
  color: #94a3b8;
  font-size: 0.95rem;
}

.slider-container input[type="range"] {
  accent-color: #60a5fa;
  width: 200px;
}

.slider-value {
  color: #60a5fa;
  font-weight: 700;
  font-size: 1rem;
  min-width: 60px;
  text-align: center;
}

@media (max-width: 700px) {
  h1 { font-size: 1.5rem; }
  .container { padding: 10px; }
  .card { padding: 16px; }
  .given-grid { flex-direction: column; }
  .options-row { flex-direction: column; align-items: center; }
  .slider-container { flex-direction: column; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Kvadrat upisan u jednakokraki trougao</h1>
  <p class="subtitle">Geometrija, slicni trouglovi, jednakokraki trougao, upisane figure</p>

  <!-- PROBLEM STATEMENT -->
  <div class="card problem-statement">
    <h2>Zadatak</h2>
    <p>U jednakokraki trougao cija je osnovica \( a = 10 \) cm i krak \( b = 13 \) cm upisan je kvadrat tako da mu dva temena leze na osnovici trougla, a druga dva na kracima. Duzina stranice kvadrata (u cm) jednaka je:</p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(\dfrac{64}{11}\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(\dfrac{63}{11}\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(\dfrac{62}{11}\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(\dfrac{61}{11}\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(\dfrac{60}{11}\)</div>
      </div>
    </div>
  </div>

  <!-- PLAN -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>Najpre racunamo visinu jednakokrakog trougla pomocu Pitagorine teoreme. Zatim postavljamo koordinatni sistem i koristimo <span class="highlight">slicnost trouglova</span>: na visini \( s \) (gde je \( s \) stranica kvadrata), sirina trougla se odredjuje proporcijom sa punom visinom. Uslov da se gornja stranica kvadrata poklopi sa tom sirinom daje linearnu jednacinu za \( s \).</p>
  </div>

  <!-- THEORY -->
  <div class="card">
    <details>
      <summary>Kljucne formule i teoreme</summary>
      <div class="theory-content">
        <ul>
          <li><strong>Pitagorina teorema:</strong> U pravouglom trouglu sa katetama \( a \) i \( b \) i hipotenuzom \( c \) vazi \( c^2 = a^2 + b^2 \).</li>
          <li><strong>Visina jednakokrakog trougla:</strong> Visina na osnovicu \( a \) jednakokrakog trougla sa krakom \( b \) iznosi \( h = \sqrt{b^2 - \left(\frac{a}{2}\right)^2} \).</li>
          <li><strong>Slicni trouglovi:</strong> Ako prava paralelna osnovici sece krakove trougla na visini \( y \), sirina preseka je proporcionalna: \( w(y) = a \cdot \frac{h - y}{h} \).</li>
          <li><strong>Upisani kvadrat:</strong> Za trougao sa osnovicom \( a \) i visinom \( h \), stranica kvadrata upisanog na osnovicu je \( s = \frac{a \cdot h}{a + h} \).</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- VISUAL AID -->
  <div class="card canvas-card">
    <h2>Interaktivni prikaz</h2>
    <p style="color:#94a3b8; margin-bottom:14px;">Jednakokraki trougao sa upisanim kvadratom. Pomerajte klizac da vidite kako se velicina kvadrata menja sa visinom trougla.</p>
    <div class="slider-container">
      <label for="sliderH">Visina trougla \(h\):</label>
      <input type="range" id="sliderH" min="5.5" max="20" step="0.1" value="12">
      <span class="slider-value" id="sliderHVal">12,0</span>
    </div>
    <canvas id="diagram" width="650" height="500"></canvas>
    <p class="drag-hint">Pomerajte klizac da vidite kako visina trougla utice na velicinu upisanog kvadrata</p>
  </div>

  <!-- STEP-BY-STEP -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container" id="step1">
      <span class="step-badge">Korak 1</span>
      <div class="step-title">Racunanje visine trougla</div>
      <div class="step-text">
        <p>Jednakokraki trougao ima osnovicu \( a = 10 \) cm i krak \( b = 13 \) cm. Visina na osnovicu polovi osnovicu, pa je poluosnovica \( \frac{a}{2} = 5 \) cm. Primenom Pitagorine teoreme:</p>
        <div class="math-box">
          \[ h = \sqrt{b^2 - \left(\frac{a}{2}\right)^2} = \sqrt{13^2 - 5^2} = \sqrt{169 - 25} = \sqrt{144} = 12 \text{ cm} \]
        </div>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container" id="step2">
      <span class="step-badge">Korak 2</span>
      <div class="step-title">Koordinatni sistem i jednacine krakova</div>
      <div class="step-text">
        <p>Postavimo koordinatni sistem tako da je sredina osnovice u koordinatnom pocetku. Temena trougla su:</p>
        <div class="math-box">
          \[ A(-5,\, 0), \quad B(5,\, 0), \quad C(0,\, 12) \]
        </div>
        <p>Jednacina levog kraka (od \(A\) do \(C\)):</p>
        <div class="math-box">
          \[ y = \frac{12}{5}(x + 5) \quad \Rightarrow \quad x = \frac{5y}{12} - 5 \]
        </div>
        <p>Jednacina desnog kraka (od \(B\) do \(C\)):</p>
        <div class="math-box">
          \[ y = -\frac{12}{5}(x - 5) \quad \Rightarrow \quad x = -\frac{5y}{12} + 5 \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri se: Zasto visina polovi osnovicu jednakokrakog trougla?</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        U jednakokrakom trouglu, visina na osnovicu je ujedno i simetrala osnovice i tezisna linija. Oba kraka su jednaka, pa noziste visine mora biti u sredini osnovice (po simetriji). To daje dva sukladna pravougla trougla sa katetama \( \frac{a}{2} \) i \( h \), i hipotenuzom \( b \).
      </p>
    </details>

    <!-- Step 3 -->
    <div class="step-container" id="step3">
      <span class="step-badge">Korak 3</span>
      <div class="step-title">Postavljanje uslova za kvadrat</div>
      <div class="step-text">
        <p>Kvadrat stranice \( s \) lezi na osnovici, simetrican u odnosu na visinu. Njegova temena su:</p>
        <div class="math-box">
          \[ \text{Donja: } \left(-\frac{s}{2},\, 0\right) \text{ i } \left(\frac{s}{2},\, 0\right) \]
          \[ \text{Gornja: } \left(-\frac{s}{2},\, s\right) \text{ i } \left(\frac{s}{2},\, s\right) \]
        </div>
        <p>Gornje desno teme \(\left(\frac{s}{2},\, s\right)\) mora lezati na desnom kraku trougla.</p>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step-container" id="step4">
      <span class="step-badge">Korak 4</span>
      <div class="step-title">Sirina trougla na visini \(s\)</div>
      <div class="step-text">
        <p>Na visini \( y = s \), desna granica trougla (na desnom kraku) ima \(x\)-koordinatu:</p>
        <div class="math-box">
          \[ x_{\text{desno}} = -\frac{5s}{12} + 5 = \frac{5(12 - s)}{12} \]
        </div>
        <p>Posto gornje desno teme kvadrata mora biti upravo na ovoj granici:</p>
        <div class="math-box">
          \[ \frac{s}{2} = \frac{5(12 - s)}{12} \]
        </div>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step-container" id="step5">
      <span class="step-badge">Korak 5</span>
      <div class="step-title">Resavanje jednacine</div>
      <div class="step-text">
        <p>Pomnozimo obe strane sa 12 da uklonimo imenilac:</p>
        <div class="math-box">
          \[ 12 \cdot \frac{s}{2} = 5(12 - s) \]
          \[ 6s = 60 - 5s \]
        </div>
        <p>Prenesemo \(5s\) na levu stranu:</p>
        <div class="math-box">
          \[ 6s + 5s = 60 \]
          \[ 11s = 60 \]
          \[ \boxed{s = \frac{60}{11}} \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri se: Da li se mogla koristiti formula za upisani kvadrat?</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        Da! Za trougao sa osnovicom \( a \) i odgovarajucom visinom \( h \), stranica kvadrata upisanog na tu osnovicu (sa dva temena na osnovici i dva na kracima) iznosi:
        \[ s = \frac{a \cdot h}{a + h} = \frac{10 \cdot 12}{10 + 12} = \frac{120}{22} = \frac{60}{11} \]
        Ova formula se izvodi upravo postupkom koji smo sproveli u koracima 3-5.
      </p>
    </details>

    <!-- Step 6 -->
    <div class="step-container" id="step6">
      <span class="step-badge">Korak 6</span>
      <div class="step-title">Provera rezultata</div>
      <div class="step-text">
        <p>Proverimo da \( s = \frac{60}{11} \approx 5{,}45 \) cm zadovoljava uslov. Gornje desno teme je u tacki \(\left(\frac{30}{11},\, \frac{60}{11}\right)\). Da li lezi na pravoj desnog kraka?</p>
        <div class="math-box">
          \[ y = -\frac{12}{5}\left(x - 5\right) = -\frac{12}{5}\left(\frac{30}{11} - 5\right) = -\frac{12}{5} \cdot \frac{30 - 55}{11} = -\frac{12}{5} \cdot \frac{-25}{11} = \frac{300}{55} = \frac{60}{11} \; \checkmark \]
        </div>
        <p>Takodje, proverimo da kvadrat staje na osnovicu: \( s = \frac{60}{11} \approx 5{,}45 < 10 = a \; \checkmark \)</p>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details class="checkpoint">
      <summary>Proveri se: Kako bismo alternativno resili ovaj zadatak pomocu slicnosti trouglova?</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        Gornja stranica kvadrata je paralelna osnovici i formira manji trougao iznad kvadrata. Ovaj manji trougao je slican polaznom (oba su jednakokraka sa istim uglovima). Visina manjeg trougla je \( h - s = 12 - s \), a visina veceg je \( h = 12 \). Po slicnosti, osnovica manjeg trougla iznosi \( 10 \cdot \frac{12-s}{12} \). Ali ta osnovica je upravo gornja stranica kvadrata, dakle jednaka \( s \):
        \[ s = 10 \cdot \frac{12 - s}{12} \implies 12s = 120 - 10s \implies 22s = 120 \implies s = \frac{60}{11} \]
      </p>
    </details>
  </div>

  <!-- KEY INSIGHT -->
  <div class="insight-box">
    <h3>Kljucni uvid</h3>
    <p>Problem se svodi na jednu linearnu jednacinu zahvaljujuci <span class="highlight">slicnosti trouglova</span>. Horizontalna prava na visini \( s \) "odseca" manji trougao slican polaznom, cija je osnovica upravo stranica kvadrata. Opsta formula za ovu konfiguraciju je izuzetno elegantna:</p>
    <div class="insight-formula">
      \[ s = \frac{a \cdot h}{a + h} \]
    </div>
    <p style="color:#94a3b8; text-align:center;">gde je \( a \) osnovica, a \( h \) visina na tu osnovicu.</p>
  </div>

  <!-- FINAL ANSWER -->
  <div class="card final-answer">
    <h2>Konacan odgovor</h2>
    <p class="answer-label">Duzina stranice kvadrata iznosi:</p>
    <div class="answer-value">\(\displaystyle (E) \;\; \frac{60}{11}\) cm</div>
    <div class="options-row">
      <div class="option-box">(A) \(\frac{64}{11}\)</div>
      <div class="option-box">(B) \(\frac{63}{11}\)</div>
      <div class="option-box">(C) \(\frac{62}{11}\)</div>
      <div class="option-box">(D) \(\frac{61}{11}\)</div>
      <div class="option-box correct">(E) \(\frac{60}{11}\)</div>
    </div>
    <p class="verification-note">Provera: \( s = \frac{60}{11} \approx 5{,}45 \) cm. Gornja temena kvadrata leze na kracima trougla: \( y\left(\frac{30}{11}\right) = \frac{60}{11} \; \checkmark \). Alternativno, formula: \( s = \frac{10 \cdot 12}{10 + 12} = \frac{120}{22} = \frac{60}{11} \; \checkmark \)</p>
  </div>

  <!-- PITFALLS -->
  <div class="card">
    <h2>Ceste greske</h2>
    <ul class="pitfall-list">
      <li>Pogresno racunanje visine: zaboraviti da se koristi <em>polu</em>osnovica \(\frac{a}{2} = 5\) a ne cela osnovica \(a = 10\) u Pitagorinoj teoremi.</li>
      <li>Zamena sirine trougla i polustranice kvadrata: na visini \(s\), <em>polu</em>sirina trougla je \(\frac{5(12-s)}{12}\), a ne cela sirina. Treba izjednaciti sa \(\frac{s}{2}\), a ne sa \(s\).</li>
      <li>Aritmeticka greska pri mnozenju: \(6s + 5s = 11s\), ne \(10s\). Cesta greska je da se zaboravi da obe strane jednacine doprinose koeficijentu uz \(s\).</li>
    </ul>
  </div>

  <!-- CHALLENGE -->
  <div class="card challenge-box">
    <h2>Dodatni izazov</h2>
    <p>U isti jednakokraki trougao (osnovica 10, krak 13) upisan je pravougaonik cija je jedna stranica na osnovici, a druga dva temena na kracima. Ako je obim pravougaonika 20 cm, kolika je njegova povrsina?</p>
    <details>
      <summary>Pomoc</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        Neka je \( x \) stranica pravougaonika na osnovici, a \( y \) visina pravougaonika. Po slicnosti trouglova: \( x = 10 \cdot \frac{12 - y}{12} = 10 - \frac{5y}{6} \). Uslov za obim: \( 2(x + y) = 20 \implies x + y = 10 \). Uvrstimo: \( 10 - \frac{5y}{6} + y = 10 \implies \frac{y}{6} = 0 \implies y = 0 \). Razmislite: sta to znaci geometrijski? Pokusajte sa obimom 19 cm.
      </p>
    </details>
  </div>

</div>

<script>
(() => {
  // Step click highlighting
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.toggle('active');
    });
  });

  // Canvas diagram
  const canvas = document.getElementById('diagram');
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;
  const slider = document.getElementById('sliderH');
  const sliderVal = document.getElementById('sliderHVal');

  const BASE = 10;

  // Coordinate transform: math coords -> canvas coords
  // Triangle base from (-5, 0) to (5, 0), apex at (0, h)
  // Canvas: we center and scale to fit nicely
  function getTransform(h) {
    const padding = 50;
    const maxDim = Math.max(BASE, h);
    const scaleX = (W - 2 * padding) / BASE;
    const scaleY = (H - 2 * padding) / (h + 1);
    const scale = Math.min(scaleX, scaleY);
    const cx = W / 2;
    const baseY = H - padding;
    return { scale, cx, baseY };
  }

  function toCanvas(mx, my, t) {
    return [t.cx + mx * t.scale, t.baseY - my * t.scale];
  }

  function drawDiagram(h) {
    const halfBase = BASE / 2;
    const s = (BASE * h) / (BASE + h); // inscribed square side
    const t = getTransform(h);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Triangle vertices
    const A = toCanvas(-halfBase, 0, t);
    const B = toCanvas(halfBase, 0, t);
    const C = toCanvas(0, h, t);

    // Draw triangle fill
    ctx.beginPath();
    ctx.moveTo(A[0], A[1]);
    ctx.lineTo(B[0], B[1]);
    ctx.lineTo(C[0], C[1]);
    ctx.closePath();
    ctx.fillStyle = 'rgba(96, 165, 250, 0.06)';
    ctx.fill();

    // Draw triangle edges
    ctx.beginPath();
    ctx.moveTo(A[0], A[1]);
    ctx.lineTo(B[0], B[1]);
    ctx.lineTo(C[0], C[1]);
    ctx.closePath();
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.stroke();

    // Height dashed line
    const hTop = toCanvas(0, h, t);
    const hBot = toCanvas(0, 0, t);
    ctx.setLineDash([6, 4]);
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(hBot[0], hBot[1]);
    ctx.lineTo(hTop[0], hTop[1]);
    ctx.stroke();
    ctx.setLineDash([]);

    // Height label
    ctx.fillStyle = '#94a3b8';
    ctx.font = '14px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    const hMid = toCanvas(0, h / 2, t);
    ctx.fillText('h = ' + h.toFixed(1).replace('.', ','), hMid[0] + 8, hMid[1]);

    // Inscribed square
    const sqBL = toCanvas(-s / 2, 0, t);
    const sqBR = toCanvas(s / 2, 0, t);
    const sqTR = toCanvas(s / 2, s, t);
    const sqTL = toCanvas(-s / 2, s, t);

    // Square fill
    ctx.beginPath();
    ctx.moveTo(sqBL[0], sqBL[1]);
    ctx.lineTo(sqBR[0], sqBR[1]);
    ctx.lineTo(sqTR[0], sqTR[1]);
    ctx.lineTo(sqTL[0], sqTL[1]);
    ctx.closePath();
    ctx.fillStyle = 'rgba(74, 222, 128, 0.12)';
    ctx.fill();

    // Square outline
    ctx.beginPath();
    ctx.moveTo(sqBL[0], sqBL[1]);
    ctx.lineTo(sqBR[0], sqBR[1]);
    ctx.lineTo(sqTR[0], sqTR[1]);
    ctx.lineTo(sqTL[0], sqTL[1]);
    ctx.closePath();
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2.5;
    ctx.stroke();

    // Square side label
    const sqMidRight = [(sqBR[0] + sqTR[0]) / 2, (sqBR[1] + sqTR[1]) / 2];
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 14px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('s = ' + s.toFixed(2).replace('.', ','), sqMidRight[0] + 10, sqMidRight[1]);

    // The smaller triangle above the square
    const smallTL = toCanvas(-s / 2, s, t);
    const smallTR = toCanvas(s / 2, s, t);
    ctx.setLineDash([4, 3]);
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(smallTL[0], smallTL[1]);
    ctx.lineTo(C[0], C[1]);
    ctx.lineTo(smallTR[0], smallTR[1]);
    ctx.stroke();
    ctx.setLineDash([]);

    // Label "slicni trouglovi"
    const smallMid = toCanvas(0, s + (h - s) * 0.4, t);
    ctx.fillStyle = '#a78bfa';
    ctx.font = '12px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('slican trougao', smallMid[0], smallMid[1]);

    // Vertex labels
    ctx.font = 'bold 15px Segoe UI, sans-serif';
    ctx.textAlign = 'center';

    ctx.fillStyle = '#60a5fa';
    ctx.fillText('A', A[0] - 16, A[1] + 18);
    ctx.fillText('B', B[0] + 16, B[1] + 18);
    ctx.fillText('C', C[0], C[1] - 12);

    // Base label
    ctx.fillStyle = '#94a3b8';
    ctx.font = '14px Segoe UI, sans-serif';
    const baseMid = toCanvas(0, 0, t);
    ctx.fillText('a = 10', baseMid[0], baseMid[1] + 28);

    // Right side label
    const rightMid = [(B[0] + C[0]) / 2, (B[1] + C[1]) / 2];
    ctx.fillStyle = '#94a3b8';
    ctx.textAlign = 'left';
    ctx.fillText('b = 13', rightMid[0] + 10, rightMid[1] - 5);

    // Mark the four vertices of the square
    const squareVerts = [sqBL, sqBR, sqTR, sqTL];
    squareVerts.forEach((v, i) => {
      ctx.beginPath();
      ctx.arc(v[0], v[1], 4, 0, 2 * Math.PI);
      ctx.fillStyle = '#4ade80';
      ctx.fill();
      ctx.strokeStyle = '#166534';
      ctx.lineWidth = 1.5;
      ctx.stroke();
    });

    // Mark the top two vertices touching the sides (highlight)
    [sqTL, sqTR].forEach(v => {
      ctx.beginPath();
      ctx.arc(v[0], v[1], 9, 0, 2 * Math.PI);
      ctx.fillStyle = 'rgba(74, 222, 128, 0.2)';
      ctx.fill();
    });

    // Draw the proportionality annotation
    // Height of small triangle: h - s
    const annoX = toCanvas(-halfBase - 0.8, s / 2, t);
    ctx.fillStyle = '#4ade80';
    ctx.font = '12px Segoe UI, sans-serif';
    ctx.textAlign = 'right';

    // Right-angle marker at base center
    const raSize = 8;
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(hBot[0] + raSize, hBot[1]);
    ctx.lineTo(hBot[0] + raSize, hBot[1] - raSize);
    ctx.lineTo(hBot[0], hBot[1] - raSize);
    ctx.stroke();

    // Info box top-left
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 14px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Jednakokraki trougao sa upisanim kvadratom', 14, 24);

    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, sans-serif';
    ctx.fillText('a = 10, b = 13, h = ' + h.toFixed(1).replace('.', ','), 14, 44);

    // Highlight the answer for h=12
    if (Math.abs(h - 12) < 0.05) {
      ctx.fillStyle = '#34d399';
      ctx.font = 'bold 13px Segoe UI, sans-serif';
      ctx.fillText('s = 60/11 \u2248 5,45 cm  \u2714  Tacan odgovor!', 14, 66);
    } else {
      ctx.fillStyle = '#f472b6';
      ctx.font = '13px Segoe UI, sans-serif';
      ctx.fillText('s = ' + s.toFixed(4).replace('.', ',') + ' cm (za h = ' + h.toFixed(1).replace('.', ',') + ')', 14, 66);
    }

    // Formula in bottom-right
    ctx.fillStyle = '#64748b';
    ctx.font = '12px Segoe UI, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText('s = a\u00B7h / (a + h)', W - 14, H - 14);
  }

  function update() {
    const hVal = parseFloat(slider.value);
    sliderVal.textContent = hVal.toFixed(1).replace('.', ',');
    drawDiagram(hVal);
  }

  slider.addEventListener('input', update);
  update();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Kvadrat upisan u jednakokraki trougao",
  "subject": "math",
  "unit": "geometrija",
  "topic_tags": ["geometrija", "jednakokraki trougao", "upisane figure", "slicni trouglovi", "Pitagorina teorema", "kvadrat"]
}
BRAINSPARK_META-->