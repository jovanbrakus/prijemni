<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zbir beskonacnog geometrijskog reda sa proizvodom kolicnika</title>
<script type="text/info" id="logic-scratchpad">
Problem: Neka je s = 1 + q + q^2 + ... (|q| < 1) i S = 1 + Q + Q^2 + ... (|Q| < 1),
gde su s i S dati brojevi. Tada je zbir 1 + qQ + q^2*Q^2 + q^3*Q^3 + ... jednak?

Korak 1: Izrazimo q i Q preko s i S.
  Beskonacni geometrijski red: 1 + q + q^2 + ... = 1/(1-q) = s
  => 1 - q = 1/s
  => q = 1 - 1/s = (s - 1)/s

  Analogno: 1 + Q + Q^2 + ... = 1/(1-Q) = S
  => 1 - Q = 1/S
  => Q = 1 - 1/S = (S - 1)/S

Korak 2: Izracunajmo proizvod qQ.
  qQ = ((s-1)/s) * ((S-1)/S) = (s-1)(S-1) / (sS)

Korak 3: Proverimo da je |qQ| < 1.
  Posto je |q| < 1 i |Q| < 1, sledi |qQ| = |q||Q| < 1.
  Dakle, geometrijski red sa kolicnikom qQ je konvergentan.

Korak 4: Izracunajmo trazeni zbir.
  1 + qQ + (qQ)^2 + (qQ)^3 + ... = 1/(1 - qQ)

Korak 5: Izrazimo 1 - qQ.
  1 - qQ = 1 - (s-1)(S-1)/(sS)
         = (sS - (s-1)(S-1)) / (sS)

  Razvijemo (s-1)(S-1):
  (s-1)(S-1) = sS - s - S + 1

  Dakle:
  sS - (sS - s - S + 1) = sS - sS + s + S - 1 = s + S - 1

  Prema tome:
  1 - qQ = (s + S - 1) / (sS)

Korak 6: Konacan zbir.
  1/(1 - qQ) = sS / (s + S - 1)

Odgovor: (A) s*S/(s + S - 1)

Verifikacija: Uzmimo konkretan primer.
  Neka je q = 1/2 => s = 1/(1 - 1/2) = 2
  Neka je Q = 1/3 => S = 1/(1 - 1/3) = 3/2
  qQ = 1/6
  Zbir = 1/(1 - 1/6) = 1/(5/6) = 6/5

  Formula (A): s*S/(s + S - 1) = 2 * (3/2) / (2 + 3/2 - 1) = 3 / (5/2) = 3 * 2/5 = 6/5 ✓

  Proverimo i ostale opcije:
  (B): s*S/(2sS - s - S + 1) = 3/(2*3 - 2 - 3/2 + 1) = 3/(6 - 2 - 1.5 + 1) = 3/3.5 = 6/7 ≠ 6/5 ✗
  (C): s*S/(sS + s + S - 2) = 3/(3 + 2 + 3/2 - 2) = 3/(4.5) = 2/3 ≠ 6/5 ✗
  (D): (2sS - 1)/(s + S - 1) = (6 - 1)/(5/2) = 5/(5/2) = 2 ≠ 6/5 ✗
  (E): s*S = 3 ≠ 6/5 ✗

  Jedino opcija (A) daje tacan rezultat.
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  font-size: 1.05rem;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
  transition: transform 0.2s, border-color 0.2s;
}

.given-item:hover {
  transform: translateY(-2px);
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card h2 {
  color: #a78bfa;
}

details {
  margin: 15px 0;
  background: rgba(167,139,250,0.06);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 1.05rem;
  user-select: none;
}

details summary:hover {
  color: #c4b5fd;
}

details[open] summary {
  margin-bottom: 12px;
}

details ul {
  list-style: none;
  padding-left: 0;
}

details li {
  padding: 6px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #e2e8f0;
}

details li:last-child {
  border-bottom: none;
}

.canvas-card {
  text-align: center;
}

.canvas-card canvas {
  width: 100%;
  max-width: 700px;
  border-radius: 10px;
  border: 1px solid #334155;
  touch-action: none;
}

.step {
  display: flex;
  gap: 16px;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 14px;
  border-left: 3px solid transparent;
  transition: border-color 0.2s, background 0.2s;
  cursor: pointer;
}

.step:hover, .step.active {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}

.step-badge {
  flex-shrink: 0;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.95rem;
}

.step-content {
  flex: 1;
}

.step-content p {
  color: #94a3b8;
  margin-top: 6px;
}

.checkpoint {
  background: rgba(52,211,153,0.06);
  border: 1px solid rgba(52,211,153,0.18);
}

.checkpoint summary {
  color: #34d399;
}

.insight-card {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid rgba(167,139,250,0.25);
}

.insight-card h2 {
  color: #a78bfa;
}

.final-answer {
  border: 2px solid rgba(74,222,128,0.3);
  background: linear-gradient(135deg, rgba(74,222,128,0.06), rgba(52,211,153,0.04));
}

.final-answer h2 {
  color: #4ade80;
}

.answer-big {
  font-size: 1.6rem;
  font-weight: 700;
  color: #4ade80;
  text-align: center;
  margin: 20px 0;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 16px 0;
}

.option-box {
  padding: 10px 20px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: #1e293b;
  text-align: center;
  min-width: 90px;
  transition: transform 0.2s;
}

.option-box.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.1);
  transform: scale(1.05);
}

.option-box .opt-label {
  color: #94a3b8;
  font-size: 0.85rem;
}

.option-box .opt-value {
  font-size: 1.15rem;
  font-weight: 600;
  color: #e2e8f0;
}

.option-box.correct .opt-value {
  color: #4ade80;
}

.verification {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 14px;
  padding-top: 14px;
  border-top: 1px solid #334155;
}

.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 14px;
  margin-bottom: 8px;
  background: rgba(224,148,104,0.06);
  border-left: 3px solid #e09468;
  border-radius: 0 8px 8px 0;
  color: #e2e8f0;
}

.pitfall-list li strong {
  color: #e09468;
}

.challenge-card {
  border: 1px solid rgba(244,114,182,0.2);
  background: rgba(244,114,182,0.04);
}

.challenge-card h2 {
  color: #f472b6;
}

.legend {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  justify-content: center;
  margin-top: 14px;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 8px;
  color: #94a3b8;
  font-size: 0.95rem;
}

.legend-swatch {
  width: 24px;
  height: 4px;
  border-radius: 2px;
}

.drag-hint {
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 10px;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step { flex-direction: column; gap: 10px; }
  .given-grid { flex-direction: column; }
  .options-row { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Zbir beskonacnog reda sa proizvodom kolicnika</h1>
  <p class="subtitle">Geometrijski redovi, izrazavanje kolicnika i kompozicija redova</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Neka je \(s = 1 + q + q^2 + \cdots\) (\(|q| < 1\)) i \(S = 1 + Q + Q^2 + \cdots\) (\(|Q| < 1\)), gde su \(s\) i \(S\) dati brojevi. Tada je zbir \(1 + qQ + q^2Q^2 + q^3Q^3 + \cdots\) jednak:</p>

    <div class="given-grid" style="margin-bottom: 18px;">
      <div class="given-item">
        <div class="label">Red za \(s\)</div>
        <div class="value">\(s = \displaystyle\sum_{n=0}^{\infty} q^n\)</div>
      </div>
      <div class="given-item">
        <div class="label">Red za \(S\)</div>
        <div class="value">\(S = \displaystyle\sum_{n=0}^{\infty} Q^n\)</div>
      </div>
      <div class="given-item">
        <div class="label">Trazeni zbir</div>
        <div class="value">\(\displaystyle\sum_{n=0}^{\infty} (qQ)^n\)</div>
      </div>
    </div>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(\dfrac{s \cdot S}{s + S - 1}\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(\dfrac{s \cdot S}{2sS - s - S + 1}\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(\dfrac{s \cdot S}{sS + s + S - 2}\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(\dfrac{2sS - 1}{s + S - 1}\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(s \cdot S\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>Koristicemo formulu za zbir beskonacnog geometrijskog reda \(\frac{1}{1-r}\) da izrazimo \(q\) preko \(s\) i \(Q\) preko \(S\). Zatim cemo naci \(qQ\), pa primeniti istu formulu na red sa kolicnikom \(qQ\).</p>
  </div>

  <!-- Theory Refresher -->
  <details>
    <summary>Kljucne formule i teoreme</summary>
    <ul>
      <li><strong>Zbir beskonacnog geometrijskog reda:</strong> Ako je \(|r| < 1\), tada \(\displaystyle\sum_{n=0}^{\infty} r^n = 1 + r + r^2 + \cdots = \frac{1}{1-r}\).</li>
      <li><strong>Inverzna veza:</strong> Iz \(s = \frac{1}{1-q}\) sledi \(q = 1 - \frac{1}{s} = \frac{s-1}{s}\).</li>
      <li><strong>Proizvod kolicnika:</strong> Ako su \(|q| < 1\) i \(|Q| < 1\), tada je \(|qQ| = |q| \cdot |Q| < 1\), pa je red \(\sum (qQ)^n\) takodje konvergentan.</li>
      <li><strong>Uslov konvergencije:</strong> Posto su \(s\) i \(S\) zbiri konvergentnih redova sa pozitivnim prvim clanom 1, vazi \(s > 1\) i \(S > 1\) (za \(0 < q < 1\) i \(0 < Q < 1\)), odnosno \(s \neq 0\) i \(S \neq 0\) u opstem slucaju.</li>
    </ul>
  </details>

  <!-- Canvas Visualization -->
  <div class="card canvas-card">
    <h2>Interaktivni prikaz</h2>
    <p style="color:#94a3b8; margin-bottom: 14px;">Pomerajte klizace da vidite kako \(q\) i \(Q\) uticu na zbir reda</p>
    <canvas id="graph-canvas" width="700" height="480"></canvas>
    <div style="display: flex; flex-wrap: wrap; gap: 24px; justify-content: center; margin-top: 16px;">
      <div style="display: flex; align-items: center; gap: 10px;">
        <label style="color: #60a5fa; font-weight: 600;">q:</label>
        <input type="range" id="slider-q" min="-90" max="90" value="50" style="width: 140px; accent-color: #60a5fa;">
        <span id="val-q" style="color: #60a5fa; font-weight: 600; min-width: 40px;">0,50</span>
      </div>
      <div style="display: flex; align-items: center; gap: 10px;">
        <label style="color: #f472b6; font-weight: 600;">Q:</label>
        <input type="range" id="slider-Q" min="-90" max="90" value="33" style="width: 140px; accent-color: #f472b6;">
        <span id="val-Q" style="color: #f472b6; font-weight: 600; min-width: 40px;">0,33</span>
      </div>
    </div>
    <div class="legend" style="margin-top: 12px;">
      <div class="legend-item">
        <div class="legend-swatch" style="background: #60a5fa;"></div>
        <span>Parcijalni zbir reda za \(s\)</span>
      </div>
      <div class="legend-item">
        <div class="legend-swatch" style="background: #f472b6;"></div>
        <span>Parcijalni zbir reda za \(S\)</span>
      </div>
      <div class="legend-item">
        <div class="legend-swatch" style="background: #4ade80;"></div>
        <span>Parcijalni zbir reda \(\sum(qQ)^n\)</span>
      </div>
    </div>
    <p class="drag-hint">Pomerajte klizace za q i Q da vidite kako se menjaju zbiri redova</p>
  </div>

  <!-- Step-by-step solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <div class="step" id="step-1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Izrazimo \(q\) preko \(s\)</h3>
        <p>Red \(1 + q + q^2 + \cdots\) je beskonacni geometrijski red sa kolicnikom \(q\) i prvim clanom 1. Posto je \(|q| < 1\), red konvergira:</p>
        <div class="math-box">
          \[ s = \frac{1}{1 - q} \]
        </div>
        <p>Izrazimo \(q\):</p>
        <div class="math-box">
          \[ 1 - q = \frac{1}{s} \quad \Longrightarrow \quad q = 1 - \frac{1}{s} = \frac{s - 1}{s} \]
        </div>
      </div>
    </div>

    <div class="step" id="step-2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Izrazimo \(Q\) preko \(S\)</h3>
        <p>Potpuno analogno, za drugi red:</p>
        <div class="math-box">
          \[ S = \frac{1}{1 - Q} \quad \Longrightarrow \quad Q = 1 - \frac{1}{S} = \frac{S - 1}{S} \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Ako je \(q = \frac{1}{2}\), koliko je \(s\)?</summary>
      <p>\(s = \frac{1}{1 - \frac{1}{2}} = \frac{1}{\frac{1}{2}} = 2\). Obrnuto: \(q = \frac{s-1}{s} = \frac{2-1}{2} = \frac{1}{2}\). Tacno!</p>
    </details>

    <div class="step" id="step-3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Prepoznajmo trazeni red</h3>
        <p>Trazeni zbir \(1 + qQ + q^2Q^2 + q^3Q^3 + \cdots\) mozemo zapisati kao:</p>
        <div class="math-box">
          \[ \sum_{n=0}^{\infty} (qQ)^n = 1 + (qQ) + (qQ)^2 + (qQ)^3 + \cdots \]
        </div>
        <p>Ovo je geometrijski red sa kolicnikom \(r = qQ\). Posto je \(|qQ| = |q| \cdot |Q| < 1\), red konvergira i njegov zbir je:</p>
        <div class="math-box">
          \[ \sum_{n=0}^{\infty} (qQ)^n = \frac{1}{1 - qQ} \]
        </div>
      </div>
    </div>

    <div class="step" id="step-4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Izracunajmo proizvod \(qQ\)</h3>
        <p>Zamenimo izraze za \(q\) i \(Q\):</p>
        <div class="math-box">
          \[ qQ = \frac{s - 1}{s} \cdot \frac{S - 1}{S} = \frac{(s-1)(S-1)}{sS} \]
        </div>
      </div>
    </div>

    <div class="step" id="step-5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Izracunajmo \(1 - qQ\)</h3>
        <p>Da bismo nasli zbir \(\frac{1}{1-qQ}\), najpre izracunajmo \(1 - qQ\):</p>
        <div class="math-box">
          \[ 1 - qQ = 1 - \frac{(s-1)(S-1)}{sS} = \frac{sS - (s-1)(S-1)}{sS} \]
        </div>
        <p>Razvijemo proizvod u brojiocu:</p>
        <div class="math-box">
          \[ (s-1)(S-1) = sS - s - S + 1 \]
        </div>
        <p>Oduzimanjem od \(sS\):</p>
        <div class="math-box">
          \[ sS - (sS - s - S + 1) = sS - sS + s + S - 1 = s + S - 1 \]
        </div>
        <p>Dakle:</p>
        <div class="math-box">
          \[ 1 - qQ = \frac{s + S - 1}{sS} \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Za \(q = \frac{1}{2}\), \(Q = \frac{1}{3}\), koliko je \(1 - qQ\)?</summary>
      <p>Direktno: \(1 - qQ = 1 - \frac{1}{6} = \frac{5}{6}\).</p>
      <p>Preko formule: \(s = 2\), \(S = \frac{3}{2}\). \(\frac{s + S - 1}{sS} = \frac{2 + \frac{3}{2} - 1}{2 \cdot \frac{3}{2}} = \frac{\frac{5}{2}}{3} = \frac{5}{6}\). Poklapaju se!</p>
    </details>

    <div class="step" id="step-6">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Konacan zbir</h3>
        <p>Sada invertujemo izraz za \(1 - qQ\):</p>
        <div class="math-box">
          \[ \frac{1}{1 - qQ} = \frac{1}{\;\dfrac{s + S - 1}{sS}\;} = \frac{sS}{s + S - 1} \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Koliko je zbir za \(q = \frac{1}{2}\), \(Q = \frac{1}{3}\)?</summary>
      <p>Direktno: \(\frac{1}{1 - \frac{1}{6}} = \frac{6}{5}\).</p>
      <p>Prema formuli (A): \(\frac{s \cdot S}{s + S - 1} = \frac{2 \cdot \frac{3}{2}}{2 + \frac{3}{2} - 1} = \frac{3}{\frac{5}{2}} = \frac{6}{5}\). Tacno!</p>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="card insight-card">
    <h2>Kljucni uvid</h2>
    <p>Sva tri reda su geometrijska i koriste istu formulu \(\frac{1}{1-r}\). Kljucni korak je <span class="highlight">izraziti kolicnike \(q\) i \(Q\) preko zbirova \(s\) i \(S\)</span>, a zatim prepoznati da je trazeni red takodje geometrijski sa kolicnikom \(qQ\). Elegantno pojednostavljenje dolazi od toga sto se \(sS\) u razlomku pogodno skrati:</p>
    <div class="math-box" style="text-align: center; font-size: 1.2rem;">
      \[ \boxed{\;1 + qQ + (qQ)^2 + \cdots = \frac{sS}{s + S - 1}\;} \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer">
    <h2>Konacan odgovor</h2>
    <div class="answer-big">\(\dfrac{s \cdot S}{s + S - 1}\)</div>

    <div class="options-row">
      <div class="option-box correct">
        <div class="opt-label">(A)</div>
        <div class="opt-value">\(\dfrac{sS}{s + S - 1}\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(B)</div>
        <div class="opt-value">\(\dfrac{sS}{2sS - s - S + 1}\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(C)</div>
        <div class="opt-value">\(\dfrac{sS}{sS + s + S - 2}\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(D)</div>
        <div class="opt-value">\(\dfrac{2sS - 1}{s + S - 1}\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(E)</div>
        <div class="opt-value">\(s \cdot S\)</div>
      </div>
    </div>

    <p class="verification"><strong>Numericka provera:</strong> Za \(q = \frac{1}{2}\) i \(Q = \frac{1}{3}\), imamo \(s = 2\), \(S = \frac{3}{2}\). Direktno: \(\frac{1}{1 - \frac{1}{6}} = \frac{6}{5}\). Formula (A): \(\frac{2 \cdot \frac{3}{2}}{2 + \frac{3}{2} - 1} = \frac{3}{\frac{5}{2}} = \frac{6}{5}\) &check;. Opcija (B) daje \(\frac{3}{3{,}5} = \frac{6}{7}\) &cross;. Opcije (C), (D), (E) takodje ne daju \(\frac{6}{5}\).</p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Ceste greske</h2>
    <ul class="pitfall-list">
      <li><strong>Brkanje \(q^2 Q^2\) sa \(q^2 + Q^2\):</strong> Trazeni red sadrzi \((qQ)^n\), tj. proizvode stepena, a ne zbir zasebnih redova. Red \(\sum q^n \cdot \sum Q^n = s \cdot S\) bi bio odgovor (E), ali to je proizvod dva reda, ne red proizvoda odgovarajucih clanova.</li>
      <li><strong>Greska pri razvijanju \((s-1)(S-1)\):</strong> Cesta greska je zaboraviti poslednji clan (+1) u proizvodu \(sS - s - S + 1\). To dovodi do pogresnog imeniocu u konacnom rezultatu.</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Ako uz iste uslove zelimo zbir reda \(1 + q^2 Q + q^4 Q^2 + q^6 Q^3 + \cdots\), kako bismo izrazili taj zbir preko \(s\) i \(S\)?</p>
    <details>
      <summary>Pomoc</summary>
      <p>Prepoznajte da je ovo geometrijski red sa kolicnikom \(r = q^2 Q\). Izrazite \(q^2 = \left(\frac{s-1}{s}\right)^2\) i \(Q = \frac{S-1}{S}\), pa primenite formulu \(\frac{1}{1-q^2 Q}\). Imenilac se nece tako lepo pojednostaviti kao u nasem zadatku, ali princip je isti!</p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('graph-canvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  const sliderQ = document.getElementById('slider-q');
  const sliderQQ = document.getElementById('slider-Q');
  const valQ = document.getElementById('val-q');
  const valQQ = document.getElementById('val-Q');

  function formatNum(x) {
    return x.toFixed(2).replace('.', ',');
  }

  function draw() {
    const q = parseInt(sliderQ.value, 10) / 100;
    const Q = parseInt(sliderQQ.value, 10) / 100;
    valQ.textContent = formatNum(q);
    valQQ.textContent = formatNum(Q);

    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Compute partial sums up to N terms
    const N = 20;
    const partialsS = [];
    const partialsSS = [];
    const partialsP = [];
    let sumS = 0, sumSS = 0, sumP = 0;
    for (let n = 0; n <= N; n++) {
      sumS += Math.pow(q, n);
      sumSS += Math.pow(Q, n);
      sumP += Math.pow(q * Q, n);
      partialsS.push(sumS);
      partialsSS.push(sumSS);
      partialsP.push(sumP);
    }

    // Exact sums (limit)
    const exactS = Math.abs(q) < 1 ? 1 / (1 - q) : null;
    const exactSS = Math.abs(Q) < 1 ? 1 / (1 - Q) : null;
    const exactP = Math.abs(q * Q) < 1 ? 1 / (1 - q * Q) : null;
    const formulaVal = (exactS !== null && exactSS !== null && (exactS + exactSS - 1) !== 0)
      ? (exactS * exactSS) / (exactS + exactSS - 1)
      : null;

    // Find y range
    const allVals = [...partialsS, ...partialsSS, ...partialsP];
    if (exactS !== null) allVals.push(exactS);
    if (exactSS !== null) allVals.push(exactSS);
    if (exactP !== null) allVals.push(exactP);
    let yMin = Math.min(0, ...allVals) - 0.5;
    let yMax = Math.max(2, ...allVals) + 0.5;
    if (yMax - yMin < 2) { yMax = yMin + 2; }

    const xMin = -0.5;
    const xMax = N + 1;

    const padL = 60, padR = 20, padT = 30, padB = 50;
    const plotW = W - padL - padR;
    const plotH = H - padT - padB;

    function toX(n) { return padL + ((n - xMin) / (xMax - xMin)) * plotW; }
    function toY(y) { return padT + plotH - ((y - yMin) / (yMax - yMin)) * plotH; }

    // Grid lines
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    const yStep = Math.pow(10, Math.floor(Math.log10(Math.max(1, yMax - yMin))));
    const yGridStep = (yMax - yMin) / yStep > 10 ? yStep * 2 : yStep;
    const yGridStepFinal = yGridStep > 0.5 ? yGridStep : 0.5;
    for (let y = Math.ceil(yMin / yGridStepFinal) * yGridStepFinal; y <= yMax; y += yGridStepFinal) {
      ctx.beginPath();
      ctx.moveTo(padL, toY(y));
      ctx.lineTo(W - padR, toY(y));
      ctx.stroke();
    }
    for (let n = 0; n <= N; n += 2) {
      ctx.beginPath();
      ctx.moveTo(toX(n), padT);
      ctx.lineTo(toX(n), H - padB);
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(padL, toY(0));
    ctx.lineTo(W - padR, toY(0));
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(padL, padT);
    ctx.lineTo(padL, H - padB);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#64748b';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    for (let n = 0; n <= N; n += 2) {
      ctx.fillText(String(n), toX(n), H - padB + 18);
    }
    ctx.fillText('n (broj clanova)', padL + plotW / 2, H - 8);
    ctx.textAlign = 'right';
    for (let y = Math.ceil(yMin / yGridStepFinal) * yGridStepFinal; y <= yMax; y += yGridStepFinal) {
      ctx.fillText(y.toFixed(1).replace('.', ','), padL - 8, toY(y) + 4);
    }

    // Draw partial sums as connected dots
    function drawPartials(data, color, dashPattern) {
      ctx.strokeStyle = color;
      ctx.fillStyle = color;
      ctx.lineWidth = 2;
      ctx.setLineDash(dashPattern || []);
      ctx.beginPath();
      for (let n = 0; n <= N; n++) {
        const px = toX(n);
        const py = toY(data[n]);
        if (py < padT - 20 || py > H - padB + 20) continue;
        if (n === 0) ctx.moveTo(px, py);
        else ctx.lineTo(px, py);
      }
      ctx.stroke();
      ctx.setLineDash([]);

      for (let n = 0; n <= N; n++) {
        const px = toX(n);
        const py = toY(data[n]);
        if (py < padT - 20 || py > H - padB + 20) continue;
        ctx.beginPath();
        ctx.arc(px, py, 3, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    drawPartials(partialsS, '#60a5fa');
    drawPartials(partialsSS, '#f472b6');
    drawPartials(partialsP, '#4ade80');

    // Draw limit lines (dashed)
    function drawLimit(val, color, label) {
      if (val === null || !isFinite(val)) return;
      const py = toY(val);
      if (py < padT - 10 || py > H - padB + 10) return;
      ctx.strokeStyle = color;
      ctx.lineWidth = 1.5;
      ctx.setLineDash([6, 4]);
      ctx.beginPath();
      ctx.moveTo(padL, py);
      ctx.lineTo(W - padR, py);
      ctx.stroke();
      ctx.setLineDash([]);

      ctx.fillStyle = color;
      ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText(label + ' = ' + val.toFixed(3).replace('.', ','), W - padR - 150, py - 6);
    }

    drawLimit(exactS, '#60a5fa', 's');
    drawLimit(exactSS, '#f472b6', 'S');
    drawLimit(exactP, '#4ade80', 'sS/(s+S\u22121)');

    // Show formula verification
    if (formulaVal !== null && exactP !== null && isFinite(formulaVal) && isFinite(exactP)) {
      ctx.fillStyle = '#94a3b8';
      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';
      const match = Math.abs(formulaVal - exactP) < 1e-9;
      ctx.fillStyle = match ? '#4ade80' : '#ef4444';
      ctx.fillText(
        'sS/(s+S\u22121) = ' + formulaVal.toFixed(4).replace('.', ',') +
        (match ? '  \u2713' : '  \u2717'),
        padL + 10, padT + 18
      );
    }
  }

  draw();
  sliderQ.addEventListener('input', draw);
  sliderQQ.addEventListener('input', draw);

  // Step click interactivity
  const steps = document.querySelectorAll('.step');
  steps.forEach(function(step) {
    step.addEventListener('click', function() {
      steps.forEach(function(s) { s.classList.remove('active'); });
      step.classList.add('active');
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Zbir beskonacnog reda sa proizvodom kolicnika geometrijskih redova",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["geometrijski red", "beskonacni red", "zbir reda", "kolicnik", "konvergencija"]
}
BRAINSPARK_META-->