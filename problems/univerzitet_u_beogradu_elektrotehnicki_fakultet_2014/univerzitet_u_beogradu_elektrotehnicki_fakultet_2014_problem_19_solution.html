<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Konusni levak najvece zapremine</title>
<script type="text/info" id="logic-scratchpad">
Problem: Od lista hartije kruznog oblika izrezan je kruzni isecak od koga je napravljen
konusni levak najvece zapremine. Naci centralni ugao tog isecka.

Neka je R poluprecnik kruznog lista hartije.
Kruzni isecak sa centralnim uglom theta ima:
- Duzina luka = R * theta
- Kad se savije u konus, ovaj luk postaje obim osnove konusa: 2*pi*r = R*theta
  => r = R*theta / (2*pi)
- Izvodnica konusa = R (poluprecnik originalnog kruga)
- Visina konusa: h = sqrt(R^2 - r^2) = R * sqrt(1 - theta^2/(4*pi^2))

Zapremina konusa:
V = (1/3) * pi * r^2 * h
V = (1/3) * pi * R^2*theta^2/(4*pi^2) * R*sqrt(1 - theta^2/(4*pi^2))
V = (R^3 * theta^2) / (12*pi) * sqrt(1 - theta^2/(4*pi^2))

Smena: u = theta^2 / (4*pi^2), tj. theta = 2*pi*sqrt(u), 0 < u < 1

V = (R^3 * 4*pi^2*u) / (12*pi) * sqrt(1-u)
V = (R^3*pi/3) * u * sqrt(1-u)

Maksimizujemo f(u) = u * sqrt(1-u), sto je ekvivalentno maksimizovanju
f^2(u) = u^2 * (1-u)

g(u) = u^2 * (1 - u) = u^2 - u^3
g'(u) = 2u - 3u^2 = u(2 - 3u) = 0
=> u = 0 (min) ili u = 2/3 (max)

Dakle u = 2/3:
theta^2 / (4*pi^2) = 2/3
theta^2 = 8*pi^2 / 3
theta = 2*pi * sqrt(2/3) = 2*pi * sqrt(6)/3 = (2*pi/3) * sqrt(6)

Provera ponudjenih odgovora:
(A) pi/3 ≈ 1,047
(B) (2*pi/3)*sqrt(6) ≈ (2,094)*2,449 ≈ 5,130
(C) 2*pi/3 ≈ 2,094
(D) 2*pi/sqrt(3) ≈ 3,628
(E) pi*sqrt(6)/2 ≈ 3,848

Nas odgovor: theta = (2*pi/3)*sqrt(6) ≈ 5,130 rad ≈ 293,9 stepeni

To je manje od 2*pi ≈ 6,283 - sto je logicno (isecak je veliki deo kruga).

Odgovor: (B) (2*pi/3)*sqrt(6)

Verifikacija:
- r = R*theta/(2*pi) = R * (2*pi*sqrt(6)/3)/(2*pi) = R*sqrt(6)/3
- r^2 = 6*R^2/9 = 2*R^2/3
- h^2 = R^2 - r^2 = R^2 - 2*R^2/3 = R^2/3
- h = R/sqrt(3)
- V = (1/3)*pi*(2*R^2/3)*(R/sqrt(3)) = (2*pi*R^3)/(9*sqrt(3))

Proverimo da je to zaista maksimum: d^2g/du^2 = 2 - 6u, za u=2/3: 2 - 4 = -2 < 0 => maksimum. OK.
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  font-size: 1.05rem;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
  transition: transform 0.2s, border-color 0.2s;
}

.given-item:hover {
  transform: translateY(-2px);
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
}

/* Plan card */
.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card h2 {
  color: #a78bfa;
}

/* Details/collapsible */
details {
  margin: 15px 0;
  background: rgba(167,139,250,0.06);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 1.05rem;
  user-select: none;
}

details summary:hover {
  color: #c4b5fd;
}

details[open] summary {
  margin-bottom: 12px;
}

details ul {
  list-style: none;
  padding-left: 0;
}

details li {
  padding: 6px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #e2e8f0;
}

details li:last-child {
  border-bottom: none;
}

/* Canvas card */
.canvas-card {
  text-align: center;
}

.canvas-card canvas {
  width: 100%;
  max-width: 700px;
  border-radius: 10px;
  border: 1px solid #334155;
  touch-action: none;
}

.canvas-hint {
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

/* Steps */
.step {
  display: flex;
  gap: 16px;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 14px;
  border-left: 3px solid transparent;
  transition: border-color 0.2s, background 0.2s;
  cursor: pointer;
}

.step:hover, .step.active {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}

.step-badge {
  flex-shrink: 0;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.95rem;
}

.step-content {
  flex: 1;
}

.step-content p {
  color: #94a3b8;
  margin-top: 6px;
}

/* Checkpoint */
.checkpoint {
  background: rgba(52,211,153,0.06);
  border: 1px solid rgba(52,211,153,0.18);
}

.checkpoint summary {
  color: #34d399;
}

/* Key insight */
.insight-card {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid rgba(167,139,250,0.25);
}

.insight-card h2 {
  color: #a78bfa;
}

/* Final answer */
.final-answer {
  border: 2px solid rgba(74,222,128,0.3);
  background: linear-gradient(135deg, rgba(74,222,128,0.06), rgba(52,211,153,0.04));
}

.final-answer h2 {
  color: #4ade80;
}

.answer-big {
  font-size: 1.6rem;
  font-weight: 700;
  color: #4ade80;
  text-align: center;
  margin: 20px 0;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 16px 0;
}

.option-box {
  padding: 10px 20px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: #1e293b;
  text-align: center;
  min-width: 90px;
  transition: transform 0.2s;
}

.option-box.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.1);
  transform: scale(1.05);
}

.option-box .opt-label {
  color: #94a3b8;
  font-size: 0.85rem;
}

.option-box .opt-value {
  font-size: 1.15rem;
  font-weight: 600;
  color: #e2e8f0;
}

.option-box.correct .opt-value {
  color: #4ade80;
}

.verification {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 14px;
  padding-top: 14px;
  border-top: 1px solid #334155;
}

/* Pitfalls */
.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 14px;
  margin-bottom: 8px;
  background: rgba(224,148,104,0.06);
  border-left: 3px solid #e09468;
  border-radius: 0 8px 8px 0;
  color: #e2e8f0;
}

.pitfall-list li strong {
  color: #e09468;
}

/* Challenge */
.challenge-card {
  border: 1px solid rgba(244,114,182,0.2);
  background: rgba(244,114,182,0.04);
}

.challenge-card h2 {
  color: #f472b6;
}

/* Diagram layout */
.diagram-row {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  justify-content: center;
  margin-top: 12px;
}

.diagram-row .diagram-col {
  flex: 1 1 320px;
  max-width: 500px;
  text-align: center;
}

.diagram-row .diagram-col p {
  color: #94a3b8;
  margin-bottom: 8px;
  font-size: 0.95rem;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step { flex-direction: column; gap: 10px; }
  .given-grid { flex-direction: column; }
  .options-row { flex-direction: column; align-items: center; }
  .diagram-row { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Konusni levak najvece zapremine</h1>
  <p class="subtitle">Optimizacija zapremine konusa dobijenog od kruznog isecka -- primena izvoda</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Od lista hartije kruznog oblika izrezan je kruzni isecak od koga je napravljen konusni levak <span class="highlight">najvece zapremine</span>. Centralni ugao tog kruznog isecka u radijanima je:</p>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(\dfrac{\pi}{3}\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(\dfrac{2\pi}{3}\sqrt{6}\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(\dfrac{2\pi}{3}\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(\dfrac{2\pi}{\sqrt{3}}\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(\dfrac{\pi\sqrt{6}}{2}\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>Oznacimo poluprecnik kruznog lista sa \(R\). Izrazicemo zapreminu konusa kao funkciju centralnog ugla \(\theta\) isecka, a zatim cemo odrediti za koje \(\theta\) je zapremina maksimalna koriscenjem prvog izvoda.</p>
  </div>

  <!-- Theory Refresher -->
  <details>
    <summary>Kljucne formule i teoreme</summary>
    <ul>
      <li><strong>Zapremina konusa:</strong> \( V = \dfrac{1}{3}\pi r^2 h \), gde je \(r\) poluprecnik osnove, a \(h\) visina.</li>
      <li><strong>Duzina luka kruznog isecka:</strong> \( L = R \cdot \theta \), gde je \(R\) poluprecnik kruga, a \(\theta\) centralni ugao u radijanima.</li>
      <li><strong>Pitagorina teorema:</strong> Za prav konus vazi \( R^2 = r^2 + h^2 \), gde je \(R\) izvodnica (kosina strana), \(r\) poluprecnik osnove, a \(h\) visina.</li>
      <li><strong>Maksimum funkcije:</strong> Ako je \(f'(x_0) = 0\) i \(f''(x_0) < 0\), onda \(f\) ima lokalni maksimum u tacki \(x_0\).</li>
    </ul>
  </details>

  <!-- Diagram: Sector and Cone -->
  <div class="card canvas-card">
    <h2>Dijagram: isecak i konus</h2>
    <div class="diagram-row">
      <div class="diagram-col">
        <p>Kruzni isecak (razvijeni oblik)</p>
        <canvas id="sector-canvas" width="500" height="500"></canvas>
      </div>
      <div class="diagram-col">
        <p>Konusni levak</p>
        <canvas id="cone-canvas" width="500" height="500"></canvas>
      </div>
    </div>
    <p class="canvas-hint">Pomerajte klizac ispod da biste videli kako ugao isecka utice na oblik konusa i zapreminu</p>
  </div>

  <!-- Interactive slider -->
  <div class="card canvas-card">
    <h2>Interaktivna optimizacija</h2>
    <p style="color:#94a3b8; margin-bottom: 14px;">Zapremina konusa u funkciji centralnog ugla \(\theta\)</p>
    <canvas id="optim-canvas" width="700" height="420"></canvas>
    <div style="margin-top: 16px;">
      <label for="theta-slider" style="color: #94a3b8;">Centralni ugao \(\theta\): </label>
      <input type="range" id="theta-slider" min="0.1" max="6.2" step="0.01" value="5.13" style="width: 60%; max-width: 400px; vertical-align: middle;">
      <span id="theta-display" style="color: #60a5fa; font-weight: 600; margin-left: 8px;">5,13 rad</span>
    </div>
    <p class="canvas-hint">Pomerajte klizac da vidite kako se menja zapremina. Optimalni ugao je obeelzen zeleno.</p>
  </div>

  <!-- Step-by-step solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <div class="step" id="step-1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Postavimo model</h3>
        <p>Neka je \(R\) poluprecnik kruznog lista hartije, a \(\theta\) centralni ugao isecka (u radijanima). Kada se isecak savije u konus:</p>
        <div class="math-box">
          \[\text{Izvodnica konusa} = R\]
          \[\text{Obim osnove konusa} = \text{duzina luka isecka} = R\theta\]
        </div>
      </div>
    </div>

    <div class="step" id="step-2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Izrazimo poluprecnik osnove konusa</h3>
        <p>Obim kruga osnove konusa je \(2\pi r\), a to je jednako duzini luka isecka \(R\theta\):</p>
        <div class="math-box">
          \[ 2\pi r = R\theta \]
          \[ r = \frac{R\theta}{2\pi} \]
        </div>
      </div>
    </div>

    <div class="step" id="step-3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Izrazimo visinu konusa</h3>
        <p>Iz Pitagorine teoreme, gde je izvodnica \(R\), poluprecnik osnove \(r\), a visina \(h\):</p>
        <div class="math-box">
          \[ h = \sqrt{R^2 - r^2} = \sqrt{R^2 - \frac{R^2\theta^2}{4\pi^2}} = R\sqrt{1 - \frac{\theta^2}{4\pi^2}} \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Ako je \(\theta = 2\pi\) (ceo krug), koliki je \(h\)?</summary>
      <p>\(h = R\sqrt{1 - 1} = 0\). To je logicno -- savijanjem celog kruga dobijamo "ravan" konus bez visine.</p>
    </details>

    <div class="step" id="step-4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Zapisimo zapreminu konusa</h3>
        <p>Zamenimo \(r\) i \(h\) u formulu za zapreminu:</p>
        <div class="math-box">
          \[ V = \frac{1}{3}\pi r^2 h = \frac{1}{3}\pi \cdot \frac{R^2\theta^2}{4\pi^2} \cdot R\sqrt{1 - \frac{\theta^2}{4\pi^2}} \]
          \[ V = \frac{R^3\theta^2}{12\pi}\sqrt{1 - \frac{\theta^2}{4\pi^2}} \]
        </div>
      </div>
    </div>

    <div class="step" id="step-5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Uvedemo smenu za lakse diferenciranje</h3>
        <p>Stavimo \(u = \dfrac{\theta^2}{4\pi^2}\), gde je \(0 < u < 1\). Tada je \(\theta = 2\pi\sqrt{u}\) i zapremina postaje:</p>
        <div class="math-box">
          \[ V = \frac{R^3 \cdot 4\pi^2 u}{12\pi}\sqrt{1 - u} = \frac{R^3\pi}{3}\, u\sqrt{1 - u} \]
        </div>
        <p>Posto je \(\dfrac{R^3\pi}{3}\) konstanta, dovoljno je maksimizovati funkciju \(f(u) = u\sqrt{1 - u}\).</p>
      </div>
    </div>

    <div class="step" id="step-6">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Maksimizujemo \(f(u) = u\sqrt{1-u}\)</h3>
        <p>Lakse je maksimizovati \(g(u) = f(u)^2 = u^2(1-u)\), jer \(f\) i \(f^2\) dostizu maksimum u istoj tacki (obe su nenegativne):</p>
        <div class="math-box">
          \[ g(u) = u^2 - u^3 \]
          \[ g'(u) = 2u - 3u^2 = u(2 - 3u) \]
        </div>
      </div>
    </div>

    <div class="step" id="step-7">
      <div class="step-badge">7</div>
      <div class="step-content">
        <h3>Nademo stacionarnu tacku</h3>
        <p>Izjednacimo prvi izvod sa nulom:</p>
        <div class="math-box">
          \[ g'(u) = u(2 - 3u) = 0 \]
          \[ u = 0 \quad \text{ili} \quad u = \frac{2}{3} \]
        </div>
        <p>\(u = 0\) daje zapreminu nula (degenerisan slucaj), pa je kandidat za maksimum \(u = \dfrac{2}{3}\).</p>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Da li je \(u = \frac{2}{3}\) zaista maksimum?</summary>
      <p>Izracunamo drugi izvod: \(g''(u) = 2 - 6u\). Za \(u = \frac{2}{3}\): \(g''\!\left(\frac{2}{3}\right) = 2 - 4 = -2 < 0\). Posto je drugi izvod negativan, u pitanju je zaista <strong>maksimum</strong>.</p>
    </details>

    <div class="step" id="step-8">
      <div class="step-badge">8</div>
      <div class="step-content">
        <h3>Vratimo se na ugao \(\theta\)</h3>
        <p>Iz smene \(u = \dfrac{\theta^2}{4\pi^2} = \dfrac{2}{3}\):</p>
        <div class="math-box">
          \[ \theta^2 = \frac{2}{3} \cdot 4\pi^2 = \frac{8\pi^2}{3} \]
          \[ \theta = 2\pi\sqrt{\frac{2}{3}} = 2\pi \cdot \frac{\sqrt{2}}{\sqrt{3}} = 2\pi \cdot \frac{\sqrt{6}}{3} = \frac{2\pi\sqrt{6}}{3} = \frac{2\pi}{3}\sqrt{6} \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Da li je rezultat u opsegu \((0, 2\pi)\)?</summary>
      <p>\(\dfrac{2\pi}{3}\sqrt{6} \approx \dfrac{6{,}283}{3} \cdot 2{,}449 \approx 2{,}094 \cdot 2{,}449 \approx 5{,}13\) rad. Posto je \(5{,}13 < 2\pi \approx 6{,}28\), ugao je korektan -- isecak je veci deo kruga (oko 294 stepena).</p>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="card insight-card">
    <h2>Kljucni uvid</h2>
    <p>Optimalni isecak zauzima veoma veliki deo kruga -- oko \(294°\) od \(360°\). To znaci da se "odseca" samo mali komad (oko \(66°\)), sto intuitivno ima smisla: previse mali isecak daje uzak i dugacak konus (mali \(r\), veliko \(h\), mala zapremina), dok previse veliki ugao daje sirok ali plitak konus (veliko \(r\), malo \(h\), takodje mala zapremina). Optimum je blize "sirokom" konusu, sa odnosom:</p>
    <div class="math-box" style="text-align: center; font-size: 1.2rem;">
      \[ r = R\sqrt{\frac{2}{3}}, \quad h = \frac{R}{\sqrt{3}} \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer">
    <h2>Konacan odgovor</h2>
    <div class="answer-big">\(\theta = \dfrac{2\pi}{3}\sqrt{6}\)</div>

    <div class="options-row">
      <div class="option-box">
        <div class="opt-label">(A)</div>
        <div class="opt-value">\(\dfrac{\pi}{3}\)</div>
      </div>
      <div class="option-box correct">
        <div class="opt-label">(B)</div>
        <div class="opt-value">\(\dfrac{2\pi}{3}\sqrt{6}\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(C)</div>
        <div class="opt-value">\(\dfrac{2\pi}{3}\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(D)</div>
        <div class="opt-value">\(\dfrac{2\pi}{\sqrt{3}}\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(E)</div>
        <div class="opt-value">\(\dfrac{\pi\sqrt{6}}{2}\)</div>
      </div>
    </div>

    <p class="verification"><strong>Provera:</strong> Za \(\theta = \frac{2\pi}{3}\sqrt{6}\): \(r = \frac{R\sqrt{6}}{3}\), \(h = \frac{R}{\sqrt{3}}\), \(V = \frac{1}{3}\pi \cdot \frac{2R^2}{3} \cdot \frac{R}{\sqrt{3}} = \frac{2\pi R^3}{9\sqrt{3}}\). Proverom drugog izvoda potvrdjujemo da je ovo zaista maksimum. &check;</p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Ceste greske</h2>
    <ul class="pitfall-list">
      <li><strong>Mesanje izvodnice i visine:</strong> Poluprecnik originalnog kruga \(R\) postaje <em>izvodnica</em> (kosina strana) konusa, a NE visina. Visina se racuna iz Pitagorine teoreme: \(h = \sqrt{R^2 - r^2}\).</li>
      <li><strong>Diferenciranje pod korenom:</strong> Direktno diferenciranje \(V(\theta)\) je nezgodno zbog proizvoda sa korenom. Trik je maksimizovati \(V^2\) (ili \(f^2\) posle smene), cime se eliminise koren i znatno pojednostavljuje racun.</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Koliki je odnos zapremine optimalnog konusa i zapremine sfere poluprecnika \(R\)? Izrazite rezultat u najjednostavnijem obliku.</p>
    <details>
      <summary>Pomoc</summary>
      <p>Zapremina sfere je \(V_s = \frac{4}{3}\pi R^3\). Zapremina optimalnog konusa je \(V_k = \frac{2\pi R^3}{9\sqrt{3}}\). Izracunajte odnos \(\frac{V_k}{V_s}\) i pojednostavite.</p>
    </details>
  </div>

</div>

<script>
(() => {
  // ====== SECTOR CANVAS ======
  const sectorCanvas = document.getElementById('sector-canvas');
  if (!sectorCanvas) return;
  const sCtx = sectorCanvas.getContext('2d');
  const sW = sectorCanvas.width;
  const sH = sectorCanvas.height;

  const optTheta = 2 * Math.PI * Math.sqrt(6) / 3; // optimal angle

  function drawSector(theta) {
    const cx = sW / 2;
    const cy = sH / 2;
    const R = Math.min(sW, sH) * 0.38;

    sCtx.fillStyle = '#0c1222';
    sCtx.fillRect(0, 0, sW, sH);

    // Draw the sector
    const startAngle = -Math.PI / 2 - theta / 2;
    const endAngle = -Math.PI / 2 + theta / 2;

    // Filled sector
    sCtx.beginPath();
    sCtx.moveTo(cx, cy);
    sCtx.arc(cx, cy, R, startAngle, endAngle);
    sCtx.closePath();
    sCtx.fillStyle = 'rgba(96, 165, 250, 0.15)';
    sCtx.fill();
    sCtx.strokeStyle = '#60a5fa';
    sCtx.lineWidth = 2.5;
    sCtx.stroke();

    // Draw the removed part (lighter)
    sCtx.beginPath();
    sCtx.moveTo(cx, cy);
    sCtx.arc(cx, cy, R, endAngle, startAngle + 2 * Math.PI);
    sCtx.closePath();
    sCtx.fillStyle = 'rgba(244, 114, 182, 0.06)';
    sCtx.fill();
    sCtx.strokeStyle = '#475569';
    sCtx.lineWidth = 1;
    sCtx.setLineDash([6, 4]);
    sCtx.stroke();
    sCtx.setLineDash([]);

    // Radius lines
    sCtx.strokeStyle = '#60a5fa';
    sCtx.lineWidth = 2;
    const x1 = cx + R * Math.cos(startAngle);
    const y1 = cy + R * Math.sin(startAngle);
    const x2 = cx + R * Math.cos(endAngle);
    const y2 = cy + R * Math.sin(endAngle);
    sCtx.beginPath();
    sCtx.moveTo(cx, cy);
    sCtx.lineTo(x1, y1);
    sCtx.stroke();
    sCtx.beginPath();
    sCtx.moveTo(cx, cy);
    sCtx.lineTo(x2, y2);
    sCtx.stroke();

    // Angle arc
    const arcR = R * 0.2;
    sCtx.beginPath();
    sCtx.arc(cx, cy, arcR, startAngle, endAngle);
    sCtx.strokeStyle = '#4ade80';
    sCtx.lineWidth = 2.5;
    sCtx.stroke();

    // Theta label
    const labelAngle = (startAngle + endAngle) / 2;
    const lx = cx + (arcR + 18) * Math.cos(labelAngle);
    const ly = cy + (arcR + 18) * Math.sin(labelAngle);
    sCtx.fillStyle = '#4ade80';
    sCtx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
    sCtx.textAlign = 'center';
    sCtx.textBaseline = 'middle';
    sCtx.fillText('\u03B8', lx, ly);

    // R label (along one radius)
    const midAngle = startAngle;
    const rx = cx + R * 0.55 * Math.cos(midAngle) - 14 * Math.sin(midAngle);
    const ry = cy + R * 0.55 * Math.sin(midAngle) + 14 * Math.cos(midAngle);
    sCtx.fillStyle = '#60a5fa';
    sCtx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    sCtx.textAlign = 'center';
    sCtx.fillText('R', rx, ry);

    // Arc length label
    const arcLabelAngle = (startAngle + endAngle) / 2;
    const alx = cx + (R + 22) * Math.cos(arcLabelAngle);
    const aly = cy + (R + 22) * Math.sin(arcLabelAngle);
    sCtx.fillStyle = '#f472b6';
    sCtx.font = '13px Segoe UI, system-ui, sans-serif';
    sCtx.fillText('L = R\u03B8', alx, aly);

    // Center dot
    sCtx.beginPath();
    sCtx.arc(cx, cy, 4, 0, 2 * Math.PI);
    sCtx.fillStyle = '#e2e8f0';
    sCtx.fill();

    // Title
    sCtx.fillStyle = '#94a3b8';
    sCtx.font = '13px Segoe UI, system-ui, sans-serif';
    sCtx.textAlign = 'center';
    sCtx.fillText('\u03B8 \u2248 ' + theta.toFixed(2).replace('.', ',') + ' rad (' + (theta * 180 / Math.PI).toFixed(0) + '\u00B0)', cx, sH - 16);
  }

  // ====== CONE CANVAS ======
  const coneCanvas = document.getElementById('cone-canvas');
  const cCtx = coneCanvas.getContext('2d');
  const cW = coneCanvas.width;
  const cH = coneCanvas.height;

  function drawCone(theta) {
    cCtx.fillStyle = '#0c1222';
    cCtx.fillRect(0, 0, cW, cH);

    const Runit = 1;
    const r = Runit * theta / (2 * Math.PI);
    const hVal = Math.sqrt(Math.max(0, Runit * Runit - r * r));

    // Scale for drawing
    const maxDim = Math.min(cW, cH) * 0.38;
    const scale = maxDim / Runit;

    const cx = cW / 2;
    const apexY = 60;
    const baseY = apexY + hVal * scale;

    const rPx = r * scale;

    // Don't draw if degenerate
    if (hVal < 0.001 || r < 0.001) {
      cCtx.fillStyle = '#64748b';
      cCtx.font = '14px Segoe UI, system-ui, sans-serif';
      cCtx.textAlign = 'center';
      cCtx.fillText('Degenerisan slucaj', cx, cH / 2);
      return;
    }

    // Slant edges
    cCtx.strokeStyle = '#60a5fa';
    cCtx.lineWidth = 2;
    cCtx.beginPath();
    cCtx.moveTo(cx, apexY);
    cCtx.lineTo(cx - rPx, baseY);
    cCtx.stroke();
    cCtx.beginPath();
    cCtx.moveTo(cx, apexY);
    cCtx.lineTo(cx + rPx, baseY);
    cCtx.stroke();

    // Base ellipse
    const ellipseH = rPx * 0.3;
    cCtx.beginPath();
    cCtx.ellipse(cx, baseY, rPx, ellipseH, 0, 0, 2 * Math.PI);
    cCtx.strokeStyle = '#60a5fa';
    cCtx.lineWidth = 2;
    cCtx.stroke();
    cCtx.fillStyle = 'rgba(96, 165, 250, 0.08)';
    cCtx.fill();

    // Back half of ellipse (dashed)
    cCtx.beginPath();
    cCtx.ellipse(cx, baseY, rPx, ellipseH, 0, 0, Math.PI);
    cCtx.setLineDash([5, 4]);
    cCtx.strokeStyle = '#475569';
    cCtx.lineWidth = 1.5;
    cCtx.stroke();
    cCtx.setLineDash([]);

    // Height line (dashed)
    cCtx.beginPath();
    cCtx.setLineDash([6, 4]);
    cCtx.strokeStyle = '#a78bfa';
    cCtx.lineWidth = 1.5;
    cCtx.moveTo(cx, apexY);
    cCtx.lineTo(cx, baseY);
    cCtx.stroke();
    cCtx.setLineDash([]);

    // Radius line
    cCtx.beginPath();
    cCtx.setLineDash([6, 4]);
    cCtx.strokeStyle = '#f472b6';
    cCtx.lineWidth = 1.5;
    cCtx.moveTo(cx, baseY);
    cCtx.lineTo(cx + rPx, baseY);
    cCtx.stroke();
    cCtx.setLineDash([]);

    // Slant label "R"
    const slantMidX = (cx + cx + rPx) / 2 + 12;
    const slantMidY = (apexY + baseY) / 2 - 6;
    cCtx.fillStyle = '#60a5fa';
    cCtx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    cCtx.textAlign = 'center';
    cCtx.fillText('R', slantMidX, slantMidY);

    // Height label "h"
    cCtx.fillStyle = '#a78bfa';
    cCtx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    cCtx.textAlign = 'right';
    cCtx.fillText('h', cx - 10, (apexY + baseY) / 2);

    // Radius label "r"
    cCtx.fillStyle = '#f472b6';
    cCtx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    cCtx.textAlign = 'center';
    cCtx.fillText('r', cx + rPx / 2, baseY + ellipseH + 20);

    // Right angle marker at base center
    const sqSize = 8;
    cCtx.strokeStyle = '#4ade80';
    cCtx.lineWidth = 1.5;
    cCtx.beginPath();
    cCtx.moveTo(cx + sqSize, baseY);
    cCtx.lineTo(cx + sqSize, baseY - sqSize);
    cCtx.lineTo(cx, baseY - sqSize);
    cCtx.stroke();

    // Apex dot
    cCtx.beginPath();
    cCtx.arc(cx, apexY, 4, 0, 2 * Math.PI);
    cCtx.fillStyle = '#e2e8f0';
    cCtx.fill();

    // Volume display
    const vol = (1 / 3) * Math.PI * r * r * hVal;
    cCtx.fillStyle = '#94a3b8';
    cCtx.font = '13px Segoe UI, system-ui, sans-serif';
    cCtx.textAlign = 'center';
    cCtx.fillText('V \u2248 ' + vol.toFixed(4).replace('.', ',') + ' R\u00B3', cx, cH - 16);
  }

  // ====== OPTIMIZATION CANVAS ======
  const optimCanvas = document.getElementById('optim-canvas');
  const oCtx = optimCanvas.getContext('2d');
  const oW = optimCanvas.width;
  const oH = optimCanvas.height;

  function volumeFunc(theta) {
    const r = theta / (2 * Math.PI);
    const h2 = 1 - r * r;
    if (h2 <= 0) return 0;
    return (1 / 3) * Math.PI * r * r * Math.sqrt(h2);
  }

  function drawOptimization(currentTheta) {
    oCtx.fillStyle = '#0c1222';
    oCtx.fillRect(0, 0, oW, oH);

    const padL = 70;
    const padR = 30;
    const padT = 30;
    const padB = 50;
    const plotW = oW - padL - padR;
    const plotH = oH - padT - padB;

    const thetaMin = 0;
    const thetaMax = 2 * Math.PI;

    // Find max volume for scaling
    let vMax = 0;
    for (let i = 0; i <= 200; i++) {
      const t = thetaMin + (thetaMax - thetaMin) * i / 200;
      const v = volumeFunc(t);
      if (v > vMax) vMax = v;
    }
    vMax *= 1.15;

    function toX(t) { return padL + (t - thetaMin) / (thetaMax - thetaMin) * plotW; }
    function toY(v) { return padT + plotH - (v / vMax) * plotH; }

    // Grid
    oCtx.strokeStyle = '#1e293b';
    oCtx.lineWidth = 1;
    for (let t = 0; t <= thetaMax; t += Math.PI / 3) {
      oCtx.beginPath();
      oCtx.moveTo(toX(t), padT);
      oCtx.lineTo(toX(t), padT + plotH);
      oCtx.stroke();
    }
    for (let v = 0; v <= vMax; v += 0.05) {
      oCtx.beginPath();
      oCtx.moveTo(padL, toY(v));
      oCtx.lineTo(padL + plotW, toY(v));
      oCtx.stroke();
    }

    // Axes
    oCtx.strokeStyle = '#475569';
    oCtx.lineWidth = 2;
    oCtx.beginPath();
    oCtx.moveTo(padL, padT + plotH);
    oCtx.lineTo(padL + plotW, padT + plotH);
    oCtx.stroke();
    oCtx.beginPath();
    oCtx.moveTo(padL, padT);
    oCtx.lineTo(padL, padT + plotH);
    oCtx.stroke();

    // Axis labels
    oCtx.fillStyle = '#64748b';
    oCtx.font = '12px Segoe UI, system-ui, sans-serif';
    oCtx.textAlign = 'center';
    var tickAngles = [
      { val: Math.PI / 3, label: '\u03C0/3' },
      { val: 2 * Math.PI / 3, label: '2\u03C0/3' },
      { val: Math.PI, label: '\u03C0' },
      { val: 4 * Math.PI / 3, label: '4\u03C0/3' },
      { val: 5 * Math.PI / 3, label: '5\u03C0/3' },
      { val: 2 * Math.PI, label: '2\u03C0' }
    ];
    tickAngles.forEach(function(ta) {
      oCtx.fillText(ta.label, toX(ta.val), padT + plotH + 18);
    });

    // Y axis label
    oCtx.fillStyle = '#64748b';
    oCtx.font = '13px Segoe UI, system-ui, sans-serif';
    oCtx.save();
    oCtx.translate(18, padT + plotH / 2);
    oCtx.rotate(-Math.PI / 2);
    oCtx.textAlign = 'center';
    oCtx.fillText('V / R\u00B3', 0, 0);
    oCtx.restore();

    // X axis label
    oCtx.fillStyle = '#64748b';
    oCtx.font = '13px Segoe UI, system-ui, sans-serif';
    oCtx.textAlign = 'center';
    oCtx.fillText('\u03B8 (rad)', padL + plotW / 2, oH - 6);

    // Draw curve
    oCtx.beginPath();
    oCtx.strokeStyle = '#60a5fa';
    oCtx.lineWidth = 3;
    for (let i = 0; i <= 300; i++) {
      const t = thetaMin + (thetaMax - thetaMin) * i / 300;
      const v = volumeFunc(t);
      const px = toX(t);
      const py = toY(v);
      if (i === 0) oCtx.moveTo(px, py);
      else oCtx.lineTo(px, py);
    }
    oCtx.stroke();

    // Optimal point
    var vOpt = volumeFunc(optTheta);
    oCtx.beginPath();
    oCtx.arc(toX(optTheta), toY(vOpt), 7, 0, 2 * Math.PI);
    oCtx.fillStyle = '#4ade80';
    oCtx.fill();
    oCtx.strokeStyle = '#0c1222';
    oCtx.lineWidth = 2;
    oCtx.stroke();

    // Optimal label
    oCtx.fillStyle = '#4ade80';
    oCtx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    oCtx.textAlign = 'left';
    oCtx.fillText('max: \u03B8 = (2\u03C0/3)\u221A6', toX(optTheta) - 70, toY(vOpt) - 16);

    // Dashed lines from optimal point to axes
    oCtx.setLineDash([5, 4]);
    oCtx.strokeStyle = '#4ade80';
    oCtx.lineWidth = 1;
    oCtx.beginPath();
    oCtx.moveTo(toX(optTheta), toY(vOpt));
    oCtx.lineTo(toX(optTheta), padT + plotH);
    oCtx.stroke();
    oCtx.beginPath();
    oCtx.moveTo(toX(optTheta), toY(vOpt));
    oCtx.lineTo(padL, toY(vOpt));
    oCtx.stroke();
    oCtx.setLineDash([]);

    // Current slider point
    if (Math.abs(currentTheta - optTheta) > 0.05) {
      var vCur = volumeFunc(currentTheta);
      oCtx.beginPath();
      oCtx.arc(toX(currentTheta), toY(vCur), 6, 0, 2 * Math.PI);
      oCtx.fillStyle = '#f472b6';
      oCtx.fill();
      oCtx.strokeStyle = '#0c1222';
      oCtx.lineWidth = 2;
      oCtx.stroke();

      // Dashed line from current point
      oCtx.setLineDash([4, 3]);
      oCtx.strokeStyle = '#f472b6';
      oCtx.lineWidth = 1;
      oCtx.beginPath();
      oCtx.moveTo(toX(currentTheta), toY(vCur));
      oCtx.lineTo(toX(currentTheta), padT + plotH);
      oCtx.stroke();
      oCtx.setLineDash([]);
    }
  }

  // Initial draw
  drawSector(optTheta);
  drawCone(optTheta);
  drawOptimization(optTheta);

  // Slider interaction
  var slider = document.getElementById('theta-slider');
  var display = document.getElementById('theta-display');

  slider.addEventListener('input', function() {
    var theta = parseFloat(slider.value);
    display.textContent = theta.toFixed(2).replace('.', ',') + ' rad';
    drawSector(theta);
    drawCone(theta);
    drawOptimization(theta);
  });

  // Step click interactivity
  var steps = document.querySelectorAll('.step');
  steps.forEach(function(step) {
    step.addEventListener('click', function() {
      steps.forEach(function(s) { s.classList.remove('active'); });
      step.classList.add('active');
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Konusni levak najvece zapremine od kruznog isecka",
  "subject": "math",
  "unit": "calculus",
  "topic_tags": ["optimizacija", "konus", "zapremina", "izvod", "kruzni isecak", "ekstremne vrednosti"]
}
BRAINSPARK_META-->