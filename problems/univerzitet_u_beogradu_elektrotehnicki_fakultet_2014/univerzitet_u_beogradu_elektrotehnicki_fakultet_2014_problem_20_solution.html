<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kombinatorika - formiranje komisije sa uslovom</title>
<script type="text/info" id="logic-scratchpad">
Problem: Iz skupa od 10 studenata, među kojima su samo jedan student
elektrotehnike (E) i samo jedan student matematike (M), biramo komisiju
od 6 članova, ali tako da ako je u komisiji student elektrotehnike,
mora u toj komisiji biti i student matematike.

Uslov: E u komisiji => M u komisiji
Kontrapozicija: M nije u komisiji => E nije u komisiji
Zabranjeno: E u komisiji, a M nije.

=== PRISTUP 1: Komplement (ukupno minus zabranjeno) ===

Ukupan broj komisija od 6 iz 10 studenata bez ikakvih ograničenja:
C(10,6) = 10! / (6! * 4!) = (10*9*8*7) / (4*3*2*1) = 5040 / 24 = 210

Zabranjene komisije: E jeste u komisiji, ali M nije.
- E je fiksiran u komisiji (1 način)
- M je isključen
- Preostaje izabrati 5 članova od preostalih 8 studenata (svi sem E i M)
- C(8,5) = 8! / (5! * 3!) = (8*7*6) / (3*2*1) = 336 / 6 = 56

Dozvoljene komisije = 210 - 56 = 154

=== PRISTUP 2: Analiza slučajeva ===

Slučaj 1: Ni E ni M nisu u komisiji
  - Biramo 6 od preostalih 8: C(8,6) = C(8,2) = 28

Slučaj 2: I E i M su u komisiji
  - Biramo preostala 4 od 8: C(8,4) = 70

Slučaj 3: M je u komisiji, E nije
  - Biramo preostalih 5 od 8: C(8,5) = 56

Ukupno: 28 + 70 + 56 = 154

Odgovor: (D) 154
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
}
h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
}
.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}
.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}
.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}
.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}
.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}
.given-item {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
}
.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}
.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}
.plan-card {
  border-left: 4px solid #a78bfa;
}
.theory-card details {
  margin: 15px 0;
}
.theory-card summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  font-size: 1.1rem;
  padding: 8px 0;
}
.theory-card ul {
  list-style: none;
  padding: 12px 0;
}
.theory-card li {
  padding: 8px 0;
  border-bottom: 1px solid #334155;
}
.theory-card li:last-child { border-bottom: none; }
.step-container {
  display: flex;
  gap: 16px;
  align-items: flex-start;
  padding: 16px 0;
  border-bottom: 1px solid #334155;
  cursor: pointer;
  transition: border-left 0.2s;
  padding-left: 8px;
  border-left: 3px solid transparent;
}
.step-container:hover, .step-container.active {
  border-left: 3px solid #4ade80;
}
.step-container:last-child { border-bottom: none; }
.step-badge {
  min-width: 28px;
  height: 28px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.85rem;
  color: #0f172a;
  flex-shrink: 0;
  margin-top: 2px;
}
.step-content { flex: 1; }
.step-content p { margin-bottom: 8px; }
.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 10px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}
.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 6px;
}
.checkpoint {
  margin: 15px 0;
}
.checkpoint details {
  margin: 15px 0;
  background: rgba(96,165,250,0.07);
  border: 1px solid rgba(96,165,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
}
.checkpoint summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
}
.checkpoint .answer {
  margin-top: 10px;
  color: #4ade80;
  font-weight: 600;
}
.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.15), rgba(167,139,250,0.15));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
  text-align: center;
}
.insight-box h2 {
  color: #a78bfa;
  margin-bottom: 12px;
}
.insight-formula {
  font-size: 1.3rem;
  color: #e2e8f0;
  margin: 12px 0;
}
.final-answer-box {
  background: rgba(52,211,153,0.08);
  border: 2px solid rgba(52,211,153,0.3);
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
  text-align: center;
}
.final-answer-box h2 {
  color: #34d399;
  margin-bottom: 16px;
}
.final-answer-value {
  font-size: 2rem;
  font-weight: 800;
  color: #4ade80;
  margin-bottom: 16px;
}
.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-top: 16px;
}
.option-card {
  background: #1e293b;
  border: 2px solid #334155;
  border-radius: 12px;
  padding: 12px 22px;
  text-align: center;
  min-width: 80px;
}
.option-card.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.1);
}
.option-card .opt-label {
  color: #94a3b8;
  font-size: 0.85rem;
}
.option-card .opt-value {
  font-size: 1.2rem;
  font-weight: 700;
  color: #e2e8f0;
}
.option-card.correct .opt-value {
  color: #4ade80;
}
.verification-note {
  margin-top: 16px;
  color: #94a3b8;
  font-size: 0.95rem;
}
.pitfall-card {
  border-left: 4px solid #e09468;
}
.pitfall-card h2 {
  color: #e09468;
}
.pitfall-card ul {
  list-style: disc;
  padding-left: 20px;
}
.pitfall-card li {
  padding: 6px 0;
}
.challenge-card details {
  margin: 15px 0;
}
.challenge-card summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
}
.canvas-card {
  text-align: center;
}
.canvas-card canvas {
  border-radius: 12px;
  max-width: 100%;
  touch-action: none;
}
.canvas-hint {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-top: 8px;
}
@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .given-grid { gap: 8px; }
  .given-item { padding: 8px 12px; min-width: 60px; }
  .step-container { flex-direction: column; gap: 8px; }
}
</style>
</head>
<body>
<div class="container">

  <!-- a. Title & Subtitle -->
  <h1>Kombinatorika - formiranje komisije sa uslovom</h1>
  <p class="subtitle">Prebrojavanje kombinacija uz logičko ograničenje (uslovni izbor članova)</p>

  <!-- b. Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Iz skupa od <span style="color:#60a5fa;font-weight:600;">10 studenata</span>, među kojima su samo jedan student elektrotehnike i samo jedan student matematike, biramo komisiju od <span style="color:#60a5fa;font-weight:600;">6 članova</span>, ali tako da ako je u komisiji student elektrotehnike, mora u toj komisiji biti i student matematike.</p>
    <p style="margin-top:8px;">Koliko se takvih komisija može obrazovati?</p>

    <div class="given-grid" style="margin-top:14px;margin-bottom:8px;">
      <div class="given-item">
        <div class="label">Ukupno studenata</div>
        <div class="value">\(10\)</div>
      </div>
      <div class="given-item">
        <div class="label">Veličina komisije</div>
        <div class="value">\(6\)</div>
      </div>
      <div class="given-item">
        <div class="label">Student E</div>
        <div class="value">\(1\)</div>
      </div>
      <div class="given-item">
        <div class="label">Student M</div>
        <div class="value">\(1\)</div>
      </div>
    </div>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(210\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(98\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(126\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(154\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(165\)</div>
      </div>
    </div>
  </div>

  <!-- c. Plan -->
  <div class="card plan-card">
    <h2>Plan rešavanja</h2>
    <p>Koristićemo metod <strong>komplementarnog prebrojavanja</strong>: od ukupnog broja komisija od 6 članova oduzećemo one koje krše uslov (student elektrotehnike jeste u komisiji, ali student matematike nije). Radi provere, primenićemo i analizu po slučajevima.</p>
  </div>

  <!-- d. Theory Refresher -->
  <div class="card theory-card">
    <details>
      <summary>Ključne formule i teoreme</summary>
      <ul>
        <li><strong>Binomni koeficijent (kombinacije bez ponavljanja):</strong> Broj načina da iz \(n\) elemenata izaberemo \(k\) bez obzira na redosled:
        \[ \binom{n}{k} = \frac{n!}{k!(n-k)!} \]</li>
        <li><strong>Simetrija binomnog koeficijenta:</strong>
        \[ \binom{n}{k} = \binom{n}{n-k} \]
        Na primer, \(\binom{8}{6} = \binom{8}{2} = 28\).</li>
        <li><strong>Princip komplementarnog prebrojavanja:</strong> Ako je teško direktno prebrojati objekte koji zadovoljavaju uslov, onda:
        \[ |A| = |U| - |A^c| \]
        gde je \(|U|\) ukupan broj objekata, a \(|A^c|\) broj objekata koji ne zadovoljavaju uslov.</li>
        <li><strong>Logička implikacija:</strong> Uslov \(E \Rightarrow M\) znači da je jedina zabranjena situacija: \(E\) jeste u komisiji, a \(M\) nije. Sve ostale kombinacije su dozvoljene.</li>
      </ul>
    </details>
  </div>

  <!-- e. Visual Aid / Interactive Diagram -->
  <div class="card canvas-card">
    <h2>Vizuelni prikaz</h2>
    <canvas id="diagram" width="750" height="420"></canvas>
    <p class="canvas-hint">Kliknite na slučaj da vidite detalje</p>
  </div>

  <!-- f. Step-by-Step Solution -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <div class="step-container" id="step1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Razumevanje uslova</h3>
        <p>Uslov glasi: <em>ako je student elektrotehnike (E) u komisiji, onda mora biti i student matematike (M)</em>.</p>
        <p>To je logička implikacija \(E \Rightarrow M\). Jedina zabranjena situacija je:</p>
        <div class="math-block">
          \[ \text{E u komisiji} \;\wedge\; \text{M nije u komisiji} \quad \longrightarrow \quad \text{ZABRANJENO} \]
        </div>
        <p class="note">Sve ostale kombinacije (oba unutra, oba van, samo M unutra) su dozvoljene.</p>
      </div>
    </div>

    <div class="step-container" id="step2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Ukupan broj komisija bez ograničenja</h3>
        <p>Biramo 6 studenata od ukupno 10, bez ikakvih ograničenja:</p>
        <div class="math-block">
          \[ \binom{10}{6} = \frac{10!}{6! \cdot 4!} = \frac{10 \cdot 9 \cdot 8 \cdot 7}{4 \cdot 3 \cdot 2 \cdot 1} = \frac{5040}{24} = 210 \]
        </div>
      </div>
    </div>

    <div class="checkpoint">
      <details>
        <summary>Proveri se: Koliko je \(\binom{10}{6}\)?</summary>
        <div class="answer">Odgovor: \(\binom{10}{6} = 210\). Koristi simetriju: \(\binom{10}{6} = \binom{10}{4} = 210\).</div>
      </details>
    </div>

    <div class="step-container" id="step3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Prebrojavanje zabranjenih komisija</h3>
        <p>Zabranjene komisije su one u kojima je E izabran, a M nije.</p>
        <p>Ako fiksiramo E u komisiji i isključimo M, preostaje da izaberemo <strong>5 članova</strong> od <strong>8 preostalih studenata</strong> (svi osim E i M).</p>
        <div class="math-block">
          \[ \text{Zabranjene} = \binom{8}{5} = \frac{8!}{5! \cdot 3!} = \frac{8 \cdot 7 \cdot 6}{3 \cdot 2 \cdot 1} = \frac{336}{6} = 56 \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Dozvoljene komisije (komplement)</h3>
        <p>Od ukupnog broja oduzimamo zabranjene:</p>
        <div class="math-block">
          \[ \text{Dozvoljene} = \binom{10}{6} - \binom{8}{5} = 210 - 56 = 154 \]
        </div>
      </div>
    </div>

    <div class="checkpoint">
      <details>
        <summary>Proveri se: Koliko ima zabranjenih komisija?</summary>
        <div class="answer">Zabranjenih je \(\binom{8}{5} = 56\). To su komisije gde je E unutra, a M van komisije.</div>
      </details>
    </div>

    <div class="step-container" id="step5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Provera analizom slučajeva</h3>
        <p>Razdvojimo sve dozvoljene komisije na tri disjunktna slučaja:</p>

        <p><strong>Slučaj 1:</strong> Ni E ni M nisu u komisiji.</p>
        <div class="math-block">
          \[ \binom{8}{6} = \binom{8}{2} = \frac{8 \cdot 7}{2} = 28 \]
        </div>

        <p><strong>Slučaj 2:</strong> I E i M su u komisiji.</p>
        <div class="math-block">
          \[ \binom{8}{4} = \frac{8 \cdot 7 \cdot 6 \cdot 5}{4 \cdot 3 \cdot 2 \cdot 1} = \frac{1680}{24} = 70 \]
        </div>

        <p><strong>Slučaj 3:</strong> M je u komisiji, E nije.</p>
        <div class="math-block">
          \[ \binom{8}{5} = 56 \]
        </div>

        <p><strong>Ukupno:</strong></p>
        <div class="math-block">
          \[ 28 + 70 + 56 = 154 \]
        </div>
        <p class="note">Oba pristupa daju isti rezultat: 154. Rešenje je potvrđeno.</p>
      </div>
    </div>

    <div class="checkpoint">
      <details>
        <summary>Proveri se: Zašto nema četvrtog slučaja (E u komisiji, M nije)?</summary>
        <div class="answer">Zato što je upravo taj slučaj zabranjen uslovom zadatka! \(E \Rightarrow M\) isključuje tu mogućnost.</div>
      </details>
    </div>

  </div>

  <!-- g. Key Insight -->
  <div class="insight-box">
    <h2>Ključni uvid</h2>
    <p>Implikacija \(E \Rightarrow M\) zabranjuje samo jedan od četiri moguća slučaja. Najlakši put do rešenja je <strong>komplement</strong>:</p>
    <div class="insight-formula">
      \[ \binom{10}{6} - \binom{8}{5} = 210 - 56 = \boxed{154} \]
    </div>
  </div>

  <!-- h. Final Answer -->
  <div class="final-answer-box">
    <h2>Konačan odgovor</h2>
    <div class="final-answer-value">(D) 154</div>

    <div class="options-row">
      <div class="option-card">
        <div class="opt-label">(A)</div>
        <div class="opt-value">210</div>
      </div>
      <div class="option-card">
        <div class="opt-label">(B)</div>
        <div class="opt-value">98</div>
      </div>
      <div class="option-card">
        <div class="opt-label">(C)</div>
        <div class="opt-value">126</div>
      </div>
      <div class="option-card correct">
        <div class="opt-label">(D)</div>
        <div class="opt-value">154</div>
      </div>
      <div class="option-card">
        <div class="opt-label">(E)</div>
        <div class="opt-value">165</div>
      </div>
    </div>

    <p class="verification-note"><strong>Provera:</strong> Ukupno bez ograničenja je \(\binom{10}{6} = 210\), što je odgovor (A). Pošto smo uveli ograničenje koje zabranjuje neke komisije, odgovor mora biti <em>manji</em> od 210. Oduzimamo 56 zabranjenih i dobijamo 154. Takođe, zbir sva tri dozvoljena slučaja (28 + 70 + 56) daje istih 154.</p>
  </div>

  <!-- i. Common Pitfalls -->
  <div class="card pitfall-card">
    <h2>Česte greške</h2>
    <ul>
      <li><strong>Zaboraviti na komplement:</strong> Mnogi studenti pokušavaju da direktno broje samo komisije sa oba studenta, zaboravljajući slučajeve gde nijedan nije u komisiji ili je samo M u komisiji. Komplement (\(210 - 56\)) je daleko elegantniji.</li>
      <li><strong>Pogrešno tumačenje implikacije:</strong> Uslov „ako E onda M" ne znači „ako M onda E". Student matematike može biti u komisiji i bez studenta elektrotehnike. Zabranjen je samo jedan smer: E bez M.</li>
    </ul>
  </div>

  <!-- j. Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Kako bi se promenio odgovor da uslov glasi: „student elektrotehnike i student matematike moraju biti <em>zajedno</em> u komisiji ili <em>zajedno van</em> komisije" (tj. ili su oba u komisiji ili nijedan)?</p>
    <details>
      <summary>Nagoveštaj</summary>
      <p style="margin-top:10px;">Razmisli o dva slučaja: (1) oba u komisiji: \(\binom{8}{4}\), i (2) nijedan u komisiji: \(\binom{8}{6}\). Saberi ih.</p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('diagram');
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  let hoveredCase = -1;

  const cases = [
    {
      label: 'Slučaj 1',
      desc: 'Ni E ni M',
      formula: 'C(8,6) = 28',
      color: '#60a5fa',
      x: 100, y: 140, w: 160, h: 100
    },
    {
      label: 'Slučaj 2',
      desc: 'I E i M',
      formula: 'C(8,4) = 70',
      color: '#a78bfa',
      x: 295, y: 140, w: 160, h: 100
    },
    {
      label: 'Slučaj 3',
      desc: 'Samo M',
      formula: 'C(8,5) = 56',
      color: '#34d399',
      x: 490, y: 140, w: 160, h: 100
    }
  ];

  const forbidden = {
    label: 'ZABRANJENO',
    desc: 'Samo E (bez M)',
    formula: 'C(8,5) = 56',
    color: '#ef4444',
    x: 295, y: 290, w: 160, h: 100
  };

  function drawRoundedRect(x, y, w, h, r, fill, stroke) {
    ctx.beginPath();
    ctx.moveTo(x + r, y);
    ctx.lineTo(x + w - r, y);
    ctx.quadraticCurveTo(x + w, y, x + w, y + r);
    ctx.lineTo(x + w, y + h - r);
    ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
    ctx.lineTo(x + r, y + h);
    ctx.quadraticCurveTo(x, y + h, x, y + h - r);
    ctx.lineTo(x, y + r);
    ctx.quadraticCurveTo(x, y, x + r, y);
    ctx.closePath();
    if (fill) { ctx.fillStyle = fill; ctx.fill(); }
    if (stroke) { ctx.strokeStyle = stroke; ctx.lineWidth = 2; ctx.stroke(); }
  }

  function drawCaseBox(c, hovered) {
    const alpha = hovered ? 0.25 : 0.12;
    const r = parseInt(c.color.slice(1,3),16);
    const g = parseInt(c.color.slice(3,5),16);
    const b = parseInt(c.color.slice(5,7),16);
    drawRoundedRect(c.x, c.y, c.w, c.h, 12,
      `rgba(${r},${g},${b},${alpha})`,
      c.color
    );
    ctx.fillStyle = c.color;
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText(c.label, c.x + c.w/2, c.y + 28);

    ctx.fillStyle = '#e2e8f0';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.fillText(c.desc, c.x + c.w/2, c.y + 50);

    ctx.fillStyle = hovered ? '#ffffff' : '#94a3b8';
    ctx.font = 'bold 15px Courier New, monospace';
    ctx.fillText(c.formula, c.x + c.w/2, c.y + 76);
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    drawRoundedRect(0, 0, W, H, 12, '#0c1222', null);

    // Title
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 18px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Analiza slučajeva: 3 dozvoljena + 1 zabranjeni', W/2, 36);

    // Header: DOZVOLJENO
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.fillText('DOZVOLJENO', W/2 - 100, 115);

    // Allowed label with checkmark
    ctx.fillStyle = '#4ade80';
    ctx.font = '18px Segoe UI, system-ui, sans-serif';
    ctx.fillText('✓', W/2 - 185, 116);

    // Draw allowed cases
    cases.forEach((c, i) => drawCaseBox(c, hoveredCase === i));

    // Forbidden label
    ctx.fillStyle = '#ef4444';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('ZABRANJENO', forbidden.x + forbidden.w/2, 275);

    // Cross icon
    ctx.fillStyle = '#ef4444';
    ctx.font = '18px Segoe UI, system-ui, sans-serif';
    ctx.fillText('✗', forbidden.x + forbidden.w/2 - 65, 276);

    // Dashed border for forbidden box
    ctx.save();
    ctx.setLineDash([6, 4]);
    drawCaseBox(forbidden, hoveredCase === 3);
    ctx.setLineDash([]);
    ctx.restore();

    // Bottom summary
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 16px Courier New, monospace';
    ctx.textAlign = 'center';
    ctx.fillText('Ukupno = 28 + 70 + 56 = 154', W/2, H - 20);

    // Or complement method
    ctx.fillStyle = '#94a3b8';
    ctx.font = '14px Segoe UI, system-ui, sans-serif';
    ctx.fillText('ili komplementom: 210 − 56 = 154', W/2, H - 2);
  }

  function getHovered(mx, my) {
    for (let i = 0; i < cases.length; i++) {
      const c = cases[i];
      if (mx >= c.x && mx <= c.x + c.w && my >= c.y && my <= c.y + c.h) return i;
    }
    if (mx >= forbidden.x && mx <= forbidden.x + forbidden.w && my >= forbidden.y && my <= forbidden.y + forbidden.h) return 3;
    return -1;
  }

  function handlePointer(e) {
    const rect = canvas.getBoundingClientRect();
    const scaleX = W / rect.width;
    const scaleY = H / rect.height;
    const mx = (e.clientX - rect.left) * scaleX;
    const my = (e.clientY - rect.top) * scaleY;
    const prev = hoveredCase;
    hoveredCase = getHovered(mx, my);
    if (hoveredCase !== prev) {
      canvas.style.cursor = hoveredCase >= 0 ? 'pointer' : 'default';
      draw();
    }
  }

  canvas.addEventListener('mousemove', handlePointer);
  canvas.addEventListener('touchstart', (e) => {
    e.preventDefault();
    const t = e.touches[0];
    handlePointer(t);
  });
  canvas.addEventListener('touchmove', (e) => {
    e.preventDefault();
    const t = e.touches[0];
    handlePointer(t);
  });
  canvas.addEventListener('touchend', () => {
    hoveredCase = -1;
    draw();
  });
  canvas.addEventListener('mouseleave', () => {
    hoveredCase = -1;
    canvas.style.cursor = 'default';
    draw();
  });

  // Step click interaction
  document.querySelectorAll('.step-container').forEach(el => {
    el.addEventListener('click', () => {
      el.classList.toggle('active');
    });
  });

  draw();
})();
</script>
</div>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Formiranje komisije sa uslovom - kombinatorika",
  "subject": "math",
  "unit": "combinatorics",
  "topic_tags": ["kombinacije", "komplementarno prebrojavanje", "binomni koeficijent", "logička implikacija", "analiza slučajeva"]
}
BRAINSPARK_META-->