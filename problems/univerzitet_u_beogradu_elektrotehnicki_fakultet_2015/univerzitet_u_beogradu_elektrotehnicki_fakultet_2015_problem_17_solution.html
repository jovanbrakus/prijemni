<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Izraz sa stranicama jednakokrakog trougla</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM:
U jednakokrakom trouglu ABC je AB = BC = b, AC = a i ugao ABC = 20 stepeni.
Tada je izraz a^2/b^2 + b/a jednak:
(A) 1  (B) 2  (C) 3  (D) 3/2  (E) 5/2

SOLUTION:

Step 1: Determine angles.
AB = BC = b => triangle is isosceles with vertex angle at B = 20 degrees.
Base angles: angle BAC = angle BCA = (180 - 20)/2 = 80 degrees.

Step 2: Use law of cosines to find a^2/b^2.
a^2 = b^2 + b^2 - 2*b^2*cos(20) = 2b^2(1 - cos20)
So a^2/b^2 = 2(1 - cos20) = 4sin^2(10)  [using identity 1 - cos(2x) = 2sin^2(x)]

Step 3: Use law of sines to find a/b.
a/sin(20) = b/sin(80)
a/b = sin(20)/sin(80) = 2sin(10)cos(10)/cos(10) = 2sin(10)

Step 4: Compute the expression.
a^2/b^2 + b/a = 4sin^2(10) + 1/(2sin(10))
= (8sin^3(10) + 1) / (2sin(10))

Step 5: Use triple angle identity.
sin(3*theta) = 3sin(theta) - 4sin^3(theta)
For theta = 10 degrees: sin(30) = 3sin(10) - 4sin^3(10)
1/2 = 3sin(10) - 4sin^3(10)
4sin^3(10) = 3sin(10) - 1/2
8sin^3(10) = 6sin(10) - 1

Step 6: Substitute back.
8sin^3(10) + 1 = 6sin(10) - 1 + 1 = 6sin(10)
(8sin^3(10) + 1)/(2sin(10)) = 6sin(10)/(2sin(10)) = 3

VERIFICATION:
sin(10) ≈ 0.17365
4sin^2(10) ≈ 4 * 0.030154 ≈ 0.12061
1/(2sin(10)) ≈ 1/0.34730 ≈ 2.87939
Sum ≈ 0.12061 + 2.87939 ≈ 3.000 CHECK!

ANSWER: (C) 3
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa, #f472b6);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
  transition: border-color 0.2s;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 10px 0;
  user-select: none;
}

details summary:hover {
  color: #93bbfc;
}

details[open] summary {
  margin-bottom: 10px;
}

.theory-content ul {
  list-style: none;
  padding-left: 0;
}

.theory-content li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #cbd5e1;
}

.theory-content li:last-child {
  border-bottom: none;
}

.canvas-card {
  text-align: center;
}

canvas {
  border-radius: 10px;
  width: 100%;
  max-width: 700px;
  touch-action: none;
}

.drag-hint {
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

.step-container {
  margin-bottom: 18px;
  padding: 18px;
  padding-left: 24px;
  background: rgba(30,41,59,0.5);
  border-left: 3px solid #334155;
  border-radius: 0 10px 10px 0;
  cursor: pointer;
  transition: border-color 0.25s, background 0.25s;
}

.step-container:hover,
.step-container.active {
  border-left-color: #4ade80;
  background: rgba(30,41,59,0.9);
}

.step-badge {
  display: inline-block;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  font-weight: 700;
  font-size: 0.8rem;
  padding: 3px 10px;
  border-radius: 20px;
  margin-bottom: 8px;
}

.step-title {
  font-size: 1.1rem;
  font-weight: 600;
  color: #e2e8f0;
  margin-bottom: 8px;
}

.step-text {
  color: #cbd5e1;
  font-size: 0.97rem;
}

.checkpoint {
  background: rgba(167,139,250,0.08);
  border: 1px solid rgba(167,139,250,0.2);
  border-radius: 8px;
  padding: 12px 16px;
  margin: 15px 0;
}

.checkpoint summary {
  color: #a78bfa;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.25);
  border-radius: 14px;
  padding: 22px;
  margin-bottom: 24px;
}

.insight-box h3 {
  color: #a78bfa;
  margin-bottom: 10px;
}

.insight-formula {
  text-align: center;
  font-size: 1.3rem;
  margin: 14px 0;
}

.final-answer {
  text-align: center;
  padding: 30px;
  border: 2px solid rgba(74,222,128,0.3);
  background: rgba(74,222,128,0.06);
}

.final-answer .answer-value {
  font-size: 2rem;
  font-weight: 700;
  color: #4ade80;
  margin: 16px 0;
}

.final-answer .answer-label {
  color: #94a3b8;
  font-size: 0.95rem;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 12px;
  margin: 20px 0;
}

.option-box {
  padding: 12px 22px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: rgba(30,41,59,0.6);
  color: #94a3b8;
  font-size: 1.05rem;
  font-weight: 600;
  transition: all 0.3s;
}

.option-box.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.12);
  color: #4ade80;
}

.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 0;
  padding-left: 16px;
  position: relative;
  color: #cbd5e1;
}

.pitfall-list li::before {
  content: '\26A0';
  position: absolute;
  left: 0;
}

.challenge-box {
  border-left: 3px solid #f472b6;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 10px;
}

@media (max-width: 700px) {
  h1 { font-size: 1.5rem; }
  .container { padding: 10px; }
  .card { padding: 16px; }
  .given-grid { flex-direction: column; }
  .options-row { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Izraz sa stranicama jednakokrakog trougla</h1>
  <p class="subtitle">Trigonometrija &mdash; kosinusna teorema, sinusna teorema, trostruki ugao</p>

  <!-- PROBLEM STATEMENT -->
  <div class="card problem-statement">
    <h2>Zadatak</h2>
    <p>U jednakokrakom trouglu \(ABC\) je \(AB = BC = b\), \(AC = a\) i \(\angle ABC = 20°\). Tada je izraz \(\dfrac{a^2}{b^2} + \dfrac{b}{a}\) jednak:</p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(1\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(2\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(3\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(\dfrac{3}{2}\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(\dfrac{5}{2}\)</div>
      </div>
    </div>
  </div>

  <!-- PLAN -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>
      1. Odrediti uglove trougla iz uslova jednakokrakosti.<br>
      2. Kosinusnom teoremom izraziti \(a^2/b^2\) preko \(\cos 20°\), a zatim identitetom svesti na \(\sin^2 10°\).<br>
      3. Sinusnom teoremom izraziti \(a/b\) preko \(\sin 10°\).<br>
      4. Svesti celokupan izraz na algebarski oblik u \(\sin 10°\).<br>
      5. Primeniti <span class="highlight">identitet trostrukog ugla</span> za \(\sin 30°\) da se izraz drasticno uprosti.
    </p>
  </div>

  <!-- THEORY -->
  <div class="card">
    <details>
      <summary>Kljucne formule i teoreme</summary>
      <div class="theory-content">
        <ul>
          <li><strong>Kosinusna teorema:</strong> \(c^2 = a^2 + b^2 - 2ab\cos C\). Za naspramnu stranicu ugla \(B\): \(a^2 = b^2 + b^2 - 2b^2\cos B\).</li>
          <li><strong>Sinusna teorema:</strong> \(\dfrac{a}{\sin A} = \dfrac{b}{\sin B} = \dfrac{c}{\sin C}\).</li>
          <li><strong>Poluugaoni identitet:</strong> \(1 - \cos 2\alpha = 2\sin^2\alpha\). Specijalno: \(1 - \cos 20° = 2\sin^2 10°\).</li>
          <li><strong>Dupli ugao:</strong> \(\sin 2\alpha = 2\sin\alpha\cos\alpha\). Specijalno: \(\sin 20° = 2\sin 10°\cos 10°\).</li>
          <li><strong>Trostruki ugao (kljucni):</strong> \(\sin 3\theta = 3\sin\theta - 4\sin^3\theta\). Za \(\theta = 10°\): \(\sin 30° = \frac{1}{2} = 3\sin 10° - 4\sin^3 10°\).</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- VISUAL AID -->
  <div class="card canvas-card">
    <h2>Jednakokraki trougao ABC</h2>
    <p style="color:#94a3b8; margin-bottom:14px;">Interaktivni dijagram: prevucite teme da istrazite geometriju. Ugao pri temenu \(B\) je \(20°\), a kraci \(AB = BC = b\).</p>
    <canvas id="diagram" width="700" height="500"></canvas>
    <p class="drag-hint">Prevucite temena A, B ili C da istrazite trougao (ugao pri B ostaje 20°)</p>
  </div>

  <!-- STEP-BY-STEP -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container" id="step1">
      <span class="step-badge">Korak 1</span>
      <div class="step-title">Odredjivanje uglova trougla</div>
      <div class="step-text">
        <p>Posto je \(AB = BC = b\), trougao \(ABC\) je <span class="highlight">jednakokrak</span> sa kracima \(AB\) i \(BC\). Uglovi uz osnovu \(AC\) su jednaki:</p>
        <div class="math-box">
          \[ \angle BAC = \angle BCA = \frac{180° - 20°}{2} = \frac{160°}{2} = 80° \]
        </div>
        <p>Dakle, imamo trougao sa uglovima \(80°\), \(20°\), \(80°\), gde je ugao od \(20°\) pri temenu \(B\), a osnova \(AC = a\) je naspram njega.</p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container" id="step2">
      <span class="step-badge">Korak 2</span>
      <div class="step-title">Izrazavanje \(a^2/b^2\) kosinusnom teoremom</div>
      <div class="step-text">
        <p>Primenimo kosinusnu teoremu na stranicu \(a = AC\) naspram ugla \(B = 20°\):</p>
        <div class="math-box">
          \[ a^2 = AB^2 + BC^2 - 2 \cdot AB \cdot BC \cdot \cos(\angle ABC) \]
        </div>
        <p>Posto je \(AB = BC = b\):</p>
        <div class="math-box">
          \[ a^2 = b^2 + b^2 - 2b^2 \cos 20° = 2b^2(1 - \cos 20°) \]
        </div>
        <p>Primenimo identitet \(1 - \cos 2\alpha = 2\sin^2\alpha\) sa \(\alpha = 10°\):</p>
        <div class="math-box">
          \[ \frac{a^2}{b^2} = 2(1 - \cos 20°) = 2 \cdot 2\sin^2 10° = 4\sin^2 10° \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri se: Koliko priblizno iznosi \(a^2/b^2\)?</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        \(\sin 10° \approx 0{,}17365\), pa \(4\sin^2 10° \approx 4 \cdot 0{,}03015 \approx 0{,}1206\). Ovo je mali broj, sto je ocekivano jer je osnova \(a\) mnogo kraca od krakova \(b\) (ugao pri \(B\) je samo \(20°\)).
      </p>
    </details>

    <!-- Step 3 -->
    <div class="step-container" id="step3">
      <span class="step-badge">Korak 3</span>
      <div class="step-title">Izrazavanje \(a/b\) sinusnom teoremom</div>
      <div class="step-text">
        <p>Primenimo sinusnu teoremu:</p>
        <div class="math-box">
          \[ \frac{a}{\sin(\angle ABC)} = \frac{b}{\sin(\angle BAC)} \implies \frac{a}{\sin 20°} = \frac{b}{\sin 80°} \]
        </div>
        <p>Odatle:</p>
        <div class="math-box">
          \[ \frac{a}{b} = \frac{\sin 20°}{\sin 80°} \]
        </div>
        <p>Koristimo \(\sin 20° = 2\sin 10°\cos 10°\) i \(\sin 80° = \cos 10°\):</p>
        <div class="math-box">
          \[ \frac{a}{b} = \frac{2\sin 10° \cos 10°}{\cos 10°} = 2\sin 10° \]
        </div>
        <p>Prema tome: \(\dfrac{b}{a} = \dfrac{1}{2\sin 10°}\).</p>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step-container" id="step4">
      <span class="step-badge">Korak 4</span>
      <div class="step-title">Sastavljanje izraza</div>
      <div class="step-text">
        <p>Sada uvrstavamo u trazeni izraz:</p>
        <div class="math-box">
          \[ \frac{a^2}{b^2} + \frac{b}{a} = 4\sin^2 10° + \frac{1}{2\sin 10°} \]
        </div>
        <p>Svedimo na zajednicki imenilac \(2\sin 10°\):</p>
        <div class="math-box">
          \[ = \frac{4\sin^2 10° \cdot 2\sin 10° + 1}{2\sin 10°} = \frac{8\sin^3 10° + 1}{2\sin 10°} \]
        </div>
        <p>Sada treba da izracunamo vrednost izraza \(8\sin^3 10° + 1\). Tu nastupa <span class="highlight">kljucni trik</span>.</p>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step-container" id="step5">
      <span class="step-badge">Korak 5</span>
      <div class="step-title">Primena identiteta trostrukog ugla</div>
      <div class="step-text">
        <p>Identitet za trostruki ugao glasi:</p>
        <div class="math-box">
          \[ \sin 3\theta = 3\sin\theta - 4\sin^3\theta \]
        </div>
        <p>Za \(\theta = 10°\) dobijamo \(3\theta = 30°\), pa:</p>
        <div class="math-box">
          \[ \sin 30° = 3\sin 10° - 4\sin^3 10° \]
        </div>
        <p>Posto je \(\sin 30° = \frac{1}{2}\):</p>
        <div class="math-box">
          \[ \frac{1}{2} = 3\sin 10° - 4\sin^3 10° \]
        </div>
        <p>Izrazimo \(4\sin^3 10°\) iz ove jednacine:</p>
        <div class="math-box">
          \[ 4\sin^3 10° = 3\sin 10° - \frac{1}{2} \]
        </div>
        <p>Pomnozimo sa 2:</p>
        <div class="math-box">
          \[ 8\sin^3 10° = 6\sin 10° - 1 \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri se: Da li je \(8\sin^3 10° = 6\sin 10° - 1\) numericki tacno?</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        \(\sin 10° \approx 0{,}17365\).<br>
        Leva strana: \(8 \cdot (0{,}17365)^3 \approx 8 \cdot 0{,}005236 \approx 0{,}04189\).<br>
        Desna strana: \(6 \cdot 0{,}17365 - 1 = 1{,}04189 - 1 = 0{,}04189\). &check;
      </p>
    </details>

    <!-- Step 6 -->
    <div class="step-container" id="step6">
      <span class="step-badge">Korak 6</span>
      <div class="step-title">Zavrsno uproscavanje</div>
      <div class="step-text">
        <p>Uvrstavamo \(8\sin^3 10° = 6\sin 10° - 1\) u nas izraz:</p>
        <div class="math-box">
          \[ 8\sin^3 10° + 1 = (6\sin 10° - 1) + 1 = 6\sin 10° \]
        </div>
        <p>Konacno:</p>
        <div class="math-box">
          \[ \frac{a^2}{b^2} + \frac{b}{a} = \frac{6\sin 10°}{2\sin 10°} = \boxed{3} \]
        </div>
        <p>Izraz \(\sin 10°\) se <em>potpuno skratio</em>, i dobijamo celobrojnu vrednost!</p>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details class="checkpoint">
      <summary>Proveri se: Numericki test</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        \(\sin 10° \approx 0{,}17365\).<br>
        \(a^2/b^2 = 4\sin^2 10° \approx 0{,}12061\).<br>
        \(b/a = 1/(2\sin 10°) \approx 2{,}87939\).<br>
        Zbir: \(0{,}12061 + 2{,}87939 = 3{,}00000\). &check;
      </p>
    </details>
  </div>

  <!-- KEY INSIGHT -->
  <div class="insight-box">
    <h3>Kljucni uvid</h3>
    <p>Ceo problem se zasniva na cinjenici da je \(3 \times 10° = 30°\), a \(\sin 30° = \frac{1}{2}\) je poznata vrednost. Identitet trostrukog ugla \(\sin 3\theta = 3\sin\theta - 4\sin^3\theta\) povezuje \(\sin^3 10°\) sa \(\sin 10°\), sto omogucava potpuno skracivanje:</p>
    <div class="insight-formula">
      \[ \frac{8\sin^3 10° + 1}{2\sin 10°} = \frac{6\sin 10°}{2\sin 10°} = 3 \]
    </div>
    <p style="color:#94a3b8; text-align:center;">Ugao od \(20°\) u zadatku nije slucajan &mdash; on je izabran upravo zato sto daje \(\theta = 10°\) gde trostruki ugao \(30°\) ima poznatu vrednost sinusa.</p>
  </div>

  <!-- FINAL ANSWER -->
  <div class="card final-answer">
    <h2>Konacan odgovor</h2>
    <p class="answer-label">Vrednost izraza \(\dfrac{a^2}{b^2} + \dfrac{b}{a}\) jednaka je:</p>
    <div class="answer-value">\(\displaystyle (C) \;\; 3\)</div>
    <div class="options-row">
      <div class="option-box">(A) \(1\)</div>
      <div class="option-box">(B) \(2\)</div>
      <div class="option-box correct">(C) \(3\)</div>
      <div class="option-box">(D) \(\frac{3}{2}\)</div>
      <div class="option-box">(E) \(\frac{5}{2}\)</div>
    </div>
    <p class="verification-note">Provera: \(4\sin^2 10° + \frac{1}{2\sin 10°} \approx 0{,}1206 + 2{,}8794 = 3{,}0000\) &check;</p>
  </div>

  <!-- PITFALLS -->
  <div class="card">
    <h2>Ceste greske</h2>
    <ul class="pitfall-list">
      <li>Zamena stranica i uglova: \(AB = BC = b\) znaci da su <em>kraci</em> jednaki, a \(AC = a\) je <em>osnova</em>. Ugao pri \(B\) je ugao izmedju krakova, ne uz osnovu. Ako se zameni, dobijaju se pogresni ugao pri osnovi.</li>
      <li>Pogresan identitet za poluugao: \(1 - \cos 20° = 2\sin^2 10°\), ne \(2\cos^2 10°\). Formula je \(1 - \cos 2\alpha = 2\sin^2\alpha\) (sa minusom ispred kosinusa dolazi sinus).</li>
      <li>Zaboraviti da je \(\sin 80° = \cos 10°\): Ovo je kljucno za skracivanje u koraku 3. Bez toga, izraz ostaje u komplikovanijem obliku.</li>
      <li>Pokusaj numerickog racunanja umesto algebarskog: Sa kalkulatorom se moze dobiti \(\approx 3\), ali na prijemnom ispitu bez kalkulatora jedini put je preko identiteta trostrukog ugla.</li>
    </ul>
  </div>

  <!-- CHALLENGE -->
  <div class="card challenge-box">
    <h2>Dodatni izazov</h2>
    <p>Ako je u jednakokrakom trouglu \(AB = BC = b\), \(AC = a\), i ugao \(\angle ABC = 40°\), koliko iznosi izraz \(\dfrac{a^3}{b^3} + \dfrac{b^3}{a^3}\)?</p>
    <details>
      <summary>Pomoc</summary>
      <p style="padding-top:8px; color:#cbd5e1;">
        Uglovi uz osnovu su po \(70°\). Sinusnom teoremom: \(a/b = \sin 40°/\sin 70° = 2\sin 20°\cos 20°/\cos 20° = 2\sin 20°\). Neka je \(t = a/b = 2\sin 20°\). Tada treba naci \(t^3 + 1/t^3\). Primenom identiteta \(t^3 + 1/t^3 = (t + 1/t)^3 - 3(t + 1/t)\), prvo odredi \(t + 1/t = 2\sin 20° + 1/(2\sin 20°)\) i primeni identitet trostrukog ugla za \(\sin 60°\).
      </p>
    </details>
  </div>

</div>

<script>
(() => {
  // Step click highlighting
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.toggle('active');
    });
  });

  // Canvas diagram - Isosceles triangle with drag support
  const canvas = document.getElementById('diagram');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  // DPR support
  const dpr = window.devicePixelRatio || 1;
  canvas.width = W * dpr;
  canvas.height = H * dpr;
  canvas.style.width = W + 'px';
  canvas.style.height = H + 'px';
  ctx.scale(dpr, dpr);

  // Triangle vertices (initial positions)
  // B at top, A at bottom-left, C at bottom-right
  // Angle at B = 20 degrees, AB = BC
  const centerX = W / 2;
  const bLen = 220; // length of sides AB and BC in pixels

  // Place B at top center
  // Angle ABC = 20 degrees, so half-angle = 10 degrees
  // A is to the left, C to the right
  const halfAngle = 10 * Math.PI / 180;
  const bx0 = centerX;
  const by0 = 80;

  // A: go from B at angle (90 + 10) degrees from horizontal (downward-left)
  const angleToA = Math.PI / 2 + halfAngle;
  const ax0 = bx0 - bLen * Math.sin(halfAngle);
  const ay0 = by0 + bLen * Math.cos(halfAngle);

  // C: symmetric
  const cx0 = bx0 + bLen * Math.sin(halfAngle);
  const cy0 = by0 + bLen * Math.cos(halfAngle);

  let pts = {
    A: { x: ax0, y: ay0 },
    B: { x: bx0, y: by0 },
    C: { x: cx0, y: cy0 }
  };

  let dragging = null;
  let dragOffset = { x: 0, y: 0 };

  function dist(p1, p2) {
    return Math.sqrt((p1.x - p2.x) ** 2 + (p1.y - p2.y) ** 2);
  }

  function angleBetween(p1, vertex, p2) {
    const v1x = p1.x - vertex.x;
    const v1y = p1.y - vertex.y;
    const v2x = p2.x - vertex.x;
    const v2y = p2.y - vertex.y;
    const dot = v1x * v2x + v1y * v2y;
    const cross = v1x * v2y - v1y * v2x;
    return Math.atan2(Math.abs(cross), dot);
  }

  function drawArc(cx, cy, p1, p2, radius, color, label) {
    const a1 = Math.atan2(p1.y - cy, p1.x - cx);
    const a2 = Math.atan2(p2.y - cy, p2.x - cx);

    // Determine shorter arc direction
    let start = a1;
    let end = a2;
    let diff = end - start;
    if (diff > Math.PI) diff -= 2 * Math.PI;
    if (diff < -Math.PI) diff += 2 * Math.PI;
    const counterclockwise = diff < 0;

    ctx.strokeStyle = color;
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.arc(cx, cy, radius, start, end, counterclockwise);
    ctx.stroke();

    // Label at midpoint of arc
    const midAngle = start + diff / 2;
    const labelR = radius + 16;
    ctx.fillStyle = color;
    ctx.font = 'bold 14px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText(label, cx + labelR * Math.cos(midAngle), cy + labelR * Math.sin(midAngle));
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    const A = pts.A;
    const B = pts.B;
    const C = pts.C;

    // Compute side lengths in pixels
    const dAB = dist(A, B);
    const dBC = dist(B, C);
    const dAC = dist(A, C);

    // Draw filled triangle
    ctx.fillStyle = 'rgba(96, 165, 250, 0.06)';
    ctx.beginPath();
    ctx.moveTo(A.x, A.y);
    ctx.lineTo(B.x, B.y);
    ctx.lineTo(C.x, C.y);
    ctx.closePath();
    ctx.fill();

    // Draw triangle edges
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(A.x, A.y);
    ctx.lineTo(B.x, B.y);
    ctx.lineTo(C.x, C.y);
    ctx.closePath();
    ctx.stroke();

    // Draw equal marks on AB and BC (tick marks)
    function drawTickMark(p1, p2, count) {
      const mx = (p1.x + p2.x) / 2;
      const my = (p1.y + p2.y) / 2;
      const dx = p2.x - p1.x;
      const dy = p2.y - p1.y;
      const len = Math.sqrt(dx * dx + dy * dy);
      const nx = -dy / len;
      const ny = dx / len;
      const tickLen = 8;
      const gap = 6;

      for (let i = 0; i < count; i++) {
        const offset = (i - (count - 1) / 2) * gap;
        const tx = mx + (dx / len) * offset;
        const ty = my + (dy / len) * offset;
        ctx.strokeStyle = '#f472b6';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(tx + nx * tickLen, ty + ny * tickLen);
        ctx.lineTo(tx - nx * tickLen, ty - ny * tickLen);
        ctx.stroke();
      }
    }

    drawTickMark(A, B, 1);
    drawTickMark(B, C, 1);

    // Draw angle arcs
    const arcR = 35;
    // Angle at B (between BA and BC)
    drawArc(B.x, B.y, A, C, arcR, '#4ade80', '20\u00B0');

    // Angle at A (between AB and AC)
    drawArc(A.x, A.y, B, C, arcR, '#a78bfa', '80\u00B0');

    // Angle at C (between CB and CA)
    drawArc(C.x, C.y, A, B, arcR, '#a78bfa', '80\u00B0');

    // Side labels
    ctx.font = 'bold 16px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';

    // AB label: "b" - offset to the left of edge
    const abMx = (A.x + B.x) / 2;
    const abMy = (A.y + B.y) / 2;
    const abDx = B.x - A.x;
    const abDy = B.y - A.y;
    const abLen = Math.sqrt(abDx * abDx + abDy * abDy);
    const abNx = -abDy / abLen;
    const abNy = abDx / abLen;
    ctx.fillStyle = '#f472b6';
    ctx.fillText('b', abMx + abNx * 20, abMy + abNy * 20);

    // BC label: "b" - offset to the right of edge
    const bcMx = (B.x + C.x) / 2;
    const bcMy = (B.y + C.y) / 2;
    const bcDx = C.x - B.x;
    const bcDy = C.y - B.y;
    const bcLen = Math.sqrt(bcDx * bcDx + bcDy * bcDy);
    const bcNx = -bcDy / bcLen;
    const bcNy = bcDx / bcLen;
    ctx.fillStyle = '#f472b6';
    ctx.fillText('b', bcMx - bcNx * 20, bcMy - bcNy * 20);

    // AC label: "a" - offset below the edge
    const acMx = (A.x + C.x) / 2;
    const acMy = (A.y + C.y) / 2;
    ctx.fillStyle = '#60a5fa';
    ctx.fillText('a', acMx, acMy + 22);

    // Vertex labels
    ctx.font = 'bold 18px Segoe UI, sans-serif';

    // A - bottom left
    ctx.fillStyle = '#e2e8f0';
    ctx.textAlign = 'right';
    ctx.fillText('A', A.x - 14, A.y + 8);

    // B - top
    ctx.textAlign = 'center';
    ctx.fillText('B', B.x, B.y - 18);

    // C - bottom right
    ctx.textAlign = 'left';
    ctx.fillText('C', C.x + 14, C.y + 8);

    // Draw vertex dots
    [A, B, C].forEach(p => {
      ctx.fillStyle = '#e2e8f0';
      ctx.beginPath();
      ctx.arc(p.x, p.y, 5, 0, 2 * Math.PI);
      ctx.fill();
      ctx.strokeStyle = '#334155';
      ctx.lineWidth = 1.5;
      ctx.stroke();
    });

    // Info box - actual angle and ratio
    const angleB = angleBetween(A, B, C) * 180 / Math.PI;
    const ratio = dAC / dAB;
    const aOverB = 2 * Math.sin(10 * Math.PI / 180);

    ctx.fillStyle = 'rgba(30, 41, 59, 0.9)';
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    const boxX = 16;
    const boxY = H - 90;
    const boxW = 300;
    const boxH = 76;
    ctx.beginPath();
    ctx.moveTo(boxX + 8, boxY);
    ctx.lineTo(boxX + boxW - 8, boxY);
    ctx.quadraticCurveTo(boxX + boxW, boxY, boxX + boxW, boxY + 8);
    ctx.lineTo(boxX + boxW, boxY + boxH - 8);
    ctx.quadraticCurveTo(boxX + boxW, boxY + boxH, boxX + boxW - 8, boxY + boxH);
    ctx.lineTo(boxX + 8, boxY + boxH);
    ctx.quadraticCurveTo(boxX, boxY + boxH, boxX, boxY + boxH - 8);
    ctx.lineTo(boxX, boxY + 8);
    ctx.quadraticCurveTo(boxX, boxY, boxX + 8, boxY);
    ctx.closePath();
    ctx.fill();
    ctx.stroke();

    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('AB = BC = b (kraci),  AC = a (osnova)', boxX + 12, boxY + 20);
    ctx.fillText('a/b = 2sin(10\u00B0) \u2248 ' + aOverB.toFixed(4).replace('.', ','), boxX + 12, boxY + 40);
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 14px Segoe UI, sans-serif';
    ctx.fillText('a\u00B2/b\u00B2 + b/a = 3', boxX + 12, boxY + 62);

    // Formula breakdown in top-right
    ctx.fillStyle = 'rgba(30, 41, 59, 0.9)';
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    const frX = W - 280;
    const frY = H - 90;
    const frW = 264;
    const frH = 76;
    ctx.beginPath();
    ctx.moveTo(frX + 8, frY);
    ctx.lineTo(frX + frW - 8, frY);
    ctx.quadraticCurveTo(frX + frW, frY, frX + frW, frY + 8);
    ctx.lineTo(frX + frW, frY + frH - 8);
    ctx.quadraticCurveTo(frX + frW, frY + frH, frX + frW - 8, frY + frH);
    ctx.lineTo(frX + 8, frY + frH);
    ctx.quadraticCurveTo(frX, frY + frH, frX, frY + frH - 8);
    ctx.lineTo(frX, frY + 8);
    ctx.quadraticCurveTo(frX, frY, frX + 8, frY);
    ctx.closePath();
    ctx.fill();
    ctx.stroke();

    ctx.fillStyle = '#60a5fa';
    ctx.font = '12px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    const s10 = Math.sin(10 * Math.PI / 180);
    ctx.fillText('4sin\u00B2(10\u00B0) \u2248 ' + (4 * s10 * s10).toFixed(4).replace('.', ','), frX + 12, frY + 20);
    ctx.fillText('1/(2sin(10\u00B0)) \u2248 ' + (1 / (2 * s10)).toFixed(4).replace('.', ','), frX + 12, frY + 40);
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 13px Segoe UI, sans-serif';
    ctx.fillText('Zbir = ' + (4 * s10 * s10 + 1 / (2 * s10)).toFixed(4).replace('.', ',') + ' = 3', frX + 12, frY + 62);
  }

  function getMousePos(e) {
    const rect = canvas.getBoundingClientRect();
    const scaleX = W / rect.width;
    const scaleY = H / rect.height;
    const clientX = e.touches ? e.touches[0].clientX : e.clientX;
    const clientY = e.touches ? e.touches[0].clientY : e.clientY;
    return {
      x: (clientX - rect.left) * scaleX,
      y: (clientY - rect.top) * scaleY
    };
  }

  function findPoint(pos) {
    const threshold = 20;
    for (const key of ['A', 'B', 'C']) {
      if (dist(pos, pts[key]) < threshold) return key;
    }
    return null;
  }

  function onDown(e) {
    e.preventDefault();
    const pos = getMousePos(e);
    const found = findPoint(pos);
    if (found) {
      dragging = found;
      dragOffset.x = pts[found].x - pos.x;
      dragOffset.y = pts[found].y - pos.y;
    }
  }

  function onMove(e) {
    if (!dragging) {
      // Change cursor
      const pos = getMousePos(e);
      canvas.style.cursor = findPoint(pos) ? 'grab' : 'default';
      return;
    }
    e.preventDefault();
    const pos = getMousePos(e);
    const newX = pos.x + dragOffset.x;
    const newY = pos.y + dragOffset.y;

    if (dragging === 'B') {
      // Move B, keep the triangle isosceles with angle 20 deg at B
      pts.B.x = newX;
      pts.B.y = newY;
      // Recompute A and C based on new B position, maintaining AB = BC and angle 20 deg
      const midX = (pts.A.x + pts.C.x) / 2;
      const midY = (pts.A.y + pts.C.y) / 2;
      // Direction from B to midpoint of AC
      const dx = midX - pts.B.x;
      const dy = midY - pts.B.y;
      const d = Math.sqrt(dx * dx + dy * dy);
      if (d > 10) {
        // Keep the current side length
        const sideLen = dist(pts.A, pts.B);
        const ha = halfAngle; // 10 degrees
        // Direction from B downward
        const dirX = dx / d;
        const dirY = dy / d;
        // Perpendicular direction
        const perpX = -dirY;
        const perpY = dirX;
        // A and C at distance sideLen from B
        pts.A.x = pts.B.x + sideLen * (dirX * Math.cos(ha) + perpX * Math.sin(ha));
        pts.A.y = pts.B.y + sideLen * (dirY * Math.cos(ha) + perpY * Math.sin(ha));
        pts.C.x = pts.B.x + sideLen * (dirX * Math.cos(ha) - perpX * Math.sin(ha));
        pts.C.y = pts.B.y + sideLen * (dirY * Math.cos(ha) - perpY * Math.sin(ha));
      }
    } else if (dragging === 'A') {
      // Move A, adjust triangle: keep B fixed, keep angle 20 deg, keep AB = BC
      const newDist = Math.sqrt((newX - pts.B.x) ** 2 + (newY - pts.B.y) ** 2);
      if (newDist > 30) {
        // Direction from B to new A
        const dirAx = (newX - pts.B.x) / newDist;
        const dirAy = (newY - pts.B.y) / newDist;
        pts.A.x = pts.B.x + newDist * dirAx;
        pts.A.y = pts.B.y + newDist * dirAy;
        // C is at same distance, rotated by 20 degrees
        const ang = 20 * Math.PI / 180;
        const dirCx = dirAx * Math.cos(-ang) - dirAy * Math.sin(-ang);
        const dirCy = dirAx * Math.sin(-ang) + dirAy * Math.cos(-ang);
        pts.C.x = pts.B.x + newDist * dirCx;
        pts.C.y = pts.B.y + newDist * dirCy;
      }
    } else if (dragging === 'C') {
      // Move C, adjust triangle: keep B fixed, keep angle 20 deg, keep AB = BC
      const newDist = Math.sqrt((newX - pts.B.x) ** 2 + (newY - pts.B.y) ** 2);
      if (newDist > 30) {
        const dirCx = (newX - pts.B.x) / newDist;
        const dirCy = (newY - pts.B.y) / newDist;
        pts.C.x = pts.B.x + newDist * dirCx;
        pts.C.y = pts.B.y + newDist * dirCy;
        const ang = 20 * Math.PI / 180;
        const dirAx = dirCx * Math.cos(ang) - dirCy * Math.sin(ang);
        const dirAy = dirCx * Math.sin(ang) + dirCy * Math.cos(ang);
        pts.A.x = pts.B.x + newDist * dirAx;
        pts.A.y = pts.B.y + newDist * dirAy;
      }
    }

    draw();
  }

  function onUp() {
    dragging = null;
  }

  canvas.addEventListener('mousedown', onDown);
  canvas.addEventListener('mousemove', onMove);
  canvas.addEventListener('mouseup', onUp);
  canvas.addEventListener('mouseleave', onUp);

  // Touch support
  canvas.addEventListener('touchstart', onDown, { passive: false });
  canvas.addEventListener('touchmove', onMove, { passive: false });
  canvas.addEventListener('touchend', onUp);
  canvas.addEventListener('touchcancel', onUp);

  draw();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Izraz sa stranicama jednakokrakog trougla",
  "subject": "math",
  "unit": "trigonometrija",
  "topic_tags": ["jednakokraki trougao", "kosinusna teorema", "sinusna teorema", "identitet trostrukog ugla", "trigonometrijski identiteti"]
}
BRAINSPARK_META-->