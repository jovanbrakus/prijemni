<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Maksimalna povrsina trougla formiranog tangentom na krivu y = e^(-x)</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM:
Tangenta krive y = e^{-x} (x > -1) sece koordinatne ose u tackama A i B.
Ako je O koordinatni pocetak, maksimalna povrsina trougla OAB iznosi:
(A) 1/e  (B) 2/e  (C) 3/e  (D) e  (E) 2e

SOLUTION APPROACH:
1) At point (t, e^{-t}) on the curve, the derivative is y' = -e^{-t}.
2) Tangent line: y - e^{-t} = -e^{-t}(x - t), i.e., y = -e^{-t}x + (t+1)e^{-t}.
3) x-intercept A (y=0): 0 = -e^{-t}x + (t+1)e^{-t} => x = t+1. So A = (t+1, 0).
4) y-intercept B (x=0): y = (t+1)e^{-t}. So B = (0, (t+1)e^{-t}).
5) For t > -1 (given), t+1 > 0, so both intercepts are positive.
6) Area of triangle OAB = (1/2)|t+1| * |(t+1)e^{-t}| = (1/2)(t+1)^2 * e^{-t}.
7) Define f(t) = (t+1)^2 * e^{-t}. We need to maximize this for t > -1.
8) f'(t) = 2(t+1)e^{-t} - (t+1)^2 * e^{-t} = (t+1)e^{-t}[2 - (t+1)] = (t+1)(1-t)e^{-t}.
9) f'(t) = 0 when t = -1 (boundary, minimum) or t = 1 (critical point in domain).
10) f''(t) check or sign analysis: f'(t) > 0 for -1 < t < 1, f'(t) < 0 for t > 1. So t=1 is maximum.
11) f(1) = (1+1)^2 * e^{-1} = 4/e.
12) Area_max = (1/2) * 4/e = 2/e.

ANSWER: (B) 2/e
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 120px;
  text-align: center;
  flex: 1;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1rem;
  font-weight: 600;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card h2 {
  color: #a78bfa;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 8px 0;
  user-select: none;
}

details summary:hover {
  color: #93c5fd;
}

.theory-content {
  padding: 16px;
  margin-top: 8px;
  background: rgba(96,165,250,0.05);
  border-radius: 8px;
  border: 1px solid rgba(96,165,250,0.1);
}

.theory-content li {
  margin-bottom: 12px;
  list-style: none;
  padding-left: 8px;
}

.theory-content li::before {
  content: "\25B8 ";
  color: #60a5fa;
}

.step-container {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  padding: 16px;
  border-radius: 10px;
  border-left: 3px solid transparent;
  transition: all 0.2s;
  cursor: pointer;
}

.step-container:hover, .step-container.active {
  background: rgba(96,165,250,0.05);
  border-left-color: #4ade80;
}

.step-badge {
  width: 32px;
  height: 32px;
  min-width: 32px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  color: #0f172a;
}

.step-content {
  flex: 1;
}

.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 10px 0;
  overflow-x: auto;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 6px;
}

.checkpoint {
  background: rgba(167,139,250,0.08);
  border: 1px solid rgba(167,139,250,0.2);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 15px 0;
}

.checkpoint summary {
  color: #a78bfa;
}

.checkpoint-answer {
  padding: 10px 0 2px 0;
  color: #4ade80;
  font-weight: 600;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.15), rgba(167,139,250,0.15));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 14px;
  padding: 24px;
  text-align: center;
  margin-bottom: 24px;
}

.insight-box h2 {
  color: #a78bfa;
  margin-bottom: 12px;
}

.final-answer-box {
  background: linear-gradient(135deg, rgba(52,211,153,0.1), rgba(74,222,128,0.1));
  border: 2px solid rgba(52,211,153,0.3);
  border-radius: 14px;
  padding: 28px;
  text-align: center;
  margin-bottom: 24px;
}

.final-answer-box h2 {
  color: #34d399;
  margin-bottom: 16px;
}

.final-answer-text {
  font-size: 1.5rem;
  color: #4ade80;
  font-weight: 700;
  margin: 16px 0;
}

.option-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 16px 0;
}

.option-card {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 12px 20px;
  text-align: center;
  min-width: 100px;
  transition: all 0.2s;
}

.option-card.correct {
  background: rgba(52,211,153,0.15);
  border-color: #34d399;
  box-shadow: 0 0 20px rgba(52,211,153,0.2);
}

.option-card .opt-label {
  font-size: 0.85rem;
  color: #94a3b8;
  margin-bottom: 4px;
}

.option-card.correct .opt-label {
  color: #4ade80;
  font-weight: 700;
}

.pitfall-box {
  border-left: 3px solid #e09468;
}

.pitfall-box h2 {
  color: #e09468;
}

.pitfall-box li {
  margin-bottom: 8px;
  list-style: none;
  padding-left: 8px;
}

.pitfall-box li::before {
  content: "\26A0 ";
  color: #e09468;
}

.challenge-box {
  border-left: 3px solid #f472b6;
}

.challenge-box h2 {
  color: #f472b6;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 12px;
  padding: 12px;
  background: rgba(148,163,184,0.08);
  border-radius: 8px;
}

canvas {
  display: block;
  margin: 0 auto;
  touch-action: none;
  border-radius: 10px;
  max-width: 100%;
}

.canvas-hint {
  color: #94a3b8;
  font-size: 0.85rem;
  text-align: center;
  margin-top: 8px;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

.highlight-green {
  color: #4ade80;
  font-weight: 600;
}

.highlight-blue {
  color: #60a5fa;
  font-weight: 600;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .container { padding: 10px; }
  .card { padding: 16px; }
  .step-container { flex-direction: column; gap: 8px; }
  .given-item { min-width: 80px; }
  .option-card { min-width: 80px; padding: 10px 14px; }
}
</style>
</head>
<body>

<div class="container">

  <!-- TITLE -->
  <h1>Maksimalna povrsina trougla tangentom na eksponencijalnu krivu</h1>
  <p class="subtitle">Analiza &mdash; primena izvoda, jednacina tangente, optimizacija povrsine trougla</p>

  <!-- PROBLEM STATEMENT -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Tangenta krive \( y = e^{-x} \) (za \( x > -1 \)) sece koordinatne ose u tackama \( A \) i \( B \). Ako je \( O \) koordinatni pocetak, maksimalna povrsina trougla \( OAB \) iznosi:</p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(\dfrac{1}{e}\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(\dfrac{2}{e}\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(\dfrac{3}{e}\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(e\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(2e\)</div>
      </div>
    </div>
  </div>

  <!-- PLAN -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>Za proizvoljnu tacku \( (t, e^{-t}) \) na krivoj napisacemo jednacinu tangente, odrediti preseke sa koordinatnim osama (tacke \( A \) i \( B \)), izraziti povrsinu trougla \( OAB \) kao funkciju parametra \( t \), a zatim naci njenu maksimalnu vrednost metodom prvog izvoda.</p>
  </div>

  <!-- THEORY REFRESHER -->
  <div class="card">
    <details>
      <summary>Kljucne formule i teoreme</summary>
      <div class="theory-content">
        <ul>
          <li><strong>Izvod eksponencijalne funkcije:</strong> \(\left(e^{-x}\right)' = -e^{-x}\)</li>
          <li><strong>Jednacina tangente:</strong> U tacki \((x_0, y_0)\) na krivoj \(y = f(x)\): \(y - y_0 = f'(x_0)(x - x_0)\)</li>
          <li><strong>Povrsina trougla sa temenom u koordinatnom pocetku:</strong> Ako su preseci sa osama \(A = (a, 0)\) i \(B = (0, b)\), tada je \(P = \frac{1}{2}|a| \cdot |b|\)</li>
          <li><strong>Pravilo proizvoda za izvode:</strong> \(\left(u \cdot v\right)' = u'v + uv'\)</li>
          <li><strong>Kriticne tacke:</strong> Funkcija \(f(t)\) ima ekstremum gde je \(f'(t) = 0\), uz promenu znaka izvoda</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- VISUAL AID -->
  <div class="card">
    <h2>Graficki prikaz</h2>
    <canvas id="mainCanvas" width="800" height="500"></canvas>
    <p class="canvas-hint">Prevucite klizac duz x-ose da vidite tangentnu liniju i trougao OAB za razlicite vrednosti parametra t</p>
  </div>

  <!-- STEP-BY-STEP SOLUTION -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container" id="step1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Jednacina tangente u tacki \((t,\, e^{-t})\)</h3>
        <p>Izvod funkcije \( y = e^{-x} \) je:</p>
        <div class="math-block">
          \[ y' = -e^{-x} \]
        </div>
        <p>U tacki \( (t, e^{-t}) \), nagib tangente je \( k = -e^{-t} \). Jednacina tangente:</p>
        <div class="math-block">
          \[ y - e^{-t} = -e^{-t}(x - t) \]
        </div>
        <p>Sredivanjem dobijamo:</p>
        <div class="math-block">
          \[ y = -e^{-t} \cdot x + (t + 1)\,e^{-t} \]
        </div>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container" id="step2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Preseci tangente sa koordinatnim osama</h3>
        <p><span class="highlight-blue">Presek sa x-osom</span> (tacka \( A \)): Stavimo \( y = 0 \):</p>
        <div class="math-block">
          \[ 0 = -e^{-t} \cdot x + (t+1)\,e^{-t} \;\;\Longrightarrow\;\; x = t + 1 \]
        </div>
        <p>Dakle, \( A = (t + 1,\; 0) \).</p>
        <p style="margin-top: 12px;"><span class="highlight-blue">Presek sa y-osom</span> (tacka \( B \)): Stavimo \( x = 0 \):</p>
        <div class="math-block">
          \[ y = (t + 1)\,e^{-t} \]
        </div>
        <p>Dakle, \( B = (0,\; (t+1)\,e^{-t}) \).</p>
        <p class="note">Posto je \( t > -1 \), vazi \( t + 1 > 0 \), pa su obe koordinate preseka pozitivne. Trougao OAB lezi u prvom kvadrantu.</p>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri se: Sta su koordinate preseka tangente za \( t = 1 \)?</summary>
      <div class="checkpoint-answer">
        Za \( t = 1 \): \( A = (2,\, 0) \) i \( B = (0,\, 2e^{-1}) = (0,\, 2/e) \).
      </div>
    </details>

    <!-- Step 3 -->
    <div class="step-container" id="step3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Povrsina trougla OAB</h3>
        <p>Trougao \( OAB \) ima temena \( O = (0,0) \), \( A = (t+1, 0) \) i \( B = (0, (t+1)e^{-t}) \). To je pravougli trougao sa katetama duz koordinatnih osa:</p>
        <div class="math-block">
          \[ P(t) = \frac{1}{2} \cdot |OA| \cdot |OB| = \frac{1}{2} \cdot (t+1) \cdot (t+1)\,e^{-t} = \frac{(t+1)^2\,e^{-t}}{2} \]
        </div>
        <p>Maksimizacija povrsine \( P(t) \) ekvivalentna je maksimizaciji funkcije:</p>
        <div class="math-block">
          \[ f(t) = (t+1)^2 \cdot e^{-t}, \quad t > -1 \]
        </div>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step-container" id="step4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Nalazenje izvoda funkcije \( f(t) \)</h3>
        <p>Primenimo pravilo proizvoda na \( f(t) = (t+1)^2 \cdot e^{-t} \):</p>
        <div class="math-block">
          \[ f'(t) = 2(t+1) \cdot e^{-t} + (t+1)^2 \cdot (-e^{-t}) \]
        </div>
        <p>Izvucemo zajednicki faktor \( (t+1)\,e^{-t} \):</p>
        <div class="math-block">
          \[ f'(t) = (t+1)\,e^{-t}\,\big[2 - (t+1)\big] = (t+1)(1-t)\,e^{-t} \]
        </div>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step-container" id="step5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Kriticne tacke i analiza znaka</h3>
        <p>Posto je \( e^{-t} > 0 \) uvek, jednacina \( f'(t) = 0 \) daje:</p>
        <div class="math-block">
          \[ (t+1)(1-t) = 0 \;\;\Longrightarrow\;\; t = -1 \;\;\text{ili}\;\; t = 1 \]
        </div>
        <p>Za \( t > -1 \), faktor \( (t+1) > 0 \), pa je znak od \( f'(t) \) odredjen faktorom \( (1 - t) \):</p>
        <div class="math-block">
          \[ \begin{cases} f'(t) > 0 & \text{za } -1 < t < 1 \;\; \text{(funkcija raste)} \\ f'(t) = 0 & \text{za } t = 1 \;\; \text{(stacionarna tacka)} \\ f'(t) < 0 & \text{za } t > 1 \;\; \text{(funkcija opada)} \end{cases} \]
        </div>
        <p>Funkcija \( f(t) \) raste na \( (-1, 1) \) i opada na \( (1, +\infty) \), pa je <span class="highlight-green">maksimum u tacki \( t = 1 \)</span>.</p>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri se: Koliko iznosi \( f(0) \) i \( f(2) \)?</summary>
      <div class="checkpoint-answer">
        \( f(0) = 1^2 \cdot e^0 = 1 \). \( f(2) = 3^2 \cdot e^{-2} = 9e^{-2} \approx 1{,}22 \). Obe vrednosti su manje od \( f(1) = 4/e \approx 1{,}47 \), sto potvrdjuje da je maksimum u \( t = 1 \).
      </div>
    </details>

    <!-- Step 6 -->
    <div class="step-container" id="step6">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Izracunavanje maksimalne povrsine</h3>
        <p>Za \( t = 1 \):</p>
        <div class="math-block">
          \[ f(1) = (1+1)^2 \cdot e^{-1} = 4 \cdot \frac{1}{e} = \frac{4}{e} \]
        </div>
        <p>Maksimalna povrsina trougla:</p>
        <div class="math-block">
          \[ P_{\max} = \frac{f(1)}{2} = \frac{1}{2} \cdot \frac{4}{e} = \frac{2}{e} \]
        </div>
        <p class="note">U tom slucaju tangenta dodiruje krivu u tacki \( (1,\, e^{-1}) \), sece x-osu u \( A = (2, 0) \) i y-osu u \( B = (0,\, 2/e) \).</p>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details class="checkpoint">
      <summary>Proveri se: Verifikacija povrsine za \( t = 1 \)</summary>
      <div class="checkpoint-answer">
        \( A = (2, 0) \), \( B = (0, 2/e) \). Povrsina = \(\frac{1}{2} \cdot 2 \cdot \frac{2}{e} = \frac{2}{e} \approx 0{,}736\). Tacno!
      </div>
    </details>

  </div>

  <!-- KEY INSIGHT -->
  <div class="insight-box">
    <h2>Kljucni uvid</h2>
    <p>Obe koordinate preseka tangente sa osama zavise od \( (t+1) \), pa se povrsina trougla svodi na proizvod \( (t+1)^2 \cdot e^{-t} \). Optimizacija ovog proizvoda &mdash; polinoma i eksponencijalne funkcije &mdash; je klasican zadatak gde eksponencijala "usporava" rast polinoma, stvarajuci jedinstveni maksimum.</p>
    <div class="math-block" style="font-size: 1.2rem; text-align: center;">
      \[ P_{\max} = \frac{(t+1)^2 e^{-t}}{2}\bigg|_{t=1} = \frac{4}{2e} = \frac{2}{e} \]
    </div>
  </div>

  <!-- FINAL ANSWER -->
  <div class="final-answer-box">
    <h2>Konacan odgovor</h2>
    <p>Maksimalna povrsina trougla \( OAB \) iznosi:</p>
    <div class="final-answer-text">
      (B) \(\dfrac{2}{e}\)
    </div>
    <div class="option-row">
      <div class="option-card">
        <div class="opt-label">(A)</div>
        <div>\(\dfrac{1}{e}\)</div>
      </div>
      <div class="option-card correct">
        <div class="opt-label">(B)</div>
        <div>\(\dfrac{2}{e}\)</div>
      </div>
      <div class="option-card">
        <div class="opt-label">(C)</div>
        <div>\(\dfrac{3}{e}\)</div>
      </div>
      <div class="option-card">
        <div class="opt-label">(D)</div>
        <div>\(e\)</div>
      </div>
      <div class="option-card">
        <div class="opt-label">(E)</div>
        <div>\(2e\)</div>
      </div>
    </div>
    <div class="verification-note">
      <strong>Verifikacija:</strong> Za \( t = 1 \), tangenta je \( y = -e^{-1}x + 2e^{-1} \). Preseci: \( A = (2, 0) \), \( B = (0, 2/e) \). Povrsina: \( \frac{1}{2} \cdot 2 \cdot \frac{2}{e} = \frac{2}{e} \approx 0{,}736 \). Provera izvoda u \( t = 1 \): \( f'(1) = 2 \cdot 0 \cdot e^{-1} = 0 \). Sve se poklapa.
    </div>
  </div>

  <!-- COMMON PITFALLS -->
  <div class="card pitfall-box">
    <h2>Ceste greske</h2>
    <ul>
      <li><strong>Greska pri pisanju jednacine tangente:</strong> Mnogi studenti zaborave da je nagib tangente na \( y = e^{-x} \) negativan (jer je \( y' = -e^{-x} \)), pa pogresno uzmu pozitivan nagib \( e^{-t} \) umesto \( -e^{-t} \).</li>
      <li><strong>Zaboravljanje faktora \( \frac{1}{2} \):</strong> Funkcija \( f(t) = (t+1)^2 e^{-t} \) daje \( f(1) = 4/e \), ali to NIJE povrsina trougla &mdash; treba podeliti sa 2, pa je \( P_{\max} = 2/e \), ne \( 4/e \).</li>
      <li><strong>Pogresno izvlacenje zajednickog faktora:</strong> Pri diferenciranju \( f(t) = (t+1)^2 e^{-t} \), vazan je pazljiv rad sa pravilom proizvoda. Greska u znaku moze dovesti do pogresne kriticne tacke.</li>
      <li><strong>Ignorisanje uslova \( t > -1 \):</strong> Tacka \( t = -1 \) nije deo domena (tangenta bi bila horizontalna i ne bi sekla obe ose u razlicitim tackama), ali to je granica, ne kriticna tacka za maksimum.</li>
    </ul>
  </div>

  <!-- OPTIONAL CHALLENGE -->
  <div class="card challenge-box">
    <h2>Dodatni izazov</h2>
    <p>Umesto krive \( y = e^{-x} \), posmatrajte krivu \( y = e^{-ax} \) za \( a > 0 \). Pokazite da maksimalna povrsina trougla \( OAB \) (formiranog tangentom, x-osom i y-osom) iznosi \( \dfrac{2}{ae} \), i da se ovaj maksimum uvek dostize u tacki \( t = \dfrac{1}{a} \).</p>
    <details>
      <summary>Nagovestaj</summary>
      <div style="padding: 10px 0;">
        Postupak je analogan: jednacina tangente u \( (t, e^{-at}) \) je \( y = -ae^{-at}(x - t) + e^{-at} \), preseci sa osama daju \( A = (t + 1/a,\; 0) \) i \( B = (0,\; (at+1)e^{-at}/1) \). Povrsina je \( P = \frac{(at+1)^2 e^{-at}}{2a} \). Smenom \( u = at \) svodi se na vec reseni problem.
      </div>
    </details>
  </div>

</div>

<!-- SCRIPTS -->
<script>
(() => {
  const mc = document.getElementById('mainCanvas');
  if (!mc) return;

  const ctx = mc.getContext('2d');
  const W = mc.width, H = mc.height;

  const marginL = 70, marginR = 40, marginT = 40, marginB = 60;
  const plotW = W - marginL - marginR;
  const plotH = H - marginT - marginB;

  // Plot range
  const xMin = -1.5, xMax = 5;
  const yMin = -0.5, yMax = 3.5;

  let paramT = 1.0; // default: optimal point
  let dragging = false;

  function xToCanvas(x) {
    return marginL + (x - xMin) / (xMax - xMin) * plotW;
  }
  function yToCanvas(y) {
    return marginT + (1 - (y - yMin) / (yMax - yMin)) * plotH;
  }
  function canvasToX(cx) {
    return xMin + (cx - marginL) / plotW * (xMax - xMin);
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Grid lines
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (let y = Math.ceil(yMin); y <= Math.floor(yMax); y++) {
      ctx.beginPath();
      ctx.moveTo(marginL, yToCanvas(y));
      ctx.lineTo(W - marginR, yToCanvas(y));
      ctx.stroke();
    }
    for (let x = Math.ceil(xMin); x <= Math.floor(xMax); x++) {
      ctx.beginPath();
      ctx.moveTo(xToCanvas(x), marginT);
      ctx.lineTo(xToCanvas(x), H - marginB);
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(marginL, yToCanvas(0));
    ctx.lineTo(W - marginR, yToCanvas(0));
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(xToCanvas(0), marginT);
    ctx.lineTo(xToCanvas(0), H - marginB);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    for (let x = Math.ceil(xMin); x <= Math.floor(xMax); x++) {
      ctx.fillText(x.toString(), xToCanvas(x), yToCanvas(0) + 18);
    }
    ctx.textAlign = 'right';
    for (let y = Math.ceil(yMin); y <= Math.floor(yMax); y++) {
      if (y !== 0) ctx.fillText(y.toString(), marginL - 8, yToCanvas(y) + 4);
    }
    ctx.fillText('x', W - marginR + 15, yToCanvas(0) + 5);
    ctx.textAlign = 'center';
    ctx.fillText('y', xToCanvas(0), marginT - 12);

    // Draw the curve y = e^{-x}
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    let started = false;
    const step = (xMax - xMin) / 500;
    for (let x = xMin; x <= xMax; x += step) {
      const yVal = Math.exp(-x);
      if (yVal > yMax + 1 || yVal < yMin - 1) {
        started = false;
        continue;
      }
      const px = xToCanvas(x);
      const py = yToCanvas(yVal);
      if (!started) {
        ctx.moveTo(px, py);
        started = true;
      } else {
        ctx.lineTo(px, py);
      }
    }
    ctx.stroke();

    // Curve label
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'italic 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('y = e', xToCanvas(-1.2), yToCanvas(Math.exp(1.2)) - 10);
    ctx.font = 'italic 10px Segoe UI, system-ui, sans-serif';
    ctx.fillText('-x', xToCanvas(-1.2) + 32, yToCanvas(Math.exp(1.2)) - 16);

    // Current tangent parameters
    const t = paramT;
    const yt = Math.exp(-t);
    const slope = -yt;
    const xIntercept = t + 1; // A = (t+1, 0)
    const yIntercept = (t + 1) * yt; // B = (0, (t+1)e^{-t})

    // Draw the triangle OAB (shaded)
    if (t > -1) {
      ctx.fillStyle = 'rgba(74, 222, 128, 0.12)';
      ctx.beginPath();
      ctx.moveTo(xToCanvas(0), yToCanvas(0));
      ctx.lineTo(xToCanvas(xIntercept), yToCanvas(0));
      ctx.lineTo(xToCanvas(0), yToCanvas(yIntercept));
      ctx.closePath();
      ctx.fill();

      // Triangle border
      ctx.strokeStyle = 'rgba(74, 222, 128, 0.5)';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(xToCanvas(0), yToCanvas(0));
      ctx.lineTo(xToCanvas(xIntercept), yToCanvas(0));
      ctx.lineTo(xToCanvas(0), yToCanvas(yIntercept));
      ctx.closePath();
      ctx.stroke();
    }

    // Draw tangent line (extended)
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2;
    const tangentXStart = Math.max(xMin, -1);
    const tangentXEnd = Math.min(xMax, xIntercept + 1);
    ctx.beginPath();
    ctx.moveTo(xToCanvas(tangentXStart), yToCanvas(yt + slope * (tangentXStart - t)));
    ctx.lineTo(xToCanvas(tangentXEnd), yToCanvas(yt + slope * (tangentXEnd - t)));
    ctx.stroke();

    // Point of tangency
    ctx.beginPath();
    ctx.arc(xToCanvas(t), yToCanvas(yt), 7, 0, 2 * Math.PI);
    ctx.fillStyle = '#a78bfa';
    ctx.fill();
    ctx.strokeStyle = '#e2e8f0';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Label point of tangency
    ctx.fillStyle = '#a78bfa';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('(' + t.toFixed(2) + ', ' + yt.toFixed(3) + ')', xToCanvas(t) + 12, yToCanvas(yt) - 10);

    // Point A
    if (xIntercept > xMin && xIntercept < xMax) {
      ctx.beginPath();
      ctx.arc(xToCanvas(xIntercept), yToCanvas(0), 6, 0, 2 * Math.PI);
      ctx.fillStyle = '#4ade80';
      ctx.fill();
      ctx.strokeStyle = '#e2e8f0';
      ctx.lineWidth = 2;
      ctx.stroke();

      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('A (' + xIntercept.toFixed(2) + ', 0)', xToCanvas(xIntercept), yToCanvas(0) + 28);
    }

    // Point B
    if (yIntercept > yMin && yIntercept < yMax) {
      ctx.beginPath();
      ctx.arc(xToCanvas(0), yToCanvas(yIntercept), 6, 0, 2 * Math.PI);
      ctx.fillStyle = '#4ade80';
      ctx.fill();
      ctx.strokeStyle = '#e2e8f0';
      ctx.lineWidth = 2;
      ctx.stroke();

      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'right';
      ctx.fillText('B (0, ' + yIntercept.toFixed(3) + ')', xToCanvas(0) - 10, yToCanvas(yIntercept) + 5);
    }

    // Point O
    ctx.beginPath();
    ctx.arc(xToCanvas(0), yToCanvas(0), 5, 0, 2 * Math.PI);
    ctx.fillStyle = '#e2e8f0';
    ctx.fill();
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText('O', xToCanvas(0) - 10, yToCanvas(0) + 18);

    // Area computation
    const area = 0.5 * Math.abs(xIntercept) * Math.abs(yIntercept);

    // Info box
    ctx.fillStyle = 'rgba(30, 41, 59, 0.92)';
    const boxX = W - marginR - 260;
    const boxY = marginT + 10;
    const boxW = 250;
    const boxH = 120;
    ctx.fillRect(boxX, boxY, boxW, boxH);
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.strokeRect(boxX, boxY, boxW, boxH);

    ctx.textAlign = 'left';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#e2e8f0';
    ctx.fillText('Parametar: t = ' + t.toFixed(3), boxX + 10, boxY + 22);
    ctx.fillStyle = '#a78bfa';
    ctx.fillText('Tangentna tacka: (' + t.toFixed(2) + ', ' + yt.toFixed(3) + ')', boxX + 10, boxY + 44);
    ctx.fillStyle = '#4ade80';
    ctx.fillText('A = (' + xIntercept.toFixed(2) + ', 0)', boxX + 10, boxY + 66);
    ctx.fillText('B = (0, ' + yIntercept.toFixed(3) + ')', boxX + 10, boxY + 84);

    const isMax = Math.abs(t - 1) < 0.03;
    ctx.fillStyle = isMax ? '#4ade80' : '#e2e8f0';
    ctx.font = (isMax ? 'bold ' : '') + '14px Segoe UI, system-ui, sans-serif';
    ctx.fillText('P(OAB) = ' + area.toFixed(4) + (isMax ? '  MAX!' : ''), boxX + 10, boxY + 108);

    // Slider bar
    const sliderBarY = H - 22;
    ctx.fillStyle = '#334155';
    ctx.fillRect(marginL, sliderBarY - 3, plotW, 6);

    // Map paramT to slider position
    const sliderNorm = (paramT - (-0.9)) / (4.5 - (-0.9));
    const knobX = marginL + sliderNorm * plotW;
    ctx.fillStyle = isMax ? '#4ade80' : '#a78bfa';
    ctx.beginPath();
    ctx.arc(knobX, sliderBarY, 9, 0, 2 * Math.PI);
    ctx.fill();
    ctx.strokeStyle = '#e2e8f0';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Slider label
    ctx.fillStyle = '#94a3b8';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('t = ' + t.toFixed(2), knobX, sliderBarY - 16);

    // Mark optimal t=1 on slider
    const optNorm = (1 - (-0.9)) / (4.5 - (-0.9));
    const optKnobX = marginL + optNorm * plotW;
    ctx.strokeStyle = 'rgba(74, 222, 128, 0.5)';
    ctx.lineWidth = 1;
    ctx.setLineDash([3, 3]);
    ctx.beginPath();
    ctx.moveTo(optKnobX, sliderBarY - 8);
    ctx.lineTo(optKnobX, sliderBarY + 8);
    ctx.stroke();
    ctx.setLineDash([]);

    // Legend
    ctx.textAlign = 'left';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';

    const legendX = marginL + 5;
    const legendY = marginT + 5;

    ctx.fillStyle = '#60a5fa';
    ctx.fillRect(legendX, legendY, 14, 3);
    ctx.fillText('y = e^(-x)', legendX + 20, legendY + 5);

    ctx.fillStyle = '#f472b6';
    ctx.fillRect(legendX, legendY + 16, 14, 3);
    ctx.fillText('Tangenta', legendX + 20, legendY + 21);

    ctx.fillStyle = 'rgba(74, 222, 128, 0.3)';
    ctx.fillRect(legendX, legendY + 32, 14, 12);
    ctx.fillStyle = '#4ade80';
    ctx.fillText('Trougao OAB', legendX + 20, legendY + 42);
  }

  function getEventX(e) {
    const rect = mc.getBoundingClientRect();
    const scaleX = W / rect.width;
    return (e.clientX - rect.left) * scaleX;
  }

  function getTouchX(e) {
    const rect = mc.getBoundingClientRect();
    const scaleX = W / rect.width;
    return (e.touches[0].clientX - rect.left) * scaleX;
  }

  function updateFromCanvasX(cx) {
    const norm = Math.max(0, Math.min(1, (cx - marginL) / plotW));
    paramT = -0.9 + norm * (4.5 - (-0.9));
    draw();
  }

  mc.addEventListener('mousedown', (e) => {
    dragging = true;
    updateFromCanvasX(getEventX(e));
  });
  mc.addEventListener('mousemove', (e) => {
    if (dragging) updateFromCanvasX(getEventX(e));
  });
  mc.addEventListener('mouseup', () => { dragging = false; });
  mc.addEventListener('mouseleave', () => { dragging = false; });

  mc.addEventListener('touchstart', (e) => {
    e.preventDefault();
    dragging = true;
    updateFromCanvasX(getTouchX(e));
  });
  mc.addEventListener('touchmove', (e) => {
    e.preventDefault();
    if (dragging) updateFromCanvasX(getTouchX(e));
  });
  mc.addEventListener('touchend', () => { dragging = false; });

  // Initial draw at optimal t=1
  paramT = 1.0;
  draw();

  // Step click highlighting
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.add('active');
    });
  });
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Maksimalna povrsina trougla formiranog tangentom na krivu y = e^(-x)",
  "subject": "math",
  "unit": "calculus",
  "topic_tags": ["izvod", "jednacina tangente", "optimizacija", "eksponencijalna funkcija", "povrsina trougla", "kriticne tacke"]
}
BRAINSPARK_META-->