<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ostar ugao romba preko dijagonala</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM:
If the diagonals of a rhombus satisfy d₁ = (2 − √3)·d₂, find the acute angle of the rhombus.

Options: (A) 15°  (B) 30°  (C) 45°  (D) 60°  (E) 22,5°

SOLUTION:

Key properties of a rhombus:
- Diagonals bisect each other at right angles (90°).
- Each diagonal bisects the angles at its endpoints.
- If α is the acute angle, then in the right triangle formed by half-diagonals:
    tan(α/2) = (d₁/2) / (d₂/2) = d₁/d₂

Given: d₁ = (2 − √3)·d₂
So: d₁/d₂ = 2 − √3

Therefore: tan(α/2) = 2 − √3

We need to find which angle has tangent = 2 − √3.

Known exact value: tan(15°) = 2 − √3
Derivation: tan(15°) = tan(45° − 30°) = (tan45° − tan30°)/(1 + tan45°·tan30°)
  = (1 − 1/√3)/(1 + 1/√3)
  = (√3 − 1)/(√3 + 1)
  = (√3 − 1)²/((√3 + 1)(√3 − 1))
  = (3 − 2√3 + 1)/(3 − 1)
  = (4 − 2√3)/2
  = 2 − √3 ✓

So α/2 = 15°, which gives α = 30°.

ANSWER: (B) 30°
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 28px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 22px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.35rem;
  margin-bottom: 14px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.1rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 90px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.05rem;
  font-weight: 600;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

.theory-card details {
  margin: 15px 0;
}

.theory-card summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  font-size: 1.05rem;
  padding: 6px 0;
}

.theory-card ul {
  margin: 12px 0 8px 20px;
  list-style: disc;
}

.theory-card li {
  margin-bottom: 8px;
  color: #e2e8f0;
}

.step-container {
  display: flex;
  gap: 16px;
  margin-bottom: 18px;
  padding: 14px;
  border-radius: 10px;
  cursor: pointer;
  transition: border-left 0.2s, background 0.2s;
  border-left: 3px solid transparent;
}

.step-container:hover, .step-container.active {
  border-left: 3px solid #4ade80;
  background: rgba(74, 222, 128, 0.04);
}

.step-badge {
  min-width: 28px;
  height: 28px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.85rem;
  flex-shrink: 0;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  font-size: 1.05rem;
  margin-bottom: 6px;
}

.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 12px 16px;
  margin: 10px 0;
  overflow-x: auto;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 6px;
}

.checkpoint {
  margin: 15px 0;
}

.checkpoint details {
  margin: 15px 0;
  background: rgba(167,139,250,0.08);
  border: 1px solid rgba(167,139,250,0.2);
  border-radius: 10px;
  padding: 12px 16px;
}

.checkpoint summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
}

.checkpoint .answer {
  margin-top: 8px;
  color: #4ade80;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.25);
  border-radius: 14px;
  padding: 22px;
  margin-bottom: 24px;
  text-align: center;
}

.insight-box h2 {
  color: #a78bfa;
  margin-bottom: 12px;
}

.insight-formula {
  font-size: 1.4rem;
  color: #e2e8f0;
  margin: 12px 0;
}

.final-answer-card {
  border: 2px solid #34d399;
  text-align: center;
}

.final-answer-card h2 {
  color: #34d399;
}

.final-answer-text {
  font-size: 1.6rem;
  color: #4ade80;
  font-weight: 700;
  margin: 14px 0;
}

.answer-options-final {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 18px 0;
}

.answer-option-final {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 12px 20px;
  min-width: 110px;
  text-align: center;
  transition: all 0.3s;
}

.answer-option-final.correct {
  background: rgba(52,211,153,0.15);
  border-color: #34d399;
  box-shadow: 0 0 20px rgba(52,211,153,0.2);
}

.answer-option-final .opt-label {
  font-weight: 700;
  font-size: 0.9rem;
  margin-bottom: 4px;
}

.answer-option-final.correct .opt-label {
  color: #4ade80;
}

.answer-option-final .opt-value {
  font-size: 1rem;
}

.answer-option-final.correct .opt-value {
  color: #4ade80;
  font-weight: 700;
}

.verification {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 14px;
  padding: 10px;
  background: rgba(148,163,184,0.06);
  border-radius: 8px;
}

.pitfalls-card {
  border-left: 3px solid #e09468;
}

.pitfalls-card h2 {
  color: #e09468;
}

.pitfalls-card ul {
  margin: 10px 0 4px 20px;
  list-style: disc;
}

.pitfalls-card li {
  margin-bottom: 8px;
}

.challenge-card {
  border-left: 3px solid #f472b6;
}

.challenge-card h2 {
  color: #f472b6;
}

.challenge-card details {
  margin: 15px 0;
}

.challenge-card summary {
  cursor: pointer;
  color: #f472b6;
  font-weight: 600;
}

.canvas-card {
  text-align: center;
}

.canvas-card canvas {
  border-radius: 10px;
  touch-action: none;
  max-width: 100%;
}

.canvas-hint {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-top: 8px;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .given-grid { gap: 8px; }
  .given-item { min-width: 70px; padding: 8px 12px; }
  .step-container { flex-direction: column; gap: 8px; }
  .answer-options-final { gap: 8px; }
  .answer-option-final { min-width: 80px; padding: 8px 12px; }
}
</style>
</head>
<body>

<div class="container">

  <!-- Title -->
  <h1>Ostar ugao romba preko dijagonala</h1>
  <p class="subtitle">Geometrija - Veza izmedju dijagonala romba i njegovih uglova pomocu trigonometrije</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Ako za dijagonale romba vazi jednakost</p>
    <div class="math-block">
      \[ d_1 = (2 - \sqrt{3}) \cdot d_2 \]
    </div>
    <p>tada je ostar ugao romba jednak:</p>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\( 15° \)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\( 30° \)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\( 45° \)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\( 60° \)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\( 22{,}5° \)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>Iskoristicemo osobine romba: dijagonale se seku pod pravim uglom i polove jedna drugu. To stvara cetiri pravih trougla u kojima su katete jednake polu-dijagonalama \( \frac{d_1}{2} \) i \( \frac{d_2}{2} \). Iz odnosa kateta u tim trouglovima, pomocu tangensa, odredujemo polovinu ostarog ugla, a zatim i sam ugao.</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card theory-card">
    <details>
      <summary>Kljucne formule i osobine</summary>
      <ul>
        <li><strong>Osobine dijagonala romba:</strong> Dijagonale romba se seku pod pravim uglom (90°) i polove jedna drugu. Svaka dijagonala polovi par naspramnih uglova romba.</li>
        <li><strong>Veza ugla i dijagonala:</strong> Ako je \( \alpha \) ostar ugao romba, tada dijagonale dele taj ugao na dva jednaka dela od po \( \frac{\alpha}{2} \). U pravouglom trouglu formiranom od polu-dijagonala vazi:
          \[ \tan\frac{\alpha}{2} = \frac{d_1 / 2}{d_2 / 2} = \frac{d_1}{d_2} \]
          gde je \( d_1 \) kraca dijagonala (naspram ostarog ugla).
        </li>
        <li><strong>Poznata vrednost:</strong>
          \[ \tan 15° = 2 - \sqrt{3} \approx 0{,}268 \]
          Ovo se dobija iz formule za tangens razlike: \( \tan(45° - 30°) \).
        </li>
        <li><strong>Formula za tangens razlike:</strong>
          \[ \tan(\alpha - \beta) = \frac{\tan\alpha - \tan\beta}{1 + \tan\alpha \cdot \tan\beta} \]
        </li>
      </ul>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card canvas-card">
    <h2>Geometrijska ilustracija</h2>
    <canvas id="mainCanvas" width="700" height="520"></canvas>
    <p class="canvas-hint">Romb sa dijagonalama i oznacenim uglovima. Kraca dijagonala \( d_1 \) je vertikalna, duza \( d_2 \) horizontalna. Pravougli trougao sa uglom \( \alpha/2 = 15° \) je istaknut.</p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container" id="step1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Postavljamo odnos dijagonala</h3>
        <p>Iz uslova zadatka imamo:</p>
        <div class="math-block">
          \[ d_1 = (2 - \sqrt{3}) \cdot d_2 \]
        </div>
        <p>Deljenjem obe strane sa \( d_2 \) (gde je \( d_2 > 0 \)) dobijamo:</p>
        <div class="math-block">
          \[ \frac{d_1}{d_2} = 2 - \sqrt{3} \]
        </div>
        <p class="note">Posto je \( 2 - \sqrt{3} \approx 0{,}268 < 1 \), zakljucujemo da je \( d_1 < d_2 \), tj. \( d_1 \) je kraca dijagonala.</p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container" id="step2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Povezujemo dijagonale sa uglom romba</h3>
        <p>Dijagonale romba se seku pod pravim uglom u tacki \( O \) i polove jedna drugu. Time nastaju cetiri sukladna pravougla trougla.</p>
        <p>U svakom od tih trouglova, katete su \( \frac{d_1}{2} \) i \( \frac{d_2}{2} \). Kraca dijagonala \( d_1 \) lezi naspram ostarog ugla \( \alpha \), a dijagonala ga deli na dva jednaka dela.</p>
        <p>Zato je u pravouglom trouglu ugao uz duzu dijagonalu jednak \( \frac{\alpha}{2} \), pa vazi:</p>
        <div class="math-block">
          \[ \tan\frac{\alpha}{2} = \frac{d_1/2}{d_2/2} = \frac{d_1}{d_2} \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <div class="checkpoint">
      <details>
        <summary>Proveri sebe: Zasto je naspramna kateta bas \( d_1/2 \)?</summary>
        <div class="answer">
          Ostar ugao \( \alpha \) romba je onaj manji ugao. Kraca dijagonala \( d_1 \) spaja temena sa ostrim uglovima, pa se njena polovina \( d_1/2 \) nalazi nasuprot uglu \( \alpha/2 \) u pravouglom trouglu. Duza dijagonala \( d_2 \) spaja temena sa tupim uglovima, pa je \( d_2/2 \) nalegla kateta.
        </div>
      </details>
    </div>

    <!-- Step 3 -->
    <div class="step-container" id="step3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Zamenjujemo poznati odnos</h3>
        <p>Uvrstimo odnos iz Koraka 1:</p>
        <div class="math-block">
          \[ \tan\frac{\alpha}{2} = 2 - \sqrt{3} \]
        </div>
        <p>Sada treba da odredimo za koji ugao vazi \( \tan\theta = 2 - \sqrt{3} \).</p>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step-container" id="step4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Dokazujemo da je \( \tan 15° = 2 - \sqrt{3} \)</h3>
        <p>Koristimo formulu za tangens razlike sa \( 15° = 45° - 30° \):</p>
        <div class="math-block">
          \[ \tan 15° = \tan(45° - 30°) = \frac{\tan 45° - \tan 30°}{1 + \tan 45° \cdot \tan 30°} \]
        </div>
        <p>Uvrstimo poznate vrednosti \( \tan 45° = 1 \) i \( \tan 30° = \frac{1}{\sqrt{3}} \):</p>
        <div class="math-block">
          \[ \tan 15° = \frac{1 - \dfrac{1}{\sqrt{3}}}{1 + \dfrac{1}{\sqrt{3}}} = \frac{\dfrac{\sqrt{3} - 1}{\sqrt{3}}}{\dfrac{\sqrt{3} + 1}{\sqrt{3}}} = \frac{\sqrt{3} - 1}{\sqrt{3} + 1} \]
        </div>
        <p>Racionalizujemo mnozeci i brojilac i imenilac sa \( (\sqrt{3} - 1) \):</p>
        <div class="math-block">
          \[ \frac{\sqrt{3} - 1}{\sqrt{3} + 1} \cdot \frac{\sqrt{3} - 1}{\sqrt{3} - 1} = \frac{(\sqrt{3} - 1)^2}{(\sqrt{3})^2 - 1^2} = \frac{3 - 2\sqrt{3} + 1}{3 - 1} = \frac{4 - 2\sqrt{3}}{2} = 2 - \sqrt{3} \]
        </div>
        <p>Dakle, potvrdili smo:</p>
        <div class="math-block">
          \[ \tan 15° = 2 - \sqrt{3} \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <div class="checkpoint">
      <details>
        <summary>Proveri sebe: Koliko priblizno iznosi \( 2 - \sqrt{3} \)?</summary>
        <div class="answer">
          \( \sqrt{3} \approx 1{,}732 \), pa je \( 2 - \sqrt{3} \approx 2 - 1{,}732 = 0{,}268 \). Zaista, \( \tan 15° \approx 0{,}268 \), sto se poklapa.
        </div>
      </details>
    </div>

    <!-- Step 5 -->
    <div class="step-container" id="step5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Odredjujemo ostar ugao romba</h3>
        <p>Iz Koraka 3 i 4 sledi:</p>
        <div class="math-block">
          \[ \tan\frac{\alpha}{2} = 2 - \sqrt{3} = \tan 15° \]
        </div>
        <p>Posto je \( \frac{\alpha}{2} \in (0°,\; 90°) \), funkcija tangens je injektivna na tom intervalu, pa jednoznacno dobijamo:</p>
        <div class="math-block">
          \[ \frac{\alpha}{2} = 15° \]
        </div>
        <p>Mnozimo obe strane sa 2:</p>
        <div class="math-block">
          \[ \boxed{\alpha = 30°} \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <div class="checkpoint">
      <details>
        <summary>Proveri sebe: Da li je dobijeni ugao zaista ostar?</summary>
        <div class="answer">
          Da, \( 30° < 90° \), dakle \( \alpha = 30° \) jeste ostar ugao. Tupi ugao romba bi bio \( 180° - 30° = 150° \). Zbir ostarog i tupog ugla romba je uvek \( 180° \), sto je zadovoljeno.
        </div>
      </details>
    </div>

  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Kljucni uvid</h2>
    <p>Odnos dijagonala romba direktno odredjuje tangens polovine ugla. Cim prepoznamo da je \( 2 - \sqrt{3} = \tan 15° \), odmah znamo da je pola ugla 15°, a ceo ostar ugao 30°.</p>
    <div class="insight-formula">
      \[ \tan\frac{\alpha}{2} = \frac{d_1}{d_2} = 2 - \sqrt{3} = \tan 15° \quad \Rightarrow \quad \alpha = 30° \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer-card">
    <h2>Konacan odgovor</h2>
    <div class="final-answer-text">(B) \( 30° \)</div>

    <div class="answer-options-final">
      <div class="answer-option-final">
        <div class="opt-label">(A)</div>
        <div class="opt-value">\( 15° \)</div>
      </div>
      <div class="answer-option-final correct">
        <div class="opt-label">(B)</div>
        <div class="opt-value">\( 30° \)</div>
      </div>
      <div class="answer-option-final">
        <div class="opt-label">(C)</div>
        <div class="opt-value">\( 45° \)</div>
      </div>
      <div class="answer-option-final">
        <div class="opt-label">(D)</div>
        <div class="opt-value">\( 60° \)</div>
      </div>
      <div class="answer-option-final">
        <div class="opt-label">(E)</div>
        <div class="opt-value">\( 22{,}5° \)</div>
      </div>
    </div>

    <div class="verification">
      <strong>Verifikacija:</strong> Za romb sa ostrim uglom \( 30° \), polu-dijagonale stoje u odnosu \( \tan 15° = 2 - \sqrt{3} \), sto daje \( d_1/d_2 = 2 - \sqrt{3} \), tj. \( d_1 = (2 - \sqrt{3}) \cdot d_2 \). Ovo se poklapa sa uslovima zadatka.
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfalls-card">
    <h2>Ceste greske</h2>
    <ul>
      <li><strong>Zamena \( \alpha \) i \( \alpha/2 \):</strong> Cesta greska je zakljuciti da je ugao 15° (odgovor A) jer \( \tan 15° = 2 - \sqrt{3} \). Medjutim, 15° je polovina ostarog ugla, ne ceo ugao. Dijagonala polovi ugao romba, pa je ostar ugao \( 2 \times 15° = 30° \).</li>
      <li><strong>Pogresna identifikacija kateta:</strong> Treba paziti koja dijagonala je naspramna, a koja nalegla na ugao \( \alpha/2 \). Kraca dijagonala \( d_1 \) je naspramna kateta za ugao \( \alpha/2 \) u pravouglom trouglu.</li>
      <li><strong>Nepoznavanje tacnih vrednosti:</strong> Ako se ne zna napamet da je \( \tan 15° = 2 - \sqrt{3} \), moze se koristiti formula za tangens razlike \( \tan(45° - 30°) \) da se to izvede.</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Ako za dijagonale romba vazi \( d_1 = (\sqrt{3} - 1) \cdot d_2 \cdot \frac{1}{\sqrt{3}+1} \), koliki je ostar ugao romba? Pojednostavi izraz za odnos dijagonala racionalizacijom.</p>
    <details>
      <summary>Pogledaj resenje</summary>
      <p style="margin-top: 8px;">Racionalizujemo: \( \frac{\sqrt{3}-1}{\sqrt{3}+1} = \frac{(\sqrt{3}-1)^2}{2} = \frac{4-2\sqrt{3}}{2} = 2-\sqrt{3} \). To je isti odnos kao u nasem zadatku, dakle ostar ugao je ponovo \( 30° \). Ovo pokazuje da se isti problem moze zadati u razlicitim oblicima - kljuc je svesti na prepoznatljivu vrednost tangensa.</p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('mainCanvas');
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  function draw() {
    // Clear
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Rhombus parameters
    // Let d2 = 300 (horizontal, longer), d1 = (2 - sqrt(3)) * 300 (vertical, shorter)
    const d2 = 300;
    const d1 = (2 - Math.sqrt(3)) * d2; // ~80.4

    const cx = W / 2;
    const cy = H / 2 - 10;

    // Rhombus vertices: A(left), B(top), C(right), D(bottom)
    // d2 is horizontal (A-C), d1 is vertical (B-D)
    const A = { x: cx - d2 / 2, y: cy };   // left
    const C = { x: cx + d2 / 2, y: cy };   // right
    const B = { x: cx, y: cy - d1 / 2 };   // top
    const D = { x: cx, y: cy + d1 / 2 };   // bottom

    // Center O
    const O = { x: cx, y: cy };

    // Draw filled rhombus with subtle gradient
    const grad = ctx.createLinearGradient(A.x, B.y, C.x, D.y);
    grad.addColorStop(0, 'rgba(96, 165, 250, 0.06)');
    grad.addColorStop(0.5, 'rgba(167, 139, 250, 0.08)');
    grad.addColorStop(1, 'rgba(96, 165, 250, 0.06)');
    ctx.fillStyle = grad;
    ctx.beginPath();
    ctx.moveTo(A.x, A.y);
    ctx.lineTo(B.x, B.y);
    ctx.lineTo(C.x, C.y);
    ctx.lineTo(D.x, D.y);
    ctx.closePath();
    ctx.fill();

    // Draw rhombus edges
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(A.x, A.y);
    ctx.lineTo(B.x, B.y);
    ctx.lineTo(C.x, C.y);
    ctx.lineTo(D.x, D.y);
    ctx.closePath();
    ctx.stroke();

    // Draw diagonals (dashed)
    ctx.setLineDash([8, 5]);
    ctx.strokeStyle = '#94a3b8';
    ctx.lineWidth = 1.5;
    // Horizontal diagonal d2
    ctx.beginPath();
    ctx.moveTo(A.x, A.y);
    ctx.lineTo(C.x, C.y);
    ctx.stroke();
    // Vertical diagonal d1
    ctx.beginPath();
    ctx.moveTo(B.x, B.y);
    ctx.lineTo(D.x, D.y);
    ctx.stroke();
    ctx.setLineDash([]);

    // Highlight the right triangle: O, A, B (upper-left quadrant)
    ctx.fillStyle = 'rgba(74, 222, 128, 0.10)';
    ctx.beginPath();
    ctx.moveTo(O.x, O.y);
    ctx.lineTo(A.x, A.y);
    ctx.lineTo(B.x, B.y);
    ctx.closePath();
    ctx.fill();

    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(O.x, O.y);
    ctx.lineTo(A.x, A.y);
    ctx.lineTo(B.x, B.y);
    ctx.closePath();
    ctx.stroke();

    // Right angle marker at O (in the upper-left triangle)
    const rSize = 14;
    ctx.strokeStyle = '#94a3b8';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(O.x - rSize, O.y);
    ctx.lineTo(O.x - rSize, O.y - rSize);
    ctx.lineTo(O.x, O.y - rSize);
    ctx.stroke();

    // Draw the angle arc for alpha/2 at vertex A
    const angleAtA = Math.atan2(B.y - A.y, B.x - A.x); // angle from A to B
    const angleAtA2 = Math.atan2(O.y - A.y, O.x - A.x); // angle from A to O (=0 since horizontal)
    const arcRadius = 45;
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.arc(A.x, A.y, arcRadius, angleAtA, angleAtA2, false);
    ctx.stroke();

    // Label alpha/2 at A
    const midAngle = (angleAtA + angleAtA2) / 2;
    const labelR = arcRadius + 18;
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText('\u03B1/2', A.x + labelR * Math.cos(midAngle), A.y + labelR * Math.sin(midAngle));

    // Draw the full angle arc for alpha at vertex A (between AB and AD)
    const angleToD = Math.atan2(D.y - A.y, D.x - A.x); // angle from A to D
    const arcRadiusAlpha = 60;
    ctx.strokeStyle = 'rgba(244, 114, 182, 0.4)';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([4, 3]);
    ctx.beginPath();
    ctx.arc(A.x, A.y, arcRadiusAlpha, angleAtA, angleToD, false);
    ctx.stroke();
    ctx.setLineDash([]);

    // Label alpha at A
    const midAngleAlpha = (angleAtA + angleToD) / 2;
    const labelRAlpha = arcRadiusAlpha + 18;
    ctx.fillStyle = 'rgba(244, 114, 182, 0.7)';
    ctx.font = '14px Segoe UI, system-ui, sans-serif';
    ctx.fillText('\u03B1 = 30\u00B0', A.x + labelRAlpha * Math.cos(midAngleAlpha), A.y + labelRAlpha * Math.sin(midAngleAlpha));

    // Label vertices
    ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';

    ctx.fillStyle = '#60a5fa';
    ctx.fillText('A', A.x - 20, A.y);
    ctx.fillText('C', C.x + 20, C.y);
    ctx.fillText('B', B.x, B.y - 18);
    ctx.fillText('D', D.x, D.y + 18);

    // Label center O
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('O', O.x + 14, O.y + 16);

    // Label d2/2 (horizontal, from O to A)
    ctx.fillStyle = '#60a5fa';
    ctx.font = '14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('d\u2082/2', (O.x + A.x) / 2, O.y + 22);

    // Label d1/2 (vertical, from O to B)
    ctx.save();
    ctx.translate(O.x - 20, (O.y + B.y) / 2);
    ctx.rotate(-Math.PI / 2);
    ctx.fillText('d\u2081/2', 0, 0);
    ctx.restore();

    // Label full diagonals
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('d\u2082 (duza dijagonala)', cx, cy + d1 / 2 + 40);
    ctx.save();
    ctx.translate(cx + d2 / 2 + 35, cy);
    ctx.rotate(-Math.PI / 2);
    ctx.fillText('d\u2081 (kraca)', 0, 0);
    ctx.restore();

    // Draw vertex dots
    const vertices = [A, B, C, D, O];
    const vertexColors = ['#60a5fa', '#60a5fa', '#60a5fa', '#60a5fa', '#94a3b8'];
    vertices.forEach((v, i) => {
      ctx.fillStyle = vertexColors[i];
      ctx.beginPath();
      ctx.arc(v.x, v.y, 4, 0, Math.PI * 2);
      ctx.fill();
    });

    // Highlight right triangle annotation
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Pravougli trougao OAB', 16, 28);

    // Formula box in bottom-left
    ctx.fillStyle = 'rgba(30, 41, 59, 0.85)';
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    const boxX = 16;
    const boxY = H - 105;
    const boxW = 290;
    const boxH = 90;
    ctx.beginPath();
    ctx.roundRect(boxX, boxY, boxW, boxH, 8);
    ctx.fill();
    ctx.stroke();

    ctx.fillStyle = '#e2e8f0';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('tan(\u03B1/2) = (d\u2081/2) / (d\u2082/2) = d\u2081/d\u2082', boxX + 12, boxY + 22);
    ctx.fillText('tan(\u03B1/2) = 2 \u2212 \u221A3 = tan(15\u00B0)', boxX + 12, boxY + 44);
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.fillText('\u03B1/2 = 15\u00B0  \u21D2  \u03B1 = 30\u00B0', boxX + 12, boxY + 72);

    // Side labels - mark equal sides with tick marks
    const sides = [
      [A, B], [B, C], [C, D], [D, A]
    ];
    sides.forEach(([p1, p2]) => {
      const mx = (p1.x + p2.x) / 2;
      const my = (p1.y + p2.y) / 2;
      const dx = p2.x - p1.x;
      const dy = p2.y - p1.y;
      const len = Math.sqrt(dx * dx + dy * dy);
      // Perpendicular direction for tick mark
      const px = -dy / len;
      const py = dx / len;
      const tickLen = 6;
      ctx.strokeStyle = '#60a5fa';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(mx + px * tickLen, my + py * tickLen);
      ctx.lineTo(mx - px * tickLen, my - py * tickLen);
      ctx.stroke();
    });
  }

  draw();

  // Touch/mouse interaction - highlight triangle on hover
  let highlighted = false;

  function handleInteraction(clientX, clientY) {
    const rect = canvas.getBoundingClientRect();
    const scaleRatio = canvas.width / rect.width;
    const mx = (clientX - rect.left) * scaleRatio;
    const my = (clientY - rect.top) * scaleRatio;

    const d2 = 300;
    const d1 = (2 - Math.sqrt(3)) * d2;
    const cxc = W / 2;
    const cyc = H / 2 - 10;

    // Check if mouse is in the upper-left triangle region
    const inTriangle = mx >= cxc - d2 / 2 && mx <= cxc && my >= cyc - d1 / 2 && my <= cyc;

    if (inTriangle !== highlighted) {
      highlighted = inTriangle;
      draw();
      if (highlighted) {
        // Extra highlight on the triangle
        const O = { x: cxc, y: cyc };
        const A = { x: cxc - d2 / 2, y: cyc };
        const B = { x: cxc, y: cyc - d1 / 2 };

        ctx.fillStyle = 'rgba(74, 222, 128, 0.18)';
        ctx.beginPath();
        ctx.moveTo(O.x, O.y);
        ctx.lineTo(A.x, A.y);
        ctx.lineTo(B.x, B.y);
        ctx.closePath();
        ctx.fill();

        ctx.strokeStyle = '#4ade80';
        ctx.lineWidth = 3;
        ctx.beginPath();
        ctx.moveTo(O.x, O.y);
        ctx.lineTo(A.x, A.y);
        ctx.lineTo(B.x, B.y);
        ctx.closePath();
        ctx.stroke();
      }
    }
  }

  canvas.addEventListener('mousemove', function(e) {
    handleInteraction(e.clientX, e.clientY);
  });

  canvas.addEventListener('touchmove', function(e) {
    e.preventDefault();
    if (e.touches.length > 0) {
      handleInteraction(e.touches[0].clientX, e.touches[0].clientY);
    }
  }, { passive: false });

  canvas.addEventListener('mouseleave', function() {
    if (highlighted) {
      highlighted = false;
      draw();
    }
  });

  // Step click interactivity
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(step => {
    step.addEventListener('click', function() {
      steps.forEach(s => s.classList.remove('active'));
      this.classList.add('active');
    });
  });
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Ostar ugao romba preko dijagonala",
  "subject": "math",
  "unit": "geometrija",
  "topic_tags": ["romb", "dijagonale", "trigonometrija", "tangens", "uglovi", "planimetrija"]
}
BRAINSPARK_META-->