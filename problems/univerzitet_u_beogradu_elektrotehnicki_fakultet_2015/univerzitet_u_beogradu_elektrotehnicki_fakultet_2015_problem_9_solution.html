<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Broj realnih resenja jednacine f(x) + f(f(x)) = x</title>
<script type="text/info" id="logic-scratchpad">
Problem: f(x) = |x| + a, a > 0. Naci broj realnih resenja jednacine f(x) + f(f(x)) = x.

Korak 1: Odredimo f(f(x)).
  f(x) = |x| + a
  Posto je a > 0, imamo f(x) = |x| + a >= a > 0 za svako realno x.
  Dakle f(x) > 0 za svako x, pa je |f(x)| = f(x).
  Zato: f(f(x)) = |f(x)| + a = f(x) + a = |x| + a + a = |x| + 2a.

Korak 2: Napisimo jednacinu.
  f(x) + f(f(x)) = x
  (|x| + a) + (|x| + 2a) = x
  2|x| + 3a = x

Korak 3: Razmatramo dva slucaja.

Slucaj 1: x >= 0
  |x| = x, pa: 2x + 3a = x => x = -3a
  Ali a > 0, pa je -3a < 0. To je kontradikcija sa pretpostavkom x >= 0.
  Nema resenja u ovom slucaju.

Slucaj 2: x < 0
  |x| = -x, pa: -2x + 3a = x => 3a = 3x => x = a
  Ali a > 0, pa je x = a > 0. To je kontradikcija sa pretpostavkom x < 0.
  Nema resenja ni u ovom slucaju.

Zakljucak: Jednacina nema realnih resenja. Broj resenja je 0.

GEOMETRIJSKA INTERPRETACIJA:
- Leva strana: g(x) = 2|x| + 3a je V-oblik sa temenom u (0, 3a), nagibima +-2.
- Desna strana: y = x je prava sa nagibom 1.
- Za x >= 0: g(x) = 2x + 3a > x za svako x >= 0 (jer x + 3a > 0).
- Za x < 0: g(x) = -2x + 3a, jednacimo sa x: -2x + 3a = x => x = a > 0. Kontradikcija.
- Grafici se nikada ne seku.

Odgovor: (B) 0
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  font-size: 1.05rem;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
  transition: transform 0.2s, border-color 0.2s;
}

.given-item:hover {
  transform: translateY(-2px);
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card h2 {
  color: #a78bfa;
}

details {
  margin: 15px 0;
  background: rgba(167,139,250,0.06);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 1.05rem;
  user-select: none;
}

details summary:hover {
  color: #c4b5fd;
}

details[open] summary {
  margin-bottom: 12px;
}

details ul {
  list-style: none;
  padding-left: 0;
}

details li {
  padding: 6px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #e2e8f0;
}

details li:last-child {
  border-bottom: none;
}

.canvas-card {
  text-align: center;
}

.canvas-card canvas {
  width: 100%;
  max-width: 700px;
  border-radius: 10px;
  border: 1px solid #334155;
  touch-action: none;
}

.step {
  display: flex;
  gap: 16px;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 14px;
  border-left: 3px solid transparent;
  transition: border-color 0.2s, background 0.2s;
  cursor: pointer;
}

.step:hover, .step.active {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}

.step-badge {
  flex-shrink: 0;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.95rem;
}

.step-content {
  flex: 1;
}

.step-content p {
  color: #94a3b8;
  margin-top: 6px;
}

.checkpoint {
  background: rgba(52,211,153,0.06);
  border: 1px solid rgba(52,211,153,0.18);
}

.checkpoint summary {
  color: #34d399;
}

.insight-card {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid rgba(167,139,250,0.25);
}

.insight-card h2 {
  color: #a78bfa;
}

.final-answer {
  border: 2px solid rgba(74,222,128,0.3);
  background: linear-gradient(135deg, rgba(74,222,128,0.06), rgba(52,211,153,0.04));
}

.final-answer h2 {
  color: #4ade80;
}

.answer-big {
  font-size: 1.6rem;
  font-weight: 700;
  color: #4ade80;
  text-align: center;
  margin: 20px 0;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 16px 0;
}

.option-box {
  padding: 10px 20px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: #1e293b;
  text-align: center;
  min-width: 90px;
  transition: transform 0.2s;
}

.option-box.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.1);
  transform: scale(1.05);
}

.option-box .opt-label {
  color: #94a3b8;
  font-size: 0.85rem;
}

.option-box .opt-value {
  font-size: 1.15rem;
  font-weight: 600;
  color: #e2e8f0;
}

.option-box.correct .opt-value {
  color: #4ade80;
}

.verification {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 14px;
  padding-top: 14px;
  border-top: 1px solid #334155;
}

.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 14px;
  margin-bottom: 8px;
  background: rgba(224,148,104,0.06);
  border-left: 3px solid #e09468;
  border-radius: 0 8px 8px 0;
  color: #e2e8f0;
}

.pitfall-list li strong {
  color: #e09468;
}

.challenge-card {
  border: 1px solid rgba(244,114,182,0.2);
  background: rgba(244,114,182,0.04);
}

.challenge-card h2 {
  color: #f472b6;
}

.drag-hint {
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

.contradiction {
  color: #f87171;
  font-weight: 600;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step { flex-direction: column; gap: 10px; }
  .given-grid { flex-direction: column; }
  .options-row { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Broj realnih resenja jednacine sa apsolutnom vrednoscu</h1>
  <p class="subtitle">Kompozicija funkcije apsolutne vrednosti, analiza po slucajevima, graficka interpretacija</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Broj realnih resenja jednacine \(f(x) + f(f(x)) = x\), gde je \(f(x) = |x| + a\), \(a > 0\), jednak je:</p>

    <div class="given-grid" style="margin-bottom: 18px;">
      <div class="given-item">
        <div class="label">Funkcija</div>
        <div class="value">\(f(x) = |x| + a\)</div>
      </div>
      <div class="given-item">
        <div class="label">Parametar</div>
        <div class="value">\(a > 0\)</div>
      </div>
      <div class="given-item">
        <div class="label">Jednacina</div>
        <div class="value">\(f(x) + f(f(x)) = x\)</div>
      </div>
      <div class="given-item">
        <div class="label">Trazimo</div>
        <div class="value">Broj realnih resenja</div>
      </div>
    </div>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(1\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(0\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(2\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(3\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(4\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>Kljucno zapazanje je da \(f(x) = |x| + a \geq a > 0\) za svako realno \(x\), sto znaci da je <span class="highlight">vrednost funkcije uvek strogo pozitivna</span>. To drasticno pojednostavljuje izracunavanje \(f(f(x))\). Nakon toga, jednacina se svodi na \(2|x| + 3a = x\), koju analiziramo po slucajevima (\(x \geq 0\) i \(x < 0\)), i u oba slucaja dobijamo <span class="highlight">kontradikciju</span>.</p>
  </div>

  <!-- Theory Refresher -->
  <details>
    <summary>Kljucne formule i teoreme</summary>
    <ul>
      <li><strong>Apsolutna vrednost:</strong> \(|x| = x\) za \(x \geq 0\) i \(|x| = -x\) za \(x < 0\).</li>
      <li><strong>Donja granica:</strong> Posto je \(|x| \geq 0\) i \(a > 0\), vazi \(f(x) = |x| + a \geq a > 0\) za svako \(x \in \mathbb{R}\).</li>
      <li><strong>Kompozicija funkcija:</strong> \(f(f(x))\) znaci da se rezultat \(f(x)\) ponovo ubaci u funkciju \(f\). Ako je \(f(x) > 0\), tada \(|f(x)| = f(x)\).</li>
      <li><strong>Analiza po slucajevima:</strong> Jednacine sa apsolutnom vrednoscu resavamo tako sto razmatramo oblasti gde je izraz pod apsolutnom vrednoscu nenegativan, odnosno negativan.</li>
      <li><strong>Graficka interpretacija:</strong> Broj resenja jednacine \(g(x) = h(x)\) odgovara broju presecnih tacaka grafika \(y = g(x)\) i \(y = h(x)\).</li>
    </ul>
  </details>

  <!-- Canvas Visualization -->
  <div class="card canvas-card">
    <h2>Vizuelni prikaz</h2>
    <p style="color:#94a3b8; margin-bottom: 14px;">Grafici funkcija \(y = 2|x| + 3a\) (leva strana jednacine) i \(y = x\) (desna strana). Pomerajte klizac da menjate \(a\).</p>
    <canvas id="graph-canvas" width="700" height="520"></canvas>
    <p class="drag-hint">Interaktivno: prevucite klizac za parametar \(a\) i uverite se da se grafici nikada ne seku</p>
  </div>

  <!-- Step-by-step solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <div class="step" id="step-1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Odredimo donju granicu funkcije \(f\)</h3>
        <p>Posto je \(|x| \geq 0\) za svako realno \(x\), i \(a > 0\), imamo:</p>
        <div class="math-box">
          \[ f(x) = |x| + a \geq 0 + a = a > 0 \]
        </div>
        <p>Dakle, <strong>vrednost funkcije \(f\) je uvek strogo pozitivna</strong>, bez obzira na ulaz. Ovo je kljucna cinjenica za nastavak.</p>
      </div>
    </div>

    <div class="step" id="step-2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Izracunajmo \(f(f(x))\)</h3>
        <p>Posto smo utvrdili da je \(f(x) > 0\) za svako \(x\), vazi \(|f(x)| = f(x)\). Zato:</p>
        <div class="math-box">
          \[ f(f(x)) = |f(x)| + a = f(x) + a = (|x| + a) + a = |x| + 2a \]
        </div>
        <p>Kompozicija se lepo pojednostavila jer se apsolutna vrednost "skida" kada je argument pozitivan.</p>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Zasto je |f(x)| = f(x)?</summary>
      <p>Apsolutna vrednost pozitivnog broja jednaka je samom tom broju. Posto je \(f(x) \geq a > 0\), imamo \(|f(x)| = f(x)\). Ne postoji vrednost \(x\) za koju bi \(f(x)\) bilo negativno ili nula.</p>
    </details>

    <div class="step" id="step-3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Sastavimo jednacinu</h3>
        <p>Ubacimo izracunate vrednosti u polaznu jednacinu \(f(x) + f(f(x)) = x\):</p>
        <div class="math-box">
          \[ \underbrace{(|x| + a)}_{f(x)} + \underbrace{(|x| + 2a)}_{f(f(x))} = x \]
        </div>
        <p>Pojednostavimo levu stranu:</p>
        <div class="math-box">
          \[ 2|x| + 3a = x \]
        </div>
        <p>Sada imamo <span class="highlight">jednostavnu jednacinu sa apsolutnom vrednoscu</span> koju resavamo analizom po slucajevima.</p>
      </div>
    </div>

    <div class="step" id="step-4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Slucaj 1: \(x \geq 0\)</h3>
        <p>Kada je \(x \geq 0\), vazi \(|x| = x\), pa jednacina postaje:</p>
        <div class="math-box">
          \[ 2x + 3a = x \]
        </div>
        <p>Oduzimanjem \(x\) sa obe strane:</p>
        <div class="math-box">
          \[ x + 3a = 0 \;\Longrightarrow\; x = -3a \]
        </div>
        <p>Ali \(a > 0\), pa je \(-3a < 0\). To je <span class="contradiction">kontradikcija</span> sa pretpostavkom \(x \geq 0\).</p>
        <p><strong>Nema resenja u ovom slucaju.</strong></p>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Zasto dobijamo kontradikciju?</summary>
      <p>Za \(x \geq 0\), leva strana je \(2x + 3a \geq 3a > 0\), dok desna strana je \(x \geq 0\). Razlika je \(2x + 3a - x = x + 3a > 0\), dakle leva strana je <em>uvek strogo veca</em> od desne. Graficki: prava \(y = 2x + 3a\) ima nagib 2 i \(y\)-odsecak \(3a > 0\), pa je uvek iznad prave \(y = x\) za \(x \geq 0\).</p>
    </details>

    <div class="step" id="step-5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Slucaj 2: \(x < 0\)</h3>
        <p>Kada je \(x < 0\), vazi \(|x| = -x\), pa jednacina postaje:</p>
        <div class="math-box">
          \[ 2(-x) + 3a = x \;\Longrightarrow\; -2x + 3a = x \]
        </div>
        <p>Prebacimo \(-2x\) na desnu stranu:</p>
        <div class="math-box">
          \[ 3a = x + 2x = 3x \;\Longrightarrow\; x = a \]
        </div>
        <p>Ali \(a > 0\), pa je \(x = a > 0\). To je <span class="contradiction">kontradikcija</span> sa pretpostavkom \(x < 0\).</p>
        <p><strong>Nema resenja ni u ovom slucaju.</strong></p>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Zasto i ovde dolazi do kontradikcije?</summary>
      <p>Za \(x < 0\), leva strana je \(-2x + 3a\). Posto je \(x < 0\), imamo \(-2x > 0\), pa je leva strana \(-2x + 3a > 3a > 0 > x\). Dakle, leva strana je strogo pozitivna, a desna je negativna &mdash; ne mogu biti jednake.</p>
    </details>

    <div class="step" id="step-6">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Zakljucak</h3>
        <p>U oba moguca slucaja (\(x \geq 0\) i \(x < 0\)) dobili smo kontradikciju. Jednacina \(f(x) + f(f(x)) = x\) <strong>nema realnih resenja</strong> ni za jednu vrednost parametra \(a > 0\).</p>
        <div class="math-box">
          \[ \text{Broj realnih resenja} = \boxed{0} \]
        </div>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="card insight-card">
    <h2>Kljucni uvid</h2>
    <p>Sustina ovog zadatka je u tome sto funkcija \(f(x) = |x| + a\) sa \(a > 0\) <span class="highlight">uvek uvecava apsolutnu vrednost svog argumenta</span>. Posto je \(f(x) \geq a > 0\), kompozicija \(f(f(x))\) dodatno uvecava vrednost. Zbir \(f(x) + f(f(x)) = 2|x| + 3a\) je uvek strogo pozitivan i raste sa obe strane od nule nagibom \(\pm 2\), dok prava \(y = x\) ima nagib samo \(1\). Za negativne \(x\), leva strana je pozitivna, a desna negativna. Za pozitivne \(x\), leva strana raste brze i startuje iznad. Grafici se <span class="highlight">nikada ne seku</span>.</p>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer">
    <h2>Konacan odgovor</h2>
    <div class="answer-big">Broj realnih resenja: \(0\)</div>

    <div class="options-row">
      <div class="option-box">
        <div class="opt-label">(A)</div>
        <div class="opt-value">\(1\)</div>
      </div>
      <div class="option-box correct">
        <div class="opt-label">(B)</div>
        <div class="opt-value">\(0\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(C)</div>
        <div class="opt-value">\(2\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(D)</div>
        <div class="opt-value">\(3\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(E)</div>
        <div class="opt-value">\(4\)</div>
      </div>
    </div>

    <p class="verification"><strong>Provera:</strong> Jednacina \(2|x| + 3a = x\) zahteva \(x \geq 2|x| + 3a > 0\), ali za \(x > 0\) imamo \(2x + 3a > x\) jer je \(x + 3a > 0\). Za \(x \leq 0\) leva strana je pozitivna, a desna nenegativan/negativna. Grafici \(y = 2|x| + 3a\) i \(y = x\) se ne seku. &check;</p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Ceste greske</h2>
    <ul class="pitfall-list">
      <li><strong>Pogresno racunanje \(f(f(x))\):</strong> Neki ucenici ne uoce da je \(f(x) > 0\) za svako \(x\), pa pogresno pisu \(f(f(x)) = |{|x| + a}| + a\) i pokusavaju da razmatraju slucajeve kada je \(|x| + a < 0\), sto je nemoguce. Kljuc je prepoznati da je \(|f(x)| = f(x)\) jer je \(f(x)\) uvek pozitivno.</li>
      <li><strong>Zaboravljanje provere uslova:</strong> Cak i kada se korektno nadje \(x = -3a\) ili \(x = a\), bitno je proveriti da li ta vrednost zadovoljava polazni uslov slucaja (\(x \geq 0\) ili \(x < 0\)). Bez te provere, moguce je pogresno zakljuciti da postoje resenja.</li>
      <li><strong>Zbrka oko parametra \(a\):</strong> Zadatak pita za broj resenja za proizvoljno \(a > 0\). Neki ucenici pokusavaju da nadju konkretnu vrednost \(a\) umesto da uoce da je rezultat isti za svako \(a > 0\).</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Sta bi se desilo da je uslov \(a \leq 0\)? Koliko bi tada jednacina \(f(x) + f(f(x)) = x\) imala realnih resenja? Razmotrite slucajeve \(a = 0\) i \(a < 0\) posebno.</p>
    <details>
      <summary>Pomoc</summary>
      <p>Za \(a = 0\), \(f(x) = |x|\), pa je \(f(x) + f(f(x)) = 2|x| = x\). Za \(x \geq 0\): \(2x = x \Rightarrow x = 0\). Provera: \(f(0) + f(f(0)) = 0 + 0 = 0\). Dakle, za \(a = 0\) postoji tacno jedno resenje \(x = 0\).</p>
      <p>Za \(a < 0\), situacija postaje slozenija jer \(f(x)\) moze biti negativno za neke \(x\), pa \(|f(x)| \neq f(x)\) i moraju se razmatrati dodatni slucajevi.</p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('graph-canvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  // Coordinate system
  const originX = 350;
  const originY = 340;
  const scale = 50;

  function toCanvas(x, y) {
    return { x: originX + x * scale, y: originY - y * scale };
  }

  function fromCanvas(cx, cy) {
    return { x: (cx - originX) / scale, y: (originY - cy) / scale };
  }

  // Parameter a (draggable)
  let paramA = 1.0;

  // Slider geometry
  const sliderX = 80;
  const sliderY = H - 45;
  const sliderW = W - 160;
  const sliderMinA = 0.2;
  const sliderMaxA = 3.0;
  let draggingSlider = false;

  function aToSliderPos(a) {
    return sliderX + (a - sliderMinA) / (sliderMaxA - sliderMinA) * sliderW;
  }

  function sliderPosToA(px) {
    return sliderMinA + (px - sliderX) / sliderW * (sliderMaxA - sliderMinA);
  }

  // g(x) = 2|x| + 3a (left side of equation)
  function g(x) {
    return 2 * Math.abs(x) + 3 * paramA;
  }

  function draw() {
    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Grid
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (let gx = -8; gx <= 8; gx++) {
      const p = toCanvas(gx, 0);
      if (p.x >= 0 && p.x <= W) {
        ctx.beginPath();
        ctx.moveTo(p.x, 0);
        ctx.lineTo(p.x, H - 70);
        ctx.stroke();
      }
    }
    for (let gy = -5; gy <= 12; gy++) {
      const p = toCanvas(0, gy);
      if (p.y >= 0 && p.y <= H - 70) {
        ctx.beginPath();
        ctx.moveTo(0, p.y);
        ctx.lineTo(W, p.y);
        ctx.stroke();
      }
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(0, originY);
    ctx.lineTo(W, originY);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(originX, 0);
    ctx.lineTo(originX, H - 70);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#64748b';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    for (let gx = -6; gx <= 6; gx++) {
      if (gx === 0) continue;
      const p = toCanvas(gx, 0);
      if (p.x > 20 && p.x < W - 20) {
        ctx.fillText(gx.toString(), p.x, originY + 5);
      }
    }
    ctx.textAlign = 'right';
    ctx.textBaseline = 'middle';
    for (let gy = -4; gy <= 10; gy++) {
      if (gy === 0) continue;
      const p = toCanvas(0, gy);
      if (p.y > 10 && p.y < H - 80) {
        ctx.fillText(gy.toString(), originX - 8, p.y);
      }
    }
    ctx.fillStyle = '#64748b';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    ctx.fillText('x', W - 15, originY + 5);
    ctx.textAlign = 'right';
    ctx.textBaseline = 'middle';
    ctx.fillText('y', originX - 8, 15);
    ctx.fillText('O', originX - 8, originY + 12);

    // Draw y = x (the line)
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    const lineStart = toCanvas(-8, -8);
    const lineEnd = toCanvas(12, 12);
    ctx.moveTo(lineStart.x, lineStart.y);
    ctx.lineTo(lineEnd.x, lineEnd.y);
    ctx.stroke();

    // Label y = x
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.textBaseline = 'bottom';
    const lineLabelPos = toCanvas(4.5, 4.5);
    ctx.fillText('y = x', lineLabelPos.x + 8, lineLabelPos.y - 8);

    // Draw y = 2|x| + 3a (the V-shape)
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    let first = true;
    for (let px = 0; px < W; px++) {
      const coord = fromCanvas(px, 0);
      const yVal = g(coord.x);
      const cp = toCanvas(coord.x, yVal);
      if (cp.y < -20 || cp.y > H) {
        first = true;
        continue;
      }
      if (first) {
        ctx.moveTo(cp.x, cp.y);
        first = false;
      } else {
        ctx.lineTo(cp.x, cp.y);
      }
    }
    ctx.stroke();

    // Label g(x)
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.textBaseline = 'bottom';
    const gLabelX = 2.2;
    const gLabelPos = toCanvas(gLabelX, g(gLabelX));
    if (gLabelPos.y > 20) {
      ctx.fillText('y = 2|x| + 3a', gLabelPos.x + 8, gLabelPos.y - 4);
    }

    // Mark vertex of V-shape at (0, 3a)
    const vertex = toCanvas(0, 3 * paramA);
    ctx.fillStyle = '#f472b6';
    ctx.beginPath();
    ctx.arc(vertex.x, vertex.y, 5, 0, Math.PI * 2);
    ctx.fill();
    ctx.fillStyle = '#f472b6';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.textBaseline = 'middle';
    ctx.fillText('(0, 3a) = (0, ' + (3 * paramA).toFixed(1) + ')', vertex.x + 10, vertex.y);

    // Show gap annotations
    // At x = 0: gap is 3a - 0 = 3a
    const gapAtZero = 3 * paramA;
    const gapTopPos = toCanvas(0, gapAtZero);
    const gapBotPos = toCanvas(0, 0);

    // Draw bracket/arrow for gap at x=0
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([4, 3]);
    ctx.beginPath();
    ctx.moveTo(gapTopPos.x + 15, gapTopPos.y);
    ctx.lineTo(gapBotPos.x + 15, gapBotPos.y);
    ctx.stroke();
    ctx.setLineDash([]);

    // Arrow heads
    ctx.fillStyle = '#4ade80';
    ctx.beginPath();
    ctx.moveTo(gapTopPos.x + 15, gapTopPos.y);
    ctx.lineTo(gapTopPos.x + 11, gapTopPos.y + 6);
    ctx.lineTo(gapTopPos.x + 19, gapTopPos.y + 6);
    ctx.closePath();
    ctx.fill();
    ctx.beginPath();
    ctx.moveTo(gapBotPos.x + 15, gapBotPos.y);
    ctx.lineTo(gapBotPos.x + 11, gapBotPos.y - 6);
    ctx.lineTo(gapBotPos.x + 19, gapBotPos.y - 6);
    ctx.closePath();
    ctx.fill();

    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.textBaseline = 'middle';
    const gapMid = toCanvas(0, gapAtZero / 2);
    ctx.fillText('3a = ' + gapAtZero.toFixed(1), gapMid.x + 22, gapMid.y);

    // Shade the gap region lightly to emphasize no intersection
    ctx.fillStyle = 'rgba(244,114,182,0.05)';
    ctx.beginPath();
    // V-shape from left edge to right edge
    const leftEdgeX = fromCanvas(0, 0).x;
    const rightEdgeX = fromCanvas(W, 0).x;
    // Area between y = 2|x| + 3a (below) and top of canvas
    // We just shade between the two curves to show they never meet
    for (let px = 0; px < W; px++) {
      const coord = fromCanvas(px, 0);
      const yV = g(coord.x);
      const yL = coord.x;
      if (yV > yL) {
        const topP = toCanvas(coord.x, yV);
        const botP = toCanvas(coord.x, yL);
        if (topP.y >= 0 && botP.y <= H - 70) {
          ctx.fillRect(px, Math.max(0, topP.y), 1, Math.min(H - 70, botP.y) - Math.max(0, topP.y));
        }
      }
    }

    // "NO INTERSECTION" label
    ctx.fillStyle = 'rgba(248,113,113,0.8)';
    ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    const noIntPos = toCanvas(-2.5, 2.5);
    ctx.fillText('Nema preseka!', noIntPos.x, noIntPos.y);

    // Explanation at x > 0 area
    ctx.fillStyle = 'rgba(148,163,184,0.7)';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    const notePos1 = toCanvas(3, 1);
    ctx.fillText('nagib 2 > nagib 1', notePos1.x, notePos1.y);

    // Legend
    const legX = 15, legY = 15;
    ctx.fillStyle = 'rgba(15,23,42,0.9)';
    ctx.fillRect(legX, legY, 220, 70);
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.strokeRect(legX, legY, 220, 70);

    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.textBaseline = 'middle';

    // y = x legend entry
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(legX + 10, legY + 22);
    ctx.lineTo(legX + 30, legY + 22);
    ctx.stroke();
    ctx.fillStyle = '#60a5fa';
    ctx.fillText('y = x  (desna strana)', legX + 38, legY + 22);

    // g(x) legend entry
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(legX + 10, legY + 48);
    ctx.lineTo(legX + 30, legY + 48);
    ctx.stroke();
    ctx.fillStyle = '#f472b6';
    ctx.fillText('y = 2|x| + 3a  (leva strana)', legX + 38, legY + 48);

    // Slider for parameter a
    ctx.fillStyle = 'rgba(15,23,42,0.95)';
    ctx.fillRect(sliderX - 20, sliderY - 20, sliderW + 40, 40);
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.strokeRect(sliderX - 20, sliderY - 20, sliderW + 40, 40);

    // Slider track
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 3;
    ctx.lineCap = 'round';
    ctx.beginPath();
    ctx.moveTo(sliderX, sliderY);
    ctx.lineTo(sliderX + sliderW, sliderY);
    ctx.stroke();

    // Slider filled portion
    const knobX = aToSliderPos(paramA);
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(sliderX, sliderY);
    ctx.lineTo(knobX, sliderY);
    ctx.stroke();

    // Slider knob
    ctx.fillStyle = '#a78bfa';
    ctx.beginPath();
    ctx.arc(knobX, sliderY, 10, 0, Math.PI * 2);
    ctx.fill();
    ctx.strokeStyle = '#fff';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Slider label
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'bottom';
    ctx.fillText('a = ' + paramA.toFixed(2), knobX, sliderY - 14);

    ctx.fillStyle = '#64748b';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.textBaseline = 'middle';
    ctx.fillText(sliderMinA.toFixed(1), sliderX - 16, sliderY);
    ctx.textAlign = 'right';
    ctx.fillText(sliderMaxA.toFixed(1), sliderX + sliderW + 16, sliderY);

    ctx.lineCap = 'butt';
  }

  draw();

  // Interaction
  function getPos(e) {
    const rect = canvas.getBoundingClientRect();
    const scaleX = W / rect.width;
    const scaleY = H / rect.height;
    let clientX, clientY;
    if (e.touches) {
      clientX = e.touches[0].clientX;
      clientY = e.touches[0].clientY;
    } else {
      clientX = e.clientX;
      clientY = e.clientY;
    }
    return {
      x: (clientX - rect.left) * scaleX,
      y: (clientY - rect.top) * scaleY
    };
  }

  function hitSlider(pos) {
    const knobX = aToSliderPos(paramA);
    return Math.hypot(pos.x - knobX, pos.y - sliderY) < 20;
  }

  function onDown(e) {
    e.preventDefault();
    const pos = getPos(e);
    if (hitSlider(pos)) {
      draggingSlider = true;
    }
  }

  function onMove(e) {
    if (!draggingSlider) return;
    e.preventDefault();
    const pos = getPos(e);
    let newA = sliderPosToA(pos.x);
    newA = Math.max(sliderMinA, Math.min(sliderMaxA, newA));
    paramA = newA;
    draw();
  }

  function onUp() {
    draggingSlider = false;
  }

  canvas.addEventListener('mousedown', onDown);
  canvas.addEventListener('mousemove', onMove);
  canvas.addEventListener('mouseup', onUp);
  canvas.addEventListener('mouseleave', onUp);
  canvas.addEventListener('touchstart', onDown, { passive: false });
  canvas.addEventListener('touchmove', onMove, { passive: false });
  canvas.addEventListener('touchend', onUp);

  // Step click interactivity
  const steps = document.querySelectorAll('.step');
  steps.forEach(function(step) {
    step.addEventListener('click', function() {
      steps.forEach(function(s) { s.classList.remove('active'); });
      step.classList.add('active');
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Broj realnih resenja jednacine sa apsolutnom vrednoscu",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["apsolutna vrednost", "kompozicija funkcija", "analiza po slucajevima", "jednacine", "graficka interpretacija"]
}
BRAINSPARK_META-->