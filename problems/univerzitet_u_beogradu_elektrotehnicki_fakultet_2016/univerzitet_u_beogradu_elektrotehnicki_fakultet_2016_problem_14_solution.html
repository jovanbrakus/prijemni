<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Visina piramide u kvadru</title>
<script type="text/info" id="logic-scratchpad">
Problem: Dat je kvadar ABCDA1B1C1D1. Duzine dijagonala strana ovog kvadra su 7, 8 i 9.
Susedna temena temenu B su A, C i B1. Duzina visine iz temena B piramide ABCB1 jednaka je?

Korak 1: Oznacimo ivice kvadra iz temena B
BA = a, BC = b, BB1 = c (medjusobno normalne ivice)

Korak 2: Dijagonale strana kvadra
Strane koje sadrze teme B su:
- ABCD (pod): dijagonala = sqrt(a^2 + b^2)
- ABB1A1 (bocna): dijagonala = sqrt(a^2 + c^2)
- BCC1B1 (bocna): dijagonala = sqrt(b^2 + c^2)

Dakle: {sqrt(a^2+b^2), sqrt(b^2+c^2), sqrt(a^2+c^2)} = {7, 8, 9} u nekom redosledu.

Korak 3: Sistem jednacina
a^2 + b^2 = 49
b^2 + c^2 = 64
a^2 + c^2 = 81

(ovo je jedan validan raspored - proverimo konzistentnost)

Korak 4: Sabiranjem svih triju jednacina
2(a^2 + b^2 + c^2) = 49 + 64 + 81 = 194
a^2 + b^2 + c^2 = 97

Korak 5: Odredimo pojedinacne vrednosti
c^2 = 97 - 49 = 48  =>  c = 4*sqrt(3)
a^2 = 97 - 64 = 33  =>  a = sqrt(33)
b^2 = 97 - 81 = 16  =>  b = 4

Provera:
a^2 + b^2 = 33 + 16 = 49 = 7^2  OK
b^2 + c^2 = 16 + 48 = 64 = 8^2  OK
a^2 + c^2 = 33 + 48 = 81 = 9^2  OK

Korak 6: Zapremina piramide ABCB1
B je teme iz koga izlaze tri medjusobno normalne ivice BA, BC, BB1.
Piramida sa tri medjusobno normalne ivice iz jednog temena ima zapreminu:
V = (1/6) * a * b * c
V = (1/6) * sqrt(33) * 4 * 4*sqrt(3)
V = (1/6) * 16 * sqrt(99)
V = (1/6) * 16 * 3*sqrt(11)
V = (1/6) * 48 * sqrt(11)
V = 8*sqrt(11)

Korak 7: Povrsina osnove (trougao ACB1)
Postavimo koordinatni sistem: B = (0,0,0), A = (a,0,0), C = (0,b,0), B1 = (0,0,c)
Stranice trougla ACB1:
AC = sqrt(a^2 + b^2) = 7
AB1 = sqrt(a^2 + c^2) = 9
CB1 = sqrt(b^2 + c^2) = 8

Koristimo Heronovu formulu:
s = (7 + 8 + 9) / 2 = 12
P = sqrt(s(s-a)(s-b)(s-c)) = sqrt(12 * 5 * 4 * 3) = sqrt(720)
720 = 144 * 5
P = 12*sqrt(5)

Korak 8: Visina iz B na ravan ACB1
V = (1/3) * P * h  =>  h = 3V / P
h = 3 * 8*sqrt(11) / (12*sqrt(5))
h = 24*sqrt(11) / (12*sqrt(5))
h = 2*sqrt(11) / sqrt(5)
h = 2*sqrt(11) * sqrt(5) / 5
h = 2*sqrt(55) / 5

Odgovor: (C) 2*sqrt(55)/5
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  font-size: 1.05rem;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
  transition: transform 0.2s, border-color 0.2s;
}

.given-item:hover {
  transform: translateY(-2px);
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card h2 {
  color: #a78bfa;
}

details {
  margin: 15px 0;
  background: rgba(167,139,250,0.06);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 1.05rem;
  user-select: none;
}

details summary:hover {
  color: #c4b5fd;
}

details[open] summary {
  margin-bottom: 12px;
}

details ul {
  list-style: none;
  padding-left: 0;
}

details li {
  padding: 6px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #e2e8f0;
}

details li:last-child {
  border-bottom: none;
}

.canvas-card {
  text-align: center;
}

.canvas-card canvas {
  width: 100%;
  max-width: 700px;
  border-radius: 10px;
  border: 1px solid #334155;
  touch-action: none;
}

.canvas-hint {
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
  font-style: italic;
}

.step {
  display: flex;
  gap: 16px;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 14px;
  border-left: 3px solid transparent;
  transition: border-color 0.2s, background 0.2s;
  cursor: pointer;
}

.step:hover, .step.active {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}

.step-badge {
  flex-shrink: 0;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.95rem;
}

.step-content {
  flex: 1;
}

.step-content p {
  color: #94a3b8;
  margin-top: 6px;
}

.checkpoint {
  background: rgba(52,211,153,0.06);
  border: 1px solid rgba(52,211,153,0.18);
}

.checkpoint summary {
  color: #34d399;
}

.insight-card {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid rgba(167,139,250,0.25);
}

.insight-card h2 {
  color: #a78bfa;
}

.final-answer {
  border: 2px solid rgba(74,222,128,0.3);
  background: linear-gradient(135deg, rgba(74,222,128,0.06), rgba(52,211,153,0.04));
}

.final-answer h2 {
  color: #4ade80;
}

.answer-big {
  font-size: 1.6rem;
  font-weight: 700;
  color: #4ade80;
  text-align: center;
  margin: 20px 0;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 16px 0;
}

.option-box {
  padding: 10px 20px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: #1e293b;
  text-align: center;
  min-width: 90px;
  transition: transform 0.2s;
}

.option-box.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.1);
  transform: scale(1.05);
}

.option-box .opt-label {
  color: #94a3b8;
  font-size: 0.85rem;
}

.option-box .opt-value {
  font-size: 1.15rem;
  font-weight: 600;
  color: #e2e8f0;
}

.option-box.correct .opt-value {
  color: #4ade80;
}

.verification {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 14px;
  padding-top: 14px;
  border-top: 1px solid #334155;
}

.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 14px;
  margin-bottom: 8px;
  background: rgba(224,148,104,0.06);
  border-left: 3px solid #e09468;
  border-radius: 0 8px 8px 0;
  color: #e2e8f0;
}

.pitfall-list li strong {
  color: #e09468;
}

.challenge-card {
  border: 1px solid rgba(244,114,182,0.2);
  background: rgba(244,114,182,0.04);
}

.challenge-card h2 {
  color: #f472b6;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step { flex-direction: column; gap: 10px; }
  .given-grid { flex-direction: column; }
  .options-row { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Visina piramide u kvadru</h1>
  <p class="subtitle">Stereometrija, dijagonale kvadra, zapremina piramide i Heronova formula</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Dat je kvadar \(ABCDA_1B_1C_1D_1\). Dužine dijagonala strana ovog kvadra su <span class="highlight">7</span>, <span class="highlight">8</span> i <span class="highlight">9</span>. Susedna temena temenu \(B\) su \(A\), \(C\) i \(B_1\). Dužina visine iz temena \(B\) piramide \(ABCB_1\) jednaka je:</p>

    <div class="given-grid" style="margin-bottom: 18px;">
      <div class="given-item">
        <div class="label">Dijagonala 1</div>
        <div class="value">\(d_1 = 7\)</div>
      </div>
      <div class="given-item">
        <div class="label">Dijagonala 2</div>
        <div class="value">\(d_2 = 8\)</div>
      </div>
      <div class="given-item">
        <div class="label">Dijagonala 3</div>
        <div class="value">\(d_3 = 9\)</div>
      </div>
      <div class="given-item">
        <div class="label">Susedna temena od B</div>
        <div class="value">\(A, C, B_1\)</div>
      </div>
    </div>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(\dfrac{12}{\sqrt{5}}\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(\dfrac{2\sqrt{3}}{3}\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(\dfrac{2\sqrt{55}}{5}\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(3\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(5\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan rešavanja</h2>
    <p>Iz dijagonala strana kvadra odredićemo ivice \(a\), \(b\) i \(c\) pomoću sistema jednačina. Zatim ćemo izračunati zapreminu piramide \(ABCB_1\) koristeći činjenicu da su tri ivice iz temena \(B\) međusobno normalne. Na kraju, pomoću Heronove formule naći ćemo površinu osnove (trougao \(ACB_1\)) i iz formule za zapreminu izvući visinu.</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Ključne formule i teoreme</summary>
      <ul>
        <li><strong>Dijagonala pravougaonika:</strong> Za pravougaonik sa stranicama \(p\) i \(q\), dijagonala je \(d = \sqrt{p^2 + q^2}\).</li>
        <li><strong>Zapremina piramide sa tri međusobno normalne ivice:</strong> Ako iz jednog temena izlaze tri međusobno normalne ivice dužina \(a\), \(b\), \(c\), zapremina piramide je \(V = \dfrac{1}{6}\,abc\).</li>
        <li><strong>Heronova formula:</strong> Za trougao sa stranicama \(p\), \(q\), \(r\) i poluobimom \(s = \dfrac{p+q+r}{2}\), površina je \(P = \sqrt{s(s-p)(s-q)(s-r)}\).</li>
        <li><strong>Veza zapremine i visine piramide:</strong> \(V = \dfrac{1}{3} \cdot P_{\text{osnove}} \cdot h\), odakle \(h = \dfrac{3V}{P_{\text{osnove}}}\).</li>
      </ul>
    </details>
  </div>

  <!-- Interactive 3D Canvas -->
  <div class="card canvas-card">
    <h2>Interaktivni prikaz: Kvadar i piramida</h2>
    <p style="color:#94a3b8; margin-bottom: 14px;">Kvadar \(ABCDA_1B_1C_1D_1\) sa piramidnom \(ABCB_1\) i visinom iz temena \(B\)</p>
    <canvas id="viz-canvas" width="700" height="520"></canvas>
    <p class="canvas-hint">Prevlačite mišem da rotirate pogled</p>
  </div>

  <!-- Step-by-step solution -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <div class="step" id="step-1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Označimo ivice kvadra</h3>
        <p>Neka su ivice kvadra iz temena \(B\):</p>
        <div class="math-box">
          \[ BA = a, \quad BC = b, \quad BB_1 = c \]
        </div>
        <p>Ove tri ivice su <span class="highlight">međusobno normalne</span> (grade pravi ugao u temenu \(B\)).</p>
      </div>
    </div>

    <div class="step" id="step-2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Povežimo dijagonale strana sa ivicama</h3>
        <p>Kvadar ima tri para strana. Svaka strana je pravougaonik, pa joj je dijagonala:</p>
        <div class="math-box">
          \[ \sqrt{a^2 + b^2}, \quad \sqrt{b^2 + c^2}, \quad \sqrt{a^2 + c^2} \]
        </div>
        <p>Po uslovu zadatka, ove tri dijagonale su jednake \(7\), \(8\) i \(9\) (u nekom redosledu). Kvadriranjem dobijamo:</p>
        <div class="math-box">
          \[ a^2 + b^2 = 49, \quad b^2 + c^2 = 64, \quad a^2 + c^2 = 81 \]
        </div>
      </div>
    </div>

    <div class="step" id="step-3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Saberimo sve tri jednačine</h3>
        <p>Kada saberemo leve i desne strane svih triju jednačina:</p>
        <div class="math-box">
          \[ (a^2 + b^2) + (b^2 + c^2) + (a^2 + c^2) = 49 + 64 + 81 \]
        </div>
        <p>Leva strana se uprošćava:</p>
        <div class="math-box">
          \[ 2a^2 + 2b^2 + 2c^2 = 194 \]
          \[ a^2 + b^2 + c^2 = 97 \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Koliko je \(a^2 + b^2 + c^2\)?</summary>
      <p>Sabiranje triju jednačina daje \(2(a^2 + b^2 + c^2) = 194\), pa je \(a^2 + b^2 + c^2 = 97\).</p>
    </details>

    <div class="step" id="step-4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Odredimo \(a^2\), \(b^2\), \(c^2\)</h3>
        <p>Oduzimamo svaku polaznu jednačinu od zbira \(a^2 + b^2 + c^2 = 97\):</p>
        <div class="math-box">
          \[ c^2 = 97 - (a^2 + b^2) = 97 - 49 = 48 \]
        </div>
        <div class="math-box">
          \[ a^2 = 97 - (b^2 + c^2) = 97 - 64 = 33 \]
        </div>
        <div class="math-box">
          \[ b^2 = 97 - (a^2 + c^2) = 97 - 81 = 16 \]
        </div>
        <p>Dakle: \(a = \sqrt{33}\), \(b = 4\), \(c = 4\sqrt{3}\).</p>
      </div>
    </div>

    <div class="step" id="step-5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Proverimo rezultate</h3>
        <p>Uvrštavamo nazad u polazne jednačine:</p>
        <div class="math-box">
          \[ a^2 + b^2 = 33 + 16 = 49 = 7^2 \quad \checkmark \]
          \[ b^2 + c^2 = 16 + 48 = 64 = 8^2 \quad \checkmark \]
          \[ a^2 + c^2 = 33 + 48 = 81 = 9^2 \quad \checkmark \]
        </div>
      </div>
    </div>

    <div class="step" id="step-6">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Zapremina piramide \(ABCB_1\)</h3>
        <p>Piramida \(ABCB_1\) ima teme \(B\) iz koga izlaze tri <span class="highlight">međusobno normalne</span> ivice \(BA = a\), \(BC = b\), \(BB_1 = c\). Zapremina takve piramide je:</p>
        <div class="math-box">
          \[ V = \frac{1}{6} \cdot a \cdot b \cdot c \]
        </div>
        <p>Uvrštavamo:</p>
        <div class="math-box">
          \[ V = \frac{1}{6} \cdot \sqrt{33} \cdot 4 \cdot 4\sqrt{3} = \frac{16\sqrt{99}}{6} \]
        </div>
        <p>Uprošćavamo \(\sqrt{99} = \sqrt{9 \cdot 11} = 3\sqrt{11}\):</p>
        <div class="math-box">
          \[ V = \frac{16 \cdot 3\sqrt{11}}{6} = \frac{48\sqrt{11}}{6} = 8\sqrt{11} \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Zašto je \(V = \frac{1}{6}abc\) a ne \(\frac{1}{3}abc\)?</summary>
      <p>Tri međusobno normalne ivice iz temena \(B\) definišu pravougaoni paralelopiped zapremine \(abc\). Piramida \(ABCB_1\) zauzima tačno \(\frac{1}{6}\) tog paralelopipeda (isto kao tetraedar upisao u kocku). Alternativno: osnova je pravougli trougao \(ABC\) sa katetama \(a\) i \(b\), površine \(\frac{1}{2}ab\), a visina je \(c\), pa je \(V = \frac{1}{3} \cdot \frac{1}{2}ab \cdot c = \frac{abc}{6}\).</p>
    </details>

    <div class="step" id="step-7">
      <div class="step-badge">7</div>
      <div class="step-content">
        <h3>Stranice trougla \(ACB_1\) (osnova piramide)</h3>
        <p>Postavimo koordinatni sistem sa \(B\) u koordinatnom početku. Tada su temena:</p>
        <div class="math-box">
          \[ A = (a, 0, 0), \quad C = (0, b, 0), \quad B_1 = (0, 0, c) \]
        </div>
        <p>Stranice trougla \(ACB_1\) su upravo dijagonale strana kvadra:</p>
        <div class="math-box">
          \[ AC = \sqrt{a^2 + b^2} = 7 \]
          \[ AB_1 = \sqrt{a^2 + c^2} = 9 \]
          \[ CB_1 = \sqrt{b^2 + c^2} = 8 \]
        </div>
      </div>
    </div>

    <div class="step" id="step-8">
      <div class="step-badge">8</div>
      <div class="step-content">
        <h3>Površina trougla \(ACB_1\) -- Heronova formula</h3>
        <p>Stranice trougla su \(p = 7\), \(q = 8\), \(r = 9\). Računamo poluobim:</p>
        <div class="math-box">
          \[ s = \frac{7 + 8 + 9}{2} = 12 \]
        </div>
        <p>Primenjujemo Heronovu formulu:</p>
        <div class="math-box">
          \[ P = \sqrt{s(s-p)(s-q)(s-r)} = \sqrt{12 \cdot 5 \cdot 4 \cdot 3} \]
        </div>
        <div class="math-box">
          \[ P = \sqrt{720} = \sqrt{144 \cdot 5} = 12\sqrt{5} \]
        </div>
      </div>
    </div>

    <div class="step" id="step-9">
      <div class="step-badge">9</div>
      <div class="step-content">
        <h3>Visina iz temena \(B\) na ravan \(ACB_1\)</h3>
        <p>Iz formule za zapreminu piramide \(V = \frac{1}{3} \cdot P_{\text{osnove}} \cdot h\) izražavamo visinu:</p>
        <div class="math-box">
          \[ h = \frac{3V}{P_{\text{osnove}}} = \frac{3 \cdot 8\sqrt{11}}{12\sqrt{5}} \]
        </div>
        <p>Skraćujemo:</p>
        <div class="math-box">
          \[ h = \frac{24\sqrt{11}}{12\sqrt{5}} = \frac{2\sqrt{11}}{\sqrt{5}} \]
        </div>
        <p>Racionalizujemo imenilac množenjem brojioca i imenioca sa \(\sqrt{5}\):</p>
        <div class="math-box">
          \[ h = \frac{2\sqrt{11} \cdot \sqrt{5}}{\sqrt{5} \cdot \sqrt{5}} = \frac{2\sqrt{55}}{5} \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Numerička provera visine</summary>
      <p>\(\sqrt{55} \approx 7{,}416\), pa je \(h \approx \frac{2 \cdot 7{,}416}{5} \approx \frac{14{,}832}{5} \approx 2{,}97\). Ovo je razumna vrednost -- manja od svake ivice kvadra, što ima geometrijskog smisla jer je visina piramide uvek kraća od ivica iz kojih se gradi.</p>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="card insight-card">
    <h2>Ključni uvid</h2>
    <p>Tri ivice iz temena \(B\) su <strong>međusobno normalne</strong>, što nam omogućava da zapreminu piramide izračunamo kao \(\frac{1}{6}abc\). Istovremeno, stranice osnove trougla \(ACB_1\) su upravo dijagonale strana kvadra (7, 8, 9), pa Heronova formula direktno daje površinu osnove. Visina se zatim lako izvlači iz odnosa zapremine i površine.</p>
    <div class="math-box" style="text-align:center; font-size:1.2rem; margin-top:14px;">
      \[ h = \frac{3V}{P} = \frac{3 \cdot \frac{1}{6}abc}{12\sqrt{5}} = \frac{2\sqrt{55}}{5} \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer">
    <h2>Konačan odgovor</h2>
    <div class="answer-big">\(h = \dfrac{2\sqrt{55}}{5}\)</div>

    <div class="options-row">
      <div class="option-box">
        <div class="opt-label">(A)</div>
        <div class="opt-value">\(\frac{12}{\sqrt{5}}\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(B)</div>
        <div class="opt-value">\(\frac{2\sqrt{3}}{3}\)</div>
      </div>
      <div class="option-box correct">
        <div class="opt-label">(C)</div>
        <div class="opt-value">\(\frac{2\sqrt{55}}{5}\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(D)</div>
        <div class="opt-value">\(3\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(E)</div>
        <div class="opt-value">\(5\)</div>
      </div>
    </div>

    <p class="verification"><strong>Provera:</strong> Zapremina piramide: \(V = 8\sqrt{11}\). Površina osnove (trougao 7-8-9): \(P = 12\sqrt{5}\). Visina: \(h = \frac{3 \cdot 8\sqrt{11}}{12\sqrt{5}} = \frac{2\sqrt{11}}{\sqrt{5}} = \frac{2\sqrt{55}}{5} \approx 2{,}97\). Vrednost je manja od svake ivice kvadra i konzistentna sa geometrijom.</p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Česte greške</h2>
    <ul class="pitfall-list">
      <li><strong>Pogrešna formula za zapreminu:</strong> Mnogi koriste \(V = \frac{1}{3}abc\) umesto \(V = \frac{1}{6}abc\). Piramida sa tri normalne ivice iz jednog temena ima zapreminu \(\frac{1}{6}\) odgovarajućeg kvadra, ne \(\frac{1}{3}\).</li>
      <li><strong>Zaboravljena racionalizacija:</strong> Rezultat \(\frac{2\sqrt{11}}{\sqrt{5}}\) je matematički tačan, ali nije u obliku ponuđenih odgovora. Neophodno je racionalizovati imenilac: \(\frac{2\sqrt{11}}{\sqrt{5}} = \frac{2\sqrt{55}}{5}\).</li>
      <li><strong>Pogrešan raspored dijagonala:</strong> Redosled pridruživanja dijagonala ivicama ne utiče na krajnji rezultat, jer nas zanima proizvod \(abc\) i stranice trougla (koje su upravo 7, 8, 9 bez obzira na raspored).</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Kolika je dužina prostorne dijagonale istog kvadra (dijagonala \(BD_1\))?</p>
    <details>
      <summary>Pomoć</summary>
      <p>Prostorna dijagonala kvadra ima dužinu \(d = \sqrt{a^2 + b^2 + c^2}\). Već smo odredili da je \(a^2 + b^2 + c^2 = 97\), pa je \(d = \sqrt{97} \approx 9{,}85\).</p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('viz-canvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  // Edge lengths (squared): a^2=33, b^2=16, c^2=48
  // a=sqrt(33)~5.74, b=4, c=sqrt(48)~6.93
  const a = Math.sqrt(33);
  const b = 4;
  const c = Math.sqrt(48);

  // 3D cuboid vertices centered at origin
  // B at origin, A along x, C along y, B1 along z
  // Cuboid: B=(0,0,0), A=(a,0,0), C=(0,b,0), D=(a,b,0)
  //         B1=(0,0,c), A1=(a,0,c), C1=(0,b,c), D1=(a,b,c)
  const vertices3D = {
    B:  [0, 0, 0],
    A:  [a, 0, 0],
    C:  [0, b, 0],
    D:  [a, b, 0],
    B1: [0, 0, c],
    A1: [a, 0, c],
    C1: [0, b, c],
    D1: [a, b, c]
  };

  // Center the cuboid
  const cx = a / 2, cy = b / 2, cz = c / 2;
  const centered = {};
  for (const key in vertices3D) {
    centered[key] = [
      vertices3D[key][0] - cx,
      vertices3D[key][1] - cy,
      vertices3D[key][2] - cz
    ];
  }

  // Rotation state
  let angleX = -0.45;
  let angleY = 0.65;
  let dragging = false;
  let lastX = 0, lastY = 0;

  function rotateY(p, angle) {
    const cos = Math.cos(angle), sin = Math.sin(angle);
    return [cos * p[0] + sin * p[2], p[1], -sin * p[0] + cos * p[2]];
  }

  function rotateX(p, angle) {
    const cos = Math.cos(angle), sin = Math.sin(angle);
    return [p[0], cos * p[1] - sin * p[2], sin * p[1] + cos * p[2]];
  }

  function project(p) {
    const scale = 38;
    const perspective = 20;
    const factor = perspective / (perspective + p[2] * 0.05);
    return {
      x: W / 2 + p[0] * scale * factor,
      y: H / 2 - p[2] * scale * factor + p[1] * scale * factor * 0.1
    };
  }

  function getProjected() {
    const result = {};
    for (const key in centered) {
      let p = rotateY(centered[key], angleY);
      p = rotateX(p, angleX);
      result[key] = project(p);
      result[key].z = p[2]; // for depth sorting
    }
    return result;
  }

  // Compute foot of perpendicular from B to plane ACB1
  // B=(0,0,0), A=(a,0,0), C=(0,b,0), B1=(0,0,c)
  // Normal to plane ACB1: n = CA x CB1
  // CA = A - C = (a, -b, 0), CB1 = B1 - C = (0, -b, c)
  // n = ((-b)*c - 0*(-b), 0*0 - a*c, a*(-b) - (-b)*0) = (-bc, -ac, -ab)
  // Simplify: n = (bc, ac, ab)
  // Plane equation: bc*x + ac*y + ab*z = bc*0 + ac*b + ab*0 = abc  (using point C=(0,b,0))
  // Wait: bc*0 + ac*b + ab*0 = abc. Yes.
  // Line from B=(0,0,0) in direction n: (t*bc, t*ac, t*ab)
  // Substitute: bc*(t*bc) + ac*(t*ac) + ab*(t*ab) = abc
  // t*(b^2*c^2 + a^2*c^2 + a^2*b^2) = abc
  // t = abc / (a^2*b^2 + b^2*c^2 + a^2*c^2)
  const ab2 = 33 * 16; // a^2*b^2 = 528
  const bc2 = 16 * 48; // b^2*c^2 = 768
  const ac2 = 33 * 48; // a^2*c^2 = 1584
  const abc_val = a * b * c;
  const t_foot = abc_val / (ab2 + bc2 + ac2);
  const footRaw = [t_foot * b * c, t_foot * a * c, t_foot * a * b];
  const footCentered = [footRaw[0] - cx, footRaw[1] - cy, footRaw[2] - cz];

  function getFootProjected() {
    let p = rotateY(footCentered, angleY);
    p = rotateX(p, angleX);
    return project(p);
  }

  function draw() {
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    const pts = getProjected();
    const foot = getFootProjected();

    // Draw cuboid edges (back edges dashed, front edges solid)
    const edges = [
      ['B', 'A'], ['B', 'C'], ['B', 'B1'],
      ['A', 'D'], ['C', 'D'], ['A', 'A1'],
      ['C', 'C1'], ['B1', 'A1'], ['B1', 'C1'],
      ['D', 'D1'], ['A1', 'D1'], ['C1', 'D1']
    ];

    // Draw cuboid edges in muted color
    ctx.lineWidth = 1.5;
    ctx.strokeStyle = 'rgba(148, 163, 184, 0.35)';
    ctx.setLineDash([5, 5]);
    for (const [v1, v2] of edges) {
      // Skip pyramid edges
      if ((['B','A'].includes(v1) && ['B','A'].includes(v2)) ||
          (['B','C'].includes(v1) && ['B','C'].includes(v2)) ||
          (['B','B1'].includes(v1) && ['B','B1'].includes(v2)) ||
          (['A','C'].includes(v1) && ['A','C'].includes(v2)) ||
          (['A','B1'].includes(v1) && ['A','B1'].includes(v2)) ||
          (['C','B1'].includes(v1) && ['C','B1'].includes(v2))) continue;
      ctx.beginPath();
      ctx.moveTo(pts[v1].x, pts[v1].y);
      ctx.lineTo(pts[v2].x, pts[v2].y);
      ctx.stroke();
    }
    ctx.setLineDash([]);

    // Draw pyramid edges from B (solid, colored)
    // BA, BC, BB1
    ctx.lineWidth = 2.5;
    ctx.strokeStyle = '#60a5fa';
    const pyramidEdgesFromB = [['B', 'A'], ['B', 'C'], ['B', 'B1']];
    for (const [v1, v2] of pyramidEdgesFromB) {
      ctx.beginPath();
      ctx.moveTo(pts[v1].x, pts[v1].y);
      ctx.lineTo(pts[v2].x, pts[v2].y);
      ctx.stroke();
    }

    // Draw base triangle ACB1 (filled with transparency)
    ctx.fillStyle = 'rgba(167, 139, 250, 0.12)';
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(pts['A'].x, pts['A'].y);
    ctx.lineTo(pts['C'].x, pts['C'].y);
    ctx.lineTo(pts['B1'].x, pts['B1'].y);
    ctx.closePath();
    ctx.fill();
    ctx.stroke();

    // Draw height from B to foot on plane ACB1
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2.5;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.moveTo(pts['B'].x, pts['B'].y);
    ctx.lineTo(foot.x, foot.y);
    ctx.stroke();
    ctx.setLineDash([]);

    // Foot point
    ctx.fillStyle = '#4ade80';
    ctx.beginPath();
    ctx.arc(foot.x, foot.y, 5, 0, Math.PI * 2);
    ctx.fill();

    // Right angle indicator at foot
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1.5;
    const sqSize = 8;
    // Small square near foot (simplified)
    ctx.strokeRect(foot.x - sqSize / 2, foot.y - sqSize / 2, sqSize, sqSize);

    // Draw right angle markers at B for the three pairs
    ctx.strokeStyle = 'rgba(96, 165, 250, 0.5)';
    ctx.lineWidth = 1;

    // Label vertices
    const labels = {
      'B': { color: '#f472b6', offset: [10, 15] },
      'A': { color: '#60a5fa', offset: [-20, 5] },
      'C': { color: '#60a5fa', offset: [10, 15] },
      'B1': { color: '#60a5fa', offset: [8, -10] },
      'D': { color: '#94a3b8', offset: [8, 10] },
      'A1': { color: '#94a3b8', offset: [-22, -8] },
      'C1': { color: '#94a3b8', offset: [8, -8] },
      'D1': { color: '#94a3b8', offset: [8, -8] }
    };

    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    for (const [name, info] of Object.entries(labels)) {
      const displayName = name.length > 1 ? name[0] + '\u2081' : name;
      ctx.fillStyle = info.color;
      ctx.textAlign = 'center';
      ctx.fillText(displayName, pts[name].x + info.offset[0], pts[name].y + info.offset[1]);
    }

    // Label the height
    const midHx = (pts['B'].x + foot.x) / 2;
    const midHy = (pts['B'].y + foot.y) / 2;
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('h', midHx + 10, midHy);

    // Label edge lengths on pyramid edges
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#60a5fa';

    // BA edge label: a
    const midBA_x = (pts['B'].x + pts['A'].x) / 2;
    const midBA_y = (pts['B'].y + pts['A'].y) / 2;
    ctx.fillText('a', midBA_x - 14, midBA_y - 6);

    // BC edge label: b
    const midBC_x = (pts['B'].x + pts['C'].x) / 2;
    const midBC_y = (pts['B'].y + pts['C'].y) / 2;
    ctx.fillText('b', midBC_x + 10, midBC_y + 4);

    // BB1 edge label: c
    const midBB1_x = (pts['B'].x + pts['B1'].x) / 2;
    const midBB1_y = (pts['B'].y + pts['B1'].y) / 2;
    ctx.fillText('c', midBB1_x - 14, midBB1_y);

    // Label base triangle sides (face diagonals)
    ctx.fillStyle = '#a78bfa';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';

    const midAC_x = (pts['A'].x + pts['C'].x) / 2;
    const midAC_y = (pts['A'].y + pts['C'].y) / 2;
    ctx.fillText('7', midAC_x - 16, midAC_y + 16);

    const midAB1_x = (pts['A'].x + pts['B1'].x) / 2;
    const midAB1_y = (pts['A'].y + pts['B1'].y) / 2;
    ctx.fillText('9', midAB1_x + 10, midAB1_y - 4);

    const midCB1_x = (pts['C'].x + pts['B1'].x) / 2;
    const midCB1_y = (pts['C'].y + pts['B1'].y) / 2;
    ctx.fillText('8', midCB1_x + 10, midCB1_y);

    // Draw vertex dots
    for (const key of ['A', 'B', 'C', 'B1']) {
      const glow = ctx.createRadialGradient(pts[key].x, pts[key].y, 0, pts[key].x, pts[key].y, 12);
      if (key === 'B') {
        glow.addColorStop(0, 'rgba(244, 114, 182, 0.5)');
      } else {
        glow.addColorStop(0, 'rgba(96, 165, 250, 0.4)');
      }
      glow.addColorStop(1, 'rgba(0, 0, 0, 0)');
      ctx.fillStyle = glow;
      ctx.beginPath();
      ctx.arc(pts[key].x, pts[key].y, 12, 0, Math.PI * 2);
      ctx.fill();

      ctx.fillStyle = key === 'B' ? '#f472b6' : '#60a5fa';
      ctx.beginPath();
      ctx.arc(pts[key].x, pts[key].y, 4, 0, Math.PI * 2);
      ctx.fill();
    }

    // Muted dots for other cuboid vertices
    for (const key of ['D', 'A1', 'C1', 'D1']) {
      ctx.fillStyle = '#64748b';
      ctx.beginPath();
      ctx.arc(pts[key].x, pts[key].y, 3, 0, Math.PI * 2);
      ctx.fill();
    }

    // Legend
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';

    ctx.fillStyle = '#60a5fa';
    ctx.fillRect(20, H - 90, 14, 14);
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('Ivice piramide iz B', 40, H - 79);

    ctx.fillStyle = '#a78bfa';
    ctx.fillRect(20, H - 68, 14, 14);
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('Osnova (trougao ACB\u2081)', 40, H - 57);

    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2;
    ctx.setLineDash([5, 3]);
    ctx.beginPath();
    ctx.moveTo(20, H - 43);
    ctx.lineTo(34, H - 43);
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('Visina h iz temena B', 40, H - 37);

    ctx.strokeStyle = 'rgba(148, 163, 184, 0.35)';
    ctx.setLineDash([5, 5]);
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(20, H - 21);
    ctx.lineTo(34, H - 21);
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('Ostale ivice kvadra', 40, H - 14);
  }

  draw();

  // Mouse drag rotation
  canvas.addEventListener('mousedown', function(e) {
    dragging = true;
    lastX = e.clientX;
    lastY = e.clientY;
  });

  canvas.addEventListener('mousemove', function(e) {
    if (!dragging) return;
    const dx = e.clientX - lastX;
    const dy = e.clientY - lastY;
    angleY += dx * 0.008;
    angleX += dy * 0.008;
    lastX = e.clientX;
    lastY = e.clientY;
    draw();
  });

  canvas.addEventListener('mouseup', function() { dragging = false; });
  canvas.addEventListener('mouseleave', function() { dragging = false; });

  // Touch support
  canvas.addEventListener('touchstart', function(e) {
    e.preventDefault();
    dragging = true;
    lastX = e.touches[0].clientX;
    lastY = e.touches[0].clientY;
  });

  canvas.addEventListener('touchmove', function(e) {
    e.preventDefault();
    if (!dragging) return;
    const dx = e.touches[0].clientX - lastX;
    const dy = e.touches[0].clientY - lastY;
    angleY += dx * 0.008;
    angleX += dy * 0.008;
    lastX = e.touches[0].clientX;
    lastY = e.touches[0].clientY;
    draw();
  });

  canvas.addEventListener('touchend', function(e) {
    e.preventDefault();
    dragging = false;
  });

  // Step click interactivity
  const steps = document.querySelectorAll('.step');
  steps.forEach(function(step) {
    step.addEventListener('click', function() {
      steps.forEach(function(s) { s.classList.remove('active'); });
      step.classList.add('active');
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Visina piramide upisane u kvadar",
  "subject": "math",
  "unit": "geometry",
  "topic_tags": ["stereometrija", "kvadar", "piramida", "Heronova formula", "zapremina", "visina piramide", "dijagonale strana"]
}
BRAINSPARK_META-->