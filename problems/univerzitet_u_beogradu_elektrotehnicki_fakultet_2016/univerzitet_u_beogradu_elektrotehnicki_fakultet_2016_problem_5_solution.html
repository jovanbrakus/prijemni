<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aritmeticka i geometrijska progresija</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
  Problem:
  - Rastuca aritmeticka progresija (AP) od 11 clanova
  - Prvi clan: a_1 = 24
  - a_1, a_5, a_11 cine prva tri clana geometrijske progresije (GP)
  - Naci zbir svih 11 clanova AP

  Setup:
  AP with first term a_1 = 24, common difference d > 0 (rastuca => d > 0)
  General term: a_n = a_1 + (n-1)*d = 24 + (n-1)*d

  So:
    a_1 = 24
    a_5 = 24 + 4d
    a_11 = 24 + 10d

  GP condition: a_1, a_5, a_11 form a GP
  For three terms to be in GP: (a_5)^2 = a_1 * a_11

  (24 + 4d)^2 = 24 * (24 + 10d)

  Expand left side:
  576 + 192d + 16d^2 = 576 + 240d

  Simplify:
  16d^2 + 192d + 576 = 576 + 240d
  16d^2 + 192d - 240d = 0
  16d^2 - 48d = 0
  16d(d - 3) = 0

  So d = 0 or d = 3.
  Since the progression is "rastuca" (increasing), d > 0, so d = 3.

  Sum of AP with n=11 terms:
  S_11 = (n/2) * (2*a_1 + (n-1)*d)
       = (11/2) * (2*24 + 10*3)
       = (11/2) * (48 + 30)
       = (11/2) * 78
       = 11 * 39
       = 429

  Or using S_n = n*(a_1 + a_n)/2:
  a_11 = 24 + 10*3 = 54
  S_11 = 11*(24 + 54)/2 = 11*78/2 = 11*39 = 429

  Answer: (D) 429

  Verification:
  AP: 24, 27, 30, 33, 36, 39, 42, 45, 48, 51, 54
  a_1 = 24, a_5 = 36, a_11 = 54
  GP check: 36/24 = 3/2, 54/36 = 3/2 => Yes, common ratio q = 3/2
  Sum: 24+27+30+33+36+39+42+45+48+51+54 = 429 ✓

  All terms are positive, d=3>0, so the AP is indeed increasing. ✓
</script>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
}

.card h2 {
  font-size: 1.3rem;
  color: #60a5fa;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title {
  font-size: 1.3rem;
  color: #60a5fa;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.4rem;
}

.problem-text {
  font-size: 1.15rem;
  line-height: 1.8;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96, 165, 250, 0.08);
  border: 1px solid rgba(96, 165, 250, 0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
  transition: transform 0.2s, border-color 0.2s;
}

.given-item:hover {
  transform: translateY(-2px);
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card h2 {
  color: #a78bfa;
}

.plan-text {
  color: #a78bfa;
  font-size: 1.05rem;
  font-style: italic;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 8px 0;
  user-select: none;
}

details summary:hover {
  color: #93bbfc;
}

details .detail-content {
  padding: 12px 16px;
  background: rgba(30, 41, 59, 0.7);
  border-left: 3px solid #60a5fa;
  border-radius: 0 8px 8px 0;
  margin-top: 8px;
}

.step {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  align-items: flex-start;
  padding: 8px;
  border-left: 3px solid transparent;
  border-radius: 0 8px 8px 0;
  transition: border-color 0.3s, background 0.3s;
  cursor: pointer;
}

.step:hover, .step.active {
  border-left-color: #4ade80;
  background: rgba(74, 222, 128, 0.04);
}

.step-badge {
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  font-weight: 700;
  font-size: 0.85rem;
  min-width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-title {
  font-weight: 600;
  color: #f472b6;
  margin-bottom: 6px;
  font-size: 1.05rem;
}

.step-math {
  background: rgba(167, 139, 250, 0.1);
  border: 1px solid rgba(167, 139, 250, 0.25);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 10px 0;
  text-align: center;
  font-size: 1.05rem;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.12), rgba(167, 139, 250, 0.12));
  border: 1px solid rgba(167, 139, 250, 0.35);
  border-radius: 16px;
  padding: 24px 28px;
  margin-bottom: 24px;
}

.insight-box .card-title {
  color: #a78bfa;
}

.final-answer-box {
  background: rgba(52, 211, 153, 0.08);
  border: 2px solid #34d399;
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin-bottom: 24px;
}

.final-answer-box .answer-label {
  color: #94a3b8;
  font-size: 1rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 12px;
}

.final-answer-box .answer-value {
  color: #4ade80;
  font-size: 2rem;
  font-weight: 700;
}

.final-answer-box .answer-detail {
  color: #34d399;
  font-size: 1.2rem;
  margin-top: 8px;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-top: 16px;
}

.final-option {
  background: rgba(51, 65, 85, 0.6);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 20px;
  font-size: 1rem;
  transition: all 0.3s ease;
}

.final-option.correct {
  background: rgba(52, 211, 153, 0.15);
  border-color: #34d399;
  color: #34d399;
  font-weight: 600;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 16px;
  font-style: italic;
}

.pitfall {
  display: flex;
  gap: 12px;
  align-items: flex-start;
  margin-bottom: 12px;
}

.pitfall-icon {
  color: #f472b6;
  font-weight: 700;
  font-size: 1.2rem;
  flex-shrink: 0;
}

.challenge-box {
  background: rgba(244, 114, 182, 0.08);
  border: 1px solid rgba(244, 114, 182, 0.3);
  border-radius: 16px;
  padding: 24px 28px;
}

.challenge-box .card-title {
  color: #f472b6;
}

canvas {
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  max-width: 100%;
  touch-action: none;
}

.canvas-wrapper {
  text-align: center;
}

.canvas-caption {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 10px;
  text-align: center;
}

.checkpoint details summary {
  color: #34d399;
  font-size: 0.95rem;
}

.checkpoint details .detail-content {
  border-left-color: #34d399;
}

.slider-container {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-top: 12px;
  flex-wrap: wrap;
  justify-content: center;
}

.slider-container label {
  color: #94a3b8;
  font-size: 0.95rem;
}

.slider-container input[type="range"] {
  width: 200px;
  accent-color: #60a5fa;
}

.slider-value {
  color: #60a5fa;
  font-weight: 600;
  min-width: 40px;
  text-align: center;
}

@media (max-width: 700px) {
  h1 {
    font-size: 1.6rem;
  }
  .card {
    padding: 18px;
  }
  .given-grid {
    flex-direction: column;
  }
  .step {
    flex-direction: column;
    gap: 8px;
  }
  .step-badge {
    align-self: flex-start;
  }
  .final-answer-box .answer-value {
    font-size: 1.5rem;
  }
  .final-options {
    flex-direction: column;
    align-items: center;
  }
  .slider-container input[type="range"] {
    width: 140px;
  }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Aritmeticka i geometrijska progresija</h1>
  <p class="subtitle">Nizovi i progresije -- veza AP i GP, zbir clanova</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Tekst zadatka</h2>
    <div class="problem-text">
      <p>U rastucej aritmetickoj progresiji od 11 clanova, prvi, peti i jedanaesti clan cine prva tri clana geometrijske progresije. Ako je prvi clan te aritmeticke progresije jednak 24, tada je zbir svih clanova te aritmeticke progresije jednak:</p>
    </div>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(249\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(264\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(378\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(429\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(501\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p class="plan-text">
      Izrazicemo peti i jedanaesti clan AP pomocu prvog clana i razlike \( d \), zatim cemo primeniti uslov da ti clanovi cine GP (srednji clan na kvadrat jednak proizvodu krajnjih), resiti jednacinu po \( d \), i na kraju izracunati zbir svih 11 clanova.
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <h2>Podsetnik iz teorije</h2>
    <details>
      <summary>Kljucne formule za AP i GP (klikni da otvoris)</summary>
      <div class="detail-content">
        <p><strong>Aritmeticka progresija (AP):</strong></p>
        <ul style="margin: 8px 0 12px 20px; color: #e2e8f0;">
          <li>Opsti clan: \( a_n = a_1 + (n-1) \cdot d \)</li>
          <li>Zbir prvih \( n \) clanova: \( S_n = \dfrac{n}{2} \cdot (a_1 + a_n) \) ili \( S_n = \dfrac{n}{2} \cdot (2a_1 + (n-1)d) \)</li>
        </ul>
        <p><strong>Geometrijska progresija (GP):</strong></p>
        <ul style="margin: 8px 0 12px 20px; color: #e2e8f0;">
          <li>Uslov: tri broja \( a, b, c \) cine GP ako i samo ako je \( b^2 = a \cdot c \)</li>
          <li>Opsti clan: \( b_n = b_1 \cdot q^{n-1} \), gde je \( q \) kolicnik</li>
        </ul>
        <p><strong>Rastuca AP:</strong> znaci da je razlika \( d > 0 \), tj. svaki sledeci clan je veci od prethodnog.</p>
      </div>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <h2>Vizuelni prikaz</h2>
    <div class="canvas-wrapper">
      <canvas id="diagram" width="800" height="420"></canvas>
    </div>
    <div class="slider-container">
      <label for="d-slider">Razlika d:</label>
      <input type="range" id="d-slider" min="1" max="8" value="3" step="1">
      <span class="slider-value" id="d-value">3</span>
    </div>
    <p class="canvas-caption">Pomeri klizac da vidis kako razlika \( d \) utice na AP. Istaknuti clanovi (1., 5. i 11.) moraju ciniti GP.</p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step" id="step-1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <div class="step-title">Zapisimo clanove AP pomocu \( d \)</div>
        <p>Neka je \( d \) razlika aritmeticke progresije. Opsti clan AP je \( a_n = a_1 + (n-1)d \). Za poznate indekse:</p>
        <div class="step-math">
          \[ a_1 = 24 \]
        </div>
        <div class="step-math">
          \[ a_5 = 24 + 4d \]
        </div>
        <div class="step-math">
          \[ a_{11} = 24 + 10d \]
        </div>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step" id="step-2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <div class="step-title">Primenimo uslov geometrijske progresije</div>
        <p>Tri broja \( a_1, a_5, a_{11} \) cine GP. To znaci da srednji clan na kvadrat mora biti jednak proizvodu krajnjih:</p>
        <div class="step-math">
          \[ a_5^2 = a_1 \cdot a_{11} \]
        </div>
        <p>Uvrstimo izrazene clanove:</p>
        <div class="step-math">
          \[ (24 + 4d)^2 = 24 \cdot (24 + 10d) \]
        </div>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step" id="step-3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <div class="step-title">Razvijmo levu stranu</div>
        <p>Primenimo formulu \( (a + b)^2 = a^2 + 2ab + b^2 \):</p>
        <div class="step-math">
          \[ (24 + 4d)^2 = 576 + 192d + 16d^2 \]
        </div>

        <div class="checkpoint">
          <details>
            <summary>Proveri sebe: Koliko je \( (4d)^2 \)?</summary>
            <div class="detail-content">
              \( (4d)^2 = 16d^2 \). Cesta greska je napisati \( 4d^2 \) umesto \( 16d^2 \)!
            </div>
          </details>
        </div>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step" id="step-4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <div class="step-title">Razvijmo desnu stranu</div>
        <p>Pomnozimo 24 sa svakim clanom u zagradi:</p>
        <div class="step-math">
          \[ 24 \cdot (24 + 10d) = 576 + 240d \]
        </div>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step" id="step-5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <div class="step-title">Resimo jednacinu po \( d \)</div>
        <p>Izjednacimo levu i desnu stranu:</p>
        <div class="step-math">
          \[ 576 + 192d + 16d^2 = 576 + 240d \]
        </div>
        <p>Oduzimanjem \( 576 + 240d \) sa obe strane:</p>
        <div class="step-math">
          \[ 16d^2 + 192d - 240d = 0 \]
        </div>
        <div class="step-math">
          \[ 16d^2 - 48d = 0 \]
        </div>
        <p>Izlucimo zajednicki faktor \( 16d \):</p>
        <div class="step-math">
          \[ 16d(d - 3) = 0 \]
        </div>
        <p>Odavde: \( d = 0 \) ili \( d = 3 \).</p>

        <div class="checkpoint">
          <details>
            <summary>Proveri sebe: Zasto odbacujemo \( d = 0 \)?</summary>
            <div class="detail-content">
              Zato sto u zadatku pise da je AP <strong>rastuca</strong>. Ako bi \( d = 0 \), svi clanovi bi bili jednaki (24, 24, 24, ...), sto nije rastuca progresija. Dakle, mora biti \( d > 0 \), pa je \( d = 3 \).
            </div>
          </details>
        </div>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step" id="step-6">
      <div class="step-badge">6</div>
      <div class="step-content">
        <div class="step-title">Izracunajmo zbir svih 11 clanova</div>
        <p>Sada znamo: \( a_1 = 24 \), \( d = 3 \), \( n = 11 \). Poslednji clan je:</p>
        <div class="step-math">
          \[ a_{11} = 24 + 10 \cdot 3 = 24 + 30 = 54 \]
        </div>
        <p>Zbir racunamo formulom \( S_n = \dfrac{n}{2}(a_1 + a_n) \):</p>
        <div class="step-math">
          \[ S_{11} = \frac{11}{2} \cdot (24 + 54) = \frac{11}{2} \cdot 78 = 11 \cdot 39 = 429 \]
        </div>

        <div class="checkpoint">
          <details>
            <summary>Proveri sebe: Da li su \( a_1, a_5, a_{11} \) zaista u GP?</summary>
            <div class="detail-content">
              <p>Proverimo: \( a_1 = 24 \), \( a_5 = 24 + 12 = 36 \), \( a_{11} = 54 \).</p>
              <p>Kolicnik: \( \dfrac{a_5}{a_1} = \dfrac{36}{24} = \dfrac{3}{2} \) i \( \dfrac{a_{11}}{a_5} = \dfrac{54}{36} = \dfrac{3}{2} \).</p>
              <p>Kolicnici su jednaki, dakle jeste GP sa \( q = \dfrac{3}{2} \). Sve se slaze!</p>
            </div>
          </details>
        </div>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <div class="card-title"><span class="icon">Kljucni uvid</span></div>
    <p>Kljuc ovog zadatka je prepoznavanje uslova za GP: <strong>srednji clan na kvadrat jednak proizvodu krajnjih</strong>. Ovaj uslov \( b^2 = ac \) prevodi geometrijski zahtev u algebarsku jednacinu po nepoznatoj razlici \( d \). Kada god vidis vezu AP i GP, razmisli o ovom uslovu!</p>
    <div class="step-math" style="margin-top: 12px;">
      \[ a_5^2 = a_1 \cdot a_{11} \implies (24 + 4d)^2 = 24(24 + 10d) \implies d = 3 \implies S_{11} = 429 \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <div class="answer-label">Konacan odgovor</div>
    <div class="answer-value">\( S_{11} = 429 \)</div>
    <div class="answer-detail">Tacan odgovor je (D)</div>
    <div class="final-options">
      <div class="final-option">(A) 249</div>
      <div class="final-option">(B) 264</div>
      <div class="final-option">(C) 378</div>
      <div class="final-option correct">(D) 429</div>
      <div class="final-option">(E) 501</div>
    </div>
    <p class="verification-note">Provera: AP je 24, 27, 30, 33, 36, 39, 42, 45, 48, 51, 54. Sabiranjem svih 11 clanova dobijamo 429. Clanovi 24, 36, 54 cine GP sa kolicnikom \( q = \frac{3}{2} \).</p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Ceste greske</h2>
    <div class="pitfall">
      <span class="pitfall-icon">&#10007;</span>
      <p><strong>Zaboravljanje uslova "rastuca":</strong> Jednacina \( 16d(d - 3) = 0 \) daje dva resenja: \( d = 0 \) i \( d = 3 \). Ako se ne obrati paznja na uslov da je AP rastuca (\( d > 0 \)), moze se pogresno uzeti \( d = 0 \), sto bi dalo zbir \( 11 \cdot 24 = 264 \) -- sto je odgovor (B), ali je netacan.</p>
    </div>
    <div class="pitfall">
      <span class="pitfall-icon">&#10007;</span>
      <p><strong>Greska pri razvijanju \( (24 + 4d)^2 \):</strong> Treba paziti da se \( (4d)^2 = 16d^2 \), a ne \( 4d^2 \). Ovo je cesta greska koja vodi do pogresne kvadratne jednacine.</p>
    </div>
  </div>

  <!-- Optional Challenge -->
  <div class="challenge-box">
    <div class="card-title"><span class="icon">Dodatni izazov</span></div>
    <p>U istoj AP od 11 clanova (sa \( a_1 = 24 \) i \( d = 3 \)), koliki je zbir samo neparnih clanova (prvog, treceg, petog, sedmog, devetog i jedanaestog)?</p>
    <details>
      <summary>Pogledaj hint</summary>
      <div class="detail-content">
        <p>Neparni clanovi su: \( a_1, a_3, a_5, a_7, a_9, a_{11} \), tj. 24, 30, 36, 42, 48, 54. Ovi clanovi sami cine AP sa razlikom \( 2d = 6 \). Primeni formulu za zbir na ovih 6 clanova.</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('diagram');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  let currentD = 3;

  const slider = document.getElementById('d-slider');
  const dValueLabel = document.getElementById('d-value');

  function draw(d) {
    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    const a1 = 24;
    const terms = [];
    for (let i = 0; i < 11; i++) {
      terms.push(a1 + i * d);
    }

    const maxVal = Math.max(...terms, 60);
    const minVal = Math.min(...terms, 0);

    const leftPad = 60;
    const rightPad = 40;
    const topPad = 60;
    const bottomPad = 90;

    const plotW = W - leftPad - rightPad;
    const plotH = H - topPad - bottomPad;

    const barW = plotW / 11 - 8;
    const barGap = plotW / 11;

    const scaleY = plotH / (maxVal * 1.15);

    // Draw subtle grid lines
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    const gridSteps = 5;
    const gridStep = Math.ceil(maxVal / gridSteps / 5) * 5;
    for (let v = 0; v <= maxVal * 1.1; v += gridStep) {
      const gy = topPad + plotH - v * scaleY;
      if (gy < topPad - 10) break;
      ctx.beginPath();
      ctx.moveTo(leftPad, gy);
      ctx.lineTo(W - rightPad, gy);
      ctx.stroke();

      ctx.fillStyle = '#475569';
      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'right';
      ctx.fillText(v.toString(), leftPad - 8, gy + 4);
    }

    // Draw axis
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(leftPad, topPad);
    ctx.lineTo(leftPad, topPad + plotH);
    ctx.lineTo(W - rightPad, topPad + plotH);
    ctx.stroke();

    // Highlight indices (1, 5, 11 -- 0-indexed: 0, 4, 10)
    const gpIndices = [0, 4, 10];

    // Check GP condition
    const a5 = terms[4];
    const a11 = terms[10];
    const isGP = Math.abs(a5 * a5 - a1 * a11) < 0.01;

    // Draw bars
    for (let i = 0; i < 11; i++) {
      const bx = leftPad + i * barGap + 4;
      const bh = terms[i] * scaleY;
      const by = topPad + plotH - bh;

      const isHighlighted = gpIndices.includes(i);

      if (isHighlighted) {
        // Glow effect
        const gradient = ctx.createLinearGradient(bx, by, bx, topPad + plotH);
        gradient.addColorStop(0, 'rgba(52, 211, 153, 0.9)');
        gradient.addColorStop(1, 'rgba(52, 211, 153, 0.3)');
        ctx.fillStyle = gradient;

        ctx.shadowColor = '#34d399';
        ctx.shadowBlur = 12;
      } else {
        const gradient = ctx.createLinearGradient(bx, by, bx, topPad + plotH);
        gradient.addColorStop(0, 'rgba(96, 165, 250, 0.7)');
        gradient.addColorStop(1, 'rgba(96, 165, 250, 0.2)');
        ctx.fillStyle = gradient;

        ctx.shadowColor = 'transparent';
        ctx.shadowBlur = 0;
      }

      // Rounded bar top
      const radius = 4;
      ctx.beginPath();
      ctx.moveTo(bx + radius, by);
      ctx.lineTo(bx + barW - radius, by);
      ctx.quadraticCurveTo(bx + barW, by, bx + barW, by + radius);
      ctx.lineTo(bx + barW, topPad + plotH);
      ctx.lineTo(bx, topPad + plotH);
      ctx.lineTo(bx, by + radius);
      ctx.quadraticCurveTo(bx, by, bx + radius, by);
      ctx.fill();
      ctx.shadowBlur = 0;

      // Bar value label
      ctx.fillStyle = isHighlighted ? '#4ade80' : '#94a3b8';
      ctx.font = (isHighlighted ? 'bold ' : '') + '13px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(terms[i].toString(), bx + barW / 2, by - 8);

      // Index label
      ctx.fillStyle = isHighlighted ? '#34d399' : '#64748b';
      ctx.font = (isHighlighted ? 'bold ' : '') + '12px Segoe UI, system-ui, sans-serif';
      ctx.fillText('a' + (i + 1).toString(), bx + barW / 2, topPad + plotH + 20);
    }

    // Draw connecting curve for GP terms
    if (terms[0] > 0 && terms[4] > 0 && terms[10] > 0) {
      ctx.strokeStyle = isGP ? '#34d399' : 'rgba(244, 114, 182, 0.5)';
      ctx.lineWidth = 2;
      ctx.setLineDash([6, 4]);

      const pts = gpIndices.map(i => ({
        x: leftPad + i * barGap + 4 + barW / 2,
        y: topPad + plotH - terms[i] * scaleY
      }));

      ctx.beginPath();
      ctx.moveTo(pts[0].x, pts[0].y);
      // Quadratic curve through three points
      const cpx = pts[1].x;
      const cpy = pts[1].y - 15;
      ctx.quadraticCurveTo((pts[0].x + pts[1].x) / 2, (pts[0].y + pts[1].y) / 2 - 10, pts[1].x, pts[1].y);
      ctx.quadraticCurveTo((pts[1].x + pts[2].x) / 2, (pts[1].y + pts[2].y) / 2 - 10, pts[2].x, pts[2].y);
      ctx.stroke();
      ctx.setLineDash([]);
    }

    // GP status text
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    if (isGP) {
      ctx.fillStyle = '#34d399';
      ctx.fillText('GP uslov ispunjen: ' + terms[4] + '\u00B2 = ' + terms[0] + ' \u00D7 ' + terms[10] + ' = ' + (terms[0] * terms[10]), W / 2, topPad + plotH + 55);
      ctx.fillText('q = ' + terms[4] + '/' + terms[0] + ' = ' + (terms[4] / terms[0]).toFixed(2).replace('.', ','), W / 2, topPad + plotH + 75);
    } else {
      ctx.fillStyle = '#f472b6';
      const lhs = terms[4] * terms[4];
      const rhs = terms[0] * terms[10];
      ctx.fillText('GP uslov NIJE ispunjen: ' + terms[4] + '\u00B2 = ' + lhs + ' \u2260 ' + terms[0] + ' \u00D7 ' + terms[10] + ' = ' + rhs, W / 2, topPad + plotH + 55);
    }

    // Title
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('AP: a\u2081 = 24, d = ' + d + '   |   Zbir S\u2081\u2081 = ' + terms.reduce((a, b) => a + b, 0), W / 2, 28);

    // Legend
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';

    ctx.fillStyle = 'rgba(96, 165, 250, 0.7)';
    ctx.fillRect(W - rightPad - 200, 12, 14, 14);
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('Ostali clanovi AP', W - rightPad - 180, 24);

    ctx.fillStyle = 'rgba(52, 211, 153, 0.9)';
    ctx.fillRect(W - rightPad - 200, 32, 14, 14);
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('GP clanovi (a\u2081, a\u2085, a\u2081\u2081)', W - rightPad - 180, 44);
  }

  draw(currentD);

  // Slider event
  if (slider) {
    slider.addEventListener('input', function() {
      currentD = parseInt(this.value, 10);
      if (dValueLabel) dValueLabel.textContent = currentD.toString();
      draw(currentD);
    });
  }

  // Step click highlighting
  const steps = document.querySelectorAll('.step');
  steps.forEach(function(step) {
    step.addEventListener('click', function() {
      steps.forEach(function(s) { s.classList.remove('active'); });
      step.classList.add('active');
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Veza aritmeticke i geometrijske progresije",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["aritmeticka progresija", "geometrijska progresija", "zbir clanova", "nizovi", "kvadratna jednacina"]
}
BRAINSPARK_META-->