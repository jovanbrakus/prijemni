<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kompozicija racionalnih funkcija</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
  Problem: Given f(x) = (x - 2016) / (x + 2016) and g(x) = (1 - f(x)) / (1 + f(x)),
  find f(g(x)).

  Step 1: Compute g(x) by substituting f(x).
    g(x) = (1 - f(x)) / (1 + f(x))

    Numerator of g(x):
      1 - f(x) = 1 - (x - 2016)/(x + 2016)
               = [(x + 2016) - (x - 2016)] / (x + 2016)
               = [x + 2016 - x + 2016] / (x + 2016)
               = 4032 / (x + 2016)
               = 2*2016 / (x + 2016)

    Denominator of g(x):
      1 + f(x) = 1 + (x - 2016)/(x + 2016)
               = [(x + 2016) + (x - 2016)] / (x + 2016)
               = [x + 2016 + x - 2016] / (x + 2016)
               = 2x / (x + 2016)

    Therefore:
      g(x) = [4032 / (x + 2016)] / [2x / (x + 2016)]
           = 4032 / 2x
           = 2016 / x

    So g(x) = 2016/x.

  Step 2: Compute f(g(x)) = f(2016/x).
    f(2016/x) = (2016/x - 2016) / (2016/x + 2016)

    Numerator:
      2016/x - 2016 = (2016 - 2016x) / x = 2016(1 - x) / x

    Denominator:
      2016/x + 2016 = (2016 + 2016x) / x = 2016(1 + x) / x

    Therefore:
      f(g(x)) = [2016(1-x)/x] / [2016(1+x)/x]
              = 2016(1-x)/x * x/(2016(1+x))
              = (1-x)/(1+x)

    The 2016 cancels, the x cancels.

    f(g(x)) = (1-x)/(1+x)

  Answer: (C) (1-x)/(1+x)

  Verification:
    Let x = 1:
      f(1) = (1 - 2016)/(1 + 2016) = -2015/2017
      g(1) = (1 - (-2015/2017))/(1 + (-2015/2017))
           = (1 + 2015/2017)/(1 - 2015/2017)
           = ((2017 + 2015)/2017) / ((2017 - 2015)/2017)
           = 4032/2017 / 2/2017
           = 4032/2
           = 2016
      f(g(1)) = f(2016) = (2016 - 2016)/(2016 + 2016) = 0/4032 = 0
      Check with (C): (1-1)/(1+1) = 0/2 = 0. Correct!

    Let x = 2:
      g(2) = 2016/2 = 1008
      f(1008) = (1008 - 2016)/(1008 + 2016) = -1008/3024 = -1/3
      Check with (C): (1-2)/(1+2) = -1/3. Correct!
</script>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
}

.card-title {
  font-size: 1.3rem;
  color: #60a5fa;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.4rem;
}

.problem-text {
  font-size: 1.15rem;
  line-height: 1.8;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 18px;
}

.given-item {
  background: rgba(51, 65, 85, 0.6);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 120px;
  text-align: center;
  transition: all 0.3s ease;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  font-weight: 600;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.05rem;
}

.highlight-box {
  background: rgba(96, 165, 250, 0.1);
  border: 1px solid rgba(96, 165, 250, 0.3);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 16px 0;
  font-family: 'Courier New', monospace;
  font-size: 1.1rem;
  text-align: center;
}

.plan-text {
  color: #a78bfa;
  font-size: 1.05rem;
  font-style: italic;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 8px 0;
  user-select: none;
}

details summary:hover {
  color: #93bbfc;
}

details .detail-content {
  padding: 12px 16px;
  background: rgba(30, 41, 59, 0.7);
  border-left: 3px solid #60a5fa;
  border-radius: 0 8px 8px 0;
  margin-top: 8px;
}

.step {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  align-items: flex-start;
  padding: 8px;
  border-left: 3px solid transparent;
  border-radius: 8px;
  transition: all 0.3s ease;
  cursor: pointer;
}

.step:hover, .step.active {
  border-left-color: #4ade80;
  background: rgba(74, 222, 128, 0.03);
}

.step-badge {
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  font-weight: 700;
  font-size: 0.85rem;
  min-width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-title {
  font-weight: 600;
  color: #f472b6;
  margin-bottom: 6px;
  font-size: 1.05rem;
}

.step-math {
  background: rgba(167, 139, 250, 0.1);
  border: 1px solid rgba(167, 139, 250, 0.25);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 10px 0;
  font-family: 'Courier New', monospace;
  text-align: center;
  font-size: 1.05rem;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.12), rgba(167, 139, 250, 0.12));
  border: 1px solid rgba(167, 139, 250, 0.35);
  border-radius: 16px;
  padding: 24px 28px;
  margin-bottom: 24px;
}

.insight-box .card-title {
  color: #a78bfa;
}

.final-answer-box {
  background: rgba(52, 211, 153, 0.08);
  border: 2px solid #34d399;
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin-bottom: 24px;
}

.final-answer-box .answer-label {
  color: #94a3b8;
  font-size: 1rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 12px;
}

.final-answer-box .answer-value {
  color: #4ade80;
  font-size: 2rem;
  font-weight: 700;
}

.final-answer-box .answer-note {
  color: #34d399;
  font-size: 1.2rem;
  margin-top: 8px;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-top: 20px;
}

.final-option {
  background: rgba(51, 65, 85, 0.6);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 20px;
  font-size: 1rem;
  transition: all 0.3s ease;
}

.final-option.correct {
  background: rgba(52, 211, 153, 0.15);
  border-color: #34d399;
  color: #34d399;
  font-weight: 600;
}

.verification-note {
  margin-top: 20px;
  padding: 16px 20px;
  background: rgba(52, 211, 153, 0.06);
  border-radius: 10px;
  border: 1px solid rgba(52, 211, 153, 0.2);
  color: #94a3b8;
  font-size: 0.95rem;
  text-align: left;
}

.pitfall {
  display: flex;
  gap: 12px;
  align-items: flex-start;
  margin-bottom: 12px;
}

.pitfall-icon {
  color: #f472b6;
  font-weight: 700;
  font-size: 1.2rem;
  flex-shrink: 0;
}

.challenge-box {
  background: rgba(244, 114, 182, 0.08);
  border: 1px solid rgba(244, 114, 182, 0.3);
  border-radius: 16px;
  padding: 24px 28px;
}

.challenge-box .card-title {
  color: #f472b6;
}

canvas {
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  max-width: 100%;
  touch-action: none;
}

.canvas-wrapper {
  text-align: center;
}

.canvas-caption {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 10px;
  text-align: center;
}

.checkpoint details summary {
  color: #34d399;
  font-size: 0.95rem;
}

.checkpoint details .detail-content {
  border-left-color: #34d399;
}

@media (max-width: 700px) {
  h1 {
    font-size: 1.6rem;
  }
  .card {
    padding: 18px;
  }
  .given-grid {
    flex-direction: column;
  }
  .step {
    flex-direction: column;
    gap: 8px;
  }
  .step-badge {
    align-self: flex-start;
  }
  .final-answer-box .answer-value {
    font-size: 1.5rem;
  }
  .final-options {
    flex-direction: column;
    align-items: center;
  }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Kompozicija racionalnih funkcija</h1>
  <p class="subtitle">Racionalne funkcije - zamena promenljive i pojednostavljivanje izraza</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <div class="card-title"><span class="icon">&#128203;</span> Tekst zadatka</div>
    <div class="problem-text">
      <p>Date su funkcije \( f(x) = \dfrac{x - 2016}{x + 2016} \) i \( g(x) = \dfrac{1 - f(x)}{1 + f(x)} \). Tada je \( f(g(x)) \) jednako:</p>

      <div class="given-grid">
        <div class="given-item answer-option" data-option="A">
          <div class="label">(A)</div>
          <div class="value">\( 2016x \)</div>
        </div>
        <div class="given-item answer-option" data-option="B">
          <div class="label">(B)</div>
          <div class="value">\( \dfrac{x-1}{x+1} \)</div>
        </div>
        <div class="given-item answer-option" data-option="C">
          <div class="label">(C)</div>
          <div class="value">\( \dfrac{1-x}{1+x} \)</div>
        </div>
        <div class="given-item answer-option" data-option="D">
          <div class="label">(D)</div>
          <div class="value">\( 1 - 2016x \)</div>
        </div>
        <div class="given-item answer-option" data-option="E">
          <div class="label">(E)</div>
          <div class="value">\( 2017x \)</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127919;</span> Plan resavanja</div>
    <p class="plan-text">
      Pristup u dva koraka: prvo cemo odrediti eksplicitan oblik funkcije \( g(x) \) zamenom \( f(x) \) u njenu definiciju, a zatim cemo izracunati \( f(g(x)) \) uvrstivsi dobijeni \( g(x) \) u \( f \). Ocekujemo da se konstanta 2016 skrati i dobijemo jednostavan izraz.
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128218;</span> Podsetnik iz teorije</div>
    <details>
      <summary>&#128208; Kompozicija funkcija i algebarske operacije sa razlomcima</summary>
      <div class="detail-content">
        <p><strong>Kompozicija funkcija:</strong> Za dve funkcije \( f \) i \( g \), kompozicija \( f(g(x)) \) znaci da se rezultat \( g(x) \) uvrsti kao argument u \( f \).</p>
        <div class="step-math">
          \[ (f \circ g)(x) = f(g(x)) \]
        </div>
        <p style="margin-top: 12px;"><strong>Sabiranje/oduzimanje razlomaka:</strong> Za razlomak sa zajednickim imeniocem:</p>
        <div class="step-math">
          \[ 1 - \frac{a}{b} = \frac{b - a}{b}, \qquad 1 + \frac{a}{b} = \frac{b + a}{b} \]
        </div>
        <p style="margin-top: 12px;"><strong>Deljenje razlomaka:</strong> Deljenje dva razlomka sa istim imeniocem:</p>
        <div class="step-math">
          \[ \frac{\;\frac{A}{C}\;}{\;\frac{B}{C}\;} = \frac{A}{B} \]
        </div>
        <p style="margin-top: 8px;">Ove tri tehnike su sve sto nam je potrebno za resavanje ovog zadatka.</p>
      </div>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128202;</span> Vizuelni prikaz kompozicije</div>
    <div class="canvas-wrapper">
      <canvas id="diagram" width="800" height="420"></canvas>
    </div>
    <p class="canvas-caption">Dijagram toka: kako ulaz \( x \) prolazi kroz \( g \), pa kroz \( f \) i daje konacni rezultat</p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128290;</span> Resenje korak po korak</div>

    <!-- Step 1 -->
    <div class="step" data-step="1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <div class="step-title">Zapisimo \( g(x) \) eksplicitno</div>
        <p>Funkcija \( g \) je definisana pomocu \( f \). Uvrstimo izraz za \( f(x) \) u definiciju:</p>
        <div class="step-math">
          \[ g(x) = \frac{1 - f(x)}{1 + f(x)} = \frac{1 - \dfrac{x-2016}{x+2016}}{1 + \dfrac{x-2016}{x+2016}} \]
        </div>
        <p>Sada treba posebno da sredimo brojilac i imenilac.</p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step" data-step="2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <div class="step-title">Sredimo brojilac izraza za \( g(x) \)</div>
        <p>Svedimo na zajednicki imenilac \( (x + 2016) \):</p>
        <div class="step-math">
          \[ 1 - \frac{x - 2016}{x + 2016} = \frac{(x + 2016) - (x - 2016)}{x + 2016} \]
        </div>
        <p>Raspisemo u brojiocu:</p>
        <div class="step-math">
          \[ = \frac{x + 2016 - x + 2016}{x + 2016} = \frac{4032}{x + 2016} \]
        </div>
        <p style="color: #94a3b8; font-size: 0.95rem;">Primetimo: \( 4032 = 2 \cdot 2016 \). Clanovi sa \( x \) su se ponistili.</p>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step" data-step="3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <div class="step-title">Sredimo imenilac izraza za \( g(x) \)</div>
        <p>Analogno, za imenilac:</p>
        <div class="step-math">
          \[ 1 + \frac{x - 2016}{x + 2016} = \frac{(x + 2016) + (x - 2016)}{x + 2016} \]
        </div>
        <p>Raspisemo:</p>
        <div class="step-math">
          \[ = \frac{x + 2016 + x - 2016}{x + 2016} = \frac{2x}{x + 2016} \]
        </div>
        <p style="color: #94a3b8; font-size: 0.95rem;">Ovde su se konstante ponistile, a ostala su dva \( x \).</p>

        <div class="checkpoint">
          <details>
            <summary>&#9989; Proveri sebe: Sta se desava sa konstantama 2016?</summary>
            <div class="detail-content">
              U brojiocu: \( +2016 + 2016 = 4032 \) (clanovi \( x \) se poniste). U imeniocu: \( +2016 - 2016 = 0 \) (konstante se poniste). Ovaj obrazac je kljucan za ceo zadatak!
            </div>
          </details>
        </div>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step" data-step="4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <div class="step-title">Podelimo i dobijemo \( g(x) \)</div>
        <p>Sada delimo brojilac sa imeniocem. Posto oba razlomka imaju isti imenilac \( (x+2016) \), on se krati:</p>
        <div class="step-math">
          \[ g(x) = \frac{\dfrac{4032}{x + 2016}}{\dfrac{2x}{x + 2016}} = \frac{4032}{2x} = \frac{2016}{x} \]
        </div>
        <p>Odlicno! Funkcija \( g(x) \) se svodi na veoma jednostavan izraz.</p>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step" data-step="5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <div class="step-title">Izracunajmo \( f(g(x)) = f\!\left(\dfrac{2016}{x}\right) \)</div>
        <p>Sada uvrstimo \( g(x) = \dfrac{2016}{x} \) umesto \( x \) u funkciju \( f \):</p>
        <div class="step-math">
          \[ f\!\left(\frac{2016}{x}\right) = \frac{\dfrac{2016}{x} - 2016}{\dfrac{2016}{x} + 2016} \]
        </div>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step" data-step="6">
      <div class="step-badge">6</div>
      <div class="step-content">
        <div class="step-title">Sredimo brojilac kompozicije</div>
        <p>Iznesemo 2016 kao zajednicki faktor, pa svedemo na zajednicki imenilac:</p>
        <div class="step-math">
          \[ \frac{2016}{x} - 2016 = 2016\!\left(\frac{1}{x} - 1\right) = 2016 \cdot \frac{1 - x}{x} \]
        </div>
      </div>
    </div>

    <!-- Step 7 -->
    <div class="step" data-step="7">
      <div class="step-badge">7</div>
      <div class="step-content">
        <div class="step-title">Sredimo imenilac kompozicije</div>
        <p>Potpuno analogno:</p>
        <div class="step-math">
          \[ \frac{2016}{x} + 2016 = 2016\!\left(\frac{1}{x} + 1\right) = 2016 \cdot \frac{1 + x}{x} \]
        </div>

        <div class="checkpoint">
          <details>
            <summary>&#9989; Proveri sebe: Sta ce se desiti kada podelimo ova dva izraza?</summary>
            <div class="detail-content">
              Oba izraza imaju faktor \( 2016 \) i faktor \( \frac{1}{x} \). Kada ih podelimo, oba faktora ce se skratiti! Ostace samo \( \frac{1-x}{1+x} \).
            </div>
          </details>
        </div>
      </div>
    </div>

    <!-- Step 8 -->
    <div class="step" data-step="8">
      <div class="step-badge">8</div>
      <div class="step-content">
        <div class="step-title">Konacno skracivanje</div>
        <p>Podelimo brojilac i imenilac:</p>
        <div class="step-math">
          \[ f(g(x)) = \frac{2016 \cdot \dfrac{1-x}{x}}{2016 \cdot \dfrac{1+x}{x}} = \frac{\cancel{2016} \cdot \dfrac{1-x}{\cancel{x}}}{\cancel{2016} \cdot \dfrac{1+x}{\cancel{x}}} = \frac{1-x}{1+x} \]
        </div>
        <p>Faktori \( 2016 \) i \( \dfrac{1}{x} \) se krate, i dobijamo elegantan rezultat!</p>

        <div class="checkpoint">
          <details>
            <summary>&#9989; Brza provera: Sta je \( f(g(2)) \)?</summary>
            <div class="detail-content">
              <p>\( g(2) = \frac{2016}{2} = 1008 \)</p>
              <p style="margin-top: 4px;">\( f(1008) = \frac{1008 - 2016}{1008 + 2016} = \frac{-1008}{3024} = -\frac{1}{3} \)</p>
              <p style="margin-top: 4px;">Proverimo sa formulom: \( \frac{1-2}{1+2} = \frac{-1}{3} = -\frac{1}{3} \) &#10004;</p>
            </div>
          </details>
        </div>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <div class="card-title"><span class="icon">&#128161;</span> Kljucni uvid</div>
    <p>Konstanta 2016 je <strong>potpuno nebitna</strong> za konacni rezultat! Da je umesto 2016 bilo bilo koji drugi broj \( a \neq 0 \), sa \( f(x) = \frac{x-a}{x+a} \) i istom definicijom \( g \), dobili bismo isti rezultat. Funkcija \( g \) uvek vraca \( \frac{a}{x} \), a zatim se \( a \) krati u kompoziciji. Ovo je lepa posledica simetrije u strukturama racionalnih funkcija.</p>
    <div class="step-math" style="margin-top: 16px;">
      \[ f(g(x)) = \frac{1-x}{1+x} \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <div class="answer-label">Konacan odgovor</div>
    <div class="answer-value">\( f(g(x)) = \dfrac{1-x}{1+x} \)</div>
    <div class="answer-note">Tacan odgovor je (C)</div>

    <div class="final-options">
      <div class="final-option">(A) \( 2016x \)</div>
      <div class="final-option">(B) \( \dfrac{x-1}{x+1} \)</div>
      <div class="final-option correct">(C) \( \dfrac{1-x}{1+x} \)</div>
      <div class="final-option">(D) \( 1 - 2016x \)</div>
      <div class="final-option">(E) \( 2017x \)</div>
    </div>

    <div class="verification-note">
      <strong>Verifikacija:</strong> Za \( x = 1 \): \( g(1) = 2016 \), \( f(2016) = \frac{0}{4032} = 0 \). Formula daje \( \frac{1-1}{1+1} = 0 \). &#10004;
      Za \( x = 2 \): \( g(2) = 1008 \), \( f(1008) = -\frac{1}{3} \). Formula daje \( \frac{-1}{3} \). &#10004;
      Takodje, primetimo da je odgovor (B) bas \( \frac{x-1}{x+1} = -\frac{1-x}{1+x} \), sto je suprotan znak od (C) - cesta zamka!
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9888;&#65039;</span> Ceste greske</div>
    <div class="pitfall">
      <span class="pitfall-icon">&#10007;</span>
      <p><strong>Zamena znaka u brojiocu:</strong> Lako je pogresiti predznak i napisati \( \frac{x-1}{x+1} \) umesto \( \frac{1-x}{1+x} \). Ova dva izraza se razlikuju za minus: \( \frac{x-1}{x+1} = -\frac{1-x}{1+x} \). Pazljivo pratite redosled oduzimanja!</p>
    </div>
    <div class="pitfall">
      <span class="pitfall-icon">&#10007;</span>
      <p><strong>Racunanje bez faktorizacije:</strong> Ako ne iznesete 2016 kao zajednicki faktor u koraku 6-7, racun postaje mnogo komplikovaniji i lakse je napraviti gresku. Uvek trazite zajednicki faktor pre nego sto krenete da delite razlomke.</p>
    </div>
  </div>

  <!-- Optional Challenge -->
  <div class="challenge-box">
    <div class="card-title"><span class="icon">&#127942;</span> Dodatni izazov</div>
    <p>Sta je \( g(f(x)) \)? Da li je kompozicija komutativna, tj. da li vazi \( f(g(x)) = g(f(x)) \)?</p>
    <details>
      <summary>Pogledaj hint</summary>
      <div class="detail-content">
        <p>Izracunajte \( g(f(x)) \) direktno: zamenite \( x \) sa \( f(x) \) u formuli \( g(x) = \frac{2016}{x} \). Dobicete \( g(f(x)) = \frac{2016}{\frac{x-2016}{x+2016}} = \frac{2016(x+2016)}{x-2016} \). Ovo ocito nije isto kao \( \frac{1-x}{1+x} \), pa kompozicija <strong>nije komutativna</strong>.</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('diagram');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  // Slider state
  let sliderX = 0.5; // normalized 0..1
  let isDragging = false;

  // Slider geometry
  const sliderLeft = 100;
  const sliderRight = W - 100;
  const sliderY = H - 45;
  const sliderW = sliderRight - sliderLeft;
  const knobR = 10;

  function xFromSlider(t) {
    // map t in [0,1] to x in [-5, 5], avoiding 0
    let val = -5 + t * 10;
    if (Math.abs(val) < 0.05) val = 0.05;
    return val;
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    const x = xFromSlider(sliderX);
    const gx = 2016 / x;
    const fgx = (1 - x) / (1 + x);

    // Layout: three boxes connected by arrows
    // Box 1: x (input)
    // Box 2: g(x) = 2016/x
    // Box 3: f(g(x)) = (1-x)/(1+x)

    const boxW = 170;
    const boxH = 80;
    const boxY = 80;
    const gap = 70;
    const totalW = 3 * boxW + 2 * gap;
    const startX = (W - totalW) / 2;

    const boxes = [
      { x: startX, label: 'x', value: x.toFixed(2).replace('.', ','), color: '#60a5fa', borderColor: '#60a5fa' },
      { x: startX + boxW + gap, label: 'g(x) = 2016/x', value: isFinite(gx) ? gx.toFixed(2).replace('.', ',') : '\u221E', color: '#a78bfa', borderColor: '#a78bfa' },
      { x: startX + 2*(boxW + gap), label: 'f(g(x))', value: isFinite(fgx) ? fgx.toFixed(4).replace('.', ',') : 'nedefinisano', color: '#4ade80', borderColor: '#34d399' }
    ];

    // Draw title
    ctx.fillStyle = '#94a3b8';
    ctx.font = '16px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Tok kompozicije: x \u2192 g(x) \u2192 f(g(x))', W / 2, 30);

    // Draw boxes
    boxes.forEach((b, i) => {
      // Box background
      ctx.fillStyle = 'rgba(30, 41, 59, 0.9)';
      ctx.strokeStyle = b.borderColor;
      ctx.lineWidth = 2;
      const r = 12;
      ctx.beginPath();
      ctx.moveTo(b.x + r, boxY);
      ctx.lineTo(b.x + boxW - r, boxY);
      ctx.quadraticCurveTo(b.x + boxW, boxY, b.x + boxW, boxY + r);
      ctx.lineTo(b.x + boxW, boxY + boxH - r);
      ctx.quadraticCurveTo(b.x + boxW, boxY + boxH, b.x + boxW - r, boxY + boxH);
      ctx.lineTo(b.x + r, boxY + boxH);
      ctx.quadraticCurveTo(b.x, boxY + boxH, b.x, boxY + boxH - r);
      ctx.lineTo(b.x, boxY + r);
      ctx.quadraticCurveTo(b.x, boxY, b.x + r, boxY);
      ctx.closePath();
      ctx.fill();
      ctx.stroke();

      // Label
      ctx.fillStyle = b.color;
      ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(b.label, b.x + boxW / 2, boxY + 28);

      // Value
      ctx.fillStyle = '#e2e8f0';
      ctx.font = 'bold 20px Courier New, monospace';
      ctx.fillText(b.value, b.x + boxW / 2, boxY + 58);
    });

    // Draw arrows between boxes
    for (let i = 0; i < 2; i++) {
      const fromX = boxes[i].x + boxW;
      const toX = boxes[i + 1].x;
      const midY = boxY + boxH / 2;

      // Arrow line
      ctx.strokeStyle = '#94a3b8';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(fromX + 6, midY);
      ctx.lineTo(toX - 14, midY);
      ctx.stroke();

      // Arrowhead
      ctx.fillStyle = '#94a3b8';
      ctx.beginPath();
      ctx.moveTo(toX - 6, midY);
      ctx.lineTo(toX - 16, midY - 6);
      ctx.lineTo(toX - 16, midY + 6);
      ctx.closePath();
      ctx.fill();

      // Arrow label
      ctx.fillStyle = '#94a3b8';
      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      const labelText = i === 0 ? 'g' : 'f';
      ctx.fillText(labelText, (fromX + toX) / 2, midY - 12);
    }

    // Formula result row
    const formulaY = boxY + boxH + 50;
    ctx.fillStyle = '#94a3b8';
    ctx.font = '15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('g(x) = 2016 / x = 2016 / ' + x.toFixed(2).replace('.', ',') + ' = ' + (isFinite(gx) ? gx.toFixed(2).replace('.', ',') : '\u221E'), W / 2, formulaY);

    ctx.fillText('f(g(x)) = (1 \u2212 x) / (1 + x) = (1 \u2212 ' + x.toFixed(2).replace('.', ',') + ') / (1 + ' + x.toFixed(2).replace('.', ',') + ') = ' + (isFinite(fgx) ? fgx.toFixed(4).replace('.', ',') : 'nedefinisano'), W / 2, formulaY + 28);

    // Highlight that 2016 cancels
    ctx.fillStyle = '#a78bfa';
    ctx.font = 'italic 13px Segoe UI, system-ui, sans-serif';
    ctx.fillText('Konstanta 2016 se potpuno skrati u konacnom rezultatu!', W / 2, formulaY + 60);

    // Draw slider
    // Track
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 4;
    ctx.lineCap = 'round';
    ctx.beginPath();
    ctx.moveTo(sliderLeft, sliderY);
    ctx.lineTo(sliderRight, sliderY);
    ctx.stroke();

    // Filled portion
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 4;
    ctx.beginPath();
    ctx.moveTo(sliderLeft, sliderY);
    ctx.lineTo(sliderLeft + sliderX * sliderW, sliderY);
    ctx.stroke();

    // Knob
    const knobX = sliderLeft + sliderX * sliderW;
    ctx.fillStyle = '#60a5fa';
    ctx.beginPath();
    ctx.arc(knobX, sliderY, knobR, 0, Math.PI * 2);
    ctx.fill();
    ctx.strokeStyle = '#0f172a';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Slider label
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('x = ' + x.toFixed(2).replace('.', ','), sliderLeft - 80, sliderY + 5);
    ctx.textAlign = 'right';
    ctx.fillText('Pomeri klizac da menjas x', sliderRight + 10, sliderY - 18);

    ctx.lineCap = 'butt';
  }

  function getEventPos(e) {
    const rect = canvas.getBoundingClientRect();
    const scaleX = W / rect.width;
    const scaleY = H / rect.height;
    let clientX, clientY;
    if (e.touches) {
      clientX = e.touches[0].clientX;
      clientY = e.touches[0].clientY;
    } else {
      clientX = e.clientX;
      clientY = e.clientY;
    }
    return {
      x: (clientX - rect.left) * scaleX,
      y: (clientY - rect.top) * scaleY
    };
  }

  function isOnKnob(pos) {
    const knobX = sliderLeft + sliderX * sliderW;
    const dx = pos.x - knobX;
    const dy = pos.y - sliderY;
    return dx * dx + dy * dy <= (knobR + 8) * (knobR + 8);
  }

  function isOnTrack(pos) {
    return pos.x >= sliderLeft - 5 && pos.x <= sliderRight + 5 &&
           Math.abs(pos.y - sliderY) <= 20;
  }

  function updateSlider(pos) {
    let t = (pos.x - sliderLeft) / sliderW;
    t = Math.max(0, Math.min(1, t));
    // avoid x = 0 (t = 0.5 maps to x = 0)
    const x = xFromSlider(t);
    if (Math.abs(x) < 0.1) {
      t = x > 0 ? (0.1 + 5) / 10 : (-0.1 + 5) / 10;
    }
    sliderX = t;
    draw();
  }

  canvas.addEventListener('mousedown', function(e) {
    const pos = getEventPos(e);
    if (isOnKnob(pos) || isOnTrack(pos)) {
      isDragging = true;
      updateSlider(pos);
    }
  });

  canvas.addEventListener('mousemove', function(e) {
    if (isDragging) {
      updateSlider(getEventPos(e));
    }
    // Cursor
    const pos = getEventPos(e);
    canvas.style.cursor = (isOnKnob(pos) || isOnTrack(pos)) ? 'pointer' : 'default';
  });

  canvas.addEventListener('mouseup', function() {
    isDragging = false;
  });

  canvas.addEventListener('mouseleave', function() {
    isDragging = false;
  });

  // Touch events
  canvas.addEventListener('touchstart', function(e) {
    const pos = getEventPos(e);
    if (isOnKnob(pos) || isOnTrack(pos)) {
      isDragging = true;
      updateSlider(pos);
      e.preventDefault();
    }
  });

  canvas.addEventListener('touchmove', function(e) {
    if (isDragging) {
      updateSlider(getEventPos(e));
      e.preventDefault();
    }
  });

  canvas.addEventListener('touchend', function() {
    isDragging = false;
  });

  draw();

  // Step click highlight
  const steps = document.querySelectorAll('.step[data-step]');
  steps.forEach(function(step) {
    step.addEventListener('click', function() {
      steps.forEach(function(s) { s.classList.remove('active'); });
      step.classList.add('active');
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Kompozicija racionalnih funkcija f(g(x))",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["kompozicija funkcija", "racionalne funkcije", "algebarski razlomci", "pojednostavljivanje izraza", "funkcije"]
}
BRAINSPARK_META-->