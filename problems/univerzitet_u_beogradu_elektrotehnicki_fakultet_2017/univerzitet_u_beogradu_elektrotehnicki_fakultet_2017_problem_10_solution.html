<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zbir kosinusa uglova trougla</title>
<script type="text/info" id="logic-scratchpad">
Problem: U trouglu ABC je |BC| = 3*|AB| i ugao ABC = 60°. Naci cos(BAC) + cos(ACB).

Oznacimo:
  c = |AB|, a = |BC| = 3c, ugao B = 60°, b = |AC| = ?

Korak 1: Nadji b kosinusnom teoremom
  b² = a² + c² - 2ac·cos(B)
  PAZNJA: kosinusna teorema za ugao B glasi:
  b² = a² + c² - 2ac·cos(B)

  Ali zapravo, u standardnoj notaciji:
  - a je stranica naspram ugla A (tj. BC)
  - b je stranica naspram ugla B (tj. AC)
  - c je stranica naspram ugla C (tj. AB)

  Dato: a = |BC| = 3c gde c = |AB|, ugao B = 60°

  Kosinusna teorema za stranicu naspram ugla B:
  b² = a² + c² - 2ac·cos(B)
  b² = (3c)² + c² - 2·(3c)·c·cos(60°)
  b² = 9c² + c² - 6c²·(1/2)
  b² = 10c² - 3c²
  b² = 7c²
  b = c√7

Korak 2: Nadji cos(A) kosinusnom teoremom
  cos(A) = (b² + c² - a²) / (2bc)
  cos(A) = (7c² + c² - 9c²) / (2·c√7·c)
  cos(A) = (-c²) / (2c²√7)
  cos(A) = -1/(2√7)

Korak 3: Nadji cos(C) kosinusnom teoremom
  cos(C) = (a² + b² - c²) / (2ab)
  cos(C) = (9c² + 7c² - c²) / (2·3c·c√7)
  cos(C) = 15c² / (6c²√7)
  cos(C) = 15/(6√7)
  cos(C) = 5/(2√7)

Korak 4: Zbir
  cos(A) + cos(C) = -1/(2√7) + 5/(2√7) = 4/(2√7) = 2/√7

Provera: A + B + C = 180°
  cos(A) = -1/(2√7) ≈ -0,18898
  A ≈ arccos(-0,18898) ≈ 100,89°

  cos(C) = 5/(2√7) ≈ 0,94491
  C ≈ arccos(0,94491) ≈ 19,11°

  A + B + C ≈ 100,89° + 60° + 19,11° = 180° ✓

  cos(A) + cos(C) = 2/√7 ≈ 0,75593

Provera sinusnom teoremom:
  a/sin(A) = 3c/sin(100,89°) ≈ 3c/0,98198 ≈ 3,055c
  b/sin(B) = c√7/sin(60°) ≈ 2,6458c/0,86603 ≈ 3,055c ✓
  c/sin(C) = c/sin(19,11°) ≈ c/0,32733 ≈ 3,055c ✓

Odgovor: (B) 2/√7
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  font-size: 1.05rem;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
  transition: transform 0.2s, border-color 0.2s;
}

.given-item:hover {
  transform: translateY(-2px);
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
}

/* Plan card */
.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card h2 {
  color: #a78bfa;
}

/* Details/collapsible */
details {
  margin: 15px 0;
  background: rgba(167,139,250,0.06);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 1.05rem;
  user-select: none;
}

details summary:hover {
  color: #c4b5fd;
}

details[open] summary {
  margin-bottom: 12px;
}

details ul {
  list-style: none;
  padding-left: 0;
}

details li {
  padding: 6px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #e2e8f0;
}

details li:last-child {
  border-bottom: none;
}

/* Canvas card */
.canvas-card {
  text-align: center;
}

.canvas-card canvas {
  width: 100%;
  max-width: 700px;
  border-radius: 10px;
  border: 1px solid #334155;
  touch-action: none;
}

.canvas-hint {
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

/* Steps */
.step {
  display: flex;
  gap: 16px;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 14px;
  border-left: 3px solid transparent;
  transition: border-color 0.2s, background 0.2s;
  cursor: pointer;
}

.step:hover, .step.active {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}

.step-badge {
  flex-shrink: 0;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.95rem;
}

.step-content {
  flex: 1;
}

.step-content p {
  color: #94a3b8;
  margin-top: 6px;
}

/* Checkpoint */
.checkpoint {
  background: rgba(52,211,153,0.06);
  border: 1px solid rgba(52,211,153,0.18);
}

.checkpoint summary {
  color: #34d399;
}

/* Key insight */
.insight-card {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid rgba(167,139,250,0.25);
}

.insight-card h2 {
  color: #a78bfa;
}

/* Final answer */
.final-answer {
  border: 2px solid rgba(74,222,128,0.3);
  background: linear-gradient(135deg, rgba(74,222,128,0.06), rgba(52,211,153,0.04));
}

.final-answer h2 {
  color: #4ade80;
}

.answer-big {
  font-size: 1.6rem;
  font-weight: 700;
  color: #4ade80;
  text-align: center;
  margin: 20px 0;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 16px 0;
}

.option-box {
  padding: 10px 20px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: #1e293b;
  text-align: center;
  min-width: 90px;
  transition: transform 0.2s;
}

.option-box.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.1);
  transform: scale(1.05);
}

.option-box .opt-label {
  color: #94a3b8;
  font-size: 0.85rem;
}

.option-box .opt-value {
  font-size: 1.15rem;
  font-weight: 600;
  color: #e2e8f0;
}

.option-box.correct .opt-value {
  color: #4ade80;
}

.verification {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 14px;
  padding-top: 14px;
  border-top: 1px solid #334155;
}

/* Pitfalls */
.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 14px;
  margin-bottom: 8px;
  background: rgba(224,148,104,0.06);
  border-left: 3px solid #e09468;
  border-radius: 0 8px 8px 0;
  color: #e2e8f0;
}

.pitfall-list li strong {
  color: #e09468;
}

/* Challenge */
.challenge-card {
  border: 1px solid rgba(244,114,182,0.2);
  background: rgba(244,114,182,0.04);
}

.challenge-card h2 {
  color: #f472b6;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step { flex-direction: column; gap: 10px; }
  .given-grid { flex-direction: column; }
  .options-row { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Zbir kosinusa uglova trougla</h1>
  <p class="subtitle">Kosinusna teorema, odnos stranica i uglova u trouglu</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>U trouglu \(ABC\) je \(|BC| = 3 \cdot |AB|\) i \(\angle ABC = 60°\). Tada je zbir \(\cos \angle BAC + \cos \angle ACB\) jednak:</p>

    <div class="given-grid" style="margin-bottom: 18px;">
      <div class="given-item">
        <div class="label">Odnos stranica</div>
        <div class="value">\(|BC| = 3|AB|\)</div>
      </div>
      <div class="given-item">
        <div class="label">Ugao</div>
        <div class="value">\(\angle ABC = 60°\)</div>
      </div>
      <div class="given-item">
        <div class="label">Trazi se</div>
        <div class="value">\(\cos A + \cos C\)</div>
      </div>
    </div>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(\dfrac{1}{\sqrt{7}}\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(\dfrac{2}{\sqrt{7}}\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(\dfrac{3}{\sqrt{7}}\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(\dfrac{4}{\sqrt{7}}\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(\dfrac{5}{\sqrt{7}}\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>Uvedemo oznake za stranice, kosinusnom teoremom odredimo nepoznatu stranicu \(|AC|\), a zatim ponovo kosinusnom teoremom izracunamo \(\cos A\) i \(\cos C\) pojedinacno. Na kraju saberemo rezultate.</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Kljucne formule i teoreme</summary>
      <ul>
        <li><strong>Kosinusna teorema:</strong> \(b^2 = a^2 + c^2 - 2ac \cos B\) &mdash; povezuje stranicu trougla sa naspramnim uglom i preostale dve stranice.</li>
        <li><strong>Kosinusna teorema (oblik za ugao):</strong> \(\cos A = \dfrac{b^2 + c^2 - a^2}{2bc}\) &mdash; odredjuje kosinus ugla kada su poznate sve tri stranice.</li>
        <li><strong>Zbir uglova u trouglu:</strong> \(A + B + C = 180°\) &mdash; korisno za proveru rezultata.</li>
        <li><strong>Standardna oznaka:</strong> U trouglu \(ABC\), stranica \(a = |BC|\) je naspram ugla \(A\), stranica \(c = |AB|\) naspram ugla \(C\), stranica \(b = |AC|\) naspram ugla \(B\).</li>
      </ul>
    </details>
  </div>

  <!-- Canvas Visualization -->
  <div class="card canvas-card">
    <h2>Vizualizacija trougla</h2>
    <p style="color:#94a3b8; margin-bottom: 14px;">Interaktivni dijagram trougla \(ABC\) sa oznacenim stranicama i uglovima. Prevucite teme da istrazite oblik trougla.</p>
    <canvas id="triangle-canvas" width="700" height="500"></canvas>
    <p class="canvas-hint">Prevucite tacke A ili C da vidite kako se trougao menja (odnos stranica i ugao B ostaju isti)</p>
  </div>

  <!-- Step-by-step Solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <div class="step" id="step-1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Uvedimo oznake</h3>
        <p>Neka je \(c = |AB|\) i \(a = |BC| = 3c\). Ugao kod temena \(B\) je \(\angle ABC = 60°\). Nepoznata stranica je \(b = |AC|\).</p>
        <div class="math-box">
          \[ c = |AB|, \quad a = |BC| = 3c, \quad \angle B = 60° \]
        </div>
      </div>
    </div>

    <div class="step" id="step-2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Primenimo kosinusnu teoremu za stranicu \(b\)</h3>
        <p>Stranica \(b = |AC|\) je naspram ugla \(B\). Kosinusna teorema daje:</p>
        <div class="math-box">
          \[ b^2 = a^2 + c^2 - 2ac \cos B \]
        </div>
        <p>Uvrstimo poznate vrednosti:</p>
        <div class="math-box">
          \[ b^2 = (3c)^2 + c^2 - 2 \cdot 3c \cdot c \cdot \cos 60° \]
        </div>
      </div>
    </div>

    <div class="step" id="step-3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Izracunajmo \(b^2\)</h3>
        <p>Posto je \(\cos 60° = \dfrac{1}{2}\), razvijamo:</p>
        <div class="math-box">
          \[ b^2 = 9c^2 + c^2 - 6c^2 \cdot \frac{1}{2} \]
        </div>
        <div class="math-box">
          \[ b^2 = 10c^2 - 3c^2 = 7c^2 \]
        </div>
        <p>Dakle:</p>
        <div class="math-box">
          \[ b = c\sqrt{7} \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Koliko je \(b^2\) ako je \(c = 1\)?</summary>
      <p>\(b^2 = 7 \cdot 1^2 = 7\), pa je \(b = \sqrt{7} \approx 2{,}646\). Ovo ima smisla jer je \(b\) izmedju \(a - c = 2\) i \(a + c = 4\) (nejednakost trougla).</p>
    </details>

    <div class="step" id="step-4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Odredimo \(\cos A\)</h3>
        <p>Kosinusna teorema za ugao \(A\) (naspram stranice \(a = 3c\)):</p>
        <div class="math-box">
          \[ \cos A = \frac{b^2 + c^2 - a^2}{2bc} \]
        </div>
        <p>Uvrstimo \(a = 3c\), \(b = c\sqrt{7}\), \(c = c\):</p>
        <div class="math-box">
          \[ \cos A = \frac{7c^2 + c^2 - 9c^2}{2 \cdot c\sqrt{7} \cdot c} = \frac{-c^2}{2c^2\sqrt{7}} \]
        </div>
        <div class="math-box">
          \[ \cos A = -\frac{1}{2\sqrt{7}} \]
        </div>
        <p>Negativan kosinus znaci da je ugao \(A\) <span class="highlight">tup</span> (veci od \(90°\)).</p>
      </div>
    </div>

    <div class="step" id="step-5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Odredimo \(\cos C\)</h3>
        <p>Kosinusna teorema za ugao \(C\) (naspram stranice \(c\)):</p>
        <div class="math-box">
          \[ \cos C = \frac{a^2 + b^2 - c^2}{2ab} \]
        </div>
        <p>Uvrstimo \(a = 3c\), \(b = c\sqrt{7}\), \(c = c\):</p>
        <div class="math-box">
          \[ \cos C = \frac{9c^2 + 7c^2 - c^2}{2 \cdot 3c \cdot c\sqrt{7}} = \frac{15c^2}{6c^2\sqrt{7}} \]
        </div>
        <div class="math-box">
          \[ \cos C = \frac{5}{2\sqrt{7}} \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Da li je ugao \(C\) ostar?</summary>
      <p>Da! \(\cos C = \dfrac{5}{2\sqrt{7}} \approx 0{,}945 > 0\), sto znaci da je \(C \approx 19{,}1°\). Posto je naspramna stranica \(c = |AB|\) najkraca, ugao \(C\) treba da bude najmanji, sto se slaze.</p>
    </details>

    <div class="step" id="step-6">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Izracunajmo trazeni zbir</h3>
        <p>Sada saberemo oba kosinusa:</p>
        <div class="math-box">
          \[ \cos A + \cos C = -\frac{1}{2\sqrt{7}} + \frac{5}{2\sqrt{7}} \]
        </div>
        <p>Posto imaju isti imenilac, prosto sabiramo brojioce:</p>
        <div class="math-box">
          \[ \cos A + \cos C = \frac{-1 + 5}{2\sqrt{7}} = \frac{4}{2\sqrt{7}} \]
        </div>
        <div class="math-box">
          \[ \cos A + \cos C = \frac{2}{\sqrt{7}} \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Koliko je \(\frac{2}{\sqrt{7}}\) priblizno?</summary>
      <p>\(\sqrt{7} \approx 2{,}646\), pa je \(\dfrac{2}{\sqrt{7}} \approx \dfrac{2}{2{,}646} \approx 0{,}756\). Proverimo: \(\cos A \approx -0{,}189\), \(\cos C \approx 0{,}945\), zbir \(\approx 0{,}756\). Slaze se!</p>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="card insight-card">
    <h2>Kljucni uvid</h2>
    <p>Zahvaljujuci tome sto su oba kosinusa izrazena preko istog imenioca \(2\sqrt{7}\), sabiranje postaje trivijalno. Kljucna ideja je da kosinusnom teoremom mozemo izracunati kosinus <em>bilo kog</em> ugla kada poznajemo sve tri stranice &mdash; a treca stranica se upravo dobija iz iste kosinusne teoreme!</p>
    <div class="math-box" style="text-align:center; font-size:1.2rem; margin-top:16px;">
      \[ \cos A + \cos C = \frac{-1}{2\sqrt{7}} + \frac{5}{2\sqrt{7}} = \frac{4}{2\sqrt{7}} = \frac{2}{\sqrt{7}} \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer">
    <h2>Konacan odgovor</h2>
    <div class="answer-big">\(\dfrac{2}{\sqrt{7}}\)</div>

    <div class="options-row">
      <div class="option-box">
        <div class="opt-label">(A)</div>
        <div class="opt-value">\(\dfrac{1}{\sqrt{7}}\)</div>
      </div>
      <div class="option-box correct">
        <div class="opt-label">(B)</div>
        <div class="opt-value">\(\dfrac{2}{\sqrt{7}}\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(C)</div>
        <div class="opt-value">\(\dfrac{3}{\sqrt{7}}\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(D)</div>
        <div class="opt-value">\(\dfrac{4}{\sqrt{7}}\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(E)</div>
        <div class="opt-value">\(\dfrac{5}{\sqrt{7}}\)</div>
      </div>
    </div>

    <p class="verification"><strong>Verifikacija:</strong> Za \(c = 1\): stranice su \(a = 3\), \(b = \sqrt{7}\), \(c = 1\), ugao \(B = 60°\). Zbir uglova: \(A \approx 100{,}9° + 60° + 19{,}1° = 180°\) &check;. Numericka provera: \(\cos(100{,}9°) + \cos(19{,}1°) \approx -0{,}189 + 0{,}945 \approx 0{,}756 = \frac{2}{\sqrt{7}}\) &check;</p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Ceste greske</h2>
    <ul class="pitfall-list">
      <li><strong>Zamena stranica u kosinusnoj teoremi:</strong> Cesta greska je pogresno identifikovati koja stranica je naspram kog ugla. Stranica \(a = |BC|\) je naspram ugla \(A\) (ne ugla \(B\) ili \(C\)!). Obratite paznju na notaciju.</li>
      <li><strong>Zaboravljen minus kod \(\cos A\):</strong> Posto je \(b^2 + c^2 - a^2 = 7c^2 + c^2 - 9c^2 = -c^2 < 0\), kosinus ugla \(A\) je negativan. Ako se previdi minus, dobija se pogresan zbir \(\frac{6}{2\sqrt{7}} = \frac{3}{\sqrt{7}}\) (odgovor C), sto je zamka!</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>U istom trouglu (\(|BC| = 3|AB|\), \(\angle B = 60°\)), izracunajte proizvod \(\sin \angle BAC \cdot \sin \angle ACB\).</p>
    <details>
      <summary>Pomoc</summary>
      <p>Koristite sinusnu teoremu: \(\dfrac{a}{\sin A} = \dfrac{c}{\sin C}\), pa je \(\dfrac{\sin A}{\sin C} = \dfrac{a}{c} = 3\). Takodje, iz \(A + C = 120°\) mozete dobiti sistem jednacina. Alternativno, koristite formulu za povrsinu trougla: \(P = \frac{1}{2}ac\sin B\) i uporedite sa \(P = \frac{1}{2}bc\sin A = \frac{1}{2}ab\sin C\).</p>
    </details>
  </div>

</div>

<script>
(() => {
  // Step click interactivity
  var steps = document.querySelectorAll('.step');
  steps.forEach(function(step) {
    step.addEventListener('click', function() {
      steps.forEach(function(s) { s.classList.remove('active'); });
      step.classList.add('active');
    });
  });

  // Canvas visualization - interactive triangle
  var canvas = document.getElementById('triangle-canvas');
  if (!canvas) return;
  var ctx = canvas.getContext('2d');
  var W = canvas.width;
  var H = canvas.height;

  // Triangle parameters: |BC| = 3|AB|, angle B = 60°
  // Place B at a fixed position, then compute A and C
  // Let c = |AB|, a = |BC| = 3c, angle B = 60°

  var scale = 70; // pixels per unit length (c=1)
  var originX = W / 2;
  var originY = H / 2 + 40;

  // Fixed B position
  var Bx = -1.0;
  var By = 0.0;

  // We parameterize by rotation: let the direction from B to A be at angle theta
  var theta = Math.PI * 0.55; // angle of BA direction from positive x-axis

  // Drag state
  var dragging = null; // 'A' or 'C' or null
  var dragOffsetX = 0;
  var dragOffsetY = 0;

  function toCanvas(x, y) {
    return { x: originX + x * scale, y: originY - y * scale };
  }

  function fromCanvas(cx, cy) {
    return { x: (cx - originX) / scale, y: (originY - cy) / scale };
  }

  function getTrianglePoints() {
    var c = 2.0; // |AB| in world units
    var a = 3 * c; // |BC|

    // A is at distance c from B, direction theta
    var Ax = Bx + c * Math.cos(theta);
    var Ay = By + c * Math.sin(theta);

    // C is at distance a from B, direction theta - 60° (angle ABC = 60°)
    var Cx = Bx + a * Math.cos(theta - Math.PI / 3);
    var Cy = By + a * Math.sin(theta - Math.PI / 3);

    return { A: {x: Ax, y: Ay}, B: {x: Bx, y: By}, C: {x: Cx, y: Cy}, c: c, a: a };
  }

  function dist(p1, p2) {
    return Math.sqrt((p1.x - p2.x) * (p1.x - p2.x) + (p1.y - p2.y) * (p1.y - p2.y));
  }

  function drawTriangle() {
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    var tri = getTrianglePoints();
    var A = toCanvas(tri.A.x, tri.A.y);
    var B = toCanvas(tri.B.x, tri.B.y);
    var C = toCanvas(tri.C.x, tri.C.y);

    // Draw filled triangle with subtle fill
    ctx.beginPath();
    ctx.moveTo(A.x, A.y);
    ctx.lineTo(B.x, B.y);
    ctx.lineTo(C.x, C.y);
    ctx.closePath();
    ctx.fillStyle = 'rgba(96,165,250,0.05)';
    ctx.fill();

    // Draw triangle edges
    // Side a = BC (blue)
    ctx.beginPath();
    ctx.moveTo(B.x, B.y);
    ctx.lineTo(C.x, C.y);
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.stroke();

    // Side b = AC (purple)
    ctx.beginPath();
    ctx.moveTo(A.x, A.y);
    ctx.lineTo(C.x, C.y);
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2.5;
    ctx.stroke();

    // Side c = AB (pink)
    ctx.beginPath();
    ctx.moveTo(A.x, A.y);
    ctx.lineTo(B.x, B.y);
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2.5;
    ctx.stroke();

    // Draw angle arc at B (60°)
    var angleRadius = 30;
    var angleStartB = Math.atan2(-(tri.C.y - tri.B.y), tri.C.x - tri.B.x);
    var angleEndB = Math.atan2(-(tri.A.y - tri.B.y), tri.A.x - tri.B.x);
    // Correct arc direction
    ctx.beginPath();
    ctx.arc(B.x, B.y, angleRadius, angleStartB, angleEndB, false);
    ctx.strokeStyle = '#34d399';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Label 60° at B
    var angleMidB = (angleStartB + angleEndB) / 2;
    ctx.fillStyle = '#34d399';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText('60\u00B0', B.x + 42 * Math.cos(angleMidB), B.y + 42 * Math.sin(angleMidB));

    // Draw angle arc at A
    var angleRadiusA = 25;
    var angleStartA = Math.atan2(-(tri.B.y - tri.A.y), tri.B.x - tri.A.x);
    var angleEndA = Math.atan2(-(tri.C.y - tri.A.y), tri.C.x - tri.A.x);
    ctx.beginPath();
    // Determine correct direction
    var diffA = angleEndA - angleStartA;
    while (diffA < -Math.PI) diffA += 2 * Math.PI;
    while (diffA > Math.PI) diffA -= 2 * Math.PI;
    if (diffA > 0) {
      ctx.arc(A.x, A.y, angleRadiusA, angleStartA, angleEndA, false);
    } else {
      ctx.arc(A.x, A.y, angleRadiusA, angleStartA, angleEndA, true);
    }
    ctx.strokeStyle = 'rgba(244,114,182,0.6)';
    ctx.lineWidth = 1.5;
    ctx.stroke();

    // Draw angle arc at C
    var angleRadiusC = 25;
    var angleStartC = Math.atan2(-(tri.A.y - tri.C.y), tri.A.x - tri.C.x);
    var angleEndC = Math.atan2(-(tri.B.y - tri.C.y), tri.B.x - tri.C.x);
    ctx.beginPath();
    var diffC = angleEndC - angleStartC;
    while (diffC < -Math.PI) diffC += 2 * Math.PI;
    while (diffC > Math.PI) diffC -= 2 * Math.PI;
    if (diffC > 0) {
      ctx.arc(C.x, C.y, angleRadiusC, angleStartC, angleEndC, false);
    } else {
      ctx.arc(C.x, C.y, angleRadiusC, angleStartC, angleEndC, true);
    }
    ctx.strokeStyle = 'rgba(96,165,250,0.6)';
    ctx.lineWidth = 1.5;
    ctx.stroke();

    // Side labels
    // Label side a = BC = 3c (midpoint of BC)
    var midBC = { x: (B.x + C.x) / 2, y: (B.y + C.y) / 2 };
    var normBCx = -(C.y - B.y);
    var normBCy = (C.x - B.x);
    var normBClen = Math.sqrt(normBCx * normBCx + normBCy * normBCy);
    normBCx /= normBClen; normBCy /= normBClen;
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText('a = 3c', midBC.x + normBCx * 20, midBC.y + normBCy * 20);

    // Label side c = AB (midpoint of AB)
    var midAB = { x: (A.x + B.x) / 2, y: (A.y + B.y) / 2 };
    var normABx = -(B.y - A.y);
    var normABy = (B.x - A.x);
    var normABlen = Math.sqrt(normABx * normABx + normABy * normABy);
    normABx /= normABlen; normABy /= normABlen;
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.fillText('c', midAB.x - normABx * 18, midAB.y - normABy * 18);

    // Label side b = AC = c*sqrt(7) (midpoint of AC)
    var midAC = { x: (A.x + C.x) / 2, y: (A.y + C.y) / 2 };
    var normACx = -(C.y - A.y);
    var normACy = (C.x - A.x);
    var normAClen = Math.sqrt(normACx * normACx + normACy * normACy);
    normACx /= normAClen; normACy /= normAClen;
    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.fillText('b = c\u221A7', midAC.x + normACx * 22, midAC.y + normACy * 22);

    // Draw vertices as circles
    // A
    ctx.beginPath();
    ctx.arc(A.x, A.y, 7, 0, 2 * Math.PI);
    ctx.fillStyle = '#f472b6';
    ctx.fill();
    ctx.strokeStyle = '#0c1222';
    ctx.lineWidth = 2;
    ctx.stroke();

    // B
    ctx.beginPath();
    ctx.arc(B.x, B.y, 7, 0, 2 * Math.PI);
    ctx.fillStyle = '#34d399';
    ctx.fill();
    ctx.strokeStyle = '#0c1222';
    ctx.lineWidth = 2;
    ctx.stroke();

    // C
    ctx.beginPath();
    ctx.arc(C.x, C.y, 7, 0, 2 * Math.PI);
    ctx.fillStyle = '#60a5fa';
    ctx.fill();
    ctx.strokeStyle = '#0c1222';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Vertex labels
    ctx.font = 'bold 18px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';

    // Position labels away from triangle center
    var centroid = { x: (A.x + B.x + C.x) / 3, y: (A.y + B.y + C.y) / 3 };

    var labelDist = 22;

    var dAx = A.x - centroid.x;
    var dAy = A.y - centroid.y;
    var dAlen = Math.sqrt(dAx * dAx + dAy * dAy);
    ctx.fillStyle = '#f472b6';
    ctx.fillText('A', A.x + labelDist * dAx / dAlen, A.y + labelDist * dAy / dAlen);

    var dBx = B.x - centroid.x;
    var dBy = B.y - centroid.y;
    var dBlen = Math.sqrt(dBx * dBx + dBy * dBy);
    ctx.fillStyle = '#34d399';
    ctx.fillText('B', B.x + labelDist * dBx / dBlen, B.y + labelDist * dBy / dBlen);

    var dCx = C.x - centroid.x;
    var dCy = C.y - centroid.y;
    var dClen = Math.sqrt(dCx * dCx + dCy * dCy);
    ctx.fillStyle = '#60a5fa';
    ctx.fillText('C', C.x + labelDist * dCx / dClen, C.y + labelDist * dCy / dClen);

    // Info box at top
    var cosA = -1 / (2 * Math.sqrt(7));
    var cosC = 5 / (2 * Math.sqrt(7));
    var sum = cosA + cosC;

    ctx.fillStyle = 'rgba(30,41,59,0.9)';
    ctx.fillRect(10, 10, 320, 100);
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.strokeRect(10, 10, 320, 100);

    ctx.textAlign = 'left';
    ctx.textBaseline = 'top';
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.fillText('cos A = -1/(2\u221A7) \u2248 ' + cosA.toFixed(4), 20, 20);
    ctx.fillText('cos C = 5/(2\u221A7) \u2248 ' + cosC.toFixed(4), 20, 42);
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.fillText('cos A + cos C = 2/\u221A7 \u2248 ' + sum.toFixed(4), 20, 68);

    // Angle values
    var angleA = Math.acos(cosA) * 180 / Math.PI;
    var angleC = Math.acos(cosC) * 180 / Math.PI;
    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.fillText('A \u2248 ' + angleA.toFixed(1) + '\u00B0, B = 60\u00B0, C \u2248 ' + angleC.toFixed(1) + '\u00B0', 20, 92);
  }

  // Mouse/touch interaction for dragging
  function getEventPos(e) {
    var rect = canvas.getBoundingClientRect();
    var scaleX = W / rect.width;
    var scaleY = H / rect.height;
    if (e.touches && e.touches.length > 0) {
      return {
        x: (e.touches[0].clientX - rect.left) * scaleX,
        y: (e.touches[0].clientY - rect.top) * scaleY
      };
    }
    return {
      x: (e.clientX - rect.left) * scaleX,
      y: (e.clientY - rect.top) * scaleY
    };
  }

  function handleDown(e) {
    var pos = getEventPos(e);
    var tri = getTrianglePoints();
    var A = toCanvas(tri.A.x, tri.A.y);
    var C = toCanvas(tri.C.x, tri.C.y);

    var dA = Math.sqrt((pos.x - A.x) * (pos.x - A.x) + (pos.y - A.y) * (pos.y - A.y));
    var dC = Math.sqrt((pos.x - C.x) * (pos.x - C.x) + (pos.y - C.y) * (pos.y - C.y));

    if (dA < 25) {
      dragging = 'A';
      e.preventDefault();
    } else if (dC < 25) {
      dragging = 'C';
      e.preventDefault();
    }
  }

  function handleMove(e) {
    if (!dragging) return;
    e.preventDefault();
    var pos = getEventPos(e);
    var world = fromCanvas(pos.x, pos.y);

    // Compute new theta based on dragged position
    if (dragging === 'A') {
      // theta is the angle from B to A
      theta = Math.atan2(world.y - By, world.x - Bx);
    } else if (dragging === 'C') {
      // C direction from B is theta - pi/3, so theta = direction + pi/3
      var dirC = Math.atan2(world.y - By, world.x - Bx);
      theta = dirC + Math.PI / 3;
    }
    drawTriangle();
  }

  function handleUp() {
    dragging = null;
  }

  canvas.addEventListener('mousedown', handleDown);
  canvas.addEventListener('mousemove', handleMove);
  canvas.addEventListener('mouseup', handleUp);
  canvas.addEventListener('mouseleave', handleUp);
  canvas.addEventListener('touchstart', handleDown);
  canvas.addEventListener('touchmove', handleMove);
  canvas.addEventListener('touchend', handleUp);

  // Initial draw
  drawTriangle();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Zbir kosinusa uglova trougla sa datim odnosom stranica",
  "subject": "math",
  "unit": "trigonometry",
  "topic_tags": ["kosinusna teorema", "trougao", "kosinus ugla", "trigonometrija", "odnos stranica"]
}
BRAINSPARK_META-->