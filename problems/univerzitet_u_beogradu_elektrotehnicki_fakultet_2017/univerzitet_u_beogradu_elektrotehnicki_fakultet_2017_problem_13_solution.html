<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ugao izmedju tangenata dveju krivih</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM:
Find the acute angle between the tangent to the curve 2x^2 + 3y^2 = 5 at (1,1)
and the tangent to the curve x^2 - 4x + y^2 + 6y = 3 at (2,1).

SOLUTION:

Step 1: Tangent to curve 1: 2x^2 + 3y^2 = 5 at (1,1).
Implicit differentiation:
4x + 6y * y' = 0
y' = -4x / (6y) = -2x / (3y)
At (1,1): y' = -2/3
So k1 = -2/3.

Tangent line 1: y - 1 = (-2/3)(x - 1)  =>  y = -2x/3 + 5/3

Check: Point (1,1) on curve 1: 2(1)^2 + 3(1)^2 = 2 + 3 = 5. OK.

Step 2: Tangent to curve 2: x^2 - 4x + y^2 + 6y = 3 at (2,1).
Rewrite: (x-2)^2 - 4 + (y+3)^2 - 9 = 3  =>  (x-2)^2 + (y+3)^2 = 16
This is a circle with center (2,-3) and radius 4.

Check: Point (2,1) on circle: (2-2)^2 + (1+3)^2 = 0 + 16 = 16. OK.

Implicit differentiation:
2x - 4 + 2y*y' + 6y' = 0
y'(2y + 6) = -(2x - 4)
y' = -(2x - 4)/(2y + 6)
At (2,1): y' = -(4 - 4)/(2 + 6) = 0/8 = 0
So k2 = 0.

Tangent line 2: y = 1 (horizontal line).

Alternative check: radius from center (2,-3) to (2,1) is vertical (direction (0,4)).
Tangent is perpendicular to radius, so tangent is horizontal. Confirmed k2 = 0.

Step 3: Angle between lines.
tan(alpha) = |k1 - k2| / |1 + k1*k2|
           = |(-2/3) - 0| / |1 + (-2/3)(0)|
           = |-2/3| / |1|
           = 2/3

alpha = arctan(2/3)

ANSWER: (C) arctan(2/3)

VERIFICATION:
- Both points verified on their respective curves.
- Slopes computed via implicit differentiation: k1 = -2/3, k2 = 0.
- Formula for angle between lines applied correctly.
- arctan(2/3) is indeed an acute angle (between 0 and pi/2). Confirmed.
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
  transition: border-color 0.2s;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 10px 0;
  user-select: none;
}

details summary:hover {
  color: #93bbfc;
}

details[open] summary {
  margin-bottom: 10px;
}

.theory-content ul {
  list-style: none;
  padding-left: 0;
}

.theory-content li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #cbd5e1;
}

.theory-content li:last-child {
  border-bottom: none;
}

.canvas-card {
  background: #0c1222;
  border: 1px solid #1e293b;
  border-radius: 12px;
  padding: 16px;
  text-align: center;
}

canvas {
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  max-width: 100%;
  touch-action: none;
}

.canvas-caption {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 10px;
  text-align: center;
}

.step {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  align-items: flex-start;
  padding: 8px;
  border-left: 3px solid transparent;
  border-radius: 4px;
  transition: border-color 0.2s, background 0.2s;
  cursor: pointer;
}

.step:hover, .step.active {
  border-left-color: #4ade80;
  background: rgba(74, 222, 128, 0.04);
}

.step-badge {
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  font-weight: 700;
  font-size: 0.85rem;
  min-width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-title {
  font-weight: 600;
  color: #f472b6;
  margin-bottom: 6px;
  font-size: 1.05rem;
}

.step-math {
  background: rgba(167,139,250,0.1);
  border: 1px solid rgba(167,139,250,0.25);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 10px 0;
  font-family: 'Courier New', monospace;
  text-align: center;
  font-size: 1.05rem;
  overflow-x: auto;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.35);
  border-radius: 16px;
  padding: 24px 28px;
  margin-bottom: 24px;
}

.insight-box h2 {
  color: #a78bfa;
}

.final-answer-box {
  background: rgba(52,211,153,0.08);
  border: 2px solid #34d399;
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin-bottom: 24px;
}

.final-answer-box .answer-label {
  color: #94a3b8;
  font-size: 1rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 12px;
}

.final-answer-box .answer-value {
  color: #4ade80;
  font-size: 2rem;
  font-weight: 700;
}

.final-answer-box .answer-note {
  color: #34d399;
  font-size: 1.2rem;
  margin-top: 8px;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-top: 16px;
}

.final-option {
  background: rgba(51,65,85,0.6);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 20px;
  font-size: 1rem;
  transition: all 0.3s ease;
}

.final-option.correct {
  background: rgba(52,211,153,0.15);
  border-color: #34d399;
  color: #34d399;
  font-weight: 600;
}

.verification-box {
  background: rgba(52,211,153,0.06);
  border: 1px solid rgba(52,211,153,0.2);
  border-radius: 10px;
  padding: 16px 20px;
  margin-top: 16px;
  text-align: left;
}

.verification-box p {
  color: #94a3b8;
  font-size: 0.95rem;
}

.pitfall {
  display: flex;
  gap: 12px;
  align-items: flex-start;
  margin-bottom: 12px;
}

.pitfall-icon {
  color: #f472b6;
  font-weight: 700;
  font-size: 1.2rem;
  flex-shrink: 0;
}

.challenge-box {
  background: rgba(244,114,182,0.08);
  border: 1px solid rgba(244,114,182,0.3);
  border-radius: 16px;
  padding: 24px 28px;
}

.challenge-box h2 {
  color: #f472b6;
}

.checkpoint details summary {
  color: #34d399;
  font-size: 0.95rem;
}

.checkpoint details .detail-content {
  border-left-color: #34d399;
}

.detail-content {
  padding: 12px 16px;
  background: rgba(30,41,59,0.7);
  border-left: 3px solid #60a5fa;
  border-radius: 0 8px 8px 0;
  margin-top: 8px;
}

.system-label {
  display: inline-block;
  background: rgba(167,139,250,0.15);
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 6px;
  padding: 2px 8px;
  font-size: 0.85rem;
  color: #a78bfa;
  margin-right: 6px;
}

@media (max-width: 700px) {
  h1 {
    font-size: 1.6rem;
  }
  .card {
    padding: 18px;
  }
  .given-grid {
    justify-content: center;
  }
  .step {
    flex-direction: column;
    gap: 8px;
  }
  .step-badge {
    align-self: flex-start;
  }
  .final-answer-box .answer-value {
    font-size: 1.5rem;
  }
  .final-options {
    flex-direction: column;
    align-items: center;
  }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title & Subtitle -->
  <h1>Ugao izmedju tangenata dveju krivih</h1>
  <p class="subtitle">Analitička geometrija i diferencijalni račun &#8212; implicitno diferenciranje, jednačina tangente, ugao izmedju pravih</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Tekst zadatka</h2>
    <p>Oštar ugao pod kojim se seku tangenta krive \( 2x^2 + 3y^2 = 5 \) u njenoj tački \( (1, 1) \) i tangenta krive \( x^2 - 4x + y^2 + 6y = 3 \) u njenoj tački \( (2, 1) \) jednak je:</p>

    <div class="given-grid" style="margin-bottom: 16px;">
      <div class="given-item">
        <div class="label">Kriva 1</div>
        <div class="value">\(2x^2 + 3y^2 = 5\)</div>
      </div>
      <div class="given-item">
        <div class="label">Tačka 1</div>
        <div class="value">\((1,\, 1)\)</div>
      </div>
      <div class="given-item">
        <div class="label">Kriva 2</div>
        <div class="value">\(x^2 - 4x + y^2 + 6y = 3\)</div>
      </div>
      <div class="given-item">
        <div class="label">Tačka 2</div>
        <div class="value">\((2,\, 1)\)</div>
      </div>
    </div>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(\arctan\frac{1}{2}\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(\arctan\frac{3}{2}\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(\arctan\frac{2}{3}\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(\arctan\frac{1}{6}\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(\arctan\frac{3}{5}\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan rešavanja</h2>
    <p style="color: #a78bfa; font-style: italic;">
      Implicitnim diferenciranjem odredićemo nagibe tangenata obe krive u datim tačkama. Zatim ćemo primeniti formulu za ugao izmedju dveju pravih: \( \tan\alpha = \left|\frac{k_1 - k_2}{1 + k_1 k_2}\right| \).
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <h2>Podsetnik iz teorije</h2>
    <details>
      <summary>Ključne formule i teoreme (klikni da otvoriš)</summary>
      <div class="theory-content">
        <ul>
          <li><strong>Implicitno diferenciranje:</strong> Ako je kriva zadata implicitno sa \( F(x, y) = 0 \), tada je \( y' = -\frac{F_x}{F_y} \), gde su \( F_x \) i \( F_y \) parcijalni izvodi.</li>
          <li><strong>Jednačina tangente:</strong> Tangenta na krivu u tački \( (x_0, y_0) \) sa nagibom \( k \) glasi:
            \[ y - y_0 = k(x - x_0) \]
          </li>
          <li><strong>Ugao izmedju dveju pravih:</strong> Ako prave imaju nagibe \( k_1 \) i \( k_2 \), oštar ugao \( \alpha \) izmedju njih je:
            \[ \tan\alpha = \left|\frac{k_1 - k_2}{1 + k_1 \cdot k_2}\right| \]
          </li>
          <li><strong>Jednačina kružnice:</strong> Opšti oblik \( x^2 + y^2 + Dx + Ey + F = 0 \) se svodi na kanonski oblik \( (x - a)^2 + (y - b)^2 = r^2 \) kompletiranjem kvadrata.</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- Visual Aid: Canvas -->
  <div class="card">
    <h2>Vizuelni prikaz &#8212; Krive i tangente</h2>
    <div class="canvas-card">
      <canvas id="mainCanvas" width="750" height="500"></canvas>
    </div>
    <p class="canvas-caption">Elipsa \( 2x^2 + 3y^2 = 5 \) (plava), kružnica \( (x-2)^2 + (y+3)^2 = 16 \) (ljubičasta) i njihove tangente u datim tačkama. Ugao \( \alpha \) je označen zelenom bojom.</p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step" id="step1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <div class="step-title">Proverimo da tačke pripadaju krivama</div>
        <p>Pre svega, proverimo da tačka \( (1, 1) \) leži na prvoj krivoj:</p>
        <div class="step-math">
          \[ 2 \cdot 1^2 + 3 \cdot 1^2 = 2 + 3 = 5 \quad \checkmark \]
        </div>
        <p>Proverimo i da tačka \( (2, 1) \) leži na drugoj krivoj:</p>
        <div class="step-math">
          \[ 2^2 - 4 \cdot 2 + 1^2 + 6 \cdot 1 = 4 - 8 + 1 + 6 = 3 \quad \checkmark \]
        </div>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step" id="step2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <div class="step-title">Nagib tangente na elipsu \( 2x^2 + 3y^2 = 5 \)</div>
        <p>Diferenciramo implicitno po \( x \) obe strane jednačine:</p>
        <div class="step-math">
          \[ \frac{d}{dx}(2x^2 + 3y^2) = \frac{d}{dx}(5) \]
        </div>
        <div class="step-math">
          \[ 4x + 6y \cdot y' = 0 \]
        </div>
        <p>Rešimo po \( y' \):</p>
        <div class="step-math">
          \[ y' = -\frac{4x}{6y} = -\frac{2x}{3y} \]
        </div>
        <p>Uvrštavamo tačku \( (1, 1) \):</p>
        <div class="step-math" style="border-color: rgba(96,165,250,0.4); background: rgba(96,165,250,0.08);">
          \[ k_1 = y'(1, 1) = -\frac{2 \cdot 1}{3 \cdot 1} = -\frac{2}{3} \]
        </div>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step" id="step3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <div class="step-title">Prepoznajemo drugu krivu kao kružnicu</div>
        <p>Kriva \( x^2 - 4x + y^2 + 6y = 3 \) se može dovesti u kanonski oblik kompletiranjem kvadrata:</p>
        <div class="step-math">
          \[ (x^2 - 4x + 4) + (y^2 + 6y + 9) = 3 + 4 + 9 \]
        </div>
        <div class="step-math">
          \[ (x - 2)^2 + (y + 3)^2 = 16 \]
        </div>
        <p>To je <span class="highlight">kružnica</span> sa centrom \( C(2, -3) \) i poluprečnikom \( r = 4 \).</p>
      </div>
    </div>

    <div class="checkpoint">
      <details>
        <summary>Proveri sebe: Koliko je rastojanje od centra \( C(2, -3) \) do tačke \( (2, 1) \)?</summary>
        <div class="detail-content">
          \( d = \sqrt{(2 - 2)^2 + (1 - (-3))^2} = \sqrt{0 + 16} = 4 = r \). Tačka zaista leži na kružnici.
        </div>
      </details>
    </div>

    <!-- Step 4 -->
    <div class="step" id="step4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <div class="step-title">Nagib tangente na kružnicu u tački \( (2, 1) \)</div>
        <p>Diferenciramo implicitno jednačinu \( x^2 - 4x + y^2 + 6y = 3 \):</p>
        <div class="step-math">
          \[ 2x - 4 + 2y \cdot y' + 6y' = 0 \]
        </div>
        <p>Izrazimo \( y' \):</p>
        <div class="step-math">
          \[ y'(2y + 6) = -(2x - 4) \]
        </div>
        <div class="step-math">
          \[ y' = -\frac{2x - 4}{2y + 6} \]
        </div>
        <p>Uvrštavamo tačku \( (2, 1) \):</p>
        <div class="step-math" style="border-color: rgba(96,165,250,0.4); background: rgba(96,165,250,0.08);">
          \[ k_2 = y'(2, 1) = -\frac{2 \cdot 2 - 4}{2 \cdot 1 + 6} = -\frac{0}{8} = 0 \]
        </div>
        <p style="color: #94a3b8; font-size: 0.95rem; margin-top: 6px;">Napomena: ovo ima i geometrijsku interpretaciju &#8212; poluprečnik od centra \( (2, -3) \) do tačke \( (2, 1) \) je vertikalan (obe tačke imaju istu \( x \)-koordinatu), pa je tangenta horizontalna.</p>
      </div>
    </div>

    <div class="checkpoint">
      <details>
        <summary>Proveri sebe: Zašto je tangenta na kružnicu u tački \( (2, 1) \) horizontalna?</summary>
        <div class="detail-content">
          <p>Tangenta na kružnicu je uvek normalna (upravna) na poluprečnik u toj tački. Poluprečnik od \( C(2, -3) \) do \( T(2, 1) \) ima pravac \( (0, 4) \), što je vertikalan vektor. Prava normalna na vertikalu je horizontala, dakle tangenta je \( y = 1 \).</p>
        </div>
      </details>
    </div>

    <!-- Step 5 -->
    <div class="step" id="step5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <div class="step-title">Zapisujemo jednačine tangenata</div>
        <p>Tangenta na elipsu u tački \( (1, 1) \) sa nagibom \( k_1 = -\frac{2}{3} \):</p>
        <div class="step-math">
          \[ t_1: \quad y - 1 = -\frac{2}{3}(x - 1) \quad \Longrightarrow \quad y = -\frac{2}{3}x + \frac{5}{3} \]
        </div>
        <p>Tangenta na kružnicu u tački \( (2, 1) \) sa nagibom \( k_2 = 0 \):</p>
        <div class="step-math">
          \[ t_2: \quad y = 1 \]
        </div>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step" id="step6">
      <div class="step-badge">6</div>
      <div class="step-content">
        <div class="step-title">Računamo ugao izmedju tangenata</div>
        <p>Primenjujemo formulu za ugao izmedju dveju pravih sa nagibima \( k_1 \) i \( k_2 \):</p>
        <div class="step-math">
          \[ \tan\alpha = \left|\frac{k_1 - k_2}{1 + k_1 \cdot k_2}\right| \]
        </div>
        <p>Uvrštavamo \( k_1 = -\frac{2}{3} \) i \( k_2 = 0 \):</p>
        <div class="step-math">
          \[ \tan\alpha = \left|\frac{-\frac{2}{3} - 0}{1 + \left(-\frac{2}{3}\right) \cdot 0}\right| = \left|\frac{-\frac{2}{3}}{1}\right| = \frac{2}{3} \]
        </div>
        <p>Dakle:</p>
        <div class="step-math" style="border-color: rgba(52,211,153,0.4); background: rgba(52,211,153,0.08);">
          \[ \alpha = \arctan\frac{2}{3} \]
        </div>
      </div>
    </div>

    <div class="checkpoint">
      <details>
        <summary>Proveri sebe: Zašto je formula bila tako jednostavna u ovom slučaju?</summary>
        <div class="detail-content">
          <p>Zato što je \( k_2 = 0 \), svi članovi koji sadrže \( k_2 \) nestaju: brojilac postaje \( |k_1| \), a imenilac ostaje \( 1 \). Ugao izmedju bilo koje prave i horizontale je jednostavno \( \arctan|k| \), gde je \( k \) nagib te prave.</p>
        </div>
      </details>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Ključni uvid</h2>
    <p>Kada je jedna od tangenata <strong>horizontalna</strong> (\( k_2 = 0 \)), formula za ugao se drastično uprošćava. Ugao izmedju horizontalne prave i prave sa nagibom \( k_1 \) je prosto \( \arctan|k_1| \). Ovde, pošto je nagib tangente na elipsu \( k_1 = -\frac{2}{3} \), odmah dobijamo:</p>
    <div class="step-math" style="margin-top: 16px; font-size: 1.15rem; border-color: rgba(167,139,250,0.5);">
      \[ \alpha = \arctan\left|-\frac{2}{3}\right| = \color{#4ade80}{\arctan\frac{2}{3}} \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <div class="answer-label">Konačan odgovor</div>
    <div class="answer-value">\( \alpha = \arctan\dfrac{2}{3} \)</div>
    <div class="answer-note">Tačan odgovor je (C)</div>
    <div class="final-options">
      <div class="final-option">(A) \( \arctan\frac{1}{2} \)</div>
      <div class="final-option">(B) \( \arctan\frac{3}{2} \)</div>
      <div class="final-option correct">(C) \( \arctan\frac{2}{3} \)</div>
      <div class="final-option">(D) \( \arctan\frac{1}{6} \)</div>
      <div class="final-option">(E) \( \arctan\frac{3}{5} \)</div>
    </div>
    <div class="verification-box">
      <p><strong>Verifikacija:</strong> Nagib tangente na elipsu u \( (1, 1) \) je \( k_1 = -\frac{2}{3} \), a tangenta na kružnicu u \( (2, 1) \) je horizontalna (\( k_2 = 0 \)) jer je poluprečnik u toj tački vertikalan. Ugao izmedju horizontale i prave sa nagibom \( -\frac{2}{3} \) je zaista \( \arctan\frac{2}{3} \approx 33{,}7° \), što je oštar ugao. Rezultat se poklapa sa odgovorom (C).</p>
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Česte greške</h2>
    <div class="pitfall">
      <span class="pitfall-icon">&#10007;</span>
      <p><strong>Greška u implicitnom diferenciranju:</strong> Česta greška je zaboraviti faktor \( y' \) prilikom diferenciranja članova koji sadrže \( y \). Na primer, \( \frac{d}{dx}(3y^2) = 6y \cdot y' \), a ne \( 6y \). Bez množenja sa \( y' \) dobija se pogrešan nagib.</p>
    </div>
    <div class="pitfall">
      <span class="pitfall-icon">&#10007;</span>
      <p><strong>Zamena nagiba \( k_1 \) i \( k_2 \):</strong> Iako formula za ugao koristi apsolutnu vrednost (pa redosled ne utiče na rezultat), greška može nastati ako se nagib jedne krive uvršti u tačku druge krive. Pažljivo čitajte koja tačka pripada kojoj krivoj!</p>
    </div>
  </div>

  <!-- Optional Challenge -->
  <div class="challenge-box">
    <h2>Dodatni izazov</h2>
    <p>Odredite ugao pod kojim se seku tangente na krivu \( x^2 + y^2 = 25 \) u tačkama \( (3, 4) \) i \( (4, 3) \).</p>
    <details>
      <summary>Pogledaj nagoveštaj</summary>
      <div class="detail-content">
        <p>Kriva je kružnica sa centrom u koordinatnom početku. Tangenta u tački \( (x_0, y_0) \) na kružnicu \( x^2 + y^2 = r^2 \) ima jednačinu \( x \cdot x_0 + y \cdot y_0 = r^2 \). Odredite nagibe obe tangente i primenite istu formulu za ugao. Alternativno, koristite činjenicu da su nagibi \( k = -\frac{x_0}{y_0} \).</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('mainCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  // Coordinate system: origin roughly centered, with Y-axis pointing up
  const originX = W * 0.42;
  const originY = H * 0.38;
  const scale = 55;

  function toCanvas(x, y) {
    return { x: originX + x * scale, y: originY - y * scale };
  }

  function fromCanvas(cx, cy) {
    return { x: (cx - originX) / scale, y: (originY - cy) / scale };
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Grid lines
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (let gx = -8; gx <= 10; gx++) {
      const p = toCanvas(gx, 0);
      if (p.x < 0 || p.x > W) continue;
      ctx.beginPath();
      ctx.moveTo(p.x, 0);
      ctx.lineTo(p.x, H);
      ctx.stroke();
    }
    for (let gy = -8; gy <= 8; gy++) {
      const p = toCanvas(0, gy);
      if (p.y < 0 || p.y > H) continue;
      ctx.beginPath();
      ctx.moveTo(0, p.y);
      ctx.lineTo(W, p.y);
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(0, originY);
    ctx.lineTo(W, originY);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(originX, 0);
    ctx.lineTo(originX, H);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#64748b';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    for (let gx = -7; gx <= 9; gx++) {
      if (gx === 0) continue;
      const p = toCanvas(gx, 0);
      if (p.x < 20 || p.x > W - 20) continue;
      ctx.fillText(String(gx), p.x, originY + 15);
    }
    ctx.textAlign = 'right';
    for (let gy = -7; gy <= 6; gy++) {
      if (gy === 0) continue;
      const p = toCanvas(0, gy);
      if (p.y < 10 || p.y > H - 10) continue;
      ctx.fillText(String(gy), originX - 8, p.y + 4);
    }

    // Draw ellipse: 2x^2 + 3y^2 = 5
    // Parametric: x = sqrt(5/2)*cos(t), y = sqrt(5/3)*sin(t)
    const a_ell = Math.sqrt(5 / 2);
    const b_ell = Math.sqrt(5 / 3);
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    for (let i = 0; i <= 360; i++) {
      const t = (i * Math.PI) / 180;
      const ex = a_ell * Math.cos(t);
      const ey = b_ell * Math.sin(t);
      const p = toCanvas(ex, ey);
      if (i === 0) ctx.moveTo(p.x, p.y);
      else ctx.lineTo(p.x, p.y);
    }
    ctx.closePath();
    ctx.stroke();

    // Draw circle: (x-2)^2 + (y+3)^2 = 16
    const cx_circ = 2, cy_circ = -3, r_circ = 4;
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    for (let i = 0; i <= 360; i++) {
      const t = (i * Math.PI) / 180;
      const px = cx_circ + r_circ * Math.cos(t);
      const py = cy_circ + r_circ * Math.sin(t);
      const p = toCanvas(px, py);
      if (i === 0) ctx.moveTo(p.x, p.y);
      else ctx.lineTo(p.x, p.y);
    }
    ctx.closePath();
    ctx.stroke();

    // Draw radius from center to (2,1) - dashed
    const pCenter = toCanvas(cx_circ, cy_circ);
    const pTangPt2 = toCanvas(2, 1);
    ctx.strokeStyle = '#a78bfa80';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([5, 4]);
    ctx.beginPath();
    ctx.moveTo(pCenter.x, pCenter.y);
    ctx.lineTo(pTangPt2.x, pTangPt2.y);
    ctx.stroke();
    ctx.setLineDash([]);

    // Tangent line 1: y = -(2/3)x + 5/3, passing through (1,1) with slope -2/3
    const k1 = -2 / 3;
    const t1_x1 = -1.5;
    const t1_y1 = 1 + k1 * (t1_x1 - 1);
    const t1_x2 = 5;
    const t1_y2 = 1 + k1 * (t1_x2 - 1);
    const pt1_start = toCanvas(t1_x1, t1_y1);
    const pt1_end = toCanvas(t1_x2, t1_y2);
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(pt1_start.x, pt1_start.y);
    ctx.lineTo(pt1_end.x, pt1_end.y);
    ctx.stroke();

    // Tangent line 2: y = 1, horizontal
    const t2_x1 = -1.5;
    const t2_x2 = 7;
    const pt2_start = toCanvas(t2_x1, 1);
    const pt2_end = toCanvas(t2_x2, 1);
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(pt2_start.x, pt2_start.y);
    ctx.lineTo(pt2_end.x, pt2_end.y);
    ctx.stroke();

    // Find intersection of tangent lines
    // t1: y = -(2/3)x + 5/3, t2: y = 1
    // 1 = -(2/3)x + 5/3 => (2/3)x = 5/3 - 1 = 2/3 => x = 1
    // But wait: intersection at x=1, y=1 — that's the point on the ellipse itself!
    // Actually: y = -(2/3)x + 5/3, set y=1: 1 = -(2/3)x + 5/3, (2/3)x = 2/3, x=1
    // So intersection is exactly at (1,1)!
    // Let me recalculate: the tangent to the ellipse passes through (1,1) with slope -2/3
    // and the horizontal tangent to the circle is y=1. They intersect at x=1, y=1.
    const intX = 1, intY = 1;
    const pInt = toCanvas(intX, intY);

    // Draw angle arc at intersection
    // Angle between horizontal (t2 going right) and t1 going right-down (slope -2/3)
    // t2 direction angle: 0
    // t1 direction angle: atan(-2/3) = about -33.7 degrees
    // The acute angle between them is arctan(2/3) ~ 33.7 degrees
    const angle1 = 0; // horizontal
    const angle2 = Math.atan(2 / 3); // angle above horizontal (we draw the acute angle above)
    const arcRadius = 35;
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    // In canvas, angles go clockwise. We want the arc from angle2 above the horizontal line going right.
    // Since Y is flipped in our toCanvas, we need to be careful.
    // At intersection (1,1): going right on t2 is canvas angle 0.
    // Going right on t1 (increasing x), y decreases by slope -2/3, in canvas that's angle atan(2/3) going UP in canvas coords
    // Actually let's compute in canvas coords
    // Direction of t2 going right: (1, 0) in math => canvas direction (1, 0) => angle 0
    // Direction of t1 going right: (1, -2/3) in math => canvas (1, 2/3*(-1)*(-1))?
    // toCanvas: dx_canvas = dx * scale, dy_canvas = -dy * scale
    // So (1, -2/3) in math => (scale, -(-2/3)*scale) = (scale, 2/3*scale) => canvas angle atan(2/3 * scale / scale) = atan(2/3)
    // In canvas, positive angle is clockwise, so atan(2/3) clockwise from horizontal right = going down-right
    // But we want the acute angle between t1 and t2 at the intersection going to the RIGHT.
    // t1 going to the right-and-down has canvas angle atan(2/3) (clockwise).
    // t2 going right has canvas angle 0.
    // The angle between them, measured from t2 counterclockwise to t1 above, or clockwise below.
    // Let's draw arc from 0 to atan(2/3) clockwise (which is the default in canvas).
    const startAngle = 0;
    const endAngle = Math.atan(2 / 3);
    ctx.beginPath();
    ctx.arc(pInt.x, pInt.y, arcRadius, startAngle, endAngle, false);
    ctx.stroke();

    // Label the angle
    const midAngle = (startAngle + endAngle) / 2;
    const labelDist = arcRadius + 18;
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('\u03B1', pInt.x + labelDist * Math.cos(midAngle) - 3, pInt.y + labelDist * Math.sin(midAngle) + 5);

    // Mark point (1,1) on ellipse
    const pT1 = toCanvas(1, 1);
    // Glow
    let glow = ctx.createRadialGradient(pT1.x, pT1.y, 0, pT1.x, pT1.y, 18);
    glow.addColorStop(0, '#60a5fa40');
    glow.addColorStop(1, '#60a5fa00');
    ctx.fillStyle = glow;
    ctx.beginPath();
    ctx.arc(pT1.x, pT1.y, 18, 0, Math.PI * 2);
    ctx.fill();
    ctx.beginPath();
    ctx.arc(pT1.x, pT1.y, 6, 0, Math.PI * 2);
    ctx.fillStyle = '#60a5fa';
    ctx.fill();
    ctx.strokeStyle = '#e2e8f0';
    ctx.lineWidth = 1.5;
    ctx.stroke();
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText('(1, 1)', pT1.x - 12, pT1.y - 12);

    // Mark point (2,1) on circle
    ctx.beginPath();
    glow = ctx.createRadialGradient(pTangPt2.x, pTangPt2.y, 0, pTangPt2.x, pTangPt2.y, 18);
    glow.addColorStop(0, '#a78bfa40');
    glow.addColorStop(1, '#a78bfa00');
    ctx.fillStyle = glow;
    ctx.beginPath();
    ctx.arc(pTangPt2.x, pTangPt2.y, 18, 0, Math.PI * 2);
    ctx.fill();
    ctx.beginPath();
    ctx.arc(pTangPt2.x, pTangPt2.y, 6, 0, Math.PI * 2);
    ctx.fillStyle = '#a78bfa';
    ctx.fill();
    ctx.strokeStyle = '#e2e8f0';
    ctx.lineWidth = 1.5;
    ctx.stroke();
    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('(2, 1)', pTangPt2.x + 12, pTangPt2.y - 12);

    // Mark center of circle
    ctx.beginPath();
    ctx.arc(pCenter.x, pCenter.y, 4, 0, Math.PI * 2);
    ctx.fillStyle = '#a78bfa80';
    ctx.fill();
    ctx.fillStyle = '#a78bfa';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('C(2, \u22123)', pCenter.x + 8, pCenter.y + 4);

    // Labels for curves
    // Ellipse label
    const ellLabelPos = toCanvas(-0.3, 1.45);
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'italic 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('2x\u00B2 + 3y\u00B2 = 5', ellLabelPos.x, ellLabelPos.y - 6);

    // Circle label
    const circLabelPos = toCanvas(5.2, -3);
    ctx.fillStyle = '#a78bfa';
    ctx.textAlign = 'left';
    ctx.fillText('(x\u22122)\u00B2 + (y+3)\u00B2 = 16', circLabelPos.x, circLabelPos.y);

    // Tangent labels
    const t1LabelPos = toCanvas(3.8, -0.7);
    ctx.fillStyle = '#60a5fa';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('t\u2081: k\u2081 = \u22122/3', t1LabelPos.x, t1LabelPos.y);

    const t2LabelPos = toCanvas(4.5, 1.35);
    ctx.fillStyle = '#a78bfa';
    ctx.fillText('t\u2082: k\u2082 = 0', t2LabelPos.x, t2LabelPos.y);

    // Legend
    const legendX = W - 220;
    const legendY = 22;
    ctx.fillStyle = '#0c1222';
    ctx.globalAlpha = 0.85;
    ctx.fillRect(legendX - 10, legendY - 10, 215, 55);
    ctx.globalAlpha = 1;

    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(legendX, legendY + 5);
    ctx.lineTo(legendX + 25, legendY + 5);
    ctx.stroke();
    ctx.fillStyle = '#60a5fa';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Elipsa i tangenta t\u2081', legendX + 32, legendY + 9);

    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(legendX, legendY + 27);
    ctx.lineTo(legendX + 25, legendY + 27);
    ctx.stroke();
    ctx.fillStyle = '#a78bfa';
    ctx.fillText('Kru\u017Enica i tangenta t\u2082', legendX + 32, legendY + 31);
  }

  draw();

  // Resize handler
  let resizeTimeout;
  window.addEventListener('resize', function() {
    clearTimeout(resizeTimeout);
    resizeTimeout = setTimeout(draw, 100);
  });

  // Step click interactivity
  document.querySelectorAll('.step').forEach(function(step) {
    step.addEventListener('click', function() {
      document.querySelectorAll('.step').forEach(function(s) { s.classList.remove('active'); });
      step.classList.toggle('active');
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Ugao izmedju tangenata elipse i kružnice",
  "subject": "math",
  "unit": "calculus",
  "topic_tags": ["implicitno diferenciranje", "tangenta", "ugao izmedju pravih", "elipsa", "kružnica", "analitička geometrija"]
}
BRAINSPARK_META-->