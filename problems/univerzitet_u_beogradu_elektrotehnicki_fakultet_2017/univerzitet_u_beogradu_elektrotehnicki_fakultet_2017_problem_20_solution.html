<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Broj preslikavanja sa uslovima - Kombinatorika</title>
<script type="text/info" id="logic-scratchpad">
Problem: Dat je skup A = {1,2,3,4,5,6,7}. Ukupan broj preslikavanja f: A -> A
takvih da vazi:
  (za svako k iz A): f(k) != min{k,3}  I  (k > 3 => f(k) < k-2)

Opcije: (A) 2592, (B) 1722, (C) 3421, (D) 1628, (E) nijedan

=== ANALIZA USLOVA ZA SVAKO k ===

Uslov ima dva dela:
1) f(k) != min{k, 3}
2) k > 3 => f(k) < k - 2

--- k = 1 ---
min{1, 3} = 1, pa f(1) != 1
k = 1 <= 3, pa implikacija k > 3 => ... je trivijalno tacna (premisa netacna)
Dozvoljene vrednosti: {2, 3, 4, 5, 6, 7} => 6 izbora

--- k = 2 ---
min{2, 3} = 2, pa f(2) != 2
k = 2 <= 3, trivijalno tacna implikacija
Dozvoljene vrednosti: {1, 3, 4, 5, 6, 7} => 6 izbora

--- k = 3 ---
min{3, 3} = 3, pa f(3) != 3
k = 3 <= 3, trivijalno tacna implikacija
Dozvoljene vrednosti: {1, 2, 4, 5, 6, 7} => 6 izbora

--- k = 4 ---
min{4, 3} = 3, pa f(4) != 3
k = 4 > 3, pa f(4) < 4 - 2 = 2, tj. f(4) < 2
Posto je f(4) iz A = {1,...,7} i f(4) < 2: f(4) in {1}
Provera: f(4) = 1 != 3  OK
Dozvoljene vrednosti: {1} => 1 izbor

--- k = 5 ---
min{5, 3} = 3, pa f(5) != 3
k = 5 > 3, pa f(5) < 5 - 2 = 3, tj. f(5) < 3
Posto je f(5) iz A i f(5) < 3: f(5) in {1, 2}
Provera: 1 != 3, 2 != 3 => oba OK
Dozvoljene vrednosti: {1, 2} => 2 izbora

--- k = 6 ---
min{6, 3} = 3, pa f(6) != 3
k = 6 > 3, pa f(6) < 6 - 2 = 4, tj. f(6) < 4
Posto je f(6) iz A i f(6) < 4: f(6) in {1, 2, 3}
Ali f(6) != 3, pa f(6) in {1, 2}
Dozvoljene vrednosti: {1, 2} => 2 izbora

--- k = 7 ---
min{7, 3} = 3, pa f(7) != 3
k = 7 > 3, pa f(7) < 7 - 2 = 5, tj. f(7) < 5
Posto je f(7) iz A i f(7) < 5: f(7) in {1, 2, 3, 4}
Ali f(7) != 3, pa f(7) in {1, 2, 4}
Dozvoljene vrednosti: {1, 2, 4} => 3 izbora

=== UKUPAN BROJ ===
Posto su izbori za razlicita k nezavisni (nema uslova koji povezuju f(k) za razlicita k),
ukupan broj preslikavanja je proizvod broja izbora:

6 * 6 * 6 * 1 * 2 * 2 * 3 = 216 * 12 = 2592

=== ODGOVOR ===
(A) 2592

=== VERIFIKACIJA ===
Proverimo racun: 6^3 = 216, zatim 1 * 2 * 2 * 3 = 12.
216 * 12 = 2592. Tacan!

Alternativna provera: ukupan broj svih preslikavanja je 7^7 = 823543.
Nas rezultat 2592 je mnogo manji, sto ima smisla jer su uslovi veoma restriktivni
(posebno za k = 4 gde postoji samo 1 izbor).
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
}

.card h2 {
  font-size: 1.3rem;
  color: #60a5fa;
  margin-bottom: 16px;
}

.problem-text {
  font-size: 1.15rem;
  line-height: 1.8;
}

.math-box {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 16px 0;
  text-align: center;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96, 165, 250, 0.08);
  border: 1px solid rgba(96, 165, 250, 0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
  transition: transform 0.2s, border-color 0.2s;
}

.given-item:hover {
  transform: translateY(-2px);
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
}

/* Plan card */
.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card h2 {
  color: #a78bfa;
}

/* Details/collapsible */
details {
  margin: 15px 0;
  background: rgba(167, 139, 250, 0.06);
  border: 1px solid rgba(167, 139, 250, 0.15);
  border-radius: 10px;
  padding: 14px 18px;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 1.05rem;
  user-select: none;
}

details summary:hover {
  color: #c4b5fd;
}

details[open] summary {
  margin-bottom: 12px;
}

details ul {
  list-style: none;
  padding-left: 0;
}

details li {
  padding: 6px 0;
  border-bottom: 1px solid rgba(51, 65, 85, 0.5);
  color: #e2e8f0;
}

details li:last-child {
  border-bottom: none;
}

/* Checkpoint details */
.checkpoint details {
  background: rgba(52, 211, 153, 0.06);
  border: 1px solid rgba(52, 211, 153, 0.2);
}

.checkpoint details summary {
  color: #34d399;
}

/* Canvas card */
.canvas-card {
  text-align: center;
}

.canvas-card canvas {
  width: 100%;
  max-width: 750px;
  border-radius: 10px;
  border: 1px solid #334155;
  touch-action: none;
}

.canvas-hint {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-top: 8px;
}

/* Steps */
.step {
  display: flex;
  gap: 16px;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 14px;
  border-left: 3px solid transparent;
  transition: border-color 0.2s, background 0.2s;
  cursor: pointer;
}

.step:hover, .step.active {
  border-left-color: #4ade80;
  background: rgba(74, 222, 128, 0.04);
}

.step-badge {
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  font-weight: 700;
  font-size: 0.85rem;
  min-width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  color: #f472b6;
  font-size: 1.05rem;
  margin-bottom: 8px;
}

.step-content p {
  margin-bottom: 8px;
}

.highlight {
  color: #60a5fa;
  font-weight: 600;
}

/* Constraint table */
.constraint-table {
  width: 100%;
  border-collapse: collapse;
  margin: 16px 0;
  font-size: 0.95rem;
}

.constraint-table th {
  background: rgba(96, 165, 250, 0.12);
  color: #60a5fa;
  padding: 10px 14px;
  text-align: center;
  border: 1px solid #334155;
  font-weight: 600;
}

.constraint-table td {
  padding: 10px 14px;
  text-align: center;
  border: 1px solid #334155;
  color: #e2e8f0;
}

.constraint-table tr:nth-child(even) td {
  background: rgba(30, 41, 59, 0.5);
}

.constraint-table .count-cell {
  color: #4ade80;
  font-weight: 700;
  font-size: 1.1rem;
}

/* Insight box */
.insight-box {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.12), rgba(167, 139, 250, 0.12));
  border: 1px solid rgba(167, 139, 250, 0.35);
  border-radius: 16px;
  padding: 24px 28px;
  margin-bottom: 24px;
}

.insight-box h2 {
  color: #a78bfa;
}

.insight-formula {
  text-align: center;
  font-size: 1.3rem;
  margin: 16px 0;
  color: #4ade80;
}

/* Final answer */
.final-answer-box {
  background: rgba(52, 211, 153, 0.08);
  border: 2px solid #34d399;
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin-bottom: 24px;
}

.final-answer-box .answer-label {
  color: #94a3b8;
  font-size: 1rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 12px;
}

.final-answer-box .answer-value {
  color: #4ade80;
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 8px;
}

.final-answer-box .answer-detail {
  color: #34d399;
  font-size: 1.1rem;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin-top: 18px;
}

.final-option {
  padding: 8px 20px;
  border-radius: 8px;
  font-size: 1rem;
  background: rgba(51, 65, 85, 0.5);
  border: 1px solid #334155;
  color: #94a3b8;
}

.final-option.correct {
  background: rgba(52, 211, 153, 0.15);
  border-color: #34d399;
  color: #4ade80;
  font-weight: 700;
}

/* Pitfalls */
.pitfall {
  display: flex;
  gap: 12px;
  align-items: flex-start;
  margin-bottom: 14px;
}

.pitfall-icon {
  color: #f472b6;
  font-weight: 700;
  font-size: 1.2rem;
  flex-shrink: 0;
}

/* Challenge box */
.challenge-box {
  background: rgba(244, 114, 182, 0.08);
  border: 1px solid rgba(244, 114, 182, 0.3);
  border-radius: 16px;
  padding: 24px 28px;
  margin-bottom: 24px;
}

.challenge-box h2 {
  color: #f472b6;
}

/* Verification note */
.verification {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 14px;
  line-height: 1.6;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 18px; }
  .given-grid { flex-direction: column; }
  .step { flex-direction: column; gap: 8px; }
  .step-badge { align-self: flex-start; }
  .final-answer-box .answer-value { font-size: 1.5rem; }
  .final-options { flex-direction: column; align-items: center; }
  .constraint-table { font-size: 0.8rem; }
  .constraint-table th, .constraint-table td { padding: 6px 8px; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Broj preslikavanja skupa sa uslovima</h1>
  <p class="subtitle">Kombinatorika — prebrojavanje funkcija koje zadovoljavaju zadate uslove</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <div class="problem-text">
      <p>Dat je skup \(A = \{1, 2, 3, 4, 5, 6, 7\}\). Ukupan broj preslikavanja \(f\colon A \to A\) takvih da vazi:</p>
      <div class="math-box">
        \[ (\forall k \in A)\Big(f(k) \neq \min\{k,\,3\} \;\wedge\; \big(k > 3 \Rightarrow f(k) < k - 2\big)\Big) \]
      </div>
      <p>gde je \(\min\{a,b\} = \begin{cases} a, & a \leq b \\ b, & a > b \end{cases}\), jednak je:</p>

      <div class="given-grid">
        <div class="given-item answer-option" data-option="A">
          <div class="label">(A)</div>
          <div class="value">\(2592\)</div>
        </div>
        <div class="given-item answer-option" data-option="B">
          <div class="label">(B)</div>
          <div class="value">\(1722\)</div>
        </div>
        <div class="given-item answer-option" data-option="C">
          <div class="label">(C)</div>
          <div class="value">\(3421\)</div>
        </div>
        <div class="given-item answer-option" data-option="D">
          <div class="label">(D)</div>
          <div class="value">\(1628\)</div>
        </div>
        <div class="given-item answer-option" data-option="E">
          <div class="label">(E)</div>
          <div class="value">nijedan od ponudjenih</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>Za svako \(k \in A\) odredimo skup dozvoljenih vrednosti \(f(k)\) na osnovu oba uslova. Posto su uslovi za razlicita \(k\) medjusobno nezavisni (ne povezuju vrednosti funkcije u razlicitim tackama), ukupan broj preslikavanja je proizvod broja dozvoljenih vrednosti po svakom \(k\).</p>
  </div>

  <!-- Theory Refresher -->
  <details>
    <summary>Kljucne formule i pojmovi</summary>
    <ul>
      <li><strong>Preslikavanje (funkcija):</strong> Za \(f\colon A \to A\), svaki element \(k \in A\) ima tacno jednu sliku \(f(k) \in A\). Ukupno ima \(|A|^{|A|} = 7^7\) svih preslikavanja.</li>
      <li><strong>Pravilo proizvoda:</strong> Ako za svaki \(k\) biramo \(f(k)\) nezavisno iz \(n_k\) mogucnosti, ukupan broj preslikavanja je \(n_1 \cdot n_2 \cdot \ldots \cdot n_7\).</li>
      <li><strong>Minimum:</strong> \(\min\{k, 3\} = k\) ako \(k \leq 3\), inace \(\min\{k, 3\} = 3\).</li>
      <li><strong>Logicka implikacija:</strong> Izjava \(k > 3 \Rightarrow P(k)\) je automatski tacna kada je \(k \leq 3\) (premisa netacna). Za \(k > 3\) se \(P(k)\) mora ispuniti.</li>
    </ul>
  </details>

  <!-- Canvas Visualization -->
  <div class="card canvas-card">
    <h2>Vizuelni prikaz: Dozvoljene vrednosti za svako k</h2>
    <p style="color:#94a3b8; margin-bottom: 14px;">Tabela prikazuje koje vrednosti su dozvoljene za \(f(k)\) za svako \(k \in A\). Zelene celije oznacavaju dozvoljene vrednosti, crvene zabranjene.</p>
    <canvas id="viz-canvas" width="750" height="420"></canvas>
    <p class="canvas-hint">Predjite misem preko celija da vidite objasnjenje ogranicenja</p>
  </div>

  <!-- Step-by-step solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <div class="step" id="step-1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Razumevanje uslova</h3>
        <p>Za svako \(k \in A\) moraju biti zadovoljena <span class="highlight">oba uslova istovremeno</span>:</p>
        <p><strong>Uslov 1:</strong> \(f(k) \neq \min\{k, 3\}\)</p>
        <p><strong>Uslov 2:</strong> \(k > 3 \Rightarrow f(k) < k - 2\)</p>
        <p>Uslov 2 je implikacija: aktivira se samo kada je \(k > 3\). Za \(k \leq 3\), implikacija je trivijalno tacna (premisa je netacna), pa vazi samo Uslov 1.</p>
      </div>
    </div>

    <div class="step" id="step-2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Analiza za \(k = 1\)</h3>
        <p>Izracunajmo \(\min\{1, 3\} = 1\), pa je Uslov 1: \(f(1) \neq 1\).</p>
        <p>Posto je \(k = 1 \leq 3\), Uslov 2 je automatski zadovoljen.</p>
        <p>Dozvoljene vrednosti za \(f(1)\):</p>
        <div class="math-box">
          \[ f(1) \in \{2, 3, 4, 5, 6, 7\} \quad \Rightarrow \quad \textbf{6 izbora} \]
        </div>
      </div>
    </div>

    <div class="step" id="step-3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Analiza za \(k = 2\)</h3>
        <p>Izracunajmo \(\min\{2, 3\} = 2\), pa je Uslov 1: \(f(2) \neq 2\).</p>
        <p>Posto je \(k = 2 \leq 3\), Uslov 2 je automatski zadovoljen.</p>
        <p>Dozvoljene vrednosti za \(f(2)\):</p>
        <div class="math-box">
          \[ f(2) \in \{1, 3, 4, 5, 6, 7\} \quad \Rightarrow \quad \textbf{6 izbora} \]
        </div>
      </div>
    </div>

    <div class="step" id="step-4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Analiza za \(k = 3\)</h3>
        <p>Izracunajmo \(\min\{3, 3\} = 3\), pa je Uslov 1: \(f(3) \neq 3\).</p>
        <p>Posto je \(k = 3 \leq 3\), Uslov 2 je automatski zadovoljen.</p>
        <p>Dozvoljene vrednosti za \(f(3)\):</p>
        <div class="math-box">
          \[ f(3) \in \{1, 2, 4, 5, 6, 7\} \quad \Rightarrow \quad \textbf{6 izbora} \]
        </div>
      </div>
    </div>

    <div class="checkpoint">
      <details>
        <summary>Proveri sebe: Sta je zajednicko za k = 1, 2 i 3?</summary>
        <p style="padding: 8px 0;">Za sva tri vazi da Uslov 2 ne igra ulogu (jer je \(k \leq 3\)), a Uslov 1 zabranjuje tacno jednu vrednost: \(f(k) \neq k\). Dakle, svaki od ova tri elementa ima po <strong>6</strong> dozvoljenih slika.</p>
      </details>
    </div>

    <div class="step" id="step-5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Analiza za \(k = 4\)</h3>
        <p>Sada je \(k = 4 > 3\), pa se aktiviraju <span class="highlight">oba uslova</span>.</p>
        <p><strong>Uslov 1:</strong> \(\min\{4, 3\} = 3\), pa \(f(4) \neq 3\).</p>
        <p><strong>Uslov 2:</strong> \(f(4) < 4 - 2 = 2\), tj. \(f(4) < 2\).</p>
        <p>Posto je \(f(4) \in A = \{1, 2, \ldots, 7\}\) i \(f(4) < 2\), jedina mogucnost je:</p>
        <div class="math-box">
          \[ f(4) = 1 \quad (\text{a } 1 \neq 3 \text{, pa je Uslov 1 takode zadovoljen}) \quad \Rightarrow \quad \textbf{1 izbor} \]
        </div>
      </div>
    </div>

    <div class="step" id="step-6">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Analiza za \(k = 5\)</h3>
        <p><strong>Uslov 1:</strong> \(\min\{5, 3\} = 3\), pa \(f(5) \neq 3\).</p>
        <p><strong>Uslov 2:</strong> \(f(5) < 5 - 2 = 3\), tj. \(f(5) < 3\).</p>
        <p>Iz Uslova 2: \(f(5) \in \{1, 2\}\). Obe ove vrednosti su razlicite od 3, pa je i Uslov 1 zadovoljen.</p>
        <div class="math-box">
          \[ f(5) \in \{1, 2\} \quad \Rightarrow \quad \textbf{2 izbora} \]
        </div>
      </div>
    </div>

    <div class="step" id="step-7">
      <div class="step-badge">7</div>
      <div class="step-content">
        <h3>Analiza za \(k = 6\)</h3>
        <p><strong>Uslov 1:</strong> \(\min\{6, 3\} = 3\), pa \(f(6) \neq 3\).</p>
        <p><strong>Uslov 2:</strong> \(f(6) < 6 - 2 = 4\), tj. \(f(6) < 4\).</p>
        <p>Iz Uslova 2: \(f(6) \in \{1, 2, 3\}\). Ali Uslov 1 zabranjuje \(f(6) = 3\).</p>
        <div class="math-box">
          \[ f(6) \in \{1, 2\} \quad \Rightarrow \quad \textbf{2 izbora} \]
        </div>
      </div>
    </div>

    <div class="checkpoint">
      <details>
        <summary>Proveri sebe: Za k = 6, zasto f(6) = 3 nije dozvoljeno iako je 3 < 4?</summary>
        <p style="padding: 8px 0;">Vrednost \(f(6) = 3\) zadovoljava Uslov 2 (jer je \(3 < 4\)), ali ne zadovoljava Uslov 1 (jer je \(\min\{6, 3\} = 3\) i \(f(6) \neq 3\) mora da vazi). Oba uslova moraju biti ispunjena istovremeno!</p>
      </details>
    </div>

    <div class="step" id="step-8">
      <div class="step-badge">8</div>
      <div class="step-content">
        <h3>Analiza za \(k = 7\)</h3>
        <p><strong>Uslov 1:</strong> \(\min\{7, 3\} = 3\), pa \(f(7) \neq 3\).</p>
        <p><strong>Uslov 2:</strong> \(f(7) < 7 - 2 = 5\), tj. \(f(7) < 5\).</p>
        <p>Iz Uslova 2: \(f(7) \in \{1, 2, 3, 4\}\). Ali Uslov 1 zabranjuje \(f(7) = 3\).</p>
        <div class="math-box">
          \[ f(7) \in \{1, 2, 4\} \quad \Rightarrow \quad \textbf{3 izbora} \]
        </div>
      </div>
    </div>

    <div class="step" id="step-9">
      <div class="step-badge">9</div>
      <div class="step-content">
        <h3>Primenimo pravilo proizvoda</h3>
        <p>Posto je izbor slike \(f(k)\) za svako \(k\) nezavisan od izbora za ostala \(k\) (nema uslova koji povezuju vrednosti u razlicitim tackama), ukupan broj preslikavanja je <span class="highlight">proizvod broja izbora</span>:</p>

        <table class="constraint-table">
          <tr>
            <th>\(k\)</th>
            <th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th>
          </tr>
          <tr>
            <td style="color:#60a5fa; font-weight:600;">Dozvoljene vrednosti</td>
            <td>\(\{2..7\}\)</td>
            <td>\(\{1,3..7\}\)</td>
            <td>\(\{1,2,4..7\}\)</td>
            <td>\(\{1\}\)</td>
            <td>\(\{1,2\}\)</td>
            <td>\(\{1,2\}\)</td>
            <td>\(\{1,2,4\}\)</td>
          </tr>
          <tr>
            <td style="color:#60a5fa; font-weight:600;">Broj izbora</td>
            <td class="count-cell">6</td>
            <td class="count-cell">6</td>
            <td class="count-cell">6</td>
            <td class="count-cell">1</td>
            <td class="count-cell">2</td>
            <td class="count-cell">2</td>
            <td class="count-cell">3</td>
          </tr>
        </table>

        <div class="math-box">
          \[ N = 6 \cdot 6 \cdot 6 \cdot 1 \cdot 2 \cdot 2 \cdot 3 \]
        </div>
      </div>
    </div>

    <div class="step" id="step-10">
      <div class="step-badge">10</div>
      <div class="step-content">
        <h3>Izracunamo proizvod</h3>
        <p>Racunamo u dva dela:</p>
        <div class="math-box">
          \[ 6^3 = 216 \]
        </div>
        <div class="math-box">
          \[ 1 \cdot 2 \cdot 2 \cdot 3 = 12 \]
        </div>
        <p>Konacno:</p>
        <div class="math-box">
          \[ N = 216 \cdot 12 = 2592 \]
        </div>
      </div>
    </div>

    <div class="checkpoint">
      <details>
        <summary>Proveri sebe: Koliki je procenat svih mogucih preslikavanja koji zadovoljava uslove?</summary>
        <p style="padding: 8px 0;">Ukupan broj preslikavanja \(A \to A\) je \(7^7 = 823\,543\). Procenat: \(\frac{2592}{823543} \approx 0{,}31\%\). Veoma mali deo, sto ima smisla jer su uslovi restriktivni — posebno za \(k = 4\) gde postoji samo jedna dozvoljena vrednost.</p>
      </details>
    </div>

  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Kljucni uvid</h2>
    <p>Uslov zadatka izgleda zastrasuljuce, ali kada se rastavi po svakom \(k\) pojedinacno, vidimo da ne postoje medjuzavisnosti izmedju vrednosti \(f(k)\) za razlicita \(k\). To znaci da je prebrojavanje trivijalno svedeno na pravilo proizvoda:</p>
    <div class="insight-formula">
      \[ N = \prod_{k=1}^{7} |\{v \in A : v \text{ zadovoljava uslove za } k\}| = 6^3 \cdot 1 \cdot 2 \cdot 2 \cdot 3 = 2592 \]
    </div>
    <p style="color:#94a3b8;">Za \(k \leq 3\) samo jedna vrednost je zabranjena (\(f(k) \neq k\)), dok za \(k > 3\) uslovi dramaticno suzavaju izbor.</p>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <div class="answer-label">Konacan odgovor</div>
    <div class="answer-value">2592</div>
    <div class="answer-detail">
      \( 6 \cdot 6 \cdot 6 \cdot 1 \cdot 2 \cdot 2 \cdot 3 = 2592 \)
    </div>
    <div class="final-options">
      <div class="final-option correct">(A) 2592</div>
      <div class="final-option">(B) 1722</div>
      <div class="final-option">(C) 3421</div>
      <div class="final-option">(D) 1628</div>
      <div class="final-option">(E) nijedan</div>
    </div>
    <div class="verification">
      <strong>Verifikacija:</strong> Za svako \(k > 3\) proverimo da nijedna dozvoljena vrednost ne krsi Uslov 1: za \(k = 4\), \(f(4) = 1 \neq 3\); za \(k = 5\), \(f(5) \in \{1,2\}\), ni jedna nije 3; za \(k = 6\), \(f(6) \in \{1,2\}\), ni jedna nije 3; za \(k = 7\), \(f(7) \in \{1,2,4\}\), ni jedna nije 3. Sve se slaze. Proizvod \(216 \cdot 12 = 2592\) je tacan.
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Ceste greske</h2>
    <div class="pitfall">
      <span class="pitfall-icon">&#10007;</span>
      <p><strong>Zaboravljanje da implikacija za \(k \leq 3\) vazi trivijalno:</strong> Neki studenti pokusavaju da primene uslov \(f(k) < k - 2\) i za \(k \leq 3\), sto bi za \(k = 1\) dalo \(f(1) < -1\), sto nema resenja u \(A\). Implikacija \(k > 3 \Rightarrow \ldots\) je tacna cim je \(k \leq 3\)!</p>
    </div>
    <div class="pitfall">
      <span class="pitfall-icon">&#10007;</span>
      <p><strong>Previd preseka uslova za \(k = 6\):</strong> Uslov \(f(6) < 4\) daje \(\{1, 2, 3\}\), ali treba odbaciti \(3\) jer \(f(6) \neq \min\{6, 3\} = 3\). Mnogi pogresno racunaju 3 izbora umesto 2.</p>
    </div>
  </div>

  <!-- Optional Challenge -->
  <div class="challenge-box">
    <h2>Dodatni izazov</h2>
    <p>Neka je \(B = \{1, 2, \ldots, n\}\) za neko \(n \geq 4\). Koliko ima preslikavanja \(f\colon B \to B\) takvih da za svako \(k \in B\) vazi \(f(k) \neq \min\{k, 3\}\) i \(k > 3 \Rightarrow f(k) < k - 2\)?</p>
    <details>
      <summary>Pogledaj nagovestaj</summary>
      <p style="padding: 8px 0;">Za \(k = 1, 2, 3\) uvek imas po \(n - 1\) izbora. Za \(k = 4\) imas \(1\) izbor. Za \(k \geq 5\), Uslov 2 daje \(f(k) \in \{1, \ldots, k-3\}\), a Uslov 1 izbacuje \(3\) (ako je \(k - 3 \geq 3\), tj. \(k \geq 6\)). Dakle: za \(k = 5\) je broj izbora \(2\); za \(k \geq 6\) je \(k - 4\). Ukupno: \((n-1)^3 \cdot 1 \cdot 2 \cdot \prod_{k=6}^{n} (k-4)\).</p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('viz-canvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  const marginLeft = 80;
  const marginRight = 30;
  const marginTop = 50;
  const marginBottom = 50;

  const cols = 7;
  const rows = 7;
  const cellW = (W - marginLeft - marginRight) / cols;
  const cellH = (H - marginTop - marginBottom) / rows;

  // Allowed values for each k (0-indexed: k-1)
  const allowed = [
    [false, true, true, true, true, true, true],   // k=1: f(1) != 1
    [true, false, true, true, true, true, true],    // k=2: f(2) != 2
    [true, true, false, true, true, true, true],    // k=3: f(3) != 3
    [true, false, false, false, false, false, false],// k=4: only f(4)=1
    [true, true, false, false, false, false, false], // k=5: f(5) in {1,2}
    [true, true, false, false, false, false, false], // k=6: f(6) in {1,2}
    [true, true, false, true, false, false, false]   // k=7: f(7) in {1,2,4}
  ];

  const counts = [6, 6, 6, 1, 2, 2, 3];

  let hoverK = -1;
  let hoverV = -1;

  function draw() {
    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Column headers (f(k) values: 1..7)
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('f(k) vrednost', marginLeft + (cols * cellW) / 2, 18);

    for (let v = 0; v < cols; v++) {
      ctx.fillStyle = '#60a5fa';
      ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
      ctx.fillText((v + 1).toString(), marginLeft + v * cellW + cellW / 2, marginTop - 10);
    }

    // Row headers (k values: 1..7)
    for (let k = 0; k < rows; k++) {
      ctx.fillStyle = '#a78bfa';
      ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'right';
      ctx.fillText('k = ' + (k + 1), marginLeft - 12, marginTop + k * cellH + cellH / 2 + 5);
    }

    // Draw cells
    for (let k = 0; k < rows; k++) {
      for (let v = 0; v < cols; v++) {
        const x = marginLeft + v * cellW;
        const y = marginTop + k * cellH;
        const isAllowed = allowed[k][v];
        const isHovered = (k === hoverK && v === hoverV);

        // Cell background
        if (isAllowed) {
          ctx.fillStyle = isHovered ? 'rgba(52, 211, 153, 0.3)' : 'rgba(52, 211, 153, 0.12)';
        } else {
          ctx.fillStyle = isHovered ? 'rgba(244, 114, 182, 0.3)' : 'rgba(244, 114, 182, 0.08)';
        }
        ctx.fillRect(x + 2, y + 2, cellW - 4, cellH - 4);

        // Cell border
        ctx.strokeStyle = isAllowed ? 'rgba(52, 211, 153, 0.3)' : 'rgba(244, 114, 182, 0.2)';
        ctx.lineWidth = isHovered ? 2 : 1;
        ctx.strokeRect(x + 2, y + 2, cellW - 4, cellH - 4);

        // Check or cross
        ctx.font = 'bold 18px Segoe UI, system-ui, sans-serif';
        ctx.textAlign = 'center';
        if (isAllowed) {
          ctx.fillStyle = '#34d399';
          ctx.fillText('\u2713', x + cellW / 2, y + cellH / 2 + 6);
        } else {
          ctx.fillStyle = '#f472b6';
          ctx.fillText('\u2717', x + cellW / 2, y + cellH / 2 + 6);
        }
      }
    }

    // Count column
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    for (let k = 0; k < rows; k++) {
      const x = marginLeft + cols * cellW + 10;
      const y = marginTop + k * cellH + cellH / 2 + 5;
      ctx.fillStyle = '#94a3b8';
      ctx.fillText('= ', x, y);
      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
      ctx.fillText(counts[k].toString(), x + 18, y);
      ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    }

    // Tooltip
    if (hoverK >= 0 && hoverV >= 0) {
      const k = hoverK + 1;
      const v = hoverV + 1;
      const isAll = allowed[hoverK][hoverV];
      let reason = '';

      if (k <= 3) {
        if (v === k) {
          reason = 'f(' + k + ') \u2260 min{' + k + ', 3} = ' + k;
        } else {
          reason = 'f(' + k + ') = ' + v + ' \u2260 ' + k + ' \u2714 Dozvoljeno';
        }
      } else {
        const minVal = 3;
        const bound = k - 2;
        if (v >= bound) {
          reason = 'f(' + k + ') = ' + v + ' \u2265 ' + bound + ' (treba < ' + bound + ')';
        } else if (v === minVal) {
          reason = 'f(' + k + ') = 3 = min{' + k + ', 3} (zabranjeno)';
        } else {
          reason = 'f(' + k + ') = ' + v + ' < ' + bound + ' i ' + v + ' \u2260 3 \u2714';
        }
      }

      const tx = marginLeft + hoverV * cellW + cellW / 2;
      const ty = marginTop + hoverK * cellH - 5;

      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      const tw = ctx.measureText(reason).width + 16;
      const rx = Math.min(tx - tw / 2, W - tw - 5);
      const ry = ty - 22;

      ctx.fillStyle = 'rgba(15, 23, 42, 0.95)';
      ctx.beginPath();
      ctx.roundRect(rx, ry, tw, 22, 6);
      ctx.fill();
      ctx.strokeStyle = '#334155';
      ctx.lineWidth = 1;
      ctx.stroke();

      ctx.fillStyle = isAll ? '#34d399' : '#f472b6';
      ctx.textAlign = 'center';
      ctx.fillText(reason, rx + tw / 2, ry + 15);
    }

    // Product at bottom
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Ukupno: 6 \u00D7 6 \u00D7 6 \u00D7 1 \u00D7 2 \u00D7 2 \u00D7 3 = 2592', W / 2, H - 12);
  }

  draw();

  function getCell(clientX, clientY) {
    const rect = canvas.getBoundingClientRect();
    const scaleX = W / rect.width;
    const scaleY = H / rect.height;
    const cx = (clientX - rect.left) * scaleX;
    const cy = (clientY - rect.top) * scaleY;
    const v = Math.floor((cx - marginLeft) / cellW);
    const k = Math.floor((cy - marginTop) / cellH);
    if (k >= 0 && k < rows && v >= 0 && v < cols) {
      return { k: k, v: v };
    }
    return null;
  }

  canvas.addEventListener('mousemove', function(e) {
    const cell = getCell(e.clientX, e.clientY);
    if (cell) {
      hoverK = cell.k;
      hoverV = cell.v;
    } else {
      hoverK = -1;
      hoverV = -1;
    }
    draw();
  });

  canvas.addEventListener('mouseleave', function() {
    hoverK = -1;
    hoverV = -1;
    draw();
  });

  canvas.addEventListener('touchstart', function(e) {
    e.preventDefault();
    if (e.touches.length > 0) {
      const cell = getCell(e.touches[0].clientX, e.touches[0].clientY);
      if (cell) {
        hoverK = cell.k;
        hoverV = cell.v;
      }
      draw();
    }
  });

  canvas.addEventListener('touchmove', function(e) {
    e.preventDefault();
    if (e.touches.length > 0) {
      const cell = getCell(e.touches[0].clientX, e.touches[0].clientY);
      if (cell) {
        hoverK = cell.k;
        hoverV = cell.v;
      } else {
        hoverK = -1;
        hoverV = -1;
      }
      draw();
    }
  });

  canvas.addEventListener('touchend', function() {
    hoverK = -1;
    hoverV = -1;
    draw();
  });

  // Step click highlight
  var allSteps = document.querySelectorAll('.step');
  allSteps.forEach(function(step) {
    step.addEventListener('click', function() {
      allSteps.forEach(function(s) { s.classList.remove('active'); });
      step.classList.add('active');
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Broj preslikavanja skupa sa uslovima",
  "subject": "math",
  "unit": "combinatorics",
  "topic_tags": ["preslikavanja", "pravilo proizvoda", "prebrojavanje", "funkcije", "kombinatorika"]
}
BRAINSPARK_META-->