<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Visina pravilne četvorostrane piramide</title>

<script type="text/info" id="logic-scratchpad">
Problem: Pravilna četvorostrana piramida sa osnovnom ivicom a = 8 cm.
Rastojanje od centra osnove do bočne strane = 2 cm.
Naći visinu piramide.

ANALIZA:
- Osnova je kvadrat sa stranicom a = 8 cm.
- Centar osnove O, vrh piramide V, središte ivice osnove M.
- Apotema osnove: d = a/2 = 8/2 = 4 cm (rastojanje od centra do sredine stranice kvadrata).
- Visina piramide: h = VO (vertikalna).
- Bočna apotema: m = VM (od vrha do sredine ivice osnove), m = √(h² + d²) = √(h² + 16).

KLJUČNA IDEJA:
Trougao VOM: V je vrh, O je centar osnove, M je središte ivice osnove.
- VO = h (vertikalno)
- OM = d = 4 (horizontalno)
- Ugao VOM = 90° (jer je VO vertikalno, a OM horizontalno)
- VM = m = √(h² + 16)

Rastojanje od tačke O do bočne strane piramide = rastojanje od O do ravni bočne strane.
Bočna strana prolazi kroz ivicu osnove i vrh V.
Presek te ravni sa trouglom VOM je duž VM.
Dakle, rastojanje od O do bočne strane = rastojanje od O do prave VM u trouglu VOM.

Površina trougla VOM (pravougli, ugao kod O = 90°):
P = (1/2) · VO · OM = (1/2) · h · 4 = 2h

Takođe:
P = (1/2) · VM · d(O, VM) = (1/2) · m · 2 = m

Izjednačavamo:
2h = m
m = 2h

Ali znamo da je m² = h² + 16:
(2h)² = h² + 16
4h² = h² + 16
3h² = 16
h² = 16/3
h = 4/√3 = 4√3/3

PROVERA:
h = 4√3/3 ≈ 4 · 1,732 / 3 ≈ 6,928 / 3 ≈ 2,309 cm
m = 2h = 8√3/3 ≈ 4,619 cm
m² = h² + d² = 16/3 + 16 = 16/3 + 48/3 = 64/3
(2h)² = 4 · 16/3 = 64/3 ✓

Rastojanje od O do VM: P = 2h = 8√3/3, also P = (1/2)·m·2 = m = 8√3/3 ✓

Odgovor: (D) 4√3/3 cm
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
}

h1 {
  font-size: 2rem;
  font-weight: 700;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  text-align: center;
}

.subtitle {
  text-align: center;
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.card-title {
  font-size: 1.25rem;
  font-weight: 600;
  color: #60a5fa;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.3rem;
}

.problem-statement {
  border-left: 4px solid #a78bfa;
}

.problem-statement .problem-text {
  font-size: 1.1rem;
  line-height: 1.9;
  margin-bottom: 20px;
}

.math-highlight {
  background: rgba(56, 189, 248, 0.08);
  padding: 2px 8px;
  border-radius: 6px;
  display: inline-block;
}

.given-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96, 165, 250, 0.06);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 12px 16px;
  text-align: center;
  font-size: 1.05rem;
  transition: border-color 0.2s;
}

.given-item.answer-option {
  cursor: default;
}

.given-item.answer-option.correct {
  border-color: #4ade80;
  background: rgba(74, 222, 128, 0.08);
}

.plan-text {
  color: #94a3b8;
  font-size: 1.05rem;
  line-height: 1.8;
}

details {
  background: rgba(96, 165, 250, 0.04);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 14px 18px;
  margin: 12px 0;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  user-select: none;
}

details summary:hover {
  color: #c4b5fd;
}

details[open] summary {
  margin-bottom: 10px;
}

.step {
  margin-bottom: 24px;
  padding-left: 0;
}

.step-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.step-badge {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.95rem;
  color: #0f172a;
  flex-shrink: 0;
}

.step-title {
  font-size: 1.15rem;
  font-weight: 600;
  color: #e2e8f0;
}

.step-content {
  margin-left: 48px;
  color: #cbd5e1;
  line-height: 1.9;
}

.step-content .math-highlight {
  margin: 8px 0;
  display: block;
  padding: 10px 16px;
}

.key-insight {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.12), rgba(167, 139, 250, 0.12));
  border: 1px solid rgba(167, 139, 250, 0.3);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.key-insight .card-title {
  color: #a78bfa;
}

.final-answer-box {
  text-align: center;
  padding: 30px;
}

.final-answer-value {
  font-size: 2.2rem;
  font-weight: 700;
  color: #4ade80;
  margin: 16px 0;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 12px;
  margin-top: 20px;
}

.final-option {
  padding: 10px 22px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: #1e293b;
  color: #94a3b8;
  font-size: 1.05rem;
  transition: all 0.2s;
}

.final-option.correct-option {
  border-color: #4ade80;
  background: rgba(74, 222, 128, 0.1);
  color: #4ade80;
  font-weight: 700;
}

.verification-note {
  color: #94a3b8;
  margin-top: 16px;
  font-size: 0.95rem;
}

.pitfall-item {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  margin-bottom: 12px;
  color: #f472b6;
}

.pitfall-icon {
  flex-shrink: 0;
  margin-top: 4px;
}

.pitfall-text {
  color: #cbd5e1;
}

.challenge-text {
  color: #94a3b8;
  font-size: 1.05rem;
  line-height: 1.8;
}

canvas {
  display: block;
  margin: 0 auto;
  width: 100%;
  max-width: 700px;
  border-radius: 12px;
  touch-action: none;
}

.canvas-caption {
  text-align: center;
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 8px;
}

@media (max-width: 600px) {
  h1 { font-size: 1.4rem; }
  .card { padding: 16px; }
  .given-grid { grid-template-columns: 1fr 1fr; }
  .step-content { margin-left: 0; margin-top: 8px; }
  .final-answer-value { font-size: 1.7rem; }
  .final-options { gap: 8px; }
  .final-option { padding: 8px 14px; font-size: 0.95rem; }
}
</style>
</head>
<body>

<div class="container">

  <!-- NASLOV -->
  <h1>Visina pravilne četvorostrane piramide</h1>
  <p class="subtitle">Stereometrija &mdash; rastojanje tačke od ravni bočne strane</p>

  <!-- TEKST ZADATKA -->
  <div class="card problem-statement">
    <div class="card-title"><span class="icon">&#128220;</span> Tekst zadatka</div>
    <div class="problem-text">
      Osnovna ivica pravilne četvorostrane piramide je \(8\) cm, a središte osnove je od bočne strane na rastojanju \(2\) cm. Tada je visina piramide jednaka:
    </div>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">(A) \(10\) cm</div>
      <div class="given-item answer-option" data-option="B">(B) \(4\sqrt{3}\) cm</div>
      <div class="given-item answer-option" data-option="C">(C) \(8\) cm</div>
      <div class="given-item answer-option correct" data-option="D">(D) \(\dfrac{4\sqrt{3}}{3}\) cm</div>
      <div class="given-item answer-option" data-option="E">(E) \(6\sqrt{3}\) cm</div>
    </div>
  </div>

  <!-- PLAN -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128204;</span> Plan rešavanja</div>
    <p class="plan-text">
      Posmatraćemo karakterističan pravougli trougao u piramidi koji sadrži vrh \(V\), centar osnove \(O\) i središte jedne ivice osnove \(M\). U tom trouglu iskoristićemo činjenicu da je rastojanje od tačke \(O\) do hipotenuze \(VM\) jednako rastojanju centra osnove od bočne strane, tj. \(2\) cm. Izjednačavanjem dva izraza za površinu trougla \(VOM\) dobićemo visinu piramide.
    </p>
  </div>

  <!-- TEORIJA -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128218;</span> Podsetnik iz teorije</div>
    <details>
      <summary>Pravilna četvorostrana piramida &mdash; osnovni elementi</summary>
      <p style="margin-top: 8px;">
        Osnova je kvadrat sa stranicom \(a\). Vrh piramide \(V\) leži tačno iznad centra osnove \(O\).
        <br><strong>Apotema osnove</strong> (rastojanje od centra do sredine stranice kvadrata): \(d = \dfrac{a}{2}\).
        <br><strong>Bočna apotema</strong> (od vrha do sredine ivice osnove): \(m = \sqrt{h^2 + d^2}\), gde je \(h\) visina piramide.
      </p>
    </details>
    <details>
      <summary>Rastojanje tačke od prave u pravouglom trouglu</summary>
      <p style="margin-top: 8px;">
        U pravouglom trouglu sa katetama \(a\) i \(b\) i hipotenuzom \(c\), rastojanje temena pravog ugla od hipotenuze iznosi:
        \[d = \frac{a \cdot b}{c}\]
        Ovo sledi iz jednakosti dva izraza za površinu trougla:
        \[P = \frac{1}{2} \cdot a \cdot b = \frac{1}{2} \cdot c \cdot d\]
      </p>
    </details>
    <details>
      <summary>Rastojanje centra osnove od bočne strane</summary>
      <p style="margin-top: 8px;">
        Bočna strana piramide je trougao čija ravan seče trougao \(VOM\) duž hipotenuze \(VM\). Zato je rastojanje od tačke \(O\) do bočne strane jednako rastojanju od \(O\) do prave \(VM\) u trouglu \(VOM\).
      </p>
    </details>
  </div>

  <!-- VIZUELNI PRIKAZ -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127912;</span> Vizuelni prikaz</div>
    <canvas id="diagram-canvas" width="700" height="500"></canvas>
    <p class="canvas-caption">3D dijagram pravilne četvorostrane piramide sa označenim elementima</p>
  </div>

  <!-- KORAK PO KORAK -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128736;</span> Rešenje korak po korak</div>

    <!-- Korak 1 -->
    <div class="step">
      <div class="step-header">
        <div class="step-badge">1</div>
        <div class="step-title">Identifikujemo ključne elemente piramide</div>
      </div>
      <div class="step-content">
        <p>Neka je \(ABCD\) kvadratna osnova sa stranicom \(a = 8\) cm, \(O\) centar osnove, \(V\) vrh piramide, a \(M\) središte ivice \(AB\).</p>
        <p><strong>Apotema osnove</strong> (rastojanje od centra \(O\) do sredine stranice \(M\)):</p>
        <div class="math-highlight">
          \[d = OM = \frac{a}{2} = \frac{8}{2} = 4 \text{ cm}\]
        </div>
        <p><strong>Visina piramide:</strong> \(h = VO\) &mdash; to je nepoznata koju tražimo.</p>
        <p><strong>Bočna apotema:</strong> \(m = VM = \sqrt{h^2 + d^2} = \sqrt{h^2 + 16}\).</p>
      </div>
    </div>

    <!-- Korak 2 -->
    <div class="step">
      <div class="step-header">
        <div class="step-badge">2</div>
        <div class="step-title">Formiramo pravougli trougao \(VOM\)</div>
      </div>
      <div class="step-content">
        <p>Trougao \(VOM\) je <strong>pravougli</strong> sa pravim uglom kod \(O\):</p>
        <ul style="margin: 8px 0 8px 20px;">
          <li>\(VO = h\) &mdash; vertikalna kateta (visina piramide)</li>
          <li>\(OM = 4\) cm &mdash; horizontalna kateta (apotema osnove)</li>
          <li>\(VM = m = \sqrt{h^2 + 16}\) &mdash; hipotenuza (bočna apotema)</li>
        </ul>
        <p>Bočna strana piramide (trougao \(VAB\)) prolazi kroz duž \(VM\). Zato je rastojanje od centra \(O\) do bočne strane jednako rastojanju od tačke \(O\) do prave \(VM\).</p>
        <details>
          <summary>&#9989; Proveri sebe: Zašto je ugao kod \(O\) prav?</summary>
          <p style="margin-top: 8px;">Jer je \(VO\) vertikalno (visina piramide), a \(OM\) horizontalno (leži u ravni osnove). Vertikalno i horizontalno su uvek međusobno normalni.</p>
        </details>
      </div>
    </div>

    <!-- Korak 3 -->
    <div class="step">
      <div class="step-header">
        <div class="step-badge">3</div>
        <div class="step-title">Površina trougla \(VOM\) na dva načina</div>
      </div>
      <div class="step-content">
        <p><strong>Način 1:</strong> Koristimo katete kao osnovu i visinu:</p>
        <div class="math-highlight">
          \[P_{VOM} = \frac{1}{2} \cdot VO \cdot OM = \frac{1}{2} \cdot h \cdot 4 = 2h\]
        </div>
        <p><strong>Način 2:</strong> Koristimo hipotenuzu \(VM\) kao osnovu i rastojanje od \(O\) do \(VM\) kao visinu:</p>
        <div class="math-highlight">
          \[P_{VOM} = \frac{1}{2} \cdot VM \cdot d(O, VM) = \frac{1}{2} \cdot m \cdot 2 = m\]
        </div>
        <p>Izjednačavamo:</p>
        <div class="math-highlight">
          \[2h = m \quad \Rightarrow \quad m = 2h\]
        </div>
        <details>
          <summary>&#9989; Proveri sebe: Odakle \(d(O, VM) = 2\)?</summary>
          <p style="margin-top: 8px;">To je dato u zadatku: centar osnove je od bočne strane na rastojanju 2 cm. Pošto je \(VM\) presek ravni bočne strane sa trouglom \(VOM\), rastojanje od \(O\) do ravni bočne strane = rastojanje od \(O\) do prave \(VM\) = 2 cm.</p>
        </details>
      </div>
    </div>

    <!-- Korak 4 -->
    <div class="step">
      <div class="step-header">
        <div class="step-badge">4</div>
        <div class="step-title">Rešimo jednačinu po \(h\)</div>
      </div>
      <div class="step-content">
        <p>Znamo da je \(m^2 = h^2 + 16\) i \(m = 2h\). Uvrstimo:</p>
        <div class="math-highlight">
          \[(2h)^2 = h^2 + 16\]
        </div>
        <div class="math-highlight">
          \[4h^2 = h^2 + 16\]
        </div>
        <div class="math-highlight">
          \[3h^2 = 16\]
        </div>
        <div class="math-highlight">
          \[h^2 = \frac{16}{3}\]
        </div>
        <div class="math-highlight">
          \[h = \frac{4}{\sqrt{3}} = \frac{4\sqrt{3}}{3} \text{ cm}\]
        </div>
        <details>
          <summary>&#9989; Proveri sebe: Numerička provera</summary>
          <p style="margin-top: 8px;">
            \(h = \dfrac{4\sqrt{3}}{3} \approx \dfrac{4 \cdot 1{,}732}{3} \approx 2{,}309\) cm.<br>
            Bočna apotema: \(m = 2h \approx 4{,}619\) cm.<br>
            Provera: \(m^2 = h^2 + 16 \Rightarrow 4{,}619^2 \approx 21{,}33\) i \(2{,}309^2 + 16 \approx 5{,}33 + 16 = 21{,}33\). &#10004;
          </p>
        </details>
      </div>
    </div>
  </div>

  <!-- KLJUČNI UVID -->
  <div class="key-insight">
    <div class="card-title"><span class="icon">&#128161;</span> Ključni uvid</div>
    <p>
      Ceo zadatak se svodi na posmatranje jednog pravouglog trougla \(VOM\) i korišćenje <strong>dva izraza za istu površinu</strong>. Rastojanje centra od bočne strane piramide je zapravo visina na hipotenuzu u tom trouglu. To je fundamentalna tehnika u stereometriji &mdash; svođenje 3D problema na 2D presek.
    </p>
  </div>

  <!-- KONAČAN ODGOVOR -->
  <div class="card final-answer-box">
    <div class="card-title" style="justify-content: center;"><span class="icon">&#127919;</span> Konačan odgovor</div>
    <div class="final-answer-value">\(\dfrac{4\sqrt{3}}{3}\) cm</div>
    <div class="final-options">
      <div class="final-option">(A) \(10\) cm</div>
      <div class="final-option">(B) \(4\sqrt{3}\) cm</div>
      <div class="final-option">(C) \(8\) cm</div>
      <div class="final-option correct-option">(D) \(\dfrac{4\sqrt{3}}{3}\) cm</div>
      <div class="final-option">(E) \(6\sqrt{3}\) cm</div>
    </div>
    <p class="verification-note">Verifikacija: \(m = 2h = \dfrac{8\sqrt{3}}{3}\), &nbsp; \(m^2 = \dfrac{64}{3} = h^2 + 16 = \dfrac{16}{3} + \dfrac{48}{3}\) &#10004;</p>
  </div>

  <!-- ČESTE GREŠKE -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9888;&#65039;</span> Česte greške</div>
    <div class="pitfall-item">
      <span class="pitfall-icon">&#10060;</span>
      <div>
        <strong style="color: #f472b6;">Mešanje apoteme osnove i polovine dijagonale:</strong>
        <span class="pitfall-text">
          Apotema kvadrata (rastojanje od centra do sredine stranice) je \(\frac{a}{2} = 4\) cm, dok je poluprečnik opisanog kruga (rastojanje od centra do temena) \(\frac{a\sqrt{2}}{2} = 4\sqrt{2}\) cm. U ovom zadatku koristimo apotemu osnove, ne poluprečnik opisanog kruga.
        </span>
      </div>
    </div>
    <div class="pitfall-item">
      <span class="pitfall-icon">&#10060;</span>
      <div>
        <strong style="color: #f472b6;">Pogrešno tumačenje rastojanja od centra do bočne strane:</strong>
        <span class="pitfall-text">
          Rastojanje od centra osnove do bočne strane <em>nije</em> bočna apotema piramide! To je visina iz tačke \(O\) na hipotenuzu trougla \(VOM\), a ne duž \(VM\) sama.
        </span>
      </div>
    </div>
    <div class="pitfall-item">
      <span class="pitfall-icon">&#10060;</span>
      <div>
        <strong style="color: #f472b6;">Greška u racionalizaciji:</strong>
        <span class="pitfall-text">
          Rezultat \(\frac{4}{\sqrt{3}}\) se mora racionalizovati u \(\frac{4\sqrt{3}}{3}\). Ako ne prepoznate ovaj oblik, možete propustiti tačan odgovor među ponuđenim.
        </span>
      </div>
    </div>
  </div>

  <!-- DODATNI IZAZOV -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127947;</span> Dodatni izazov</div>
    <p class="challenge-text">
      Kolika bi bila zapremina ove piramide? A kolika bi bila visina piramide da je rastojanje centra osnove od bočne strane bilo \(3\) cm umesto \(2\) cm?
    </p>
    <details>
      <summary>Nagovještaj</summary>
      <p style="margin-top: 8px;">
        <strong>Zapremina:</strong> \(V = \frac{1}{3} \cdot a^2 \cdot h = \frac{1}{3} \cdot 64 \cdot \frac{4\sqrt{3}}{3} = \frac{256\sqrt{3}}{9} \approx 49{,}27\) cm\(^3\).
        <br><br>
        <strong>Za rastojanje 3 cm:</strong> Isti postupak daje \(2h = m\) zamenjeno sa \(\frac{4h}{m} = 3\), tj. \(m = \frac{4h}{3}\). Tada:
        \(\frac{16h^2}{9} = h^2 + 16\), odakle \(7h^2 = 144\), pa \(h = \frac{12\sqrt{7}}{7} \approx 4{,}54\) cm.
      </p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('diagram-canvas');
  const ctx = canvas.getContext('2d');

  function draw() {
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    canvas.width = rect.width * dpr;
    canvas.height = rect.height * dpr;
    ctx.scale(dpr, dpr);
    const W = rect.width;
    const H = rect.height;

    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // --- 3D PYRAMID DIAGRAM ---
    // Isometric-style projection of a square pyramid

    // Define base center in screen coords
    const cx = W * 0.38;
    const cy = H * 0.68;

    // Scale factor
    const s = Math.min(W, H) * 0.28;

    // Isometric angles
    const ax = 0.45; // angle for x-axis tilt
    const ay = 0.25; // angle for y-axis tilt

    // Project 3D to 2D (simple oblique projection)
    function project(x3, y3, z3) {
      var px = cx + x3 * s * 0.9 - y3 * s * 0.5;
      var py = cy - z3 * s * 1.2 - x3 * s * 0.15 - y3 * s * 0.35;
      return [px, py];
    }

    // Base corners (square centered at origin, side = 2 units => half = 1)
    var A = project(-1, -1, 0);
    var B = project(1, -1, 0);
    var C = project(1, 1, 0);
    var D = project(-1, 1, 0);

    // Center of base
    var O = project(0, 0, 0);

    // Apex (height = h, we'll use a visually pleasing height)
    var V = project(0, 0, 1.6);

    // Midpoint of AB
    var M = project(0, -1, 0);

    // Draw base (filled, semi-transparent)
    ctx.fillStyle = 'rgba(96, 165, 250, 0.06)';
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(A[0], A[1]);
    ctx.lineTo(B[0], B[1]);
    ctx.lineTo(C[0], C[1]);
    ctx.lineTo(D[0], D[1]);
    ctx.closePath();
    ctx.fill();
    ctx.stroke();

    // Draw back edges (dashed)
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.moveTo(V[0], V[1]);
    ctx.lineTo(D[0], D[1]);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(V[0], V[1]);
    ctx.lineTo(C[0], C[1]);
    ctx.stroke();
    // back base edges
    ctx.beginPath();
    ctx.moveTo(C[0], C[1]);
    ctx.lineTo(D[0], D[1]);
    ctx.stroke();
    ctx.setLineDash([]);

    // Draw front lateral edges
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(V[0], V[1]);
    ctx.lineTo(A[0], A[1]);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(V[0], V[1]);
    ctx.lineTo(B[0], B[1]);
    ctx.stroke();

    // Draw front base edges
    ctx.strokeStyle = '#94a3b8';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(A[0], A[1]);
    ctx.lineTo(B[0], B[1]);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(B[0], B[1]);
    ctx.lineTo(C[0], C[1]);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(A[0], A[1]);
    ctx.lineTo(D[0], D[1]);
    ctx.stroke();

    // Draw height VO (vertical, dashed blue)
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2;
    ctx.setLineDash([5, 4]);
    ctx.beginPath();
    ctx.moveTo(V[0], V[1]);
    ctx.lineTo(O[0], O[1]);
    ctx.stroke();
    ctx.setLineDash([]);

    // Draw OM (apothem of base)
    ctx.strokeStyle = '#fbbf24';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(O[0], O[1]);
    ctx.lineTo(M[0], M[1]);
    ctx.stroke();

    // Draw VM (slant height / lateral apothem)
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(V[0], V[1]);
    ctx.lineTo(M[0], M[1]);
    ctx.stroke();

    // Draw perpendicular from O to VM (distance = 2)
    // Compute foot of perpendicular from O to line VM
    var vmx = M[0] - V[0];
    var vmy = M[1] - V[1];
    var vox = O[0] - V[0];
    var voy = O[1] - V[1];
    var t = (vox * vmx + voy * vmy) / (vmx * vmx + vmy * vmy);
    var Fx = V[0] + t * vmx;
    var Fy = V[1] + t * vmy;

    // Draw the perpendicular line
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(O[0], O[1]);
    ctx.lineTo(Fx, Fy);
    ctx.stroke();

    // Small right angle marker at F
    var perpLen = 8;
    var vmNorm = Math.sqrt(vmx * vmx + vmy * vmy);
    var ux = vmx / vmNorm;
    var uy = vmy / vmNorm;
    var nx = -uy;
    var ny = ux;
    // Determine which direction the normal should point (toward O)
    var toOx = O[0] - Fx;
    var toOy = O[1] - Fy;
    if (nx * toOx + ny * toOy < 0) { nx = -nx; ny = -ny; }
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(Fx + ux * perpLen, Fy + uy * perpLen);
    ctx.lineTo(Fx + ux * perpLen + nx * perpLen, Fy + uy * perpLen + ny * perpLen);
    ctx.lineTo(Fx + nx * perpLen, Fy + ny * perpLen);
    ctx.stroke();

    // Right angle marker at O (between VO and OM)
    var voDir = [V[0] - O[0], V[1] - O[1]];
    var voLen = Math.sqrt(voDir[0] * voDir[0] + voDir[1] * voDir[1]);
    voDir[0] /= voLen; voDir[1] /= voLen;
    var omDir = [M[0] - O[0], M[1] - O[1]];
    var omLen = Math.sqrt(omDir[0] * omDir[0] + omDir[1] * omDir[1]);
    omDir[0] /= omLen; omDir[1] /= omLen;
    var rMark = 10;
    ctx.strokeStyle = '#e2e8f0';
    ctx.lineWidth = 1.2;
    ctx.beginPath();
    ctx.moveTo(O[0] + voDir[0] * rMark, O[1] + voDir[1] * rMark);
    ctx.lineTo(O[0] + voDir[0] * rMark + omDir[0] * rMark, O[1] + voDir[1] * rMark + omDir[1] * rMark);
    ctx.lineTo(O[0] + omDir[0] * rMark, O[1] + omDir[1] * rMark);
    ctx.stroke();

    // Dots at key points
    var points = [
      { p: V, label: 'V', color: '#60a5fa', dx: -6, dy: -14 },
      { p: O, label: 'O', color: '#a78bfa', dx: 8, dy: 6 },
      { p: M, label: 'M', color: '#fbbf24', dx: 0, dy: 18 },
      { p: A, label: 'A', color: '#94a3b8', dx: -18, dy: 8 },
      { p: B, label: 'B', color: '#94a3b8', dx: 10, dy: 8 },
      { p: C, label: 'C', color: '#94a3b8', dx: 12, dy: 4 },
      { p: D, label: 'D', color: '#94a3b8', dx: -18, dy: 4 }
    ];

    points.forEach(function(pt) {
      ctx.fillStyle = pt.color;
      ctx.beginPath();
      ctx.arc(pt.p[0], pt.p[1], 4, 0, 2 * Math.PI);
      ctx.fill();
      ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(pt.label, pt.p[0] + pt.dx, pt.p[1] + pt.dy);
    });

    // Foot of perpendicular dot
    ctx.fillStyle = '#4ade80';
    ctx.beginPath();
    ctx.arc(Fx, Fy, 3.5, 0, 2 * Math.PI);
    ctx.fill();
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('F', Fx + 8, Fy + 2);

    // --- LABELS for dimensions ---

    // h = VO label
    var hMidX = (V[0] + O[0]) / 2;
    var hMidY = (V[1] + O[1]) / 2;
    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText('h = ?', hMidX - 10, hMidY);

    // d = OM label
    var dMidX = (O[0] + M[0]) / 2;
    var dMidY = (O[1] + M[1]) / 2;
    ctx.fillStyle = '#fbbf24';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('d = 4', dMidX, dMidY + 18);

    // m = VM label
    var mMidX = (V[0] + M[0]) / 2;
    var mMidY = (V[1] + M[1]) / 2;
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('m', mMidX + 10, mMidY - 4);

    // dist = 2 label (OF)
    var ofMidX = (O[0] + Fx) / 2;
    var ofMidY = (O[1] + Fy) / 2;
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('2 cm', ofMidX + 14, ofMidY - 8);

    // a = AB label
    var abMidX = (A[0] + B[0]) / 2;
    var abMidY = (A[1] + B[1]) / 2;
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('a = 8', abMidX, abMidY + 18);

    // --- RIGHT PANEL: Triangle VOM detail ---
    var rx = W * 0.76;
    var ry = H * 0.15;
    var triW = W * 0.2;
    var triH = H * 0.55;

    // Title
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Trougao VOM', rx + triW * 0.3, ry - 10);

    // Triangle vertices (V top, O bottom-left, M bottom-right)
    var tV = [rx + triW * 0.3, ry + 10];
    var tO = [rx, ry + triH];
    var tM = [rx + triW * 0.65, ry + triH];

    // Fill triangle
    ctx.fillStyle = 'rgba(167, 139, 250, 0.06)';
    ctx.beginPath();
    ctx.moveTo(tV[0], tV[1]);
    ctx.lineTo(tO[0], tO[1]);
    ctx.lineTo(tM[0], tM[1]);
    ctx.closePath();
    ctx.fill();

    // VO (left side, vertical-ish)
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(tV[0], tV[1]);
    ctx.lineTo(tO[0], tO[1]);
    ctx.stroke();

    // OM (bottom, horizontal)
    ctx.strokeStyle = '#fbbf24';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(tO[0], tO[1]);
    ctx.lineTo(tM[0], tM[1]);
    ctx.stroke();

    // VM (hypotenuse)
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(tV[0], tV[1]);
    ctx.lineTo(tM[0], tM[1]);
    ctx.stroke();

    // Perpendicular from O to VM
    var tvmx = tM[0] - tV[0];
    var tvmy = tM[1] - tV[1];
    var tvox = tO[0] - tV[0];
    var tvoy = tO[1] - tV[1];
    var tt = (tvox * tvmx + tvoy * tvmy) / (tvmx * tvmx + tvmy * tvmy);
    var tFx = tV[0] + tt * tvmx;
    var tFy = tV[1] + tt * tvmy;

    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(tO[0], tO[1]);
    ctx.lineTo(tFx, tFy);
    ctx.stroke();

    // Right angle at O
    var tvoDir = [(tV[0] - tO[0]), (tV[1] - tO[1])];
    var tvoL = Math.sqrt(tvoDir[0] * tvoDir[0] + tvoDir[1] * tvoDir[1]);
    tvoDir[0] /= tvoL; tvoDir[1] /= tvoL;
    var tomDir = [(tM[0] - tO[0]), (tM[1] - tO[1])];
    var tomL = Math.sqrt(tomDir[0] * tomDir[0] + tomDir[1] * tomDir[1]);
    tomDir[0] /= tomL; tomDir[1] /= tomL;
    var rm = 12;
    ctx.strokeStyle = '#e2e8f0';
    ctx.lineWidth = 1.2;
    ctx.beginPath();
    ctx.moveTo(tO[0] + tvoDir[0] * rm, tO[1] + tvoDir[1] * rm);
    ctx.lineTo(tO[0] + tvoDir[0] * rm + tomDir[0] * rm, tO[1] + tvoDir[1] * rm + tomDir[1] * rm);
    ctx.lineTo(tO[0] + tomDir[0] * rm, tO[1] + tomDir[1] * rm);
    ctx.stroke();

    // Right angle at F
    var tvmNorm = Math.sqrt(tvmx * tvmx + tvmy * tvmy);
    var tux = tvmx / tvmNorm;
    var tuy = tvmy / tvmNorm;
    var tnx = -tuy;
    var tny = tux;
    var tToOx2 = tO[0] - tFx;
    var tToOy2 = tO[1] - tFy;
    if (tnx * tToOx2 + tny * tToOy2 < 0) { tnx = -tnx; tny = -tny; }
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1.2;
    ctx.beginPath();
    ctx.moveTo(tFx + tux * 8, tFy + tuy * 8);
    ctx.lineTo(tFx + tux * 8 + tnx * 8, tFy + tuy * 8 + tny * 8);
    ctx.lineTo(tFx + tnx * 8, tFy + tny * 8);
    ctx.stroke();

    // Dots
    var triPoints = [
      { p: tV, label: 'V', color: '#60a5fa', dx: -4, dy: -10 },
      { p: tO, label: 'O', color: '#a78bfa', dx: -14, dy: 16 },
      { p: tM, label: 'M', color: '#fbbf24', dx: 10, dy: 16 }
    ];
    triPoints.forEach(function(pt) {
      ctx.fillStyle = pt.color;
      ctx.beginPath();
      ctx.arc(pt.p[0], pt.p[1], 4, 0, 2 * Math.PI);
      ctx.fill();
      ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(pt.label, pt.p[0] + pt.dx, pt.p[1] + pt.dy);
    });

    // F dot
    ctx.fillStyle = '#4ade80';
    ctx.beginPath();
    ctx.arc(tFx, tFy, 3.5, 0, 2 * Math.PI);
    ctx.fill();
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.fillText('F', tFx + 10, tFy - 4);

    // Labels for triangle sides
    // h label on VO
    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText('h', (tV[0] + tO[0]) / 2 - 10, (tV[1] + tO[1]) / 2);

    // d = 4 label on OM
    ctx.fillStyle = '#fbbf24';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('d = 4 cm', (tO[0] + tM[0]) / 2, (tO[1] + tM[1]) / 2 + 20);

    // m label on VM
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('m = 2h', (tV[0] + tM[0]) / 2 + 10, (tV[1] + tM[1]) / 2 - 2);

    // 2 cm label on OF
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    var ofMx = (tO[0] + tFx) / 2;
    var ofMy = (tO[1] + tFy) / 2;
    ctx.fillText('2 cm', ofMx + 18, ofMy - 6);

    // Bottom summary formula
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('2h = m,  m\u00B2 = h\u00B2 + 16  \u2192  3h\u00B2 = 16  \u2192  h = 4\u221A3 / 3', W / 2, H - 14);
  }

  draw();
  window.addEventListener('resize', draw);
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Visina pravilne četvorostrane piramide na osnovu rastojanja centra od bočne strane",
  "subject": "math",
  "unit": "stereometry",
  "topic_tags": ["stereometrija", "piramida", "pravilna četvorostrana piramida", "rastojanje tačke od ravni", "pravougli trougao", "površina trougla"]
}
BRAINSPARK_META-->