<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Presek trougla pravom paralelnom osnovici</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
  Problem:
  - Trougao sa osnovicom a je presecen pravom paralelnom osnovici na dva dela jednakih povrsina.
  - Trazi se duzina osnovice manjeg trougla (koja lezi na toj pravoj).

  Analiza:
  Neka je trougao ABC sa osnovicom BC = a i visinom h.
  Prava paralelna BC sece stranice AB i AC i formira manji trougao na vrhu.

  Posto je prava paralelna osnovici, manji trougao je slican polaznom trouglu.

  Neka je koeficijent slicnosti k, tj. osnovica manjeg trougla je b = k * a.

  Odnos povrsina slicnih trouglova jednak je kvadratu koeficijenta slicnosti:
  P_mali / P_veliki = k^2

  Uslov: Prava deli trougao na dva dela JEDNAKIH povrsina.
  To znaci da je povrsina manjeg trougla jednaka polovini povrsine velikog trougla:
  P_mali = P_veliki / 2

  Dakle:
  P_mali / P_veliki = 1/2
  k^2 = 1/2
  k = 1/sqrt(2) = sqrt(2)/2

  Osnovica manjeg trougla:
  b = k * a = a * sqrt(2)/2 = a*sqrt(2)/2

  Odgovor: (D) a*sqrt(2)/2

  Verifikacija:
  - Povrsina velikog trougla: P = a*h/2
  - Visina manjeg trougla: h' = k*h = h*sqrt(2)/2
  - Povrsina manjeg trougla: P' = b*h'/2 = (a*sqrt(2)/2)*(h*sqrt(2)/2)/2
    = a*h*2/(2*2*2) = a*h*2/8 = a*h/4 = P/2. Tacno!

  Alternativna verifikacija:
  - Odnos povrsina: (b/a)^2 = (sqrt(2)/2)^2 = 2/4 = 1/2. Tacno!

  Tacan odgovor je (D) a*sqrt(2)/2.
</script>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
}

.card h2 {
  font-size: 1.3rem;
  color: #60a5fa;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title {
  font-size: 1.3rem;
  color: #60a5fa;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.4rem;
}

.problem-text {
  font-size: 1.15rem;
  line-height: 1.8;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96, 165, 250, 0.08);
  border: 1px solid rgba(96, 165, 250, 0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
  transition: transform 0.2s, border-color 0.2s;
}

.given-item:hover {
  transform: translateY(-2px);
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card h2 {
  color: #a78bfa;
}

.plan-text {
  color: #a78bfa;
  font-size: 1.05rem;
  font-style: italic;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 8px 0;
  user-select: none;
}

details summary:hover {
  color: #93bbfc;
}

details .detail-content {
  padding: 12px 16px;
  background: rgba(30, 41, 59, 0.7);
  border-left: 3px solid #60a5fa;
  border-radius: 0 8px 8px 0;
  margin-top: 8px;
}

.step {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  align-items: flex-start;
  padding: 8px;
  border-left: 3px solid transparent;
  border-radius: 0 8px 8px 0;
  transition: border-color 0.3s, background 0.3s;
  cursor: pointer;
}

.step:hover, .step.active {
  border-left-color: #4ade80;
  background: rgba(74, 222, 128, 0.04);
}

.step-badge {
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  font-weight: 700;
  font-size: 0.85rem;
  min-width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-title {
  font-weight: 600;
  color: #f472b6;
  margin-bottom: 6px;
  font-size: 1.05rem;
}

.step-math {
  background: rgba(167, 139, 250, 0.1);
  border: 1px solid rgba(167, 139, 250, 0.25);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 10px 0;
  text-align: center;
  font-size: 1.05rem;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.12), rgba(167, 139, 250, 0.12));
  border: 1px solid rgba(167, 139, 250, 0.35);
  border-radius: 16px;
  padding: 24px 28px;
  margin-bottom: 24px;
}

.insight-box .card-title {
  color: #a78bfa;
}

.final-answer-box {
  background: rgba(52, 211, 153, 0.08);
  border: 2px solid #34d399;
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin-bottom: 24px;
}

.final-answer-box .answer-label {
  color: #94a3b8;
  font-size: 1rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 12px;
}

.final-answer-box .answer-value {
  color: #4ade80;
  font-size: 2rem;
  font-weight: 700;
}

.final-answer-box .answer-detail {
  color: #34d399;
  font-size: 1.2rem;
  margin-top: 8px;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-top: 16px;
}

.final-option {
  background: rgba(51, 65, 85, 0.6);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 20px;
  font-size: 1rem;
  transition: all 0.3s ease;
}

.final-option.correct {
  background: rgba(52, 211, 153, 0.15);
  border-color: #34d399;
  color: #34d399;
  font-weight: 600;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 16px;
  font-style: italic;
}

.pitfall {
  display: flex;
  gap: 12px;
  align-items: flex-start;
  margin-bottom: 12px;
}

.pitfall-icon {
  color: #f472b6;
  font-weight: 700;
  font-size: 1.2rem;
  flex-shrink: 0;
}

.challenge-box {
  background: rgba(244, 114, 182, 0.08);
  border: 1px solid rgba(244, 114, 182, 0.3);
  border-radius: 16px;
  padding: 24px 28px;
}

.challenge-box .card-title {
  color: #f472b6;
}

canvas {
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  max-width: 100%;
  touch-action: none;
}

.canvas-wrapper {
  text-align: center;
}

.canvas-caption {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 10px;
  text-align: center;
}

.checkpoint details summary {
  color: #34d399;
  font-size: 0.95rem;
}

.checkpoint details .detail-content {
  border-left-color: #34d399;
}

@media (max-width: 700px) {
  h1 {
    font-size: 1.6rem;
  }
  .card {
    padding: 18px;
  }
  .given-grid {
    flex-direction: column;
  }
  .step {
    flex-direction: column;
    gap: 8px;
  }
  .step-badge {
    align-self: flex-start;
  }
  .final-answer-box .answer-value {
    font-size: 1.5rem;
  }
  .final-options {
    flex-direction: column;
    align-items: center;
  }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Presek trougla pravom paralelnom osnovici</h1>
  <p class="subtitle">Geometrija -- slicnost trouglova, odnos povrsina</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Tekst zadatka</h2>
    <div class="problem-text">
      <p>Trougao je presecen na dva dela jednakih povrsina pravom koja je paralelna osnovici. Ako je \( a \) osnovica trougla, tada je osnovica manjeg trougla koja lezi na datoj pravoj jednaka:</p>
    </div>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(\dfrac{a}{2}\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(\dfrac{a}{4}\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(a - 2\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(\dfrac{a\sqrt{2}}{2}\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(\dfrac{a}{8}\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p class="plan-text">
      Iskoristicemo cinjenicu da prava paralelna osnovici trougla formira manji trougao koji je slican polaznom. Odnos povrsina slicnih figura jednak je kvadratu koeficijenta slicnosti. Iz uslova da su povrsine dva dela jednake, odrednicemo koeficijent slicnosti i izracunati osnovicu manjeg trougla.
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <h2>Podsetnik iz teorije</h2>
    <details>
      <summary>Kljucne formule i teoreme (klikni da otvoris)</summary>
      <div class="detail-content">
        <ul style="margin: 8px 0 12px 20px; color: #e2e8f0;">
          <li><strong>Talesova teorema (o proporcionalnosti):</strong> Ako prava paralelna jednoj stranici trougla sece druge dve stranice, ona ih deli u istom odnosu.</li>
          <li><strong>Slicnost trouglova:</strong> Ako je prava paralelna osnovici trougla, manji trougao formiran izmedju vrha i te prave je slican polaznom trouglu.</li>
          <li><strong>Odnos povrsina slicnih figura:</strong> Ako je koeficijent slicnosti \( k \), onda je odnos povrsina \( k^2 \):
            \[ \frac{P_{\text{mali}}}{P_{\text{veliki}}} = k^2 \]
          </li>
          <li><strong>Odnos linearnih dimenzija:</strong> Sve odgovarajuce linearne dimenzije (stranice, visine, medijane...) slicnih trouglova stoje u istom odnosu \( k \).</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <h2>Vizuelni prikaz</h2>
    <div class="canvas-wrapper">
      <canvas id="diagram" width="800" height="520"></canvas>
    </div>
    <p class="canvas-caption">Trougao \( ABC \) sa osnovicom \( BC = a \) i presecnom pravom \( DE \) paralelnom sa \( BC \). Manji trougao \( ADE \) ima polovinu povrsine velikog trougla.</p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step" id="step-1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <div class="step-title">Postavka problema</div>
        <p>Neka je dat trougao \( ABC \) sa osnovicom \( BC = a \) i visinom \( h \) iz temena \( A \) na stranicu \( BC \).</p>
        <p>Prava \( DE \) je paralelna sa \( BC \) i sece stranicu \( AB \) u tacki \( D \), a stranicu \( AC \) u tacki \( E \).</p>
        <p>Ova prava deli trougao na dva dela:</p>
        <ul style="margin: 8px 0 8px 20px;">
          <li>Manji trougao \( ADE \) (na vrhu)</li>
          <li>Trapez \( BCED \) (na dnu)</li>
        </ul>
        <p>Uslov: ova dva dela imaju <strong>jednake povrsine</strong>.</p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step" id="step-2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <div class="step-title">Uocimo slicnost trouglova</div>
        <p>Posto je \( DE \parallel BC \), trougao \( ADE \) je slican trouglu \( ABC \) (po A-A kriterijumu):</p>
        <div class="step-math">
          \[ \triangle ADE \sim \triangle ABC \]
        </div>
        <p>Neka je koeficijent slicnosti \( k \), tj.:</p>
        <div class="step-math">
          \[ k = \frac{DE}{BC} = \frac{DE}{a} \]
        </div>
        <p>Tada sve odgovarajuce linearne dimenzije manjeg trougla stoje u odnosu \( k \) prema odgovarajucim dimenzijama velikog trougla. Konkretno, ako je visina velikog trougla \( h \), visina manjeg je \( k \cdot h \).</p>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step" id="step-3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <div class="step-title">Postavimo jednacinu za povrsine</div>
        <p>Povrsina velikog trougla \( ABC \):</p>
        <div class="step-math">
          \[ P_{ABC} = \frac{a \cdot h}{2} \]
        </div>
        <p>Povrsina manjeg trougla \( ADE \) koristeci odnos povrsina slicnih trouglova:</p>
        <div class="step-math">
          \[ P_{ADE} = k^2 \cdot P_{ABC} \]
        </div>
        <p>Posto prava deli trougao na dva dela <strong>jednakih</strong> povrsina:</p>
        <div class="step-math">
          \[ P_{ADE} = \frac{P_{ABC}}{2} \]
        </div>

        <div class="checkpoint">
          <details>
            <summary>Proveri sebe: Zasto je P_ADE = k^2 * P_ABC?</summary>
            <div class="detail-content">
              Kod slicnih figura, sve linearne dimenzije se mnoje sa \( k \). Povrsina zavisi od <em>dve</em> linearne dimenzije (npr. osnovica i visina), pa se mnozi sa \( k \cdot k = k^2 \). Konkretno: \( P_{ADE} = \frac{(ka)(kh)}{2} = k^2 \cdot \frac{ah}{2} = k^2 \cdot P_{ABC} \).
            </div>
          </details>
        </div>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step" id="step-4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <div class="step-title">Resimo jednacinu po \( k \)</div>
        <p>Iz uslova jednakosti dva dela:</p>
        <div class="step-math">
          \[ k^2 \cdot P_{ABC} = \frac{P_{ABC}}{2} \]
        </div>
        <p>Skratimo sa \( P_{ABC} \) (koja je pozitivna):</p>
        <div class="step-math">
          \[ k^2 = \frac{1}{2} \]
        </div>
        <p>Posto je \( k > 0 \) (predstavlja odnos duzina):</p>
        <div class="step-math">
          \[ k = \frac{1}{\sqrt{2}} = \frac{\sqrt{2}}{2} \]
        </div>

        <div class="checkpoint">
          <details>
            <summary>Proveri sebe: Racionalizacija imenioca</summary>
            <div class="detail-content">
              \( \dfrac{1}{\sqrt{2}} = \dfrac{1}{\sqrt{2}} \cdot \dfrac{\sqrt{2}}{\sqrt{2}} = \dfrac{\sqrt{2}}{2} \approx 0{,}707 \). Dakle, manji trougao ima linearnu dimenziju oko 70,7% od velikog.
            </div>
          </details>
        </div>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step" id="step-5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <div class="step-title">Izracunajmo osnovicu manjeg trougla</div>
        <p>Osnovica manjeg trougla \( DE \) je:</p>
        <div class="step-math">
          \[ DE = k \cdot a = \frac{\sqrt{2}}{2} \cdot a = \frac{a\sqrt{2}}{2} \]
        </div>
        <p>Ovo odgovara opciji <strong>(D)</strong>.</p>

        <div class="checkpoint">
          <details>
            <summary>Proveri sebe: Verifikacija rezultata</summary>
            <div class="detail-content">
              <p>Proverimo da manji trougao zaista ima polovinu povrsine:</p>
              <p>\( P_{ADE} = k^2 \cdot P_{ABC} = \frac{1}{2} \cdot P_{ABC} \). Tacno!</p>
              <p>Povrsina trapeza: \( P_{BCED} = P_{ABC} - P_{ADE} = P_{ABC} - \frac{P_{ABC}}{2} = \frac{P_{ABC}}{2} \).</p>
              <p>Dakle, \( P_{ADE} = P_{BCED} = \frac{P_{ABC}}{2} \). Delovi su zaista jednakih povrsina.</p>
            </div>
          </details>
        </div>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <div class="card-title"><span class="icon">Kljucni uvid</span></div>
    <p>Sustina ovog zadatka je razumevanje kako se <strong>povrsina skalira kod slicnih figura</strong>. Kada linearne dimenzije pomnozimo sa \( k \), povrsina se pomnozi sa \( k^2 \). Zato, da bismo podelili trougao na dva jednaka dela, ne treba nam prava na polovini visine (to bi dalo \( k = \frac{1}{2} \) i \( k^2 = \frac{1}{4} \)), vec na visini \( \frac{\sqrt{2}}{2} \cdot h \) od vrha.</p>
    <div class="step-math" style="margin-top: 12px;">
      \[ \frac{P_{\text{mali}}}{P_{\text{veliki}}} = \frac{1}{2} \implies k = \frac{1}{\sqrt{2}} \implies DE = \frac{a\sqrt{2}}{2} \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <div class="answer-label">Konacan odgovor</div>
    <div class="answer-value">\( \dfrac{a\sqrt{2}}{2} \)</div>
    <div class="answer-detail">Tacan odgovor je (D)</div>
    <div class="final-options">
      <div class="final-option">(A) \(\dfrac{a}{2}\)</div>
      <div class="final-option">(B) \(\dfrac{a}{4}\)</div>
      <div class="final-option">(C) \(a - 2\)</div>
      <div class="final-option correct">(D) \(\dfrac{a\sqrt{2}}{2}\)</div>
      <div class="final-option">(E) \(\dfrac{a}{8}\)</div>
    </div>
    <p class="verification-note">Provera: \( k^2 = \left(\frac{\sqrt{2}}{2}\right)^2 = \frac{2}{4} = \frac{1}{2} \). Manji trougao ima tacno polovinu povrsine polaznog trougla.</p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Ceste greske</h2>
    <div class="pitfall">
      <span class="pitfall-icon">&#10007;</span>
      <p><strong>Brkanje odnosa linearnog i kvadratnog:</strong> Najcesca greska je zakljuciti da ako je povrsina upola manja, onda je i osnovica upola manja. To bi dalo \( \frac{a}{2} \) (opcija A), ali je pogresno! Povrsina se skalira sa <em>kvadratom</em> koeficijenta slicnosti, ne linearno.</p>
    </div>
    <div class="pitfall">
      <span class="pitfall-icon">&#10007;</span>
      <p><strong>Presek na pola visine:</strong> Ako povucemo pravu tacno na polovini visine, koeficijent slicnosti je \( k = \frac{1}{2} \), pa je povrsina manjeg trougla \( k^2 = \frac{1}{4} \) od ukupne -- dakle <em>cetvrtina</em>, a ne polovina. Pravu treba povuci na visini \( \frac{\sqrt{2}}{2} \cdot h \approx 0{,}707 \cdot h \) od vrha.</p>
    </div>
    <div class="pitfall">
      <span class="pitfall-icon">&#10007;</span>
      <p><strong>Odgovor \( a - 2 \):</strong> Opcija (C) nema geometrijski smisao jer ne zavisi od \( a \) na ispravan nacin -- za razlicite vrednosti \( a \) bi dala besmislene rezultate (npr. negativne za \( a < 2 \)).</p>
    </div>
  </div>

  <!-- Optional Challenge -->
  <div class="challenge-box">
    <div class="card-title"><span class="icon">Dodatni izazov</span></div>
    <p>Trougao sa osnovicom \( a \) treba podeliti na <strong>tri dela jednakih povrsina</strong> pomocu dve prave paralelne osnovici. Koliko iznose osnovice dva manja trougla (formiranih od vrha do svake prave)?</p>
    <details>
      <summary>Pogledaj hint</summary>
      <div class="detail-content">
        <p>Manji trougao (najblizi vrhu) ima \( \frac{1}{3} \) ukupne povrsine, a srednji trougao (do druge prave) ima \( \frac{2}{3} \) ukupne povrsine.</p>
        <p>Za prvi: \( k_1^2 = \frac{1}{3} \implies k_1 = \frac{1}{\sqrt{3}} \implies b_1 = \frac{a}{\sqrt{3}} = \frac{a\sqrt{3}}{3} \)</p>
        <p>Za drugi: \( k_2^2 = \frac{2}{3} \implies k_2 = \sqrt{\frac{2}{3}} \implies b_2 = a\sqrt{\frac{2}{3}} = \frac{a\sqrt{6}}{3} \)</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('diagram');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  const dpr = window.devicePixelRatio || 1;
  canvas.width = W * dpr;
  canvas.height = H * dpr;
  canvas.style.width = W + 'px';
  canvas.style.height = H + 'px';
  ctx.scale(dpr, dpr);

  function draw() {
    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Triangle coordinates (Y-up mapped to canvas Y-down)
    // Using canvas coordinates directly for simplicity
    var Ax = W / 2 - 30;
    var Ay = 60;
    var Bx = 100;
    var By = H - 80;
    var Cx = W - 200;
    var Cy = H - 80;

    var a = Math.sqrt((Cx - Bx) * (Cx - Bx) + (Cy - By) * (Cy - By));

    // k = sqrt(2)/2 ~ 0.7071
    var k = Math.SQRT2 / 2;

    // D is on AB at ratio k from A
    var Dx = Ax + k * (Bx - Ax);
    var Dy = Ay + k * (By - Ay);

    // E is on AC at ratio k from A
    var Ex = Ax + k * (Cx - Ax);
    var Ey = Ay + k * (Cy - Ay);

    // Draw large triangle (filled area - lower trapez)
    ctx.beginPath();
    ctx.moveTo(Dx, Dy);
    ctx.lineTo(Bx, By);
    ctx.lineTo(Cx, Cy);
    ctx.lineTo(Ex, Ey);
    ctx.closePath();
    ctx.fillStyle = 'rgba(96, 165, 250, 0.08)';
    ctx.fill();

    // Draw small triangle (filled area)
    ctx.beginPath();
    ctx.moveTo(Ax, Ay);
    ctx.lineTo(Dx, Dy);
    ctx.lineTo(Ex, Ey);
    ctx.closePath();
    ctx.fillStyle = 'rgba(167, 139, 250, 0.15)';
    ctx.fill();

    // Draw large triangle outline
    ctx.beginPath();
    ctx.moveTo(Ax, Ay);
    ctx.lineTo(Bx, By);
    ctx.lineTo(Cx, Cy);
    ctx.closePath();
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.stroke();

    // Draw DE line (the parallel cut)
    ctx.beginPath();
    ctx.moveTo(Dx, Dy);
    ctx.lineTo(Ex, Ey);
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 3;
    ctx.stroke();

    // Draw dashed height of big triangle
    var footX = Ax;
    var footY = By;
    ctx.setLineDash([6, 6]);
    ctx.strokeStyle = '#33415566';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(Ax, Ay);
    ctx.lineTo(footX, footY);
    ctx.stroke();
    ctx.setLineDash([]);

    // Height label "h"
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'italic 16px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('h', Ax + 8, (Ay + footY) / 2);

    // Draw dashed height of small triangle
    var footDEy = Dy;
    ctx.setLineDash([4, 4]);
    ctx.strokeStyle = '#a78bfa44';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(Ax, Ay);
    ctx.lineTo(Ax, footDEy);
    ctx.stroke();
    ctx.setLineDash([]);

    // Small height label "kh"
    ctx.fillStyle = '#a78bfa';
    ctx.font = 'italic 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText('kh', Ax - 8, (Ay + footDEy) / 2);

    // Parallel marks on DE and BC
    function drawParallelMark(x1, y1, x2, y2, color) {
      var mx = (x1 + x2) / 2;
      var my = (y1 + y2) / 2;
      var dx = x2 - x1;
      var dy = y2 - y1;
      var len = Math.sqrt(dx * dx + dy * dy);
      var nx = -dy / len;
      var ny = dx / len;
      var markLen = 8;
      var gap = 5;

      ctx.strokeStyle = color;
      ctx.lineWidth = 2;

      for (var i = -1; i <= 1; i += 2) {
        var ox = i * gap * dx / len;
        var oy = i * gap * dy / len;
        ctx.beginPath();
        ctx.moveTo(mx + ox - nx * markLen, my + oy - ny * markLen);
        ctx.lineTo(mx + ox + nx * markLen, my + oy + ny * markLen);
        ctx.stroke();
      }
    }

    drawParallelMark(Dx, Dy, Ex, Ey, '#a78bfa');
    drawParallelMark(Bx, By, Cx, Cy, '#60a5fa');

    // Vertex labels
    ctx.font = 'bold 18px Segoe UI, system-ui, sans-serif';

    ctx.fillStyle = '#e2e8f0';
    ctx.textAlign = 'center';
    ctx.fillText('A', Ax, Ay - 14);

    ctx.fillStyle = '#e2e8f0';
    ctx.textAlign = 'right';
    ctx.fillText('B', Bx - 14, By + 6);

    ctx.fillStyle = '#e2e8f0';
    ctx.textAlign = 'left';
    ctx.fillText('C', Cx + 14, Cy + 6);

    ctx.fillStyle = '#a78bfa';
    ctx.textAlign = 'right';
    ctx.fillText('D', Dx - 12, Dy + 2);

    ctx.fillStyle = '#a78bfa';
    ctx.textAlign = 'left';
    ctx.fillText('E', Ex + 12, Ey + 2);

    // Edge labels
    // BC = a
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 18px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('a', (Bx + Cx) / 2, By + 30);

    // DE = a*sqrt(2)/2
    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('a\u221A2 / 2', (Dx + Ex) / 2, Dy - 12);

    // Area labels
    ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';

    // Small triangle area
    ctx.fillStyle = '#a78bfa';
    ctx.textAlign = 'center';
    var smallCenterX = (Ax + Dx + Ex) / 3;
    var smallCenterY = (Ay + Dy + Ey) / 3;
    ctx.fillText('P/2', smallCenterX, smallCenterY + 6);

    // Trapezoid area
    ctx.fillStyle = '#60a5fa';
    ctx.textAlign = 'center';
    var trapCenterX = (Bx + Cx + Dx + Ex) / 4;
    var trapCenterY = (By + Cy + Dy + Ey) / 4;
    ctx.fillText('P/2', trapCenterX, trapCenterY + 6);

    // Right side: ratio info panel
    var panelX = W - 180;
    var panelY = 40;
    var panelW = 165;
    var panelH = 200;

    ctx.fillStyle = '#0c1222';
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.roundRect(panelX, panelY, panelW, panelH, 10);
    ctx.fill();
    ctx.stroke();

    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Koeficijent slicnosti', panelX + panelW / 2, panelY + 22);

    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 20px Segoe UI, system-ui, sans-serif';
    ctx.fillText('k = \u221A2/2', panelX + panelW / 2, panelY + 52);

    ctx.fillStyle = '#64748b';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.fillText('k \u2248 0,707', panelX + panelW / 2, panelY + 74);

    // Separator line
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(panelX + 15, panelY + 88);
    ctx.lineTo(panelX + panelW - 15, panelY + 88);
    ctx.stroke();

    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Linearno:', panelX + 15, panelY + 110);
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.fillText('DE/BC = k', panelX + 15, panelY + 128);

    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.fillText('Povrsinski:', panelX + 15, panelY + 154);
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.fillText('P_ADE/P_ABC = k\u00B2 = 1/2', panelX + 15, panelY + 172);

    // Title
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Presek trougla pravom paralelnom osnovici', W / 2 - 30, 28);
  }

  draw();

  // Step click highlighting
  var steps = document.querySelectorAll('.step');
  steps.forEach(function(step) {
    step.addEventListener('click', function() {
      steps.forEach(function(s) { s.classList.remove('active'); });
      step.classList.add('active');
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Presek trougla pravom paralelnom osnovici",
  "subject": "math",
  "unit": "geometrija",
  "topic_tags": ["slicnost trouglova", "odnos povrsina", "koeficijent slicnosti", "paralelna prava", "Talesova teorema"]
}
BRAINSPARK_META-->