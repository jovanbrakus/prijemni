<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jednakost logaritamskih funkcija</title>
<script type="text/info" id="logic-scratchpad">
Problem: Date su cetiri funkcije:
f1(x) = ln((x+3)^5 * (x-1)^2)
f2(x) = 5ln(x+3) + ln(x-1)^2
f3(x) = ln(x+3)^5 + 2ln(x-1)
f4(x) = 5ln(x+3) + 2ln(x-1)

Pitanje: Koji iskaz o jednakosti funkcija je tacan?

KLJUCNO: Dve funkcije su jednake ako i samo ako imaju isti domen I iste vrednosti na tom domenu.

Korak 1: Odredimo domen svake funkcije.

f1(x) = ln((x+3)^5 * (x-1)^2)
  Argument logaritma mora biti > 0:
  (x+3)^5 * (x-1)^2 > 0
  (x-1)^2 >= 0 uvek, i (x-1)^2 = 0 samo za x = 1
  (x+3)^5 > 0 kad x+3 > 0, tj. x > -3
  (x+3)^5 < 0 kad x < -3
  (x+3)^5 = 0 kad x = -3

  Dakle: (x+3)^5 * (x-1)^2 > 0 kad:
  - x > -3 i x != 1 (jer (x+3)^5 > 0 i (x-1)^2 > 0)
  - Kad x = 1: proizvod je (4)^5 * 0 = 0, nije > 0
  - Kad x < -3: (x+3)^5 < 0, (x-1)^2 > 0, proizvod < 0
  - Kad x = -3: proizvod = 0

  Domen f1: x > -3 i x != 1, tj. (-3, 1) U (1, +inf)

f2(x) = 5ln(x+3) + ln((x-1)^2)
  Za 5ln(x+3): treba x+3 > 0, tj. x > -3
  Za ln((x-1)^2): treba (x-1)^2 > 0, tj. x != 1
  Domen f2: x > -3 i x != 1, tj. (-3, 1) U (1, +inf)

f3(x) = ln((x+3)^5) + 2ln(x-1)
  Za ln((x+3)^5): treba (x+3)^5 > 0, tj. x+3 > 0, tj. x > -3
  Za 2ln(x-1): treba x-1 > 0, tj. x > 1
  Domen f3: x > -3 i x > 1, tj. x > 1, tj. (1, +inf)

f4(x) = 5ln(x+3) + 2ln(x-1)
  Za 5ln(x+3): treba x > -3
  Za 2ln(x-1): treba x > 1
  Domen f4: x > 1, tj. (1, +inf)

Korak 2: Uporedimo vrednosti na zajednickom domenu.

Za x > 1 (gde su sve definisane), x+3 > 0 i x-1 > 0:

f1(x) = ln((x+3)^5 * (x-1)^2) = ln((x+3)^5) + ln((x-1)^2)
      = 5ln(x+3) + 2ln(x-1)   [jer su oba argumenta > 0]

f2(x) = 5ln(x+3) + ln((x-1)^2) = 5ln(x+3) + 2ln|x-1| = 5ln(x+3) + 2ln(x-1)
      [jer x > 1 => x-1 > 0 => |x-1| = x-1]

f3(x) = ln((x+3)^5) + 2ln(x-1) = 5ln(x+3) + 2ln(x-1)

f4(x) = 5ln(x+3) + 2ln(x-1)

Dakle na x > 1, SVE cetiri funkcije imaju istu vrednost: 5ln(x+3) + 2ln(x-1).

Korak 3: Proverimo za -3 < x < 1 (gde su f1 i f2 definisane, ali f3 i f4 nisu).

Za -3 < x < 1 (i x != 1):
x+3 > 0, x-1 < 0

f1(x) = ln((x+3)^5 * (x-1)^2)
      = ln((x+3)^5) + ln((x-1)^2)
      = 5ln(x+3) + ln((x-1)^2)
      = 5ln(x+3) + 2ln|x-1|

f2(x) = 5ln(x+3) + ln((x-1)^2)
      = 5ln(x+3) + 2ln|x-1|

Dakle f1 i f2 se poklapaju i na (-3, 1).

Korak 4: Zakljucak
- f1 i f2 imaju isti domen (-3, 1) U (1, +inf) i iste vrednosti => f1 = f2
- f3 i f4 imaju isti domen (1, +inf) i iste vrednosti => f3 = f4
- f1 != f3 jer imaju razlicite domene (npr. x = 0 pripada domenu f1 ali ne f3)

Odgovor: (C) f1 = f2 != f3 = f4
</script>
<script>
MathJax={tex:{inlineMath:[['\\(','\\)'],['$','$']],displayMath:[['\\[','\\]']]},svg:{fontCache:'global'}};
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  font-size: 1.05rem;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
  transition: transform 0.2s, border-color 0.2s;
}

.given-item:hover {
  transform: translateY(-2px);
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.05rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
}

/* Function definitions styling */
.fn-def-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  margin: 16px 0;
}

.fn-def-item {
  background: rgba(30,41,59,0.6);
  border-radius: 10px;
  padding: 14px 18px;
  border-left: 3px solid transparent;
}

.fn-def-item.f1-style { border-left-color: #60a5fa; }
.fn-def-item.f2-style { border-left-color: #a78bfa; }
.fn-def-item.f3-style { border-left-color: #f472b6; }
.fn-def-item.f4-style { border-left-color: #34d399; }

/* Plan card */
.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card h2 {
  color: #a78bfa;
}

/* Details/collapsible */
details {
  margin: 15px 0;
  background: rgba(167,139,250,0.06);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 1.05rem;
  user-select: none;
}

details summary:hover {
  color: #c4b5fd;
}

details[open] summary {
  margin-bottom: 12px;
}

details ul {
  list-style: none;
  padding-left: 0;
}

details li {
  padding: 6px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #e2e8f0;
}

details li:last-child {
  border-bottom: none;
}

/* Canvas card */
.canvas-card {
  text-align: center;
}

.canvas-card canvas {
  width: 100%;
  max-width: 700px;
  border-radius: 10px;
  border: 1px solid #334155;
  touch-action: none;
}

.canvas-hint {
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

/* Steps */
.step {
  display: flex;
  gap: 16px;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 14px;
  border-left: 3px solid transparent;
  transition: border-color 0.2s, background 0.2s;
  cursor: pointer;
}

.step:hover, .step.active {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}

.step-badge {
  flex-shrink: 0;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.95rem;
}

.step-content {
  flex: 1;
}

.step-content p {
  color: #94a3b8;
  margin-top: 6px;
}

/* Checkpoint */
.checkpoint {
  background: rgba(52,211,153,0.06);
  border: 1px solid rgba(52,211,153,0.18);
}

.checkpoint summary {
  color: #34d399;
}

/* Key insight */
.insight-card {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid rgba(167,139,250,0.25);
}

.insight-card h2 {
  color: #a78bfa;
}

/* Final answer */
.final-answer {
  border: 2px solid rgba(74,222,128,0.3);
  background: linear-gradient(135deg, rgba(74,222,128,0.06), rgba(52,211,153,0.04));
}

.final-answer h2 {
  color: #4ade80;
}

.answer-big {
  font-size: 1.6rem;
  font-weight: 700;
  color: #4ade80;
  text-align: center;
  margin: 20px 0;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 16px 0;
}

.option-box {
  padding: 10px 20px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: #1e293b;
  text-align: center;
  min-width: 90px;
  transition: transform 0.2s;
}

.option-box.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.1);
  transform: scale(1.05);
}

.option-box .opt-label {
  color: #94a3b8;
  font-size: 0.85rem;
}

.option-box .opt-value {
  font-size: 1.05rem;
  font-weight: 600;
  color: #e2e8f0;
}

.option-box.correct .opt-value {
  color: #4ade80;
}

.verification {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 14px;
  padding-top: 14px;
  border-top: 1px solid #334155;
}

/* Pitfalls */
.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 14px;
  margin-bottom: 8px;
  background: rgba(224,148,104,0.06);
  border-left: 3px solid #e09468;
  border-radius: 0 8px 8px 0;
  color: #e2e8f0;
}

.pitfall-list li strong {
  color: #e09468;
}

/* Challenge */
.challenge-card {
  border: 1px solid rgba(244,114,182,0.2);
  background: rgba(244,114,182,0.04);
}

.challenge-card h2 {
  color: #f472b6;
}

/* Function label badges */
.fn-badge {
  display: inline-block;
  padding: 2px 10px;
  border-radius: 6px;
  font-size: 0.85rem;
  font-weight: 600;
  margin-right: 6px;
}

.fn-badge-1 { background: rgba(96,165,250,0.15); color: #60a5fa; }
.fn-badge-2 { background: rgba(167,139,250,0.15); color: #a78bfa; }
.fn-badge-3 { background: rgba(244,114,182,0.15); color: #f472b6; }
.fn-badge-4 { background: rgba(52,211,153,0.15); color: #34d399; }

/* Domain tags */
.domain-tag {
  display: inline-block;
  padding: 3px 10px;
  border-radius: 6px;
  font-size: 0.85rem;
  font-weight: 600;
  margin: 4px 4px 4px 0;
}

.domain-wide {
  background: rgba(96,165,250,0.12);
  color: #60a5fa;
  border: 1px solid rgba(96,165,250,0.25);
}

.domain-narrow {
  background: rgba(244,114,182,0.12);
  color: #f472b6;
  border: 1px solid rgba(244,114,182,0.25);
}

/* Equality group boxes */
.eq-group {
  display: flex;
  gap: 16px;
  margin: 16px 0;
  flex-wrap: wrap;
  justify-content: center;
}

.eq-box {
  border-radius: 12px;
  padding: 18px 24px;
  text-align: center;
  flex: 1;
  min-width: 240px;
  max-width: 400px;
}

.eq-box-a {
  background: rgba(96,165,250,0.06);
  border: 2px solid rgba(96,165,250,0.3);
}

.eq-box-b {
  background: rgba(244,114,182,0.06);
  border: 2px solid rgba(244,114,182,0.3);
}

.eq-box h3 {
  margin-bottom: 8px;
}

.neq-symbol {
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.8rem;
  font-weight: 700;
  color: #e09468;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step { flex-direction: column; gap: 10px; }
  .given-grid { flex-direction: column; }
  .options-row { flex-direction: column; align-items: center; }
  .fn-def-grid { grid-template-columns: 1fr; }
  .eq-group { flex-direction: column; align-items: center; }
  .neq-symbol { transform: rotate(90deg); }
}
</style>
</head>
<body>
<div class="container">

  <h1>Jednakost logaritamskih funkcija</h1>
  <p class="subtitle">Domen logaritamske funkcije, osobine logaritama, jednakost funkcija</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Date su funkcije:</p>

    <div class="fn-def-grid">
      <div class="fn-def-item f1-style">
        <div class="math-box">\( f_1(x) = \ln\!\bigl((x+3)^5 \cdot (x-1)^2\bigr) \)</div>
      </div>
      <div class="fn-def-item f2-style">
        <div class="math-box">\( f_2(x) = 5\ln(x+3) + \ln(x-1)^2 \)</div>
      </div>
      <div class="fn-def-item f3-style">
        <div class="math-box">\( f_3(x) = \ln(x+3)^5 + 2\ln(x-1) \)</div>
      </div>
      <div class="fn-def-item f4-style">
        <div class="math-box">\( f_4(x) = 5\ln(x+3) + 2\ln(x-1) \)</div>
      </div>
    </div>

    <p>Tacan iskaz je:</p>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">Sve su jednake</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">Nema jednakih</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(f_1 = f_2 \neq f_3 = f_4\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(f_1 = f_4 \neq f_2 = f_3\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">Nijedan od ponudjenih</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>Dve funkcije su <span class="highlight">jednake</span> ako i samo ako imaju <strong>isti domen</strong> i <strong>iste vrednosti</strong> na tom domenu. Stoga cemo za svaku od cetiri funkcije odrediti domen, zatim na zajednickom domenu uporediti njihove vrednosti, i na kraju izvesti zakljucak o jednakosti.</p>
  </div>

  <!-- Theory Refresher -->
  <details>
    <summary>Kljucne formule i pravila</summary>
    <ul>
      <li><strong>Domen logaritma:</strong> Funkcija \(\ln(u)\) je definisana samo za \(u > 0\).</li>
      <li><strong>Logaritam proizvoda:</strong> \(\ln(a \cdot b) = \ln a + \ln b\), vazi samo kada su \(a > 0\) i \(b > 0\).</li>
      <li><strong>Logaritam stepena:</strong> \(\ln(a^n) = n \cdot \ln a\), vazi samo kada je \(a > 0\).</li>
      <li><strong>Parni stepen:</strong> \((x-1)^2 \geq 0\) za svako \(x\), i \((x-1)^2 > 0\) za \(x \neq 1\).</li>
      <li><strong>Neparni stepen:</strong> \((x+3)^5 > 0 \iff x+3 > 0 \iff x > -3\).</li>
      <li><strong>Veza sa apsolutnom vrednoscu:</strong> \(\ln(t^2) = 2\ln|t|\) za \(t \neq 0\).</li>
      <li><strong>Jednakost funkcija:</strong> \(f = g\) ako i samo ako je \(\mathcal{D}_f = \mathcal{D}_g\) i \(f(x) = g(x)\) za svako \(x \in \mathcal{D}_f\).</li>
    </ul>
  </details>

  <!-- Canvas Visualization -->
  <div class="card canvas-card">
    <h2>Vizualizacija: Domeni i grupe jednakosti</h2>
    <p style="color:#94a3b8; margin-bottom: 14px;">Brojna osa prikazuje domene svih cetiri funkcije. Funkcije sa istim domenom i vrednostima cine grupu jednakosti.</p>
    <canvas id="viz-canvas" width="700" height="520"></canvas>
    <p class="canvas-hint">Kliknite na dugmad za prikaz razlicitih aspekata analize</p>
    <div style="display:flex; flex-wrap:wrap; gap:8px; justify-content:center; margin-top:12px;">
      <button id="btn-domains" class="canvas-btn" style="background:#334155; color:#e2e8f0; border:1px solid #475569; border-radius:8px; padding:8px 16px; cursor:pointer; font-size:0.9rem; transition: all 0.2s;">Domeni</button>
      <button id="btn-values" class="canvas-btn" style="background:#334155; color:#e2e8f0; border:1px solid #475569; border-radius:8px; padding:8px 16px; cursor:pointer; font-size:0.9rem; transition: all 0.2s;">Vrednosti</button>
      <button id="btn-groups" class="canvas-btn" style="background:#334155; color:#e2e8f0; border:1px solid #475569; border-radius:8px; padding:8px 16px; cursor:pointer; font-size:0.9rem; transition: all 0.2s;">Grupe</button>
      <button id="btn-answer" class="canvas-btn" style="background:#334155; color:#e2e8f0; border:1px solid #475569; border-radius:8px; padding:8px 16px; cursor:pointer; font-size:0.9rem; transition: all 0.2s;">Odgovor</button>
    </div>
  </div>

  <!-- Step-by-step solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <div class="step" id="step-1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3><span class="fn-badge fn-badge-1">f1</span> Domen funkcije \(f_1\)</h3>
        <p>\(f_1(x) = \ln\!\bigl((x+3)^5 \cdot (x-1)^2\bigr)\). Argument logaritma mora biti strogo pozitivan:</p>
        <div class="math-box">
          \[ (x+3)^5 \cdot (x-1)^2 > 0 \]
        </div>
        <p>Cinilac \((x-1)^2\) je uvek \(\geq 0\), i jednak je nuli samo za \(x = 1\). Cinilac \((x+3)^5\) je pozitivan za \(x > -3\), negativan za \(x < -3\), i jednak nuli za \(x = -3\).</p>
        <p>Da bi proizvod bio <span class="highlight">strogo pozitivan</span>, treba:</p>
        <div class="math-box">
          \[ x > -3 \quad \text{i} \quad x \neq 1 \]
        </div>
        <p>Domen: <span class="domain-tag domain-wide">\(\mathcal{D}_{f_1} = (-3,\; 1) \cup (1,\; +\infty)\)</span></p>
      </div>
    </div>

    <div class="step" id="step-2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3><span class="fn-badge fn-badge-2">f2</span> Domen funkcije \(f_2\)</h3>
        <p>\(f_2(x) = 5\ln(x+3) + \ln(x-1)^2\). Razmotrimo svaki sabirak:</p>
        <div class="math-box">
          \[ 5\ln(x+3): \quad x + 3 > 0 \;\Rightarrow\; x > -3 \]
        </div>
        <div class="math-box">
          \[ \ln(x-1)^2: \quad (x-1)^2 > 0 \;\Rightarrow\; x \neq 1 \]
        </div>
        <p>Domen: <span class="domain-tag domain-wide">\(\mathcal{D}_{f_2} = (-3,\; 1) \cup (1,\; +\infty)\)</span></p>
        <p style="color:#4ade80;">Isti domen kao \(f_1\).</p>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Zasto \(\ln(x-1)^2\) zahteva \(x \neq 1\), a ne \(x > 1\)?</summary>
      <p>Jer je \((x-1)^2\) uvek nenegativan. Za \(x \neq 1\) imamo \((x-1)^2 > 0\), pa je logaritam definisan. Na primer, za \(x = 0\): \(\ln(0-1)^2 = \ln(1) = 0\). Jedina zabranjena tacka je \(x = 1\), gde bi bio \(\ln(0)\), sto nije definisano.</p>
    </details>

    <div class="step" id="step-3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3><span class="fn-badge fn-badge-3">f3</span> Domen funkcije \(f_3\)</h3>
        <p>\(f_3(x) = \ln(x+3)^5 + 2\ln(x-1)\). Razmotrimo svaki sabirak:</p>
        <div class="math-box">
          \[ \ln(x+3)^5: \quad (x+3)^5 > 0 \;\Rightarrow\; x + 3 > 0 \;\Rightarrow\; x > -3 \]
        </div>
        <div class="math-box">
          \[ 2\ln(x-1): \quad x - 1 > 0 \;\Rightarrow\; x > 1 \]
        </div>
        <p>Presek uslova: \(x > -3\) i \(x > 1\), dakle:</p>
        <p>Domen: <span class="domain-tag domain-narrow">\(\mathcal{D}_{f_3} = (1,\; +\infty)\)</span></p>
        <p style="color:#f472b6;">Uzi domen od \(f_1\) i \(f_2\) &mdash; nedostaje interval \((-3,\; 1)\).</p>
      </div>
    </div>

    <div class="step" id="step-4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3><span class="fn-badge fn-badge-4">f4</span> Domen funkcije \(f_4\)</h3>
        <p>\(f_4(x) = 5\ln(x+3) + 2\ln(x-1)\). Oba sabirka zahtevaju:</p>
        <div class="math-box">
          \[ x + 3 > 0 \;\Rightarrow\; x > -3 \qquad \text{i} \qquad x - 1 > 0 \;\Rightarrow\; x > 1 \]
        </div>
        <p>Domen: <span class="domain-tag domain-narrow">\(\mathcal{D}_{f_4} = (1,\; +\infty)\)</span></p>
        <p style="color:#4ade80;">Isti domen kao \(f_3\).</p>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Sta je sa \(\ln(x+3)^5\) i \(5\ln(x+3)\)?</summary>
      <p>Izraz \(\ln(x+3)^5\) znaci \(\ln\!\bigl((x+3)^5\bigr)\). Posto je \((x+3)^5\) neparni stepen, on je pozitivan samo kada je \(x + 3 > 0\). Dakle, uslov je \(x > -3\), isti kao za \(5\ln(x+3)\). Na domenu \(x > -3\) vazi \(\ln(x+3)^5 = 5\ln(x+3)\).</p>
    </details>

    <div class="step" id="step-5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Pregled domena</h3>
        <p>Sredimo nalaze:</p>
        <div class="math-box">
          \[ \mathcal{D}_{f_1} = \mathcal{D}_{f_2} = (-3,\; 1) \cup (1,\; +\infty) \]
        </div>
        <div class="math-box">
          \[ \mathcal{D}_{f_3} = \mathcal{D}_{f_4} = (1,\; +\infty) \]
        </div>
        <p>Vec vidimo da \(f_1\) i \(f_2\) imaju <span class="highlight">siri domen</span> od \(f_3\) i \(f_4\). Samim tim, \(f_1 \neq f_3\) i \(f_1 \neq f_4\) (razliciti domeni), analogno i za \(f_2\).</p>
      </div>
    </div>

    <div class="step" id="step-6">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Uporedimo vrednosti: \(f_1\) i \(f_2\)</h3>
        <p>Na domenu \((-3,\; 1) \cup (1,\; +\infty)\) obe funkcije su definisane. Transformisimo \(f_1\):</p>
        <div class="math-box">
          \[ f_1(x) = \ln\!\bigl((x+3)^5 \cdot (x-1)^2\bigr) = \ln(x+3)^5 + \ln(x-1)^2 \]
        </div>
        <p>Ovo vazi jer su oba cinioca pozitivna na datom domenu: \((x+3)^5 > 0\) i \((x-1)^2 > 0\).</p>
        <p>Dalje, posto je \(x + 3 > 0\):</p>
        <div class="math-box">
          \[ \ln(x+3)^5 = 5\ln(x+3) \]
        </div>
        <p>Dakle:</p>
        <div class="math-box">
          \[ f_1(x) = 5\ln(x+3) + \ln(x-1)^2 = f_2(x) \]
        </div>
        <p style="color:#4ade80;"><strong>Zakljucak:</strong> \(f_1 = f_2\) (isti domen, iste vrednosti).</p>
      </div>
    </div>

    <div class="step" id="step-7">
      <div class="step-badge">7</div>
      <div class="step-content">
        <h3>Uporedimo vrednosti: \(f_3\) i \(f_4\)</h3>
        <p>Na domenu \((1,\; +\infty)\), za \(f_3\):</p>
        <div class="math-box">
          \[ f_3(x) = \ln(x+3)^5 + 2\ln(x-1) = 5\ln(x+3) + 2\ln(x-1) \]
        </div>
        <p>Poslednja jednakost vazi jer je \(x + 3 > 0\) na datom domenu, pa mozemo primeniti \(\ln(a^n) = n\ln a\).</p>
        <p>Ovo je upravo \(f_4(x)\), pa:</p>
        <div class="math-box">
          \[ f_3(x) = 5\ln(x+3) + 2\ln(x-1) = f_4(x) \]
        </div>
        <p style="color:#4ade80;"><strong>Zakljucak:</strong> \(f_3 = f_4\) (isti domen, iste vrednosti).</p>
      </div>
    </div>

    <div class="step" id="step-8">
      <div class="step-badge">8</div>
      <div class="step-content">
        <h3>Pokazimo da \(f_1 \neq f_3\)</h3>
        <p>Dovoljno je naci jednu tacku koja pripada domenu jedne, a ne pripada domenu druge funkcije. Uzmimo <span class="highlight">\(x = 0\)</span>:</p>
        <div class="math-box">
          \[ x = 0 \in \mathcal{D}_{f_1} = (-3, 1) \cup (1, +\infty) \quad \checkmark \]
        </div>
        <div class="math-box">
          \[ x = 0 \notin \mathcal{D}_{f_3} = (1, +\infty) \quad \times \]
        </div>
        <p>Posto se domeni razlikuju, \(f_1\) i \(f_3\) nisu jednake funkcije, bez obzira na to sto se poklapaju za \(x > 1\).</p>
        <p>Iz istog razloga: \(f_2 \neq f_3\), \(f_1 \neq f_4\) i \(f_2 \neq f_4\).</p>
      </div>
    </div>

    <div class="step" id="step-9">
      <div class="step-badge">9</div>
      <div class="step-content">
        <h3>Konacni zakljucak</h3>
        <p>Sumirajmo odnose medju funkcijama:</p>
        <div class="eq-group">
          <div class="eq-box eq-box-a">
            <h3 style="color:#60a5fa;">Grupa I</h3>
            <p>\(f_1 = f_2\)</p>
            <p style="color:#94a3b8; font-size:0.9rem;">Domen: \((-3,\; 1) \cup (1,\; +\infty)\)</p>
          </div>
          <div class="neq-symbol">\(\neq\)</div>
          <div class="eq-box eq-box-b">
            <h3 style="color:#f472b6;">Grupa II</h3>
            <p>\(f_3 = f_4\)</p>
            <p style="color:#94a3b8; font-size:0.9rem;">Domen: \((1,\; +\infty)\)</p>
          </div>
        </div>
        <div class="math-box" style="text-align:center; font-size:1.1rem;">
          \[ f_1 = f_2 \neq f_3 = f_4 \]
        </div>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="card insight-card">
    <h2>Kljucni uvid</h2>
    <p>Pravilo \(\ln(a^n) = n\ln a\) i \(\ln(ab) = \ln a + \ln b\) vaze samo kada su argumenti logaritama <span class="highlight">strogo pozitivni</span>. Izraz \(\ln(x-1)^2\) je definisan za sve \(x \neq 1\) (jer je \((x-1)^2 > 0\)), dok je \(2\ln(x-1)\) definisan samo za \(x > 1\) (jer se zahteva \(x - 1 > 0\)).</p>
    <p style="margin-top: 12px;">Ovo je sustinska razlika: paren stepen unutar logaritma "cuva" veci domen, jer je kvadrat uvek nenegativan. Zato \(f_1\) i \(f_2\) (koje sadrze \(\ln(x-1)^2\)) imaju siri domen od \(f_3\) i \(f_4\) (koje sadrze \(2\ln(x-1)\)).</p>
    <div class="math-box" style="text-align:center; margin-top:16px; font-size:1.1rem;">
      \[ \ln(x-1)^2 = 2\ln|x-1| \neq 2\ln(x-1) \quad \text{za } x < 1 \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer">
    <h2>Konacan odgovor</h2>
    <div class="answer-big">(C) \(f_1 = f_2 \neq f_3 = f_4\)</div>

    <div class="options-row">
      <div class="option-box">
        <div class="opt-label">(A)</div>
        <div class="opt-value">Sve jednake</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(B)</div>
        <div class="opt-value">Nema jednakih</div>
      </div>
      <div class="option-box correct">
        <div class="opt-label">(C)</div>
        <div class="opt-value">\(f_1 = f_2 \neq f_3 = f_4\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(D)</div>
        <div class="opt-value">\(f_1 = f_4 \neq f_2 = f_3\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(E)</div>
        <div class="opt-value">Nijedan</div>
      </div>
    </div>

    <p class="verification"><strong>Verifikacija:</strong> Za \(x = 0\) (tacka u prosirenom domenu): \(f_1(0) = \ln(3^5 \cdot 1) = \ln(243) \approx 5{,}49\), \(f_2(0) = 5\ln 3 + \ln 1 = 5\ln 3 \approx 5{,}49\). Obe su definisane i jednake. Medjutim, \(f_3(0)\) i \(f_4(0)\) nisu definisane jer bi zahtevale \(\ln(-1)\). Za \(x = 2\): sve cetiri daju istu vrednost \(5\ln 5 + 2\ln 1 = 5\ln 5 \approx 8{,}05\).</p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Ceste greske</h2>
    <ul class="pitfall-list">
      <li><strong>Zanemarivanje domena:</strong> Najcesca greska je primena pravila \(\ln(a^n) = n\ln a\) bez provere da li je \(a > 0\). Ovo pravilo vazi iskljucivo za \(a > 0\). Na primer, \(\ln((-2)^2) = \ln 4 \approx 1{,}39\), ali \(2\ln(-2)\) nije definisano.</li>
      <li><strong>Mesanje \(\ln(t^2)\) i \(2\ln t\):</strong> Izraz \(\ln(t^2) = 2\ln|t|\) vazi za sve \(t \neq 0\), dok \(2\ln t\) zahteva \(t > 0\). Ova razlika je sustina ovog zadatka.</li>
      <li><strong>Odgovor (A) &mdash; "sve su jednake":</strong> Na intervalu \((1, +\infty)\) sve cetiri funkcije zaista daju iste vrednosti, ali to ne znaci da su jednake funkcije, jer su im domeni razliciti.</li>
      <li><strong>Odgovor (D) &mdash; pogresno grupisanje:</strong> Odgovor (D) tvrdi \(f_1 = f_4\), sto je netacno jer \(f_1\) ima siri domen od \(f_4\).</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Neka je \(g(x) = \ln|x+3|^5 + \ln(x-1)^2\). Odredite domen funkcije \(g\) i proverite da li je \(g = f_1\).</p>
    <details>
      <summary>Pomoc</summary>
      <p>Za \(\ln|x+3|^5\) je potrebno \(|x+3|^5 > 0\), tj. \(x \neq -3\). Za \(\ln(x-1)^2\) je potrebno \(x \neq 1\). Dakle \(\mathcal{D}_g = \mathbb{R} \setminus \{-3,\; 1\}\). Na domenu \(f_1\) (koji je podskup domena \(g\)) vrednosti se poklapaju, ali \(g\) je definisana i za \(x < -3\) (na primer, \(g(-5) = 5\ln 2 + \ln 36\)), dok \(f_1(-5)\) nije definisana. Dakle \(g \neq f_1\) jer imaju razlicite domene.</p>
    </details>
  </div>

</div>

<script>
(() => {
  // Step click interactivity
  var steps = document.querySelectorAll('.step');
  steps.forEach(function(step) {
    step.addEventListener('click', function() {
      steps.forEach(function(s) { s.classList.remove('active'); });
      step.classList.add('active');
    });
  });

  // Canvas visualization
  var canvas = document.getElementById('viz-canvas');
  if (!canvas) return;
  var ctx = canvas.getContext('2d');
  var W = canvas.width;
  var H = canvas.height;

  var currentView = 'domains';

  var btnDomains = document.getElementById('btn-domains');
  var btnValues = document.getElementById('btn-values');
  var btnGroups = document.getElementById('btn-groups');
  var btnAnswer = document.getElementById('btn-answer');
  var allBtns = [btnDomains, btnValues, btnGroups, btnAnswer];
  var viewKeys = ['domains', 'values', 'groups', 'answer'];

  var colors = {
    f1: '#60a5fa',
    f2: '#a78bfa',
    f3: '#f472b6',
    f4: '#34d399',
    ok: '#4ade80',
    warn: '#e09468'
  };

  function setActiveButton(key) {
    allBtns.forEach(function(btn, i) {
      if (viewKeys[i] === key) {
        btn.style.background = '#60a5fa';
        btn.style.borderColor = '#60a5fa';
        btn.style.color = '#0f172a';
        btn.style.fontWeight = '700';
      } else {
        btn.style.background = '#334155';
        btn.style.borderColor = '#475569';
        btn.style.color = '#e2e8f0';
        btn.style.fontWeight = 'normal';
      }
    });
  }

  function roundRect(x, y, w, h, r) {
    ctx.beginPath();
    ctx.moveTo(x + r, y);
    ctx.lineTo(x + w - r, y);
    ctx.arcTo(x + w, y, x + w, y + r, r);
    ctx.lineTo(x + w, y + h - r);
    ctx.arcTo(x + w, y + h, x + w - r, y + h, r);
    ctx.lineTo(x + r, y + h);
    ctx.arcTo(x, y + h, x, y + h - r, r);
    ctx.lineTo(x, y + r);
    ctx.arcTo(x, y, x + r, y, r);
    ctx.closePath();
  }

  function drawBox(x, y, w, h, color, text1, text2, alpha) {
    ctx.save();
    ctx.globalAlpha = alpha || 1;
    ctx.shadowColor = color;
    ctx.shadowBlur = 10;
    ctx.fillStyle = 'rgba(30,41,59,0.95)';
    roundRect(x, y, w, h, 10);
    ctx.fill();
    ctx.shadowBlur = 0;
    ctx.strokeStyle = color;
    ctx.lineWidth = 1.5;
    roundRect(x, y, w, h, 10);
    ctx.stroke();
    if (text1) {
      ctx.fillStyle = '#94a3b8';
      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(text1, x + w / 2, y + 18);
    }
    if (text2) {
      ctx.fillStyle = color;
      ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(text2, x + w / 2, y + h - 12);
    }
    ctx.restore();
  }

  // Number line helper
  function numLineX(val, ox, gw, minV, maxV) {
    return ox + (val - minV) / (maxV - minV) * gw;
  }

  function drawNumberLine(ox, oy, gw, minV, maxV, tickStep) {
    // Axis
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(ox - 10, oy);
    ctx.lineTo(ox + gw + 10, oy);
    ctx.stroke();

    // Arrow
    ctx.beginPath();
    ctx.moveTo(ox + gw + 10, oy);
    ctx.lineTo(ox + gw + 2, oy - 4);
    ctx.moveTo(ox + gw + 10, oy);
    ctx.lineTo(ox + gw + 2, oy + 4);
    ctx.stroke();

    // Ticks and labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    for (var v = minV; v <= maxV; v += tickStep) {
      var tx = numLineX(v, ox, gw, minV, maxV);
      ctx.strokeStyle = '#334155';
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.moveTo(tx, oy - 4);
      ctx.lineTo(tx, oy + 4);
      ctx.stroke();
      ctx.fillText(v.toString(), tx, oy + 18);
    }
  }

  function drawDomainSegment(ox, oy, gw, minV, maxV, fromVal, toVal, color, yOff, label, openLeft, openRight, excluded) {
    var x1 = numLineX(fromVal, ox, gw, minV, maxV);
    var x2 = numLineX(toVal, ox, gw, minV, maxV);
    var segY = oy + yOff;

    // Segment line
    ctx.strokeStyle = color;
    ctx.lineWidth = 4;
    ctx.globalAlpha = 0.7;
    ctx.beginPath();
    ctx.moveTo(x1, segY);
    ctx.lineTo(x2, segY);
    ctx.stroke();
    ctx.globalAlpha = 1;

    // Open/closed endpoints
    ctx.lineWidth = 2;
    // Left endpoint
    ctx.beginPath();
    ctx.arc(x1, segY, 5, 0, 2 * Math.PI);
    if (openLeft) {
      ctx.strokeStyle = color;
      ctx.stroke();
    } else {
      ctx.fillStyle = color;
      ctx.fill();
    }

    // Right endpoint
    if (toVal < maxV) {
      ctx.beginPath();
      ctx.arc(x2, segY, 5, 0, 2 * Math.PI);
      if (openRight) {
        ctx.strokeStyle = color;
        ctx.fillStyle = '#0c1222';
        ctx.fill();
        ctx.stroke();
      } else {
        ctx.fillStyle = color;
        ctx.fill();
      }
    } else {
      // Arrow for infinity
      ctx.strokeStyle = color;
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(x2, segY);
      ctx.lineTo(x2 - 6, segY - 4);
      ctx.moveTo(x2, segY);
      ctx.lineTo(x2 - 6, segY + 4);
      ctx.stroke();
    }

    // Excluded points
    if (excluded) {
      excluded.forEach(function(ev) {
        var ex = numLineX(ev, ox, gw, minV, maxV);
        ctx.strokeStyle = '#e09468';
        ctx.lineWidth = 2.5;
        ctx.beginPath();
        ctx.moveTo(ex - 5, segY - 5);
        ctx.lineTo(ex + 5, segY + 5);
        ctx.moveTo(ex + 5, segY - 5);
        ctx.lineTo(ex - 5, segY + 5);
        ctx.stroke();
      });
    }

    // Label
    if (label) {
      ctx.fillStyle = color;
      ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'right';
      ctx.fillText(label, ox - 15, segY + 5);
    }
  }

  function drawScene(view) {
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';

    if (view === 'domains') {
      ctx.fillText('Domeni cetiri funkcije na brojnoj osi', W / 2, 28);

      var ox = 130, gw = 480, minV = -4, maxV = 6;
      var baseY = 80;

      drawNumberLine(ox, baseY, gw, minV, maxV, 1);

      // Mark special points
      var x_m3 = numLineX(-3, ox, gw, minV, maxV);
      var x_1 = numLineX(1, ox, gw, minV, maxV);

      ctx.fillStyle = '#e09468';
      ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('x = -3', x_m3, baseY - 14);
      ctx.fillText('x = 1', x_1, baseY - 14);

      // Dashed vertical lines at -3 and 1
      ctx.strokeStyle = 'rgba(224,148,104,0.3)';
      ctx.lineWidth = 1;
      ctx.setLineDash([4, 4]);
      ctx.beginPath();
      ctx.moveTo(x_m3, baseY + 10);
      ctx.lineTo(x_m3, baseY + 200);
      ctx.moveTo(x_1, baseY + 10);
      ctx.lineTo(x_1, baseY + 200);
      ctx.stroke();
      ctx.setLineDash([]);

      // f1 domain: (-3, 1) U (1, +inf)
      var yOff1 = 40;
      drawDomainSegment(ox, baseY, gw, minV, maxV, -3, 1, colors.f1, yOff1, 'f\u2081', true, true, []);
      drawDomainSegment(ox, baseY, gw, minV, maxV, 1, maxV, colors.f1, yOff1, '', true, false, []);
      // Mark exclusion at x=1 for f1
      var ex1 = numLineX(1, ox, gw, minV, maxV);
      ctx.strokeStyle = '#e09468';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(ex1 - 4, baseY + yOff1 - 4);
      ctx.lineTo(ex1 + 4, baseY + yOff1 + 4);
      ctx.moveTo(ex1 + 4, baseY + yOff1 - 4);
      ctx.lineTo(ex1 - 4, baseY + yOff1 + 4);
      ctx.stroke();

      // f2 domain: (-3, 1) U (1, +inf)
      var yOff2 = 80;
      drawDomainSegment(ox, baseY, gw, minV, maxV, -3, 1, colors.f2, yOff2, 'f\u2082', true, true, []);
      drawDomainSegment(ox, baseY, gw, minV, maxV, 1, maxV, colors.f2, yOff2, '', true, false, []);
      var ex2 = numLineX(1, ox, gw, minV, maxV);
      ctx.strokeStyle = '#e09468';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(ex2 - 4, baseY + yOff2 - 4);
      ctx.lineTo(ex2 + 4, baseY + yOff2 + 4);
      ctx.moveTo(ex2 + 4, baseY + yOff2 - 4);
      ctx.lineTo(ex2 - 4, baseY + yOff2 + 4);
      ctx.stroke();

      // f3 domain: (1, +inf)
      var yOff3 = 120;
      drawDomainSegment(ox, baseY, gw, minV, maxV, 1, maxV, colors.f3, yOff3, 'f\u2083', true, false, []);

      // f4 domain: (1, +inf)
      var yOff4 = 160;
      drawDomainSegment(ox, baseY, gw, minV, maxV, 1, maxV, colors.f4, yOff4, 'f\u2084', true, false, []);

      // Legend
      ctx.fillStyle = '#94a3b8';
      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';

      var legY = baseY + 210;
      ctx.fillStyle = '#e09468';
      ctx.fillText('\u2717  iskljucena tacka', ox, legY);
      ctx.fillStyle = '#94a3b8';
      ctx.fillText('\u25CB  otvoren kraj intervala', ox + 180, legY);
      ctx.fillText('\u2192  beskonacnost', ox + 370, legY);

      // Grouping brackets
      var brX = ox + gw + 30;
      ctx.strokeStyle = colors.f1;
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(brX, baseY + yOff1 - 8);
      ctx.lineTo(brX + 10, baseY + yOff1 - 8);
      ctx.lineTo(brX + 10, baseY + yOff2 + 8);
      ctx.lineTo(brX, baseY + yOff2 + 8);
      ctx.stroke();
      ctx.fillStyle = '#60a5fa';
      ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText('isti', brX + 16, baseY + (yOff1 + yOff2) / 2 + 1);
      ctx.fillText('domen', brX + 16, baseY + (yOff1 + yOff2) / 2 + 15);

      ctx.strokeStyle = colors.f3;
      ctx.beginPath();
      ctx.moveTo(brX, baseY + yOff3 - 8);
      ctx.lineTo(brX + 10, baseY + yOff3 - 8);
      ctx.lineTo(brX + 10, baseY + yOff4 + 8);
      ctx.lineTo(brX, baseY + yOff4 + 8);
      ctx.stroke();
      ctx.fillStyle = '#f472b6';
      ctx.fillText('isti', brX + 16, baseY + (yOff3 + yOff4) / 2 + 1);
      ctx.fillText('domen', brX + 16, baseY + (yOff3 + yOff4) / 2 + 15);

      // Extra explanation
      ctx.fillStyle = '#94a3b8';
      ctx.font = '13px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('f\u2081 i f\u2082 su definisane i levo od x = 1 (na intervalu (-3, 1))', W / 2, baseY + 260);
      ctx.fillText('f\u2083 i f\u2084 su definisane samo desno od x = 1', W / 2, baseY + 282);

      // Highlight the key region
      var regX1 = numLineX(-3, ox, gw, minV, maxV);
      var regX2 = numLineX(1, ox, gw, minV, maxV);
      ctx.fillStyle = 'rgba(96,165,250,0.08)';
      ctx.fillRect(regX1, baseY + 30, regX2 - regX1, 170);
      ctx.fillStyle = 'rgba(96,165,250,0.5)';
      ctx.font = 'italic 11px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('samo f\u2081, f\u2082', (regX1 + regX2) / 2, baseY + 195);

    } else if (view === 'values') {
      ctx.fillText('Vrednosti funkcija na zajednickom domenu (x > 1)', W / 2, 28);

      // Show transformations
      var startY = 55;
      var boxW = 300;
      var boxH = 55;
      var centerX = W / 2 - boxW / 2;

      drawBox(centerX, startY, boxW, boxH, colors.f1, 'f\u2081(x)', 'ln((x+3)\u2075 \u00B7 (x-1)\u00B2)');

      // Arrow
      ctx.strokeStyle = '#475569';
      ctx.lineWidth = 1;
      ctx.setLineDash([4, 4]);
      ctx.beginPath();
      ctx.moveTo(W / 2, startY + boxH + 5);
      ctx.lineTo(W / 2, startY + boxH + 25);
      ctx.stroke();
      ctx.setLineDash([]);

      ctx.fillStyle = '#94a3b8';
      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('ln(ab) = ln a + ln b', W / 2, startY + boxH + 40);

      // Arrow
      ctx.strokeStyle = '#475569';
      ctx.setLineDash([4, 4]);
      ctx.beginPath();
      ctx.moveTo(W / 2, startY + boxH + 48);
      ctx.lineTo(W / 2, startY + boxH + 62);
      ctx.stroke();
      ctx.setLineDash([]);

      drawBox(centerX, startY + boxH + 65, boxW, boxH, colors.f2, 'f\u2082(x) = f\u2081(x)', '5ln(x+3) + ln(x-1)\u00B2');

      // Right side: f3 and f4
      var rStartY = startY + 2 * (boxH + 65) + 20;

      drawBox(centerX, rStartY, boxW, boxH, colors.f3, 'f\u2083(x)', 'ln(x+3)\u2075 + 2ln(x-1)');

      ctx.strokeStyle = '#475569';
      ctx.setLineDash([4, 4]);
      ctx.beginPath();
      ctx.moveTo(W / 2, rStartY + boxH + 5);
      ctx.lineTo(W / 2, rStartY + boxH + 25);
      ctx.stroke();
      ctx.setLineDash([]);

      ctx.fillStyle = '#94a3b8';
      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      ctx.fillText('ln(a\u207F) = n ln a  (za a > 0)', W / 2, rStartY + boxH + 40);

      ctx.strokeStyle = '#475569';
      ctx.setLineDash([4, 4]);
      ctx.beginPath();
      ctx.moveTo(W / 2, rStartY + boxH + 48);
      ctx.lineTo(W / 2, rStartY + boxH + 62);
      ctx.stroke();
      ctx.setLineDash([]);

      drawBox(centerX, rStartY + boxH + 65, boxW, boxH, colors.f4, 'f\u2084(x) = f\u2083(x)', '5ln(x+3) + 2ln(x-1)');

      // Equal signs between groups on common domain
      ctx.fillStyle = colors.ok;
      ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('Na celom zajednickom domenu, sve 4 daju isti izraz:', W / 2, rStartY + 2 * boxH + 130);
      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
      ctx.fillText('5ln(x+3) + 2ln(x-1)  za x > 1', W / 2, rStartY + 2 * boxH + 155);

      ctx.fillStyle = '#e09468';
      ctx.font = '13px Segoe UI, system-ui, sans-serif';
      ctx.fillText('Ali jednake vrednosti na delu domena NE znaci jednake funkcije!', W / 2, rStartY + 2 * boxH + 185);

    } else if (view === 'groups') {
      ctx.fillText('Grupe jednakosti: domen + vrednosti', W / 2, 28);

      // Group 1: f1 = f2
      var g1x = 50, g1y = 55, g1w = 270, g1h = 200;
      ctx.strokeStyle = 'rgba(96,165,250,0.4)';
      ctx.lineWidth = 2;
      ctx.setLineDash([6, 4]);
      roundRect(g1x, g1y, g1w, g1h, 14);
      ctx.stroke();
      ctx.setLineDash([]);

      ctx.fillStyle = 'rgba(96,165,250,0.05)';
      roundRect(g1x, g1y, g1w, g1h, 14);
      ctx.fill();

      ctx.fillStyle = '#60a5fa';
      ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('Grupa I: f\u2081 = f\u2082', g1x + g1w / 2, g1y + 30);

      drawBox(g1x + 20, g1y + 45, g1w - 40, 45, colors.f1, 'f\u2081', 'ln((x+3)\u2075(x-1)\u00B2)');
      drawBox(g1x + 20, g1y + 100, g1w - 40, 45, colors.f2, 'f\u2082', '5ln(x+3) + ln(x-1)\u00B2');

      ctx.fillStyle = '#94a3b8';
      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      ctx.fillText('Domen: (-3, 1) \u222A (1, +\u221E)', g1x + g1w / 2, g1y + g1h - 15);

      // Group 2: f3 = f4
      var g2x = 380, g2y = 55, g2w = 270, g2h = 200;
      ctx.strokeStyle = 'rgba(244,114,182,0.4)';
      ctx.lineWidth = 2;
      ctx.setLineDash([6, 4]);
      roundRect(g2x, g2y, g2w, g2h, 14);
      ctx.stroke();
      ctx.setLineDash([]);

      ctx.fillStyle = 'rgba(244,114,182,0.05)';
      roundRect(g2x, g2y, g2w, g2h, 14);
      ctx.fill();

      ctx.fillStyle = '#f472b6';
      ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('Grupa II: f\u2083 = f\u2084', g2x + g2w / 2, g2y + 30);

      drawBox(g2x + 20, g2y + 45, g2w - 40, 45, colors.f3, 'f\u2083', 'ln(x+3)\u2075 + 2ln(x-1)');
      drawBox(g2x + 20, g2y + 100, g2w - 40, 45, colors.f4, 'f\u2084', '5ln(x+3) + 2ln(x-1)');

      ctx.fillStyle = '#94a3b8';
      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      ctx.fillText('Domen: (1, +\u221E)', g2x + g2w / 2, g2y + g2h - 15);

      // Not-equal between groups
      ctx.fillStyle = '#e09468';
      ctx.font = 'bold 28px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('\u2260', (g1x + g1w + g2x) / 2, g1y + g1h / 2 + 8);

      // Explanation below
      var expY = g1y + g1h + 30;
      ctx.fillStyle = '#94a3b8';
      ctx.font = '14px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('Zasto grupe nisu jednake? Razliciti domeni!', W / 2, expY);

      // Counterexample
      var cY = expY + 30;
      drawBox(W / 2 - 200, cY, 400, 80, '#e09468', 'Kontraprimer: x = 0', null);

      ctx.fillStyle = '#60a5fa';
      ctx.font = '13px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('f\u2081(0) = ln(3\u2075 \u00B7 1) = ln 243 \u2248 5,49  \u2713', W / 2, cY + 42);

      ctx.fillStyle = '#f472b6';
      ctx.fillText('f\u2083(0) = ln(3\u2075) + 2ln(-1) \u2014 nije definisano!  \u2717', W / 2, cY + 62);

      // Final summary
      var sumY = cY + 110;
      ctx.fillStyle = colors.ok;
      ctx.font = 'bold 18px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('(-3, 1) \u222A (1, +\u221E)  \u2260  (1, +\u221E)', W / 2, sumY);

      ctx.fillStyle = '#94a3b8';
      ctx.font = '14px Segoe UI, system-ui, sans-serif';
      ctx.fillText('Razliciti domeni \u21D2 razlicite funkcije', W / 2, sumY + 25);

    } else if (view === 'answer') {
      ctx.fillText('Konacan odgovor', W / 2, 28);

      // Big result display
      var boxY = 60;

      // f1 = f2 box
      var lbW = 250;
      var lbH = 120;
      var lbX = 60;

      ctx.fillStyle = 'rgba(96,165,250,0.06)';
      roundRect(lbX, boxY, lbW, lbH, 12);
      ctx.fill();
      ctx.strokeStyle = 'rgba(96,165,250,0.4)';
      ctx.lineWidth = 2;
      roundRect(lbX, boxY, lbW, lbH, 12);
      ctx.stroke();

      ctx.fillStyle = '#60a5fa';
      ctx.font = 'bold 20px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('f\u2081 = f\u2082', lbX + lbW / 2, boxY + 40);

      ctx.fillStyle = '#94a3b8';
      ctx.font = '13px Segoe UI, system-ui, sans-serif';
      ctx.fillText('Domen:', lbX + lbW / 2, boxY + 65);
      ctx.fillStyle = '#60a5fa';
      ctx.font = '13px Segoe UI, system-ui, sans-serif';
      ctx.fillText('(-3, 1) \u222A (1, +\u221E)', lbX + lbW / 2, boxY + 85);
      ctx.fillStyle = colors.ok;
      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      ctx.fillText('Iste vrednosti \u2713', lbX + lbW / 2, boxY + 105);

      // Not equal sign
      ctx.fillStyle = '#e09468';
      ctx.font = 'bold 36px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('\u2260', W / 2, boxY + lbH / 2 + 12);

      // f3 = f4 box
      var rbX = W - 60 - lbW;

      ctx.fillStyle = 'rgba(244,114,182,0.06)';
      roundRect(rbX, boxY, lbW, lbH, 12);
      ctx.fill();
      ctx.strokeStyle = 'rgba(244,114,182,0.4)';
      ctx.lineWidth = 2;
      roundRect(rbX, boxY, lbW, lbH, 12);
      ctx.stroke();

      ctx.fillStyle = '#f472b6';
      ctx.font = 'bold 20px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('f\u2083 = f\u2084', rbX + lbW / 2, boxY + 40);

      ctx.fillStyle = '#94a3b8';
      ctx.font = '13px Segoe UI, system-ui, sans-serif';
      ctx.fillText('Domen:', rbX + lbW / 2, boxY + 65);
      ctx.fillStyle = '#f472b6';
      ctx.font = '13px Segoe UI, system-ui, sans-serif';
      ctx.fillText('(1, +\u221E)', rbX + lbW / 2, boxY + 85);
      ctx.fillStyle = colors.ok;
      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      ctx.fillText('Iste vrednosti \u2713', rbX + lbW / 2, boxY + 105);

      // Arrow down to answer
      ctx.strokeStyle = '#475569';
      ctx.lineWidth = 2;
      ctx.setLineDash([5, 5]);
      ctx.beginPath();
      ctx.moveTo(W / 2, boxY + lbH + 20);
      ctx.lineTo(W / 2, boxY + lbH + 60);
      ctx.stroke();
      ctx.setLineDash([]);

      // Big answer box
      var ansY = boxY + lbH + 70;
      var ansW = 380;
      var ansH = 80;
      var ansX = W / 2 - ansW / 2;

      ctx.shadowColor = colors.ok;
      ctx.shadowBlur = 25;
      ctx.fillStyle = 'rgba(30,41,59,0.95)';
      roundRect(ansX, ansY, ansW, ansH, 14);
      ctx.fill();
      ctx.shadowBlur = 0;
      ctx.strokeStyle = colors.ok;
      ctx.lineWidth = 2.5;
      roundRect(ansX, ansY, ansW, ansH, 14);
      ctx.stroke();

      ctx.fillStyle = colors.ok;
      ctx.font = 'bold 24px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('(C)  f\u2081 = f\u2082 \u2260 f\u2083 = f\u2084', W / 2, ansY + ansH / 2 + 8);

      // Checkmark
      ctx.fillStyle = colors.ok;
      ctx.font = 'bold 40px Segoe UI, system-ui, sans-serif';
      ctx.fillText('\u2713', W / 2, ansY + ansH + 55);

      // Why not other answers
      var whyY = ansY + ansH + 85;
      ctx.fillStyle = '#94a3b8';
      ctx.font = '13px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('(A) Netacno: domeni se razlikuju, pa nisu sve jednake', W / 2, whyY);
      ctx.fillText('(B) Netacno: f\u2081 = f\u2082 i f\u2083 = f\u2084 (postoje jednake)', W / 2, whyY + 22);
      ctx.fillText('(D) Netacno: f\u2081 \u2260 f\u2084 jer imaju razlicite domene', W / 2, whyY + 44);

      // Key reason box
      var keyY = whyY + 75;
      drawBox(W / 2 - 220, keyY, 440, 50, '#a78bfa', 'Kljuc', 'ln(t\u00B2) = 2ln|t| \u2260 2ln(t) za t < 0');
    }
  }

  function render() {
    drawScene(currentView);
  }

  allBtns.forEach(function(btn, idx) {
    btn.addEventListener('click', function() {
      currentView = viewKeys[idx];
      setActiveButton(currentView);
      render();
    });
    btn.addEventListener('touchend', function(e) {
      e.preventDefault();
      currentView = viewKeys[idx];
      setActiveButton(currentView);
      render();
    });
  });

  setActiveButton('domains');
  render();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Jednakost logaritamskih funkcija - analiza domena",
  "subject": "math",
  "unit": "logaritamske funkcije",
  "topic_tags": ["logaritam", "domen funkcije", "jednakost funkcija", "osobine logaritama", "parni stepen", "apsolutna vrednost"]
}
BRAINSPARK_META-->