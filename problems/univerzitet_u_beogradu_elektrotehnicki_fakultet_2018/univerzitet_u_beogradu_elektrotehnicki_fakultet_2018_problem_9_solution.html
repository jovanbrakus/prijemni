<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Izvod funkcije f(x) u tacki x=1</title>

<script type="text/info" id="logic-scratchpad">
Problem: Naci f'(1) za f(x) = 4/(x-5) + (3x+1)e^{-(x-1)^2} + sqrt(3-2x)

Razbijamo f(x) na tri dela:
  f(x) = f1(x) + f2(x) + f3(x)
gde:
  f1(x) = 4/(x-5) = 4(x-5)^{-1}
  f2(x) = (3x+1)e^{-(x-1)^2}
  f3(x) = sqrt(3-2x) = (3-2x)^{1/2}

DEO 1: f1'(x) = d/dx[4(x-5)^{-1}]
  = 4 * (-1) * (x-5)^{-2} * 1
  = -4/(x-5)^2

  f1'(1) = -4/(1-5)^2 = -4/(-4)^2 = -4/16 = -1/4

DEO 2: f2(x) = (3x+1) * e^{-(x-1)^2}
  Koristimo pravilo proizvoda: f2'(x) = u'v + uv'
  u = 3x+1,  u' = 3
  v = e^{-(x-1)^2},  v' = e^{-(x-1)^2} * (-2(x-1))

  f2'(x) = 3 * e^{-(x-1)^2} + (3x+1) * e^{-(x-1)^2} * (-2(x-1))

  Za x=1:
    e^{-(1-1)^2} = e^0 = 1
    -2(1-1) = 0

  f2'(1) = 3 * 1 + (3*1+1) * 1 * 0 = 3 + 0 = 3

DEO 3: f3(x) = (3-2x)^{1/2}
  f3'(x) = (1/2)(3-2x)^{-1/2} * (-2)
         = -1/sqrt(3-2x)

  f3'(1) = -1/sqrt(3-2*1) = -1/sqrt(1) = -1

UKUPNO: f'(1) = f1'(1) + f2'(1) + f3'(1)
       = -1/4 + 3 + (-1)
       = -1/4 + 2
       = 7/4

Odgovor: (E) 7/4
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
}

h1 {
  font-size: 2rem;
  font-weight: 700;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  text-align: center;
}

.subtitle {
  text-align: center;
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.card-title {
  font-size: 1.25rem;
  font-weight: 600;
  color: #60a5fa;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.3rem;
}

.problem-statement {
  border-left: 4px solid #a78bfa;
}

.problem-statement .problem-text {
  font-size: 1.1rem;
  line-height: 1.9;
  margin-bottom: 20px;
}

.math-highlight {
  background: rgba(56, 189, 248, 0.08);
  padding: 2px 8px;
  border-radius: 6px;
  display: inline-block;
}

.given-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96, 165, 250, 0.06);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 12px 16px;
  text-align: center;
  font-size: 1.05rem;
  transition: border-color 0.2s;
}

.given-item.answer-option {
  cursor: default;
}

.given-item.answer-option.correct {
  border-color: #4ade80;
  background: rgba(74, 222, 128, 0.08);
}

.plan-text {
  color: #94a3b8;
  font-size: 1.05rem;
  line-height: 1.8;
}

details {
  background: rgba(96, 165, 250, 0.04);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 14px 18px;
  margin: 12px 0;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  user-select: none;
}

details summary:hover {
  color: #c4b5fd;
}

details[open] summary {
  margin-bottom: 10px;
}

.step {
  margin-bottom: 24px;
  padding-left: 0;
}

.step-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.step-badge {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.95rem;
  color: #0f172a;
  flex-shrink: 0;
}

.step-title {
  font-size: 1.15rem;
  font-weight: 600;
  color: #e2e8f0;
}

.step-content {
  margin-left: 48px;
  color: #cbd5e1;
  line-height: 1.9;
}

.step-content .math-highlight {
  margin: 8px 0;
  display: block;
  padding: 10px 16px;
}

.key-insight {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.12), rgba(167, 139, 250, 0.12));
  border: 1px solid rgba(167, 139, 250, 0.3);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.key-insight .card-title {
  color: #a78bfa;
}

.final-answer-box {
  text-align: center;
  padding: 30px;
}

.final-answer-value {
  font-size: 2.2rem;
  font-weight: 700;
  color: #4ade80;
  margin: 16px 0;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 12px;
  margin-top: 20px;
}

.final-option {
  padding: 10px 22px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: #1e293b;
  color: #94a3b8;
  font-size: 1.05rem;
  transition: all 0.2s;
}

.final-option.correct-option {
  border-color: #4ade80;
  background: rgba(74, 222, 128, 0.1);
  color: #4ade80;
  font-weight: 700;
}

.verification-note {
  color: #94a3b8;
  margin-top: 16px;
  font-size: 0.95rem;
}

.pitfall-item {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  margin-bottom: 12px;
  color: #f472b6;
}

.pitfall-icon {
  flex-shrink: 0;
  margin-top: 4px;
}

.pitfall-text {
  color: #cbd5e1;
}

.challenge-text {
  color: #94a3b8;
  font-size: 1.05rem;
  line-height: 1.8;
}

canvas {
  display: block;
  margin: 0 auto;
  width: 100%;
  max-width: 700px;
  border-radius: 12px;
  touch-action: none;
}

.canvas-caption {
  text-align: center;
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 8px;
}

@media (max-width: 600px) {
  h1 { font-size: 1.4rem; }
  .card { padding: 16px; }
  .given-grid { grid-template-columns: 1fr 1fr; }
  .step-content { margin-left: 0; margin-top: 8px; }
  .final-answer-value { font-size: 1.7rem; }
  .final-options { gap: 8px; }
  .final-option { padding: 8px 14px; font-size: 0.95rem; }
}
</style>
</head>
<body>

<div class="container">

  <!-- NASLOV -->
  <h1>Izvod slozene funkcije u tacki</h1>
  <p class="subtitle">Diferenciranje razlomka, proizvoda sa eksponencijalnom funkcijom i korena</p>

  <!-- TEKST ZADATKA -->
  <div class="card problem-statement">
    <div class="card-title"><span class="icon">&#128220;</span> Tekst zadatka</div>
    <div class="problem-text">
      Ako je
      <span class="math-highlight">
        \(f(x) = \dfrac{4}{x - 5} + (3x + 1)\,e^{-(x-1)^2} + \sqrt{-2x + 3}\)
      </span>
      tada je \(f'(1)\) jednako:
    </div>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">(A) \(-1\)</div>
      <div class="given-item answer-option" data-option="B">(B) \(0\)</div>
      <div class="given-item answer-option" data-option="C">(C) \(1\)</div>
      <div class="given-item answer-option" data-option="D">(D) \(\dfrac{2}{3}\)</div>
      <div class="given-item answer-option correct" data-option="E">(E) \(\dfrac{7}{4}\)</div>
    </div>
  </div>

  <!-- PLAN -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128204;</span> Plan resavanja</div>
    <p class="plan-text">
      Funkcija \(f(x)\) je zbir tri sabirka. Izvod zbira je zbir izvoda, pa cemo svaki deo
      diferencirati posebno koristeci odgovarajuca pravila (izvod stepene funkcije, pravilo proizvoda,
      lancano pravilo), a zatim izracunati vrednost u tacki \(x = 1\).
    </p>
  </div>

  <!-- TEORIJA -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128218;</span> Podsetnik iz teorije</div>
    <details>
      <summary>Izvod stepene funkcije i razlomka</summary>
      <p style="margin-top: 8px;">
        Za \(g(x) = \dfrac{a}{x - c} = a(x - c)^{-1}\) vazi:
        \[g'(x) = -a(x - c)^{-2} = -\frac{a}{(x - c)^2}\]
        Ovo je direktna primena pravila \(\left(x^n\right)' = n \cdot x^{n-1}\) uz lancano pravilo.
      </p>
    </details>
    <details>
      <summary>Pravilo proizvoda i lancano pravilo</summary>
      <p style="margin-top: 8px;">
        Za proizvod dveju funkcija:
        \[(u \cdot v)' = u'v + uv'\]
        Za slozen argument (lancano pravilo):
        \[\left(e^{g(x)}\right)' = e^{g(x)} \cdot g'(x)\]
        Specijalno, za \(g(x) = -(x-1)^2\):
        \[g'(x) = -2(x - 1)\]
      </p>
    </details>
    <details>
      <summary>Izvod korenove funkcije</summary>
      <p style="margin-top: 8px;">
        Za \(h(x) = \sqrt{ax + b} = (ax + b)^{1/2}\):
        \[h'(x) = \frac{1}{2}(ax + b)^{-1/2} \cdot a = \frac{a}{2\sqrt{ax + b}}\]
        U nasem slucaju \(a = -2\), \(b = 3\).
      </p>
    </details>
  </div>

  <!-- VIZUELNI PRIKAZ -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127912;</span> Vizuelni prikaz</div>
    <canvas id="diagram-canvas" width="700" height="440"></canvas>
    <p class="canvas-caption">Dekompozicija funkcije f(x) na tri sabirka i njihovi izvodi u x = 1</p>
  </div>

  <!-- KORAK PO KORAK -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128736;</span> Resenje korak po korak</div>

    <!-- Korak 1 -->
    <div class="step">
      <div class="step-header">
        <div class="step-badge">1</div>
        <div class="step-title">Izvod prvog sabirka: \(\dfrac{4}{x - 5}\)</div>
      </div>
      <div class="step-content">
        <p>Zapisujemo \(f_1(x) = 4(x - 5)^{-1}\) i diferenciramo:</p>
        <div class="math-highlight">
          \[f_1'(x) = 4 \cdot (-1) \cdot (x - 5)^{-2} = -\frac{4}{(x - 5)^2}\]
        </div>
        <p>Uvrstavamo \(x = 1\):</p>
        <div class="math-highlight">
          \[f_1'(1) = -\frac{4}{(1 - 5)^2} = -\frac{4}{(-4)^2} = -\frac{4}{16} = -\frac{1}{4}\]
        </div>
        <details>
          <summary>&#9989; Proveri sebe: Zasto je \((1-5)^2 = 16\), a ne \(-16\)?</summary>
          <p style="margin-top: 8px;">
            Kvadrat bilo kog realnog broja je nenegativan: \((-4)^2 = (-4) \cdot (-4) = 16\).
            Imenilac u formuli za izvod uvek sadrzi kvadrat, pa je uvek pozitivan.
          </p>
        </details>
      </div>
    </div>

    <!-- Korak 2 -->
    <div class="step">
      <div class="step-header">
        <div class="step-badge">2</div>
        <div class="step-title">Izvod drugog sabirka: \((3x + 1)\,e^{-(x-1)^2}\)</div>
      </div>
      <div class="step-content">
        <p>Ovo je proizvod dveju funkcija, pa primenjujemo <strong>pravilo proizvoda</strong>:</p>
        <div class="math-highlight">
          \[f_2(x) = \underbrace{(3x + 1)}_{u} \cdot \underbrace{e^{-(x-1)^2}}_{v}\]
        </div>
        <p>Nalazimo izvode faktora:</p>
        <div class="math-highlight">
          \[u' = 3\]
        </div>
        <p>Za \(v' \) primenjujemo lancano pravilo:</p>
        <div class="math-highlight">
          \[v' = e^{-(x-1)^2} \cdot \frac{d}{dx}\!\left[-(x-1)^2\right] = e^{-(x-1)^2} \cdot \bigl(-2(x - 1)\bigr)\]
        </div>
        <p>Dakle:</p>
        <div class="math-highlight">
          \[f_2'(x) = 3 \cdot e^{-(x-1)^2} + (3x + 1) \cdot e^{-(x-1)^2} \cdot \bigl(-2(x - 1)\bigr)\]
        </div>
        <p>Uvrstavamo \(x = 1\). Kljucno zapazanje: \(e^{-(1-1)^2} = e^0 = 1\) i \(-2(1-1) = 0\):</p>
        <div class="math-highlight">
          \[f_2'(1) = 3 \cdot 1 + (3 \cdot 1 + 1) \cdot 1 \cdot 0 = 3 + 0 = 3\]
        </div>
        <details>
          <summary>&#9989; Proveri sebe: Zasto drugi sabirak nestaje?</summary>
          <p style="margin-top: 8px;">
            U izrazu \((3x+1) \cdot e^{-(x-1)^2} \cdot (-2(x-1))\), faktor \(-2(x-1)\) je jednak
            nuli za \(x = 1\), pa se ceo drugi clan u pravilu proizvoda ponistava. Ostaje samo
            \(u' \cdot v = 3 \cdot 1 = 3\).
          </p>
        </details>
      </div>
    </div>

    <!-- Korak 3 -->
    <div class="step">
      <div class="step-header">
        <div class="step-badge">3</div>
        <div class="step-title">Izvod treceg sabirka: \(\sqrt{-2x + 3}\)</div>
      </div>
      <div class="step-content">
        <p>Zapisujemo \(f_3(x) = (-2x + 3)^{1/2}\) i primenjujemo lancano pravilo:</p>
        <div class="math-highlight">
          \[f_3'(x) = \frac{1}{2}(-2x + 3)^{-1/2} \cdot (-2) = \frac{-1}{\sqrt{-2x + 3}}\]
        </div>
        <p>Uvrstavamo \(x = 1\):</p>
        <div class="math-highlight">
          \[f_3'(1) = \frac{-1}{\sqrt{-2 \cdot 1 + 3}} = \frac{-1}{\sqrt{1}} = -1\]
        </div>
        <details>
          <summary>&#9989; Proveri sebe: Za koje vrednosti x je f_3(x) definisana?</summary>
          <p style="margin-top: 8px;">
            Potrebno je \(-2x + 3 \geq 0\), tj. \(x \leq \frac{3}{2}\). Za izvod nam treba
            strog uslov \(-2x + 3 > 0\), tj. \(x < \frac{3}{2}\). Posto je \(1 < \frac{3}{2}\),
            tacka \(x = 1\) je u domenu.
          </p>
        </details>
      </div>
    </div>

    <!-- Korak 4 -->
    <div class="step">
      <div class="step-header">
        <div class="step-badge">4</div>
        <div class="step-title">Sabiramo sve izvode</div>
      </div>
      <div class="step-content">
        <p>Kombinujemo rezultate iz prethodna tri koraka:</p>
        <div class="math-highlight">
          \[f'(1) = f_1'(1) + f_2'(1) + f_3'(1) = -\frac{1}{4} + 3 + (-1)\]
        </div>
        <p>Svodimo na zajednicki imenilac:</p>
        <div class="math-highlight">
          \[= -\frac{1}{4} + \frac{12}{4} - \frac{4}{4} = \frac{-1 + 12 - 4}{4} = \frac{7}{4}\]
        </div>
      </div>
    </div>
  </div>

  <!-- KLJUCNI UVID -->
  <div class="key-insight">
    <div class="card-title"><span class="icon">&#128161;</span> Kljucni uvid</div>
    <p>
      Tacka \(x = 1\) dramaticno pojednostavljuje drugi sabirak jer je to upravo centar Gausove
      funkcije \(e^{-(x-1)^2}\). U toj tacki eksponent je nula (\(e^0 = 1\)), a izvod eksponenta
      takodje sadrzi faktor \((x - 1) = 0\), pa se ceo \(uv'\) clan ponistava. Ovakva "magicna"
      tacka cesto se bira na prijemnim ispitima upravo da bi se racun pojednostavio &mdash; prepoznavanje
      ove strukture stedi vreme.
    </p>
  </div>

  <!-- KONACAN ODGOVOR -->
  <div class="card final-answer-box">
    <div class="card-title" style="justify-content: center;"><span class="icon">&#127919;</span> Konacan odgovor</div>
    <div class="final-answer-value">\(\dfrac{7}{4}\)</div>
    <div class="final-options">
      <div class="final-option">(A) \(-1\)</div>
      <div class="final-option">(B) \(0\)</div>
      <div class="final-option">(C) \(1\)</div>
      <div class="final-option">(D) \(\dfrac{2}{3}\)</div>
      <div class="final-option correct-option">(E) \(\dfrac{7}{4}\)</div>
    </div>
    <p class="verification-note">Verifikacija: \(-\dfrac{1}{4} + 3 - 1 = -\dfrac{1}{4} + 2 = \dfrac{7}{4}\) &#10004;</p>
  </div>

  <!-- CESTE GRESKE -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9888;&#65039;</span> Ceste greske</div>
    <div class="pitfall-item">
      <span class="pitfall-icon">&#10060;</span>
      <div>
        <strong style="color: #f472b6;">Zaboravljanje lancnog pravila za eksponencijalnu funkciju:</strong>
        <span class="pitfall-text">
          Izvod \(e^{g(x)}\) nije prosto \(e^{g(x)}\) &mdash; mora se pomnoziti sa \(g'(x)\).
          U nasem slucaju to je \(-2(x-1)\). Ako se ovo izostavi, drugi sabirak bi pogresno dao 3
          plus dodatni clan.
        </span>
      </div>
    </div>
    <div class="pitfall-item">
      <span class="pitfall-icon">&#10060;</span>
      <div>
        <strong style="color: #f472b6;">Greska u znaku kod \(f_1'(x)\):</strong>
        <span class="pitfall-text">
          Izvod \(\frac{4}{x - 5}\) je \(-\frac{4}{(x-5)^2}\), sa negativnim predznakom.
          Ako se zaboravi minus, dobija se \(+\frac{1}{4}\) umesto \(-\frac{1}{4}\), sto dovodi
          do pogresnog rezultata \(\frac{9}{4}\).
        </span>
      </div>
    </div>
    <div class="pitfall-item">
      <span class="pitfall-icon">&#10060;</span>
      <div>
        <strong style="color: #f472b6;">Greska sa korenskom funkcijom:</strong>
        <span class="pitfall-text">
          Izvod \(\sqrt{-2x + 3}\) zahteva lancano pravilo: unutrasnji izvod je \(-2\), ne \(1\).
          Rezultat je \(\frac{-1}{\sqrt{-2x+3}}\), a ne \(\frac{1}{2\sqrt{-2x+3}}\).
          Takodje, treba paziti na znak pod korenom: \(-2x + 3\), a ne \(2x - 3\).
        </span>
      </div>
    </div>
  </div>

  <!-- DODATNI IZAZOV -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127947;</span> Dodatni izazov</div>
    <p class="challenge-text">
      Odredite \(f'(1)\) za funkciju \(f(x) = \dfrac{4}{x - 5} + (3x + 1)\,e^{-(x-1)^2} + \sqrt{-2x + 3}\)
      ali ovaj put izracunajte \(f''(1)\) (drugi izvod u tacki \(x = 1\)).
    </p>
    <details>
      <summary>Nagove≈°taj</summary>
      <p style="margin-top: 8px;">
        Potrebno je ponovo diferencirati svaki od tri izvoda. Za \(f_1''(x) = \frac{8}{(x-5)^3}\),
        pa je \(f_1''(1) = \frac{8}{-64} = -\frac{1}{8}\). Za \(f_2''(x)\) primenite pravilo proizvoda
        na \(f_2'(x)\) &mdash; u tacki \(x = 1\) mnogi clanovi se opet pojednostavljivaju jer \((x-1) = 0\).
        Za \(f_3''(x) = \frac{-2}{(3-2x)^{3/2}}\), pa je \(f_3''(1) = -2\).
      </p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('diagram-canvas');
  const ctx = canvas.getContext('2d');

  function draw() {
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    canvas.width = rect.width * dpr;
    canvas.height = rect.height * dpr;
    ctx.scale(dpr, dpr);
    const W = rect.width;
    const H = rect.height;

    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    const pad = 60;
    const plotW = W - 2 * pad;
    const plotH = H - 2 * pad - 30;
    const originX = pad;
    const originY = pad + 15;

    // Title
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Tri sabirka funkcije f(x) i tangentni pravci u x = 1', W / 2, 22);

    // Coordinate system range: x in [-1, 4], y in [-5, 5]
    var xMin = -1, xMax = 4, yMin = -5, yMax = 6;

    function toScreenX(x) { return originX + (x - xMin) / (xMax - xMin) * plotW; }
    function toScreenY(y) { return originY + plotH - (y - yMin) / (yMax - yMin) * plotH; }

    // Grid
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (var gx = Math.ceil(xMin); gx <= xMax; gx++) {
      ctx.beginPath();
      ctx.moveTo(toScreenX(gx), originY);
      ctx.lineTo(toScreenX(gx), originY + plotH);
      ctx.stroke();
    }
    for (var gy = Math.ceil(yMin); gy <= yMax; gy++) {
      ctx.beginPath();
      ctx.moveTo(originX, toScreenY(gy));
      ctx.lineTo(originX + plotW, toScreenY(gy));
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(originX, toScreenY(0));
    ctx.lineTo(originX + plotW, toScreenY(0));
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(toScreenX(0), originY);
    ctx.lineTo(toScreenX(0), originY + plotH);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    for (var lx = Math.ceil(xMin); lx <= xMax; lx++) {
      ctx.fillText(lx.toString(), toScreenX(lx), toScreenY(0) + 16);
    }
    ctx.textAlign = 'right';
    for (var ly = Math.ceil(yMin); ly <= yMax; ly += 2) {
      if (ly === 0) continue;
      ctx.fillText(ly.toString(), toScreenX(0) - 8, toScreenY(ly) + 4);
    }

    // Function definitions
    function f1(x) { return 4 / (x - 5); }
    function f2(x) { return (3 * x + 1) * Math.exp(-Math.pow(x - 1, 2)); }
    function f3(x) { return x <= 1.5 ? Math.sqrt(-2 * x + 3) : NaN; }

    // Plot function helper
    function plotFunc(fn, color, xStart, xEnd) {
      ctx.strokeStyle = color;
      ctx.lineWidth = 2.5;
      ctx.beginPath();
      var started = false;
      var steps = 400;
      var dx = (xEnd - xStart) / steps;
      for (var i = 0; i <= steps; i++) {
        var x = xStart + i * dx;
        var y = fn(x);
        if (isNaN(y) || !isFinite(y) || y < yMin - 2 || y > yMax + 2) {
          started = false;
          continue;
        }
        var sx = toScreenX(x);
        var sy = toScreenY(y);
        if (!started) {
          ctx.moveTo(sx, sy);
          started = true;
        } else {
          ctx.lineTo(sx, sy);
        }
      }
      ctx.stroke();
    }

    // Plot f1: 4/(x-5), domain x < 5 (we show x in [-1, 4])
    plotFunc(f1, '#60a5fa', xMin, xMax);

    // Plot f2: (3x+1)e^{-(x-1)^2}
    plotFunc(f2, '#a78bfa', xMin, xMax);

    // Plot f3: sqrt(-2x+3), domain x <= 1.5
    plotFunc(f3, '#34d399', xMin, 1.5);

    // Mark x = 1 vertical line
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([5, 5]);
    ctx.beginPath();
    ctx.moveTo(toScreenX(1), originY);
    ctx.lineTo(toScreenX(1), originY + plotH);
    ctx.stroke();
    ctx.setLineDash([]);

    // Values at x = 1
    var pts = [
      { fn: f1, color: '#60a5fa', label: 'f\u2081(1) = -1', deriv: -0.25, derivLabel: "f\u2081'= -1/4" },
      { fn: f2, color: '#a78bfa', label: 'f\u2082(1) = 4', deriv: 3, derivLabel: "f\u2082'= 3" },
      { fn: f3, color: '#34d399', label: 'f\u2083(1) = 1', deriv: -1, derivLabel: "f\u2083'= -1" }
    ];

    pts.forEach(function(p, idx) {
      var y = p.fn(1);
      var sx = toScreenX(1);
      var sy = toScreenY(y);

      // Dot
      ctx.fillStyle = p.color;
      ctx.beginPath();
      ctx.arc(sx, sy, 5, 0, 2 * Math.PI);
      ctx.fill();

      // Tangent line segment
      ctx.strokeStyle = p.color;
      ctx.lineWidth = 1.5;
      ctx.globalAlpha = 0.5;
      ctx.beginPath();
      var tLen = 0.8;
      ctx.moveTo(toScreenX(1 - tLen), toScreenY(y - p.deriv * tLen));
      ctx.lineTo(toScreenX(1 + tLen), toScreenY(y + p.deriv * tLen));
      ctx.stroke();
      ctx.globalAlpha = 1.0;

      // Label
      ctx.fillStyle = p.color;
      ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';
      var offsetX = 10;
      var offsetY = idx === 0 ? 16 : idx === 1 ? -10 : -10;
      ctx.fillText(p.label + ',  ' + p.derivLabel, sx + offsetX, sy + offsetY);
    });

    // x = 1 label
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('x = 1', toScreenX(1), originY - 4);

    // Legend
    var legendX = W - 200;
    var legendY = originY + 20;
    var legendItems = [
      { color: '#60a5fa', label: 'f\u2081 = 4/(x\u22125)' },
      { color: '#a78bfa', label: 'f\u2082 = (3x+1)e^{-(x-1)\u00B2}' },
      { color: '#34d399', label: 'f\u2083 = \u221A(3\u22122x)' }
    ];
    legendItems.forEach(function(item, i) {
      var ly = legendY + i * 22;
      ctx.fillStyle = item.color;
      ctx.beginPath();
      ctx.arc(legendX, ly, 5, 0, 2 * Math.PI);
      ctx.fill();
      ctx.fillStyle = item.color;
      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText(item.label, legendX + 12, ly + 4);
    });

    // Bottom summary
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText("f'(1) = \u22121/4 + 3 + (\u22121) = 7/4", W / 2, H - 10);
  }

  draw();
  window.addEventListener('resize', draw);
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Izvod slozene funkcije u tacki x=1",
  "subject": "math",
  "unit": "calculus",
  "topic_tags": ["izvodi", "lancano pravilo", "pravilo proizvoda", "eksponencijalna funkcija", "korenova funkcija", "diferenciranje"]
}
BRAINSPARK_META-->