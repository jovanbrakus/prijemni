<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Binomna formula - zbir koeficijenata i slobodni clanovi</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM: Given x > 0 real, n even natural number.
Two binomial expansions:
  B1 = (x^2019 + 1/x^2019)^n
  B2 = (sqrt(x) + 1/sqrt(x))^(n/2)

Condition: Sum of all binomial coefficients in B1 is 4 times the sum of all binomial coefficients in B2.

Find: Sum of terms independent of x in both expansions.

SOLUTION:

STEP 1: Sum of binomial coefficients.
The sum of all binomial coefficients in (a+b)^m is obtained by setting a=b=1, giving 2^m.
- For B1: sum of binomial coefficients = 2^n
- For B2: sum of binomial coefficients = 2^(n/2)

STEP 2: Apply the condition.
2^n = 4 * 2^(n/2)
2^n = 2^2 * 2^(n/2)
2^n = 2^(n/2 + 2)
Therefore: n = n/2 + 2
n - n/2 = 2
n/2 = 2
n = 4

STEP 3: Find term independent of x in B1 = (x^2019 + 1/x^2019)^4.
General term: C(4,k) * (x^2019)^(4-k) * (x^(-2019))^k = C(4,k) * x^(2019*(4-2k))
Independent of x when 2019*(4-2k) = 0 => 4-2k = 0 => k = 2.
Term: C(4,2) = 6.

STEP 4: Find term independent of x in B2 = (sqrt(x) + 1/sqrt(x))^2.
n/2 = 4/2 = 2, so B2 = (x^(1/2) + x^(-1/2))^2.
General term: C(2,k) * (x^(1/2))^(2-k) * (x^(-1/2))^k = C(2,k) * x^((2-2k)/2) = C(2,k) * x^(1-k)
Independent of x when 1-k = 0 => k = 1.
Term: C(2,1) = 2.

STEP 5: Sum of x-free terms: 6 + 2 = 8.

ANSWER: (C) 8
</script>

<script>
MathJax = {
  tex: { inlineMath: [['\\(', '\\)'], ['$', '$']], displayMath: [['\\[', '\\]']] },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

<style>
*, *::before, *::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 1rem;
  min-height: 100vh;
}

.container {
  max-width: 900px;
  margin: 0 auto;
  padding: 1rem 0;
}

h1 {
  font-size: clamp(1.5rem, 4vw, 2.2rem);
  font-weight: 700;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-align: center;
  margin-bottom: 0.25rem;
}

.subtitle {
  text-align: center;
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 2rem;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
}

.card-title {
  font-size: 1.15rem;
  font-weight: 600;
  color: #60a5fa;
  margin-bottom: 0.75rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.card-title .icon {
  font-size: 1.3rem;
}

.problem-statement {
  border: 2px solid #a78bfa;
  font-size: 1.08rem;
}

.problem-statement .card-title {
  color: #a78bfa;
}

.given-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 0.5rem;
  margin-top: 1rem;
}

.given-item {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 8px;
  padding: 0.5rem 0.75rem;
  text-align: center;
  transition: border-color 0.2s;
}

.given-item .label {
  font-size: 0.85rem;
  color: #94a3b8;
  margin-bottom: 0.2rem;
}

.given-item .value {
  font-size: 1rem;
  color: #e2e8f0;
  font-weight: 600;
}

.plan-list {
  list-style: none;
  counter-reset: plan;
}

.plan-list li {
  counter-increment: plan;
  padding: 0.4rem 0 0.4rem 2.2rem;
  position: relative;
}

.plan-list li::before {
  content: counter(plan);
  position: absolute;
  left: 0;
  top: 0.4rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  width: 1.6rem;
  height: 1.6rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.85rem;
}

details {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  margin: 15px 0;
}

details summary {
  padding: 1rem 1.5rem;
  cursor: pointer;
  font-weight: 600;
  color: #a78bfa;
  list-style: none;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

details summary::-webkit-details-marker { display: none; }

details summary::before {
  content: '\25B6';
  font-size: 0.75rem;
  transition: transform 0.2s;
}

details[open] summary::before {
  transform: rotate(90deg);
}

details .detail-content {
  padding: 0 1.5rem 1.5rem;
}

.step {
  border-left: 3px solid #334155;
  padding-left: 1.25rem;
  margin-bottom: 1.5rem;
  position: relative;
  cursor: pointer;
  transition: border-color 0.2s;
}

.step:hover, .step.active {
  border-left-color: #4ade80;
}

.step::before {
  content: '';
  position: absolute;
  left: -7px;
  top: 0;
  width: 11px;
  height: 11px;
  border-radius: 50%;
  background: #60a5fa;
}

.step-title {
  font-weight: 600;
  color: #60a5fa;
  margin-bottom: 0.4rem;
  font-size: 1.05rem;
}

.math-block {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 8px;
  padding: 0.75rem 1rem;
  margin: 0.5rem 0;
  overflow-x: auto;
}

.checkpoint {
  background: rgba(163, 130, 250, 0.1);
  border: 1px solid #a78bfa;
  border-radius: 10px;
  margin: 15px 0;
}

.checkpoint summary {
  padding: 0.75rem 1rem;
  cursor: pointer;
  font-weight: 600;
  color: #a78bfa;
  font-size: 0.95rem;
  list-style: none;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.checkpoint summary::-webkit-details-marker { display: none; }

.checkpoint summary::before {
  content: '\25B6';
  font-size: 0.7rem;
  transition: transform 0.2s;
}

.checkpoint[open] summary::before {
  transform: rotate(90deg);
}

.checkpoint .checkpoint-content {
  padding: 0 1rem 0.75rem;
  font-size: 0.95rem;
}

.canvas-wrap {
  text-align: center;
  margin: 1rem 0;
}

canvas {
  border-radius: 12px;
  background: #0f172a;
  border: 1px solid #334155;
  max-width: 100%;
  touch-action: none;
}

.canvas-hint {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-top: 0.5rem;
}

.final-answer {
  background: rgba(74, 222, 128, 0.08);
  border: 2px solid #4ade80;
  border-radius: 14px;
  padding: 1.5rem;
  text-align: center;
  margin-bottom: 1.5rem;
}

.final-answer .label {
  font-size: 0.95rem;
  color: #94a3b8;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  margin-bottom: 0.5rem;
}

.final-answer .value {
  font-size: 1.6rem;
  font-weight: 700;
  color: #4ade80;
}

.final-options {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 0.5rem;
  margin-top: 1rem;
}

.final-option {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 8px;
  padding: 0.5rem 0.75rem;
  text-align: center;
  font-size: 1rem;
  transition: border-color 0.2s;
}

.final-option.correct {
  border-color: #4ade80;
  background: rgba(74, 222, 128, 0.1);
  color: #4ade80;
  font-weight: 600;
}

.verification {
  margin-top: 1rem;
  font-size: 0.9rem;
  color: #94a3b8;
  font-style: italic;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid #60a5fa;
  border-radius: 14px;
  padding: 1.25rem 1.5rem;
  margin-bottom: 1.5rem;
}

.insight-box .card-title {
  color: #60a5fa;
}

.pitfall {
  background: rgba(244, 114, 182, 0.08);
  border: 1px solid #f472b6;
  border-radius: 10px;
  padding: 0.75rem 1rem;
  margin-bottom: 0.75rem;
}

.pitfall strong {
  color: #f472b6;
}

.challenge-box {
  background: rgba(52, 211, 153, 0.08);
  border: 1px dashed #34d399;
  border-radius: 14px;
  padding: 1.25rem 1.5rem;
  margin-bottom: 1rem;
}

.challenge-box .card-title {
  color: #34d399;
}

.muted {
  color: #94a3b8;
}

.highlight {
  color: #4ade80;
  font-weight: 600;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

.highlight-blue {
  color: #60a5fa;
  font-weight: 600;
}

mjx-container {
  overflow-x: auto;
}

@media (max-width: 700px) {
  body { padding: 0.5rem; }
  .card, .problem-statement, details .detail-content, .final-answer,
  .insight-box, .challenge-box { padding: 1rem; }
  .given-grid { grid-template-columns: repeat(3, 1fr); }
  .final-options { grid-template-columns: repeat(3, 1fr); }
}
</style>
</head>
<body>
<div class="container">

  <!-- TITLE -->
  <h1>Binomna formula i slobodni clanovi</h1>
  <p class="subtitle">Binomni koeficijenti, razvoj binoma i clanovi nezavisni od promenljive</p>

  <!-- PROBLEM STATEMENT -->
  <div class="card problem-statement">
    <div class="card-title"><span class="icon">&#128220;</span> Zadatak</div>
    <p>
      Neka je \(x \in \mathbb{R}\) pozitivan broj i neka je \(n \in \mathbb{N}\) paran broj.
      Zbir svih binomnih koeficijenata u razvoju binoma
      \(\left(x^{2019} + \dfrac{1}{x^{2019}}\right)^n\)
      cetiri puta je veci od zbira svih binomnih koeficijenata u razvoju binoma
      \(\left(\sqrt{x} + \dfrac{1}{\sqrt{x}}\right)^{\frac{n}{2}}\).
    </p>
    <p style="margin-top: 0.75rem;">
      Zbir onih clanova ova dva razvoja binoma koji ne sadrze \(x\) jeste:
    </p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(2\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(6\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(8\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(4\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(10\)</div>
      </div>
    </div>
  </div>

  <!-- PLAN -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128204;</span> Plan resavanja</div>
    <ol class="plan-list">
      <li>Iskoristicemo cinjenicu da je zbir svih binomnih koeficijenata u razvoju \((a+b)^m\) jednak \(2^m\) (kada se postavi \(a = b = 1\)), da bismo odredili \(n\).</li>
      <li>Zatim cemo u oba razvoja pronaci clanove koji ne sadrze \(x\) (slobodne clanove) i sabrati ih.</li>
    </ol>
  </div>

  <!-- THEORY REFRESHER -->
  <details>
    <summary>Podsetnik iz teorije</summary>
    <div class="detail-content">
      <p><strong>Binomna teorema:</strong></p>
      \[(a + b)^m = \sum_{k=0}^{m} \binom{m}{k} a^{m-k} b^k\]

      <p style="margin-top:0.75rem"><strong>Zbir binomnih koeficijenata:</strong> Ako u binomnoj teoremi stavimo \(a = 1\) i \(b = 1\), dobijamo:</p>
      \[\sum_{k=0}^{m} \binom{m}{k} = 2^m\]

      <p style="margin-top:0.75rem"><strong>Opsti clan razvoja:</strong> \(k\)-ti clan u razvoju \((a + b)^m\) je:</p>
      \[T_{k+1} = \binom{m}{k} \cdot a^{m-k} \cdot b^k\]

      <p style="margin-top:0.75rem"><strong>Slobodan clan:</strong> Clan razvoja binoma koji ne sadrzi promenljivu \(x\), tj. u kome je eksponent od \(x\) jednak nuli.</p>
    </div>
  </details>

  <!-- VISUAL AID -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128202;</span> Vizuelni prikaz - Binomni koeficijenti</div>
    <p class="muted" style="margin-bottom:0.75rem;">Paskalov trougao prikazuje binomne koeficijente. Oznaceni su redovi za \(n = 4\) i \(n/2 = 2\), koji su kljucni za nas zadatak. Slobodni clanovi su istaknuti.</p>
    <div class="canvas-wrap">
      <canvas id="pascal-canvas" width="700" height="420"></canvas>
    </div>
  </div>

  <!-- STEP-BY-STEP SOLUTION -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9999;&#65039;</span> Resenje korak po korak</div>

    <!-- Step 1 -->
    <div class="step">
      <div class="step-title">Korak 1: Zbir binomnih koeficijenata</div>
      <p>Zbir svih binomnih koeficijenata u razvoju \((a + b)^m\) dobijamo zamenom \(a = 1, \; b = 1\):</p>
      <div class="math-block">
        \[\sum_{k=0}^{m} \binom{m}{k} \cdot 1^{m-k} \cdot 1^{k} = 2^m\]
      </div>
      <p>Ovo vazi bez obzira na konkretne vrednosti \(a\) i \(b\) u originalnom binomu.</p>
    </div>

    <!-- Step 2 -->
    <div class="step">
      <div class="step-title">Korak 2: Primenimo na nasa dva binoma</div>
      <p>Za prvi binom \(\left(x^{2019} + \dfrac{1}{x^{2019}}\right)^n\), zbir svih binomnih koeficijenata je:</p>
      <div class="math-block">
        \[S_1 = 2^n\]
      </div>
      <p>Za drugi binom \(\left(\sqrt{x} + \dfrac{1}{\sqrt{x}}\right)^{n/2}\), zbir svih binomnih koeficijenata je:</p>
      <div class="math-block">
        \[S_2 = 2^{n/2}\]
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step">
      <div class="step-title">Korak 3: Postavimo uslov i odredimo n</div>
      <p>Po uslovu zadatka, \(S_1\) je cetiri puta vece od \(S_2\):</p>
      <div class="math-block">
        \[2^n = 4 \cdot 2^{n/2}\]
      </div>
      <p>Zapisimo \(4 = 2^2\):</p>
      <div class="math-block">
        \[2^n = 2^2 \cdot 2^{n/2} = 2^{n/2 + 2}\]
      </div>
      <p>Posto su baze jednake, izjednacavamo eksponente:</p>
      <div class="math-block">
        \[n = \frac{n}{2} + 2\]
      </div>
      <p>Resavamo:</p>
      <div class="math-block">
        \[n - \frac{n}{2} = 2 \implies \frac{n}{2} = 2 \implies \boxed{n = 4}\]
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Koliki je zbir binomnih koeficijenata za svaki binom?</summary>
      <div class="checkpoint-content">
        <p>Za \(n = 4\): \(S_1 = 2^4 = 16\), \(S_2 = 2^{4/2} = 2^2 = 4\). Proveravamo: \(16 = 4 \cdot 4\). Tacno!</p>
      </div>
    </details>

    <!-- Step 4 -->
    <div class="step">
      <div class="step-title">Korak 4: Slobodan clan prvog binoma</div>
      <p>Razvijamo \(\left(x^{2019} + \dfrac{1}{x^{2019}}\right)^4\). Opsti clan je:</p>
      <div class="math-block">
        \[T_{k+1} = \binom{4}{k} \cdot \left(x^{2019}\right)^{4-k} \cdot \left(x^{-2019}\right)^{k} = \binom{4}{k} \cdot x^{2019(4 - 2k)}\]
      </div>
      <p>Clan ne sadrzi \(x\) kada je eksponent jednak nuli:</p>
      <div class="math-block">
        \[2019(4 - 2k) = 0\]
      </div>
      <p>Posto je \(2019 \neq 0\):</p>
      <div class="math-block">
        \[4 - 2k = 0 \implies k = 2\]
      </div>
      <p>Slobodan clan je:</p>
      <div class="math-block">
        \[T_3 = \binom{4}{2} = \frac{4!}{2! \cdot 2!} = \frac{24}{4} = \boxed{6}\]
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Koliki su svi binomni koeficijenti u 4. redu?</summary>
      <div class="checkpoint-content">
        <p>\(\binom{4}{0} = 1, \; \binom{4}{1} = 4, \; \binom{4}{2} = 6, \; \binom{4}{3} = 4, \; \binom{4}{4} = 1\). Zbir: \(1 + 4 + 6 + 4 + 1 = 16 = 2^4\). Sve se poklapa!</p>
      </div>
    </details>

    <!-- Step 5 -->
    <div class="step">
      <div class="step-title">Korak 5: Slobodan clan drugog binoma</div>
      <p>Sada razvijamo \(\left(\sqrt{x} + \dfrac{1}{\sqrt{x}}\right)^{2}\), jer je \(n/2 = 4/2 = 2\). Opsti clan je:</p>
      <div class="math-block">
        \[T_{k+1} = \binom{2}{k} \cdot \left(x^{1/2}\right)^{2-k} \cdot \left(x^{-1/2}\right)^{k} = \binom{2}{k} \cdot x^{(2-2k)/2} = \binom{2}{k} \cdot x^{1-k}\]
      </div>
      <p>Clan ne sadrzi \(x\) kada je eksponent jednak nuli:</p>
      <div class="math-block">
        \[1 - k = 0 \implies k = 1\]
      </div>
      <p>Slobodan clan je:</p>
      <div class="math-block">
        \[T_2 = \binom{2}{1} = \boxed{2}\]
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step">
      <div class="step-title">Korak 6: Konacan zbir</div>
      <p>Sabiramo slobodne clanove oba razvoja:</p>
      <div class="math-block">
        \[6 + 2 = \boxed{8}\]
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Mozes li da razvijes drugi binom kompletno i proveris?</summary>
      <div class="checkpoint-content">
        <p>\(\left(\sqrt{x} + \dfrac{1}{\sqrt{x}}\right)^{2} = x + 2 + \dfrac{1}{x}\). Slobodan clan (bez \(x\)) je \(2\). Tacno!</p>
      </div>
    </details>
  </div>

  <!-- KEY INSIGHT -->
  <div class="insight-box">
    <div class="card-title"><span class="icon">&#128161;</span> Kljucni uvid</div>
    <p>Trik u ovom zadatku je da zbir binomnih koeficijenata <strong>ne zavisi</strong> od konkretnih clanova binoma \(a\) i \(b\), vec iskljucivo od eksponenta \(m\). Bez obzira na to koliko komplikovani izgledaju izrazi \(x^{2019}\) i \(\frac{1}{x^{2019}}\), zbir koeficijenata je jednostavno \(2^m\). To nam omogucava da brzo odredimo \(n\), nakon cega nalazenje slobodnih clanova postaje rutinski posao.</p>
  </div>

  <!-- FINAL ANSWER -->
  <div class="final-answer">
    <div class="label">Konacan odgovor</div>
    <div class="value">(C) \(\;8\)</div>
    <div class="final-options">
      <div class="final-option">(A) \(2\)</div>
      <div class="final-option">(B) \(6\)</div>
      <div class="final-option correct">(C) \(8\)</div>
      <div class="final-option">(D) \(4\)</div>
      <div class="final-option">(E) \(10\)</div>
    </div>
    <p class="verification">Verifikacija: Za \(n = 4\), slobodan clan prvog binoma je \(\binom{4}{2} = 6\), a drugog \(\binom{2}{1} = 2\). Njihov zbir \(6 + 2 = 8\) je medu ponudjenim odgovorima, sto potvrduje tacnost resenja.</p>
  </div>

  <!-- COMMON PITFALLS -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9888;&#65039;</span> Ceste greske</div>
    <div class="pitfall">
      <strong>Zamena zbira koeficijenata i zbira clanova:</strong> Zbir binomnih <em>koeficijenata</em> u \((a+b)^m\) je \(2^m\) (dobija se za \(a = b = 1\)). To nije isto sto i zbir svih clanova razvoja (koji zavisi od konkretnih vrednosti \(a\) i \(b\)). U zadatku se trazi zbir koeficijenata, ne zbir clanova.
    </div>
    <div class="pitfall">
      <strong>Zaborav da je odgovor 6 samo od prvog binoma:</strong> Vrednost 6 je slobodan clan samo prvog binoma. Zadatak trazi zbir slobodnih clanova <em>oba</em> binoma, dakle treba dodati i 2 od drugog. Odgovor (B) = 6 je zamka za one koji zaborave drugi binom.
    </div>
  </div>

  <!-- OPTIONAL CHALLENGE -->
  <div class="challenge-box">
    <div class="card-title"><span class="icon">&#127942;</span> Dodatni izazov</div>
    <p>Koliki je koeficijent uz \(x^{4038}\) u razvoju prvog binoma \(\left(x^{2019} + \frac{1}{x^{2019}}\right)^4\)?</p>
    <details style="background: transparent; border: 1px solid #34d399; margin: 15px 0;">
      <summary style="color: #34d399;">Prikazi nagovestavajuci savet</summary>
      <div class="detail-content">
        <p>Eksponent od \(x\) u opstem clanu je \(2019(4 - 2k)\). Resi jednacinu \(2019(4 - 2k) = 4038\), odakle sledi \(4 - 2k = 2\), tj. \(k = 1\). Koeficijent je \(\binom{4}{1} = 4\).</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('pascal-canvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  ctx.fillStyle = '#0f172a';
  ctx.fillRect(0, 0, W, H);

  // Pascal's triangle rows 0-4
  const rows = [
    [1],
    [1, 1],
    [1, 2, 1],
    [1, 3, 3, 1],
    [1, 4, 6, 4, 1]
  ];

  const cellR = 24;
  const rowSpacing = 65;
  const colSpacing = 60;
  const startY = 50;

  // Draw each row
  for (let r = 0; r < rows.length; r++) {
    const row = rows[r];
    const y = startY + r * rowSpacing;
    const totalWidth = (row.length - 1) * colSpacing;
    const startX = W / 2 - totalWidth / 2;

    for (let c = 0; c < row.length; c++) {
      const x = startX + c * colSpacing;
      const val = row[c];

      // Determine highlighting
      let isHighlightRow4 = (r === 4);
      let isHighlightRow2 = (r === 2);
      let isFreeTermRow4 = (r === 4 && c === 2); // C(4,2)=6
      let isFreeTermRow2 = (r === 2 && c === 1); // C(2,1)=2

      // Draw circle
      ctx.beginPath();
      ctx.arc(x, y, cellR, 0, 2 * Math.PI);

      if (isFreeTermRow4) {
        ctx.fillStyle = 'rgba(74, 222, 128, 0.2)';
        ctx.fill();
        ctx.strokeStyle = '#4ade80';
        ctx.lineWidth = 2.5;
        ctx.stroke();
      } else if (isFreeTermRow2) {
        ctx.fillStyle = 'rgba(244, 114, 182, 0.2)';
        ctx.fill();
        ctx.strokeStyle = '#f472b6';
        ctx.lineWidth = 2.5;
        ctx.stroke();
      } else if (isHighlightRow4) {
        ctx.fillStyle = 'rgba(96, 165, 250, 0.12)';
        ctx.fill();
        ctx.strokeStyle = '#60a5fa';
        ctx.lineWidth = 1.5;
        ctx.stroke();
      } else if (isHighlightRow2) {
        ctx.fillStyle = 'rgba(167, 139, 250, 0.12)';
        ctx.fill();
        ctx.strokeStyle = '#a78bfa';
        ctx.lineWidth = 1.5;
        ctx.stroke();
      } else {
        ctx.fillStyle = '#1e293b';
        ctx.fill();
        ctx.strokeStyle = '#334155';
        ctx.lineWidth = 1;
        ctx.stroke();
      }

      // Draw value
      ctx.fillStyle = isFreeTermRow4 ? '#4ade80' : (isFreeTermRow2 ? '#f472b6' : '#e2e8f0');
      ctx.font = (isFreeTermRow4 || isFreeTermRow2) ? 'bold 16px Segoe UI, system-ui, sans-serif' : '15px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText(val.toString(), x, y);

      // Draw connecting lines to children
      if (r < rows.length - 1) {
        const nextRow = rows[r + 1];
        const nextTotalWidth = (nextRow.length - 1) * colSpacing;
        const nextStartX = W / 2 - nextTotalWidth / 2;

        // Left child
        const childLX = nextStartX + c * colSpacing;
        const childY = startY + (r + 1) * rowSpacing;

        ctx.strokeStyle = '#334155';
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.moveTo(x, y + cellR);
        ctx.lineTo(childLX, childY - cellR);
        ctx.stroke();

        // Right child
        const childRX = nextStartX + (c + 1) * colSpacing;
        ctx.beginPath();
        ctx.moveTo(x, y + cellR);
        ctx.lineTo(childRX, childY - cellR);
        ctx.stroke();
      }
    }

    // Row labels
    const labelX = W / 2 - ((row.length - 1) * colSpacing) / 2 - 55;
    ctx.textAlign = 'right';
    ctx.textBaseline = 'middle';

    if (r === 2) {
      ctx.fillStyle = '#a78bfa';
      ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
      ctx.fillText('n/2 = 2', labelX, y);
    } else if (r === 4) {
      ctx.fillStyle = '#60a5fa';
      ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
      ctx.fillText('n = 4', labelX, y);
    } else {
      ctx.fillStyle = '#94a3b8';
      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      ctx.fillText('m = ' + r, labelX, y);
    }
  }

  // Legend at bottom
  const legendY = H - 50;
  const legendStartX = W / 2 - 200;

  // Green legend: free term of first binomial
  ctx.beginPath();
  ctx.arc(legendStartX, legendY, 10, 0, 2 * Math.PI);
  ctx.fillStyle = 'rgba(74, 222, 128, 0.2)';
  ctx.fill();
  ctx.strokeStyle = '#4ade80';
  ctx.lineWidth = 2;
  ctx.stroke();

  ctx.fillStyle = '#4ade80';
  ctx.font = '13px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'left';
  ctx.textBaseline = 'middle';
  ctx.fillText('Slobodan clan 1. binoma: C(4,2) = 6', legendStartX + 18, legendY);

  // Pink legend: free term of second binomial
  ctx.beginPath();
  ctx.arc(legendStartX, legendY + 28, 10, 0, 2 * Math.PI);
  ctx.fillStyle = 'rgba(244, 114, 182, 0.2)';
  ctx.fill();
  ctx.strokeStyle = '#f472b6';
  ctx.lineWidth = 2;
  ctx.stroke();

  ctx.fillStyle = '#f472b6';
  ctx.fillText('Slobodan clan 2. binoma: C(2,1) = 2', legendStartX + 18, legendY + 28);
})();
</script>

<script>
(() => {
  // Make steps clickable with green left border
  const steps = document.querySelectorAll('.step');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.add('active');
    });
  });
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{"title":"Binomna formula - zbir koeficijenata i slobodni clanovi","subject":"math","unit":"combinatorics","topic_tags":["binomna formula","binomni koeficijenti","Paskalov trougao","slobodan clan","razvoj binoma"]}
BRAINSPARK_META-->