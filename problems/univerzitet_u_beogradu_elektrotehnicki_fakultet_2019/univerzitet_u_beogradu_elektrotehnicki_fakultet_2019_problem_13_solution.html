<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jednacina kruznice tangentne na parabolu</title>

<script type="text/info" id="logic-scratchpad">
Problem: Naci jednacinu kruznice ciji je centar na x-osi i koja sa parabolom y^2 = 12x
u tacki A(3, 6) ima zajednicku tangentu.

KORAK 1: Proveriti da je A(3, 6) na paraboli.
  y^2 = 6^2 = 36
  12x = 12 * 3 = 36
  36 = 36 => A(3, 6) JESTE na paraboli.

KORAK 2: Naci tangentu na parabolu u tacki A(3, 6).
  Parabola: y^2 = 12x
  Implicitno diferenciramo: 2y * y' = 12 => y' = 12 / (2y) = 6/y
  U tacki A(3, 6): y' = 6/6 = 1
  Jednacina tangente: y - 6 = 1 * (x - 3) => y = x + 3

KORAK 3: Kruznica ima centar na x-osi: centar je C(h, 0), poluprecnik r.
  Jednacina kruznice: (x - h)^2 + y^2 = r^2

KORAK 4: Kruznica i parabola imaju zajednicku tangentu u tacki A(3, 6).
  "Zajednicka tangenta" u tacki A znaci da je tangenta na parabolu u A
  ujedno i tangenta na kruznicu u A.

  Za tangentu na kruznicu u tacki A, poluprecnik CA mora biti normalan na tangentu.

  Tangenta ima nagib 1, pa normala (a time i poluprecnik CA) ima nagib -1.

  Nagib CA: (6 - 0)/(3 - h) = 6/(3 - h) = -1
  6 = -(3 - h) = h - 3
  h = 9

KORAK 5: Naci poluprecnik.
  r^2 = (3 - 9)^2 + (6 - 0)^2 = (-6)^2 + 6^2 = 36 + 36 = 72

KORAK 6: Jednacina kruznice.
  (x - 9)^2 + y^2 = 72

PROVERA:
  - Centar C(9, 0) je na x-osi. OK.
  - A(3, 6) na kruznici: (3-9)^2 + 6^2 = 36 + 36 = 72. OK.
  - Tangenta y = x + 3 na kruznicu: rastojanje centra (9, 0) od prave x - y + 3 = 0:
    d = |9 - 0 + 3| / sqrt(1 + 1) = 12 / sqrt(2) = 6*sqrt(2)
    r = sqrt(72) = 6*sqrt(2)
    d = r => prava je tangenta. OK.

Odgovor: (D) (x - 9)^2 + y^2 = 72
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
}

h1 {
  font-size: 2rem;
  font-weight: 700;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  text-align: center;
}

.subtitle {
  text-align: center;
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.card-title {
  font-size: 1.25rem;
  font-weight: 600;
  color: #60a5fa;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.3rem;
}

.problem-statement {
  border-left: 4px solid #a78bfa;
}

.problem-statement .problem-text {
  font-size: 1.1rem;
  line-height: 1.9;
  margin-bottom: 20px;
}

.math-highlight {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  padding: 2px 8px;
  border-radius: 6px;
  display: inline-block;
}

.given-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96, 165, 250, 0.06);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 12px 16px;
  text-align: center;
  font-size: 1.05rem;
  transition: border-color 0.2s;
}

.given-item .label {
  color: #94a3b8;
  font-weight: 600;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
}

.given-item.answer-option {
  cursor: default;
}

.plan-text {
  color: #94a3b8;
  font-size: 1.05rem;
  line-height: 1.8;
}

details {
  background: rgba(96, 165, 250, 0.04);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 14px 18px;
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  user-select: none;
}

details summary:hover {
  color: #c4b5fd;
}

details[open] summary {
  margin-bottom: 10px;
}

.step {
  margin-bottom: 24px;
  padding: 12px 16px;
  border-radius: 10px;
  transition: all 0.2s;
  cursor: pointer;
}

.step:hover {
  background: rgba(96, 165, 250, 0.04);
  border-left: 3px solid #4ade80;
  padding-left: 13px;
}

.step-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.step-badge {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.95rem;
  color: #0f172a;
  flex-shrink: 0;
}

.step-title {
  font-size: 1.15rem;
  font-weight: 600;
  color: #e2e8f0;
}

.step-content {
  margin-left: 48px;
  color: #cbd5e1;
  line-height: 1.9;
}

.step-content .math-block {
  background: rgba(167, 139, 250, 0.1);
  border: 1px solid rgba(167, 139, 250, 0.25);
  border-radius: 10px;
  padding: 12px 18px;
  margin: 10px 0;
  text-align: center;
}

.key-insight {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.12), rgba(167, 139, 250, 0.12));
  border: 1px solid rgba(167, 139, 250, 0.3);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.key-insight .card-title {
  color: #a78bfa;
}

.final-answer-box {
  text-align: center;
  padding: 30px;
}

.final-answer-value {
  font-size: 2.2rem;
  font-weight: 700;
  color: #4ade80;
  margin: 16px 0;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 12px;
  margin-top: 20px;
}

.final-option {
  padding: 10px 22px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: #1e293b;
  color: #94a3b8;
  font-size: 1.05rem;
  transition: all 0.2s;
}

.final-option.correct-option {
  border-color: #4ade80;
  background: rgba(74, 222, 128, 0.1);
  color: #4ade80;
  font-weight: 700;
}

.verification-note {
  color: #94a3b8;
  margin-top: 16px;
  font-size: 0.95rem;
}

.pitfall-item {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  margin-bottom: 12px;
}

.pitfall-icon {
  color: #f472b6;
  flex-shrink: 0;
  margin-top: 4px;
}

.pitfall-text {
  color: #cbd5e1;
}

.challenge-text {
  color: #94a3b8;
  font-size: 1.05rem;
  line-height: 1.8;
}

.checkpoint details summary {
  color: #34d399;
}

.checkpoint details {
  border-left: 3px solid #34d399;
}

canvas {
  display: block;
  margin: 0 auto;
  width: 100%;
  max-width: 700px;
  border-radius: 12px;
  touch-action: none;
}

.canvas-caption {
  text-align: center;
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 8px;
}

.drag-hint {
  text-align: center;
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 6px;
}

@media (max-width: 700px) {
  h1 { font-size: 1.4rem; }
  .card { padding: 16px; }
  .given-grid { grid-template-columns: 1fr; }
  .step-content { margin-left: 0; margin-top: 8px; }
  .final-answer-value { font-size: 1.7rem; }
  .final-options { gap: 8px; }
  .final-option { padding: 8px 14px; font-size: 0.95rem; }
}
</style>
</head>
<body>

<div class="container">

  <!-- NASLOV -->
  <h1>Jednacina kruznice tangentne na parabolu</h1>
  <p class="subtitle">Analiticka geometrija &mdash; tangenta na parabolu, kruznica i uslov tangentnosti</p>

  <!-- TEKST ZADATKA -->
  <div class="card problem-statement">
    <div class="card-title"><span class="icon">&#128220;</span> Tekst zadatka</div>
    <div class="problem-text">
      Jednacina kruznice ciji je centar na \(x\)-osi i koja sa parabolom \(y^2 = 12x\) u tacki \(A(3,\, 6)\) ima zajednicku tangentu jeste:
    </div>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\((x - 3)^2 + y^2 = 9\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\((x - 6)^2 + y^2 = 36\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\((x - 9)^2 + y^2 = 81\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\((x - 9)^2 + y^2 = 72\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\((x - 6)^2 + y^2 = 72\)</div>
      </div>
    </div>
  </div>

  <!-- PLAN -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128204;</span> Plan resavanja</div>
    <p class="plan-text">
      Prvo cemo proveriti da tacka \(A(3, 6)\) zaista lezi na paraboli. Zatim cemo implicitnim diferenciranjem naci jednacinu tangente na parabolu u tacki \(A\). Posto kruznica i parabola dele tangentu u \(A\), poluprecnik kruznice ka tacki \(A\) mora biti normalan na tu tangentu &mdash; odatle odredjujemo centar i poluprecnik kruznice.
    </p>
  </div>

  <!-- TEORIJA -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128218;</span> Podsetnik iz teorije</div>
    <details>
      <summary>&#128208; Kljucne formule i teoreme</summary>
      <ul style="margin: 12px 0 0 20px; line-height: 2.2;">
        <li><strong>Parabola \(y^2 = 4px\):</strong> Fokus u \((p, 0)\), direktrisa \(x = -p\). Za \(y^2 = 12x\) imamo \(4p = 12\), tj. \(p = 3\).</li>
        <li><strong>Implicitno diferenciranje:</strong> Ako je \(y^2 = 12x\), diferenciramo obe strane po \(x\): \(2y \cdot y' = 12\), pa \(y' = \dfrac{6}{y}\).</li>
        <li><strong>Tangenta na kruznicu:</strong> U bilo kojoj tacki kruznice, tangenta je normalna na poluprecnik ka toj tacki.</li>
        <li><strong>Uslov normalnosti:</strong> Dva pravca su normalna ako je proizvod njihovih nagiba jednak \(-1\): \(k_1 \cdot k_2 = -1\).</li>
      </ul>
    </details>
  </div>

  <!-- VIZUELNI PRIKAZ -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127912;</span> Vizuelni prikaz</div>
    <canvas id="diagram-canvas" width="700" height="520"></canvas>
    <p class="canvas-caption">Parabola \(y^2 = 12x\), kruznica sa centrom \(C(9, 0)\), tangenta u tacki \(A(3, 6)\)</p>
    <p class="drag-hint">Prevucite tacku A duz parabole da vidite kako se tangenta menja</p>
  </div>

  <!-- KORAK PO KORAK -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128736;</span> Resenje korak po korak</div>

    <!-- Korak 1 -->
    <div class="step">
      <div class="step-header">
        <div class="step-badge">1</div>
        <div class="step-title">Proverimo da \(A(3, 6)\) pripada paraboli</div>
      </div>
      <div class="step-content">
        <p>Parabola je data sa \(y^2 = 12x\). Uvrstimo koordinate tacke \(A(3, 6)\):</p>
        <div class="math-block">
          \[y^2 = 6^2 = 36\]
        </div>
        <div class="math-block">
          \[12x = 12 \cdot 3 = 36\]
        </div>
        <p>Posto je \(36 = 36\), tacka \(A(3, 6)\) zaista lezi na paraboli.</p>
      </div>
    </div>

    <!-- Korak 2 -->
    <div class="step">
      <div class="step-header">
        <div class="step-badge">2</div>
        <div class="step-title">Nadjimo tangentu na parabolu u tacki \(A\)</div>
      </div>
      <div class="step-content">
        <p>Diferenciramo implicitno jednacinu parabole \(y^2 = 12x\) po \(x\):</p>
        <div class="math-block">
          \[2y \cdot y' = 12 \quad \Rightarrow \quad y' = \frac{6}{y}\]
        </div>
        <p>U tacki \(A(3, 6)\), nagib tangente je:</p>
        <div class="math-block">
          \[y' = \frac{6}{6} = 1\]
        </div>
        <p>Jednacina tangente (tacka-nagib forma):</p>
        <div class="math-block">
          \[y - 6 = 1 \cdot (x - 3) \quad \Rightarrow \quad y = x + 3\]
        </div>

        <div class="checkpoint">
          <details>
            <summary>&#9989; Proveri sebe: Da li tangenta zaista dodiruje parabolu u \(A\)?</summary>
            <p style="margin-top: 8px;">
              Uvrstimo \(y = x + 3\) u \(y^2 = 12x\):
              \((x + 3)^2 = 12x\), tj. \(x^2 + 6x + 9 = 12x\), pa \(x^2 - 6x + 9 = 0\), tj. \((x - 3)^2 = 0\).
              Dvostruki koren \(x = 3\) potvrdjuje da je prava tangenta (dodiruje parabolu u jednoj tacki).
            </p>
          </details>
        </div>
      </div>
    </div>

    <!-- Korak 3 -->
    <div class="step">
      <div class="step-header">
        <div class="step-badge">3</div>
        <div class="step-title">Postavimo uslove za kruznicu</div>
      </div>
      <div class="step-content">
        <p>Centar kruznice lezi na \(x\)-osi, pa je oblika \(C(h, 0)\). Jednacina kruznice:</p>
        <div class="math-block">
          \[(x - h)^2 + y^2 = r^2\]
        </div>
        <p>Zahtevamo da prava \(y = x + 3\) bude tangenta na kruznicu <strong>u tacki \(A(3, 6)\)</strong>. To znaci:</p>
        <ul style="margin: 8px 0 8px 20px;">
          <li>Tacka \(A(3, 6)\) lezi na kruznici.</li>
          <li>Poluprecnik \(CA\) je normalan na tangentu u tacki \(A\).</li>
        </ul>
      </div>
    </div>

    <!-- Korak 4 -->
    <div class="step">
      <div class="step-header">
        <div class="step-badge">4</div>
        <div class="step-title">Odredimo centar kruznice iz uslova normalnosti</div>
      </div>
      <div class="step-content">
        <p>Tangenta ima nagib \(k_t = 1\). Poluprecnik \(CA\) mora biti normalan na tangentu, pa ima nagib:</p>
        <div class="math-block">
          \[k_{CA} = -\frac{1}{k_t} = -\frac{1}{1} = -1\]
        </div>
        <p>Nagib duzi \(CA\) iz koordinata (od \(C(h, 0)\) do \(A(3, 6)\)):</p>
        <div class="math-block">
          \[\frac{6 - 0}{3 - h} = -1\]
        </div>
        <p>Resavamo po \(h\):</p>
        <div class="math-block">
          \[6 = -(3 - h) = h - 3\]
        </div>
        <div class="math-block">
          \[h = 9\]
        </div>
        <p>Dakle, centar kruznice je <strong>\(C(9, 0)\)</strong>.</p>

        <div class="checkpoint">
          <details>
            <summary>&#9989; Proveri sebe: Da li je poluprecnik zaista normalan na tangentu?</summary>
            <p style="margin-top: 8px;">
              Nagib od \(C(9, 0)\) do \(A(3, 6)\): \(\dfrac{6 - 0}{3 - 9} = \dfrac{6}{-6} = -1\).
              Nagib tangente: \(1\). Proizvod: \((-1) \cdot 1 = -1\). Uslovi normalnosti su ispunjeni.
            </p>
          </details>
        </div>
      </div>
    </div>

    <!-- Korak 5 -->
    <div class="step">
      <div class="step-header">
        <div class="step-badge">5</div>
        <div class="step-title">Izracunamo poluprecnik</div>
      </div>
      <div class="step-content">
        <p>Posto tacka \(A(3, 6)\) lezi na kruznici sa centrom \(C(9, 0)\):</p>
        <div class="math-block">
          \[r^2 = (3 - 9)^2 + (6 - 0)^2 = (-6)^2 + 6^2 = 36 + 36 = 72\]
        </div>
        <p>Dakle, \(r^2 = 72\), sto daje \(r = 6\sqrt{2} \approx 8{,}49\).</p>
      </div>
    </div>

    <!-- Korak 6 -->
    <div class="step">
      <div class="step-header">
        <div class="step-badge">6</div>
        <div class="step-title">Zapisemo jednacinu kruznice</div>
      </div>
      <div class="step-content">
        <p>Uvrstimo \(h = 9\) i \(r^2 = 72\) u opsti oblik:</p>
        <div class="math-block">
          \[(x - 9)^2 + y^2 = 72\]
        </div>

        <div class="checkpoint">
          <details>
            <summary>&#9989; Proveri sebe: Verifikacija rastojanjem centra od tangente</summary>
            <p style="margin-top: 8px;">
              Tangenta: \(x - y + 3 = 0\). Rastojanje od \(C(9, 0)\) do ove prave:
              \[d = \frac{|9 - 0 + 3|}{\sqrt{1^2 + (-1)^2}} = \frac{12}{\sqrt{2}} = \frac{12\sqrt{2}}{2} = 6\sqrt{2}\]
              A poluprecnik: \(r = \sqrt{72} = 6\sqrt{2}\). Posto je \(d = r\), prava jeste tangenta na kruznicu.
            </p>
          </details>
        </div>
      </div>
    </div>
  </div>

  <!-- KLJUCNI UVID -->
  <div class="key-insight">
    <div class="card-title"><span class="icon">&#128161;</span> Kljucni uvid</div>
    <p>
      Kada dve krive (ovde parabola i kruznica) imaju <strong>zajednicku tangentu u istoj tacki</strong>, to znaci da obe krive prolaze kroz tu tacku i imaju isti nagib u njoj. Za kruznicu, tangenta je uvek normalna na poluprecnik &mdash; pa uslov „zajednicka tangenta u \(A\)" direktno daje pravac poluprecnika \(CA\), sto nam omogucava da nadjemo centar. Nema potrebe za slozenim sistemima jednacina!
    </p>
  </div>

  <!-- KONACAN ODGOVOR -->
  <div class="card final-answer-box">
    <div class="card-title" style="justify-content: center;"><span class="icon">&#127919;</span> Konacan odgovor</div>
    <div class="final-answer-value">\((x - 9)^2 + y^2 = 72\)</div>
    <div class="final-options">
      <div class="final-option">(A) \((x - 3)^2 + y^2 = 9\)</div>
      <div class="final-option">(B) \((x - 6)^2 + y^2 = 36\)</div>
      <div class="final-option">(C) \((x - 9)^2 + y^2 = 81\)</div>
      <div class="final-option correct-option">(D) \((x - 9)^2 + y^2 = 72\)</div>
      <div class="final-option">(E) \((x - 6)^2 + y^2 = 72\)</div>
    </div>
    <p class="verification-note">Verifikacija: \(A(3, 6)\) na kruznici: \((3-9)^2 + 36 = 36 + 36 = 72\) &#10004; &nbsp; Rastojanje centra od tangente: \(\dfrac{12}{\sqrt{2}} = 6\sqrt{2} = r\) &#10004;</p>
  </div>

  <!-- CESTE GRESKE -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9888;&#65039;</span> Ceste greske</div>
    <div class="pitfall-item">
      <span class="pitfall-icon">&#10060;</span>
      <div>
        <strong style="color: #f472b6;">Mesanje „zajednicke tangente" sa „zajednickom tackom":</strong>
        <span class="pitfall-text">
          Zajednicka tangenta u tacki \(A\) ne znaci samo da obe krive prolaze kroz \(A\), vec da i imaju isti nagib u toj tacki. Neki ucenici zaborave uslov normalnosti poluprecnika na tangentu i pokusavaju da rese samo iz uslova prolaska kroz \(A\), sto daje vise mogucih kruznica.
        </span>
      </div>
    </div>
    <div class="pitfall-item">
      <span class="pitfall-icon">&#10060;</span>
      <div>
        <strong style="color: #f472b6;">Greska pri implicitnom diferenciranju:</strong>
        <span class="pitfall-text">
          Cesta greska je zaboraviti lanacno pravilo. Iz \(y^2 = 12x\) ne sledi \(2y = 12\), vec \(2y \cdot y' = 12\). Bez \(y'\) faktora, dobija se potpuno pogresan nagib tangente.
        </span>
      </div>
    </div>
  </div>

  <!-- DODATNI IZAZOV -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127947;</span> Dodatni izazov</div>
    <p class="challenge-text">
      Sta ako je centar kruznice na \(y\)-osi umesto na \(x\)-osi? Koja bi tada bila jednacina kruznice koja sa istom parabolom \(y^2 = 12x\) u tacki \(A(3, 6)\) ima zajednicku tangentu?
    </p>
    <details>
      <summary>Nagovestaj</summary>
      <p style="margin-top: 8px;">
        Centar je oblika \(C(0, k)\). Poluprecnik \(CA\) mora imati nagib \(-1\) (normalan na tangentu \(y = x + 3\)).
        Nagib: \(\dfrac{6 - k}{3 - 0} = -1\), pa \(6 - k = -3\), tj. \(k = 9\). Centar: \(C(0, 9)\).
        Poluprecnik: \(r^2 = 3^2 + (6 - 9)^2 = 9 + 9 = 18\).
        Jednacina: \(x^2 + (y - 9)^2 = 18\).
      </p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('diagram-canvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');

  // Draggable point parameter (t for parabola parametrization)
  let dragT = 6; // y-coordinate on parabola: x = y^2/12
  let isDragging = false;

  function draw() {
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    canvas.width = rect.width * dpr;
    canvas.height = rect.height * dpr;
    ctx.scale(dpr, dpr);
    const W = rect.width;
    const H = rect.height;

    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Coordinate system
    const originX = W * 0.12;
    const originY = H * 0.55;
    const scale = Math.min(W, H) * 0.032;

    function toCanvas(x, y) {
      return { x: originX + x * scale, y: originY - y * scale };
    }

    function fromCanvas(cx, cy) {
      return { x: (cx - originX) / scale, y: (originY - cy) / scale };
    }

    // Grid
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 0.5;
    for (let gx = -2; gx <= 22; gx += 2) {
      const p = toCanvas(gx, 0);
      ctx.beginPath();
      ctx.moveTo(p.x, 10);
      ctx.lineTo(p.x, H - 10);
      ctx.stroke();
    }
    for (let gy = -10; gy <= 12; gy += 2) {
      const p = toCanvas(0, gy);
      ctx.beginPath();
      ctx.moveTo(10, p.y);
      ctx.lineTo(W - 10, p.y);
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    // x-axis
    ctx.beginPath();
    ctx.moveTo(toCanvas(-3, 0).x, toCanvas(-3, 0).y);
    ctx.lineTo(toCanvas(22, 0).x, toCanvas(22, 0).y);
    ctx.stroke();
    // y-axis
    ctx.beginPath();
    ctx.moveTo(toCanvas(0, -10).x, toCanvas(0, -10).y);
    ctx.lineTo(toCanvas(0, 12).x, toCanvas(0, 12).y);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#64748b';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    for (let gx = 2; gx <= 20; gx += 2) {
      const p = toCanvas(gx, 0);
      ctx.fillText(String(gx), p.x, p.y + 16);
    }
    ctx.textAlign = 'right';
    for (let gy = -8; gy <= 10; gy += 2) {
      if (gy === 0) continue;
      const p = toCanvas(0, gy);
      ctx.fillText(String(gy), p.x - 8, p.y + 4);
    }
    // Label axes
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    const xLbl = toCanvas(21, 0);
    ctx.textAlign = 'center';
    ctx.fillText('x', xLbl.x, xLbl.y + 18);
    const yLbl = toCanvas(0, 11);
    ctx.textAlign = 'right';
    ctx.fillText('y', yLbl.x - 10, yLbl.y + 4);

    // Draw parabola y^2 = 12x => x = y^2 / 12
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    let first = true;
    for (let yy = -10; yy <= 12; yy += 0.1) {
      const xx = (yy * yy) / 12;
      if (xx > 22) continue;
      const p = toCanvas(xx, yy);
      if (first) { ctx.moveTo(p.x, p.y); first = false; }
      else ctx.lineTo(p.x, p.y);
    }
    ctx.stroke();

    // Label parabola
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    const parLbl = toCanvas(10, 11.5);
    ctx.fillText('y\u00B2 = 12x', parLbl.x, parLbl.y);

    // Current draggable point on parabola
    const ay = dragT;
    const ax = (ay * ay) / 12;

    // Tangent at draggable point: y' = 6/y_A
    const slopeT = 6 / ay;
    // Tangent line: y - ay = slopeT * (x - ax) => y = slopeT*x + (ay - slopeT*ax)
    const interceptT = ay - slopeT * ax;

    // Circle center: slope of radius = -1/slopeT
    const slopeR = -1 / slopeT;
    // Line through A with slope slopeR: y - ay = slopeR * (x - ax)
    // At y = 0 (x-axis): -ay = slopeR * (x - ax) => x = ax - ay / slopeR
    const ch = ax - ay / slopeR;
    const r2 = (ax - ch) * (ax - ch) + ay * ay;
    const r = Math.sqrt(r2);

    // Draw circle
    const cc = toCanvas(ch, 0);
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.arc(cc.x, cc.y, r * scale, 0, 2 * Math.PI);
    ctx.stroke();

    // Draw tangent line (extended)
    ctx.strokeStyle = '#34d399';
    ctx.lineWidth = 2;
    ctx.setLineDash([8, 4]);
    const tX1 = -3;
    const tY1 = slopeT * tX1 + interceptT;
    const tX2 = 18;
    const tY2 = slopeT * tX2 + interceptT;
    const tp1 = toCanvas(tX1, tY1);
    const tp2 = toCanvas(tX2, tY2);
    ctx.beginPath();
    ctx.moveTo(tp1.x, tp1.y);
    ctx.lineTo(tp2.x, tp2.y);
    ctx.stroke();
    ctx.setLineDash([]);

    // Label tangent
    ctx.fillStyle = '#34d399';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    const tanLblP = toCanvas(12, slopeT * 12 + interceptT);
    ctx.fillText('y = x + 3', tanLblP.x + 4, tanLblP.y - 8);

    // Draw radius CA (dashed)
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2;
    ctx.setLineDash([5, 4]);
    const ap = toCanvas(ax, ay);
    ctx.beginPath();
    ctx.moveTo(cc.x, cc.y);
    ctx.lineTo(ap.x, ap.y);
    ctx.stroke();
    ctx.setLineDash([]);

    // Right angle marker at A (between tangent and radius)
    const markSize = 10;
    // Tangent direction (unit vector)
    const tLen = Math.sqrt(1 + slopeT * slopeT);
    const tdx = scale / tLen;
    const tdy = -slopeT * scale / tLen;
    // Radius direction (unit vector, from A toward C)
    const rdx = (cc.x - ap.x);
    const rdy = (cc.y - ap.y);
    const rLen = Math.sqrt(rdx * rdx + rdy * rdy);
    const rux = rdx / rLen * markSize;
    const ruy = rdy / rLen * markSize;
    const tux = tdx / Math.sqrt(tdx * tdx + tdy * tdy) * markSize;
    const tuy = tdy / Math.sqrt(tdx * tdx + tdy * tdy) * markSize;

    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(ap.x + tux, ap.y + tuy);
    ctx.lineTo(ap.x + tux + rux, ap.y + tuy + ruy);
    ctx.lineTo(ap.x + rux, ap.y + ruy);
    ctx.stroke();

    // Draw key points
    // Center C
    ctx.fillStyle = '#a78bfa';
    ctx.beginPath();
    ctx.arc(cc.x, cc.y, 5, 0, 2 * Math.PI);
    ctx.fill();
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('C(' + Math.round(ch * 10) / 10 + ', 0)', cc.x, cc.y + 20);

    // Point A (draggable)
    ctx.fillStyle = '#f472b6';
    ctx.beginPath();
    ctx.arc(ap.x, ap.y, 7, 0, 2 * Math.PI);
    ctx.fill();
    ctx.strokeStyle = '#e2e8f0';
    ctx.lineWidth = 2;
    ctx.stroke();
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('A(' + Math.round(ax * 10) / 10 + ', ' + Math.round(ay * 10) / 10 + ')', ap.x + 12, ap.y - 10);

    // Origin label
    ctx.fillStyle = '#64748b';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    const orig = toCanvas(0, 0);
    ctx.fillText('O', orig.x - 8, orig.y + 16);

    // Focus label
    const focus = toCanvas(3, 0);
    ctx.fillStyle = '#60a5fa';
    ctx.beginPath();
    ctx.arc(focus.x, focus.y, 3, 0, 2 * Math.PI);
    ctx.fill();
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('F(3, 0)', focus.x, focus.y - 10);

    // Circle label
    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    const circLbl = toCanvas(ch, -r * 0.75);
    ctx.fillText('(x \u2212 9)\u00B2 + y\u00B2 = 72', circLbl.x, circLbl.y + 14);

    // Radius length label
    ctx.fillStyle = '#f472b6';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    const rMid = { x: (cc.x + ap.x) / 2, y: (cc.y + ap.y) / 2 };
    ctx.fillText('r = 6\u221A2', rMid.x + 15, rMid.y - 8);
  }

  // Event handling
  function getPos(e) {
    const rect = canvas.getBoundingClientRect();
    const clientX = e.touches ? e.touches[0].clientX : e.clientX;
    const clientY = e.touches ? e.touches[0].clientY : e.clientY;
    return { x: clientX - rect.left, y: clientY - rect.top };
  }

  function getScale() {
    const rect = canvas.getBoundingClientRect();
    return Math.min(rect.width, rect.height) * 0.032;
  }

  function toMath(cx, cy) {
    const rect = canvas.getBoundingClientRect();
    const originX = rect.width * 0.12;
    const originY = rect.height * 0.55;
    const s = getScale();
    return { x: (cx - originX) / s, y: (originY - cy) / s };
  }

  function handleStart(e) {
    const pos = getPos(e);
    const m = toMath(pos.x, pos.y);
    // Check if near the current point A
    const ax = (dragT * dragT) / 12;
    const ay = dragT;
    const dist = Math.sqrt((m.x - ax) * (m.x - ax) + (m.y - ay) * (m.y - ay));
    if (dist < 2) {
      isDragging = true;
      e.preventDefault();
    }
  }

  function handleMove(e) {
    if (!isDragging) return;
    e.preventDefault();
    const pos = getPos(e);
    const m = toMath(pos.x, pos.y);
    // Snap to parabola: nearest point on y^2 = 12x by y-value
    let newY = m.y;
    if (newY < 1) newY = 1; // keep above x-axis for meaningful tangent
    if (newY > 11) newY = 11;
    dragT = newY;
    draw();
  }

  function handleEnd() {
    isDragging = false;
  }

  canvas.addEventListener('mousedown', handleStart);
  canvas.addEventListener('mousemove', handleMove);
  canvas.addEventListener('mouseup', handleEnd);
  canvas.addEventListener('mouseleave', handleEnd);
  canvas.addEventListener('touchstart', handleStart, { passive: false });
  canvas.addEventListener('touchmove', handleMove, { passive: false });
  canvas.addEventListener('touchend', handleEnd);

  draw();
  window.addEventListener('resize', draw);
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Jednacina kruznice tangentne na parabolu u datoj tacki",
  "subject": "math",
  "unit": "geometry",
  "topic_tags": ["analiticka geometrija", "kruznica", "parabola", "tangenta", "implicitno diferenciranje", "uslov normalnosti"]
}
BRAINSPARK_META-->