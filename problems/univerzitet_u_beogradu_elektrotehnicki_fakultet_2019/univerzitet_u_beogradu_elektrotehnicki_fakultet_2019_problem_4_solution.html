<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Izvod proizvoda linearnih faktora</title>
<script type="text/info" id="logic-scratchpad">
Problem: f(x) = x(x+1)(x+2)(x+3)(x+4), find f'(-2).

f(x) is a product of 5 linear factors:
  f_1 = x, f_2 = x+1, f_3 = x+2, f_4 = x+3, f_5 = x+4

By the generalized product rule for n factors:
  f'(x) = sum_{k=1}^{5} [ product_{j != k} f_j(x) ]

  f'(x) = (x+1)(x+2)(x+3)(x+4)       [term where we differentiated x]
         + x(x+2)(x+3)(x+4)            [term where we differentiated (x+1)]
         + x(x+1)(x+3)(x+4)            [term where we differentiated (x+2)]
         + x(x+1)(x+2)(x+4)            [term where we differentiated (x+3)]
         + x(x+1)(x+2)(x+3)            [term where we differentiated (x+4)]

At x = -2:
  f_1(-2) = -2 (not zero)
  f_2(-2) = -1 (not zero)
  f_3(-2) = 0  (ZERO!)
  f_4(-2) = 1  (not zero)
  f_5(-2) = 2  (not zero)

Key insight: x = -2 is a root of f(x) through the factor (x+2).
When evaluating f'(-2), any term in the sum that still contains the factor (x+2) will be zero.

Looking at the 5 terms:
  Term 1: (x+1)(x+2)(x+3)(x+4) — contains (x+2) → 0
  Term 2: x(x+2)(x+3)(x+4)     — contains (x+2) → 0
  Term 3: x(x+1)(x+3)(x+4)     — does NOT contain (x+2) → SURVIVES
  Term 4: x(x+1)(x+2)(x+4)     — contains (x+2) → 0
  Term 5: x(x+1)(x+2)(x+3)     — contains (x+2) → 0

Only Term 3 survives:
  f'(-2) = (-2)(-2+1)(-2+3)(-2+4)
         = (-2)(-1)(1)(2)
         = (-2)(-1) * (1)(2)
         = 2 * 2
         = 4

Answer: (D) 4

Verification: We can also check by writing f(x) = x(x+4) * (x+1)(x+3) * (x+2)
  = (x^2 + 4x)(x^2 + 4x + 3)(x + 2)
  Let u = x^2 + 4x, then f(x) = u(u+3)(x+2)
  At x = -2: u = 4 - 8 = -4, x+2 = 0
  f(x) = u(u+3)(x+2)
  f'(x) = u'(u+3)(x+2) + u·(u+3)'·(x+2) + u(u+3)·1
        where u' = 2x+4
  At x=-2: u = -4, u+3 = -1, x+2 = 0, u' = 0
  f'(-2) = 0·(-1)·0 + (-4)·0·0 + (-4)(-1)·1 = 4 ✓
</script>
<script>
MathJax={tex:{inlineMath:[['\\(','\\)'],['$','$']],displayMath:[['\\[','\\]']]},svg:{fontCache:'global'}};
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#0f172a;color:#e2e8f0;font-family:'Segoe UI',system-ui,-apple-system,sans-serif;line-height:1.7;padding:20px;max-width:860px;margin:0 auto}
h1{background:linear-gradient(135deg,#60a5fa,#a78bfa);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;font-size:1.9rem;margin-bottom:6px;line-height:1.3}
h2{color:#60a5fa;font-size:1.25rem;margin-bottom:12px;display:flex;align-items:center;gap:8px}
.subtitle{color:#94a3b8;font-size:1.05rem;margin-bottom:28px}
.card{background:#1e293b;border:1px solid #334155;border-radius:14px;padding:22px;margin-bottom:20px}
.problem-statement{border-left:4px solid #a78bfa}
.problem-statement p{font-size:1.08rem;margin-bottom:12px}
.given-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:10px;margin-top:14px}
.given-item{background:#0f172a;border:1px solid #334155;border-radius:10px;padding:10px 14px;text-align:center;font-size:1.05rem}
.given-item .label{color:#94a3b8;font-size:0.85rem;margin-bottom:4px}
.given-item .value{color:#e2e8f0;font-size:1.1rem}
.given-item.answer-option{cursor:default;transition:border-color 0.2s}
.badge{display:inline-block;background:linear-gradient(135deg,#60a5fa,#a78bfa);color:#0f172a;font-weight:700;font-size:0.82rem;padding:3px 10px;border-radius:20px;margin-right:8px}
.step{margin-bottom:18px;padding:8px 0 8px 12px;border-left:3px solid transparent;border-radius:4px;transition:border-color 0.2s,background 0.2s;cursor:pointer}
.step:hover,.step.active{border-left-color:#34d399;background:rgba(52,211,153,0.04)}
.step p,.step div{margin-top:8px}
details{background:#0f172a;border:1px solid #334155;border-radius:10px;margin:15px 0;padding:14px 18px}
details summary{cursor:pointer;color:#60a5fa;font-weight:600;user-select:none}
details summary:hover{color:#93c5fd}
details[open] summary{margin-bottom:10px}
.theory-card{border-left:4px solid #a78bfa}
.plan-card{border-left:4px solid #60a5fa}
.insight-card{border-left:4px solid #f472b6;background:linear-gradient(135deg,#1e293b,#2a1f3d)}
.final-answer{border:2px solid #34d399;background:linear-gradient(135deg,#1e293b,#1a2e2a)}
.final-answer .answer-value{font-size:1.5rem;color:#4ade80;text-align:center;margin:14px 0;font-weight:700}
.final-options{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:10px;margin:14px 0}
.final-option{background:#0f172a;border:1px solid #334155;border-radius:10px;padding:10px 14px;text-align:center;font-size:1.05rem}
.final-option.correct{border-color:#34d399;background:rgba(52,211,153,0.1)}
.final-option.correct .value{color:#4ade80;font-weight:700}
.pitfall{background:#1e293b;border-left:4px solid #e09468;border-radius:0 10px 10px 0;padding:14px 18px;margin-bottom:10px}
.pitfall-title{color:#e09468;font-weight:700;margin-bottom:4px}
.challenge-card{border:1px dashed #a78bfa;background:linear-gradient(135deg,#1e293b,#1f2347)}
.math-box{background:rgba(56,189,248,0.08);border:1px solid rgba(56,189,248,0.15);border-radius:8px;padding:12px 16px;margin:8px 0}
.muted{color:#94a3b8}
.highlight-pink{color:#f472b6;font-weight:600}
.highlight-green{color:#4ade80;font-weight:600}
.highlight-blue{color:#60a5fa;font-weight:600}
canvas{display:block;margin:0 auto;border-radius:10px;background:#0c1222;max-width:100%;touch-action:none}
.canvas-wrap{text-align:center}
.slider-wrap{display:flex;align-items:center;gap:12px;margin-top:12px;justify-content:center;flex-wrap:wrap}
.slider-wrap label{color:#94a3b8;font-size:0.9rem}
.slider-wrap input[type="range"]{accent-color:#60a5fa;width:200px}
.slider-wrap .slider-value{color:#60a5fa;font-weight:600;min-width:50px;text-align:center}
@media(max-width:700px){body{padding:12px}h1{font-size:1.45rem}.given-grid,.final-options{grid-template-columns:1fr 1fr}.slider-wrap input[type="range"]{width:140px}}
</style>
</head>
<body>

<h1>Izvod proizvoda linearnih faktora</h1>
<p class="subtitle">Diferenciranje, proizvod pet linearnih funkcija i generalizovano pravilo proizvoda</p>

<!-- Problem Statement -->
<div class="card problem-statement">
<h2>Zadatak</h2>
<p>Ako je</p>
\[f(x) = x(x + 1)(x + 2)(x + 3)(x + 4)\]
<p>onda je \(f'(-2)\) jednako:</p>
<div class="given-grid">
<div class="given-item answer-option" data-option="A">
<div class="label">(A)</div>
<div class="value">\(0\)</div>
</div>
<div class="given-item answer-option" data-option="B">
<div class="label">(B)</div>
<div class="value">\(1\)</div>
</div>
<div class="given-item answer-option" data-option="C">
<div class="label">(C)</div>
<div class="value">\(-1\)</div>
</div>
<div class="given-item answer-option" data-option="D">
<div class="label">(D)</div>
<div class="value">\(4\)</div>
</div>
<div class="given-item answer-option" data-option="E">
<div class="label">(E)</div>
<div class="value">\(-4\)</div>
</div>
</div>
</div>

<!-- Plan -->
<div class="card plan-card">
<h2>Plan resavanja</h2>
<p>Funkcija \(f(x)\) je proizvod pet linearnih faktora. Koristicemo <strong>generalizovano pravilo proizvoda</strong> za diferenciranje, a zatim iskoristiti cinjenicu da je \(x = -2\) nula jednog od faktora &mdash; sto ce nam drasticno pojednostaviti racunanje jer vecina clanova nestaje.</p>
</div>

<!-- Theory Refresher -->
<div class="card theory-card">
<details>
<summary>Kljucne formule i teoreme</summary>
<div style="margin-top:10px">
<p><strong>Pravilo proizvoda za dva faktora:</strong></p>
\[(u \cdot v)' = u'v + uv'\]

<p style="margin-top:12px"><strong>Generalizovano pravilo proizvoda za \(n\) faktora:</strong></p>
<p>Ako je \(f(x) = f_1(x) \cdot f_2(x) \cdots f_n(x)\), onda je:</p>
\[f'(x) = \sum_{k=1}^{n} \left(\prod_{j \neq k} f_j(x)\right) \cdot f_k'(x)\]
<p>Drugim recima, diferenciramo svaki faktor po jednom, a ostale ostavimo netaknute, pa saberemo sve takve clanove.</p>

<p style="margin-top:12px"><strong>Kljucna osobina:</strong> Ako je \(f_k(a) = 0\) za tacno jedan \(k\), onda pri racunanju \(f'(a)\) prezivljava <em>samo</em> onaj clan u kome je faktor \(f_k\) diferenciran (jer svi ostali clanovi i dalje sadrze \(f_k(a) = 0\)).</p>

<p style="margin-top:12px"><strong>Izvod linearne funkcije:</strong></p>
\[(x + c)' = 1\]
</div>
</details>
</div>

<!-- Visual Aid / Interactive Diagram -->
<div class="card">
<h2>Vizuelni prikaz</h2>
<div class="canvas-wrap">
<canvas id="mainCanvas" width="800" height="460"></canvas>
</div>
<div class="slider-wrap">
<label for="xSlider">\(x =\)</label>
<input type="range" id="xSlider" min="-5" max="1" step="0.05" value="-2">
<span class="slider-value" id="xValue">-2,00</span>
</div>
<p class="muted" style="text-align:center;margin-top:8px;font-size:0.88rem">Pomeri klizac da vidis kako se menja vrednost \(f(x)\) i nagib tangente. Za \(x = -2\) funkcija prolazi kroz nulu.</p>
</div>

<!-- Step-by-Step Solution -->
<div class="card">
<h2>Resenje korak po korak</h2>

<div class="step" id="step1">
<p><span class="badge">Korak 1</span> <strong>Identifikujemo faktore</strong></p>
<p>Funkcija \(f(x)\) je proizvod pet linearnih faktora:</p>
\[f(x) = \underbrace{x}_{f_1} \cdot \underbrace{(x+1)}_{f_2} \cdot \underbrace{(x+2)}_{f_3} \cdot \underbrace{(x+3)}_{f_4} \cdot \underbrace{(x+4)}_{f_5}\]
<p>Svaki od ovih faktora je linearna funkcija, pa je izvod svakog jednak \(1\).</p>
</div>

<div class="step" id="step2">
<p><span class="badge">Korak 2</span> <strong>Primenjujemo generalizovano pravilo proizvoda</strong></p>
<p>Kada diferenciramo proizvod \(n\) faktora, dobijamo sumu od \(n\) clanova. U svakom clanu, jedan faktor se zameni svojim izvodom (koji je \(1\)), a svi ostali ostaju nepromenjeni:</p>
\[f'(x) = \underbrace{(x+1)(x+2)(x+3)(x+4)}_{\text{diferenciran } f_1}\]
\[+ \underbrace{x \cdot (x+2)(x+3)(x+4)}_{\text{diferenciran } f_2}\]
\[+ \underbrace{x(x+1) \cdot (x+3)(x+4)}_{\text{diferenciran } f_3}\]
\[+ \underbrace{x(x+1)(x+2) \cdot (x+4)}_{\text{diferenciran } f_4}\]
\[+ \underbrace{x(x+1)(x+2)(x+3)}_{\text{diferenciran } f_5}\]
</div>

<details>
<summary>Proveri sebe: Koliko clanova ima zbir za \(f'(x)\)?</summary>
<p>Tacno <strong>5 clanova</strong> &mdash; po jedan za svaki faktor koji diferenciramo. U opstem slucaju, proizvod \(n\) faktora daje \(n\) clanova u izvodu.</p>
</details>

<div class="step" id="step3">
<p><span class="badge">Korak 3</span> <strong>Uocavamo sta se desava za \(x = -2\)</strong></p>
<p>Izracunajmo vrednosti svakog faktora u tacki \(x = -2\):</p>
<div class="math-box">
\[\begin{align}
f_1(-2) &= -2 \\
f_2(-2) &= -2 + 1 = -1 \\
f_3(-2) &= -2 + 2 = \color{#f472b6}{0} \\
f_4(-2) &= -2 + 3 = 1 \\
f_5(-2) &= -2 + 4 = 2
\end{align}\]
</div>
<p>Faktor \(f_3 = (x + 2)\) je jednak <span class="highlight-pink">nuli</span> za \(x = -2\). To znaci da ce svaki clan u zbiru koji i dalje sadrzi faktor \((x+2)\) biti jednak nuli!</p>
</div>

<div class="step" id="step4">
<p><span class="badge">Korak 4</span> <strong>Eliminisemo clanove koji sadrze nula-faktor</strong></p>
<p>Pogledajmo svih pet clanova i proverimo koji sadrze faktor \((x+2)\):</p>
<div class="math-box">
<p><span class="highlight-blue">Clan 1:</span> \((x+1)\color{#f472b6}{(x+2)}(x+3)(x+4)\) &mdash; sadrzi \((x+2)\) &rarr; <strong>= 0</strong></p>
<p><span class="highlight-blue">Clan 2:</span> \(x \cdot \color{#f472b6}{(x+2)}(x+3)(x+4)\) &mdash; sadrzi \((x+2)\) &rarr; <strong>= 0</strong></p>
<p><span class="highlight-green">Clan 3:</span> \(x(x+1) \cdot (x+3)(x+4)\) &mdash; <strong>ne sadrzi</strong> \((x+2)\) &rarr; <strong>prezivljava!</strong></p>
<p><span class="highlight-blue">Clan 4:</span> \(x(x+1)\color{#f472b6}{(x+2)} \cdot (x+4)\) &mdash; sadrzi \((x+2)\) &rarr; <strong>= 0</strong></p>
<p><span class="highlight-blue">Clan 5:</span> \(x(x+1)\color{#f472b6}{(x+2)}(x+3)\) &mdash; sadrzi \((x+2)\) &rarr; <strong>= 0</strong></p>
</div>
<p>Od pet clanova, samo <span class="highlight-green">Clan 3</span> ne sadrzi faktor \((x + 2)\), pa jedino on daje doprinos razlicit od nule.</p>
</div>

<details>
<summary>Proveri sebe: Zasto bas Clan 3 prezivljava?</summary>
<p>Clan 3 nastaje tako sto diferenciramo upravo faktor \(f_3 = (x+2)\). Posto smo ga zamenili njegovim izvodom (koji je \(1\)), on vise nije prisutan kao faktor u tom clanu. Zato Clan 3 nema faktor \((x+2)\) i jedini ne iscezava za \(x = -2\).</p>
</details>

<div class="step" id="step5">
<p><span class="badge">Korak 5</span> <strong>Izracunavamo jedini preostali clan</strong></p>
<p>Ubacujemo \(x = -2\) u Clan 3:</p>
\[f'(-2) = (-2)(-2+1)(-2+3)(-2+4)\]
\[= (-2)(-1)(1)(2)\]
<p>Racunamo korak po korak:</p>
\[(-2) \cdot (-1) = 2\]
\[2 \cdot 1 = 2\]
\[2 \cdot 2 = 4\]
<p>Dakle:</p>
\[\boxed{f'(-2) = 4}\]
</div>

<details>
<summary>Proveri sebe: Moze li se ovaj rezultat proveriti na drugi nacin?</summary>
<p>Da! Mozemo grupisati faktore simetricno: \(f(x) = x(x+4) \cdot (x+1)(x+3) \cdot (x+2) = (x^2+4x)(x^2+4x+3)(x+2)\). Ako uvedemo \(u = x^2+4x\), onda za \(x=-2\) imamo \(u = 4-8 = -4\), \(u+3 = -1\) i \(x+2 = 0\). Izvod: \(f'(x) = u'(u+3)(x+2) + u \cdot u'(x+2) + u(u+3)\), gde je \(u' = 2x+4 = 0\) za \(x=-2\). Dakle: \(f'(-2) = 0 + 0 + (-4)(-1) = 4\). Isti rezultat!</p>
</details>
</div>

<!-- Key Insight -->
<div class="card insight-card">
<h2>Kljucni uvid</h2>
<p>Kada trazimo izvod proizvoda u tacki koja je <strong>jednostruka nula</strong> jednog od faktora, ne moramo racunati svih \(n\) clanova &mdash; prezivljava samo jedan! Konkretno, ako je \(f(x) = f_1 \cdot f_2 \cdots f_n\) i \(f_k(a) = 0\) dok su svi ostali faktori razliciti od nule, tada:</p>
\[f'(a) = \prod_{j \neq k} f_j(a)\]
<p style="text-align:center;font-size:1.3rem;color:#4ade80;margin-top:12px;font-weight:700">\(f'(-2) = (-2)(-1)(1)(2) = 4\)</p>
</div>

<!-- Final Answer -->
<div class="card final-answer">
<h2>Konacan odgovor</h2>
<div class="answer-value">(D) \(4\)</div>
<div class="final-options">
<div class="final-option" data-option="A">
<div class="label" style="color:#94a3b8;font-size:0.85rem">(A)</div>
<div class="value">\(0\)</div>
</div>
<div class="final-option" data-option="B">
<div class="label" style="color:#94a3b8;font-size:0.85rem">(B)</div>
<div class="value">\(1\)</div>
</div>
<div class="final-option" data-option="C">
<div class="label" style="color:#94a3b8;font-size:0.85rem">(C)</div>
<div class="value">\(-1\)</div>
</div>
<div class="final-option correct" data-option="D">
<div class="label" style="color:#94a3b8;font-size:0.85rem">(D)</div>
<div class="value">\(4\)</div>
</div>
<div class="final-option" data-option="E">
<div class="label" style="color:#94a3b8;font-size:0.85rem">(E)</div>
<div class="value">\(-4\)</div>
</div>
</div>
<p style="margin-top:12px"><strong>Verifikacija:</strong> Numericki, mozemo izracunati \(f(-2{,}001)\) i \(f(-1{,}999)\) i proveriti nagib:</p>
\[f(-1{,}999) = (-1{,}999)(-0{,}999)(0{,}001)(1{,}001)(2{,}001) \approx 0{,}004\]
\[f(-2{,}001) = (-2{,}001)(-1{,}001)(-0{,}001)(0{,}999)(1{,}999) \approx -0{,}004\]
\[f'(-2) \approx \frac{0{,}004 - (-0{,}004)}{0{,}002} = \frac{0{,}008}{0{,}002} = 4 \quad \checkmark\]
</div>

<!-- Pitfalls -->
<div class="card">
<h2>Ceste greske</h2>
<div class="pitfall">
<p class="pitfall-title">Zakljucak da je \(f'(-2) = 0\) jer je \(f(-2) = 0\)</p>
<p>To sto funkcija prolazi kroz nulu u nekoj tacki <strong>ne</strong> znaci da joj je i izvod nula u toj tacki. Izvod meri nagib, a funkcija moze prolaziti kroz nulu sa nenultim nagibom. Samo u slucaju da je \(x = -2\) vissestruka nula (npr. dupla) bi izvod bio nula &mdash; ali ovde je to jednostruka nula.</p>
</div>
<div class="pitfall">
<p class="pitfall-title">Greska u znaku pri mnozenju negativnih brojeva</p>
<p>Rezultat \((-2)(-1)(1)(2)\) sadrzi dva negativna broja, pa je proizvod pozitivan: \((-2)(-1) = +2\), a zatim \(2 \cdot 1 \cdot 2 = 4\). Cesta greska je dobiti \(-4\) umesto \(4\) zbog pogresnog brojanja minusa.</p>
</div>
</div>

<!-- Challenge -->
<div class="card challenge-card">
<h2>Izazov za razmisljanje</h2>
<p>Ako umesto izvoda u jednostrukoj nuli trazimo izvod u tacki gde <em>dva</em> faktora iscezavaju, sta se desava?</p>
<p>Na primer, neka je \(g(x) = (x-1)^2(x+3)(x-5)\). Koliko je \(g'(1)\)?</p>
<details>
<summary>Nagovstaj</summary>
<p>Posto je \(x = 1\) <em>dvostruka</em> nula (faktor \((x-1)^2\)), svaki clan u zbiru ce i dalje sadrzati bar jedan faktor \((x-1)\), pa ce \(g'(1) = 0\). Ovo je u skladu sa tim da graf dodiruje \(x\)-osu u \(x = 1\) (tangenta je horizontalna).</p>
</details>
</div>

<script>
(() => {
  const canvas = document.getElementById('mainCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  const slider = document.getElementById('xSlider');
  const xValueEl = document.getElementById('xValue');

  let currentX = -2;

  function f(x) {
    return x * (x + 1) * (x + 2) * (x + 3) * (x + 4);
  }

  function fPrime(x) {
    const f1 = x, f2 = x + 1, f3 = x + 2, f4 = x + 3, f5 = x + 4;
    return f2 * f3 * f4 * f5 + f1 * f3 * f4 * f5 + f1 * f2 * f4 * f5 + f1 * f2 * f3 * f5 + f1 * f2 * f3 * f4;
  }

  // Coordinate system
  const originX = 380;
  const originY = 280;
  const scaleX = 70;
  const scaleY = 0.9;

  function toCanvas(x, y) {
    return {
      x: originX + x * scaleX,
      y: originY - y * scaleY
    };
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Grid lines
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (let gx = -6; gx <= 3; gx++) {
      const p = toCanvas(gx, 0);
      ctx.beginPath();
      ctx.moveTo(p.x, 20);
      ctx.lineTo(p.x, H - 20);
      ctx.stroke();
    }
    for (let gy = -150; gy <= 150; gy += 30) {
      const p = toCanvas(0, gy);
      if (p.y > 20 && p.y < H - 20) {
        ctx.beginPath();
        ctx.moveTo(20, p.y);
        ctx.lineTo(W - 20, p.y);
        ctx.stroke();
      }
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 2;
    // X-axis
    ctx.beginPath();
    ctx.moveTo(20, originY);
    ctx.lineTo(W - 20, originY);
    ctx.stroke();
    // Y-axis
    ctx.beginPath();
    ctx.moveTo(originX, 20);
    ctx.lineTo(originX, H - 20);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    for (let gx = -5; gx <= 2; gx++) {
      if (gx === 0) continue;
      const p = toCanvas(gx, 0);
      ctx.fillText(String(gx), p.x, originY + 6);
    }
    ctx.textAlign = 'right';
    ctx.textBaseline = 'middle';
    for (let gy = -120; gy <= 120; gy += 60) {
      if (gy === 0) continue;
      const p = toCanvas(0, gy);
      if (p.y > 30 && p.y < H - 30) {
        ctx.fillText(String(gy), originX - 8, p.y);
      }
    }

    // Draw f(x) curve
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    let first = true;
    for (let px = 20; px < W - 20; px++) {
      const xVal = (px - originX) / scaleX;
      const yVal = f(xVal);
      const py = originY - yVal * scaleY;
      if (py < -200 || py > H + 200) {
        first = true;
        continue;
      }
      if (first) {
        ctx.moveTo(px, py);
        first = false;
      } else {
        ctx.lineTo(px, py);
      }
    }
    ctx.stroke();

    // Label curve
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 14px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    const labelPt = toCanvas(-4.8, f(-4.8));
    if (labelPt.y > 30 && labelPt.y < H - 30) {
      ctx.fillText('f(x)', labelPt.x + 8, labelPt.y - 10);
    }

    // Mark roots
    const roots = [0, -1, -2, -3, -4];
    roots.forEach(function(r) {
      const p = toCanvas(r, 0);
      ctx.fillStyle = (r === -2) ? '#f472b6' : '#94a3b8';
      ctx.beginPath();
      ctx.arc(p.x, p.y, (r === -2) ? 6 : 4, 0, 2 * Math.PI);
      ctx.fill();
      if (r === -2) {
        ctx.fillStyle = '#f472b6';
        ctx.font = 'bold 13px Segoe UI, sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('x = -2', p.x, p.y + 20);
      }
    });

    // Tangent line at currentX
    const fx = f(currentX);
    const fpx = fPrime(currentX);
    const pt = toCanvas(currentX, fx);

    // Draw tangent
    ctx.strokeStyle = '#34d399';
    ctx.lineWidth = 2;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    const tLen = 1.5;
    const t1 = toCanvas(currentX - tLen, fx - fpx * tLen);
    const t2 = toCanvas(currentX + tLen, fx + fpx * tLen);
    ctx.moveTo(t1.x, t1.y);
    ctx.lineTo(t2.x, t2.y);
    ctx.stroke();
    ctx.setLineDash([]);

    // Point on curve
    if (pt.y > 10 && pt.y < H - 10) {
      // Glow
      const grad = ctx.createRadialGradient(pt.x, pt.y, 0, pt.x, pt.y, 18);
      grad.addColorStop(0, 'rgba(52,211,153,0.4)');
      grad.addColorStop(1, 'rgba(52,211,153,0)');
      ctx.fillStyle = grad;
      ctx.beginPath();
      ctx.arc(pt.x, pt.y, 18, 0, 2 * Math.PI);
      ctx.fill();

      ctx.fillStyle = '#4ade80';
      ctx.beginPath();
      ctx.arc(pt.x, pt.y, 5, 0, 2 * Math.PI);
      ctx.fill();
    }

    // Info box
    ctx.fillStyle = 'rgba(15,23,42,0.9)';
    const boxX = 20;
    const boxY = 16;
    const boxW = 220;
    const boxH = 82;
    ctx.beginPath();
    ctx.moveTo(boxX + 8, boxY);
    ctx.lineTo(boxX + boxW - 8, boxY);
    ctx.quadraticCurveTo(boxX + boxW, boxY, boxX + boxW, boxY + 8);
    ctx.lineTo(boxX + boxW, boxY + boxH - 8);
    ctx.quadraticCurveTo(boxX + boxW, boxY + boxH, boxX + boxW - 8, boxY + boxH);
    ctx.lineTo(boxX + 8, boxY + boxH);
    ctx.quadraticCurveTo(boxX, boxY + boxH, boxX, boxY + boxH - 8);
    ctx.lineTo(boxX, boxY + 8);
    ctx.quadraticCurveTo(boxX, boxY, boxX + 8, boxY);
    ctx.closePath();
    ctx.fill();
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.stroke();

    ctx.font = '13px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    ctx.textBaseline = 'top';

    var xStr = currentX.toFixed(2).replace('.', ',');
    var fStr = fx.toFixed(2).replace('.', ',');
    var fpStr = fpx.toFixed(2).replace('.', ',');

    ctx.fillStyle = '#94a3b8';
    ctx.fillText('x = ', boxX + 12, boxY + 12);
    ctx.fillStyle = '#e2e8f0';
    ctx.fillText(xStr, boxX + 42, boxY + 12);

    ctx.fillStyle = '#94a3b8';
    ctx.fillText('f(x) = ', boxX + 12, boxY + 34);
    ctx.fillStyle = '#60a5fa';
    ctx.fillText(fStr, boxX + 62, boxY + 34);

    ctx.fillStyle = '#94a3b8';
    ctx.fillText("f'(x) = ", boxX + 12, boxY + 56);
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 13px Segoe UI, sans-serif';
    ctx.fillText(fpStr, boxX + 62, boxY + 56);

    // Highlight f'(-2) = 4
    if (Math.abs(currentX - (-2)) < 0.03) {
      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 16px Segoe UI, sans-serif';
      ctx.textAlign = 'center';
      var hlPt = toCanvas(-2, 0);
      ctx.fillText("f'(-2) = 4", hlPt.x, hlPt.y + 40);
    }

    // Title
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Graf funkcije f(x) = x(x+1)(x+2)(x+3)(x+4) sa tangentom', W / 2, H - 12);
  }

  function formatDecimal(n) {
    return n.toFixed(2).replace('.', ',');
  }

  function onSliderChange() {
    currentX = parseFloat(slider.value);
    xValueEl.textContent = formatDecimal(currentX);
    draw();
  }

  slider.addEventListener('input', onSliderChange);

  // Touch support for slider is handled natively

  draw();
})();
</script>

<script>
(() => {
  // Step click highlighting
  var steps = document.querySelectorAll('.step');
  steps.forEach(function(step) {
    step.addEventListener('click', function() {
      steps.forEach(function(s) { s.classList.remove('active'); });
      step.classList.add('active');
    });
  });
})();
</script>

</body>
</html>
<!--BRAINSPARK_META{"title":"Izvod proizvoda linearnih faktora u nuli funkcije","subject":"math","unit":"calculus","topic_tags":["izvod","pravilo proizvoda","proizvod linearnih faktora","nula funkcije","diferenciranje"]}BRAINSPARK_META-->