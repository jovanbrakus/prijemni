<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Granična vrednost proizvoda razlomka i trigonometrijsko-logaritamskog izraza</title>
<script>MathJax={tex:{inlineMath:[['\\(','\\)'],['$','$']],displayMath:[['\\[','\\]']]},svg:{fontCache:'global'}};</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<script type="text/info" id="logic-scratchpad">
Zadatak: Izračunati lim_{x->3} [ (x³-6x²+11x-6)/(x²-6x+9) · sin(x-3)/(ln(2x-5)+cos(π/x)) ]

KORAK 1: Faktorizacija polinoma.
  Brojilac prvog razlomka: x³ - 6x² + 11x - 6
    Probamo x=1: 1 - 6 + 11 - 6 = 0 ✓ → (x-1) je faktor
    x³ - 6x² + 11x - 6 = (x-1)(x² - 5x + 6) = (x-1)(x-2)(x-3)

  Imenilac prvog razlomka: x² - 6x + 9 = (x-3)²

KORAK 2: Pojednostavljivanje.
  (x-1)(x-2)(x-3) / (x-3)² = (x-1)(x-2) / (x-3)

  Ceo izraz postaje:
  [(x-1)(x-2) / (x-3)] · [sin(x-3) / (ln(2x-5) + cos(π/x))]
  = (x-1)(x-2) · sin(x-3) / [(x-3) · (ln(2x-5) + cos(π/x))]

KORAK 3: Analiza za x → 3.
  Uvedimo smenu t = x - 3, t → 0:
  - (x-1)(x-2) → (3-1)(3-2) = 2·1 = 2
  - sin(x-3) = sin(t) ~ t za t → 0
  - x - 3 = t
  - ln(2x-5) = ln(2(3+t)-5) = ln(1+2t) ~ 2t za t → 0
  - cos(π/x) = cos(π/(3+t)) → cos(π/3) = 1/2

KORAK 4: Izračunavanje limesa.
  lim = 2 · [sin(t)/t] / [ln(1+2t)/t + cos(π/(3+t))/1]

  Čekaj, bolje je ovako:
  = lim (x-1)(x-2) · [sin(x-3)/(x-3)] · 1/(ln(2x-5) + cos(π/x))

  sin(x-3)/(x-3) → 1 (poznati limes)
  (x-1)(x-2) → 2
  ln(2·3-5) + cos(π/3) = ln(1) + 1/2 = 0 + 1/2 = 1/2

  Dakle: lim = 2 · 1 · (1/(1/2)) = 2 · 2 = 4

KORAK 5: Verifikacija.
  Numerička provera za x = 3.001:
  Brojilac: (3.001)³ - 6·(3.001)² + 11·3.001 - 6 = (2.001)(1.001)(0.001) = 0.002003001
  Imenilac: (3.001)² - 6·3.001 + 9 = 0.000001
  Prvi razlomak: 0.002003001 / 0.000001 = 2003.001

  sin(0.001) = 0.0009999998...
  ln(2·3.001 - 5) + cos(π/3.001) = ln(1.002) + cos(1.04652...) ≈ 0.001998 + 0.49983 ≈ 0.50183
  Drugi razlomak: 0.001 / 0.50183 ≈ 0.001993

  Proizvod: 2003.001 · 0.001993 ≈ 3.9920 ≈ 4 ✓

Odgovor: (C) 4
</script>
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
body{background:#0f172a;color:#e2e8f0;font-family:'Segoe UI',system-ui,-apple-system,sans-serif;line-height:1.7;padding:20px;max-width:860px;margin:0 auto}
h1{font-size:1.8rem;font-weight:800;background:linear-gradient(135deg,#60a5fa,#a78bfa,#34d399);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-align:center;margin-bottom:4px}
.subtitle{text-align:center;color:#94a3b8;font-size:1rem;margin-bottom:28px}
.card{background:#1e293b;border:1px solid #334155;border-radius:14px;padding:24px;margin-bottom:20px}
.card-title{font-size:1.15rem;font-weight:700;margin-bottom:14px;display:flex;align-items:center;gap:8px}
.card-title .icon{font-size:1.3rem}
.problem-statement{border-left:4px solid #a78bfa}
.problem-statement .problem-text{font-size:1.05rem;margin-bottom:18px;line-height:1.9}
.given-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:10px;margin-top:12px}
.given-item{background:#0f172a;border:1px solid #334155;border-radius:10px;padding:10px 14px;text-align:center;font-size:1rem;cursor:default;transition:border-color 0.2s,background 0.2s}
.given-item .label{font-size:0.85rem;color:#94a3b8;font-weight:600;margin-bottom:4px}
.given-item .value{font-size:1rem;color:#e2e8f0}
.given-item[data-option].correct{border-color:#34d399;background:rgba(52,211,153,0.1)}
.given-item[data-option]:hover{border-color:#60a5fa}
.plan-card{border-left:4px solid #60a5fa}
.plan-list{list-style:none;counter-reset:plan}
.plan-list li{counter-increment:plan;padding:6px 0;padding-left:32px;position:relative}
.plan-list li::before{content:counter(plan);position:absolute;left:0;top:6px;background:#60a5fa;color:#0f172a;width:22px;height:22px;border-radius:50%;font-size:0.78rem;font-weight:700;display:flex;align-items:center;justify-content:center}
details{margin:15px 0}
details summary{cursor:pointer;color:#60a5fa;font-weight:600;padding:6px 0;user-select:none}
details summary:hover{color:#93bbfc}
details[open] summary{margin-bottom:10px}
.theory-content p{margin-bottom:10px;color:#cbd5e1}
.theory-content .formula-box{background:#0f172a;border:1px solid #334155;border-radius:10px;padding:14px 18px;margin:12px 0;text-align:center}
.canvas-wrap{display:flex;justify-content:center;padding:10px 0}
canvas{border-radius:10px;max-width:100%;touch-action:none}
.step{margin-bottom:18px;padding:8px 12px;border-radius:8px;transition:border-left 0.2s,background 0.2s;cursor:pointer;border-left:3px solid transparent}
.step:hover,.step.active{border-left:3px solid #4ade80;background:rgba(74,222,128,0.04)}
.step:last-child{margin-bottom:0}
.step-badge{display:inline-block;background:#a78bfa;color:#0f172a;font-size:0.75rem;font-weight:700;padding:3px 10px;border-radius:6px;margin-bottom:8px}
.step-content{padding-left:4px;color:#cbd5e1}
.step-content p{margin-bottom:8px}
.math-block{background:rgba(56,189,248,0.08);border:1px solid rgba(56,189,248,0.15);border-radius:10px;padding:14px 18px;margin:10px 0;text-align:center;font-family:'Courier New',monospace}
.checkpoint{background:rgba(96,165,250,0.1);border:1px solid rgba(96,165,250,0.3);border-radius:10px;padding:12px 16px;margin:15px 0;color:#93bbfc;font-weight:600}
.checkpoint summary{color:#60a5fa;font-weight:600}
.checkpoint-answer{color:#4ade80;font-weight:600;margin-top:6px}
.insight-card{border-left:4px solid #a78bfa;background:linear-gradient(135deg,#1e293b,#1e2940)}
.insight-text{color:#c4b5fd;font-size:1.02rem}
.final-answer-card{border:2px solid #34d399;background:linear-gradient(135deg,#1e293b,#162a2a)}
.final-answer-value{font-size:1.5rem;text-align:center;color:#4ade80;font-weight:700;margin:12px 0}
.final-answer-label{text-align:center;color:#34d399;font-size:0.95rem;font-weight:600}
.final-options{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:10px;margin-top:16px}
.final-option{background:#0f172a;border:1px solid #334155;border-radius:10px;padding:10px;text-align:center;font-size:1rem;transition:all 0.2s}
.final-option.correct-option{border-color:#34d399;background:rgba(52,211,153,0.12);color:#4ade80;font-weight:700}
.verification{margin-top:16px;padding:12px 16px;background:rgba(52,211,153,0.06);border:1px solid rgba(52,211,153,0.2);border-radius:10px;color:#86efac;font-size:0.92rem}
.pitfall{display:flex;gap:10px;padding:10px 0;border-bottom:1px solid #334155}
.pitfall:last-child{border-bottom:none}
.pitfall-icon{color:#f87171;font-size:1.1rem;flex-shrink:0;margin-top:2px}
.pitfall-text{color:#cbd5e1}
.challenge-card{border-left:4px solid #34d399}
.challenge-text{color:#86efac;font-style:italic}
.drag-hint{text-align:center;color:#64748b;font-size:0.82rem;margin-top:6px}
@media(max-width:700px){
  body{padding:12px}
  h1{font-size:1.4rem}
  .given-grid{grid-template-columns:repeat(auto-fit,minmax(100px,1fr))}
  .final-options{grid-template-columns:repeat(auto-fit,minmax(100px,1fr))}
}
</style>
</head>
<body>

<h1>Granična vrednost proizvoda racionalnog i trigonometrijsko-logaritamskog izraza</h1>
<p class="subtitle">Matematička analiza | Granične vrednosti, faktorizacija, ekvivalentni infinitezimali</p>

<!-- Iskaz zadatka -->
<div class="card problem-statement">
  <div class="card-title"><span class="icon">&#128220;</span> Postavka zadatka</div>
  <div class="problem-text">
    Granična vrednost
    \[
    \lim_{x \to 3} \left(\frac{x^3 - 6x^2 + 11x - 6}{x^2 - 6x + 9} \cdot \frac{\sin(x - 3)}{\ln(2x - 5) + \cos\dfrac{\pi}{x}}\right)
    \]
    jednaka je:
  </div>
  <div class="given-grid">
    <div class="given-item answer-option" data-option="A">
      <div class="label">(A)</div>
      <div class="value">\(\dfrac{8\sqrt{3}}{3}\)</div>
    </div>
    <div class="given-item answer-option" data-option="B">
      <div class="label">(B)</div>
      <div class="value">\(0\)</div>
    </div>
    <div class="given-item answer-option" data-option="C">
      <div class="label">(C)</div>
      <div class="value">\(4\)</div>
    </div>
    <div class="given-item answer-option" data-option="D">
      <div class="label">(D)</div>
      <div class="value">\(\dfrac{1}{2}\)</div>
    </div>
    <div class="given-item answer-option" data-option="E">
      <div class="label">(E)</div>
      <div class="value">\(+\infty\)</div>
    </div>
  </div>
</div>

<!-- Plan rešavanja -->
<div class="card plan-card">
  <div class="card-title"><span class="icon">&#128204;</span> Plan rešavanja</div>
  <ol class="plan-list">
    <li>Faktorizovati polinom u brojiocu i imeniocu prvog razlomka, pa skratiti zajedničke faktore</li>
    <li>Primeniti poznati limes \(\lim_{t \to 0} \frac{\sin t}{t} = 1\) da eliminišemo singularitet</li>
    <li>Izračunati graničnu vrednost imenioca drugog razlomka direktnom zamenom</li>
  </ol>
</div>

<!-- Teorija -->
<div class="card">
  <div class="card-title"><span class="icon">&#128218;</span> Teorijska osnova</div>
  <details>
    <summary>&#128208; Ključne formule i teoreme</summary>
    <div class="theory-content">
      <p><strong>Faktorizacija polinoma:</strong> Polinom trećeg stepena se može faktorizovati pronalaženjem jednog korena i deljenjem, čime se svodi na proizvod linearnih faktora.</p>
      <div class="formula-box">
        \[x^3 + bx^2 + cx + d = (x - x_1)(x - x_2)(x - x_3)\]
      </div>
      <p><strong>Prvi značajni limes (sinusni):</strong></p>
      <div class="formula-box">
        \[\lim_{t \to 0} \frac{\sin t}{t} = 1\]
      </div>
      <p><strong>Osnovna svojstva logaritma i trigonometrijskih funkcija:</strong></p>
      <div class="formula-box">
        \[\ln(1) = 0, \qquad \cos\frac{\pi}{3} = \frac{1}{2}\]
      </div>
      <p><strong>Neodređeni oblik \(\frac{0}{0}\):</strong> Kada i brojilac i imenilac teže ka nuli, potrebno je algebarski transformisati izraz (skraćivanje, racionalizacija, primena poznatih limesa) kako bi se eliminisao singularitet.</p>
    </div>
  </details>
</div>

<!-- Vizuelni prikaz -->
<div class="card">
  <div class="card-title"><span class="icon">&#128202;</span> Vizuelni prikaz</div>
  <div class="canvas-wrap">
    <canvas id="vizCanvas" width="760" height="400"></canvas>
  </div>
  <p class="drag-hint">Pomerajte miša preko grafa da vidite vrednosti funkcije u okolini \(x = 3\)</p>
</div>

<!-- Koraci rešenja -->
<div class="card">
  <div class="card-title"><span class="icon">&#128736;</span> Rešenje korak po korak</div>

  <div class="step" id="step1">
    <div class="step-badge">KORAK 1</div>
    <div class="step-content">
      <p><strong>Faktorizacija polinoma u brojiocu</strong></p>
      <p>Polinom \(x^3 - 6x^2 + 11x - 6\) je trećeg stepena. Tražimo njegove nule.</p>
      <p>Probamo \(x = 1\):</p>
      <div class="math-block">
        \[1^3 - 6 \cdot 1^2 + 11 \cdot 1 - 6 = 1 - 6 + 11 - 6 = 0 \quad \checkmark\]
      </div>
      <p>Dakle, \((x - 1)\) je faktor. Delimo polinom sa \((x - 1)\):</p>
      <div class="math-block">
        \[x^3 - 6x^2 + 11x - 6 = (x - 1)(x^2 - 5x + 6)\]
      </div>
      <p>Kvadratni trinomom dalje faktorizujemo:</p>
      <div class="math-block">
        \[x^2 - 5x + 6 = (x - 2)(x - 3)\]
      </div>
      <p>Konačno:</p>
      <div class="math-block">
        \[x^3 - 6x^2 + 11x - 6 = (x - 1)(x - 2)(x - 3)\]
      </div>
    </div>
  </div>

  <div class="step" id="step2">
    <div class="step-badge">KORAK 2</div>
    <div class="step-content">
      <p><strong>Faktorizacija polinoma u imeniocu</strong></p>
      <p>Imenilac \(x^2 - 6x + 9\) prepoznajemo kao potpun kvadrat:</p>
      <div class="math-block">
        \[x^2 - 6x + 9 = (x - 3)^2\]
      </div>
    </div>
  </div>

  <div class="step" id="step3">
    <div class="step-badge">KORAK 3</div>
    <div class="step-content">
      <p><strong>Skraćivanje prvog razlomka</strong></p>
      <p>Zamenjujemo faktorizovane oblike:</p>
      <div class="math-block">
        \[\frac{x^3 - 6x^2 + 11x - 6}{x^2 - 6x + 9} = \frac{(x-1)(x-2)(x-3)}{(x-3)^2}\]
      </div>
      <p>Skraćujemo jedan faktor \((x - 3)\):</p>
      <div class="math-block">
        \[= \frac{(x-1)(x-2)}{x-3}\]
      </div>
    </div>
  </div>

  <details class="checkpoint">
    <summary>&#9989; Proveri se: Koliko iznosi \((x-1)(x-2)\) za \(x = 3\)?</summary>
    <div class="checkpoint-answer">
      \((3-1)(3-2) = 2 \cdot 1 = 2\). Taj deo je konačan i različit od nule.
    </div>
  </details>

  <div class="step" id="step4">
    <div class="step-badge">KORAK 4</div>
    <div class="step-content">
      <p><strong>Zapisivanje celog izraza u pojednostavljenom obliku</strong></p>
      <p>Sada naš ceo izraz izgleda ovako:</p>
      <div class="math-block">
        \[\lim_{x \to 3} \frac{(x-1)(x-2)}{x-3} \cdot \frac{\sin(x-3)}{\ln(2x-5) + \cos\dfrac{\pi}{x}}\]
      </div>
      <p>Grupišemo faktore koji sadrže \((x - 3)\):</p>
      <div class="math-block">
        \[= \lim_{x \to 3} (x-1)(x-2) \cdot \frac{\sin(x-3)}{x-3} \cdot \frac{1}{\ln(2x-5) + \cos\dfrac{\pi}{x}}\]
      </div>
    </div>
  </div>

  <div class="step" id="step5">
    <div class="step-badge">KORAK 5</div>
    <div class="step-content">
      <p><strong>Primena poznatog limesa \(\frac{\sin t}{t} \to 1\)</strong></p>
      <p>Uvedimo smenu \(t = x - 3\). Kada \(x \to 3\), tada \(t \to 0\).</p>
      <p>Primenimo prvi značajni limes:</p>
      <div class="math-block">
        \[\lim_{x \to 3} \frac{\sin(x - 3)}{x - 3} = \lim_{t \to 0} \frac{\sin t}{t} = 1\]
      </div>
    </div>
  </div>

  <details class="checkpoint">
    <summary>&#9989; Proveri se: Koliko iznosi \(\ln(2 \cdot 3 - 5)\)?</summary>
    <div class="checkpoint-answer">
      \(\ln(2 \cdot 3 - 5) = \ln(6 - 5) = \ln(1) = 0\). Pažnja: \(\ln(1) = 0\), ali postoji i drugi sabirak!
    </div>
  </details>

  <div class="step" id="step6">
    <div class="step-badge">KORAK 6</div>
    <div class="step-content">
      <p><strong>Izračunavanje imenioca drugog razlomka za \(x = 3\)</strong></p>
      <p>Razmotrimo izraz \(\ln(2x - 5) + \cos\dfrac{\pi}{x}\) za \(x = 3\):</p>
      <div class="math-block">
        \[\ln(2 \cdot 3 - 5) + \cos\frac{\pi}{3} = \ln(1) + \cos\frac{\pi}{3}\]
      </div>
      <p>Znamo da je \(\ln(1) = 0\) i \(\cos\dfrac{\pi}{3} = \dfrac{1}{2}\), pa:</p>
      <div class="math-block">
        \[= 0 + \frac{1}{2} = \frac{1}{2}\]
      </div>
      <p>Ovo je konačna, nejednaka nuli vrednost, pa možemo direktno zameniti.</p>
    </div>
  </div>

  <div class="step" id="step7">
    <div class="step-badge">KORAK 7</div>
    <div class="step-content">
      <p><strong>Izračunavanje konačnog rezultata</strong></p>
      <p>Sada svakom faktoru pridružujemo njegovu graničnu vrednost:</p>
      <div class="math-block">
        \[\lim_{x \to 3} \underbrace{(x-1)(x-2)}_{\to\;2} \cdot \underbrace{\frac{\sin(x-3)}{x-3}}_{\to\;1} \cdot \frac{1}{\underbrace{\ln(2x-5) + \cos\frac{\pi}{x}}_{\to\;\frac{1}{2}}}\]
      </div>
      <p>Množimo sve granične vrednosti:</p>
      <div class="math-block">
        \[= 2 \cdot 1 \cdot \frac{1}{\frac{1}{2}} = 2 \cdot 1 \cdot 2 = 4\]
      </div>
    </div>
  </div>

  <details class="checkpoint">
    <summary>&#9989; Numerička provera: Koliko iznosi izraz za \(x = 3{,}001\)?</summary>
    <div class="checkpoint-answer">
      Za \(x = 3{,}001\): brojilac polinoma \(\approx 0{,}002003\), imenilac polinoma \(\approx 0{,}000001\), \(\sin(0{,}001) \approx 0{,}001\), imenilac drugog razlomka \(\approx 0{,}502\). Proizvod \(\approx \frac{0{,}002003 \cdot 0{,}001}{0{,}000001 \cdot 0{,}502} \approx 3{,}99 \approx 4\). Odlično, poklapa se!
    </div>
  </details>
</div>

<!-- Ključni uvid -->
<div class="card insight-card">
  <div class="card-title"><span class="icon">&#128161;</span> Ključni uvid</div>
  <p class="insight-text">
    Ključ ovog zadatka je prepoznavanje da se faktor \((x - 3)\) pojavljuje i u brojiocu (iz faktorizacije polinoma) i u imeniocu (iz \((x-3)^2\)). Nakon skraćivanja ostaje \(\dfrac{\sin(x-3)}{x-3}\), što je upravo poznati limes koji teži ka \(1\). Time se neodređeni oblik \(\dfrac{0}{0}\) elegantno eliminiše.
  </p>
</div>

<!-- Konačan odgovor -->
<div class="card final-answer-card">
  <div class="card-title"><span class="icon">&#9989;</span> Konačan odgovor</div>
  <div class="final-answer-label">Granična vrednost iznosi:</div>
  <div class="final-answer-value">\(\displaystyle \lim_{x \to 3} \left(\frac{x^3 - 6x^2 + 11x - 6}{x^2 - 6x + 9} \cdot \frac{\sin(x-3)}{\ln(2x-5)+\cos\frac{\pi}{x}}\right) = 4\)</div>
  <div class="final-answer-label" style="margin-top:12px">Tačan odgovor je (C)</div>
  <div class="final-options">
    <div class="final-option" data-option="A">(A) \(\dfrac{8\sqrt{3}}{3}\)</div>
    <div class="final-option" data-option="B">(B) \(0\)</div>
    <div class="final-option correct-option" data-option="C">(C) \(4\)</div>
    <div class="final-option" data-option="D">(D) \(\dfrac{1}{2}\)</div>
    <div class="final-option" data-option="E">(E) \(+\infty\)</div>
  </div>
  <div class="verification">
    <strong>&#128269; Verifikacija:</strong> Rezultat \(4\) je konačan, pozitivan broj, što je očekivano jer je neodređeni oblik \(\frac{0}{0}\) razrešen skraćivanjem i poznatim limesom. Numerička provera za vrednosti bliske \(x = 3\) potvrđuje konvergenciju ka \(4\).
  </div>
</div>

<!-- Zamke -->
<div class="card">
  <div class="card-title"><span class="icon">&#9888;</span> Moguće zamke</div>
  <div class="pitfall">
    <span class="pitfall-icon">&#10060;</span>
    <span class="pitfall-text">
      <strong>Zaboraviti da \(\cos\frac{\pi}{3} = \frac{1}{2}\), a ne \(\cos\frac{\pi}{x}\to 0\).</strong> Mnogi studenti greškom tretiraju \(\cos\frac{\pi}{x}\) kao da teži nuli. Za \(x = 3\), argument je \(\frac{\pi}{3}\), a \(\cos\frac{\pi}{3} = \frac{1}{2}\). Da je ovaj sabirak bio nula, limes bi bio drugačiji (mogli bismo dobiti \(+\infty\)).
    </span>
  </div>
  <div class="pitfall">
    <span class="pitfall-icon">&#10060;</span>
    <span class="pitfall-text">
      <strong>Pogrešna faktorizacija polinoma.</strong> Polinom \(x^3 - 6x^2 + 11x - 6\) ima korene \(1, 2, 3\). Česta greška je pogrešno deliti polinom ili zaboraviti da je imenilac potpun kvadrat \((x-3)^2\), a ne \((x-3)\).
    </span>
  </div>
</div>

<!-- Izazov -->
<div class="card challenge-card">
  <div class="card-title"><span class="icon">&#127942;</span> Izazov za razmišljanje</div>
  <p class="challenge-text">
    Šta bi se desilo da u imeniocu umesto \(\cos\dfrac{\pi}{x}\) stoji \(\cos\dfrac{\pi}{6} \cdot (x - 3)\)? Kako bi to promenilo vrednost limesa?
  </p>
  <details>
    <summary>&#128161; Nagovještaj</summary>
    <div class="theory-content">
      <p>U tom slučaju bi ceo imenilac drugog razlomka teži ka nuli za \(x \to 3\), jer bi bio oblika \(\ln(1 + 2t) + \cos(\frac{\pi}{6}) \cdot t\) gde \(t = x - 3 \to 0\). Tada bi trebalo koristiti ekvivalentne infinitezimale \(\ln(1+2t) \sim 2t\) da biste odredili limes. Pokušajte sami!</p>
    </div>
  </details>
</div>

<script>
(() => {
  const canvas = document.getElementById('vizCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width, H = canvas.height;

  const BG = '#1e293b';
  const GRID = '#334155';
  const TEXT = '#94a3b8';
  const BLUE = '#60a5fa';
  const PURPLE = '#a78bfa';
  const GREEN = '#4ade80';
  const PINK = '#f472b6';

  const marginL = 70, marginR = 40, marginT = 45, marginB = 50;
  const gW = W - marginL - marginR;
  const gH = H - marginT - marginB;

  const xMin = 1.5, xMax = 4.5;
  const yMin = -10, yMax = 15;

  const toCanvasX = (x) => marginL + (x - xMin) / (xMax - xMin) * gW;
  const toCanvasY = (y) => marginT + (yMax - y) / (yMax - yMin) * gH;

  function f(x) {
    const num = (x - 1) * (x - 2) * (x - 3);
    const den = (x - 3) * (x - 3);
    if (Math.abs(den) < 1e-14) return NaN;
    const frac1 = num / den;
    const sinPart = Math.sin(x - 3);
    const lnPart = Math.log(2 * x - 5);
    if (2 * x - 5 <= 0) return NaN;
    const cosPart = Math.cos(Math.PI / x);
    const denom2 = lnPart + cosPart;
    if (Math.abs(denom2) < 1e-14) return NaN;
    return frac1 * sinPart / denom2;
  }

  let mouseX = -1;
  let mouseY = -1;

  function draw() {
    ctx.fillStyle = BG;
    ctx.fillRect(0, 0, W, H);

    // Mrežne linije
    ctx.strokeStyle = GRID;
    ctx.lineWidth = 0.5;
    for (let gx = Math.ceil(xMin); gx <= Math.floor(xMax); gx++) {
      const cx = toCanvasX(gx);
      ctx.beginPath(); ctx.moveTo(cx, marginT); ctx.lineTo(cx, marginT + gH); ctx.stroke();
    }
    for (let gy = Math.ceil(yMin); gy <= Math.floor(yMax); gy += 5) {
      const cy = toCanvasY(gy);
      ctx.beginPath(); ctx.moveTo(marginL, cy); ctx.lineTo(marginL + gW, cy); ctx.stroke();
    }

    // Ose
    ctx.strokeStyle = TEXT;
    ctx.lineWidth = 1.5;
    const y0 = toCanvasY(0);
    ctx.beginPath(); ctx.moveTo(marginL, y0); ctx.lineTo(marginL + gW, y0); ctx.stroke();
    const x0 = toCanvasX(3);
    ctx.strokeStyle = PURPLE;
    ctx.lineWidth = 1;
    ctx.setLineDash([6, 4]);
    ctx.beginPath(); ctx.moveTo(x0, marginT); ctx.lineTo(x0, marginT + gH); ctx.stroke();
    ctx.setLineDash([]);

    // Oznake osa
    ctx.fillStyle = TEXT;
    ctx.font = '12px monospace';
    ctx.textAlign = 'center';
    for (let lx = Math.ceil(xMin); lx <= Math.floor(xMax); lx++) {
      ctx.fillText(lx.toString(), toCanvasX(lx), marginT + gH + 18);
    }
    ctx.textAlign = 'right';
    for (let ly = Math.ceil(yMin); ly <= Math.floor(yMax); ly += 5) {
      ctx.fillText(ly.toString(), marginL - 10, toCanvasY(ly) + 4);
    }
    ctx.textAlign = 'center';
    ctx.fillText('x', marginL + gW + 18, y0 + 4);

    // Oznaka x = 3
    ctx.fillStyle = PURPLE;
    ctx.font = '12px monospace';
    ctx.fillText('x = 3', x0, marginT - 8);

    // Crtanje krive
    ctx.strokeStyle = BLUE;
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    let started = false;
    const step = 0.003;
    let prevVal = NaN;
    for (let px = xMin; px <= xMax; px += step) {
      if (Math.abs(px - 3) < 0.02) { started = false; prevVal = NaN; continue; }
      if (2 * px - 5 <= 0.001) { started = false; prevVal = NaN; continue; }
      const val = f(px);
      if (isNaN(val) || !isFinite(val) || val < yMin - 5 || val > yMax + 5) { started = false; prevVal = NaN; continue; }
      if (!isNaN(prevVal) && Math.abs(val - prevVal) > 20) { started = false; prevVal = val; continue; }
      const cx2 = toCanvasX(px), cy2 = toCanvasY(Math.max(yMin, Math.min(yMax, val)));
      if (!started) { ctx.moveTo(cx2, cy2); started = true; }
      else { ctx.lineTo(cx2, cy2); }
      prevVal = val;
    }
    ctx.stroke();

    // Horizontalna linija na y = 4
    const limY = toCanvasY(4);
    ctx.strokeStyle = GREEN;
    ctx.lineWidth = 1.5;
    ctx.setLineDash([6, 4]);
    ctx.beginPath(); ctx.moveTo(marginL, limY); ctx.lineTo(marginL + gW, limY); ctx.stroke();
    ctx.setLineDash([]);

    // Tačka granične vrednosti (prazan krug)
    ctx.strokeStyle = GREEN;
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.arc(x0, limY, 7, 0, 2 * Math.PI);
    ctx.stroke();

    // Oznaka granične vrednosti
    ctx.fillStyle = GREEN;
    ctx.font = 'bold 14px monospace';
    ctx.textAlign = 'left';
    ctx.fillText('L = 4', x0 + 14, limY - 8);

    // Naslov
    ctx.fillStyle = TEXT;
    ctx.font = 'bold 14px sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Graf funkcije f(x) u okolini x = 3', W / 2, 22);

    // Legenda
    const legX = marginL + 10, legY = marginT + 12;
    ctx.lineWidth = 2.5;
    ctx.strokeStyle = BLUE;
    ctx.beginPath(); ctx.moveTo(legX, legY); ctx.lineTo(legX + 24, legY); ctx.stroke();
    ctx.fillStyle = TEXT;
    ctx.font = '11px sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('f(x)', legX + 30, legY + 4);

    ctx.strokeStyle = GREEN;
    ctx.lineWidth = 1.5;
    ctx.setLineDash([5, 3]);
    ctx.beginPath(); ctx.moveTo(legX, legY + 20); ctx.lineTo(legX + 24, legY + 20); ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillText('y = 4 (granična vrednost)', legX + 30, legY + 24);

    ctx.strokeStyle = PURPLE;
    ctx.lineWidth = 1;
    ctx.setLineDash([5, 3]);
    ctx.beginPath(); ctx.moveTo(legX, legY + 40); ctx.lineTo(legX + 24, legY + 40); ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = TEXT;
    ctx.fillText('x = 3 (tačka limesa)', legX + 30, legY + 44);

    // Tooltip na hover
    if (mouseX >= marginL && mouseX <= marginL + gW && mouseY >= marginT && mouseY <= marginT + gH) {
      const xVal = xMin + (mouseX - marginL) / gW * (xMax - xMin);
      if (Math.abs(xVal - 3) > 0.02 && 2 * xVal - 5 > 0.001) {
        const yVal = f(xVal);
        if (!isNaN(yVal) && isFinite(yVal) && yVal >= yMin && yVal <= yMax) {
          const dotCX = toCanvasX(xVal);
          const dotCY = toCanvasY(yVal);

          // Vertikalna isprekidana linija
          ctx.strokeStyle = 'rgba(96, 165, 250, 0.3)';
          ctx.lineWidth = 1;
          ctx.setLineDash([3, 3]);
          ctx.beginPath(); ctx.moveTo(dotCX, dotCY); ctx.lineTo(dotCX, y0); ctx.stroke();
          ctx.setLineDash([]);

          // Tačka
          ctx.fillStyle = PINK;
          ctx.beginPath();
          ctx.arc(dotCX, dotCY, 5, 0, 2 * Math.PI);
          ctx.fill();

          // Tekst
          ctx.fillStyle = '#e2e8f0';
          ctx.font = 'bold 12px monospace';
          const label = 'x=' + xVal.toFixed(3) + ' f=' + yVal.toFixed(3);
          const textW = ctx.measureText(label).width + 16;
          let tooltipX = dotCX + 12;
          if (tooltipX + textW > W - 10) tooltipX = dotCX - textW - 12;
          let tooltipY = dotCY - 24;
          if (tooltipY < marginT + 5) tooltipY = dotCY + 16;

          ctx.fillStyle = 'rgba(15, 23, 42, 0.85)';
          ctx.strokeStyle = '#60a5fa';
          ctx.lineWidth = 1;
          const boxH = 22;
          ctx.beginPath();
          ctx.roundRect(tooltipX, tooltipY, textW, boxH, 4);
          ctx.fill();
          ctx.stroke();

          ctx.fillStyle = '#e2e8f0';
          ctx.textAlign = 'left';
          ctx.fillText(label, tooltipX + 8, tooltipY + 15);
        }
      }
    }
  }

  draw();

  function getMousePos(e) {
    const rect = canvas.getBoundingClientRect();
    const scaleX = W / rect.width;
    const scaleY = H / rect.height;
    return {
      x: (e.clientX - rect.left) * scaleX,
      y: (e.clientY - rect.top) * scaleY
    };
  }

  canvas.addEventListener('mousemove', (e) => {
    const pos = getMousePos(e);
    mouseX = pos.x;
    mouseY = pos.y;
    draw();
  });

  canvas.addEventListener('mouseleave', () => {
    mouseX = -1;
    mouseY = -1;
    draw();
  });

  canvas.addEventListener('touchmove', (e) => {
    e.preventDefault();
    if (e.touches.length > 0) {
      const pos = getMousePos(e.touches[0]);
      mouseX = pos.x;
      mouseY = pos.y;
      draw();
    }
  });

  canvas.addEventListener('touchend', () => {
    mouseX = -1;
    mouseY = -1;
    draw();
  });

  // Interaktivni klik na odgovor
  document.addEventListener('DOMContentLoaded', () => {
    const options = document.querySelectorAll('.answer-option');
    options.forEach((opt) => {
      opt.addEventListener('click', () => {
        options.forEach((o) => { o.classList.remove('correct'); o.style.borderColor = ''; });
        if (opt.getAttribute('data-option') === 'C') {
          opt.classList.add('correct');
        } else {
          opt.style.borderColor = '#f87171';
          setTimeout(() => { opt.style.borderColor = ''; }, 1200);
        }
      });
    });

    // Klik na korake
    const steps = document.querySelectorAll('.step');
    steps.forEach((step) => {
      step.addEventListener('click', () => {
        steps.forEach((s) => s.classList.remove('active'));
        step.classList.add('active');
      });
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{"title":"Granična vrednost proizvoda racionalnog i trigonometrijsko-logaritamskog izraza","subject":"math","unit":"calculus","topic_tags":["granične vrednosti","faktorizacija polinoma","sinusni limes","neodređeni oblik","matematička analiza"]}
BRAINSPARK_META-->