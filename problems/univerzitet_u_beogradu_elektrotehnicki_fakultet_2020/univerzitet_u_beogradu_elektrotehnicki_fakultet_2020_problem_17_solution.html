<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Logaritamska jednacina sa trigonometrijskom osnovom</title>
<script type="text/info" id="logic-scratchpad">
PROBLEM:
Skup resenja jednacine (log_{sin x} 2)(log_{sin^2 x} (4/3)) = 2 * log_{4/3} 2
ima tacno tri zajednicka elementa sa skupom S. Naci odgovarajuci skup S.

======================================================
KORAK 1: USLOVI DEFINISANOSTI (DOMEN)
======================================================

Za log_{sin x} 2:
  - osnova: sin x > 0 i sin x != 1
  - argument: 2 > 0 (uvek OK)

Za log_{sin^2 x} (4/3):
  - osnova: sin^2 x > 0 i sin^2 x != 1
  - sin^2 x > 0 => sin x != 0
  - sin^2 x != 1 => |sin x| != 1 => sin x != +/- 1
  - argument: 4/3 > 0 (uvek OK)

Kombinovano:
  sin x > 0 (iz prvog logaritma)
  sin x != 1 (iz oba uslova)
  => sin x in (0, 1)
  => x in (0, pi) \ {pi/2}, tj. x in (2kpi, (2k+1)pi) \ {pi/2 + 2kpi} za k iz Z

======================================================
KORAK 2: RESAVANJE JEDNACINE - Promena baze
======================================================

Koristimo formulu promene baze: log_a b = ln(b) / ln(a)

Leva strana (LHS):
  log_{sin x} 2 = ln(2) / ln(sin x)

  log_{sin^2 x} (4/3) = ln(4/3) / ln(sin^2 x) = ln(4/3) / (2 * ln(sin x))

  LHS = [ln(2) / ln(sin x)] * [ln(4/3) / (2 * ln(sin x))]
      = ln(2) * ln(4/3) / (2 * (ln(sin x))^2)

Desna strana (RHS):
  2 * log_{4/3} 2 = 2 * ln(2) / ln(4/3)

======================================================
KORAK 3: RESAVANJE
======================================================

ln(2) * ln(4/3) / (2 * (ln(sin x))^2) = 2 * ln(2) / ln(4/3)

Posto sin x in (0, 1), imamo ln(sin x) < 0 (ali (ln(sin x))^2 > 0). Takodje ln(2) > 0 i ln(4/3) > 0.
Mozemo podeliti obe strane sa ln(2) (pozitivno, nije nula):

ln(4/3) / (2 * (ln(sin x))^2) = 2 / ln(4/3)

Krstimno mnozenje:
(ln(4/3))^2 = 4 * (ln(sin x))^2

(ln(sin x))^2 = (ln(4/3))^2 / 4

ln(sin x) = +/- ln(4/3) / 2

======================================================
KORAK 4: ANALIZA DVA SLUCAJA
======================================================

Slucaj 1: ln(sin x) = ln(4/3) / 2 = ln(sqrt(4/3))
  sin x = sqrt(4/3) = 2/sqrt(3) ≈ 1,155
  Ali sin x <= 1, dakle NEMA RESENJA u ovom slucaju.

Slucaj 2: ln(sin x) = -ln(4/3) / 2 = ln((4/3)^{-1/2}) = ln(sqrt(3/4)) = ln(sqrt(3)/2)
  sin x = sqrt(3)/2 = sqrt(3)/2 ≈ 0,866
  Ovo je validno jer sqrt(3)/2 in (0, 1). Odlicno!

======================================================
KORAK 5: OPSTE RESENJE sin x = sqrt(3)/2
======================================================

sin x = sqrt(3)/2

x = pi/3 + 2k*pi  ili  x = 2pi/3 + 2k*pi,  k in Z

Zapisano kao skup:
  R = { pi/3 + 2k*pi : k in Z } U { 2pi/3 + 2k*pi : k in Z }

Provera domene: Za x = pi/3, sin(pi/3) = sqrt(3)/2, sto je u (0,1) - OK
                Za x = 2pi/3, sin(2pi/3) = sqrt(3)/2, sto je u (0,1) - OK

======================================================
KORAK 6: PROVERA SVAKOG PONUDJENOG SKUPA
======================================================

(A) S = {pi/4, 3pi/4, 5pi/4, 7pi/4, 11pi/4, 15pi/4}
  - pi/4: sin(pi/4) = sqrt(2)/2 != sqrt(3)/2 => NE
  - 3pi/4: sin(3pi/4) = sqrt(2)/2 != sqrt(3)/2 => NE
  - 5pi/4: sin(5pi/4) = -sqrt(2)/2 => NE
  - 7pi/4: sin(7pi/4) = -sqrt(2)/2 => NE
  - 11pi/4 = 2pi + 3pi/4: sin = sqrt(2)/2 => NE
  - 15pi/4 = 2*2pi - pi/4: sin = sin(-pi/4+4pi) = sin(15pi/4)
    15pi/4 = 3*pi + 3pi/4. sin(3pi + 3pi/4) = sin(pi + 3pi/4) = -sin(3pi/4) = -sqrt(2)/2. NE
  Nijedan element. Zajednickih: 0. NE.

(B) S = {pi/6, 5pi/6, pi/3, 2pi/3, 7pi/6, 11pi/6}
  - pi/6: sin = 1/2 => NE
  - 5pi/6: sin = 1/2 => NE
  - pi/3: sin = sqrt(3)/2 => DA (k=0, prva grana)
  - 2pi/3: sin = sqrt(3)/2 => DA (k=0, druga grana)
  - 7pi/6: sin = -1/2 => NE
  - 11pi/6: sin = -1/2 => NE
  Zajednickih: 2. NE (trazimo tacno 3).

(C) S = {pi/3, 2pi/3, -pi/3, -2pi/3, 4pi/3, 5pi/3}
  - pi/3: sin = sqrt(3)/2 => DA (pi/3 + 2*0*pi)
  - 2pi/3: sin = sqrt(3)/2 => DA (2pi/3 + 2*0*pi)
  - -pi/3: sin(-pi/3) = -sqrt(3)/2 => NE (sin negativan, nije u domenu)
  - -2pi/3: sin(-2pi/3) = -sqrt(3)/2 => NE
  - 4pi/3: sin(4pi/3) = -sqrt(3)/2 => NE
  - 5pi/3: sin(5pi/3) = -sqrt(3)/2 => NE
  Zajednickih: 2. NE.

(D) S = {pi/3, 7pi/3, 13pi/3, 19pi/3, 25pi/3, 31pi/3}
  - pi/3: sin = sqrt(3)/2 => DA
  - 7pi/3 = 2pi + pi/3: sin = sqrt(3)/2 => DA
  - 13pi/3 = 4pi + pi/3: sin = sqrt(3)/2 => DA
  - 19pi/3 = 6pi + pi/3: sin = sqrt(3)/2 => DA
  - 25pi/3 = 8pi + pi/3: sin = sqrt(3)/2 => DA
  - 31pi/3 = 10pi + pi/3: sin = sqrt(3)/2 => DA
  Zajednickih: 6. NE (trazimo tacno 3).

(E) S = {2pi/3, -4pi/3, -5pi/3, -2pi/3, 4pi/3, 5pi/3}
  - 2pi/3: sin(2pi/3) = sqrt(3)/2 => DA (2pi/3 + 2*0*pi)
  - -4pi/3 = -4pi/3 + 2pi = 2pi/3: sin = sqrt(3)/2 => DA (ekvivalentno 2pi/3)
    Ali cekaj, to je ista tacka na jedinicnom krugu, ali razlicit element skupa.
    -4pi/3: sin(-4pi/3) = sin(-4pi/3 + 2pi) = sin(2pi/3) = sqrt(3)/2.
    Proveravamo da li je -4pi/3 u skupu resenja:
    x = 2pi/3 + 2k*pi => -4pi/3 = 2pi/3 + 2k*pi => 2k*pi = -4pi/3 - 2pi/3 = -6pi/3 = -2pi => k = -1. DA!
  - -5pi/3: sin(-5pi/3) = sin(-5pi/3 + 2pi) = sin(pi/3) = sqrt(3)/2.
    x = pi/3 + 2k*pi => -5pi/3 = pi/3 + 2k*pi => 2k*pi = -5pi/3 - pi/3 = -6pi/3 = -2pi => k = -1. DA!
  - -2pi/3: sin(-2pi/3) = -sqrt(3)/2 => NE (sin je negativan, nije u domenu)
  - 4pi/3: sin(4pi/3) = -sqrt(3)/2 => NE
  - 5pi/3: sin(5pi/3) = -sqrt(3)/2 => NE
  Zajednickih: 3 (2pi/3, -4pi/3, -5pi/3). TACNO 3!

ODGOVOR: (E)

VERIFIKACIJA SA DATIM ODGOVOROM: PDF kaze (E). TACNO!

Dvostruka provera za (E):
  2pi/3 = 2pi/3 + 2*0*pi => sin = sqrt(3)/2, domen OK => RESENJE
  -4pi/3 = 2pi/3 - 2pi = 2pi/3 + 2*(-1)*pi => sin = sqrt(3)/2, domen OK => RESENJE
  -5pi/3 = pi/3 - 2pi = pi/3 + 2*(-1)*pi => sin = sqrt(3)/2, domen OK => RESENJE
  -2pi/3: sin = -sqrt(3)/2 < 0 => NIJE u domenu => NIJE RESENJE
  4pi/3: sin = -sqrt(3)/2 < 0 => NIJE u domenu => NIJE RESENJE
  5pi/3: sin = -sqrt(3)/2 < 0 => NIJE u domenu => NIJE RESENJE
  Tacno 3 zajednicka elementa. Potvrdjeno!
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(30, 41, 59, 0.8);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 12px 16px;
  min-width: 80px;
  text-align: center;
  flex: 1 1 auto;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
  font-weight: 600;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 0.95rem;
}

.answer-option {
  cursor: default;
  transition: border-color 0.2s;
  min-width: 140px;
}

.answer-option:hover {
  border-color: #60a5fa;
}

.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 16px 20px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.step-container {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  padding: 16px;
  border-radius: 10px;
  border-left: 3px solid transparent;
  transition: all 0.2s;
  cursor: pointer;
}

.step-container:hover, .step-container.active {
  background: rgba(96, 165, 250, 0.05);
  border-left-color: #4ade80;
}

.step-badge {
  width: 32px;
  height: 32px;
  min-width: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-content p {
  margin-bottom: 8px;
  color: #cbd5e1;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 8px;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 10px 14px;
  background: rgba(96,165,250,0.08);
  border-radius: 8px;
  list-style: none;
  user-select: none;
}

details summary::-webkit-details-marker { display: none; }
details summary::before {
  content: '\25B6 ';
  font-size: 0.75rem;
  margin-right: 8px;
  display: inline-block;
  transition: transform 0.2s;
}
details[open] summary::before {
  transform: rotate(90deg);
}

details .details-content {
  padding: 14px 16px;
  margin-top: 8px;
  background: rgba(30, 41, 59, 0.5);
  border-radius: 8px;
  border: 1px solid #334155;
}

.checkpoint {
  background: rgba(52, 211, 153, 0.08);
  border: 1px solid rgba(52, 211, 153, 0.2);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 15px 0;
}

.checkpoint summary {
  background: rgba(52, 211, 153, 0.12);
  color: #34d399;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  text-align: center;
}

.insight-box .insight-formula {
  font-size: 1.3rem;
  margin: 16px 0;
}

.final-answer {
  background: linear-gradient(135deg, rgba(52,211,153,0.1), rgba(74,222,128,0.1));
  border: 2px solid rgba(52,211,153,0.4);
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  text-align: center;
}

.final-answer h2 {
  color: #4ade80;
  justify-content: center;
}

.final-answer .answer-value {
  font-size: 1.6rem;
  color: #4ade80;
  font-weight: 700;
  margin: 16px 0;
}

.options-review {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin: 16px 0;
}

.option-card {
  padding: 10px 16px;
  border-radius: 8px;
  border: 1px solid #334155;
  background: rgba(30, 41, 59, 0.6);
  min-width: 80px;
  text-align: center;
  color: #94a3b8;
}

.option-card.correct {
  border-color: #4ade80;
  background: rgba(52, 211, 153, 0.15);
  color: #4ade80;
  font-weight: 700;
}

.pitfall-box {
  background: rgba(224, 148, 104, 0.08);
  border: 1px solid rgba(224, 148, 104, 0.2);
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 24px;
}

.pitfall-box h2 {
  color: #e09468;
}

.pitfall-box ul {
  list-style: none;
  padding: 0;
}

.pitfall-box li {
  padding: 8px 0;
  padding-left: 20px;
  position: relative;
  color: #cbd5e1;
}

.pitfall-box li::before {
  content: '\26A0';
  position: absolute;
  left: 0;
  color: #e09468;
}

.challenge-box {
  background: rgba(167, 139, 250, 0.08);
  border: 1px solid rgba(167, 139, 250, 0.2);
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 24px;
}

.challenge-box h2 {
  color: #a78bfa;
}

.verification-note {
  background: rgba(52, 211, 153, 0.06);
  border-radius: 8px;
  padding: 14px;
  margin-top: 12px;
  color: #94a3b8;
  font-size: 0.95rem;
}

.canvas-card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 20px;
  margin-bottom: 24px;
  text-align: center;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.canvas-card canvas {
  border-radius: 10px;
  display: block;
  margin: 0 auto;
  touch-action: none;
}

.canvas-hint {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-top: 10px;
  font-style: italic;
}

.plan-text {
  color: #cbd5e1;
  font-size: 1.05rem;
  line-height: 1.7;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

.highlight-green {
  color: #4ade80;
  font-weight: 600;
}

.highlight-blue {
  color: #60a5fa;
  font-weight: 600;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .given-grid { gap: 8px; }
  .given-item { min-width: 100%; }
  .step-container { flex-direction: column; gap: 8px; }
  .answer-option { min-width: 100%; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title & Subtitle -->
  <h1>Logaritamska jednacina sa trigonometrijskom osnovom</h1>
  <p class="subtitle">Logaritmi, promena baze, trigonometrijske jednacine</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Skup resenja jednacine</p>
    <div class="math-block">
      \[ \left(\log_{\sin x} 2\right)\left(\log_{\sin^2 x} \frac{4}{3}\right) = 2\,\log_{\frac{4}{3}} 2 \]
    </div>
    <p>ima <span class="highlight-pink">tacno tri zajednicka elementa</span> sa skupom \( S \), ako je:</p>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\( S = \left\{\frac{\pi}{4},\, \frac{3\pi}{4},\, \frac{5\pi}{4},\, \frac{7\pi}{4},\, \frac{11\pi}{4},\, \frac{15\pi}{4}\right\} \)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\( S = \left\{\frac{\pi}{6},\, \frac{5\pi}{6},\, \frac{\pi}{3},\, \frac{2\pi}{3},\, \frac{7\pi}{6},\, \frac{11\pi}{6}\right\} \)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\( S = \left\{\frac{\pi}{3},\, \frac{2\pi}{3},\, -\frac{\pi}{3},\, -\frac{2\pi}{3},\, \frac{4\pi}{3},\, \frac{5\pi}{3}\right\} \)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\( S = \left\{\frac{\pi}{3},\, \frac{7\pi}{3},\, \frac{13\pi}{3},\, \frac{19\pi}{3},\, \frac{25\pi}{3},\, \frac{31\pi}{3}\right\} \)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\( S = \left\{\frac{2\pi}{3},\, -\frac{4\pi}{3},\, -\frac{5\pi}{3},\, -\frac{2\pi}{3},\, \frac{4\pi}{3},\, \frac{5\pi}{3}\right\} \)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <h2>Plan resavanja</h2>
    <p class="plan-text">
      Prvo cemo primenom formule za promenu baze logaritma transformisati levu i desnu stranu jednacine,
      resiti je po \(\sin x\), a zatim pronaci opsti oblik resenja trigonometrijske jednacine.
      Na kraju, proveriti svaki ponudjeni skup i prebrojati koliko njegovih elemenata pripada skupu resenja.
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Kljucne formule i teoreme</summary>
      <div class="details-content">
        <ul style="list-style: none; padding: 0;">
          <li style="padding: 8px 0; color: #cbd5e1;">
            <span class="highlight-blue">Formula za promenu baze:</span>
            \(\displaystyle \log_a b = \frac{\ln b}{\ln a}\), gde su \(a > 0\), \(a \neq 1\), \(b > 0\).
          </li>
          <li style="padding: 8px 0; color: #cbd5e1;">
            <span class="highlight-blue">Svojstvo logaritma stepena osnove:</span>
            \(\displaystyle \log_{a^n} b = \frac{1}{n}\log_a b\), sto sledi iz \(\ln(a^n) = n\ln a\).
          </li>
          <li style="padding: 8px 0; color: #cbd5e1;">
            <span class="highlight-blue">Uslovi definisanosti logaritma:</span>
            Za \(\log_a b\) potrebno je da \(a > 0\), \(a \neq 1\) i \(b > 0\).
          </li>
          <li style="padding: 8px 0; color: #cbd5e1;">
            <span class="highlight-blue">Trigonometrijska jednacina:</span>
            \(\sin x = c\) ima opste resenje \(x = \arcsin(c) + 2k\pi\) ili \(x = \pi - \arcsin(c) + 2k\pi\), \(k \in \mathbb{Z}\).
          </li>
        </ul>
      </div>
    </details>
  </div>

  <!-- Visual Aid: Unit circle diagram -->
  <div class="canvas-card">
    <h2 style="color: #60a5fa; margin-bottom: 12px;">Jedinicni krug: resenja jednacine \(\sin x = \frac{\sqrt{3}}{2}\)</h2>
    <canvas id="unitCircle" width="550" height="550"></canvas>
    <p class="canvas-hint">Interaktivni prikaz -- prevucite tacku po krugu da istrazite vrednosti sinusa</p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container" id="step1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Uslovi definisanosti</h3>
        <p>
          Za \(\log_{\sin x} 2\) potrebno je da osnova bude pozitivna i razlicita od 1:
        </p>
        <div class="math-block">
          \[ \sin x > 0 \quad \text{i} \quad \sin x \neq 1 \]
        </div>
        <p>
          Za \(\log_{\sin^2 x} \frac{4}{3}\) potrebno je \(\sin^2 x > 0\) i \(\sin^2 x \neq 1\), sto daje
          \(\sin x \neq 0\) i \(|\sin x| \neq 1\).
        </p>
        <p>
          Kombinovanjem oba uslova dobijamo:
        </p>
        <div class="math-block">
          \[ \sin x \in (0,\, 1) \]
        </div>
        <p class="note">
          To znaci da \(x\) mora biti u intervalu \((2k\pi,\, (2k+1)\pi)\) bez tacaka gde je \(\sin x = 1\), tj. \(x \neq \frac{\pi}{2} + 2k\pi\).
        </p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container" id="step2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Primena formule za promenu baze -- leva strana</h3>
        <p>Koristimo \(\log_a b = \frac{\ln b}{\ln a}\) za svaki faktor na levoj strani:</p>
        <div class="math-block">
          \[ \log_{\sin x} 2 = \frac{\ln 2}{\ln(\sin x)} \]
        </div>
        <div class="math-block">
          \[ \log_{\sin^2 x} \frac{4}{3} = \frac{\ln \frac{4}{3}}{\ln(\sin^2 x)} = \frac{\ln \frac{4}{3}}{2\ln(\sin x)} \]
        </div>
        <p>Mnozimo ova dva izraza:</p>
        <div class="math-block">
          \[ \text{Leva strana} = \frac{\ln 2}{\ln(\sin x)} \cdot \frac{\ln \frac{4}{3}}{2\ln(\sin x)} = \frac{\ln 2 \cdot \ln \frac{4}{3}}{2\bigl(\ln(\sin x)\bigr)^2} \]
        </div>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step-container" id="step3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Primena formule za promenu baze -- desna strana</h3>
        <div class="math-block">
          \[ \text{Desna strana} = 2\,\log_{\frac{4}{3}} 2 = \frac{2\ln 2}{\ln \frac{4}{3}} \]
        </div>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step-container" id="step4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Izjednacavanje i sradjivanje</h3>
        <p>Izjednacavamo levu i desnu stranu:</p>
        <div class="math-block">
          \[ \frac{\ln 2 \cdot \ln \frac{4}{3}}{2\bigl(\ln(\sin x)\bigr)^2} = \frac{2\ln 2}{\ln \frac{4}{3}} \]
        </div>
        <p>Posto je \(\ln 2 > 0\), mozemo podeliti obe strane sa \(\ln 2\):</p>
        <div class="math-block">
          \[ \frac{\ln \frac{4}{3}}{2\bigl(\ln(\sin x)\bigr)^2} = \frac{2}{\ln \frac{4}{3}} \]
        </div>
        <p>Krstimo mnozimo:</p>
        <div class="math-block">
          \[ \left(\ln \frac{4}{3}\right)^2 = 4\bigl(\ln(\sin x)\bigr)^2 \]
        </div>
        <p>Odavde:</p>
        <div class="math-block">
          \[ \bigl(\ln(\sin x)\bigr)^2 = \frac{\left(\ln \frac{4}{3}\right)^2}{4} \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <div class="checkpoint">
      <details>
        <summary>Proveri se: Koliko je \(\bigl(\ln(\sin x)\bigr)^2\)?</summary>
        <div class="details-content">
          <p>Trebalo bi da si dobio/la:</p>
          <div class="math-block">
            \[ \bigl(\ln(\sin x)\bigr)^2 = \frac{\left(\ln \frac{4}{3}\right)^2}{4} \]
          </div>
          <p>Sto je ekvivalentno sa \(\ln(\sin x) = \pm \frac{\ln \frac{4}{3}}{2}\). Ako si to dobio/la, svaka cast!</p>
        </div>
      </details>
    </div>

    <!-- Step 5 -->
    <div class="step-container" id="step5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Korenovanje -- dva slucaja</h3>
        <p>Korenujemo obe strane:</p>
        <div class="math-block">
          \[ \ln(\sin x) = \pm \frac{\ln \frac{4}{3}}{2} \]
        </div>

        <p><span class="highlight-blue">Slucaj 1:</span> \(\ln(\sin x) = +\frac{\ln \frac{4}{3}}{2} = \ln\sqrt{\frac{4}{3}}\)</p>
        <div class="math-block">
          \[ \sin x = \sqrt{\frac{4}{3}} = \frac{2}{\sqrt{3}} \approx 1{,}155 \]
        </div>
        <p>Posto je \(\sin x \leq 1\), ovaj slucaj <span class="highlight-pink">nema resenja</span>.</p>

        <p style="margin-top: 12px;"><span class="highlight-blue">Slucaj 2:</span> \(\ln(\sin x) = -\frac{\ln \frac{4}{3}}{2} = \ln\sqrt{\frac{3}{4}}\)</p>
        <div class="math-block">
          \[ \sin x = \sqrt{\frac{3}{4}} = \frac{\sqrt{3}}{2} \approx 0{,}866 \]
        </div>
        <p>Ova vrednost pripada intervalu \((0,\, 1)\) -- <span class="highlight-green">validno resenje</span>.</p>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step-container" id="step6">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Opste resenje trigonometrijske jednacine</h3>
        <p>Resavamo \(\sin x = \frac{\sqrt{3}}{2}\):</p>
        <div class="math-block">
          \[ x = \frac{\pi}{3} + 2k\pi \quad \text{ili} \quad x = \frac{2\pi}{3} + 2k\pi, \quad k \in \mathbb{Z} \]
        </div>
        <p class="note">
          Proverimo: \(\sin\frac{\pi}{3} = \frac{\sqrt{3}}{2}\) i \(\sin\frac{2\pi}{3} = \frac{\sqrt{3}}{2}\). Obe vrednosti su u \((0,\, 1)\), dakle zadovoljavaju uslov definisanosti.
        </p>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <div class="checkpoint">
      <details>
        <summary>Proveri se: Da li je \(x = \frac{5\pi}{3}\) resenje jednacine?</summary>
        <div class="details-content">
          <p><strong>Ne!</strong> Jer \(\sin\frac{5\pi}{3} = -\frac{\sqrt{3}}{2} < 0\), a uslov definisanosti zahteva \(\sin x > 0\).
          Negativne vrednosti sinusa automatski ispadaju iz domena.</p>
        </div>
      </details>
    </div>

    <!-- Step 7 -->
    <div class="step-container" id="step7">
      <div class="step-badge">7</div>
      <div class="step-content">
        <h3>Provera svakog ponudjenog skupa</h3>
        <p>Za svaki element svakog skupa proveravamo da li pripada skupu resenja, tj. da li je oblika \(\frac{\pi}{3} + 2k\pi\) ili \(\frac{2\pi}{3} + 2k\pi\).</p>

        <p style="margin-top: 14px;"><span class="highlight-blue">(A)</span> Svi elementi imaju oblik \(\frac{n\pi}{4}\). Tada bi \(\sin x = \pm\frac{\sqrt{2}}{2}\), sto nikad nije \(\frac{\sqrt{3}}{2}\).</p>
        <div class="math-block">
          \[ \text{Zajednickih elemenata: } \mathbf{0} \]
        </div>

        <p><span class="highlight-blue">(B)</span> Proveravamo element po element:</p>
        <ul style="list-style: none; padding-left: 16px; color: #cbd5e1;">
          <li>\(\frac{\pi}{6}\): \(\sin\frac{\pi}{6} = \frac{1}{2} \neq \frac{\sqrt{3}}{2}\) -- NE</li>
          <li>\(\frac{5\pi}{6}\): \(\sin\frac{5\pi}{6} = \frac{1}{2}\) -- NE</li>
          <li>\(\frac{\pi}{3}\): \(\sin\frac{\pi}{3} = \frac{\sqrt{3}}{2}\) -- <span class="highlight-green">DA</span></li>
          <li>\(\frac{2\pi}{3}\): \(\sin\frac{2\pi}{3} = \frac{\sqrt{3}}{2}\) -- <span class="highlight-green">DA</span></li>
          <li>\(\frac{7\pi}{6}\): \(\sin\frac{7\pi}{6} = -\frac{1}{2}\) -- NE</li>
          <li>\(\frac{11\pi}{6}\): \(\sin\frac{11\pi}{6} = -\frac{1}{2}\) -- NE</li>
        </ul>
        <div class="math-block">
          \[ \text{Zajednickih elemenata: } \mathbf{2} \]
        </div>

        <p><span class="highlight-blue">(C)</span> Proveravamo:</p>
        <ul style="list-style: none; padding-left: 16px; color: #cbd5e1;">
          <li>\(\frac{\pi}{3}\): \(\sin = \frac{\sqrt{3}}{2}\) -- <span class="highlight-green">DA</span></li>
          <li>\(\frac{2\pi}{3}\): \(\sin = \frac{\sqrt{3}}{2}\) -- <span class="highlight-green">DA</span></li>
          <li>\(-\frac{\pi}{3}\): \(\sin = -\frac{\sqrt{3}}{2} < 0\) -- NE</li>
          <li>\(-\frac{2\pi}{3}\): \(\sin = -\frac{\sqrt{3}}{2} < 0\) -- NE</li>
          <li>\(\frac{4\pi}{3}\): \(\sin = -\frac{\sqrt{3}}{2} < 0\) -- NE</li>
          <li>\(\frac{5\pi}{3}\): \(\sin = -\frac{\sqrt{3}}{2} < 0\) -- NE</li>
        </ul>
        <div class="math-block">
          \[ \text{Zajednickih elemenata: } \mathbf{2} \]
        </div>

        <p><span class="highlight-blue">(D)</span> Svi elementi su oblika \(\frac{\pi}{3} + 2k\pi\):</p>
        <ul style="list-style: none; padding-left: 16px; color: #cbd5e1;">
          <li>\(\frac{\pi}{3}\), \(\frac{7\pi}{3} = \frac{\pi}{3} + 2\pi\), \(\frac{13\pi}{3} = \frac{\pi}{3} + 4\pi\), \(\frac{19\pi}{3} = \frac{\pi}{3} + 6\pi\), \(\frac{25\pi}{3} = \frac{\pi}{3} + 8\pi\), \(\frac{31\pi}{3} = \frac{\pi}{3} + 10\pi\)</li>
        </ul>
        <p>Svi imaju \(\sin x = \frac{\sqrt{3}}{2}\), dakle svi su resenja.</p>
        <div class="math-block">
          \[ \text{Zajednickih elemenata: } \mathbf{6} \]
        </div>

        <p><span class="highlight-blue">(E)</span> Proveravamo pazljivo:</p>
        <ul style="list-style: none; padding-left: 16px; color: #cbd5e1;">
          <li>\(\frac{2\pi}{3}\): \(\sin\frac{2\pi}{3} = \frac{\sqrt{3}}{2}\) -- <span class="highlight-green">DA</span></li>
          <li>\(-\frac{4\pi}{3} = \frac{2\pi}{3} - 2\pi\): \(\sin = \frac{\sqrt{3}}{2}\) -- <span class="highlight-green">DA</span></li>
          <li>\(-\frac{5\pi}{3} = \frac{\pi}{3} - 2\pi\): \(\sin = \frac{\sqrt{3}}{2}\) -- <span class="highlight-green">DA</span></li>
          <li>\(-\frac{2\pi}{3}\): \(\sin\left(-\frac{2\pi}{3}\right) = -\frac{\sqrt{3}}{2} < 0\) -- NE</li>
          <li>\(\frac{4\pi}{3}\): \(\sin\frac{4\pi}{3} = -\frac{\sqrt{3}}{2} < 0\) -- NE</li>
          <li>\(\frac{5\pi}{3}\): \(\sin\frac{5\pi}{3} = -\frac{\sqrt{3}}{2} < 0\) -- NE</li>
        </ul>
        <div class="math-block">
          \[ \text{Zajednickih elemenata: } \mathbf{3} \quad \checkmark \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <div class="checkpoint">
      <details>
        <summary>Proveri se: Zasto je \(-\frac{4\pi}{3}\) resenje, a \(-\frac{2\pi}{3}\) nije?</summary>
        <div class="details-content">
          <p>Kljuc je u znaku sinusa:</p>
          <div class="math-block">
            \[ \sin\!\left(-\frac{4\pi}{3}\right) = \sin\!\left(-\frac{4\pi}{3} + 2\pi\right) = \sin\frac{2\pi}{3} = \frac{\sqrt{3}}{2} > 0 \quad \checkmark \]
          </div>
          <div class="math-block">
            \[ \sin\!\left(-\frac{2\pi}{3}\right) = -\sin\frac{2\pi}{3} = -\frac{\sqrt{3}}{2} < 0 \quad \times \]
          </div>
          <p>Ugao \(-\frac{4\pi}{3}\) se (posle dodavanja \(2\pi\)) nalazi u drugom kvadrantu gde je sinus pozitivan, dok ugao \(-\frac{2\pi}{3}\) pripada trecem kvadrantu gde je sinus negativan.</p>
        </div>
      </details>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2 style="color: #a78bfa; margin-bottom: 8px;">Kljucni uvid</h2>
    <p style="color: #cbd5e1;">Jednacina se svodi na \(\sin x = \frac{\sqrt{3}}{2}\), ali je kljucno proveriti svaki element skupa posebno -- ugao moze imati istu apsolutnu vrednost sinusa, ali razlicit znak!</p>
    <div class="insight-formula">
      \[ \sin x = \frac{\sqrt{3}}{2} \implies x = \frac{\pi}{3} + 2k\pi \;\;\text{ili}\;\; x = \frac{2\pi}{3} + 2k\pi \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="final-answer">
    <h2>Konacan odgovor</h2>
    <div class="answer-value">(E)</div>
    <p style="color: #cbd5e1; margin-bottom: 16px;">
      \( S = \left\{\frac{2\pi}{3},\, -\frac{4\pi}{3},\, -\frac{5\pi}{3},\, -\frac{2\pi}{3},\, \frac{4\pi}{3},\, \frac{5\pi}{3}\right\} \)
    </p>

    <div class="options-review">
      <div class="option-card"><strong>(A)</strong><br>0 zajednickih</div>
      <div class="option-card"><strong>(B)</strong><br>2 zajednicka</div>
      <div class="option-card"><strong>(C)</strong><br>2 zajednicka</div>
      <div class="option-card"><strong>(D)</strong><br>6 zajednickih</div>
      <div class="option-card correct"><strong>(E)</strong><br>3 zajednicka</div>
    </div>

    <div class="verification-note">
      <strong>Verifikacija:</strong> U skupu (E), tri elementa \(\frac{2\pi}{3}\), \(-\frac{4\pi}{3}\) i \(-\frac{5\pi}{3}\) daju
      \(\sin x = \frac{\sqrt{3}}{2}\) (pozitivan sinus, drugi ili prvi kvadrant), dok preostala tri elementa daju
      \(\sin x = -\frac{\sqrt{3}}{2}\) (negativan sinus, van domena). Tacno 3 zajednicka elementa.
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="pitfall-box">
    <h2>Ceste greske</h2>
    <ul>
      <li>
        <strong>Zaboraviti uslov definisanosti \(\sin x > 0\).</strong> Jednacina \(\sin x = \frac{\sqrt{3}}{2}\) takodje ima "anti-resenja" gde bi \(\sin x = -\frac{\sqrt{3}}{2}\), ali ta se odbacuju jer logaritam ne postoji za negativnu osnovu. Mnogi ucenici preskoce ovaj korak i pogresno ubroje sve uglove.
      </li>
      <li>
        <strong>Pogresno odbaciti negativne uglove.</strong> Ugao \(-\frac{4\pi}{3}\) izgleda negativno, ali nakon dodavanja \(2\pi\) postaje \(\frac{2\pi}{3}\) -- sa pozitivnim sinusom. Ne sudite po znaku ugla, vec po vrednosti sinusa!
      </li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="challenge-box">
    <h2>Izazov za napredne</h2>
    <p style="color: #cbd5e1; margin-bottom: 12px;">
      Sta bi se desilo da je u zadatku umesto \(\log_{\sin^2 x} \frac{4}{3}\) stajalo \(\log_{\sin^3 x} \frac{8}{27}\)? Da li bi jednacina imala ista resenja?
    </p>
    <details>
      <summary>Nagoveštaj</summary>
      <div class="details-content">
        <p>Primeni promenu baze i uprostiti. Primetite da je \(\frac{8}{27} = \left(\frac{2}{3}\right)^3\), pa bi \(\ln\frac{8}{27} = 3\ln\frac{2}{3}\). Takodje, \(\ln(\sin^3 x) = 3\ln(\sin x)\). Vidite da li se jednacina svede na istu formu.</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  // Unit circle interactive diagram
  const canvas = document.getElementById('unitCircle');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;
  const cx = W / 2;
  const cy = H / 2;
  const R = 200;

  // Draggable angle
  let dragAngle = Math.PI / 3;
  let isDragging = false;

  function toCanvas(x, y) {
    return { x: cx + x * R, y: cy - y * R };
  }

  // Solution angles (in [0, 2pi])
  const solutionAngles = [Math.PI / 3, 2 * Math.PI / 3];
  const solutionLabels = ['\u03C0/3', '2\u03C0/3'];

  function draw() {
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Grid
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (let i = -1; i <= 1; i += 0.25) {
      if (i === 0) continue;
      const p1 = toCanvas(-1.3, i);
      const p2 = toCanvas(1.3, i);
      ctx.beginPath();
      ctx.moveTo(p1.x, p1.y);
      ctx.lineTo(p2.x, p2.y);
      ctx.stroke();

      const p3 = toCanvas(i, -1.3);
      const p4 = toCanvas(i, 1.3);
      ctx.beginPath();
      ctx.moveTo(p3.x, p3.y);
      ctx.lineTo(p4.x, p4.y);
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(cx - R * 1.3, cy);
    ctx.lineTo(cx + R * 1.3, cy);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(cx, cy + R * 1.3);
    ctx.lineTo(cx, cy - R * 1.3);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('x', cx + R * 1.25, cy - 8);
    ctx.textAlign = 'center';
    ctx.fillText('y', cx + 12, cy - R * 1.2);

    // sin = sqrt(3)/2 line
    const sinVal = Math.sqrt(3) / 2;
    const lineY = toCanvas(0, sinVal).y;
    ctx.setLineDash([6, 4]);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(cx - R * 1.2, lineY);
    ctx.lineTo(cx + R * 1.2, lineY);
    ctx.stroke();
    ctx.setLineDash([]);

    ctx.fillStyle = '#4ade80';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('sin x = \u221A3/2', cx + R * 1.05, lineY - 6);

    // Unit circle
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.arc(cx, cy, R, 0, 2 * Math.PI);
    ctx.stroke();

    // Solution points
    for (let i = 0; i < solutionAngles.length; i++) {
      const a = solutionAngles[i];
      const px = Math.cos(a);
      const py = Math.sin(a);
      const p = toCanvas(px, py);

      // Dashed line to y-axis
      ctx.setLineDash([4, 3]);
      ctx.strokeStyle = 'rgba(74, 222, 128, 0.4)';
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.moveTo(p.x, p.y);
      ctx.lineTo(cx, p.y);
      ctx.stroke();
      ctx.setLineDash([]);

      // Point
      ctx.beginPath();
      ctx.arc(p.x, p.y, 7, 0, 2 * Math.PI);
      ctx.fillStyle = '#4ade80';
      ctx.fill();
      ctx.strokeStyle = '#0c1222';
      ctx.lineWidth = 2;
      ctx.stroke();

      // Label
      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = a < Math.PI / 2 ? 'left' : 'right';
      ctx.fillText(solutionLabels[i], p.x + (a < Math.PI / 2 ? 12 : -12), p.y - 14);
    }

    // Draggable point
    const dx = Math.cos(dragAngle);
    const dy = Math.sin(dragAngle);
    const dp = toCanvas(dx, dy);

    // Radius line
    ctx.strokeStyle = 'rgba(244, 114, 182, 0.6)';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(cx, cy);
    ctx.lineTo(dp.x, dp.y);
    ctx.stroke();

    // Vertical projection (sin)
    ctx.setLineDash([3, 3]);
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(dp.x, dp.y);
    ctx.lineTo(dp.x, cy);
    ctx.stroke();
    ctx.setLineDash([]);

    // sin value bar on y-axis
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(cx, cy);
    ctx.lineTo(cx, dp.y);
    ctx.stroke();

    // Draggable point
    ctx.beginPath();
    ctx.arc(dp.x, dp.y, 9, 0, 2 * Math.PI);
    ctx.fillStyle = '#f472b6';
    ctx.fill();
    ctx.strokeStyle = '#0c1222';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Info text
    const angleDegs = ((dragAngle * 180 / Math.PI) % 360 + 360) % 360;
    const sinValue = Math.sin(dragAngle);
    ctx.fillStyle = '#e2e8f0';
    ctx.font = '14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    const angleStr = (dragAngle / Math.PI).toFixed(2);
    ctx.fillText('Ugao: ' + angleStr + '\u03C0 (' + angleDegs.toFixed(0) + '\u00B0)', cx, cy + R + 40);
    ctx.fillText('sin x = ' + sinValue.toFixed(4).replace('.', ','), cx, cy + R + 60);

    // Highlight if sin ≈ sqrt(3)/2
    if (Math.abs(sinValue - sinVal) < 0.02) {
      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
      ctx.fillText('sin x = \u221A3/2  \u2714', cx, cy + R + 80);
    }

    // Tick marks on axes
    ctx.fillStyle = '#94a3b8';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    const ticks = [-1, -0.5, 0.5, 1];
    for (const t of ticks) {
      // x-axis ticks
      const tx = toCanvas(t, 0);
      ctx.beginPath();
      ctx.moveTo(tx.x, tx.y - 4);
      ctx.lineTo(tx.x, tx.y + 4);
      ctx.strokeStyle = '#94a3b8';
      ctx.lineWidth = 1;
      ctx.stroke();
      ctx.fillText(String(t).replace('.', ','), tx.x, tx.y + 18);

      // y-axis ticks
      const ty = toCanvas(0, t);
      ctx.beginPath();
      ctx.moveTo(ty.x - 4, ty.y);
      ctx.lineTo(ty.x + 4, ty.y);
      ctx.stroke();
      ctx.textAlign = 'right';
      ctx.fillText(String(t).replace('.', ','), ty.x - 8, ty.y + 4);
      ctx.textAlign = 'center';
    }
  }

  function getAngleFromPos(px, py) {
    const dx = (px - cx) / R;
    const dy = -(py - cy) / R;
    return Math.atan2(dy, dx);
  }

  function handleStart(px, py) {
    const dp = toCanvas(Math.cos(dragAngle), Math.sin(dragAngle));
    const dist = Math.sqrt((px - dp.x) ** 2 + (py - dp.y) ** 2);
    if (dist < 25) {
      isDragging = true;
    }
  }

  function handleMove(px, py) {
    if (!isDragging) return;
    dragAngle = getAngleFromPos(px, py);
    draw();
  }

  function handleEnd() {
    isDragging = false;
  }

  canvas.addEventListener('mousedown', function(e) {
    const rect = canvas.getBoundingClientRect();
    const scaleX = W / rect.width;
    const scaleY = H / rect.height;
    handleStart((e.clientX - rect.left) * scaleX, (e.clientY - rect.top) * scaleY);
  });

  canvas.addEventListener('mousemove', function(e) {
    const rect = canvas.getBoundingClientRect();
    const scaleX = W / rect.width;
    const scaleY = H / rect.height;
    handleMove((e.clientX - rect.left) * scaleX, (e.clientY - rect.top) * scaleY);
  });

  canvas.addEventListener('mouseup', handleEnd);
  canvas.addEventListener('mouseleave', handleEnd);

  canvas.addEventListener('touchstart', function(e) {
    e.preventDefault();
    const rect = canvas.getBoundingClientRect();
    const scaleX = W / rect.width;
    const scaleY = H / rect.height;
    const t = e.touches[0];
    handleStart((t.clientX - rect.left) * scaleX, (t.clientY - rect.top) * scaleY);
  });

  canvas.addEventListener('touchmove', function(e) {
    e.preventDefault();
    const rect = canvas.getBoundingClientRect();
    const scaleX = W / rect.width;
    const scaleY = H / rect.height;
    const t = e.touches[0];
    handleMove((t.clientX - rect.left) * scaleX, (t.clientY - rect.top) * scaleY);
  });

  canvas.addEventListener('touchend', function(e) {
    e.preventDefault();
    handleEnd();
  });

  // Step click highlighting
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(function(step) {
    step.addEventListener('click', function() {
      steps.forEach(function(s) { s.classList.remove('active'); });
      step.classList.toggle('active');
    });
  });

  draw();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Logaritamska jednacina sa trigonometrijskom osnovom",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["logaritmi", "promena baze", "trigonometrijske jednacine", "domen funkcije"]
}
BRAINSPARK_META-->