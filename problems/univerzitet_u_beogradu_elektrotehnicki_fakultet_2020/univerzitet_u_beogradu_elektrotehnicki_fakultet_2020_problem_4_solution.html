<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Inverzna funkcija korenske funkcije</title>
<script type="text/info" id="logic-scratchpad">
Problem: Find the inverse of f(x) = 3*sqrt(x - 3) + 3,
where f : [3, +inf) -> [3, +inf).

Step 1: Set y = f(x)
  y = 3*sqrt(x - 3) + 3

Step 2: Solve for x in terms of y
  y - 3 = 3*sqrt(x - 3)
  (y - 3)/3 = sqrt(x - 3)
  ((y - 3)/3)^2 = x - 3
  x = ((y - 3)/3)^2 + 3

Step 3: Expand
  x = (y - 3)^2 / 9 + 3
  x = (y^2 - 6y + 9) / 9 + 3
  x = y^2/9 - 6y/9 + 9/9 + 3
  x = y^2/9 - 2y/3 + 1 + 3
  x = y^2/9 - 2y/3 + 4

Step 4: Write the inverse function g(x)
  g(x) = (1/9)x^2 - (2/3)x + 4

This matches answer (A).

VERIFICATION 1: f(g(x)) = x
  g(x) - 3 = x^2/9 - 2x/3 + 4 - 3 = x^2/9 - 2x/3 + 1
  Note: x^2/9 - 2x/3 + 1 = (x/3)^2 - 2*(x/3)*1 + 1^2 = (x/3 - 1)^2 = ((x-3)/3)^2
  sqrt(g(x) - 3) = sqrt(((x-3)/3)^2) = |x-3|/3 = (x-3)/3  (since x >= 3)
  f(g(x)) = 3 * (x-3)/3 + 3 = (x - 3) + 3 = x  ✓

VERIFICATION 2: g(f(x)) = x
  f(x) = 3*sqrt(x-3) + 3
  g(f(x)) = (1/9)(3*sqrt(x-3) + 3)^2 - (2/3)(3*sqrt(x-3) + 3) + 4
  = (1/9)(9(x-3) + 18*sqrt(x-3) + 9) - (2/3)(3*sqrt(x-3) + 3) + 4
  = (x - 3 + 2*sqrt(x-3) + 1) - (2*sqrt(x-3) + 2) + 4
  = x - 3 + 2*sqrt(x-3) + 1 - 2*sqrt(x-3) - 2 + 4
  = x  ✓

VERIFICATION 3: Check specific value
  f(3) = 3*sqrt(0) + 3 = 3 → g(3) should be 3
  g(3) = (1/9)*9 - (2/3)*3 + 4 = 1 - 2 + 4 = 3 ✓

  f(4) = 3*sqrt(1) + 3 = 6 → g(6) should be 4
  g(6) = (1/9)*36 - (2/3)*6 + 4 = 4 - 4 + 4 = 4 ✓

  f(7) = 3*sqrt(4) + 3 = 9 → g(9) should be 7
  g(9) = (1/9)*81 - (2/3)*9 + 4 = 9 - 6 + 4 = 7 ✓

Check other options to confirm they are wrong:
(B) g(x) = x^2/9 + 2x/3 + 4
  g(3) = 1 + 2 + 4 = 7 ≠ 3  ✗

(C) g(x) = x^2/9 + 2x/3 - 2
  g(3) = 1 + 2 - 2 = 1 ≠ 3  ✗

(D) g(x) = x^2/9 - 2x/3 + 2
  g(3) = 1 - 2 + 2 = 1 ≠ 3  ✗

(E) g(x) = 9(x^2 - 6x + 28/3) = 9x^2 - 54x + 84
  g(3) = 81 - 162 + 84 = 3
  g(6) = 324 - 324 + 84 = 84 ≠ 4  ✗

Answer is definitively (A): g(x) = (1/9)x^2 - (2/3)x + 4
</script>
<script>
MathJax={tex:{inlineMath:[['\\(','\\)'],['$','$']],displayMath:[['\\[','\\]']]},svg:{fontCache:'global'}};
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#0f172a;color:#e2e8f0;font-family:'Segoe UI',system-ui,-apple-system,sans-serif;line-height:1.7;padding:20px;max-width:860px;margin:0 auto}
h1{background:linear-gradient(135deg,#60a5fa,#a78bfa);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;font-size:1.9rem;margin-bottom:6px;line-height:1.3}
h2{color:#60a5fa;font-size:1.25rem;margin-bottom:12px;display:flex;align-items:center;gap:8px}
.subtitle{color:#94a3b8;font-size:1.05rem;margin-bottom:28px}
.card{background:#1e293b;border:1px solid #334155;border-radius:14px;padding:22px;margin-bottom:20px}
.problem-statement{border-left:4px solid #a78bfa}
.problem-statement p{font-size:1.08rem;margin-bottom:12px}
.given-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:10px;margin-top:14px}
.given-item{background:#0f172a;border:1px solid #334155;border-radius:10px;padding:10px 14px;text-align:center;font-size:1.05rem}
.given-item .label{color:#94a3b8;font-size:0.85rem;margin-bottom:4px}
.given-item .value{color:#e2e8f0;font-size:1rem}
.given-item.answer-option{cursor:default;transition:border-color 0.2s}
.badge{display:inline-block;background:linear-gradient(135deg,#60a5fa,#a78bfa);color:#0f172a;font-weight:700;font-size:0.82rem;padding:3px 10px;border-radius:20px;margin-right:8px}
.step{margin-bottom:18px;padding:8px 0 8px 12px;border-left:3px solid transparent;border-radius:4px;transition:border-color 0.2s,background 0.2s;cursor:pointer}
.step:hover,.step.active{border-left-color:#34d399;background:rgba(52,211,153,0.04)}
.step p,.step div{margin-top:8px}
details{background:#0f172a;border:1px solid #334155;border-radius:10px;margin:15px 0;padding:14px 18px}
details summary{cursor:pointer;color:#60a5fa;font-weight:600;user-select:none}
details summary:hover{color:#93c5fd}
details[open] summary{margin-bottom:10px}
.theory-card{border-left:4px solid #a78bfa}
.plan-card{border-left:4px solid #60a5fa}
.insight-card{border-left:4px solid #f472b6;background:linear-gradient(135deg,#1e293b,#2a1f3d)}
.final-answer{border:2px solid #34d399;background:linear-gradient(135deg,#1e293b,#1a2e2a)}
.final-answer .answer-value{font-size:1.5rem;color:#4ade80;text-align:center;margin:14px 0;font-weight:700}
.final-options{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:10px;margin:14px 0}
.final-option{background:#0f172a;border:1px solid #334155;border-radius:10px;padding:10px 14px;text-align:center;font-size:1.05rem}
.final-option.correct{border-color:#34d399;background:rgba(52,211,153,0.1)}
.final-option.correct .value{color:#4ade80;font-weight:700}
.pitfall{background:#1e293b;border-left:4px solid #e09468;border-radius:0 10px 10px 0;padding:14px 18px;margin-bottom:10px}
.pitfall-title{color:#e09468;font-weight:700;margin-bottom:4px}
.challenge-card{border:1px dashed #a78bfa;background:linear-gradient(135deg,#1e293b,#1f2347)}
.math-box{background:rgba(56,189,248,0.08);border:1px solid rgba(56,189,248,0.15);border-radius:8px;padding:12px 16px;margin:8px 0}
.muted{color:#94a3b8}
.highlight-pink{color:#f472b6;font-weight:600}
.highlight-green{color:#4ade80;font-weight:600}
.highlight-blue{color:#60a5fa;font-weight:600}
canvas{display:block;margin:0 auto;border-radius:10px;background:#0c1222;max-width:100%;touch-action:none}
.canvas-wrap{text-align:center}
.slider-wrap{display:flex;align-items:center;gap:12px;margin-top:12px;justify-content:center;flex-wrap:wrap}
.slider-wrap label{color:#94a3b8;font-size:0.9rem}
.slider-wrap input[type="range"]{accent-color:#60a5fa;width:200px}
.slider-wrap .slider-value{color:#60a5fa;font-weight:600;min-width:50px;text-align:center}
@media(max-width:700px){body{padding:12px}h1{font-size:1.45rem}.given-grid,.final-options{grid-template-columns:1fr 1fr}.given-item .value{font-size:0.92rem}.slider-wrap input[type="range"]{width:140px}}
</style>
</head>
<body>

<h1>Inverzna funkcija korenske funkcije</h1>
<p class="subtitle">Algebra &mdash; nalazenje inverzne funkcije, zamena promenljivih, kvadratna funkcija</p>

<!-- Problem Statement -->
<div class="card problem-statement">
<h2>Zadatak</h2>
<p>Inverzna funkcija funkcije \(f : [3, +\infty) \to [3, +\infty)\) date sa</p>
\[f(x) = 3\sqrt{x - 3} + 3\]
<p>jeste funkcija \(g : [3, +\infty) \to [3, +\infty)\) za koju vazi:</p>
<div class="given-grid">
<div class="given-item answer-option" data-option="A">
<div class="label">(A)</div>
<div class="value">\(g(x) = \frac{1}{9}x^2 - \frac{2}{3}x + 4\)</div>
</div>
<div class="given-item answer-option" data-option="B">
<div class="label">(B)</div>
<div class="value">\(g(x) = \frac{1}{9}x^2 + \frac{2}{3}x + 4\)</div>
</div>
<div class="given-item answer-option" data-option="C">
<div class="label">(C)</div>
<div class="value">\(g(x) = \frac{1}{9}x^2 + \frac{2}{3}x - 2\)</div>
</div>
<div class="given-item answer-option" data-option="D">
<div class="label">(D)</div>
<div class="value">\(g(x) = \frac{1}{9}x^2 - \frac{2}{3}x + 2\)</div>
</div>
<div class="given-item answer-option" data-option="E">
<div class="label">(E)</div>
<div class="value">\(g(x) = 9\!\left(x^2 - 6x + \frac{28}{3}\right)\)</div>
</div>
</div>
</div>

<!-- Plan -->
<div class="card plan-card">
<h2>Plan resavanja</h2>
<p>Da bismo nasli inverznu funkciju, postavicemo \(y = f(x)\), a zatim resiti jednacinu po \(x\). Na kraju zamenimo uloge \(x\) i \(y\) i dobijamo formulu za \(g(x)\). Rezultat cemo proveriti kompozicijom \(f(g(x)) = x\).</p>
</div>

<!-- Theory Refresher -->
<div class="card theory-card">
<details>
<summary>Kljucne formule i teoreme</summary>
<div style="margin-top:10px">
<p><strong>Inverzna funkcija:</strong> Ako je \(f\) bijekcija, onda postoji inverzna funkcija \(g = f^{-1}\) takva da:</p>
\[f(g(x)) = x \quad \text{i} \quad g(f(x)) = x\]

<p style="margin-top:12px"><strong>Postupak nalazenja inverzne funkcije:</strong></p>
<ol style="margin-left:20px;margin-top:6px;color:#e2e8f0">
<li>Napisemo \(y = f(x)\)</li>
<li>Resimo jednacinu po \(x\) (izrazimo \(x\) kao funkciju od \(y\))</li>
<li>Zamenimo \(x \leftrightarrow y\) &mdash; dobijamo \(y = g(x)\)</li>
</ol>

<p style="margin-top:12px"><strong>Geometrijska interpretacija:</strong> Graf inverzne funkcije \(g\) je simetrica grafa funkcije \(f\) u odnosu na pravu \(y = x\).</p>

<p style="margin-top:12px"><strong>Kvadrat binoma:</strong></p>
\[(a - b)^2 = a^2 - 2ab + b^2\]
</div>
</details>
</div>

<!-- Visual Aid / Interactive Diagram -->
<div class="card">
<h2>Vizuelni prikaz</h2>
<div class="canvas-wrap">
<canvas id="mainCanvas" width="800" height="520"></canvas>
</div>
<div class="slider-wrap">
<label for="xSlider">\(x =\)</label>
<input type="range" id="xSlider" min="3" max="20" step="0.1" value="7">
<span class="slider-value" id="xValue">7,0</span>
</div>
<p class="muted" style="text-align:center;margin-top:8px;font-size:0.88rem">Pomeri klizac da vidis kako se tacke na \(f\) i \(g\) ogledaju u odnosu na pravu \(y = x\). Plava kriva je \(f(x)\), zelena je \(g(x) = f^{-1}(x)\).</p>
</div>

<!-- Step-by-Step Solution -->
<div class="card">
<h2>Resenje korak po korak</h2>

<div class="step" id="step1">
<p><span class="badge">Korak 1</span> <strong>Postavljamo jednacinu \(y = f(x)\)</strong></p>
<p>Polazimo od definicije funkcije i uvodimo oznaku \(y\) za vrednost funkcije:</p>
<div class="math-box">
\[y = 3\sqrt{x - 3} + 3\]
</div>
<p>Cilj nam je da izrazimo \(x\) kao funkciju od \(y\).</p>
</div>

<div class="step" id="step2">
<p><span class="badge">Korak 2</span> <strong>Izolujemo koren</strong></p>
<p>Prebacujemo slobodan clan na levu stranu:</p>
<div class="math-box">
\[y - 3 = 3\sqrt{x - 3}\]
</div>
<p>Zatim delimo obe strane sa \(3\):</p>
<div class="math-box">
\[\frac{y - 3}{3} = \sqrt{x - 3}\]
</div>
</div>

<div class="step" id="step3">
<p><span class="badge">Korak 3</span> <strong>Kvadriramo obe strane</strong></p>
<p>Da bismo eliminisali kvadratni koren, kvadriramo obe strane jednacine. Posto je \(y \geq 3\) (kodomen funkcije \(f\)), leva strana je nenegativna, pa je kvadriranje ekvivalentna operacija:</p>
<div class="math-box">
\[\left(\frac{y - 3}{3}\right)^{\!2} = x - 3\]
</div>
</div>

<details>
<summary>Proveri sebe: Koliko je \(\left(\frac{y-3}{3}\right)^2\) za \(y = 9\)?</summary>
<p>Za \(y = 9\): \(\left(\frac{9-3}{3}\right)^2 = \left(\frac{6}{3}\right)^2 = 2^2 = 4\). Dakle \(x - 3 = 4\), sto daje \(x = 7\). Provera: \(f(7) = 3\sqrt{7-3} + 3 = 3 \cdot 2 + 3 = 9\). Tacno!</p>
</details>

<div class="step" id="step4">
<p><span class="badge">Korak 4</span> <strong>Izrazavamo \(x\)</strong></p>
<p>Dodajemo \(3\) na obe strane:</p>
<div class="math-box">
\[x = \left(\frac{y - 3}{3}\right)^{\!2} + 3\]
</div>
</div>

<div class="step" id="step5">
<p><span class="badge">Korak 5</span> <strong>Razvijamo izraz</strong></p>
<p>Raspisujemo kvadrat binoma u brojiocu:</p>
<div class="math-box">
\[x = \frac{(y - 3)^2}{9} + 3 = \frac{y^2 - 6y + 9}{9} + 3\]
</div>
<p>Rastavljamo razlomak na pojedinacne clanove:</p>
<div class="math-box">
\[x = \frac{y^2}{9} - \frac{6y}{9} + \frac{9}{9} + 3 = \frac{1}{9}y^2 - \frac{2}{3}y + 1 + 3\]
</div>
<p>Konacno:</p>
<div class="math-box">
\[x = \frac{1}{9}y^2 - \frac{2}{3}y + 4\]
</div>
</div>

<div class="step" id="step6">
<p><span class="badge">Korak 6</span> <strong>Zapisujemo inverznu funkciju</strong></p>
<p>Menjamo uloge promenljivih: \(x \leftrightarrow y\). Posto je \(x\) izrazeno kao funkcija od \(y\), zamenom dobijamo:</p>
<div class="math-box">
\[\boxed{g(x) = \frac{1}{9}x^2 - \frac{2}{3}x + 4}\]
</div>
</div>

<details>
<summary>Proveri sebe: Za koje \(x\) vazi \(g(x) = 3\)?</summary>
<p>Posto je \(g = f^{-1}\) i \(f(3) = 3\sqrt{3-3} + 3 = 3\), mora da vazi \(g(3) = 3\). Proveravamo: \(g(3) = \frac{1}{9} \cdot 9 - \frac{2}{3} \cdot 3 + 4 = 1 - 2 + 4 = 3\). Tacno!</p>
</details>

<div class="step" id="step7">
<p><span class="badge">Korak 7</span> <strong>Verifikacija: \(f(g(x)) = x\)</strong></p>
<p>Proveravamo rezultat kompozicijom. Potrebno nam je \(g(x) - 3\):</p>
<div class="math-box">
\[g(x) - 3 = \frac{1}{9}x^2 - \frac{2}{3}x + 4 - 3 = \frac{1}{9}x^2 - \frac{2}{3}x + 1\]
</div>
<p>Uocavamo da je ovo potpun kvadrat:</p>
<div class="math-box">
\[\frac{1}{9}x^2 - \frac{2}{3}x + 1 = \left(\frac{x}{3}\right)^{\!2} - 2 \cdot \frac{x}{3} \cdot 1 + 1^2 = \left(\frac{x}{3} - 1\right)^{\!2} = \left(\frac{x - 3}{3}\right)^{\!2}\]
</div>
<p>Sada uvrstavamo u \(f\):</p>
<div class="math-box">
\[f(g(x)) = 3\sqrt{\left(\frac{x - 3}{3}\right)^{\!2}} + 3 = 3 \cdot \frac{|x - 3|}{3} + 3\]
</div>
<p>Posto je \(x \geq 3\), vazi \(|x - 3| = x - 3\), pa:</p>
<div class="math-box">
\[f(g(x)) = 3 \cdot \frac{x - 3}{3} + 3 = (x - 3) + 3 = x \quad \checkmark\]
</div>
</div>

<details>
<summary>Proveri sebe: Koliko je \(g(6)\)? Proveri pomocu \(f\).</summary>
<p>\(g(6) = \frac{1}{9} \cdot 36 - \frac{2}{3} \cdot 6 + 4 = 4 - 4 + 4 = 4\). Provera: \(f(4) = 3\sqrt{4 - 3} + 3 = 3 \cdot 1 + 3 = 6\). Tacno! Sto znaci da \(g(6) = 4\) i \(f(4) = 6\) &mdash; funckcije zaista „ponistaju" jedna drugu.</p>
</details>
</div>

<!-- Key Insight -->
<div class="card insight-card">
<h2>Kljucni uvid</h2>
<p>Prilikom nalazenja inverzne funkcije za korensku funkciju, kljucni korak je <strong>izolovanje korena i kvadriranje</strong>. Rezultat je kvadratna funkcija &mdash; sto je i logicno, jer kvadratna i korenska funkcija su medjusobno inverzne operacije.</p>
<p style="margin-top:10px">Kompaktan oblik inverzne funkcije:</p>
<p style="text-align:center;font-size:1.3rem;color:#4ade80;margin-top:12px;font-weight:700">\(\displaystyle g(x) = \left(\frac{x-3}{3}\right)^{\!2} + 3 = \frac{1}{9}x^2 - \frac{2}{3}x + 4\)</p>
</div>

<!-- Final Answer -->
<div class="card final-answer">
<h2>Konacan odgovor</h2>
<div class="answer-value">(A) \(\displaystyle g(x) = \frac{1}{9}x^2 - \frac{2}{3}x + 4\)</div>
<div class="final-options">
<div class="final-option correct" data-option="A">
<div class="label" style="color:#94a3b8;font-size:0.85rem">(A)</div>
<div class="value">\(\frac{1}{9}x^2 - \frac{2}{3}x + 4\)</div>
</div>
<div class="final-option" data-option="B">
<div class="label" style="color:#94a3b8;font-size:0.85rem">(B)</div>
<div class="value">\(\frac{1}{9}x^2 + \frac{2}{3}x + 4\)</div>
</div>
<div class="final-option" data-option="C">
<div class="label" style="color:#94a3b8;font-size:0.85rem">(C)</div>
<div class="value">\(\frac{1}{9}x^2 + \frac{2}{3}x - 2\)</div>
</div>
<div class="final-option" data-option="D">
<div class="label" style="color:#94a3b8;font-size:0.85rem">(D)</div>
<div class="value">\(\frac{1}{9}x^2 - \frac{2}{3}x + 2\)</div>
</div>
<div class="final-option" data-option="E">
<div class="label" style="color:#94a3b8;font-size:0.85rem">(E)</div>
<div class="value">\(9\!\left(x^2 - 6x + \frac{28}{3}\right)\)</div>
</div>
</div>
<p style="margin-top:12px"><strong>Verifikacija:</strong> Proverili smo da vazi \(f(g(x)) = x\) algebarski (Korak 7). Dodatna numericka provera za konkretne vrednosti:</p>
<div class="math-box">
\[\begin{align}
g(3) &= 1 - 2 + 4 = 3, &\quad f(3) &= 3 \quad \checkmark \\
g(6) &= 4 - 4 + 4 = 4, &\quad f(4) &= 6 \quad \checkmark \\
g(9) &= 9 - 6 + 4 = 7, &\quad f(7) &= 9 \quad \checkmark
\end{align}\]
</div>
</div>

<!-- Pitfalls -->
<div class="card">
<h2>Ceste greske</h2>
<div class="pitfall">
<p class="pitfall-title">Greska u znaku prilikom razvijanja \((y-3)^2\)</p>
<p>Cesta greska je napisati \((y-3)^2 = y^2 + 6y + 9\) umesto \(y^2 - 6y + 9\). Obratite paznju na znak ispred sredisnjeg clana: \((a - b)^2 = a^2 \color{#f472b6}{- 2ab} + b^2\). Ova greska vodi na pogresan odgovor (B).</p>
</div>
<div class="pitfall">
<p class="pitfall-title">Zaboravljanje slobodnog clana \(+3\)</p>
<p>Posto je \(x = \frac{(y-3)^2}{9} + 3\), ne smemo zaboraviti da dodamo \(3\) na kraju. Bez tog clana dobijamo \(g(x) = \frac{1}{9}x^2 - \frac{2}{3}x + 1\), sto ne odgovara nijednom ponudjenom odgovoru. Uvek proverite uvrstivanjem: \(g(3)\) mora biti \(3\).</p>
</div>
</div>

<!-- Challenge -->
<div class="card challenge-card">
<h2>Izazov za razmisljanje</h2>
<p>Neka je \(h : [0, +\infty) \to [5, +\infty)\) data sa \(h(x) = 2\sqrt[3]{x} + 5\). Nadjite inverznu funkciju \(h^{-1}(x)\).</p>
<details>
<summary>Nagovestaj</summary>
<p>Postupak je isti: postavite \(y = 2\sqrt[3]{x} + 5\), izolujte kubni koren i onda podignite na treci stepen. Obratite paznju da kubni koren ima inverz \(t \mapsto t^3\), analogno tome kako kvadratni koren ima inverz \(t \mapsto t^2\).</p>
</details>
</div>

<script>
(() => {
  const canvas = document.getElementById('mainCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  const slider = document.getElementById('xSlider');
  const xValueEl = document.getElementById('xValue');

  let currentX = 7;

  function f(x) {
    if (x < 3) return NaN;
    return 3 * Math.sqrt(x - 3) + 3;
  }

  function g(x) {
    if (x < 3) return NaN;
    return (1 / 9) * x * x - (2 / 3) * x + 4;
  }

  // Coordinate system
  const originX = 60;
  const originY = H - 60;
  const scale = 22;

  function toCanvas(x, y) {
    return {
      x: originX + x * scale,
      y: originY - y * scale
    };
  }

  function fromCanvas(cx, cy) {
    return {
      x: (cx - originX) / scale,
      y: (originY - cy) / scale
    };
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Grid lines
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (let gx = 0; gx <= 30; gx += 2) {
      var p = toCanvas(gx, 0);
      if (p.x > 0 && p.x < W) {
        ctx.beginPath();
        ctx.moveTo(p.x, 10);
        ctx.lineTo(p.x, H - 10);
        ctx.stroke();
      }
    }
    for (let gy = 0; gy <= 30; gy += 2) {
      var p2 = toCanvas(0, gy);
      if (p2.y > 10 && p2.y < H - 10) {
        ctx.beginPath();
        ctx.moveTo(10, p2.y);
        ctx.lineTo(W - 10, p2.y);
        ctx.stroke();
      }
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(originX, 10);
    ctx.lineTo(originX, H - 10);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(10, originY);
    ctx.lineTo(W - 10, originY);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '11px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    for (let gx = 2; gx <= 28; gx += 2) {
      var p3 = toCanvas(gx, 0);
      if (p3.x < W - 20) {
        ctx.fillText(String(gx), p3.x, originY + 6);
      }
    }
    ctx.textAlign = 'right';
    ctx.textBaseline = 'middle';
    for (let gy = 2; gy <= 28; gy += 2) {
      var p4 = toCanvas(0, gy);
      if (p4.y > 20) {
        ctx.fillText(String(gy), originX - 8, p4.y);
      }
    }

    // y = x line (dashed)
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([8, 6]);
    ctx.beginPath();
    var yx1 = toCanvas(0, 0);
    var yx2 = toCanvas(28, 28);
    ctx.moveTo(yx1.x, yx1.y);
    ctx.lineTo(yx2.x, yx2.y);
    ctx.stroke();
    ctx.setLineDash([]);

    // Label y = x
    ctx.fillStyle = '#475569';
    ctx.font = 'italic 13px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    var yxLabel = toCanvas(17.5, 18.5);
    ctx.save();
    ctx.translate(yxLabel.x, yxLabel.y);
    ctx.rotate(-Math.atan(1));
    ctx.fillText('y = x', 0, 0);
    ctx.restore();

    // Draw f(x) curve (blue)
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    var first = true;
    for (var px = 0; px < W; px++) {
      var coords = fromCanvas(px, 0);
      var xVal = coords.x;
      var yVal = f(xVal);
      if (isNaN(yVal)) { first = true; continue; }
      var pt = toCanvas(xVal, yVal);
      if (pt.y < -50 || pt.y > H + 50) { first = true; continue; }
      if (first) {
        ctx.moveTo(pt.x, pt.y);
        first = false;
      } else {
        ctx.lineTo(pt.x, pt.y);
      }
    }
    ctx.stroke();

    // Draw g(x) curve (green)
    ctx.strokeStyle = '#34d399';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    first = true;
    for (var px2 = 0; px2 < W; px2++) {
      var coords2 = fromCanvas(px2, 0);
      var xVal2 = coords2.x;
      var yVal2 = g(xVal2);
      if (isNaN(yVal2)) { first = true; continue; }
      var pt2 = toCanvas(xVal2, yVal2);
      if (pt2.y < -50 || pt2.y > H + 50) { first = true; continue; }
      if (first) {
        ctx.moveTo(pt2.x, pt2.y);
        first = false;
      } else {
        ctx.lineTo(pt2.x, pt2.y);
      }
    }
    ctx.stroke();

    // Label curves
    ctx.font = 'bold 14px Segoe UI, sans-serif';
    ctx.textAlign = 'left';

    // f(x) label
    ctx.fillStyle = '#60a5fa';
    var fLabelX = 15;
    var fLabelPt = toCanvas(fLabelX, f(fLabelX));
    if (fLabelPt.y > 20 && fLabelPt.y < H - 20 && fLabelPt.x < W - 40) {
      ctx.fillText('f(x)', fLabelPt.x + 8, fLabelPt.y - 14);
    }

    // g(x) label
    ctx.fillStyle = '#34d399';
    var gLabelX = 18;
    var gLabelPt = toCanvas(gLabelX, g(gLabelX));
    if (gLabelPt.y > 20 && gLabelPt.y < H - 20 && gLabelPt.x < W - 40) {
      ctx.fillText('g(x)', gLabelPt.x + 8, gLabelPt.y + 16);
    }

    // Fixed point (3,3)
    var fpPt = toCanvas(3, 3);
    ctx.fillStyle = '#a78bfa';
    ctx.beginPath();
    ctx.arc(fpPt.x, fpPt.y, 5, 0, 2 * Math.PI);
    ctx.fill();
    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 12px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('(3, 3)', fpPt.x + 8, fpPt.y - 8);

    // Interactive point on f and its mirror on g
    var fVal = f(currentX);
    if (!isNaN(fVal)) {
      var ptF = toCanvas(currentX, fVal);
      var ptG = toCanvas(fVal, currentX); // mirror: (a, b) -> (b, a)

      // Dashed line connecting the two points through y=x
      ctx.strokeStyle = 'rgba(244,114,182,0.4)';
      ctx.lineWidth = 1.5;
      ctx.setLineDash([5, 4]);
      ctx.beginPath();
      ctx.moveTo(ptF.x, ptF.y);
      ctx.lineTo(ptG.x, ptG.y);
      ctx.stroke();
      ctx.setLineDash([]);

      // Point on y=x (midpoint of reflection)
      var midPt = toCanvas((currentX + fVal) / 2, (currentX + fVal) / 2);
      ctx.fillStyle = 'rgba(244,114,182,0.5)';
      ctx.beginPath();
      ctx.arc(midPt.x, midPt.y, 3, 0, 2 * Math.PI);
      ctx.fill();

      // Glow for point on f
      var grad1 = ctx.createRadialGradient(ptF.x, ptF.y, 0, ptF.x, ptF.y, 16);
      grad1.addColorStop(0, 'rgba(96,165,250,0.4)');
      grad1.addColorStop(1, 'rgba(96,165,250,0)');
      ctx.fillStyle = grad1;
      ctx.beginPath();
      ctx.arc(ptF.x, ptF.y, 16, 0, 2 * Math.PI);
      ctx.fill();

      ctx.fillStyle = '#60a5fa';
      ctx.beginPath();
      ctx.arc(ptF.x, ptF.y, 5, 0, 2 * Math.PI);
      ctx.fill();

      // Glow for point on g
      var grad2 = ctx.createRadialGradient(ptG.x, ptG.y, 0, ptG.x, ptG.y, 16);
      grad2.addColorStop(0, 'rgba(52,211,153,0.4)');
      grad2.addColorStop(1, 'rgba(52,211,153,0)');
      ctx.fillStyle = grad2;
      ctx.beginPath();
      ctx.arc(ptG.x, ptG.y, 16, 0, 2 * Math.PI);
      ctx.fill();

      ctx.fillStyle = '#34d399';
      ctx.beginPath();
      ctx.arc(ptG.x, ptG.y, 5, 0, 2 * Math.PI);
      ctx.fill();

      // Labels for points
      ctx.font = '12px Segoe UI, sans-serif';
      ctx.textAlign = 'left';

      var xStr = currentX.toFixed(1).replace('.', ',');
      var fStr = fVal.toFixed(1).replace('.', ',');

      ctx.fillStyle = '#60a5fa';
      if (ptF.y > 30 && ptF.x < W - 100) {
        ctx.fillText('(' + xStr + '; ' + fStr + ')', ptF.x + 10, ptF.y - 12);
      }

      ctx.fillStyle = '#34d399';
      if (ptG.y > 30 && ptG.x < W - 100) {
        ctx.fillText('(' + fStr + '; ' + xStr + ')', ptG.x + 10, ptG.y - 12);
      }
    }

    // Info box
    ctx.fillStyle = 'rgba(15,23,42,0.92)';
    var boxX = W - 240;
    var boxY = 16;
    var boxW = 224;
    var boxH = 70;
    ctx.beginPath();
    ctx.moveTo(boxX + 8, boxY);
    ctx.lineTo(boxX + boxW - 8, boxY);
    ctx.quadraticCurveTo(boxX + boxW, boxY, boxX + boxW, boxY + 8);
    ctx.lineTo(boxX + boxW, boxY + boxH - 8);
    ctx.quadraticCurveTo(boxX + boxW, boxY + boxH, boxX + boxW - 8, boxY + boxH);
    ctx.lineTo(boxX + 8, boxY + boxH);
    ctx.quadraticCurveTo(boxX, boxY + boxH, boxX, boxY + boxH - 8);
    ctx.lineTo(boxX, boxY + 8);
    ctx.quadraticCurveTo(boxX, boxY, boxX + 8, boxY);
    ctx.closePath();
    ctx.fill();
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.stroke();

    ctx.font = '13px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    ctx.textBaseline = 'top';

    if (!isNaN(fVal)) {
      var xDisp = currentX.toFixed(1).replace('.', ',');
      var fDisp = fVal.toFixed(2).replace('.', ',');
      var gDisp = g(fVal).toFixed(2).replace('.', ',');

      ctx.fillStyle = '#60a5fa';
      ctx.fillText('f(' + xDisp + ') = ' + fDisp, boxX + 14, boxY + 14);

      ctx.fillStyle = '#34d399';
      ctx.fillText('g(' + fDisp + ') = ' + gDisp, boxX + 14, boxY + 38);
    }

    // Title at bottom
    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'bottom';
    ctx.fillText('f(x) i njena inverzna g(x) su simetricne u odnosu na y = x', W / 2, H - 8);
  }

  function formatDecimal(n) {
    return n.toFixed(1).replace('.', ',');
  }

  function onSliderChange() {
    currentX = parseFloat(slider.value);
    xValueEl.textContent = formatDecimal(currentX);
    draw();
  }

  slider.addEventListener('input', onSliderChange);

  draw();
})();
</script>

<script>
(() => {
  // Step click highlighting
  var steps = document.querySelectorAll('.step');
  steps.forEach(function(step) {
    step.addEventListener('click', function() {
      steps.forEach(function(s) { s.classList.remove('active'); });
      step.classList.add('active');
    });
  });
})();
</script>

</body>
</html>
<!--BRAINSPARK_META{"title":"Inverzna funkcija korenske funkcije","subject":"math","unit":"algebra","topic_tags":["inverzna funkcija","korenska funkcija","kvadratna funkcija","kompozicija funkcija","zamena promenljivih"]}BRAINSPARK_META-->