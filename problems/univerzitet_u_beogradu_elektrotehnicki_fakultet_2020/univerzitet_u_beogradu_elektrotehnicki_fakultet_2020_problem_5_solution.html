<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kvadratna funkcija sa grafika</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
  Problem:
  Dat je grafik funkcije f(x) = ax^2 + bx + c, a, b, c realni brojevi.
  Grafik je parabola okrenuta nadole (a < 0).
  Nule: x = -2 i x = 3
  Teme (maksimum): (1/2, 25/4)
  Trazi se: a(b + c)

  Korak 1: Rekonstrukcija funkcije iz nula
  Posto su nule x1 = -2 i x2 = 3, funkcija se moze zapisati kao:
  f(x) = a(x - x1)(x - x2) = a(x + 2)(x - 3)

  Korak 2: Odredjivanje koeficijenta a iz temena
  Teme parabole je na x_v = (x1 + x2)/2 = (-2 + 3)/2 = 1/2. OK, to se slaze.
  Vrednost u temenu: f(1/2) = 25/4

  f(1/2) = a(1/2 + 2)(1/2 - 3)
         = a(5/2)(-5/2)
         = a * (-25/4)
         = -25a/4

  Postavljamo: -25a/4 = 25/4
  => a = -1

  Korak 3: Razvijanje u standardni oblik
  f(x) = -1 * (x + 2)(x - 3)
       = -(x^2 - 3x + 2x - 6)
       = -(x^2 - x - 6)
       = -x^2 + x + 6

  Dakle: a = -1, b = 1, c = 6

  Korak 4: Verifikacija
  - f(-2) = -4 + (-2) + 6 = -4 - 2 + 6 = 0 OK
  - f(3) = -9 + 3 + 6 = 0 OK
  - Teme: x_v = -b/(2a) = -1/(2*(-1)) = -1/(-2) = 1/2 OK
  - f(1/2) = -(1/4) + 1/2 + 6 = -1/4 + 1/2 + 6 = -1/4 + 2/4 + 24/4 = 25/4 OK
  - a < 0, parabola okrenuta nadole OK

  Korak 5: Racunanje trazenog izraza
  a(b + c) = (-1)(1 + 6) = (-1)(7) = -7

  Odgovor: (D) -7

  Verifikacija sa datim odgovorom iz PDF-a: (D) -7. Slaze se!

  Alternativni pristup (bez nalazenja b i c pojedinacno):
  f(x) = a(x + 2)(x - 3) = a(x^2 - x - 6) = ax^2 - ax - 6a
  Dakle: b = -a, c = -6a
  b + c = -a + (-6a) = -7a
  a(b + c) = a * (-7a) = -7a^2
  Posto a = -1: a(b + c) = -7 * 1 = -7

  Ali zapravo, mozemo i bez nalazenja a eksplicitno:
  a(b + c) = -7a^2. Ali moramo znati a.
  Iz f(1/2) = 25/4: a * (-25/4) = 25/4 => a = -1 => a^2 = 1
  a(b + c) = -7 * 1 = -7
</script>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
}

.card h2 {
  font-size: 1.3rem;
  color: #60a5fa;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title {
  font-size: 1.3rem;
  color: #60a5fa;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.4rem;
}

.problem-text {
  font-size: 1.15rem;
  line-height: 1.8;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96, 165, 250, 0.08);
  border: 1px solid rgba(96, 165, 250, 0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
  transition: transform 0.2s, border-color 0.2s;
}

.given-item:hover {
  transform: translateY(-2px);
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card h2 {
  color: #a78bfa;
}

.plan-text {
  color: #a78bfa;
  font-size: 1.05rem;
  font-style: italic;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 8px 0;
  user-select: none;
}

details summary:hover {
  color: #93bbfc;
}

details .detail-content {
  padding: 12px 16px;
  background: rgba(30, 41, 59, 0.7);
  border-left: 3px solid #60a5fa;
  border-radius: 0 8px 8px 0;
  margin-top: 8px;
}

.step {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  align-items: flex-start;
  padding: 8px;
  border-left: 3px solid transparent;
  border-radius: 0 8px 8px 0;
  transition: border-color 0.3s, background 0.3s;
  cursor: pointer;
}

.step:hover, .step.active {
  border-left-color: #4ade80;
  background: rgba(74, 222, 128, 0.04);
}

.step-badge {
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  font-weight: 700;
  font-size: 0.85rem;
  min-width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-title {
  font-weight: 600;
  color: #f472b6;
  margin-bottom: 6px;
  font-size: 1.05rem;
}

.step-math {
  background: rgba(167, 139, 250, 0.1);
  border: 1px solid rgba(167, 139, 250, 0.25);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 10px 0;
  text-align: center;
  font-size: 1.05rem;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.12), rgba(167, 139, 250, 0.12));
  border: 1px solid rgba(167, 139, 250, 0.35);
  border-radius: 16px;
  padding: 24px 28px;
  margin-bottom: 24px;
}

.insight-box .card-title {
  color: #a78bfa;
}

.final-answer-box {
  background: rgba(52, 211, 153, 0.08);
  border: 2px solid #34d399;
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin-bottom: 24px;
}

.final-answer-box .answer-label {
  color: #94a3b8;
  font-size: 1rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 12px;
}

.final-answer-box .answer-value {
  color: #4ade80;
  font-size: 2rem;
  font-weight: 700;
}

.final-answer-box .answer-detail {
  color: #34d399;
  font-size: 1.2rem;
  margin-top: 8px;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-top: 16px;
}

.final-option {
  background: rgba(51, 65, 85, 0.6);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 20px;
  font-size: 1rem;
  transition: all 0.3s ease;
}

.final-option.correct {
  background: rgba(52, 211, 153, 0.15);
  border-color: #34d399;
  color: #34d399;
  font-weight: 600;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 16px;
  font-style: italic;
}

.pitfall {
  display: flex;
  gap: 12px;
  align-items: flex-start;
  margin-bottom: 12px;
}

.pitfall-icon {
  color: #f472b6;
  font-weight: 700;
  font-size: 1.2rem;
  flex-shrink: 0;
}

.challenge-box {
  background: rgba(244, 114, 182, 0.08);
  border: 1px solid rgba(244, 114, 182, 0.3);
  border-radius: 16px;
  padding: 24px 28px;
}

.challenge-box .card-title {
  color: #f472b6;
}

canvas {
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  max-width: 100%;
  touch-action: none;
}

.canvas-wrapper {
  text-align: center;
}

.canvas-caption {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 10px;
  text-align: center;
}

.highlight-val {
  color: #60a5fa;
  font-weight: 600;
}

.highlight-green {
  color: #4ade80;
  font-weight: 600;
}

.checkpoint details summary {
  color: #34d399;
  font-size: 0.95rem;
}

.checkpoint details .detail-content {
  border-left-color: #34d399;
}

@media (max-width: 700px) {
  h1 {
    font-size: 1.6rem;
  }
  .card {
    padding: 18px;
  }
  .given-grid {
    flex-direction: column;
  }
  .step {
    flex-direction: column;
    gap: 8px;
  }
  .step-badge {
    align-self: flex-start;
  }
  .final-answer-box .answer-value {
    font-size: 1.5rem;
  }
  .final-options {
    flex-direction: column;
    align-items: center;
  }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Kvadratna funkcija -- odredjivanje koeficijenata sa grafika</h1>
  <p class="subtitle">Algebra -- analiza grafika parabole i izracunavanje vrednosti izraza sa koeficijentima</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Tekst zadatka</h2>
    <div class="problem-text">
      <p>Grafik funkcije \( f(x) = ax^2 + bx + c \), \( a, b, c \in \mathbb{R} \), \( x \in \mathbb{R} \), dat je na slici.</p>
      <p style="margin-top: 8px;">Parabola je okrenuta nadole (\( a < 0 \)), ima nule u tackama \( x = -2 \) i \( x = 3 \), a teme (maksimum) se nalazi u tacki \( \left(\frac{1}{2},\, \frac{25}{4}\right) \).</p>
      <p style="margin-top: 8px;">Vrednost izraza \( a(b + c) \) jednaka je:</p>
    </div>
    <div class="given-grid" style="margin-bottom: 12px;">
      <div class="given-item">
        <div class="label">Nula 1</div>
        <div class="value">\(x_1 = -2\)</div>
      </div>
      <div class="given-item">
        <div class="label">Nula 2</div>
        <div class="value">\(x_2 = 3\)</div>
      </div>
      <div class="given-item">
        <div class="label">Teme</div>
        <div class="value">\(\left(\frac{1}{2},\, \frac{25}{4}\right)\)</div>
      </div>
      <div class="given-item">
        <div class="label">Oblik</div>
        <div class="value">\(a < 0\)</div>
      </div>
    </div>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(-1\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(5\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(7\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(-7\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(6\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p class="plan-text">
      Na osnovu nula parabole zapisacemo funkciju u faktorizovanom obliku \( f(x) = a(x + 2)(x - 3) \). Zatim cemo iz poznate koordinate temena odrediti koeficijent \( a \), razviti funkciju u standardni oblik \( ax^2 + bx + c \) i konacno izracunati \( a(b + c) \).
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <h2>Podsetnik iz teorije</h2>
    <details>
      <summary>Kljucne formule i teoreme (klikni da otvoris)</summary>
      <div class="detail-content">
        <ul style="margin: 8px 0 12px 20px; color: #e2e8f0;">
          <li><strong>Faktorizovani oblik kvadratne funkcije:</strong> Ako su \( x_1 \) i \( x_2 \) nule funkcije, onda:
            \[ f(x) = a(x - x_1)(x - x_2) \]
          </li>
          <li><strong>Koordinate temena parabole:</strong>
            \[ x_v = -\frac{b}{2a} = \frac{x_1 + x_2}{2}, \quad y_v = f(x_v) \]
          </li>
          <li><strong>Veza izmedju oblika:</strong> Razvijanjem faktorizovanog oblika dobijamo standardni:
            \[ a(x - x_1)(x - x_2) = ax^2 - a(x_1 + x_2)x + a \cdot x_1 x_2 \]
            pa je \( b = -a(x_1 + x_2) \) i \( c = a \cdot x_1 x_2 \).
          </li>
          <li><strong>Znak koeficijenta \( a \):</strong> Ako je \( a > 0 \), parabola je otvorena navise. Ako je \( a < 0 \), parabola je otvorena nadole (ima maksimum).</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- Visual Aid / Interactive Diagram -->
  <div class="card">
    <h2>Grafik funkcije</h2>
    <div class="canvas-wrapper">
      <canvas id="parabola-canvas" width="720" height="520"></canvas>
    </div>
    <p class="canvas-caption">Grafik parabole \( f(x) = -x^2 + x + 6 \) sa oznacenim nulama i temenom. Isprobajte prevlacenje temena gore-dole da vidite kako koeficijent \( a \) utice na oblik parabole.</p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step" id="step-1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <div class="step-title">Zapisujemo funkciju preko nula</div>
        <p>Posto sa grafika ocitavamo da su nule funkcije \( x_1 = -2 \) i \( x_2 = 3 \), znamo da se \( f(x) \) moze zapisati u faktorizovanom obliku:</p>
        <div class="step-math">
          \[ f(x) = a(x - x_1)(x - x_2) = a(x + 2)(x - 3) \]
        </div>
        <p style="color: #94a3b8; font-size: 0.95rem;">Napomena: Koeficijent \( a \) jos uvek ne znamo -- odredili smo samo nule.</p>
      </div>
    </div>

    <div class="checkpoint">
      <details>
        <summary>Proveri sebe: Zasto pisemo \( (x + 2) \) a ne \( (x - 2) \)?</summary>
        <div class="detail-content">
          Jer je nula \( x_1 = -2 \). Formula zahteva \( (x - x_1) = (x - (-2)) = (x + 2) \). Da je nula bila \( x = 2 \), pisali bismo \( (x - 2) \).
        </div>
      </details>
    </div>

    <!-- Step 2 -->
    <div class="step" id="step-2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <div class="step-title">Odredjujemo koeficijent \( a \) iz temena</div>
        <p>Teme parabole je u tacki \( \left(\frac{1}{2},\, \frac{25}{4}\right) \). To znaci da je \( f\!\left(\frac{1}{2}\right) = \frac{25}{4} \).</p>
        <p>Uvrstimo \( x = \frac{1}{2} \) u faktorizovani oblik:</p>
        <div class="step-math">
          \[ f\!\left(\frac{1}{2}\right) = a\left(\frac{1}{2} + 2\right)\!\left(\frac{1}{2} - 3\right) \]
        </div>
        <p>Izracunamo vrednosti u zagradama:</p>
        <div class="step-math">
          \[ \frac{1}{2} + 2 = \frac{5}{2}, \qquad \frac{1}{2} - 3 = -\frac{5}{2} \]
        </div>
        <p>Dakle:</p>
        <div class="step-math">
          \[ f\!\left(\frac{1}{2}\right) = a \cdot \frac{5}{2} \cdot \left(-\frac{5}{2}\right) = -\frac{25}{4}\, a \]
        </div>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step" id="step-3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <div class="step-title">Resavamo jednacinu po \( a \)</div>
        <p>Izjednacavamo sa vrednescu u temenu:</p>
        <div class="step-math">
          \[ -\frac{25}{4}\, a = \frac{25}{4} \]
        </div>
        <p>Podelimo obe strane sa \( -\frac{25}{4} \):</p>
        <div class="step-math">
          \[ a = \frac{\frac{25}{4}}{-\frac{25}{4}} = -1 \]
        </div>
        <p>Koeficijent \( a = -1 \), sto je u skladu sa tim da je parabola okrenuta <span class="highlight-val">nadole</span>.</p>
      </div>
    </div>

    <div class="checkpoint">
      <details>
        <summary>Proveri sebe: Da li je x-koordinata temena zaista \( \frac{1}{2} \)?</summary>
        <div class="detail-content">
          <p>Koordinata temena se moze proveriti i formulom \( x_v = \frac{x_1 + x_2}{2} = \frac{-2 + 3}{2} = \frac{1}{2} \). Slaze se sa grafikom!</p>
        </div>
      </details>
    </div>

    <!-- Step 4 -->
    <div class="step" id="step-4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <div class="step-title">Razvijamo u standardni oblik</div>
        <p>Sada znamo kompletnu funkciju. Razvijemo je:</p>
        <div class="step-math">
          \[ f(x) = -(x + 2)(x - 3) \]
        </div>
        <p>Prvo pomnozimo zagrade:</p>
        <div class="step-math">
          \[ (x + 2)(x - 3) = x^2 - 3x + 2x - 6 = x^2 - x - 6 \]
        </div>
        <p>Zatim primenimo znak minus:</p>
        <div class="step-math">
          \[ f(x) = -(x^2 - x - 6) = -x^2 + x + 6 \]
        </div>
        <p>Uporedjujemo sa \( ax^2 + bx + c \) i ocitavamo koeficijente:</p>
        <div class="step-math">
          \[ a = -1, \quad b = 1, \quad c = 6 \]
        </div>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step" id="step-5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <div class="step-title">Racunamo trazeni izraz \( a(b + c) \)</div>
        <p>Uvrstimo dobijene vrednosti:</p>
        <div class="step-math">
          \[ a(b + c) = (-1)(1 + 6) = (-1) \cdot 7 = -7 \]
        </div>
      </div>
    </div>

    <div class="checkpoint">
      <details>
        <summary>Proveri sebe: Verifikuj da f(-2) = 0 i f(3) = 0</summary>
        <div class="detail-content">
          <p>\( f(-2) = -(-2)^2 + (-2) + 6 = -4 - 2 + 6 = 0 \) &check;</p>
          <p>\( f(3) = -(3)^2 + 3 + 6 = -9 + 3 + 6 = 0 \) &check;</p>
          <p>Obe nule se poklapaju -- funkcija je ispravno odredjena.</p>
        </div>
      </details>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <div class="card-title"><span class="icon">Kljucni uvid</span></div>
    <p>Kljuc ovog zadatka je prepoznati da se iz <strong>nula parabole</strong> funkcija odmah moze zapisati u faktorizovanom obliku \( a(x - x_1)(x - x_2) \), gde preostaje samo jedan nepoznat parametar \( a \). Taj parametar odredjujemo iz bilo koje dodatne informacije sa grafika -- u ovom slucaju iz <strong>koordinata temena</strong>. Zatim jednostavnim razvijanjem dolazimo do standardnog oblika.</p>
    <div class="step-math" style="margin-top: 12px;">
      \[ f(x) = -(x+2)(x-3) = -x^2 + x + 6 \implies a(b+c) = (-1)(1+6) = -7 \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <div class="answer-label">Konacan odgovor</div>
    <div class="answer-value">\( a(b+c) = -7 \)</div>
    <div class="answer-detail">Tacan odgovor je (D)</div>
    <div class="final-options">
      <div class="final-option">(A) \(-1\)</div>
      <div class="final-option">(B) \(5\)</div>
      <div class="final-option">(C) \(7\)</div>
      <div class="final-option correct">(D) \(-7\)</div>
      <div class="final-option">(E) \(6\)</div>
    </div>
    <p class="verification-note">Provera: \( a = -1 \), \( b = 1 \), \( c = 6 \). Funkcija \( f(x) = -x^2 + x + 6 \) ima nule u \( x = -2 \) i \( x = 3 \), teme u \( \left(\frac{1}{2},\, \frac{25}{4}\right) \) i otvorena je nadole. Sve se slaze sa grafikom. \( a(b+c) = (-1)(7) = -7 \).</p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Ceste greske</h2>
    <div class="pitfall">
      <span class="pitfall-icon">&#10007;</span>
      <p><strong>Zaboravljanje koeficijenta \( a \):</strong> Cesta greska je zapisati \( f(x) = (x+2)(x-3) \) bez koeficijenta \( a \). Time se podrazumeva da je \( a = 1 \), sto bi znacilo da je parabola otvorena navise -- suprotno od onoga sto grafik pokazuje. Uvek proverite znak koeficijenta!</p>
    </div>
    <div class="pitfall">
      <span class="pitfall-icon">&#10007;</span>
      <p><strong>Greska pri racunanju \( b + c \):</strong> Neki ucenici izracunaju \( a = -1 \), ali zatim pogresno odrede \( b \) ili \( c \) jer naprave gresku u znaku pri razvijanju \( -(x^2 - x - 6) \). Posebno pazite na minus ispred zagrade -- menja znak <em>svih</em> sabiraka unutar nje.</p>
    </div>
  </div>

  <!-- Optional Challenge -->
  <div class="challenge-box">
    <div class="card-title"><span class="icon">Dodatni izazov</span></div>
    <p>Za istu funkciju \( f(x) = -x^2 + x + 6 \), izracunajte vrednost izraza \( \dfrac{b^2 - 4ac}{4a} \). Sta taj izraz geometrijski predstavlja?</p>
    <details>
      <summary>Pogledaj hint</summary>
      <div class="detail-content">
        <p>Diskriminanta je \( D = b^2 - 4ac \). Izraz \( \frac{D}{4a} \) je usko povezan sa y-koordinatom temena. Setite se formule \( y_v = -\frac{D}{4a} \). Dakle, trazeni izraz ima vrednost \( -y_v = -\frac{25}{4} \).</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  // Main parabola canvas
  var canvas = document.getElementById('parabola-canvas');
  if (!canvas) return;
  var ctx = canvas.getContext('2d');
  var W = 720, H = 520;

  var dpr = window.devicePixelRatio || 1;
  canvas.width = W * dpr;
  canvas.height = H * dpr;
  canvas.style.width = W + 'px';
  canvas.style.height = H + 'px';
  ctx.scale(dpr, dpr);

  // Coordinate system
  var originX = 300;
  var originY = 380;
  var scaleX = 70;
  var scaleY = 40;

  // Interactive: allow dragging the vertex vertically to change 'a'
  var currentA = -1;
  var dragging = false;
  var vertexYTarget = 25 / 4; // y_v

  function toCanvas(x, y) {
    return { x: originX + x * scaleX, y: originY - y * scaleY };
  }

  function fromCanvas(cx, cy) {
    return { x: (cx - originX) / scaleX, y: (originY - cy) / scaleY };
  }

  function f(x, a) {
    return a * (x + 2) * (x - 3);
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Grid
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (var gx = -5; gx <= 6; gx++) {
      var p = toCanvas(gx, -3);
      var q = toCanvas(gx, 12);
      ctx.beginPath();
      ctx.moveTo(p.x, p.y);
      ctx.lineTo(q.x, q.y);
      ctx.stroke();
    }
    for (var gy = -2; gy <= 10; gy++) {
      var p2 = toCanvas(-5, gy);
      var q2 = toCanvas(6, gy);
      ctx.beginPath();
      ctx.moveTo(p2.x, p2.y);
      ctx.lineTo(q2.x, q2.y);
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(toCanvas(-4.5, 0).x, toCanvas(-4.5, 0).y);
    ctx.lineTo(toCanvas(5.5, 0).x, toCanvas(5.5, 0).y);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(toCanvas(0, -2).x, toCanvas(0, -2).y);
    ctx.lineTo(toCanvas(0, 10).x, toCanvas(0, 10).y);
    ctx.stroke();

    // Arrow heads
    ctx.fillStyle = '#475569';
    // x-axis arrow
    var ax = toCanvas(5.5, 0);
    ctx.beginPath();
    ctx.moveTo(ax.x, ax.y);
    ctx.lineTo(ax.x - 8, ax.y - 4);
    ctx.lineTo(ax.x - 8, ax.y + 4);
    ctx.closePath();
    ctx.fill();
    // y-axis arrow
    var ay = toCanvas(0, 10);
    ctx.beginPath();
    ctx.moveTo(ay.x, ay.y);
    ctx.lineTo(ay.x - 4, ay.y + 8);
    ctx.lineTo(ay.x + 4, ay.y + 8);
    ctx.closePath();
    ctx.fill();

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('x', toCanvas(5.3, 0).x, toCanvas(5.3, 0).y + 20);
    ctx.fillText('y', toCanvas(0, 9.8).x - 16, toCanvas(0, 9.8).y + 4);

    // Tick marks
    ctx.fillStyle = '#64748b';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    for (var tx = -4; tx <= 5; tx++) {
      if (tx === 0) continue;
      var tp = toCanvas(tx, 0);
      ctx.beginPath();
      ctx.moveTo(tp.x, tp.y - 4);
      ctx.lineTo(tp.x, tp.y + 4);
      ctx.stroke();
      ctx.fillText(String(tx), tp.x, tp.y + 18);
    }
    ctx.textAlign = 'right';
    for (var ty = 1; ty <= 9; ty++) {
      var tpy = toCanvas(0, ty);
      ctx.beginPath();
      ctx.moveTo(tpy.x - 4, tpy.y);
      ctx.lineTo(tpy.x + 4, tpy.y);
      ctx.stroke();
      ctx.fillText(String(ty), tpy.x - 8, tpy.y + 4);
    }

    // Compute actual vertex y for current a
    var vxCoord = 0.5;
    var vyCoord = f(vxCoord, currentA);

    // Find actual zeros if a != -1
    // f(x) = a(x+2)(x-3) => zeros are always -2 and 3 regardless of a
    var z1 = -2, z2 = 3;

    // Dashed horizontal line at vertex y
    var vCanv = toCanvas(vxCoord, vyCoord);
    ctx.setLineDash([6, 4]);
    ctx.strokeStyle = 'rgba(96, 165, 250, 0.4)';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(toCanvas(-4, vyCoord).x, toCanvas(-4, vyCoord).y);
    ctx.lineTo(toCanvas(5, vyCoord).x, toCanvas(5, vyCoord).y);
    ctx.stroke();
    ctx.setLineDash([]);

    // Label the dashed line
    ctx.fillStyle = '#60a5fa';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    if (Math.abs(currentA + 1) < 0.05) {
      ctx.fillText('y = 25/4', toCanvas(3.6, vyCoord).x, toCanvas(3.6, vyCoord).y - 8);
    } else {
      var vyRound = Math.round(vyCoord * 100) / 100;
      ctx.fillText('y \u2248 ' + String(vyRound).replace('.', ','), toCanvas(3.6, vyCoord).x, toCanvas(3.6, vyCoord).y - 8);
    }

    // Draw parabola
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 3;
    ctx.beginPath();
    var started = false;
    for (var px = -4; px <= 5; px += 0.02) {
      var py = f(px, currentA);
      var cp = toCanvas(px, py);
      if (cp.y < -20 || cp.y > H + 20) {
        started = false;
        continue;
      }
      if (!started) {
        ctx.moveTo(cp.x, cp.y);
        started = true;
      } else {
        ctx.lineTo(cp.x, cp.y);
      }
    }
    ctx.stroke();

    // Glow effect on parabola near vertex
    ctx.strokeStyle = 'rgba(96, 165, 250, 0.2)';
    ctx.lineWidth = 8;
    ctx.beginPath();
    started = false;
    for (var px2 = -1; px2 <= 2; px2 += 0.02) {
      var py2 = f(px2, currentA);
      var cp2 = toCanvas(px2, py2);
      if (!started) {
        ctx.moveTo(cp2.x, cp2.y);
        started = true;
      } else {
        ctx.lineTo(cp2.x, cp2.y);
      }
    }
    ctx.stroke();

    // Mark x-intercepts
    var z1p = toCanvas(z1, 0);
    var z2p = toCanvas(z2, 0);

    // Zero 1
    ctx.fillStyle = '#f472b6';
    ctx.beginPath();
    ctx.arc(z1p.x, z1p.y, 6, 0, 2 * Math.PI);
    ctx.fill();
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('(-2, 0)', z1p.x, z1p.y + 24);

    // Zero 2
    ctx.fillStyle = '#f472b6';
    ctx.beginPath();
    ctx.arc(z2p.x, z2p.y, 6, 0, 2 * Math.PI);
    ctx.fill();
    ctx.fillText('(3, 0)', z2p.x, z2p.y + 24);

    // Mark vertex
    ctx.fillStyle = '#4ade80';
    ctx.beginPath();
    ctx.arc(vCanv.x, vCanv.y, 8, 0, 2 * Math.PI);
    ctx.fill();

    // Glow on vertex
    var grad = ctx.createRadialGradient(vCanv.x, vCanv.y, 0, vCanv.x, vCanv.y, 24);
    grad.addColorStop(0, 'rgba(74, 222, 128, 0.5)');
    grad.addColorStop(1, 'rgba(74, 222, 128, 0)');
    ctx.fillStyle = grad;
    ctx.beginPath();
    ctx.arc(vCanv.x, vCanv.y, 24, 0, 2 * Math.PI);
    ctx.fill();

    // Vertex label
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    if (Math.abs(currentA + 1) < 0.05) {
      ctx.fillText('Teme: (1/2, 25/4)', vCanv.x + 14, vCanv.y - 10);
    } else {
      var vyR = Math.round(vyCoord * 100) / 100;
      ctx.fillText('Teme: (0,5; ' + String(vyR).replace('.', ',') + ')', vCanv.x + 14, vCanv.y - 10);
    }

    // Dashed vertical line from vertex to x-axis
    ctx.setLineDash([4, 4]);
    ctx.strokeStyle = 'rgba(74, 222, 128, 0.4)';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(vCanv.x, vCanv.y);
    ctx.lineTo(vCanv.x, originY);
    ctx.stroke();
    ctx.setLineDash([]);

    // Mark y-intercept c = f(0)
    var yIntercept = f(0, currentA);
    var yIntPt = toCanvas(0, yIntercept);
    if (yIntPt.y > 0 && yIntPt.y < H) {
      ctx.fillStyle = '#a78bfa';
      ctx.beginPath();
      ctx.arc(yIntPt.x, yIntPt.y, 5, 0, 2 * Math.PI);
      ctx.fill();
      ctx.fillStyle = '#a78bfa';
      ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';
      if (Math.abs(currentA + 1) < 0.05) {
        ctx.fillText('(0, 6) = c', yIntPt.x + 10, yIntPt.y - 6);
      } else {
        var yIR = Math.round(yIntercept * 100) / 100;
        ctx.fillText('(0, ' + String(yIR).replace('.', ',') + ')', yIntPt.x + 10, yIntPt.y - 6);
      }
    }

    // Info panel
    var panelX = W - 230;
    var panelY = 20;
    var panelW = 210;
    var panelH = 150;

    ctx.fillStyle = 'rgba(12, 18, 34, 0.92)';
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.roundRect(panelX, panelY, panelW, panelH, 10);
    ctx.fill();
    ctx.stroke();

    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Koeficijenti', panelX + panelW / 2, panelY + 22);

    ctx.textAlign = 'left';
    var infoX = panelX + 16;
    var infoY = panelY + 46;

    var aDisp = Math.round(currentA * 100) / 100;
    var bDisp = Math.round(-currentA * ((-2) + 3) * 100) / 100; // b = -a(x1+x2) = -a*1
    var cDisp = Math.round(currentA * (-2) * 3 * 100) / 100; // c = a*x1*x2 = a*(-6)

    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.fillText('a = ' + String(aDisp).replace('.', ','), infoX, infoY);

    infoY += 24;
    ctx.fillStyle = '#f472b6';
    ctx.fillText('b = ' + String(bDisp).replace('.', ','), infoX, infoY);

    infoY += 24;
    ctx.fillStyle = '#a78bfa';
    ctx.fillText('c = ' + String(cDisp).replace('.', ','), infoX, infoY);

    // Separator
    infoY += 14;
    ctx.strokeStyle = '#334155';
    ctx.beginPath();
    ctx.moveTo(infoX, infoY);
    ctx.lineTo(panelX + panelW - 16, infoY);
    ctx.stroke();

    infoY += 20;
    var abcVal = Math.round(currentA * (bDisp + cDisp) * 100) / 100;
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.fillText('a(b+c) = ' + String(abcVal).replace('.', ','), infoX, infoY);

    // Drag hint
    ctx.fillStyle = '#64748b';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Prevuci teme gore/dole da promenis koeficijent a', W / 2, H - 10);
  }

  draw();

  // Interaction: drag vertex
  function getPos(e) {
    var rect = canvas.getBoundingClientRect();
    var scaleFactorX = W / rect.width;
    var scaleFactorY = H / rect.height;
    var clientX, clientY;
    if (e.touches) {
      clientX = e.touches[0].clientX;
      clientY = e.touches[0].clientY;
    } else {
      clientX = e.clientX;
      clientY = e.clientY;
    }
    return {
      x: (clientX - rect.left) * scaleFactorX,
      y: (clientY - rect.top) * scaleFactorY
    };
  }

  function isNearVertex(pos) {
    var vxCoord = 0.5;
    var vyCoord = f(vxCoord, currentA);
    var vCanv = toCanvas(vxCoord, vyCoord);
    var dx = pos.x - vCanv.x;
    var dy = pos.y - vCanv.y;
    return (dx * dx + dy * dy) < 900; // within 30px
  }

  function handleStart(e) {
    var pos = getPos(e);
    if (isNearVertex(pos)) {
      dragging = true;
      e.preventDefault();
    }
  }

  function handleMove(e) {
    if (!dragging) return;
    e.preventDefault();
    var pos = getPos(e);
    var worldPos = fromCanvas(pos.x, pos.y);
    // vertex is at x=0.5, so worldPos.y = f(0.5) = a*(0.5+2)*(0.5-3) = a*2.5*(-2.5) = -6.25*a
    // worldPos.y = -6.25 * a => a = -worldPos.y / 6.25
    var newA = -worldPos.y / 6.25;
    // Clamp a to reasonable range (negative, since parabola opens down)
    if (newA > -0.2) newA = -0.2;
    if (newA < -3) newA = -3;
    currentA = newA;
    draw();
  }

  function handleEnd() {
    dragging = false;
  }

  canvas.addEventListener('mousedown', handleStart);
  canvas.addEventListener('mousemove', handleMove);
  canvas.addEventListener('mouseup', handleEnd);
  canvas.addEventListener('mouseleave', handleEnd);
  canvas.addEventListener('touchstart', handleStart, { passive: false });
  canvas.addEventListener('touchmove', handleMove, { passive: false });
  canvas.addEventListener('touchend', handleEnd);

  // Cursor change on hover
  canvas.addEventListener('mousemove', function(e) {
    if (dragging) return;
    var pos = getPos(e);
    canvas.style.cursor = isNearVertex(pos) ? 'grab' : 'default';
  });

  // Step click highlighting
  var steps = document.querySelectorAll('.step');
  steps.forEach(function(step) {
    step.addEventListener('click', function() {
      steps.forEach(function(s) { s.classList.remove('active'); });
      step.classList.add('active');
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Odredjivanje koeficijenata kvadratne funkcije sa grafika",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["kvadratna funkcija", "parabola", "nule funkcije", "teme parabole", "faktorizacija", "koeficijenti"]
}
BRAINSPARK_META-->