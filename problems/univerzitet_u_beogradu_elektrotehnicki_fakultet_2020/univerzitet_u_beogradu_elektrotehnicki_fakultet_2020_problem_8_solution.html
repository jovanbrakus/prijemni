<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Iteracija linearne funkcije — niz funkcija</title>
<script>MathJax={tex:{inlineMath:[['\\(','\\)'],['$','$']],displayMath:[['\\[','\\]']]},svg:{fontCache:'global'}};</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<script type="text/info" id="logic-scratchpad">
Zadatak: Dat je niz funkcija f_n : R -> R sa f_1(x) = 2x + 2020, f_{n+1}(x) = f_1(f_n(x)).
Treba naći f_{2020}(-2020).

KORAK 1: Izračunajmo prvih nekoliko članova niza funkcija.

f_1(x) = 2x + 2020

f_2(x) = f_1(f_1(x)) = f_1(2x + 2020)
       = 2(2x + 2020) + 2020
       = 4x + 4040 + 2020
       = 4x + 6060
       = 2^2 * x + 3 * 2020

f_3(x) = f_1(f_2(x)) = f_1(4x + 6060)
       = 2(4x + 6060) + 2020
       = 8x + 12120 + 2020
       = 8x + 14140
       = 2^3 * x + 7 * 2020

Primetimo obrazac:
f_1(x) = 2^1 * x + (2^1 - 1) * 2020   = 2x + 1 * 2020
f_2(x) = 2^2 * x + (2^2 - 1) * 2020   = 4x + 3 * 2020
f_3(x) = 2^3 * x + (2^3 - 1) * 2020   = 8x + 7 * 2020

HIPOTEZA: f_n(x) = 2^n * x + (2^n - 1) * 2020

KORAK 2: Dokaz matematičkom indukcijom.

Baza: n = 1
f_1(x) = 2^1 * x + (2^1 - 1) * 2020 = 2x + 1 * 2020 = 2x + 2020 ✓

Indukcijski korak: Pretpostavimo da važi za n, dokažimo za n+1.
f_{n+1}(x) = f_1(f_n(x))
           = f_1(2^n * x + (2^n - 1) * 2020)
           = 2 * [2^n * x + (2^n - 1) * 2020] + 2020
           = 2^{n+1} * x + 2(2^n - 1) * 2020 + 2020
           = 2^{n+1} * x + (2^{n+1} - 2) * 2020 + 2020
           = 2^{n+1} * x + (2^{n+1} - 2 + 1) * 2020
           = 2^{n+1} * x + (2^{n+1} - 1) * 2020 ✓

Dakle, f_n(x) = 2^n * x + (2^n - 1) * 2020.

KORAK 3: Izračunajmo f_{2020}(-2020).

f_{2020}(-2020) = 2^{2020} * (-2020) + (2^{2020} - 1) * 2020
                = -2020 * 2^{2020} + 2020 * 2^{2020} - 2020
                = 2020 * (2^{2020} - 2^{2020}) - 2020
                = 2020 * 0 - 2020
                = -2020

VERIFIKACIJA sa malim primerima:
Proverimo za x = -2020, da li f_n(-2020) = -2020 za sve n.

f_1(-2020) = 2*(-2020) + 2020 = -4040 + 2020 = -2020 ✓
f_2(-2020) = 4*(-2020) + 3*2020 = -8080 + 6060 = -2020 ✓
f_3(-2020) = 8*(-2020) + 7*2020 = -16160 + 14140 = -2020 ✓

Fantastično! x = -2020 je FIKSNA TAČKA funkcije f_1!
f_1(-2020) = 2*(-2020) + 2020 = -2020
Pa pošto je f_{n+1}(x) = f_1(f_n(x)), ako je f_1(-2020) = -2020,
onda je f_n(-2020) = -2020 za svako n.

Ovo je mnogo elegantniji uvid: -2020 je fiksna tačka funkcije f_1,
što znači da je fiksna tačka svake iteracije.

ALTERNATIVNI UVID (fiksna tačka):
f_1(x) = x => 2x + 2020 = x => x = -2020
Dakle -2020 je fiksna tačka f_1, pa je f_n(-2020) = -2020 za svako n.

Odgovor: (D) -2020

Verifikacija sa poznatim odgovorom: PDF kaže (D) -2020 ✓
</script>
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
body{background:#0f172a;color:#e2e8f0;font-family:'Segoe UI',system-ui,-apple-system,sans-serif;line-height:1.7;padding:20px;max-width:860px;margin:0 auto}
h1{font-size:1.8rem;font-weight:800;background:linear-gradient(135deg,#60a5fa,#a78bfa,#34d399);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-align:center;margin-bottom:4px}
.subtitle{text-align:center;color:#94a3b8;font-size:1rem;margin-bottom:28px}
.card{background:#1e293b;border:1px solid #334155;border-radius:14px;padding:24px;margin-bottom:20px}
.card-title{font-size:1.15rem;font-weight:700;margin-bottom:14px;display:flex;align-items:center;gap:8px}
.card-title .icon{font-size:1.3rem}
.problem-statement{border-left:4px solid #a78bfa}
.problem-statement .problem-text{font-size:1.05rem;margin-bottom:18px;line-height:1.9}
.given-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:10px;margin-top:12px}
.given-item{background:#0f172a;border:1px solid #334155;border-radius:10px;padding:10px 14px;text-align:center;font-size:1rem;cursor:default;transition:border-color 0.2s,background 0.2s}
.given-item .label{font-size:0.85rem;color:#94a3b8;font-weight:600;margin-bottom:4px}
.given-item .value{font-size:1rem;color:#e2e8f0}
.given-item[data-option].correct{border-color:#34d399;background:rgba(52,211,153,0.1)}
.given-item[data-option]:hover{border-color:#60a5fa}
.plan-card{border-left:4px solid #60a5fa}
.plan-list{list-style:none;counter-reset:plan}
.plan-list li{counter-increment:plan;padding:6px 0;padding-left:32px;position:relative}
.plan-list li::before{content:counter(plan);position:absolute;left:0;top:6px;background:#60a5fa;color:#0f172a;width:22px;height:22px;border-radius:50%;font-size:0.78rem;font-weight:700;display:flex;align-items:center;justify-content:center}
details{margin:15px 0}
details summary{cursor:pointer;color:#60a5fa;font-weight:600;padding:6px 0;user-select:none}
details summary:hover{color:#93bbfc}
details[open] summary{margin-bottom:10px}
.theory-content p{margin-bottom:10px;color:#cbd5e1}
.theory-content .formula-box{background:#0f172a;border:1px solid #334155;border-radius:10px;padding:14px 18px;margin:12px 0;text-align:center}
.canvas-wrap{display:flex;justify-content:center;padding:10px 0}
canvas{border-radius:10px;max-width:100%;touch-action:none}
.step{margin-bottom:18px;padding:8px 12px;border-radius:8px;transition:border-left 0.2s,background 0.2s;cursor:pointer;border-left:3px solid transparent}
.step:hover,.step.active{border-left:3px solid #4ade80;background:rgba(74,222,128,0.04)}
.step:last-child{margin-bottom:0}
.step-badge{display:inline-block;background:#a78bfa;color:#0f172a;font-size:0.75rem;font-weight:700;padding:3px 10px;border-radius:6px;margin-bottom:8px}
.step-content{padding-left:4px;color:#cbd5e1}
.step-content p{margin-bottom:8px}
.math-block{background:rgba(56,189,248,0.08);border:1px solid rgba(56,189,248,0.15);border-radius:10px;padding:14px 18px;margin:10px 0;text-align:center;font-family:'Courier New',monospace}
.checkpoint{background:rgba(96,165,250,0.1);border:1px solid rgba(96,165,250,0.3);border-radius:10px;padding:12px 16px;margin:15px 0;color:#93bbfc;font-weight:600}
.checkpoint summary{color:#60a5fa;font-weight:600}
.checkpoint-answer{color:#4ade80;font-weight:600;margin-top:6px}
.insight-card{border-left:4px solid #a78bfa;background:linear-gradient(135deg,#1e293b,#1e2940)}
.insight-text{color:#c4b5fd;font-size:1.02rem}
.final-answer-card{border:2px solid #34d399;background:linear-gradient(135deg,#1e293b,#162a2a)}
.final-answer-value{font-size:1.5rem;text-align:center;color:#4ade80;font-weight:700;margin:12px 0}
.final-answer-label{text-align:center;color:#34d399;font-size:0.95rem;font-weight:600}
.final-options{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:10px;margin-top:16px}
.final-option{background:#0f172a;border:1px solid #334155;border-radius:10px;padding:10px;text-align:center;font-size:1rem;transition:all 0.2s}
.final-option.correct-option{border-color:#34d399;background:rgba(52,211,153,0.12);color:#4ade80;font-weight:700}
.verification{margin-top:16px;padding:12px 16px;background:rgba(52,211,153,0.06);border:1px solid rgba(52,211,153,0.2);border-radius:10px;color:#86efac;font-size:0.92rem}
.pitfall{display:flex;gap:10px;padding:10px 0;border-bottom:1px solid #334155}
.pitfall:last-child{border-bottom:none}
.pitfall-icon{color:#f87171;font-size:1.1rem;flex-shrink:0;margin-top:2px}
.pitfall-text{color:#cbd5e1}
.challenge-card{border-left:4px solid #34d399}
.challenge-text{color:#86efac;font-style:italic}
.drag-hint{text-align:center;color:#64748b;font-size:0.82rem;margin-top:6px}
@media(max-width:700px){
  body{padding:12px}
  h1{font-size:1.4rem}
  .given-grid{grid-template-columns:repeat(auto-fit,minmax(100px,1fr))}
  .final-options{grid-template-columns:repeat(auto-fit,minmax(100px,1fr))}
}
</style>
</head>
<body>

<h1>Iteracija linearne funkcije i fiksna tačka</h1>
<p class="subtitle">Algebra | Nizovi funkcija, kompozicija, matematička indukcija, fiksna tačka</p>

<!-- Iskaz zadatka -->
<div class="card problem-statement">
  <div class="card-title"><span class="icon">&#128220;</span> Postavka zadatka</div>
  <div class="problem-text">
    Neka je definisan niz funkcija \(f_n : \mathbb{R} \to \mathbb{R}\) sa
    \[f_1(x) = 2x + 2020, \quad f_{n+1}(x) = f_1(f_n(x)), \quad n \in \mathbb{N}.\]
    Tada je \(f_{2020}(-2020)\) jednako:
  </div>
  <div class="given-grid">
    <div class="given-item answer-option" data-option="A">
      <div class="label">(A)</div>
      <div class="value">\(2^{2020}\)</div>
    </div>
    <div class="given-item answer-option" data-option="B">
      <div class="label">(B)</div>
      <div class="value">\(-2^{2020}\)</div>
    </div>
    <div class="given-item answer-option" data-option="C">
      <div class="label">(C)</div>
      <div class="value">\(2020\)</div>
    </div>
    <div class="given-item answer-option" data-option="D">
      <div class="label">(D)</div>
      <div class="value">\(-2020\)</div>
    </div>
    <div class="given-item answer-option" data-option="E">
      <div class="label">(E)</div>
      <div class="value">\(0\)</div>
    </div>
  </div>
</div>

<!-- Plan rešavanja -->
<div class="card plan-card">
  <div class="card-title"><span class="icon">&#128204;</span> Plan rešavanja</div>
  <ol class="plan-list">
    <li>Izračunati prve nekoliko iteracija \(f_1, f_2, f_3, \ldots\) da uočimo obrazac</li>
    <li>Izvesti opštu formulu za \(f_n(x)\) i dokazati je indukcijom</li>
    <li>Uočiti da je \(x = -2020\) fiksna tačka i izračunati \(f_{2020}(-2020)\)</li>
  </ol>
</div>

<!-- Teorija -->
<div class="card">
  <div class="card-title"><span class="icon">&#128218;</span> Teorijska osnova</div>
  <details>
    <summary>&#128208; Ključne formule i teoreme</summary>
    <div class="theory-content">
      <p><strong>Kompozicija funkcija:</strong> Ako je \(f_{n+1}(x) = f_1(f_n(x))\), tada je \(f_n\) \(n\)-ta iteracija funkcije \(f_1\), tj. \(f_n = \underbrace{f_1 \circ f_1 \circ \cdots \circ f_1}_{n \text{ puta}}\).</p>
      <div class="formula-box">
        \[f_n(x) = \underbrace{f_1(f_1(\cdots f_1}_{n}(x)\cdots))\]
      </div>
      <p><strong>Suma geometrijskog niza:</strong> Za razliku od 1:</p>
      <div class="formula-box">
        \[1 + q + q^2 + \cdots + q^{n-1} = \frac{q^n - 1}{q - 1}\]
      </div>
      <p><strong>Fiksna tačka:</strong> Vrednost \(x_0\) za koju važi \(f(x_0) = x_0\) naziva se fiksna tačka funkcije \(f\). Ako je \(x_0\) fiksna tačka od \(f_1\), tada je \(f_n(x_0) = x_0\) za svako \(n \in \mathbb{N}\).</p>
      <div class="formula-box">
        \[f_1(x_0) = x_0 \implies f_n(x_0) = x_0, \quad \forall n \in \mathbb{N}\]
      </div>
      <p><strong>Princip matematičke indukcije:</strong> Ako tvrdnja važi za \(n = 1\) (baza) i ako iz pretpostavke da važi za \(n\) sledi da važi za \(n + 1\) (indukcijski korak), onda tvrdnja važi za svako \(n \in \mathbb{N}\).</p>
    </div>
  </details>
</div>

<!-- Vizuelni prikaz -->
<div class="card">
  <div class="card-title"><span class="icon">&#128202;</span> Vizuelni prikaz iteracije</div>
  <div class="canvas-wrap">
    <canvas id="vizCanvas" width="760" height="440"></canvas>
  </div>
  <p class="drag-hint">Pomerajte klizač ispod da menjate početnu vrednost \(x_0\) i posmatrate iteracije</p>
  <div style="display:flex;align-items:center;gap:12px;justify-content:center;margin-top:10px;">
    <span style="color:#94a3b8;font-size:0.9rem;">\(x_0 =\)</span>
    <input type="range" id="x0Slider" min="-3000" max="-500" value="-2020" step="10" style="width:260px;accent-color:#60a5fa;">
    <span id="x0Value" style="color:#60a5fa;font-weight:700;font-size:0.95rem;min-width:60px;">-2020</span>
  </div>
</div>

<!-- Koraci rešenja -->
<div class="card">
  <div class="card-title"><span class="icon">&#128736;</span> Rešenje korak po korak</div>

  <div class="step" id="step1">
    <div class="step-badge">KORAK 1</div>
    <div class="step-content">
      <p><strong>Izračunajmo prvih nekoliko iteracija</strong></p>
      <p>Krenimo od zadate funkcije \(f_1(x) = 2x + 2020\) i izračunajmo \(f_2\) i \(f_3\).</p>
      <div class="math-block">
        \[f_2(x) = f_1(f_1(x)) = f_1(2x + 2020)\]
      </div>
      <p>U funkciju \(f_1\) umesto \(x\) uvrstimo \(2x + 2020\):</p>
      <div class="math-block">
        \[f_2(x) = 2 \cdot (2x + 2020) + 2020 = 4x + 4040 + 2020 = 4x + 6060\]
      </div>
      <p>Primetimo da je \(6060 = 3 \cdot 2020\), pa:</p>
      <div class="math-block">
        \[f_2(x) = 2^2 \cdot x + 3 \cdot 2020\]
      </div>
    </div>
  </div>

  <div class="step" id="step2">
    <div class="step-badge">KORAK 2</div>
    <div class="step-content">
      <p><strong>Izračunajmo \(f_3(x)\)</strong></p>
      <div class="math-block">
        \[f_3(x) = f_1(f_2(x)) = f_1(4x + 6060)\]
      </div>
      <p>Uvrstimo u \(f_1\):</p>
      <div class="math-block">
        \[f_3(x) = 2 \cdot (4x + 6060) + 2020 = 8x + 12120 + 2020 = 8x + 14140\]
      </div>
      <p>Primetimo da je \(14140 = 7 \cdot 2020\), pa:</p>
      <div class="math-block">
        \[f_3(x) = 2^3 \cdot x + 7 \cdot 2020\]
      </div>
    </div>
  </div>

  <div class="step" id="step3">
    <div class="step-badge">KORAK 3</div>
    <div class="step-content">
      <p><strong>Uočimo obrazac</strong></p>
      <p>Zapišimo rezultate u tabelu i uočimo pravilnost:</p>
      <div class="math-block">
        \[\begin{align}
        f_1(x) &= 2^1 \cdot x + \underbrace{1}_{2^1-1} \cdot 2020 \\[6pt]
        f_2(x) &= 2^2 \cdot x + \underbrace{3}_{2^2-1} \cdot 2020 \\[6pt]
        f_3(x) &= 2^3 \cdot x + \underbrace{7}_{2^3-1} \cdot 2020
        \end{align}\]
      </div>
      <p>Koeficijenti uz \(2020\) su: \(1,\; 3,\; 7, \ldots\), odnosno \(2^n - 1\). Naša hipoteza:</p>
      <div class="math-block">
        \[\boxed{f_n(x) = 2^n \cdot x + (2^n - 1) \cdot 2020}\]
      </div>
    </div>
  </div>

  <details class="checkpoint">
    <summary>&#9989; Proveri se: Koliko iznosi \(f_4(x)\) ako primenimo formulu?</summary>
    <div class="checkpoint-answer">
      \(f_4(x) = 2^4 \cdot x + (2^4 - 1) \cdot 2020 = 16x + 15 \cdot 2020 = 16x + 30300\).
      <br>Provera: \(f_4(x) = f_1(f_3(x)) = 2(8x + 14140) + 2020 = 16x + 28280 + 2020 = 16x + 30300\). Tačno!
    </div>
  </details>

  <div class="step" id="step4">
    <div class="step-badge">KORAK 4</div>
    <div class="step-content">
      <p><strong>Dokaz matematičkom indukcijom</strong></p>
      <p><em>Baza indukcije</em> (\(n = 1\)): Prema formuli, \(f_1(x) = 2^1 \cdot x + (2^1 - 1) \cdot 2020 = 2x + 2020\). To se poklapa sa zadatom definicijom. &#10004;</p>
      <p><em>Indukcijski korak:</em> Pretpostavimo da formula važi za neko \(n\), tj. \(f_n(x) = 2^n x + (2^n - 1) \cdot 2020\). Tada:</p>
      <div class="math-block">
        \[f_{n+1}(x) = f_1(f_n(x)) = 2 \cdot \big[2^n x + (2^n - 1) \cdot 2020\big] + 2020\]
      </div>
      <p>Raspisujemo:</p>
      <div class="math-block">
        \[= 2^{n+1} x + 2(2^n - 1) \cdot 2020 + 2020\]
      </div>
      <div class="math-block">
        \[= 2^{n+1} x + (2^{n+1} - 2 + 1) \cdot 2020\]
      </div>
      <div class="math-block">
        \[= 2^{n+1} x + (2^{n+1} - 1) \cdot 2020 \quad \checkmark\]
      </div>
      <p>Time je formula dokazana za svako \(n \in \mathbb{N}\).</p>
    </div>
  </div>

  <div class="step" id="step5">
    <div class="step-badge">KORAK 5</div>
    <div class="step-content">
      <p><strong>Izračunajmo \(f_{2020}(-2020)\)</strong></p>
      <p>Uvrstimo \(n = 2020\) i \(x = -2020\) u dokazanu formulu:</p>
      <div class="math-block">
        \[f_{2020}(-2020) = 2^{2020} \cdot (-2020) + (2^{2020} - 1) \cdot 2020\]
      </div>
      <p>Rastavimo sabirke:</p>
      <div class="math-block">
        \[= -2020 \cdot 2^{2020} + 2020 \cdot 2^{2020} - 2020\]
      </div>
      <p>Prva dva sabirka se poništavaju:</p>
      <div class="math-block">
        \[= \underbrace{-2020 \cdot 2^{2020} + 2020 \cdot 2^{2020}}_{= \; 0} - 2020 = -2020\]
      </div>
    </div>
  </div>

  <details class="checkpoint">
    <summary>&#9989; Proveri se: Zašto se rezultat sveo baš na \(-2020\)? Postoji li dublji razlog?</summary>
    <div class="checkpoint-answer">
      Da! Vrednost \(x = -2020\) je <strong>fiksna tačka</strong> funkcije \(f_1\): ako rešimo \(f_1(x) = x\), dobijamo \(2x + 2020 = x\), odakle \(x = -2020\). Pošto je \(f_1(-2020) = -2020\), svaka naredna iteracija daje isti rezultat.
    </div>
  </details>

  <div class="step" id="step6">
    <div class="step-badge">KORAK 6</div>
    <div class="step-content">
      <p><strong>Alternativno rešenje: fiksna tačka</strong></p>
      <p>Postoji i elegantniji način razmišljanja. Potražimo fiksnu tačku funkcije \(f_1\), tj. vrednost \(x_0\) za koju važi \(f_1(x_0) = x_0\):</p>
      <div class="math-block">
        \[2x_0 + 2020 = x_0 \implies x_0 = -2020\]
      </div>
      <p>Ako je \(f_1(-2020) = -2020\), onda je:</p>
      <div class="math-block">
        \[f_2(-2020) = f_1(\underbrace{f_1(-2020)}_{-2020}) = f_1(-2020) = -2020\]
      </div>
      <p>Indukcijski, \(f_n(-2020) = -2020\) za svako \(n \in \mathbb{N}\). Specijalno:</p>
      <div class="math-block">
        \[f_{2020}(-2020) = -2020\]
      </div>
      <p style="color:#94a3b8;font-size:0.9rem;">Ovaj pristup je brži jer ne zahteva izvođenje opšte formule, ali oba postupka su potpuno korektna.</p>
    </div>
  </div>
</div>

<!-- Ključni uvid -->
<div class="card insight-card">
  <div class="card-title"><span class="icon">&#128161;</span> Ključni uvid</div>
  <p class="insight-text">
    Vrednost \(x = -2020\) je <strong>fiksna tačka</strong> funkcije \(f_1(x) = 2x + 2020\): važi \(f_1(-2020) = -2020\). Kada iteriramo funkciju nad njenom fiksnom tačkom, rezultat se nikada ne menja. Zato je \(f_n(-2020) = -2020\) za svako \(n\), bez obzira koliki je \(n\).
  </p>
  <div class="math-block" style="margin-top:14px;">
    \[\displaystyle f_1(-2020) = -2020 \implies f_{2020}(-2020) = -2020\]
  </div>
</div>

<!-- Konačan odgovor -->
<div class="card final-answer-card">
  <div class="card-title"><span class="icon">&#9989;</span> Konačan odgovor</div>
  <div class="final-answer-label">Vrednost \(f_{2020}(-2020)\) iznosi:</div>
  <div class="final-answer-value">\(f_{2020}(-2020) = -2020\)</div>
  <div class="final-answer-label" style="margin-top:12px">Tačan odgovor je (D)</div>
  <div class="final-options">
    <div class="final-option" data-option="A">(A) \(2^{2020}\)</div>
    <div class="final-option" data-option="B">(B) \(-2^{2020}\)</div>
    <div class="final-option" data-option="C">(C) \(2020\)</div>
    <div class="final-option correct-option" data-option="D">(D) \(-2020\)</div>
    <div class="final-option" data-option="E">(E) \(0\)</div>
  </div>
  <div class="verification">
    <strong>&#128269; Verifikacija:</strong> Direktna provera: \(f_1(-2020) = 2 \cdot (-2020) + 2020 = -2020\), \(f_2(-2020) = f_1(-2020) = -2020\), itd. Pošto je \(-2020\) fiksna tačka, svaka iteracija vraća istu vrednost. Rezultat je konačan broj, a ne eksponencijalno veliki kao \(2^{2020}\), što potvrđuje ispravnost.
  </div>
</div>

<!-- Zamke -->
<div class="card">
  <div class="card-title"><span class="icon">&#9888;</span> Moguće zamke</div>
  <div class="pitfall">
    <span class="pitfall-icon">&#10060;</span>
    <span class="pitfall-text">
      <strong>Pogrešan znak u formuli.</strong> Česta greška je pisati \(f_n(x) = 2^n x + 2^n \cdot 2020\) umesto \(f_n(x) = 2^n x + (2^n - 1) \cdot 2020\). Slobodni član je \((2^n - 1) \cdot 2020\), a ne \(2^n \cdot 2020\), jer je to suma geometrijskog niza \(2020 \cdot (1 + 2 + 4 + \cdots + 2^{n-1}) = 2020 \cdot (2^n - 1)\).
    </span>
  </div>
  <div class="pitfall">
    <span class="pitfall-icon">&#10060;</span>
    <span class="pitfall-text">
      <strong>Previđanje fiksne tačke.</strong> Zadatak namerno koristi \(x = -2020\) upravo zato što je to fiksna tačka. Ako ne prepoznate ovaj trik, mogli biste se uplesti u račun sa ogromnim stepenima \(2^{2020}\) i pogrešno zaključiti da je odgovor (A) ili (B).
    </span>
  </div>
</div>

<!-- Izazov -->
<div class="card challenge-card">
  <div class="card-title"><span class="icon">&#127942;</span> Izazov za razmišljanje</div>
  <p class="challenge-text">
    Šta ako umesto \(-2020\) uvrstimo \(x = 0\)? Koliko iznosi \(f_{2020}(0)\)?
  </p>
  <details>
    <summary>&#128161; Nagovještaj</summary>
    <div class="theory-content">
      <p>Koristite opštu formulu: \(f_n(0) = 2^n \cdot 0 + (2^n - 1) \cdot 2020 = (2^n - 1) \cdot 2020\). Za \(n = 2020\) to daje \((2^{2020} - 1) \cdot 2020\) — ogroman broj! Samo fiksna tačka daje "lep" rezultat.</p>
    </div>
  </details>
</div>

<script>
(() => {
  const canvas = document.getElementById('vizCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width, H = canvas.height;

  const BG = '#1e293b';
  const GRID = '#334155';
  const TEXT = '#94a3b8';
  const BLUE = '#60a5fa';
  const PURPLE = '#a78bfa';
  const GREEN = '#4ade80';
  const PINK = '#f472b6';

  const marginL = 70, marginR = 40, marginT = 50, marginB = 50;
  const gW = W - marginL - marginR;
  const gH = H - marginT - marginB;

  const slider = document.getElementById('x0Slider');
  const x0Display = document.getElementById('x0Value');

  const fixedPt = -2020;

  function f1(x) { return 2 * x + 2020; }

  function draw() {
    const x0 = parseFloat(slider.value);
    x0Display.textContent = x0;

    ctx.fillStyle = BG;
    ctx.fillRect(0, 0, W, H);

    // Izračunaj iteracije (do 6)
    const nIter = 6;
    const vals = [x0];
    for (let i = 0; i < nIter; i++) {
      vals.push(f1(vals[vals.length - 1]));
    }

    // Odredimo opseg za prikaz
    let vMin = Infinity, vMax = -Infinity;
    for (const v of vals) {
      if (v < vMin) vMin = v;
      if (v > vMax) vMax = v;
    }
    // Osiguramo da fiksna tačka bude vidljiva
    vMin = Math.min(vMin, fixedPt - 200);
    vMax = Math.max(vMax, fixedPt + 200);
    const range = vMax - vMin;
    vMin -= range * 0.1;
    vMax += range * 0.1;

    const xMin = 0;
    const xMax = nIter + 0.5;

    const toCanvasX = (x) => marginL + (x - xMin) / (xMax - xMin) * gW;
    const toCanvasY = (y) => marginT + (vMax - y) / (vMax - vMin) * gH;

    // Mrežne linije
    ctx.strokeStyle = GRID;
    ctx.lineWidth = 0.5;
    for (let gx = 0; gx <= nIter; gx++) {
      const cx = toCanvasX(gx);
      ctx.beginPath(); ctx.moveTo(cx, marginT); ctx.lineTo(cx, marginT + gH); ctx.stroke();
    }

    // Horizontalna linija fiksne tačke
    const fpY = toCanvasY(fixedPt);
    ctx.strokeStyle = GREEN;
    ctx.lineWidth = 1.5;
    ctx.setLineDash([6, 4]);
    ctx.beginPath(); ctx.moveTo(marginL, fpY); ctx.lineTo(marginL + gW, fpY); ctx.stroke();
    ctx.setLineDash([]);

    // Oznaka fiksne tačke
    ctx.fillStyle = GREEN;
    ctx.font = 'bold 12px monospace';
    ctx.textAlign = 'left';
    ctx.fillText('y = -2020 (fiksna tacka)', marginL + gW - 210, fpY - 10);

    // Ose
    ctx.strokeStyle = TEXT;
    ctx.lineWidth = 1;
    ctx.beginPath(); ctx.moveTo(marginL, marginT + gH); ctx.lineTo(marginL + gW, marginT + gH); ctx.stroke();
    ctx.beginPath(); ctx.moveTo(marginL, marginT); ctx.lineTo(marginL, marginT + gH); ctx.stroke();

    // Oznake osa
    ctx.fillStyle = TEXT;
    ctx.font = '12px monospace';
    ctx.textAlign = 'center';
    for (let n = 0; n <= nIter; n++) {
      const label = n === 0 ? 'x\u2080' : 'f' + n;
      ctx.fillText(label, toCanvasX(n), marginT + gH + 20);
    }

    // Y-osa oznake
    ctx.textAlign = 'right';
    const niceStep = Math.pow(10, Math.floor(Math.log10(Math.max(1, vMax - vMin))));
    const yStep = niceStep > 0 ? (vMax - vMin > 5 * niceStep ? niceStep : niceStep / 2) : 500;
    let yStart = Math.ceil(vMin / yStep) * yStep;
    for (let yy = yStart; yy <= vMax; yy += yStep) {
      const cy = toCanvasY(yy);
      if (cy > marginT + 5 && cy < marginT + gH - 5) {
        ctx.fillStyle = TEXT;
        ctx.fillText(Math.round(yy).toString(), marginL - 10, cy + 4);
        ctx.strokeStyle = GRID;
        ctx.lineWidth = 0.3;
        ctx.beginPath(); ctx.moveTo(marginL, cy); ctx.lineTo(marginL + gW, cy); ctx.stroke();
      }
    }

    // Crtanje linije iteracija
    ctx.strokeStyle = BLUE;
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    for (let i = 0; i <= nIter; i++) {
      const cx = toCanvasX(i);
      const cy = toCanvasY(vals[i]);
      if (i === 0) ctx.moveTo(cx, cy);
      else ctx.lineTo(cx, cy);
    }
    ctx.stroke();

    // Tačke iteracija
    for (let i = 0; i <= nIter; i++) {
      const cx = toCanvasX(i);
      const cy = toCanvasY(vals[i]);

      // Svetleći efekat
      const grad = ctx.createRadialGradient(cx, cy, 0, cx, cy, 14);
      const isFixed = Math.abs(vals[i] - fixedPt) < 1;
      const color = isFixed ? GREEN : BLUE;
      grad.addColorStop(0, color + '66');
      grad.addColorStop(1, color + '00');
      ctx.fillStyle = grad;
      ctx.beginPath(); ctx.arc(cx, cy, 14, 0, 2 * Math.PI); ctx.fill();

      // Tačka
      ctx.fillStyle = color;
      ctx.beginPath(); ctx.arc(cx, cy, 5, 0, 2 * Math.PI); ctx.fill();

      // Oznaka vrednosti
      ctx.fillStyle = '#e2e8f0';
      ctx.font = 'bold 11px monospace';
      ctx.textAlign = 'center';
      const vRounded = Math.round(vals[i]);
      const labelStr = vRounded.toString();
      const labelY = cy - 14;
      ctx.fillText(labelStr, cx, labelY < marginT + 12 ? cy + 22 : labelY);
    }

    // Naslov
    ctx.fillStyle = TEXT;
    ctx.font = 'bold 14px sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Iteracije: x\u2080 \u2192 f\u2081(x\u2080) \u2192 f\u2082(x\u2080) \u2192 ...', W / 2, 25);

    // Legenda
    const legX = marginL + 10, legY = marginT + 10;
    ctx.lineWidth = 2.5;
    ctx.fillStyle = BLUE;
    ctx.beginPath(); ctx.arc(legX + 6, legY, 4, 0, 2 * Math.PI); ctx.fill();
    ctx.fillStyle = TEXT;
    ctx.font = '11px sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Vrednost iteracije', legX + 16, legY + 4);

    ctx.fillStyle = GREEN;
    ctx.beginPath(); ctx.arc(legX + 6, legY + 18, 4, 0, 2 * Math.PI); ctx.fill();
    ctx.fillStyle = TEXT;
    ctx.fillText('Fiksna tacka (-2020)', legX + 16, legY + 22);
  }

  draw();

  slider.addEventListener('input', draw);

  // Klik na odgovor
  document.addEventListener('DOMContentLoaded', () => {
    const options = document.querySelectorAll('.answer-option');
    options.forEach((opt) => {
      opt.addEventListener('click', () => {
        options.forEach((o) => { o.classList.remove('correct'); o.style.borderColor = ''; });
        if (opt.getAttribute('data-option') === 'D') {
          opt.classList.add('correct');
        } else {
          opt.style.borderColor = '#f87171';
          setTimeout(() => { opt.style.borderColor = ''; }, 1200);
        }
      });
    });

    // Klik na korake
    const steps = document.querySelectorAll('.step');
    steps.forEach((step) => {
      step.addEventListener('click', () => {
        steps.forEach((s) => s.classList.remove('active'));
        step.classList.add('active');
      });
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{"title":"Iteracija linearne funkcije i fiksna tačka","subject":"math","unit":"algebra","topic_tags":["nizovi funkcija","kompozicija funkcija","fiksna tačka","matematička indukcija","iteracija"]}
BRAINSPARK_META-->