<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zbir koordinata temena C trougla sa datim ortocentrom</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM: Triangle ABC with A(-2,2), B(2,-2), orthocenter N(1,2). Find sum of coordinates of C.

STEP 1: Find slope of AB.
slope_AB = (-2 - 2)/(2 - (-2)) = -4/4 = -1.

STEP 2: Altitude from A to BC.
This altitude passes through A(-2,2) and through the orthocenter N(1,2).
Both points have y = 2, so this altitude is horizontal: y = 2, slope = 0.
Since altitude from A is perpendicular to BC, BC must be vertical (undefined slope).

STEP 3: BC is vertical through B(2,-2).
Vertical line: x = 2. So C has x-coordinate = 2. C = (2, y_C).

STEP 4: Altitude from B to AC.
This altitude passes through B(2,-2) and N(1,2).
Slope of altitude from B = (2 - (-2))/(1 - 2) = 4/(-1) = -4.
This altitude is perpendicular to AC, so slope_AC * (-4) = -1 => slope_AC = 1/4.

STEP 5: Verify with slope of AC.
slope_AC = (y_C - 2)/(2 - (-2)) = (y_C - 2)/4.
Set equal: (y_C - 2)/4 = 1/4 => y_C - 2 = 1 => y_C = 3.

STEP 6: C = (2, 3). Sum = 2 + 3 = 5.

VERIFICATION: Check altitude from C to AB.
slope_AB = -1, so altitude from C perpendicular to AB has slope 1.
Altitude from C(2,3): y - 3 = 1*(x - 2) => y = x + 1.
Check N(1,2): 2 = 1 + 1 = 2. YES!

All three altitudes pass through N(1,2). Confirmed.

ANSWER: (B) 5
</script>

<script>
MathJax = {
  tex: { inlineMath: [['\\(', '\\)'], ['$', '$']], displayMath: [['\\[', '\\]']] },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

<style>
*, *::before, *::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 1rem;
  min-height: 100vh;
}

.container {
  max-width: 800px;
  margin: 0 auto;
  padding: 1rem 0;
}

h1 {
  font-size: clamp(1.5rem, 4vw, 2.2rem);
  font-weight: 700;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-align: center;
  margin-bottom: 0.25rem;
}

.subtitle {
  text-align: center;
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 2rem;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
}

.card-title {
  font-size: 1.15rem;
  font-weight: 600;
  color: #60a5fa;
  margin-bottom: 0.75rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.card-title .icon {
  font-size: 1.3rem;
}

.problem-statement {
  background: #1e293b;
  border: 2px solid #a78bfa;
  border-radius: 14px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  font-size: 1.1rem;
}

.problem-statement .card-title {
  color: #a78bfa;
}

.given-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 0.5rem;
  margin-top: 1rem;
}

.answer-option {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 8px;
  padding: 0.5rem 0.75rem;
  text-align: center;
  font-size: 1rem;
  transition: border-color 0.2s;
}

.answer-option.correct {
  border-color: #4ade80;
  background: rgba(74, 222, 128, 0.1);
  color: #4ade80;
  font-weight: 600;
}

.plan-list {
  list-style: none;
  counter-reset: plan;
}

.plan-list li {
  counter-increment: plan;
  padding: 0.4rem 0 0.4rem 2.2rem;
  position: relative;
}

.plan-list li::before {
  content: counter(plan);
  position: absolute;
  left: 0;
  top: 0.4rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  width: 1.6rem;
  height: 1.6rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.85rem;
}

details {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  margin-bottom: 1.5rem;
}

details summary {
  padding: 1rem 1.5rem;
  cursor: pointer;
  font-weight: 600;
  color: #a78bfa;
  list-style: none;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

details summary::-webkit-details-marker { display: none; }

details summary::before {
  content: '\25B6';
  font-size: 0.75rem;
  transition: transform 0.2s;
}

details[open] summary::before {
  transform: rotate(90deg);
}

details .detail-content {
  padding: 0 1.5rem 1.5rem;
}

.step {
  border-left: 3px solid #334155;
  padding-left: 1.25rem;
  margin-bottom: 1.5rem;
  position: relative;
}

.step::before {
  content: '';
  position: absolute;
  left: -7px;
  top: 0;
  width: 11px;
  height: 11px;
  border-radius: 50%;
  background: #60a5fa;
}

.step-title {
  font-weight: 600;
  color: #60a5fa;
  margin-bottom: 0.4rem;
  font-size: 1.05rem;
}

.checkpoint {
  background: rgba(163, 130, 250, 0.1);
  border: 1px solid #a78bfa;
  border-radius: 10px;
  padding: 0.75rem 1rem;
  margin: 0.75rem 0;
  font-size: 0.95rem;
  color: #a78bfa;
}

.checkpoint-label {
  font-weight: 700;
  margin-right: 0.25rem;
}

.canvas-wrap {
  text-align: center;
  margin: 1rem 0;
}

canvas {
  border-radius: 12px;
  background: #0f172a;
  border: 1px solid #334155;
  max-width: 100%;
  touch-action: none;
}

.final-answer {
  background: rgba(74, 222, 128, 0.08);
  border: 2px solid #4ade80;
  border-radius: 14px;
  padding: 1.5rem;
  text-align: center;
  margin-bottom: 1.5rem;
}

.final-answer .label {
  font-size: 0.95rem;
  color: #94a3b8;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  margin-bottom: 0.5rem;
}

.final-answer .value {
  font-size: 1.6rem;
  font-weight: 700;
  color: #4ade80;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid #60a5fa;
  border-radius: 14px;
  padding: 1.25rem 1.5rem;
  margin-bottom: 1.5rem;
}

.insight-box .card-title {
  color: #60a5fa;
}

.pitfall {
  background: rgba(244, 114, 182, 0.08);
  border: 1px solid #f472b6;
  border-radius: 10px;
  padding: 0.75rem 1rem;
  margin-bottom: 0.75rem;
}

.pitfall strong {
  color: #f472b6;
}

.challenge-box {
  background: rgba(52, 211, 153, 0.08);
  border: 1px dashed #34d399;
  border-radius: 14px;
  padding: 1.25rem 1.5rem;
  margin-bottom: 1rem;
}

.challenge-box .card-title {
  color: #34d399;
}

.muted {
  color: #94a3b8;
}

.highlight {
  color: #4ade80;
  font-weight: 600;
}

mjx-container {
  overflow-x: auto;
}

@media (max-width: 600px) {
  body { padding: 0.5rem; }
  .card, .problem-statement, details .detail-content, .final-answer,
  .insight-box, .challenge-box { padding: 1rem; }
  .given-grid { grid-template-columns: repeat(3, 1fr); }
}
</style>
</head>
<body>
<div class="container">

  <!-- TITLE -->
  <h1>Zbir koordinata temena C trougla sa datim ortocentrom</h1>
  <p class="subtitle">Analiti&#269;ka geometrija &mdash; ortocentar trougla</p>

  <!-- PROBLEM STATEMENT -->
  <div class="problem-statement">
    <div class="card-title"><span class="icon">&#128220;</span> Zadatak</div>
    <p>Ta&#269;ke \(A(-2,\, 2)\) i \(B(2,\, -2)\) su temena trougla \(ABC\), a \(N(1,\, 2)\) je presek visina tog trougla (ortocentar). Zbir koordinata temena \(C\) jednak je:</p>
    <div class="given-grid">
      <div class="answer-option" data-option="A">(A) \(3\)</div>
      <div class="answer-option correct" data-option="B">(B) \(5\)</div>
      <div class="answer-option" data-option="C">(C) \(7\)</div>
      <div class="answer-option" data-option="D">(D) \(9\)</div>
      <div class="answer-option" data-option="E">(E) \(11\)</div>
    </div>
  </div>

  <!-- PLAN -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128204;</span> Plan re&#353;avanja</div>
    <ol class="plan-list">
      <li>Odrediti nagib prave \(AB\) i koristiti svojstvo ortogonalnosti visina</li>
      <li>Prona&#263;i jedna&#269;inu visine iz \(A\) na \(BC\) (prolazi kroz \(A\) i \(N\))</li>
      <li>Iz pravca te visine zaklju&#269;iti pravac stranice \(BC\) i na&#263;i \(x\)-koordinatu ta&#269;ke \(C\)</li>
      <li>Iskoristiti visinu iz \(B\) na \(AC\) da se na&#273;e \(y\)-koordinata ta&#269;ke \(C\)</li>
      <li>Verifikovati da tre&#263;a visina tako&#273;e prolazi kroz \(N\)</li>
    </ol>
  </div>

  <!-- THEORY REFRESHER -->
  <details>
    <summary>Podsetnik iz teorije</summary>
    <div class="detail-content">
      <p><strong>Ortocentar</strong> trougla je presek tri visine. Dovoljno je na&#263;i presek bilo koje dve visine &mdash; tre&#263;a automatski prolazi kroz istu ta&#269;ku.</p>
      <p style="margin-top:0.75rem"><strong>Visina trougla</strong> je prava koja prolazi kroz jedno teme i normalna je na naspramnu stranicu.</p>
      <p style="margin-top:0.75rem"><strong>Uslov normalnosti:</strong> Ako prava \(\ell_1\) ima nagib \(k_1\), a prava \(\ell_2\) ima nagib \(k_2\), one su normalne ako i samo ako:</p>
      \[k_1 \cdot k_2 = -1\]
      <p style="margin-top:0.75rem"><strong>Nagib prave</strong> kroz ta&#269;ke \((x_1, y_1)\) i \((x_2, y_2)\):</p>
      \[k = \frac{y_2 - y_1}{x_2 - x_1}\]
      <p style="margin-top:0.75rem"><strong>Posebni slu&#269;ajevi:</strong> Horizontalna prava (nagib \(0\)) je normalna na vertikalnu pravu (nedefinisan nagib), i obrnuto.</p>
    </div>
  </details>

  <!-- VISUAL AID -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128202;</span> Trougao, visine i ortocentar</div>
    <p class="muted" style="margin-bottom:0.75rem;">Trougao \(ABC\) sa sve tri visine i ortocentrom \(N\). Visine su prikazane isprekidanim linijama.</p>
    <div class="canvas-wrap">
      <canvas id="diagram" width="700" height="700"></canvas>
    </div>
  </div>

  <!-- STEP-BY-STEP SOLUTION -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9999;&#65039;</span> Re&#353;enje korak po korak</div>

    <!-- Step 1 -->
    <div class="step">
      <div class="step-title">Korak 1: Nagib stranice \(AB\)</div>
      <p>Izra&#269;unavamo nagib prave kroz \(A(-2,\,2)\) i \(B(2,\,-2)\):</p>
      \[k_{AB} = \frac{-2 - 2}{2 - (-2)} = \frac{-4}{4} = -1\]
      <p>Prema tome, prava \(AB\) ima nagib \(-1\), tj. zaklapa ugao od \(135°\) sa pozitivnim smerom \(x\)-ose.</p>
    </div>

    <!-- Step 2 -->
    <div class="step">
      <div class="step-title">Korak 2: Visina iz \(A\) na stranicu \(BC\)</div>
      <p>Visina iz temena \(A\) prolazi kroz \(A(-2,\,2)\) i mora prolaziti kroz ortocentar \(N(1,\,2)\). Odredimo njen nagib:</p>
      \[k_{h_A} = \frac{2 - 2}{1 - (-2)} = \frac{0}{3} = 0\]
      <p>Visina iz \(A\) je <strong>horizontalna prava</strong>: \(y = 2\).</p>
      <p>Po&#353;to je ova visina normalna na stranicu \(BC\), sledi da je \(BC\) <strong>vertikalna prava</strong>.</p>
    </div>

    <div class="checkpoint">
      <span class="checkpoint-label">Klju&#269;ni zaklju&#269;ak:</span> Stranica \(BC\) je vertikalna. Po&#353;to \(B\) ima koordinatu \(x = 2\), prava \(BC\) glasi: \(x = 2\). Dakle, ta&#269;ka \(C\) ima \(x_C = 2\).
    </div>

    <!-- Step 3 -->
    <div class="step">
      <div class="step-title">Korak 3: Visina iz \(B\) na stranicu \(AC\)</div>
      <p>Visina iz temena \(B(2,\,-2)\) tako&#273;e prolazi kroz ortocentar \(N(1,\,2)\). Njen nagib je:</p>
      \[k_{h_B} = \frac{2 - (-2)}{1 - 2} = \frac{4}{-1} = -4\]
      <p>Ova visina je normalna na stranicu \(AC\), pa va&#382;i:</p>
      \[k_{AC} \cdot k_{h_B} = -1 \implies k_{AC} \cdot (-4) = -1 \implies k_{AC} = \frac{1}{4}\]
    </div>

    <!-- Step 4 -->
    <div class="step">
      <div class="step-title">Korak 4: Odre&#273;ivanje \(y_C\)</div>
      <p>Nagib stranice \(AC\) mo&#382;emo izraziti direktno preko koordinata ta&#269;aka \(A(-2,\,2)\) i \(C(2,\,y_C)\):</p>
      \[k_{AC} = \frac{y_C - 2}{2 - (-2)} = \frac{y_C - 2}{4}\]
      <p>Izjedna&#269;avamo sa dobijenim nagibom \(\frac{1}{4}\):</p>
      \[\frac{y_C - 2}{4} = \frac{1}{4}\]
      \[y_C - 2 = 1\]
      \[\boxed{y_C = 3}\]
    </div>

    <div class="checkpoint">
      <span class="checkpoint-label">Proveri se:</span> Ta&#269;ka \(C = (2,\, 3)\). Zbir koordinata: \(x_C + y_C = 2 + 3 = 5\).
    </div>

    <!-- Step 5 -->
    <div class="step">
      <div class="step-title">Korak 5: Verifikacija &mdash; visina iz \(C\) na \(AB\)</div>
      <p>Nagib stranice \(AB\) je \(-1\), pa visina iz \(C\) na \(AB\) ima nagib:</p>
      \[k_{h_C} = -\frac{1}{k_{AB}} = -\frac{1}{-1} = 1\]
      <p>Jedna&#269;ina visine iz \(C(2,\, 3)\) sa nagibom \(1\):</p>
      \[y - 3 = 1 \cdot (x - 2) \implies y = x + 1\]
      <p>Proveravamo da li \(N(1,\, 2)\) le&#382;i na ovoj pravoj:</p>
      \[y = 1 + 1 = 2 \quad \checkmark\]
      <p>Tre&#263;a visina zaista prolazi kroz \(N(1,\, 2)\). Re&#353;enje je <strong>potvr&#273;eno</strong>.</p>
    </div>
  </div>

  <!-- KEY INSIGHT -->
  <div class="insight-box">
    <div class="card-title"><span class="icon">&#128161;</span> Klju&#269;ni uvid</div>
    <p>Najva&#382;niji korak je uo&#269;iti da ta&#269;ke \(A(-2,\,2)\) i \(N(1,\,2)\) imaju <strong>istu \(y\)-koordinatu</strong>. To zna&#269;i da je visina iz \(A\) horizontalna, a prema tome stranica \(BC\) mora biti vertikalna. Ovaj zaklju&#269;ak odmah fiksira \(x_C = 2\) i svodi problem na tra&#382;enje samo jedne nepoznate.</p>
  </div>

  <!-- FINAL ANSWER -->
  <div class="final-answer">
    <div class="label">Kona&#269;an odgovor</div>
    <div class="value">(B) \(\; x_C + y_C = 2 + 3 = 5\)</div>
  </div>

  <!-- COMMON PITFALLS -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9888;&#65039;</span> &#268;este gre&#353;ke</div>
    <div class="pitfall">
      <strong>Me&#353;anje visine i te&#382;i&#353;ne linije:</strong> Visina ide iz temena normalno na naspramnu stranicu. Te&#382;i&#353;na linija ide iz temena ka sredi&#353;tu naspramne stranice. To su razli&#269;iti pojmovi i poklapaju se samo u jednakostranom trouglu.
    </div>
    <div class="pitfall">
      <strong>Zaborav uslova normalnosti:</strong> Ako je visina horizontalna (nagib 0), pripadaju&#263;a stranica mora biti vertikalna (nedefinisan nagib), i obrnuto. Studenti ponekad postave \(k \cdot 0 = -1\) i dobiju kontradikciju, umesto da koriste poseban slu&#269;aj.
    </div>
    <div class="pitfall">
      <strong>Nedovoljna verifikacija:</strong> Uvek proveriti da <em>sve tri</em> visine prolaze kroz isti ortocentar. Gre&#353;ka u ra&#269;unu se lako otkrije tako &#353;to se tre&#263;a visina ne&#263;e poklopiti.
    </div>
  </div>

  <!-- OPTIONAL CHALLENGE -->
  <div class="challenge-box">
    <div class="card-title"><span class="icon">&#127942;</span> Dodatni izazov</div>
    <p>Za isti trougao \(ABC\) sa \(A(-2,\,2)\), \(B(2,\,-2)\), \(C(2,\,3)\), na&#273;i koordinate <strong>centra opisanog kruga</strong> (centroid je drugi pojam!).</p>
    <p class="muted" style="margin-top:0.5rem;font-size:0.9rem;">Savet: Centar opisanog kruga je jednako udaljen od sva tri temena. Postavi sistem \(|OA|^2 = |OB|^2 = |OC|^2\) i re&#353;i po koordinatama centra \(O(x_0, y_0)\).</p>
  </div>

</div>

<script>
(function() {
  var canvas = document.getElementById('diagram');
  if (!canvas) return;
  var ctx = canvas.getContext('2d');
  var W = canvas.width;
  var H = canvas.height;

  // Coordinate system: map math coords to canvas coords
  // Points: A(-2,2), B(2,-2), C(2,3), N(1,2)
  // Range: x from -3.5 to 4, y from -3.5 to 4.5
  var xMin = -3.8, xMax = 4.3, yMin = -3.8, yMax = 4.8;
  var margin = 40;

  function toCanvasX(x) {
    return margin + (x - xMin) / (xMax - xMin) * (W - 2 * margin);
  }
  function toCanvasY(y) {
    // Y-axis UP: higher y = lower canvas y
    return H - margin - (y - yMin) / (yMax - yMin) * (H - 2 * margin);
  }

  // Points
  var A = { x: -2, y: 2, label: 'A(-2, 2)' };
  var B = { x: 2, y: -2, label: 'B(2, -2)' };
  var C = { x: 2, y: 3, label: 'C(2, 3)' };
  var N = { x: 1, y: 2, label: 'N(1, 2)' };

  // Clear canvas
  ctx.fillStyle = '#0f172a';
  ctx.fillRect(0, 0, W, H);

  // Draw grid
  ctx.strokeStyle = '#1e293b';
  ctx.lineWidth = 1;
  for (var gx = Math.ceil(xMin); gx <= Math.floor(xMax); gx++) {
    ctx.beginPath();
    ctx.moveTo(toCanvasX(gx), toCanvasY(yMin));
    ctx.lineTo(toCanvasX(gx), toCanvasY(yMax));
    ctx.stroke();
  }
  for (var gy = Math.ceil(yMin); gy <= Math.floor(yMax); gy++) {
    ctx.beginPath();
    ctx.moveTo(toCanvasX(xMin), toCanvasY(gy));
    ctx.lineTo(toCanvasX(xMax), toCanvasY(gy));
    ctx.stroke();
  }

  // Draw axes
  ctx.strokeStyle = '#475569';
  ctx.lineWidth = 1.5;
  // x-axis
  ctx.beginPath();
  ctx.moveTo(toCanvasX(xMin), toCanvasY(0));
  ctx.lineTo(toCanvasX(xMax), toCanvasY(0));
  ctx.stroke();
  // y-axis
  ctx.beginPath();
  ctx.moveTo(toCanvasX(0), toCanvasY(yMin));
  ctx.lineTo(toCanvasX(0), toCanvasY(yMax));
  ctx.stroke();

  // Axis labels
  ctx.fillStyle = '#64748b';
  ctx.font = '13px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'center';
  ctx.textBaseline = 'top';
  ctx.fillText('x', toCanvasX(xMax) - 5, toCanvasY(0) + 8);
  ctx.textAlign = 'right';
  ctx.textBaseline = 'middle';
  ctx.fillText('y', toCanvasX(0) - 8, toCanvasY(yMax) + 10);

  // Tick marks on axes
  ctx.fillStyle = '#64748b';
  ctx.font = '11px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'center';
  ctx.textBaseline = 'top';
  for (var tx = Math.ceil(xMin); tx <= Math.floor(xMax); tx++) {
    if (tx === 0) continue;
    ctx.beginPath();
    ctx.moveTo(toCanvasX(tx), toCanvasY(0) - 3);
    ctx.lineTo(toCanvasX(tx), toCanvasY(0) + 3);
    ctx.stroke();
    ctx.fillText(tx.toString(), toCanvasX(tx), toCanvasY(0) + 6);
  }
  ctx.textAlign = 'right';
  ctx.textBaseline = 'middle';
  for (var ty = Math.ceil(yMin); ty <= Math.floor(yMax); ty++) {
    if (ty === 0) continue;
    ctx.beginPath();
    ctx.moveTo(toCanvasX(0) - 3, toCanvasY(ty));
    ctx.lineTo(toCanvasX(0) + 3, toCanvasY(ty));
    ctx.stroke();
    ctx.fillText(ty.toString(), toCanvasX(0) - 8, toCanvasY(ty));
  }

  // Helper: draw a line between two math-coord points, extended beyond them
  function drawExtendedLine(x1, y1, x2, y2, color, width, dash, extend) {
    var dx = x2 - x1, dy = y2 - y1;
    var len = Math.sqrt(dx * dx + dy * dy);
    var ux = dx / len, uy = dy / len;
    var ex1 = x1 - ux * extend, ey1 = y1 - uy * extend;
    var ex2 = x2 + ux * extend, ey2 = y2 + uy * extend;
    ctx.save();
    ctx.strokeStyle = color;
    ctx.lineWidth = width;
    if (dash) ctx.setLineDash(dash);
    ctx.beginPath();
    ctx.moveTo(toCanvasX(ex1), toCanvasY(ey1));
    ctx.lineTo(toCanvasX(ex2), toCanvasY(ey2));
    ctx.stroke();
    ctx.restore();
  }

  // Helper: draw line segment
  function drawSegment(x1, y1, x2, y2, color, width, dash) {
    ctx.save();
    ctx.strokeStyle = color;
    ctx.lineWidth = width;
    if (dash) ctx.setLineDash(dash);
    ctx.beginPath();
    ctx.moveTo(toCanvasX(x1), toCanvasY(y1));
    ctx.lineTo(toCanvasX(x2), toCanvasY(y2));
    ctx.stroke();
    ctx.restore();
  }

  // Helper: draw a point
  function drawPoint(x, y, color, radius) {
    ctx.beginPath();
    ctx.arc(toCanvasX(x), toCanvasY(y), radius || 6, 0, 2 * Math.PI);
    ctx.fillStyle = color;
    ctx.fill();
    ctx.strokeStyle = '#0f172a';
    ctx.lineWidth = 2;
    ctx.stroke();
  }

  // Helper: draw label
  function drawLabel(text, x, y, color, offsetX, offsetY, align, baseline, fontWeight) {
    ctx.save();
    ctx.fillStyle = color;
    ctx.font = (fontWeight || 'bold') + ' 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = align || 'left';
    ctx.textBaseline = baseline || 'middle';
    ctx.fillText(text, toCanvasX(x) + (offsetX || 0), toCanvasY(y) + (offsetY || 0));
    ctx.restore();
  }

  // Find foot of altitude from C onto AB
  // AB: direction (-2,2) to (2,-2) => d = (4,-4), normalized
  // Foot = A + ((C-A).d/|d|^2)*d
  var ABdx = 4, ABdy = -4;
  var ACdx = C.x - A.x, ACdy = C.y - A.y;
  var t1 = (ACdx * ABdx + ACdy * ABdy) / (ABdx * ABdx + ABdy * ABdy);
  var footC = { x: A.x + t1 * ABdx, y: A.y + t1 * ABdy }; // foot from C to AB

  // Find foot of altitude from A onto BC
  // BC is vertical (x=2), so foot is simply (2, 2)
  var footA = { x: 2, y: 2 };

  // Find foot of altitude from B onto AC
  // AC: direction from A(-2,2) to C(2,3) => d = (4,1)
  var ACdx2 = 4, ACdy2 = 1;
  var ABdx2 = B.x - A.x, ABdy2 = B.y - A.y;
  var t2 = (ABdx2 * ACdx2 + ABdy2 * ACdy2) / (ACdx2 * ACdx2 + ACdy2 * ACdy2);
  var footB = { x: A.x + t2 * ACdx2, y: A.y + t2 * ACdy2 }; // foot from B to AC

  // Draw the triangle fill
  ctx.beginPath();
  ctx.moveTo(toCanvasX(A.x), toCanvasY(A.y));
  ctx.lineTo(toCanvasX(B.x), toCanvasY(B.y));
  ctx.lineTo(toCanvasX(C.x), toCanvasY(C.y));
  ctx.closePath();
  ctx.fillStyle = 'rgba(96, 165, 250, 0.06)';
  ctx.fill();

  // Draw the three altitudes (dashed, different colors)
  // Altitude from A to BC (horizontal line y=2, from A through N)
  drawSegment(A.x, A.y, footA.x, footA.y, '#f472b6', 2, [8, 5]);
  // Extend a bit beyond
  drawSegment(A.x - 0.5, A.y, footA.x + 0.3, footA.y, '#f472b6', 1.5, [8, 5]);

  // Altitude from B to AC (passes through B and N, slope -4)
  drawSegment(B.x, B.y, footB.x, footB.y, '#a78bfa', 2, [8, 5]);

  // Altitude from C to AB (slope 1, y = x + 1)
  drawSegment(C.x, C.y, footC.x, footC.y, '#34d399', 2, [8, 5]);

  // Draw right angle markers at feet
  function drawRightAngle(footX, footY, dir1x, dir1y, dir2x, dir2y, color) {
    var sz = 0.25;
    var len1 = Math.sqrt(dir1x * dir1x + dir1y * dir1y);
    var len2 = Math.sqrt(dir2x * dir2x + dir2y * dir2y);
    var u1x = dir1x / len1 * sz, u1y = dir1y / len1 * sz;
    var u2x = dir2x / len2 * sz, u2y = dir2y / len2 * sz;
    ctx.save();
    ctx.strokeStyle = color;
    ctx.lineWidth = 1.5;
    ctx.setLineDash([]);
    ctx.beginPath();
    ctx.moveTo(toCanvasX(footX + u1x), toCanvasY(footY + u1y));
    ctx.lineTo(toCanvasX(footX + u1x + u2x), toCanvasY(footY + u1y + u2y));
    ctx.lineTo(toCanvasX(footX + u2x), toCanvasY(footY + u2y));
    ctx.stroke();
    ctx.restore();
  }

  // Right angle at footA (altitude from A on BC). BC is vertical, altitude is horizontal
  drawRightAngle(footA.x, footA.y, -0.3, 0, 0, -0.3, '#f472b6');

  // Right angle at footB (altitude from B on AC). AC direction (4,1), altitude direction perpendicular
  drawRightAngle(footB.x, footB.y, ACdx2, ACdy2, B.x - footB.x, B.y - footB.y, '#a78bfa');

  // Right angle at footC (altitude from C on AB). AB direction (4,-4), altitude direction perpendicular
  drawRightAngle(footC.x, footC.y, ABdx, ABdy, C.x - footC.x, C.y - footC.y, '#34d399');

  // Draw the triangle edges (solid)
  // AB
  drawSegment(A.x, A.y, B.x, B.y, '#60a5fa', 2.5, null);
  // BC
  drawSegment(B.x, B.y, C.x, C.y, '#60a5fa', 2.5, null);
  // AC
  drawSegment(A.x, A.y, C.x, C.y, '#60a5fa', 2.5, null);

  // Draw the points
  drawPoint(A.x, A.y, '#60a5fa', 7);
  drawPoint(B.x, B.y, '#60a5fa', 7);
  drawPoint(C.x, C.y, '#4ade80', 8);
  drawPoint(N.x, N.y, '#f472b6', 7);

  // Draw foot points (smaller)
  drawPoint(footA.x, footA.y, '#f472b6', 4);
  drawPoint(footB.x, footB.y, '#a78bfa', 4);
  drawPoint(footC.x, footC.y, '#34d399', 4);

  // Labels
  drawLabel('A(-2, 2)', A.x, A.y, '#60a5fa', -14, -16, 'right');
  drawLabel('B(2, -2)', B.x, B.y, '#60a5fa', 12, 16, 'left');
  drawLabel('C(2, 3)', C.x, C.y, '#4ade80', 12, -10, 'left');
  drawLabel('N(1, 2)', N.x, N.y, '#f472b6', -12, 16, 'right');

  // Altitude labels
  drawLabel('h\u2090', (A.x + footA.x) / 2, A.y, '#f472b6', 0, -14, 'center', 'bottom', 'normal');
  drawLabel('h\u2092', (B.x + footB.x) / 2, (B.y + footB.y) / 2, '#a78bfa', -16, 0, 'right', 'middle', 'normal');
  drawLabel('h\u2091', (C.x + footC.x) / 2, (C.y + footC.y) / 2, '#34d399', 14, -4, 'left', 'middle', 'normal');

  // Side labels
  drawLabel('AB', (A.x + B.x) / 2, (A.y + B.y) / 2, '#94a3b8', -18, 0, 'right', 'middle', 'normal');
  drawLabel('BC', B.x, (B.y + C.y) / 2, '#94a3b8', 16, 0, 'left', 'middle', 'normal');
  drawLabel('AC', (A.x + C.x) / 2, (A.y + C.y) / 2, '#94a3b8', -10, -14, 'right', 'bottom', 'normal');

  // Legend at bottom
  ctx.save();
  ctx.font = '13px Segoe UI, system-ui, sans-serif';
  var legendY = H - 18;
  var legendItems = [
    { color: '#60a5fa', text: 'Stranice trougla' },
    { color: '#f472b6', text: 'Visina iz A' },
    { color: '#a78bfa', text: 'Visina iz B' },
    { color: '#34d399', text: 'Visina iz C' }
  ];
  var totalWidth = 0;
  legendItems.forEach(function(item) {
    totalWidth += ctx.measureText(item.text).width + 30;
  });
  var startX = (W - totalWidth) / 2;
  legendItems.forEach(function(item) {
    // Color swatch
    ctx.fillStyle = item.color;
    ctx.fillRect(startX, legendY - 6, 14, 14);
    // Text
    ctx.fillStyle = '#94a3b8';
    ctx.textAlign = 'left';
    ctx.textBaseline = 'middle';
    ctx.fillText(item.text, startX + 18, legendY + 1);
    startX += ctx.measureText(item.text).width + 34;
  });
  ctx.restore();

})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{"title":"Zbir koordinata temena C trougla sa datim ortocentrom","subject":"math","unit":"analitička geometrija","topic_tags":["ortocentar","visine trougla","analitička geometrija","nagib prave","normalnost pravih"]}
BRAINSPARK_META-->