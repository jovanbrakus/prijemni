<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Granična vrednost sa proizvodom kosinusa</title>
<script type="text/info" id="logic-scratchpad">
PROBLEM:
lim(x→0) (1 − cos(x)·cos(2x)·cos(3x)) / (1 − cos(x))

APPROACH: Taylor expansion of cos(kx) around x=0

STEP 1: Expand each cosine using Taylor series
cos(kx) ≈ 1 − k²x²/2 + O(x⁴)

cos(x)   ≈ 1 − x²/2
cos(2x)  ≈ 1 − 2x²
cos(3x)  ≈ 1 − 9x²/2

STEP 2: Multiply (keeping terms up to x²)
cos(x)·cos(2x)·cos(3x) ≈ (1 − x²/2)(1 − 2x²)(1 − 9x²/2)

First multiply (1 − x²/2)(1 − 2x²):
= 1 − 2x² − x²/2 + x⁴ ≈ 1 − 5x²/2

Then multiply by (1 − 9x²/2):
= (1 − 5x²/2)(1 − 9x²/2)
= 1 − 9x²/2 − 5x²/2 + higher order
= 1 − 14x²/2
= 1 − 7x²

STEP 3: Numerator
1 − cos(x)·cos(2x)·cos(3x) ≈ 1 − (1 − 7x²) = 7x²

STEP 4: Denominator
1 − cos(x) ≈ x²/2

STEP 5: Limit
lim = 7x² / (x²/2) = 7 · 2 = 14

ANSWER: 14, option (B)

VERIFICATION:
- Using L'Hôpital's rule twice would give the same result
- Sum of squares: 1² + 2² + 3² = 1 + 4 + 9 = 14
- General formula: lim(x→0) (1 − cos(x)·cos(2x)·...·cos(nx)) / (1 − cos(x)) = Σk² for k=1..n
- For n=3: 1² + 2² + 3² = 14 ✓
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  text-align: center;
}

.subtitle {
  color: #94a3b8;
  text-align: center;
  font-size: 1.05rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.35rem;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.1rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56,189,248,0.06);
  border: 1px solid rgba(56,189,248,0.12);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 100px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
  font-weight: 600;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  transition: border-color 0.2s ease, background 0.2s ease;
  cursor: default;
}

.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 14px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.plan-card {
  border-left: 4px solid #a78bfa;
}

.theory-card details {
  margin: 15px 0;
}

.theory-card summary {
  cursor: pointer;
  font-size: 1.05rem;
  font-weight: 600;
  color: #a78bfa;
  padding: 8px 0;
  user-select: none;
}

.theory-card ul {
  list-style: none;
  padding: 12px 0;
}

.theory-card li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #e2e8f0;
}

.theory-card li:last-child {
  border-bottom: none;
}

/* Step styling */
.step {
  display: flex;
  gap: 16px;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 12px;
  border-left: 3px solid transparent;
  transition: border-color 0.2s ease, background 0.2s ease;
  cursor: pointer;
}

.step:hover, .step.active {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}

.step-badge {
  width: 32px;
  height: 32px;
  min-width: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  margin-bottom: 8px;
  color: #e2e8f0;
  font-size: 1.05rem;
}

.step-content p {
  color: #cbd5e1;
  margin-bottom: 8px;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 6px;
}

/* Check yourself */
.checkpoint {
  margin: 20px 0;
  background: rgba(167,139,250,0.06);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
}

.checkpoint summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 0.95rem;
  user-select: none;
}

.checkpoint .answer {
  padding-top: 10px;
  color: #4ade80;
  font-weight: 600;
}

/* Key Insight */
.insight-card {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid rgba(96,165,250,0.25);
  text-align: center;
  padding: 28px;
}

.insight-card .big-formula {
  font-size: 1.4rem;
  margin: 16px 0;
  color: #4ade80;
}

/* Final Answer */
.final-answer-card {
  border: 2px solid #4ade80;
  background: linear-gradient(135deg, rgba(52,211,153,0.08), rgba(74,222,128,0.04));
  text-align: center;
  padding: 28px;
}

.final-answer-card h2 {
  color: #4ade80;
  justify-content: center;
}

.final-answer-value {
  font-size: 1.8rem;
  color: #4ade80;
  font-weight: 800;
  margin: 16px 0;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 20px 0;
}

.option-card {
  padding: 10px 22px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: #1e293b;
  color: #94a3b8;
  font-size: 1rem;
  font-weight: 600;
  transition: all 0.2s ease;
}

.option-card.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.1);
  color: #4ade80;
  box-shadow: 0 0 20px rgba(74,222,128,0.15);
}

.verification-note {
  color: #94a3b8;
  font-size: 0.92rem;
  margin-top: 14px;
  padding-top: 14px;
  border-top: 1px solid #334155;
  text-align: left;
}

/* Pitfalls */
.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #cbd5e1;
}

.pitfall-list li:last-child {
  border-bottom: none;
}

.pitfall-label {
  color: #e09468;
  font-weight: 700;
  margin-right: 6px;
}

/* Challenge */
.challenge-card {
  border-left: 4px solid #f472b6;
}

.challenge-card details {
  margin: 15px 0;
}

.challenge-card summary {
  cursor: pointer;
  color: #f472b6;
  font-weight: 600;
  user-select: none;
}

/* Canvas */
canvas {
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  touch-action: none;
  max-width: 100%;
}

.canvas-hint {
  text-align: center;
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

.highlight-blue {
  color: #60a5fa;
  font-weight: 600;
}

.highlight-green {
  color: #4ade80;
  font-weight: 600;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step { padding: 12px; }
  .given-grid { gap: 8px; }
  .given-item { min-width: 70px; padding: 10px 12px; }
  .final-answer-value { font-size: 1.4rem; }
  .options-row { gap: 8px; }
  .option-card { padding: 8px 14px; font-size: 0.9rem; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Granična vrednost sa proizvodom kosinusa</h1>
  <p class="subtitle">Matematička analiza &mdash; limesi, Tejlorov razvoj, trigonometrija</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>
      Granična vrednost
    </p>
    <div class="math-block">
      \[ \lim_{x \to 0} \frac{1 - \cos x \cdot \cos 2x \cdot \cos 3x}{1 - \cos x} \]
    </div>
    <p>jednaka je:</p>

    <h3 style="margin-top: 20px;">Ponuđeni odgovori:</h3>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">0</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">14</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">12</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">2</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">10</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan rešavanja</h2>
    <p>
      Oba izraza, brojilac i imenilac, teže ka nuli kada \(x \to 0\), pa imamo neodređeni oblik \(\frac{0}{0}\).
      Koristićemo <span class="highlight-blue">Tejlorov razvoj</span> funkcije \(\cos(kx)\) oko \(x = 0\)
      da zamenimo svaki kosinus aproksimacijom do člana sa \(x^2\). Zatim ćemo pomnožiti razvoje,
      skratiti \(x^2\) i dobiti <span class="highlight-green">konačnu vrednost limesa</span>.
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card theory-card">
    <details>
      <summary>Teorijska podloga &mdash; Tejlorov razvoj kosinusa</summary>
      <ul>
        <li>
          <strong>Tejlorov razvoj za kosinus:</strong>
          \(\cos u = 1 - \dfrac{u^2}{2} + \dfrac{u^4}{24} - \cdots\)
        </li>
        <li>
          <strong>Primena na \(\cos(kx)\):</strong>
          Za \(u = kx\) dobijamo \(\cos(kx) = 1 - \dfrac{k^2 x^2}{2} + O(x^4)\).
          Članovi sa \(x^4\) i višim stepenima nestaju pri deljenju sa \(x^2\) i puštanju \(x \to 0\).
        </li>
        <li>
          <strong>Poznati limes:</strong>
          \(\lim_{x \to 0} \dfrac{1 - \cos x}{x^2} = \dfrac{1}{2}\), što direktno sledi iz Tejlorovog razvoja.
        </li>
        <li>
          <strong>Proizvod aproksimacija:</strong>
          Kada množimo izraze oblika \((1 - a_i x^2)\), zadržavamo samo linearne članove po \(x^2\):
          \(\prod_i (1 - a_i x^2) \approx 1 - \left(\sum_i a_i\right) x^2\).
        </li>
      </ul>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <h2>Vizuelni prikaz</h2>
    <p style="color:#94a3b8; margin-bottom: 14px;">
      Grafik prikazuje funkciju \(f(x) = \dfrac{1 - \cos x \cdot \cos 2x \cdot \cos 3x}{1 - \cos x}\) u okolini tačke \(x = 0\).
      Uočite kako se vrednost funkcije približava <span class="highlight-green">14</span> kada \(x \to 0\).
    </p>
    <canvas id="limitCanvas" width="800" height="500"></canvas>
    <p class="canvas-hint">Funkcija f(x) teži ka vrednosti 14 kada x &rarr; 0</p>
  </div>

  <!-- Step-by-step Solution -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step" tabindex="0">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Identifikujemo neodređeni oblik</h3>
        <p>
          Kada \(x \to 0\), imamo \(\cos x \to 1\), \(\cos 2x \to 1\), \(\cos 3x \to 1\), pa je brojilac:
        </p>
        <div class="math-block">
          \[ 1 - \cos 0 \cdot \cos 0 \cdot \cos 0 = 1 - 1 = 0 \]
        </div>
        <p>
          Imenilac je takođe: \(1 - \cos 0 = 1 - 1 = 0\). Imamo neodređeni oblik \(\dfrac{0}{0}\).
        </p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step" tabindex="0">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Razvijemo svaki kosinus po Tejloru</h3>
        <p>
          Koristimo razvoj \(\cos(kx) \approx 1 - \dfrac{k^2 x^2}{2}\) (dovoljno do \(x^2\)):
        </p>
        <div class="math-block">
          \[
          \cos x \approx 1 - \frac{x^2}{2}, \quad
          \cos 2x \approx 1 - \frac{4x^2}{2} = 1 - 2x^2, \quad
          \cos 3x \approx 1 - \frac{9x^2}{2}
          \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri se: Zašto je dovoljno uzeti razvoj samo do \(x^2\)?</summary>
      <div class="answer">
        Imenilac je reda \(x^2\), pa kada delimo brojilac sa imeniocem i pustimo \(x \to 0\),
        svi članovi reda \(x^4\) i višeg nestaju. Zato je dovoljno zadržati samo članove do \(x^2\).
      </div>
    </details>

    <!-- Step 3 -->
    <div class="step" tabindex="0">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Pomnožimo prva dva faktora</h3>
        <p>
          Množimo \(\cos x \cdot \cos 2x\):
        </p>
        <div class="math-block">
          \[
          \left(1 - \frac{x^2}{2}\right)\left(1 - 2x^2\right)
          = 1 - 2x^2 - \frac{x^2}{2} + x^4
          \]
        </div>
        <p>
          Zanemarujemo \(x^4\) i dobijamo:
        </p>
        <div class="math-block">
          \[
          \cos x \cdot \cos 2x \approx 1 - \frac{5x^2}{2}
          \]
        </div>
        <p class="note">
          Koeficijent: \(2 + \dfrac{1}{2} = \dfrac{5}{2}\).
        </p>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step" tabindex="0">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Pomnožimo rezultat sa trećim faktorom</h3>
        <p>
          Sada množimo sa \(\cos 3x \approx 1 - \dfrac{9x^2}{2}\):
        </p>
        <div class="math-block">
          \[
          \left(1 - \frac{5x^2}{2}\right)\left(1 - \frac{9x^2}{2}\right)
          = 1 - \frac{9x^2}{2} - \frac{5x^2}{2} + \frac{45x^4}{4}
          \]
        </div>
        <p>
          Zanemarujemo \(x^4\) i dobijamo:
        </p>
        <div class="math-block">
          \[
          \cos x \cdot \cos 2x \cdot \cos 3x \approx 1 - \frac{14x^2}{2} = 1 - 7x^2
          \]
        </div>
        <p class="note">
          Koeficijent: \(\dfrac{9}{2} + \dfrac{5}{2} = \dfrac{14}{2} = 7\).
        </p>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri se: Odakle dolazi broj 7?</summary>
      <div class="answer">
        Koeficijent uz \(x^2\) u proizvodu je zbir pojedinačnih koeficijenata:
        \(\dfrac{1^2}{2} + \dfrac{2^2}{2} + \dfrac{3^2}{2} = \dfrac{1 + 4 + 9}{2} = \dfrac{14}{2} = 7\).
        To je \(\dfrac{1}{2}\sum_{k=1}^{3} k^2 = \dfrac{14}{2} = 7\).
      </div>
    </details>

    <!-- Step 5 -->
    <div class="step" tabindex="0">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Formiramo brojilac i imenilac</h3>
        <p>
          <strong>Brojilac:</strong>
        </p>
        <div class="math-block">
          \[
          1 - \cos x \cdot \cos 2x \cdot \cos 3x \approx 1 - (1 - 7x^2) = 7x^2
          \]
        </div>
        <p>
          <strong>Imenilac:</strong>
        </p>
        <div class="math-block">
          \[
          1 - \cos x \approx \frac{x^2}{2}
          \]
        </div>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step" tabindex="0">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Izračunamo limes</h3>
        <p>
          Sada je računanje jednostavno:
        </p>
        <div class="math-block">
          \[
          \lim_{x \to 0} \frac{1 - \cos x \cdot \cos 2x \cdot \cos 3x}{1 - \cos x}
          = \lim_{x \to 0} \frac{7x^2}{\dfrac{x^2}{2}}
          = \lim_{x \to 0} \frac{7x^2 \cdot 2}{x^2}
          = \lim_{x \to 0} 14 = \boxed{14}
          \]
        </div>
        <p>
          Članovi \(x^2\) se skrate i ostaje <span class="highlight-green">konstanta 14</span>.
        </p>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="card insight-card">
    <h2 style="justify-content: center;">Ključno zapažanje</h2>
    <p>
      Koeficijent u brojiocu je direktno povezan sa <span class="highlight-pink">zbirom kvadrata</span> koeficijenata uz \(x\)
      u argumentima kosinusa. Za \(\cos x \cdot \cos 2x \cdot \cos 3x\):
    </p>
    <div class="big-formula">
      \[ \frac{\frac{1^2 + 2^2 + 3^2}{2}}{\frac{1}{2}} = 1^2 + 2^2 + 3^2 = 1 + 4 + 9 = 14 \]
    </div>
    <p style="color: #94a3b8; margin-top: 12px;">
      Opšte pravilo: \(\displaystyle\lim_{x \to 0} \frac{1 - \cos(a_1 x)\cos(a_2 x)\cdots\cos(a_n x)}{1 - \cos x} = a_1^2 + a_2^2 + \cdots + a_n^2\).
    </p>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer-card">
    <h2>Konačan odgovor</h2>
    <div class="final-answer-value">
      14
    </div>
    <div class="options-row">
      <div class="option-card">(A) 0</div>
      <div class="option-card correct">(B) 14</div>
      <div class="option-card">(C) 12</div>
      <div class="option-card">(D) 2</div>
      <div class="option-card">(E) 10</div>
    </div>
    <p class="verification-note">
      <strong>Verifikacija:</strong> Numerička provera &mdash; za \(x = 0{,}001\):
      \(\cos(0{,}001) \approx 0{,}9999995\),
      brojilac \(\approx 7 \cdot 10^{-6}\), imenilac \(\approx 0{,}5 \cdot 10^{-6}\),
      količnik \(\approx 14{,}000\). Tačan odgovor je <strong>(B) 14</strong>.
    </p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Česte greške</h2>
    <ul class="pitfall-list">
      <li>
        <span class="pitfall-label">Greška 1:</span>
        Zaboraviti na koeficijent \(k^2\) u razvoju \(\cos(kx)\). Razvoj je \(1 - \dfrac{k^2 x^2}{2}\),
        a ne \(1 - \dfrac{k x^2}{2}\). Koeficijent se kvadrira!
      </li>
      <li>
        <span class="pitfall-label">Greška 2:</span>
        Uključivanje članova sa \(x^4\) pri množenju, a zatim pogrešno skraćivanje.
        Dovoljno je i ispravno zadržati samo članove do \(x^2\) jer su viši redovi zanemarljivi.
      </li>
      <li>
        <span class="pitfall-label">Greška 3:</span>
        Primena Lopitalovog pravila bez pojednostavljivanja &mdash; to zahteva izvode proizvoda tri kosinusa,
        što je komplikovanije od Tejlorovog pristupa i lako dovodi do grešaka.
      </li>
      <li>
        <span class="pitfall-label">Greška 4:</span>
        Sabiranje koeficijenata umesto njihovih kvadrata: \(1 + 2 + 3 = 6\) je pogrešno.
        Treba \(1^2 + 2^2 + 3^2 = 14\).
      </li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>
      Izračunaj sličan limes sa četiri kosinusa:
    </p>
    <div class="math-block">
      \[ \lim_{x \to 0} \frac{1 - \cos x \cdot \cos 2x \cdot \cos 3x \cdot \cos 4x}{1 - \cos x} \]
    </div>
    <details>
      <summary>Nagoveštaj i rešenje</summary>
      <p style="padding-top: 10px; color: #cbd5e1;">
        Primeni isto pravilo: zbir kvadrata koeficijenata.
      </p>
      <div class="math-block">
        \[ 1^2 + 2^2 + 3^2 + 4^2 = 1 + 4 + 9 + 16 = 30 \]
      </div>
      <p style="color: #cbd5e1;">
        Opšta formula za \(\cos x \cdot \cos 2x \cdot \ldots \cdot \cos nx\): rezultat je
        \(\displaystyle\sum_{k=1}^{n} k^2 = \frac{n(n+1)(2n+1)}{6}\).
        Za \(n=4\): \(\dfrac{4 \cdot 5 \cdot 9}{6} = 30\).
      </p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('limitCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');

  const dpr = window.devicePixelRatio || 1;
  canvas.width = 800 * dpr;
  canvas.height = 500 * dpr;
  ctx.scale(dpr, dpr);

  const W = 800;
  const H = 500;

  // Function to evaluate
  function f(x) {
    if (Math.abs(x) < 1e-12) return 14;
    const num = 1 - Math.cos(x) * Math.cos(2*x) * Math.cos(3*x);
    const den = 1 - Math.cos(x);
    if (Math.abs(den) < 1e-15) return 14;
    return num / den;
  }

  function draw() {
    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Chart area
    const marginLeft = 70;
    const marginRight = 40;
    const marginTop = 50;
    const marginBottom = 60;

    const chartLeft = marginLeft;
    const chartRight = W - marginRight;
    const chartTop = marginTop;
    const chartBottom = H - marginBottom;
    const chartW = chartRight - chartLeft;
    const chartH = chartBottom - chartTop;

    // Domain and range
    const xMin = -1.5;
    const xMax = 1.5;
    const yMin = -2;
    const yMax = 22;

    function toCanvasX(x) {
      return chartLeft + (x - xMin) / (xMax - xMin) * chartW;
    }

    function toCanvasY(y) {
      return chartBottom - (y - yMin) / (yMax - yMin) * chartH;
    }

    // Grid lines
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;

    // Horizontal grid
    for (let y = 0; y <= 20; y += 2) {
      const cy = toCanvasY(y);
      ctx.beginPath();
      ctx.moveTo(chartLeft, cy);
      ctx.lineTo(chartRight, cy);
      ctx.stroke();
    }

    // Vertical grid
    for (let x = -1.5; x <= 1.5; x += 0.5) {
      const cx = toCanvasX(x);
      ctx.beginPath();
      ctx.moveTo(cx, chartTop);
      ctx.lineTo(cx, chartBottom);
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;

    // X-axis (y=0)
    const yAxisY = toCanvasY(0);
    ctx.beginPath();
    ctx.moveTo(chartLeft, yAxisY);
    ctx.lineTo(chartRight, yAxisY);
    ctx.stroke();

    // Y-axis (x=0)
    const xAxisX = toCanvasX(0);
    ctx.beginPath();
    ctx.moveTo(xAxisX, chartTop);
    ctx.lineTo(xAxisX, chartBottom);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';

    // X-axis ticks
    for (let x = -1.5; x <= 1.5; x += 0.5) {
      const cx = toCanvasX(x);
      ctx.fillText(x.toFixed(1).replace('.', ','), cx, chartBottom + 20);
      ctx.beginPath();
      ctx.moveTo(cx, yAxisY - 3);
      ctx.lineTo(cx, yAxisY + 3);
      ctx.stroke();
    }

    // Y-axis ticks
    ctx.textAlign = 'right';
    for (let y = 0; y <= 20; y += 2) {
      const cy = toCanvasY(y);
      ctx.fillText(y.toString(), chartLeft - 10, cy + 4);
      ctx.beginPath();
      ctx.moveTo(xAxisX - 3, cy);
      ctx.lineTo(xAxisX + 3, cy);
      ctx.stroke();
    }

    // Axis names
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('x', chartRight + 20, yAxisY + 5);

    ctx.save();
    ctx.translate(chartLeft - 50, chartTop + chartH / 2);
    ctx.rotate(-Math.PI / 2);
    ctx.fillText('f(x)', 0, 0);
    ctx.restore();

    // Title
    ctx.fillStyle = '#94a3b8';
    ctx.font = '14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('f(x) = (1 \u2212 cos x \u00B7 cos 2x \u00B7 cos 3x) / (1 \u2212 cos x)', W / 2, 28);

    // Limit line at y=14 (dashed)
    ctx.setLineDash([8, 5]);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2;
    const limitY = toCanvasY(14);
    ctx.beginPath();
    ctx.moveTo(chartLeft, limitY);
    ctx.lineTo(chartRight, limitY);
    ctx.stroke();
    ctx.setLineDash([]);

    // Label for limit line
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('y = 14 (granična vrednost)', chartRight - 200, limitY - 10);

    // Plot the function
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();

    let started = false;
    const steps = 1000;
    const dx = (xMax - xMin) / steps;

    for (let i = 0; i <= steps; i++) {
      const x = xMin + i * dx;
      // Skip a tiny region around x=0 where the function is undefined (plot limit value instead)
      const y = f(x);
      if (!isFinite(y) || y < yMin - 5 || y > yMax + 5) {
        started = false;
        continue;
      }

      const cx = toCanvasX(x);
      const cy = toCanvasY(y);

      if (!started) {
        ctx.moveTo(cx, cy);
        started = true;
      } else {
        ctx.lineTo(cx, cy);
      }
    }
    ctx.stroke();

    // Mark the limit point at x=0 with an open circle (removable discontinuity)
    const dotX = toCanvasX(0);
    const dotY = toCanvasY(14);

    // Filled circle to show limit value
    ctx.beginPath();
    ctx.arc(dotX, dotY, 6, 0, Math.PI * 2);
    ctx.fillStyle = '#4ade80';
    ctx.fill();
    ctx.strokeStyle = '#0c1222';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Label near the dot
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('lim = 14', dotX + 12, dotY - 10);

    // Additional visual: show approach arrows
    ctx.strokeStyle = 'rgba(96,165,250,0.5)';
    ctx.lineWidth = 1;
    ctx.setLineDash([3, 3]);

    // Vertical dashed line from x-axis to limit at x=0
    ctx.beginPath();
    ctx.moveTo(dotX, yAxisY);
    ctx.lineTo(dotX, dotY + 8);
    ctx.stroke();
    ctx.setLineDash([]);

    // Bottom formula bar
    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Zbir kvadrata koeficijenata: 1\u00B2 + 2\u00B2 + 3\u00B2 = 1 + 4 + 9 = 14', W / 2, H - 12);
  }

  draw();

  // Step click interactivity
  document.querySelectorAll('.step').forEach(function(step) {
    step.addEventListener('click', function() {
      document.querySelectorAll('.step').forEach(function(s) { s.classList.remove('active'); });
      step.classList.toggle('active');
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Granična vrednost sa proizvodom kosinusa",
  "subject": "math",
  "unit": "limits",
  "topic_tags": ["limesi", "Tejlorov razvoj", "trigonometrija", "neodređeni oblik", "cos", "granična vrednost"]
}
BRAINSPARK_META-->