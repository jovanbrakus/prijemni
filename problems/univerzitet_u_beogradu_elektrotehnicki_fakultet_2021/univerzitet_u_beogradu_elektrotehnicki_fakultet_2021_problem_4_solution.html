<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Broj sabiraka u razvijenom obliku (a+b+c)^10</title>
<script>
MathJax = {
  tex: { inlineMath: [['\\(', '\\)'], ['$', '$']], displayMath: [['\\[', '\\]']] },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<script type="text/info" id="logic-scratchpad">
Problem: Number of terms (summands) in the expanded form of (a + b + c)^10

The multinomial theorem states:
(a + b + c)^n = sum over i+j+k=n of C(n; i,j,k) * a^i * b^j * c^k

Each distinct term corresponds to a unique triple (i, j, k) where:
  i >= 0, j >= 0, k >= 0, i + j + k = 10

This is a classic "stars and bars" combinatorics problem.
The number of non-negative integer solutions to i + j + k = n is C(n + r - 1, r - 1)
where r = number of variables = 3, n = 10.

Number of terms = C(10 + 3 - 1, 3 - 1) = C(12, 2) = 12! / (2! * 10!) = (12 * 11) / 2 = 66

Verification for small cases:
  (a + b + c)^0 = 1 → 1 term. C(2,2) = 1 ✓
  (a + b + c)^1 = a + b + c → 3 terms. C(3,2) = 3 ✓
  (a + b + c)^2 = a² + b² + c² + 2ab + 2ac + 2bc → 6 terms. C(4,2) = 6 ✓
  (a + b + c)^3 → C(5,2) = 10 terms ✓
    a³, b³, c³, a²b, a²c, ab², b²c, ac², bc², abc → exactly 10 ✓

General formula for (x₁ + x₂ + ... + xᵣ)^n:
  Number of terms = C(n + r - 1, r - 1)

For r = 3, n = 10: C(12, 2) = 66

Answer: (D) 66
</script>
<style>
  *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    background: #0f172a;
    color: #e2e8f0;
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    line-height: 1.7;
    padding: 20px;
    max-width: 860px;
    margin: 0 auto;
  }
  h1 {
    font-size: 2rem;
    font-weight: 800;
    background: linear-gradient(135deg, #60a5fa, #a78bfa);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 4px;
    line-height: 1.3;
  }
  .subtitle {
    color: #94a3b8;
    font-size: 1.05rem;
    margin-bottom: 28px;
  }
  .card {
    background: #1e293b;
    border: 1px solid #334155;
    border-radius: 14px;
    padding: 24px 28px;
    margin-bottom: 22px;
  }
  .card-title {
    font-size: 1.2rem;
    font-weight: 700;
    margin-bottom: 14px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .card-title .icon {
    font-size: 1.3rem;
  }
  .problem-box {
    background: #172033;
    border-left: 4px solid #60a5fa;
    padding: 18px 22px;
    border-radius: 0 10px 10px 0;
    font-size: 1.08rem;
    margin-bottom: 10px;
  }
  .option-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 10px;
    margin-top: 16px;
  }
  .option {
    background: #0f172a;
    border: 1px solid #334155;
    border-radius: 10px;
    padding: 10px 16px;
    font-size: 1rem;
    transition: all 0.2s;
    text-align: center;
  }
  .option.correct {
    border-color: #34d399;
    background: rgba(52, 211, 153, 0.1);
    box-shadow: 0 0 12px rgba(52, 211, 153, 0.15);
  }
  .plan-list {
    list-style: none;
    counter-reset: plan;
  }
  .plan-list li {
    counter-increment: plan;
    padding: 6px 0 6px 36px;
    position: relative;
  }
  .plan-list li::before {
    content: counter(plan);
    position: absolute;
    left: 0;
    top: 6px;
    width: 26px;
    height: 26px;
    background: linear-gradient(135deg, #60a5fa, #a78bfa);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.82rem;
    font-weight: 700;
    color: #0f172a;
  }
  details {
    background: #172033;
    border: 1px solid #334155;
    border-radius: 10px;
    padding: 14px 20px;
    margin-bottom: 10px;
  }
  details summary {
    cursor: pointer;
    font-weight: 600;
    color: #a78bfa;
    list-style: none;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  details summary::before {
    content: '>';
    display: inline-block;
    transition: transform 0.2s;
    font-family: monospace;
    font-size: 1.1rem;
  }
  details[open] summary::before {
    transform: rotate(90deg);
  }
  details .inner {
    margin-top: 14px;
    padding-top: 14px;
    border-top: 1px solid #334155;
  }
  .step {
    border-left: 3px solid #334155;
    padding: 14px 0 14px 22px;
    margin-left: 12px;
    position: relative;
    margin-bottom: 4px;
  }
  .step::before {
    content: '';
    position: absolute;
    left: -7px;
    top: 18px;
    width: 12px;
    height: 12px;
    background: #60a5fa;
    border-radius: 50%;
    border: 2px solid #0f172a;
  }
  .step:last-child { border-left-color: transparent; }
  .step-label {
    font-weight: 700;
    color: #60a5fa;
    font-size: 1rem;
    margin-bottom: 6px;
  }
  .checkpoint {
    background: rgba(167, 139, 250, 0.1);
    border: 1px dashed #a78bfa;
    border-radius: 10px;
    padding: 12px 18px;
    margin: 12px 0 4px;
    font-size: 0.95rem;
    color: #a78bfa;
  }
  .checkpoint strong { color: #c4b5fd; }
  .final-answer {
    background: linear-gradient(135deg, rgba(52, 211, 153, 0.12), rgba(74, 222, 128, 0.08));
    border: 2px solid #34d399;
    border-radius: 14px;
    padding: 26px 30px;
    text-align: center;
  }
  .final-answer .label {
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: #34d399;
    font-weight: 700;
    margin-bottom: 10px;
  }
  .final-answer .value {
    font-size: 1.7rem;
    font-weight: 800;
    color: #4ade80;
  }
  .insight-box {
    background: rgba(96, 165, 250, 0.08);
    border: 1px solid rgba(96, 165, 250, 0.3);
    border-radius: 12px;
    padding: 18px 22px;
  }
  .insight-box .label {
    font-weight: 700;
    color: #60a5fa;
    margin-bottom: 6px;
    font-size: 1.05rem;
  }
  .pitfall {
    background: rgba(244, 114, 182, 0.08);
    border-left: 4px solid #f472b6;
    border-radius: 0 10px 10px 0;
    padding: 14px 20px;
    margin-bottom: 10px;
  }
  .pitfall strong { color: #f472b6; }
  .challenge-box {
    background: rgba(167, 139, 250, 0.06);
    border: 1px solid rgba(167, 139, 250, 0.25);
    border-radius: 12px;
    padding: 18px 22px;
  }
  .challenge-box .label {
    font-weight: 700;
    color: #a78bfa;
    margin-bottom: 6px;
  }
  canvas {
    display: block;
    margin: 0 auto;
    border-radius: 10px;
    background: #0f172a;
    max-width: 100%;
    touch-action: none;
  }
  .formula-highlight {
    background: rgba(96, 165, 250, 0.1);
    border: 1px solid rgba(96, 165, 250, 0.25);
    border-radius: 8px;
    padding: 12px 18px;
    margin: 10px 0;
    text-align: center;
  }
  .example-table {
    width: 100%;
    border-collapse: collapse;
    margin: 12px 0;
  }
  .example-table th, .example-table td {
    border: 1px solid #334155;
    padding: 8px 12px;
    text-align: center;
    font-size: 0.95rem;
  }
  .example-table th {
    background: #172033;
    color: #60a5fa;
    font-weight: 600;
  }
  .example-table td {
    color: #e2e8f0;
  }
  .muted { color: #94a3b8; }
  .blue { color: #60a5fa; }
  .green { color: #34d399; }
  .purple { color: #a78bfa; }
  .pink { color: #f472b6; }
  @media (max-width: 600px) {
    body { padding: 12px; }
    h1 { font-size: 1.5rem; }
    .card { padding: 18px 16px; }
    .option-grid { grid-template-columns: repeat(3, 1fr); }
  }
</style>
</head>
<body>

<h1>Broj sabiraka u razvijenom obliku \((a+b+c)^{10}\)</h1>
<p class="subtitle">Kombinatorika &mdash; Multinomijalna teorema i zvezdice-i-pregrade</p>

<!-- Problem Statement -->
<div class="card problem-statement">
  <div class="card-title"><span class="icon">&#x1F4CB;</span> Zadatak</div>
  <div class="problem-box">
    Broj sabiraka u razvijenom obliku izraza \((a + b + c)^{10}\) jeste:
  </div>
  <div class="option-grid given-grid">
    <div class="option answer-option" data-option="A">A) 11</div>
    <div class="option answer-option" data-option="B">B) 33</div>
    <div class="option answer-option" data-option="C">C) 55</div>
    <div class="option answer-option correct" data-option="D">D) 66</div>
    <div class="option answer-option" data-option="E">E) 132</div>
  </div>
</div>

<!-- Plan -->
<div class="card">
  <div class="card-title"><span class="icon">&#x1F5FA;&#xFE0F;</span> Plan rešavanja</div>
  <ol class="plan-list">
    <li>Prepoznaj da se traži broj različitih monoma \(a^i b^j c^k\) u razvoju \((a+b+c)^{10}\).</li>
    <li>Formuliši problem kao prebrojavanje nenegativnih celobrojnih rešenja jednačine \(i + j + k = 10\).</li>
    <li>Primeni formulu "zvezdice i pregrade" (stars and bars): \(\binom{n+r-1}{r-1}\).</li>
    <li>Izračunaj i proveri na manjim primerima.</li>
  </ol>
</div>

<!-- Theory Refresher -->
<div class="card">
  <div class="card-title"><span class="icon">&#x1F4D6;</span> Teorijska podloga</div>
  <details>
    <summary>Multinomijalna teorema</summary>
    <div class="inner">
      <p>Razvoj stepena zbira više promenljivih dat je multinomijalnom teoremom:</p>
      \[(x_1 + x_2 + \cdots + x_r)^n = \sum_{\substack{k_1+k_2+\cdots+k_r=n \\ k_i \geq 0}} \frac{n!}{k_1! k_2! \cdots k_r!}\, x_1^{k_1} x_2^{k_2} \cdots x_r^{k_r}\]
      <p style="margin-top:8px;">Za \(r = 2\) ovo se svodi na poznatu binomnu teoremu. Za \(r = 3\) dobijamo <strong>trinomijalnu</strong> teoremu.</p>
      <p class="muted" style="margin-top:8px;">Svaki sabirak u razvoju je jedinstven monom oblika \(a^i b^j c^k\) sa odgovarajućim koeficijentom.</p>
    </div>
  </details>
  <details>
    <summary>Zvezdice i pregrade (Stars and Bars)</summary>
    <div class="inner">
      <p>Broj načina da se \(n\) identičnih objekata rasporedi u \(r\) kutija (tj. broj nenegativnih celobrojnih rešenja jednačine \(k_1 + k_2 + \cdots + k_r = n\)) jednak je:</p>
      \[\binom{n + r - 1}{r - 1}\]
      <p style="margin-top:8px;">Ideja: zamislimo \(n\) zvezdica u nizu i \(r-1\) pregrada koje ih razdvajaju u \(r\) grupa. Ukupno imamo \(n + r - 1\) pozicija, a biramo \(r-1\) za pregrade.</p>
      <p class="muted" style="margin-top:8px;">Ovo je jedan od najkorisnijih alata u kombinatorici &mdash; pojavljuje se u raznim kontekstima: raspodela loptica, broj monoma, broj dijagonala...</p>
    </div>
  </details>
  <details>
    <summary>Binomni koeficijent \(\binom{n}{k}\)</summary>
    <div class="inner">
      <p>Podsetnik na formulu:</p>
      \[\binom{n}{k} = \frac{n!}{k!(n-k)!}\]
      <p style="margin-top:8px;">Specijalno, \(\binom{n}{2} = \frac{n(n-1)}{2}\) &mdash; ovo ćemo direktno koristiti.</p>
    </div>
  </details>
</div>

<!-- Visual Aid -->
<div class="card">
  <div class="card-title"><span class="icon">&#x1F4D0;</span> Vizuelni prikaz</div>
  <p class="muted" style="margin-bottom:14px;">Svaka tačka u trouglu predstavlja jedan monom \(a^i b^j c^k\) gde \(i+j+k = n\). Promeni stepen \(n\) klizačem da vidiš kako raste broj sabiraka.</p>
  <div style="display:flex;gap:16px;flex-wrap:wrap;margin-bottom:14px;">
    <label style="display:flex;align-items:center;gap:8px;">
      <span class="blue">n =</span>
      <input type="range" id="slider-n" min="0" max="14" value="10" style="width:180px;">
      <span id="val-n" class="blue" style="min-width:24px;">10</span>
    </label>
    <span id="count-display" class="green" style="font-weight:700;"></span>
  </div>
  <canvas id="canvas" width="700" height="520"></canvas>
  <div id="canvas-info" style="margin-top:12px;text-align:center;font-size:0.95rem;color:#94a3b8;"></div>
</div>

<!-- Step-by-step Solution -->
<div class="card">
  <div class="card-title"><span class="icon">&#x270F;&#xFE0F;</span> Rešenje korak po korak</div>

  <div class="step">
    <div class="step-label">Korak 1: Razumi šta se traži</div>
    <p>Kada razvijemo \((a + b + c)^{10}\) i grupišemo slične članove, svaki sabirak ima oblik:</p>
    \[C \cdot a^i \, b^j \, c^k \quad \text{gde je} \quad i + j + k = 10, \;\; i,j,k \geq 0\]
    <p>Koeficijent \(C\) je multinomijalni koeficijent \(\frac{10!}{i!\,j!\,k!}\), ali nas zanima samo <strong>koliko ima različitih monoma</strong> &mdash; tj. koliko ima različitih trojki \((i, j, k)\).</p>
  </div>

  <div class="step">
    <div class="step-label">Korak 2: Preformulacija u kombinatorni problem</div>
    <p>Pitanje se svodi na:</p>
    <div class="formula-highlight">
      Koliko ima nenegativnih celobrojnih rešenja jednačine \(i + j + k = 10\)?
    </div>
    <p>Ovo je klasičan problem rasporeda \(n = 10\) identičnih objekata u \(r = 3\) kutije.</p>
  </div>

  <div class="step">
    <div class="step-label">Korak 3: Primeni formulu "zvezdice i pregrade"</div>
    <p>Za \(n\) identičnih objekata i \(r\) kutija, broj rasporeda je:</p>
    \[\binom{n + r - 1}{r - 1}\]
    <p>U našem slučaju \(n = 10\), \(r = 3\):</p>
    \[\binom{10 + 3 - 1}{3 - 1} = \binom{12}{2}\]
    <div class="checkpoint">
      <strong>Proveri se!</strong> Da li si dobro identifikovao/la parametre? Imamo 3 promenljive (\(a, b, c\)), pa je \(r = 3\). Stepen je \(n = 10\). Formula daje \(\binom{12}{2}\).
    </div>
  </div>

  <div class="step">
    <div class="step-label">Korak 4: Izračunaj \(\binom{12}{2}\)</div>
    \[\binom{12}{2} = \frac{12!}{2! \cdot 10!} = \frac{12 \cdot 11}{2 \cdot 1} = \frac{132}{2} = 66\]
    <p>Dakle, u razvijenom obliku izraza \((a+b+c)^{10}\) ima tačno <strong>66 sabiraka</strong>.</p>
  </div>

  <div class="step">
    <div class="step-label">Korak 5: Verifikacija na manjim primerima</div>
    <p>Proverimo formulu na slučajevima gde možemo ručno prebrojati:</p>
    <table class="example-table">
      <tr><th>\(n\)</th><th>Razvoj \((a+b+c)^n\)</th><th>Monomi</th><th>\(\binom{n+2}{2}\)</th></tr>
      <tr><td>0</td><td>\(1\)</td><td>1</td><td>\(\binom{2}{2} = 1\)</td></tr>
      <tr><td>1</td><td>\(a + b + c\)</td><td>3</td><td>\(\binom{3}{2} = 3\)</td></tr>
      <tr><td>2</td><td>\(a^2 + b^2 + c^2 + 2ab + 2ac + 2bc\)</td><td>6</td><td>\(\binom{4}{2} = 6\)</td></tr>
      <tr><td>3</td><td>\(a^3 + b^3 + c^3 + \ldots + 6abc\)</td><td>10</td><td>\(\binom{5}{2} = 10\)</td></tr>
    </table>
    <p class="muted" style="margin-top:8px;">Sve se slaže! Za \(n = 10\) imamo \(\binom{12}{2} = 66\).</p>
    <div class="checkpoint">
      <strong>Proveri se!</strong> Za \(n = 2\), monomi su: \(a^2, b^2, c^2, ab, ac, bc\) &mdash; to je zaista 6, što je \(\binom{4}{2} = 6\). Formula radi!
    </div>
  </div>
</div>

<!-- Key Insight -->
<div class="card">
  <div class="insight-box">
    <div class="label">Ključni uvid</div>
    <p>Broj različitih sabiraka u razvoju \((x_1 + x_2 + \cdots + x_r)^n\) jednak je broju načina da se <strong>\(n\) podeli na \(r\) nenegativnih celih delova</strong>. Ovo je ekvivalentno problemu "zvezdica i pregrada" i daje odgovor \(\binom{n+r-1}{r-1}\).</p>
    <p style="margin-top:8px;">Za trinomijalne razvoje (3 promenljive), formula se pojednostavljuje na:</p>
    \[\binom{n+2}{2} = \frac{(n+1)(n+2)}{2}\]
    <p style="margin-top:8px;">Ovo je ujedno i \((n+1)\)-vi trougaoni broj &mdash; zato se trojke \((i,j,k)\) prirodno prikazuju kao tačke u trougaonoj mreži!</p>
  </div>
</div>

<!-- Final Answer -->
<div class="card">
  <div class="final-answer">
    <div class="label">Konačan odgovor</div>
    <div class="value">
      D) \(\;66\)
    </div>
    <p style="margin-top:14px;color:#94a3b8;font-size:1rem;">
      Broj sabiraka u razvijenom obliku \((a+b+c)^{10}\) je
      \(\displaystyle\binom{12}{2} = \frac{12 \cdot 11}{2} = 66\)
    </p>
    <div class="option-grid" style="max-width:500px;margin:18px auto 0;">
      <div class="option">A) 11</div>
      <div class="option">B) 33</div>
      <div class="option">C) 55</div>
      <div class="option correct">D) 66</div>
      <div class="option">E) 132</div>
    </div>
  </div>
</div>

<!-- Common Pitfalls -->
<div class="card">
  <div class="card-title"><span class="icon">&#x26A0;&#xFE0F;</span> Najčešće greške</div>
  <div class="pitfall">
    <strong>Greška 1: Mešanje sa binomnom teoremom.</strong>
    Mnogi pomisle da je odgovor \(n + 1 = 11\), jer binomni razvoj \((a+b)^{10}\) ima 11 sabiraka. Ali ovde imamo <strong>tri</strong> promenljive, ne dve! Za tri promenljive koristimo multinomijalnu (trinomijalnu) formulu.
  </div>
  <div class="pitfall">
    <strong>Greška 2: Odgovor 132 = \(\binom{12}{2} \cdot 2\).</strong>
    Poneko pogreši i dobije 132 (dvostruku vrednost). Ovo se dešava ako se umesto \(\binom{12}{2}\) greškom izračuna \(12 \cdot 11 = 132\) bez deljenja sa \(2!\). Pazi: \(\binom{12}{2} = \frac{12 \cdot 11}{2} = 66\), ne \(12 \cdot 11\).
  </div>
  <div class="pitfall">
    <strong>Greška 3: Pogrešna identifikacija parametara.</strong>
    Formula za zvezdice i pregrade zahteva \(r - 1\) pregrada, ne \(r\). Za 3 promenljive, koristimo \(\binom{n+2}{2}\), a ne \(\binom{n+3}{3}\). Uvek proveri: \(\binom{12}{2} = 66\), dok bi \(\binom{13}{3} = 286\) bio pogrešan odgovor (za 4 promenljive).
  </div>
</div>

<!-- Optional Challenge -->
<div class="card">
  <div class="challenge-box">
    <div class="label">Izazov za napredne</div>
    <p>1. Koliko sabiraka ima razvijeni oblik \((a + b + c + d)^{10}\)? A koliko \((a+b+c+d+e)^{10}\)?</p>
    <p style="margin-top:8px;">2. Neka je \(S(r, n)\) broj sabiraka u razvoju \((x_1 + \cdots + x_r)^n\). Pokaži da važi rekurentna relacija:</p>
    \[S(r, n) = S(r, n-1) + S(r-1, n)\]
    <p style="margin-top:8px;" class="muted">Uputstvo: razmisli o tome da li monom sadrži \(x_r\) ili ne, i koji stepen \(x_r\) ima.</p>
    <p style="margin-top:8px;">3. Dokaži da je \(\binom{n+2}{2}\) zaista \((n+1)\)-vi trougaoni broj. Koji je 11. trougaoni broj?</p>
  </div>
</div>

<script>
(function() {
  var canvas = document.getElementById('canvas');
  var ctx = canvas.getContext('2d');
  var sliderN = document.getElementById('slider-n');
  var valN = document.getElementById('val-n');
  var countDisplay = document.getElementById('count-display');
  var info = document.getElementById('canvas-info');

  var hoveredPoint = null;

  function binomial(n, k) {
    if (k < 0 || k > n) return 0;
    if (k === 0 || k === n) return 1;
    var result = 1;
    for (var i = 0; i < k; i++) {
      result = result * (n - i) / (i + 1);
    }
    return Math.round(result);
  }

  function multinomialCoeff(n, i, j, k) {
    return binomial(n, i) * binomial(n - i, j);
  }

  function draw() {
    var W = canvas.width, H = canvas.height;
    var n = parseInt(sliderN.value);
    var totalTerms = binomial(n + 2, 2);

    countDisplay.textContent = 'Broj sabiraka: ' + totalTerms;

    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Title
    ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#e2e8f0';
    ctx.textAlign = 'center';
    ctx.fillText('Trougaona mreža monoma za (a + b + c)^' + n, W / 2, 28);

    // Triangle vertices for the lattice
    var margin = 60;
    var triTop = 55;
    var triH = H - triTop - 80;
    var triW = triH * 1.15;
    var cx = W / 2;

    // Three vertices of the equilateral-ish triangle
    // Top vertex: a^n (i=n, j=0, k=0)
    // Bottom-left: b^n (i=0, j=n, k=0)
    // Bottom-right: c^n (i=0, j=0, k=n)
    var Ax = cx, Ay = triTop;
    var Bx = cx - triW / 2, By = triTop + triH;
    var Cx = cx + triW / 2, Cy = triTop + triH;

    // Draw triangle outline
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(Ax, Ay);
    ctx.lineTo(Bx, By);
    ctx.lineTo(Cx, Cy);
    ctx.closePath();
    ctx.stroke();

    // Vertex labels
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillStyle = '#60a5fa';
    ctx.fillText('a^' + n, Ax, Ay - 12);
    ctx.fillStyle = '#a78bfa';
    ctx.fillText('b^' + n, Bx - 18, By + 18);
    ctx.fillStyle = '#f472b6';
    ctx.fillText('c^' + n, Cx + 18, Cy + 18);

    // Edge labels
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#475569';
    ctx.textAlign = 'center';
    ctx.fillText('i raste', (Ax + Bx) / 2 - 30, (Ay + By) / 2 - 5);
    ctx.fillText('j raste', (Bx + Cx) / 2, By + 35);
    ctx.fillText('k raste', (Ax + Cx) / 2 + 30, (Ay + Cy) / 2 - 5);

    // Draw lattice points
    // For each (i, j, k) with i+j+k=n, the barycentric coordinates give us position
    var points = [];
    if (n === 0) {
      points.push({ i: 0, j: 0, k: 0, x: cx, y: triTop + triH / 2 });
    } else {
      for (var i = 0; i <= n; i++) {
        for (var j = 0; j <= n - i; j++) {
          var k = n - i - j;
          // Barycentric to Cartesian
          var px = (i * Ax + j * Bx + k * Cx) / n;
          var py = (i * Ay + j * By + k * Cy) / n;
          points.push({ i: i, j: j, k: k, x: px, y: py });
        }
      }
    }

    // Determine point radius based on n
    var radius = n <= 4 ? 10 : n <= 7 ? 7 : n <= 10 ? 5 : 4;

    // Draw points
    points.forEach(function(p, idx) {
      var coeff = multinomialCoeff(n, p.i, p.j, p.k);

      // Color based on coefficient magnitude
      var maxCoeff = multinomialCoeff(n, Math.floor(n / 3), Math.floor(n / 3), n - 2 * Math.floor(n / 3));
      var intensity = n === 0 ? 1 : Math.pow(coeff / maxCoeff, 0.4);

      var r = Math.round(96 + intensity * (52 - 96));
      var g = Math.round(165 + intensity * (211 - 165));
      var b = Math.round(250 + intensity * (153 - 250));

      var isHovered = hoveredPoint && hoveredPoint.i === p.i && hoveredPoint.j === p.j && hoveredPoint.k === p.k;

      ctx.beginPath();
      ctx.arc(p.x, p.y, isHovered ? radius + 3 : radius, 0, Math.PI * 2);
      ctx.fillStyle = isHovered ? '#4ade80' : 'rgb(' + r + ',' + g + ',' + b + ')';
      ctx.globalAlpha = 0.85;
      ctx.fill();
      ctx.globalAlpha = 1;

      if (isHovered) {
        ctx.strokeStyle = '#4ade80';
        ctx.lineWidth = 2;
        ctx.stroke();
      }

      // Show coefficient for small n
      if (n <= 4 && n > 0) {
        ctx.font = 'bold 10px Segoe UI, system-ui, sans-serif';
        ctx.fillStyle = '#e2e8f0';
        ctx.textAlign = 'center';
        ctx.fillText(coeff, p.x, p.y + 3.5);
      }
    });

    // Hover info
    if (hoveredPoint) {
      var p = hoveredPoint;
      var coeff = multinomialCoeff(n, p.i, p.j, p.k);
      var term = coeff === 1 ? '' : coeff + ' ';
      if (p.i > 0) term += 'a' + (p.i > 1 ? '^' + p.i : '');
      if (p.j > 0) term += (term.length > 0 && term[term.length-1] !== ' ' ? '' : '') + 'b' + (p.j > 1 ? '^' + p.j : '');
      if (p.k > 0) term += 'c' + (p.k > 1 ? '^' + p.k : '');
      if (n === 0) term = '1';

      info.innerHTML = '<span style="color:#4ade80">(' + p.i + ', ' + p.j + ', ' + p.k + ')</span> &rarr; <span style="color:#e2e8f0">' + term + '</span> &nbsp; <span style="color:#94a3b8">(koeficijent: ' + coeff + ')</span>';
    } else {
      info.innerHTML = '<span style="color:#94a3b8">Pređi mišem preko tačke da vidiš monom. Ukupno ' + totalTerms + ' sabiraka za n = ' + n + '.</span>';
    }

    // Bottom summary
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#34d399';
    ctx.textAlign = 'center';
    ctx.fillText('C(' + (n + 2) + ', 2) = ' + totalTerms + ' sabiraka', W / 2, H - 20);

    // Formula at bottom
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('(' + (n+1) + ' × ' + (n+2) + ') / 2 = ' + totalTerms, W / 2, H - 3);
  }

  // Mouse interaction
  canvas.addEventListener('mousemove', function(e) {
    var rect = canvas.getBoundingClientRect();
    var scaleX = canvas.width / rect.width;
    var scaleY = canvas.height / rect.height;
    var mx = (e.clientX - rect.left) * scaleX;
    var my = (e.clientY - rect.top) * scaleY;

    var n = parseInt(sliderN.value);
    var triTop = 55;
    var triH = canvas.height - triTop - 80;
    var triW = triH * 1.15;
    var cxc = canvas.width / 2;
    var Ax = cxc, Ay = triTop;
    var Bx = cxc - triW / 2, By = triTop + triH;
    var Cx = cxc + triW / 2, Cy = triTop + triH;

    var bestDist = Infinity;
    hoveredPoint = null;

    if (n === 0) {
      var px = cxc, py = triTop + triH / 2;
      var dist = Math.sqrt((mx - px) * (mx - px) + (my - py) * (my - py));
      if (dist < 20) {
        hoveredPoint = { i: 0, j: 0, k: 0 };
      }
    } else {
      for (var i = 0; i <= n; i++) {
        for (var j = 0; j <= n - i; j++) {
          var k = n - i - j;
          var px = (i * Ax + j * Bx + k * Cx) / n;
          var py = (i * Ay + j * By + k * Cy) / n;
          var dist = Math.sqrt((mx - px) * (mx - px) + (my - py) * (my - py));
          if (dist < bestDist && dist < 18) {
            bestDist = dist;
            hoveredPoint = { i: i, j: j, k: k };
          }
        }
      }
    }
    draw();
  });

  canvas.addEventListener('mouseleave', function() {
    hoveredPoint = null;
    draw();
  });

  // Touch support
  canvas.addEventListener('touchstart', function(e) { e.preventDefault(); }, { passive: false });
  canvas.addEventListener('touchmove', function(e) {
    e.preventDefault();
    var touch = e.touches[0];
    var rect = canvas.getBoundingClientRect();
    var scaleX = canvas.width / rect.width;
    var scaleY = canvas.height / rect.height;
    var mx = (touch.clientX - rect.left) * scaleX;
    var my = (touch.clientY - rect.top) * scaleY;

    var n = parseInt(sliderN.value);
    var triTop = 55;
    var triH = canvas.height - triTop - 80;
    var triW = triH * 1.15;
    var cxc = canvas.width / 2;
    var Ax = cxc, Ay = triTop;
    var Bx = cxc - triW / 2, By = triTop + triH;
    var Cx = cxc + triW / 2, Cy = triTop + triH;

    var bestDist = Infinity;
    hoveredPoint = null;

    for (var i = 0; i <= n; i++) {
      for (var j = 0; j <= n - i; j++) {
        var k = n - i - j;
        var px = (i * Ax + j * Bx + k * Cx) / n;
        var py = (i * Ay + j * By + k * Cy) / n;
        var dist = Math.sqrt((mx - px) * (mx - px) + (my - py) * (my - py));
        if (dist < bestDist && dist < 25) {
          bestDist = dist;
          hoveredPoint = { i: i, j: j, k: k };
        }
      }
    }
    draw();
  }, { passive: false });

  sliderN.addEventListener('input', function() {
    valN.textContent = sliderN.value;
    hoveredPoint = null;
    draw();
  });

  // Responsive canvas
  function resizeCanvas() {
    var container = canvas.parentElement;
    var maxW = container.clientWidth - 56;
    if (maxW < 700) {
      canvas.style.width = maxW + 'px';
      canvas.style.height = (maxW * 520 / 700) + 'px';
    }
  }
  window.addEventListener('resize', resizeCanvas);
  resizeCanvas();

  draw();
})();
</script>

</body>
</html>
<!--BRAINSPARK_META {"title":"Broj sabiraka u razvijenom obliku (a+b+c)^10","subject":"math","unit":"combinatorics","topic_tags":["multinomijalna teorema","kombinacije sa ponavljanjem","zvezdice i pregrade","binomni koeficijent","trinomijalni razvoj"]} BRAINSPARK_META-->