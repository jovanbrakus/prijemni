<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zajednicki clanovi aritmetickih progresija</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
  Problem: Two arithmetic progressions, each with 121 terms.
    AP1: 2, 7, 12, 17, ...  => a_n = 2 + 5(n-1), n = 1..121
         First term: 2, Last term: 2 + 5*120 = 602
    AP2: 2, 5, 8, 11, ...   => b_m = 2 + 3(m-1), m = 1..121
         First term: 2, Last term: 2 + 3*120 = 362

  Find how many common terms exist.

  A term c belongs to both APs iff:
    c = 2 + 5(n-1)  for some integer n in [1, 121]
    c = 2 + 3(m-1)  for some integer m in [1, 121]

  Setting equal: 2 + 5(n-1) = 2 + 3(m-1) => 5(n-1) = 3(m-1)

  The common terms form a new AP with:
    - first term: a_1 = 2 (both start at 2)
    - common difference: lcm(5, 3) = 15
    - general term: c_k = 2 + 15k, k = 0, 1, 2, ...

  Constraint: c_k must be <= min(602, 362) = 362
    2 + 15k <= 362
    15k <= 360
    k <= 24

  Also c_k must be >= 2, which gives k >= 0.

  So k = 0, 1, 2, ..., 24 => 25 common terms.

  Verification:
    k=0:  c = 2   (n=1, m=1)
    k=1:  c = 17  (n=4, m=6)
    k=2:  c = 32  (n=7, m=11)
    k=24: c = 362 (n=73, m=121)

  Check n for k=24: 2 + 5(n-1) = 362 => 5(n-1) = 360 => n-1 = 72 => n = 73. OK, 73 <= 121.
  Check m for k=24: 2 + 3(m-1) = 362 => 3(m-1) = 360 => m-1 = 120 => m = 121. OK.

  Check k=25: c = 2 + 375 = 377. Check m: 3(m-1) = 375 => m-1 = 125 => m = 126 > 121. Not valid.

  Answer: (D) 25
</script>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
}

.card-title {
  font-size: 1.3rem;
  color: #60a5fa;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.4rem;
}

.problem-statement {
  font-size: 1.15rem;
  line-height: 1.8;
}

.highlight-box {
  background: rgba(96, 165, 250, 0.1);
  border: 1px solid rgba(96, 165, 250, 0.3);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 16px 0;
  font-size: 1.1rem;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 18px;
}

.answer-option {
  background: rgba(51, 65, 85, 0.6);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 20px;
  font-size: 1rem;
  transition: all 0.3s ease;
  cursor: default;
}

.answer-option.correct {
  background: rgba(52, 211, 153, 0.15);
  border-color: #34d399;
  color: #34d399;
  font-weight: 600;
}

.plan-text {
  color: #a78bfa;
  font-size: 1.05rem;
  font-style: italic;
}

details {
  margin: 12px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 8px 0;
  user-select: none;
}

details summary:hover {
  color: #93bbfc;
}

details .detail-content {
  padding: 12px 16px;
  background: rgba(30, 41, 59, 0.7);
  border-left: 3px solid #60a5fa;
  border-radius: 0 8px 8px 0;
  margin-top: 8px;
}

.step {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  align-items: flex-start;
}

.step-badge {
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  font-weight: 700;
  font-size: 0.85rem;
  min-width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-title {
  font-weight: 600;
  color: #f472b6;
  margin-bottom: 6px;
  font-size: 1.05rem;
}

.step-math {
  background: rgba(167, 139, 250, 0.1);
  border: 1px solid rgba(167, 139, 250, 0.25);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 10px 0;
  font-family: 'Courier New', monospace;
  text-align: center;
  font-size: 1.05rem;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.12), rgba(167, 139, 250, 0.12));
  border: 1px solid rgba(167, 139, 250, 0.35);
  border-radius: 16px;
  padding: 24px 28px;
  margin-bottom: 24px;
}

.insight-box .card-title {
  color: #a78bfa;
}

.final-answer-box {
  background: rgba(52, 211, 153, 0.08);
  border: 2px solid #34d399;
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin-bottom: 24px;
}

.final-answer-box .answer-label {
  color: #94a3b8;
  font-size: 1rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 12px;
}

.final-answer-box .answer-value {
  color: #4ade80;
  font-size: 2rem;
  font-weight: 700;
}

.final-answer-box .answer-option-final {
  color: #34d399;
  font-size: 1.2rem;
  margin-top: 8px;
}

.pitfall {
  display: flex;
  gap: 12px;
  align-items: flex-start;
  margin-bottom: 12px;
}

.pitfall-icon {
  color: #f472b6;
  font-weight: 700;
  font-size: 1.2rem;
  flex-shrink: 0;
}

.challenge-box {
  background: rgba(244, 114, 182, 0.08);
  border: 1px solid rgba(244, 114, 182, 0.3);
  border-radius: 16px;
  padding: 24px 28px;
}

.challenge-box .card-title {
  color: #f472b6;
}

canvas {
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  max-width: 100%;
}

.canvas-wrapper {
  text-align: center;
}

.canvas-caption {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 10px;
  text-align: center;
}

.checkpoint details summary {
  color: #34d399;
  font-size: 0.95rem;
}

.checkpoint details .detail-content {
  border-left-color: #34d399;
}

.ap-table {
  width: 100%;
  border-collapse: collapse;
  margin: 16px 0;
}

.ap-table th, .ap-table td {
  padding: 10px 14px;
  text-align: center;
  border: 1px solid #334155;
}

.ap-table th {
  background: rgba(96, 165, 250, 0.15);
  color: #60a5fa;
  font-weight: 600;
}

.ap-table td {
  background: rgba(30, 41, 59, 0.5);
}

.ap-table tr:hover td {
  background: rgba(96, 165, 250, 0.05);
}

.common-highlight {
  color: #4ade80;
  font-weight: 600;
}

@media (max-width: 700px) {
  h1 {
    font-size: 1.6rem;
  }
  .card {
    padding: 18px;
  }
  .given-grid {
    flex-direction: column;
  }
  .step {
    flex-direction: column;
    gap: 8px;
  }
  .step-badge {
    align-self: flex-start;
  }
  .final-answer-box .answer-value {
    font-size: 1.5rem;
  }
  .ap-table th, .ap-table td {
    padding: 6px 4px;
    font-size: 0.85rem;
  }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Zajednicki clanovi dveju aritmetickih progresija</h1>
  <p class="subtitle">Aritmeticke progresije — presek nizova, NZS, prebrojavanje</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <div class="card-title"><span class="icon">&#128203;</span> Tekst zadatka</div>
    <div class="problem-statement">
      <p>Koliko jednakih clanova imaju aritmeticke progresije</p>
      <div class="highlight-box">
        \[ 2,\; 7,\; 12,\; 17,\; \ldots \quad \text{i} \quad 2,\; 5,\; 8,\; 11,\; \ldots \]
        <p style="margin-top: 8px; text-align: center;">ako svaka od njih ima 121 clan?</p>
      </div>
      <div class="given-grid">
        <div class="answer-option" data-option="A">A) 15</div>
        <div class="answer-option" data-option="B">B) 17</div>
        <div class="answer-option" data-option="C">C) 24</div>
        <div class="answer-option" data-option="D" id="correct-option">D) 25</div>
        <div class="answer-option" data-option="E">E) 40</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127919;</span> Plan resavanja</div>
    <p class="plan-text">
      Zapisacemo opsti clan svake progresije, zatim naci uslov pod kojim su jednaki. Pokazacemo da zajednicki clanovi sami formiraju novu aritmeticku progresiju cija razlika je NZS (najmanji zajednicki sadrzalac) polaznih razlika. Na kraju, prebrojacemo koliko clanova te nove progresije upada u opseg obe polazne progresije.
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128218;</span> Podsetnik iz teorije</div>
    <details>
      <summary>Aritmeticka progresija i NZS (klikni da otvoris)</summary>
      <div class="detail-content">
        <p><strong>Aritmeticka progresija (AP)</strong> je niz u kome je razlika susednih clanova konstantna:</p>
        <div class="step-math">
          \[ a_n = a_1 + (n - 1) \cdot d \]
        </div>
        <p style="margin-top: 12px;">gde je \( a_1 \) prvi clan, a \( d \) razlika progresije.</p>
        <p style="margin-top: 12px;"><strong>Kljucna cinjenica:</strong> Ako dve AP imaju zajednicke clanove, ti zajednicki clanovi takodje formiraju AP cija razlika je:</p>
        <div class="step-math">
          \[ d_{\text{zajednicki}} = \text{NZS}(d_1,\, d_2) = \text{lcm}(d_1,\, d_2) \]
        </div>
        <p style="margin-top: 12px;">gde su \( d_1 \) i \( d_2 \) razlike polaznih progresija.</p>
        <p style="margin-top: 12px;"><strong>Najmanji zajednicki sadrzalac (NZS):</strong> Za dva broja \( a \) i \( b \):</p>
        <div class="step-math">
          \[ \text{NZS}(a, b) = \frac{a \cdot b}{\text{NZD}(a, b)} \]
        </div>
        <p style="margin-top: 8px;">gde je NZD = najveci zajednicki delilac.</p>
      </div>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128202;</span> Vizuelni prikaz</div>
    <div class="canvas-wrapper">
      <canvas id="diagram" width="800" height="420"></canvas>
    </div>
    <p class="canvas-caption">Brojevna prava sa clanovima obe progresije. Zeleno obelezeni su zajednicki clanovi.</p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128290;</span> Resenje korak po korak</div>

    <!-- Step 1 -->
    <div class="step">
      <div class="step-badge">1</div>
      <div class="step-content">
        <div class="step-title">Zapisujemo opste clanove obe progresije</div>
        <p><strong>Prva AP</strong> ima prvi clan \( a_1 = 2 \) i razliku \( d_1 = 5 \):</p>
        <div class="step-math">
          \[ a_n = 2 + 5(n - 1),\quad n = 1, 2, \ldots, 121 \]
        </div>
        <p>Poslednji clan: \( a_{121} = 2 + 5 \cdot 120 = 602 \)</p>
        <p style="margin-top: 12px;"><strong>Druga AP</strong> ima prvi clan \( b_1 = 2 \) i razliku \( d_2 = 3 \):</p>
        <div class="step-math">
          \[ b_m = 2 + 3(m - 1),\quad m = 1, 2, \ldots, 121 \]
        </div>
        <p>Poslednji clan: \( b_{121} = 2 + 3 \cdot 120 = 362 \)</p>

        <div class="checkpoint">
          <details>
            <summary>Proveri sebe: Koji je opseg svake progresije?</summary>
            <div class="detail-content">
              <p>Prva AP: od 2 do 602. Druga AP: od 2 do 362. Zajednicki clanovi mogu biti samo u opsegu od 2 do 362 (manja gornja granica).</p>
            </div>
          </details>
        </div>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step">
      <div class="step-badge">2</div>
      <div class="step-content">
        <div class="step-title">Postavljamo uslov jednakosti</div>
        <p>Trazimo vrednosti koje se pojavljuju u obe progresije. Clan \( c \) je zajednicki ako vazi:</p>
        <div class="step-math">
          \[ a_n = b_m \quad \Longrightarrow \quad 2 + 5(n-1) = 2 + 3(m-1) \]
        </div>
        <p>Odatle dobijamo:</p>
        <div class="step-math">
          \[ 5(n - 1) = 3(m - 1) \]
        </div>
        <p>Ova jednacina nam kaze da \( 5(n-1) \) mora biti deljivo sa 3. Posto je \( \text{NZD}(5, 3) = 1 \), sledi da \( (n-1) \) mora biti deljivo sa 3:</p>
        <div class="step-math">
          \[ n - 1 = 3t \quad \Longrightarrow \quad n = 3t + 1,\quad t = 0, 1, 2, \ldots \]
        </div>
        <p>Ubacujemo nazad:</p>
        <div class="step-math">
          \[ m - 1 = \frac{5 \cdot 3t}{3} = 5t \quad \Longrightarrow \quad m = 5t + 1 \]
        </div>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step">
      <div class="step-badge">3</div>
      <div class="step-content">
        <div class="step-title">Formiramo progresiju zajednickih clanova</div>
        <p>Zajednicki clan za parametar \( t \) je:</p>
        <div class="step-math">
          \[ c_t = 2 + 5(n - 1) = 2 + 5 \cdot 3t = 2 + 15t \]
        </div>
        <p>Dakle, zajednicki clanovi formiraju novu AP:</p>
        <div class="step-math">
          \[ 2,\; 17,\; 32,\; 47,\; \ldots \]
        </div>
        <p>sa prvim clanom 2 i razlikom \( d = 15 = \text{NZS}(5, 3) \).</p>

        <div class="checkpoint">
          <details>
            <summary>Proveri sebe: Zasto je razlika bas NZS(5, 3) = 15?</summary>
            <div class="detail-content">
              <p>Zajednicki clan mora da bude oblika \( 2 + 5k \) (pripada prvoj AP) i oblika \( 2 + 3j \) (pripada drugoj AP) istovremeno. To znaci da \( c - 2 \) mora biti deljivo i sa 5 i sa 3. Najmanji pozitivan broj deljiv i sa 5 i sa 3 je \( \text{NZS}(5, 3) = 15 \). Zato se zajednicki clanovi pojavljuju na svakih 15.</p>
            </div>
          </details>
        </div>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step">
      <div class="step-badge">4</div>
      <div class="step-content">
        <div class="step-title">Odredjujemo opseg parametra \( t \)</div>
        <p>Zajednicki clan mora pripadati obema progresijama, sto znaci da mora biti:</p>
        <div class="step-math">
          \[ 2 \leq c_t \leq \min(602,\; 362) = 362 \]
        </div>
        <p>Iz uslova \( c_t \leq 362 \):</p>
        <div class="step-math">
          \[ 2 + 15t \leq 362 \quad \Longrightarrow \quad 15t \leq 360 \quad \Longrightarrow \quad t \leq 24 \]
        </div>
        <p>Takodje, \( t \geq 0 \) (jer \( n \geq 1 \) i \( m \geq 1 \)).</p>
        <p style="margin-top: 8px;">Dakle: \( t \in \{0, 1, 2, \ldots, 24\} \).</p>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step">
      <div class="step-badge">5</div>
      <div class="step-content">
        <div class="step-title">Prebrojavanje</div>
        <p>Broj vrednosti parametra \( t \) od 0 do 24 je:</p>
        <div class="step-math">
          \[ 24 - 0 + 1 = \boxed{25} \]
        </div>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step">
      <div class="step-badge">6</div>
      <div class="step-content">
        <div class="step-title">Verifikacija granicnih vrednosti</div>
        <p>Proverimo prvi i poslednji zajednicki clan:</p>
        <table class="ap-table">
          <thead>
            <tr>
              <th>\( t \)</th>
              <th>\( c_t = 2 + 15t \)</th>
              <th>\( n = 3t + 1 \)</th>
              <th>\( m = 5t + 1 \)</th>
              <th>Validno?</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>0</td>
              <td class="common-highlight">2</td>
              <td>1</td>
              <td>1</td>
              <td class="common-highlight">Da</td>
            </tr>
            <tr>
              <td>1</td>
              <td class="common-highlight">17</td>
              <td>4</td>
              <td>6</td>
              <td class="common-highlight">Da</td>
            </tr>
            <tr>
              <td>2</td>
              <td class="common-highlight">32</td>
              <td>7</td>
              <td>11</td>
              <td class="common-highlight">Da</td>
            </tr>
            <tr>
              <td style="color: #94a3b8;">...</td>
              <td style="color: #94a3b8;">...</td>
              <td style="color: #94a3b8;">...</td>
              <td style="color: #94a3b8;">...</td>
              <td style="color: #94a3b8;">...</td>
            </tr>
            <tr>
              <td>24</td>
              <td class="common-highlight">362</td>
              <td>73</td>
              <td>121</td>
              <td class="common-highlight">Da</td>
            </tr>
            <tr style="opacity: 0.5;">
              <td>25</td>
              <td>377</td>
              <td>76</td>
              <td>126 > 121</td>
              <td style="color: #ef4444;">Ne</td>
            </tr>
          </tbody>
        </table>
        <p style="margin-top: 12px;">Za \( t = 24 \): clan je 362, \( n = 73 \leq 121 \) i \( m = 121 \leq 121 \) — validno.</p>
        <p>Za \( t = 25 \): clan bi bio 377, ali bi \( m = 126 > 121 \) — izvan opsega druge AP.</p>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <div class="card-title"><span class="icon">&#128161;</span> Kljucni uvid</div>
    <p>Kada dve aritmeticke progresije imaju zajednicki clan (ovde obe krecu od 2), njihovi zajednicki clanovi takodje formiraju aritmeticku progresiju. Razlika te nove progresije je <strong>NZS (najmanji zajednicki sadrzalac)</strong> razlika polaznih progresija. Ovo drasticno pojednostavljuje prebrojavanje — umesto da poredimo clan po clan, samo odredimo koliko clanova nove AP upada u zajednicki opseg.</p>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <div class="answer-label">Konacan odgovor</div>
    <div class="answer-value">\( 25 \) zajednickih clanova</div>
    <div class="answer-option-final">Tacan odgovor je D) 25</div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9888;&#65039;</span> Ceste greske</div>
    <div class="pitfall">
      <span class="pitfall-icon">&#10007;</span>
      <p><strong>Greska za jedan (off-by-one):</strong> Mnogi ucenici dobiju \( k \leq 24 \) i odgovore 24, zaboravljajuci da se broji i \( k = 0 \). Broj celih brojeva od 0 do 24 je \( 24 - 0 + 1 = 25 \), ne 24.</p>
    </div>
    <div class="pitfall">
      <span class="pitfall-icon">&#10007;</span>
      <p><strong>Pogresna gornja granica:</strong> Zajednicki clan mora pripadati <em>obema</em> progresijama. Gornja granica je \( \min(602, 362) = 362 \), ne 602. Ako koristimo 602, dobijamo previse clanova.</p>
    </div>
    <div class="pitfall">
      <span class="pitfall-icon">&#10007;</span>
      <p><strong>Koristenje proizvoda umesto NZS:</strong> Razlika zajednicke progresije je \( \text{NZS}(5, 3) = 15 \), ne \( 5 \cdot 3 = 15 \). U ovom slucaju su jednaki jer su 5 i 3 uzajamno prosti, ali u opstem slucaju (npr. za razlike 6 i 4) NZS nije isto sto i proizvod!</p>
    </div>
    <div class="pitfall">
      <span class="pitfall-icon">&#10007;</span>
      <p><strong>Zaboravljanje provere oba indeksa:</strong> Nije dovoljno proveriti samo da je \( c_t \leq 362 \). Treba takodje proveriti da odgovarajuci indeksi \( n \) i \( m \) ne prelaze 121. (U ovom zadatku se poklapa, ali u opstem slucaju moze biti razlicito.)</p>
    </div>
  </div>

  <!-- Optional Challenge -->
  <div class="challenge-box">
    <div class="card-title"><span class="icon">&#127942;</span> Dodatni izazov</div>
    <p>Koliko bi zajednickih clanova imale progresije \( 3, 9, 15, 21, \ldots \) (sa 100 clanova) i \( 5, 13, 21, 29, \ldots \) (sa 80 clanova)?</p>
    <details>
      <summary>Pogledaj odgovor</summary>
      <div class="detail-content">
        <p>Prva AP: \( a_n = 3 + 6(n-1) \), poslednji clan \( a_{100} = 3 + 6 \cdot 99 = 597 \).</p>
        <p>Druga AP: \( b_m = 5 + 8(m-1) \), poslednji clan \( b_{80} = 5 + 8 \cdot 79 = 637 \).</p>
        <p style="margin-top: 8px;">Razlika zajednicke AP: \( \text{NZS}(6, 8) = 24 \).</p>
        <p>Treba naci najmanji zajednicki clan. Trazimo \( c \) takav da:</p>
        <p>\( c = 3 + 6k = 5 + 8j \), tj. \( 6k - 8j = 2 \), tj. \( 3k - 4j = 1 \).</p>
        <p>Najmanje resenje: \( k = 3, j = 2 \), pa je \( c = 3 + 18 = 21 \).</p>
        <p>Zajednicki clanovi: \( 21, 45, 69, \ldots \), tj. \( c_t = 21 + 24t \).</p>
        <p>Uslov: \( 21 + 24t \leq \min(597, 637) = 597 \), pa \( 24t \leq 576 \), tj. \( t \leq 24 \).</p>
        <p style="margin-top: 8px;">Odgovor: \( t = 0, 1, \ldots, 24 \), dakle <strong>25 zajednickih clanova</strong>.</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('diagram');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  const dpr = window.devicePixelRatio || 1;
  canvas.width = W * dpr;
  canvas.height = H * dpr;
  canvas.style.width = W + 'px';
  canvas.style.height = H + 'px';
  ctx.scale(dpr, dpr);

  function draw() {
    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // We'll show the number line from 0 to about 80, highlighting common terms
    const leftMargin = 60;
    const rightMargin = 40;
    const axisW = W - leftMargin - rightMargin;
    const maxVal = 80;

    function toX(v) {
      return leftMargin + (v / maxVal) * axisW;
    }

    // Title
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Clanovi progresija na brojevnoj pravi (prvih nekoliko)', W / 2, 24);

    // Generate first few terms of each AP
    const ap1 = [];
    for (let n = 1; n <= 121; n++) {
      const v = 2 + 5 * (n - 1);
      if (v > maxVal) break;
      ap1.push(v);
    }
    const ap2 = [];
    for (let m = 1; m <= 121; m++) {
      const v = 2 + 3 * (m - 1);
      if (v > maxVal) break;
      ap2.push(v);
    }

    // Common terms
    const common = [];
    for (let t = 0; t <= 24; t++) {
      const v = 2 + 15 * t;
      if (v > maxVal) break;
      common.push(v);
    }

    const commonSet = new Set(common);
    const ap1Set = new Set(ap1);
    const ap2Set = new Set(ap2);

    // Row positions
    const row1Y = 80;
    const row2Y = 160;
    const row3Y = 250;
    const rowGap = 20;

    // --- Row 1: First AP ---
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText('AP\u2081 (d=5)', leftMargin - 10, row1Y + 5);

    // Axis line
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(leftMargin, row1Y);
    ctx.lineTo(W - rightMargin, row1Y);
    ctx.stroke();

    // AP1 dots
    ap1.forEach(v => {
      const x = toX(v);
      const isCommon = commonSet.has(v);
      ctx.beginPath();
      ctx.arc(x, row1Y, isCommon ? 7 : 4, 0, 2 * Math.PI);
      ctx.fillStyle = isCommon ? '#4ade80' : '#60a5fa';
      ctx.fill();
      if (isCommon) {
        ctx.strokeStyle = '#22c55e';
        ctx.lineWidth = 2;
        ctx.stroke();
      }
      // Label
      ctx.fillStyle = isCommon ? '#4ade80' : '#94a3b8';
      ctx.font = (isCommon ? 'bold ' : '') + '10px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(v.toString(), x, row1Y - 14);
    });

    // --- Row 2: Second AP ---
    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText('AP\u2082 (d=3)', leftMargin - 10, row2Y + 5);

    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(leftMargin, row2Y);
    ctx.lineTo(W - rightMargin, row2Y);
    ctx.stroke();

    ap2.forEach(v => {
      const x = toX(v);
      const isCommon = commonSet.has(v);
      ctx.beginPath();
      ctx.arc(x, row2Y, isCommon ? 7 : 4, 0, 2 * Math.PI);
      ctx.fillStyle = isCommon ? '#4ade80' : '#a78bfa';
      ctx.fill();
      if (isCommon) {
        ctx.strokeStyle = '#22c55e';
        ctx.lineWidth = 2;
        ctx.stroke();
      }
      ctx.fillStyle = isCommon ? '#4ade80' : '#94a3b8';
      ctx.font = (isCommon ? 'bold ' : '') + '10px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(v.toString(), x, row2Y - 14);
    });

    // --- Connecting lines for common terms ---
    common.forEach(v => {
      if (v > maxVal) return;
      const x = toX(v);
      ctx.strokeStyle = 'rgba(74, 222, 128, 0.3)';
      ctx.lineWidth = 1;
      ctx.setLineDash([4, 4]);
      ctx.beginPath();
      ctx.moveTo(x, row1Y + 8);
      ctx.lineTo(x, row2Y - 8);
      ctx.stroke();
      ctx.setLineDash([]);
    });

    // --- Row 3: Common AP ---
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText('Zajednicki', leftMargin - 10, row3Y - 2);
    ctx.fillText('(d=15)', leftMargin - 10, row3Y + 14);

    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(leftMargin, row3Y);
    ctx.lineTo(W - rightMargin, row3Y);
    ctx.stroke();

    common.forEach(v => {
      if (v > maxVal) return;
      const x = toX(v);
      ctx.beginPath();
      ctx.arc(x, row3Y, 7, 0, 2 * Math.PI);
      ctx.fillStyle = '#4ade80';
      ctx.fill();
      ctx.strokeStyle = '#22c55e';
      ctx.lineWidth = 2;
      ctx.stroke();
      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 11px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(v.toString(), x, row3Y - 16);
    });

    // Draw d=15 bracket between first two common terms
    if (common.length >= 2) {
      const x1 = toX(common[0]);
      const x2 = toX(common[1]);
      const bracketY = row3Y + 22;
      ctx.strokeStyle = '#f472b6';
      ctx.lineWidth = 1.5;
      ctx.beginPath();
      ctx.moveTo(x1, bracketY);
      ctx.lineTo(x1, bracketY + 10);
      ctx.lineTo(x2, bracketY + 10);
      ctx.lineTo(x2, bracketY);
      ctx.stroke();
      ctx.fillStyle = '#f472b6';
      ctx.font = 'bold 11px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('d = 15', (x1 + x2) / 2, bracketY + 24);
    }

    // Legend
    const legendY = H - 50;
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';

    // AP1 color
    ctx.beginPath();
    ctx.arc(leftMargin + 10, legendY, 5, 0, 2 * Math.PI);
    ctx.fillStyle = '#60a5fa';
    ctx.fill();
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('= samo u AP\u2081', leftMargin + 22, legendY + 4);

    // AP2 color
    ctx.beginPath();
    ctx.arc(leftMargin + 170, legendY, 5, 0, 2 * Math.PI);
    ctx.fillStyle = '#a78bfa';
    ctx.fill();
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('= samo u AP\u2082', leftMargin + 182, legendY + 4);

    // Common color
    ctx.beginPath();
    ctx.arc(leftMargin + 340, legendY, 6, 0, 2 * Math.PI);
    ctx.fillStyle = '#4ade80';
    ctx.fill();
    ctx.strokeStyle = '#22c55e';
    ctx.lineWidth = 2;
    ctx.stroke();
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('= zajednicki clan', leftMargin + 354, legendY + 4);

    // Summary text
    ctx.fillStyle = '#e2e8f0';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Zajednicki clanovi: 2, 17, 32, 47, 62, 77, ... , 347, 362  \u2192  ukupno 25 clanova', W / 2, H - 16);
  }

  draw();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Zajednicki clanovi dveju aritmetickih progresija",
  "subject": "math",
  "unit": "nizovi_i_redovi",
  "topic_tags": ["aritmeticka progresija", "presek nizova", "najmanji zajednicki sadrzalac", "prebrojavanje", "NZS"]
}
BRAINSPARK_META-->