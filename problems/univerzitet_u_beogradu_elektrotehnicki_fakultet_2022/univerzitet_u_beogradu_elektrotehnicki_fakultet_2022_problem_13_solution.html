<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Suma beskonačne geometrijske progresije i kvadratni koreni</title>

<script type="text/info" id="logic-scratchpad">
Problem: Suma beskonačne opadajuće geometrijske progresije sa pozitivnim članovima iznosi 9/2.
Suma kvadratnih korena članova progresije jednaka je 3.
Tražimo količnik progresije q.

Neka je prvi član a > 0, količnik 0 < q < 1.

Jednačina 1: Suma originalne GP
  S = a / (1 - q) = 9/2
  => a = (9/2)(1 - q)

Jednačina 2: Suma kvadratnih korena članova
  Članovi originalne GP: a, aq, aq², aq³, ...
  Kvadratni koreni: √a, √(aq), √(aq²), √(aq³), ...
                   = √a, √a·√q, √a·(√q)², √a·(√q)³, ...
  Ovo je nova GP sa prvim članom √a i količnikom √q.
  Pošto 0 < q < 1, važi 0 < √q < 1, pa je i ova GP konvergentna.
  Suma = √a / (1 - √q) = 3
  => √a = 3(1 - √q)
  => a = 9(1 - √q)²

Izjednačavamo izraze za a:
  (9/2)(1 - q) = 9(1 - √q)²

Delimo obe strane sa 9:
  (1/2)(1 - q) = (1 - √q)²

Koristimo razliku kvadrata: 1 - q = (1 - √q)(1 + √q)
  (1/2)(1 - √q)(1 + √q) = (1 - √q)²

Pošto q ≠ 1, važi 1 - √q ≠ 0, pa delimo obe strane sa (1 - √q):
  (1/2)(1 + √q) = 1 - √q

Množimo sa 2:
  1 + √q = 2 - 2√q
  3√q = 1
  √q = 1/3
  q = 1/9

Provera:
  a = (9/2)(1 - 1/9) = (9/2)(8/9) = 4
  S₁ = 4 / (1 - 1/9) = 4 / (8/9) = 4 · 9/8 = 9/2 ✓
  √a = 2, √q = 1/3
  S₂ = 2 / (1 - 1/3) = 2 / (2/3) = 3 ✓

Odgovor: (A) 1/9
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card h3 {
  color: #a78bfa;
  font-size: 1.15rem;
  margin-bottom: 12px;
  margin-top: 8px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.highlight-blue {
  color: #60a5fa;
  font-weight: 600;
}

.highlight-green {
  color: #4ade80;
  font-weight: 600;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 12px;
  padding: 12px 18px;
  text-align: center;
  min-width: 100px;
  flex: 1;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 700;
}

.given-item .unit {
  color: #94a3b8;
  font-size: 0.8rem;
}

.answer-option {
  cursor: default;
  transition: border-color 0.2s;
}

.math-box {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 14px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.step {
  position: relative;
  padding-left: 40px;
  margin-bottom: 24px;
}

.step-number {
  position: absolute;
  left: 0;
  top: 0;
  width: 28px;
  height: 28px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.85rem;
  color: #0f172a;
}

.step p {
  margin-bottom: 8px;
}

.insight-box {
  background: rgba(167, 139, 250, 0.1);
  border: 1px solid rgba(167, 139, 250, 0.3);
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 24px;
}

.insight-box h2 {
  color: #a78bfa;
}

.final-answer {
  background: rgba(52, 211, 153, 0.1);
  border: 2px solid rgba(52, 211, 153, 0.4);
  border-radius: 16px;
  padding: 24px;
  text-align: center;
  margin-bottom: 24px;
}

.final-answer h2 {
  color: #34d399;
  justify-content: center;
}

.final-answer .answer-value {
  font-size: 2rem;
  font-weight: 800;
  color: #4ade80;
  margin: 12px 0;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin-top: 16px;
}

.option-card {
  background: rgba(56, 189, 248, 0.06);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 20px;
  text-align: center;
  min-width: 90px;
}

.option-card.correct {
  border-color: #34d399;
  background: rgba(52, 211, 153, 0.15);
}

.option-card .opt-label {
  font-size: 0.8rem;
  color: #94a3b8;
  margin-bottom: 2px;
}

.option-card .opt-value {
  font-weight: 700;
  font-size: 1.1rem;
  color: #e2e8f0;
}

.option-card.correct .opt-value {
  color: #4ade80;
}

.pitfall-box {
  background: rgba(224, 148, 104, 0.08);
  border: 1px solid rgba(224, 148, 104, 0.25);
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 24px;
}

.pitfall-box h2 {
  color: #e09468;
}

.pitfall-box ul {
  list-style: none;
  padding-left: 0;
}

.pitfall-box li {
  padding: 6px 0 6px 24px;
  position: relative;
  color: #e2e8f0;
}

.pitfall-box li::before {
  content: '\26A0';
  position: absolute;
  left: 0;
}

.challenge-box {
  background: rgba(96, 165, 250, 0.08);
  border: 1px solid rgba(96, 165, 250, 0.2);
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 24px;
}

.challenge-box h2 {
  color: #60a5fa;
}

details {
  margin-bottom: 24px;
}

details summary {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 12px;
  padding: 16px 20px;
  cursor: pointer;
  font-size: 1.05rem;
  color: #e2e8f0;
  list-style: none;
  display: flex;
  align-items: center;
  gap: 8px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

details summary::-webkit-details-marker { display: none; }

details[open] summary {
  border-radius: 12px 12px 0 0;
  margin-bottom: 0;
}

details .details-content {
  background: #1e293b;
  border: 1px solid #334155;
  border-top: none;
  border-radius: 0 0 12px 12px;
  padding: 20px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

details .details-content ul {
  list-style: disc;
  padding-left: 20px;
}

details .details-content li {
  margin-bottom: 10px;
  color: #e2e8f0;
}

canvas {
  width: 100%;
  border-radius: 12px;
  display: block;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .container { padding: 10px; }
  .card { padding: 16px; }
  .given-grid { gap: 8px; }
  .given-item { min-width: 80px; padding: 10px 12px; }
  .step { padding-left: 34px; }
  .final-answer .answer-value { font-size: 1.5rem; }
  .options-row { gap: 6px; }
  .option-card { min-width: 70px; padding: 8px 12px; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Suma beskonačne geometrijske progresije i kvadratni koreni</h1>
  <p class="subtitle">Povezivanje dve beskonačne geometrijske progresije</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>
      Suma beskonačne opadajuće geometrijske progresije sa pozitivnim članovima iznosi
      <span class="highlight">\(\dfrac{9}{2}\)</span>. Ako je suma kvadratnih korena članova
      progresije jednaka <span class="highlight-blue">3</span>, tada količnik progresije iznosi:
    </p>
    <div class="given-grid">
      <div class="given-item">
        <div class="label">Suma GP</div>
        <div class="value">\(\dfrac{9}{2}\)</div>
      </div>
      <div class="given-item">
        <div class="label">Suma \(\sqrt{\text{članova}}\)</div>
        <div class="value">3</div>
      </div>
      <div class="given-item">
        <div class="label">Članovi</div>
        <div class="value">pozitivni</div>
      </div>
      <div class="given-item">
        <div class="label">Progresija</div>
        <div class="value">opadajuća</div>
        <div class="unit">\(0 < q < 1\)</div>
      </div>
    </div>
    <h3>Ponudjeni odgovori</h3>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(\dfrac{1}{9}\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(\dfrac{1}{3}\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(\dfrac{2}{9}\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(\dfrac{2}{3}\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(\dfrac{4}{9}\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>
      Postavicemo dva uslova: jedan za sumu originalne geometrijske progresije, a drugi za sumu
      niza kvadratnih korena njenih clanova (koji takodje cini geometrijsku progresiju).
      Iz ova dva uslova dobijecemo sistem od dve jednacine sa dve nepoznate \(a\) i \(q\),
      koji cemo resiti algebarski.
    </p>
  </div>

  <!-- Theory Refresher -->
  <details>
    <summary>&#128208; Kljucne formule i teoreme</summary>
    <div class="details-content">
      <ul>
        <li>
          <strong>Beskonacna geometrijska progresija:</strong> Niz \(a, aq, aq^2, aq^3, \ldots\)
          gde je \(a\) prvi clan i \(q\) kolicnik.
        </li>
        <li>
          <strong>Suma beskonacne GP (za \(|q| < 1\)):</strong>
          \( S = \dfrac{a}{1 - q} \)
        </li>
        <li>
          <strong>Kvadratni koren GP:</strong> Ako su clanovi \(a, aq, aq^2, \ldots\) pozitivni,
          tada \(\sqrt{a}, \sqrt{aq}, \sqrt{aq^2}, \ldots = \sqrt{a}, \sqrt{a}\sqrt{q}, \sqrt{a}(\sqrt{q})^2, \ldots\)
          cini novu GP sa prvim clanom \(\sqrt{a}\) i kolicnikom \(\sqrt{q}\).
        </li>
        <li>
          <strong>Razlika kvadrata:</strong> \(1 - q = (1 - \sqrt{q})(1 + \sqrt{q})\)
        </li>
      </ul>
    </div>
  </details>

  <!-- Visual Canvas -->
  <div class="card">
    <h2>Vizuelni prikaz</h2>
    <canvas id="gpCanvas" height="450"></canvas>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <div class="step">
      <div class="step-number">1</div>
      <p><strong>Postavljamo oznake i prvi uslov</strong></p>
      <p>Neka je \(a > 0\) prvi clan i \(0 < q < 1\) kolicnik progresije. Clanovi su: \(a, aq, aq^2, aq^3, \ldots\)</p>
      <p>Suma beskonacne GP je:</p>
      <div class="math-box">
        \[ S = \frac{a}{1 - q} = \frac{9}{2} \quad \Rightarrow \quad a = \frac{9}{2}(1 - q) \tag{1} \]
      </div>
    </div>

    <div class="step">
      <div class="step-number">2</div>
      <p><strong>Formiramo niz kvadratnih korena i drugi uslov</strong></p>
      <p>Kvadratni koreni clanova originalne GP su:</p>
      <div class="math-box">
        \[ \sqrt{a},\; \sqrt{a}\cdot\sqrt{q},\; \sqrt{a}\cdot(\sqrt{q})^2,\; \sqrt{a}\cdot(\sqrt{q})^3,\; \ldots \]
      </div>
      <p>Ovo je nova GP sa prvim clanom \(\sqrt{a}\) i kolicnikom \(\sqrt{q}\). Posto \(0 < q < 1\), vazi \(0 < \sqrt{q} < 1\), pa je i ovaj red konvergentan:</p>
      <div class="math-box">
        \[ \frac{\sqrt{a}}{1 - \sqrt{q}} = 3 \quad \Rightarrow \quad \sqrt{a} = 3(1 - \sqrt{q}) \tag{2} \]
      </div>
    </div>

    <div class="step">
      <div class="step-number">3</div>
      <p><strong>Izrazavamo \(a\) iz drugog uslova</strong></p>
      <p>Kvadriramo jednacinu (2):</p>
      <div class="math-box">
        \[ a = 9(1 - \sqrt{q})^2 \tag{3} \]
      </div>
    </div>

    <div class="step">
      <div class="step-number">4</div>
      <p><strong>Izjednacavamo izraze za \(a\)</strong></p>
      <p>Iz jednacina (1) i (3):</p>
      <div class="math-box">
        \[ \frac{9}{2}(1 - q) = 9(1 - \sqrt{q})^2 \]
      </div>
      <p>Delimo obe strane sa 9:</p>
      <div class="math-box">
        \[ \frac{1}{2}(1 - q) = (1 - \sqrt{q})^2 \]
      </div>
    </div>

    <div class="step">
      <div class="step-number">5</div>
      <p><strong>Primenjujemo razliku kvadrata</strong></p>
      <p>Na levoj strani koristimo faktorizaciju \(1 - q = (1 - \sqrt{q})(1 + \sqrt{q})\):</p>
      <div class="math-box">
        \[ \frac{1}{2}(1 - \sqrt{q})(1 + \sqrt{q}) = (1 - \sqrt{q})^2 \]
      </div>
      <p>Posto \(q \neq 1\), vazi \(1 - \sqrt{q} \neq 0\), pa mozemo podeliti obe strane sa \((1 - \sqrt{q})\):</p>
      <div class="math-box">
        \[ \frac{1}{2}(1 + \sqrt{q}) = 1 - \sqrt{q} \]
      </div>
    </div>

    <div class="step">
      <div class="step-number">6</div>
      <p><strong>Resavamo po \(\sqrt{q}\)</strong></p>
      <p>Mnozimo obe strane sa 2:</p>
      <div class="math-box">
        \[ 1 + \sqrt{q} = 2 - 2\sqrt{q} \]
      </div>
      <p>Prebacujemo clanove sa \(\sqrt{q}\) na jednu stranu:</p>
      <div class="math-box">
        \[ 3\sqrt{q} = 1 \quad \Rightarrow \quad \sqrt{q} = \frac{1}{3} \]
      </div>
      <p>Kvadriramo:</p>
      <div class="math-box">
        \[ \boxed{q = \frac{1}{9}} \]
      </div>
    </div>

    <div class="step">
      <div class="step-number">7</div>
      <p><strong>Provera</strong></p>
      <p>Iz jednacine (1): \( a = \dfrac{9}{2}\!\left(1 - \dfrac{1}{9}\right) = \dfrac{9}{2} \cdot \dfrac{8}{9} = 4 \)</p>
      <p>Provera sume originalne GP:</p>
      <div class="math-box">
        \[ S_1 = \frac{4}{1 - \frac{1}{9}} = \frac{4}{\frac{8}{9}} = 4 \cdot \frac{9}{8} = \frac{9}{2} \quad \checkmark \]
      </div>
      <p>Provera sume kvadratnih korena (\(\sqrt{a} = 2\), \(\sqrt{q} = \frac{1}{3}\)):</p>
      <div class="math-box">
        \[ S_2 = \frac{2}{1 - \frac{1}{3}} = \frac{2}{\frac{2}{3}} = 2 \cdot \frac{3}{2} = 3 \quad \checkmark \]
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>&#128161; Kljucni uvid</h2>
    <p>
      Kljucna ideja u ovom zadatku je prepoznavanje da <strong>kvadratni koreni clanova geometrijske
      progresije takodje cine geometrijsku progresiju</strong>. Ako originalna GP ima prvi clan \(a\) i
      kolicnik \(q\), tada GP korena ima prvi clan \(\sqrt{a}\) i kolicnik \(\sqrt{q}\).
    </p>
    <p style="margin-top: 10px;">
      Drugi kljucni korak je faktorizacija \(1 - q = (1 - \sqrt{q})(1 + \sqrt{q})\), koja omogucava
      skracivanje zajednickog faktora \((1 - \sqrt{q})\) i svodjenje problema na jednostavnu linearnu
      jednacinu po \(\sqrt{q}\).
    </p>
  </div>

  <!-- Final Answer -->
  <div class="final-answer">
    <h2>Konacan odgovor</h2>
    <div class="answer-value">\(q = \dfrac{1}{9}\)</div>
    <p style="color: #94a3b8; margin-bottom: 12px;">Tacan odgovor je <strong style="color:#4ade80;">(A)</strong></p>
    <div class="options-row">
      <div class="option-card correct">
        <div class="opt-label">(A) &#10003;</div>
        <div class="opt-value">\(\frac{1}{9}\)</div>
      </div>
      <div class="option-card">
        <div class="opt-label">(B)</div>
        <div class="opt-value">\(\frac{1}{3}\)</div>
      </div>
      <div class="option-card">
        <div class="opt-label">(C)</div>
        <div class="opt-value">\(\frac{2}{9}\)</div>
      </div>
      <div class="option-card">
        <div class="opt-label">(D)</div>
        <div class="opt-value">\(\frac{2}{3}\)</div>
      </div>
      <div class="option-card">
        <div class="opt-label">(E)</div>
        <div class="opt-value">\(\frac{4}{9}\)</div>
      </div>
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="pitfall-box">
    <h2>Ceste greske</h2>
    <ul>
      <li>
        <strong>Zaboravljanje da koreni cine GP:</strong> Mnogi ucenici ne prepoznaju da niz
        \(\sqrt{a}, \sqrt{aq}, \sqrt{aq^2}, \ldots\) cini geometrijsku progresiju. Kljucno je uociti
        da je \(\sqrt{aq^n} = \sqrt{a} \cdot (\sqrt{q})^n\).
      </li>
      <li>
        <strong>Deljenje nulom:</strong> Pre deljenja sa \((1 - \sqrt{q})\) neophodno je proveriti da
        taj izraz nije nula. Posto je GP opadajuca (\(q < 1\)), vazi \(\sqrt{q} < 1\), pa je
        \(1 - \sqrt{q} > 0\).
      </li>
      <li>
        <strong>Mesanje \(\sqrt{q}\) i \(q\):</strong> Cest je previd da je kolicnik nove GP upravo
        \(\sqrt{q}\), a ne \(q\). Takodje, nakon nalazenja \(\sqrt{q} = \frac{1}{3}\), potrebno je
        kvadrirati da bi se dobio \(q = \frac{1}{9}\), a ne pogresno odgovoriti \(\frac{1}{3}\).
      </li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="challenge-box">
    <h2>Dodatni izazov &#128640;</h2>
    <p>
      Beskonacna opadajuca geometrijska progresija ima sumu \(S\). Ako od svakog clana te progresije
      uzmemo \(n\)-ti koren (\(n \in \mathbb{N}\), \(n \geq 2\)), dobijamo novu GP. Ako je suma te
      nove GP jednaka \(S^{1/n}\), odredite zavisnost kolicnika \(q\) od \(n\) i \(S\).
    </p>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('gpCanvas');
  const ctx = canvas.getContext('2d');

  function draw() {
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    canvas.width = rect.width * dpr;
    canvas.height = 450 * dpr;
    ctx.scale(dpr, dpr);

    const W = rect.width;
    const H = 450;

    ctx.clearRect(0, 0, W, H);

    // Parameters: a = 4, q = 1/9
    const a = 4;
    const q = 1 / 9;
    const numTerms = 6;

    // Compute terms
    const terms = [];
    const sqrtTerms = [];
    for (let i = 0; i < numTerms; i++) {
      terms.push(a * Math.pow(q, i));
      sqrtTerms.push(Math.sqrt(a * Math.pow(q, i)));
    }

    // Layout
    const marginLeft = 70;
    const marginRight = 30;
    const marginTop = 55;
    const marginBottom = 60;
    const plotW = W - marginLeft - marginRight;
    const plotH = H - marginTop - marginBottom;

    // Title
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Clanovi GP i njihovi kvadratni koreni', W / 2, 28);

    // Axes (Y-up in canvas means we invert)
    const maxVal = 4.5;
    const barGroupWidth = plotW / numTerms;
    const barWidth = barGroupWidth * 0.3;

    function yPos(val) {
      return marginTop + plotH - (val / maxVal) * plotH;
    }

    // Y axis
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(marginLeft, marginTop);
    ctx.lineTo(marginLeft, marginTop + plotH);
    ctx.lineTo(marginLeft + plotW, marginTop + plotH);
    ctx.stroke();

    // Y gridlines and labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    for (let v = 0; v <= 4; v += 1) {
      const y = yPos(v);
      ctx.strokeStyle = 'rgba(148, 163, 184, 0.15)';
      ctx.setLineDash([4, 4]);
      ctx.beginPath();
      ctx.moveTo(marginLeft, y);
      ctx.lineTo(marginLeft + plotW, y);
      ctx.stroke();
      ctx.setLineDash([]);
      ctx.fillText(v.toString(), marginLeft - 10, y + 4);
    }

    // Draw bars
    for (let i = 0; i < numTerms; i++) {
      const cx = marginLeft + barGroupWidth * i + barGroupWidth / 2;
      const xOriginal = cx - barWidth - 2;
      const xSqrt = cx + 2;

      // Original term bar
      const hOrig = (terms[i] / maxVal) * plotH;
      const yOrig = yPos(terms[i]);
      const gradOrig = ctx.createLinearGradient(xOriginal, yOrig, xOriginal, marginTop + plotH);
      gradOrig.addColorStop(0, '#60a5fa');
      gradOrig.addColorStop(1, '#60a5fa40');
      ctx.fillStyle = gradOrig;
      ctx.beginPath();
      ctx.roundRect(xOriginal, yOrig, barWidth, hOrig, [4, 4, 0, 0]);
      ctx.fill();

      // Sqrt term bar
      const hSqrt = (sqrtTerms[i] / maxVal) * plotH;
      const ySqrt = yPos(sqrtTerms[i]);
      const gradSqrt = ctx.createLinearGradient(xSqrt, ySqrt, xSqrt, marginTop + plotH);
      gradSqrt.addColorStop(0, '#a78bfa');
      gradSqrt.addColorStop(1, '#a78bfa40');
      ctx.fillStyle = gradSqrt;
      ctx.beginPath();
      ctx.roundRect(xSqrt, ySqrt, barWidth, hSqrt, [4, 4, 0, 0]);
      ctx.fill();

      // Value labels on bars (only if tall enough)
      if (hOrig > 16) {
        ctx.fillStyle = '#e2e8f0';
        ctx.font = 'bold 11px Segoe UI, system-ui, sans-serif';
        ctx.textAlign = 'center';
        const origLabel = terms[i] >= 0.01 ? terms[i].toFixed(terms[i] < 0.1 ? 3 : terms[i] < 1 ? 2 : 1) : '';
        if (origLabel) ctx.fillText(origLabel, xOriginal + barWidth / 2, yOrig - 6);
      }
      if (hSqrt > 16) {
        ctx.fillStyle = '#e2e8f0';
        ctx.font = 'bold 11px Segoe UI, system-ui, sans-serif';
        ctx.textAlign = 'center';
        const sqrtLabel = sqrtTerms[i] >= 0.01 ? sqrtTerms[i].toFixed(sqrtTerms[i] < 0.1 ? 3 : sqrtTerms[i] < 1 ? 2 : 1) : '';
        if (sqrtLabel) ctx.fillText(sqrtLabel, xSqrt + barWidth / 2, ySqrt - 6);
      }

      // X axis labels
      ctx.fillStyle = '#94a3b8';
      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      const termIndex = 'a' + (i > 0 ? '\u2080\u2081\u2082\u2083\u2084\u2085'[i] : '\u2081');
      ctx.fillText('n = ' + (i + 1), cx, marginTop + plotH + 18);
    }

    // Legend
    const legendX = W - 200;
    const legendY = marginTop + 10;

    // Original GP legend
    ctx.fillStyle = '#60a5fa';
    ctx.fillRect(legendX, legendY, 14, 14);
    ctx.fillStyle = '#e2e8f0';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Clanovi GP (a = 4, q = 1/9)', legendX + 20, legendY + 12);

    // Sqrt GP legend
    ctx.fillStyle = '#a78bfa';
    ctx.fillRect(legendX, legendY + 24, 14, 14);
    ctx.fillStyle = '#e2e8f0';
    ctx.fillText('Kvadratni koreni', legendX + 20, legendY + 36);

    // Sums annotation
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('S = 9/2 = 4,5', marginLeft + 8, marginTop + plotH + 40);

    ctx.fillStyle = '#a78bfa';
    ctx.fillText('S\u221A = 3', marginLeft + 150, marginTop + plotH + 40);
  }

  draw();
  window.addEventListener('resize', draw);
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Suma beskonacne geometrijske progresije i kvadratni koreni",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["geometrijska_progresija", "beskonacni_red", "kvadratni_koren", "nizovi_i_redovi", "suma_GP"]
}
BRAINSPARK_META-->