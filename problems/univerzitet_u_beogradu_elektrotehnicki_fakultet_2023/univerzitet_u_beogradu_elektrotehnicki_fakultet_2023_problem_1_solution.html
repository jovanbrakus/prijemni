<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vrednost izraza sa korenima</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
Problem: Izracunati vrednost izraza
  3 * sqrt(8 + 2*sqrt(7)) / sqrt(8 - 2*sqrt(7)) - sqrt(3 + sqrt(7)) / sqrt(3 - sqrt(7)) * sqrt(2)

Step 1: Simplify 8 + 2*sqrt(7) and 8 - 2*sqrt(7)
  8 + 2*sqrt(7) = 7 + 2*sqrt(7) + 1 = (sqrt(7) + 1)^2
  8 - 2*sqrt(7) = 7 - 2*sqrt(7) + 1 = (sqrt(7) - 1)^2

Step 2: First fraction
  sqrt(8 + 2*sqrt(7)) / sqrt(8 - 2*sqrt(7))
  = (sqrt(7) + 1) / (sqrt(7) - 1)
  Rationalize by multiplying by (sqrt(7)+1)/(sqrt(7)+1):
  = (sqrt(7)+1)^2 / ((sqrt(7))^2 - 1^2)
  = (7 + 2*sqrt(7) + 1) / (7 - 1)
  = (8 + 2*sqrt(7)) / 6
  = (4 + sqrt(7)) / 3

Step 3: First term
  3 * (4 + sqrt(7)) / 3 = 4 + sqrt(7)

Step 4: Second fraction
  sqrt(3 + sqrt(7)) / sqrt(3 - sqrt(7))
  = sqrt( (3 + sqrt(7)) / (3 - sqrt(7)) )
  Rationalize inside:
  = sqrt( (3 + sqrt(7))^2 / ((3)^2 - (sqrt(7))^2) )
  = sqrt( (9 + 6*sqrt(7) + 7) / (9 - 7) )
  = sqrt( (16 + 6*sqrt(7)) / 2 )
  = sqrt( 8 + 3*sqrt(7) )

Step 5: Multiply by sqrt(2)
  sqrt(8 + 3*sqrt(7)) * sqrt(2) = sqrt(2*(8 + 3*sqrt(7))) = sqrt(16 + 6*sqrt(7))

Step 6: Simplify sqrt(16 + 6*sqrt(7))
  Try (sqrt(a) + sqrt(b))^2 = a + b + 2*sqrt(a*b) = 16 + 6*sqrt(7)
  So: a + b = 16 and 2*sqrt(a*b) = 6*sqrt(7) => 4*a*b = 252 => a*b = 63
  Quadratic: t^2 - 16t + 63 = 0 => t = (16 +- sqrt(256-252))/2 = (16 +- 2)/2
  t = 9 or t = 7
  So sqrt(16 + 6*sqrt(7)) = sqrt(9) + sqrt(7) = 3 + sqrt(7)

Step 7: Second term = 3 + sqrt(7)

Step 8: Final result
  (4 + sqrt(7)) - (3 + sqrt(7)) = 4 + sqrt(7) - 3 - sqrt(7) = 1

Answer: (E) 1
</script>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 700;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.card-title {
  font-size: 1.3rem;
  font-weight: 600;
  color: #60a5fa;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.4rem;
}

.problem-statement {
  border-left: 4px solid #a78bfa;
  font-size: 1.1rem;
}

.problem-statement .problem-text {
  margin-bottom: 20px;
}

.given-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 10px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 10px;
  padding: 10px 16px;
  text-align: center;
  font-size: 1.05rem;
}

.answer-option {
  cursor: default;
  transition: transform 0.15s;
}

.math-box {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 14px 0;
  overflow-x: auto;
}

.step-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  color: #fff;
  font-weight: 700;
  font-size: 0.95rem;
  margin-right: 10px;
  flex-shrink: 0;
}

.step-title {
  font-size: 1.15rem;
  font-weight: 600;
  color: #e2e8f0;
  display: flex;
  align-items: center;
  margin-bottom: 12px;
}

.step-explanation {
  color: #cbd5e1;
  margin-bottom: 12px;
}

details {
  background: rgba(167, 139, 250, 0.08);
  border: 1px solid rgba(167, 139, 250, 0.2);
  border-radius: 10px;
  padding: 12px 16px;
  margin: 12px 0;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  user-select: none;
}

details summary:hover {
  color: #c4b5fd;
}

details[open] summary {
  margin-bottom: 10px;
}

.insight-box {
  background: rgba(96, 165, 250, 0.1);
  border: 1px solid rgba(96, 165, 250, 0.3);
  border-left: 4px solid #60a5fa;
  border-radius: 12px;
  padding: 20px 24px;
  margin: 24px 0;
}

.insight-box .insight-title {
  color: #60a5fa;
  font-weight: 700;
  font-size: 1.15rem;
  margin-bottom: 8px;
}

.final-answer-card {
  background: rgba(52, 211, 153, 0.08);
  border: 2px solid rgba(52, 211, 153, 0.3);
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin: 28px 0;
}

.final-answer-card .label {
  color: #34d399;
  font-size: 1.1rem;
  font-weight: 600;
  margin-bottom: 10px;
}

.final-answer-card .answer {
  font-size: 2.2rem;
  font-weight: 700;
  color: #4ade80;
  margin-bottom: 16px;
}

.final-options {
  display: flex;
  justify-content: center;
  gap: 12px;
  flex-wrap: wrap;
  margin-top: 16px;
}

.final-option {
  padding: 8px 20px;
  border-radius: 10px;
  font-size: 1.05rem;
  border: 1px solid #334155;
  background: #1e293b;
  color: #94a3b8;
}

.final-option.correct {
  background: rgba(52, 211, 153, 0.15);
  border-color: #34d399;
  color: #4ade80;
  font-weight: 700;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 14px;
}

.pitfall-item {
  background: rgba(244, 114, 182, 0.08);
  border-left: 3px solid #f472b6;
  border-radius: 8px;
  padding: 12px 16px;
  margin: 10px 0;
  color: #fbb6ce;
}

.pitfall-title {
  color: #f472b6;
  font-weight: 600;
  margin-bottom: 4px;
}

canvas {
  width: 100%;
  border-radius: 12px;
  touch-action: none;
  display: block;
  margin: 0 auto;
}

.plan-text {
  color: #94a3b8;
  font-size: 1.05rem;
  line-height: 1.8;
}

.arrow {
  color: #60a5fa;
  margin: 0 4px;
}

@media (max-width: 700px) {
  h1 { font-size: 1.5rem; }
  .card { padding: 16px; }
  .container { padding: 10px; }
  .given-grid { grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); }
  .final-answer-card .answer { font-size: 1.7rem; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Racionalisan izraza sa ugnjezdenim korenima</h1>
  <p class="subtitle">Pojednostavljivanje algebarskog izraza sa kvadratnim korenima</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <div class="card-title"><span class="icon">&#128221;</span> Tekst zadatka</div>
    <div class="problem-text">
      Vrednost izraza
      <div class="math-box">
        \[ 3\cdot\frac{\sqrt{8 + 2\sqrt{7}}}{\sqrt{8 - 2\sqrt{7}}} \;-\; \frac{\sqrt{3 + \sqrt{7}}}{\sqrt{3 - \sqrt{7}}} \cdot \sqrt{2} \]
      </div>
      iznosi:
    </div>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">(A) \(2\)</div>
      <div class="given-item answer-option" data-option="B">(B) \(\sqrt{6}\)</div>
      <div class="given-item answer-option" data-option="C">(C) \(3\sqrt{2}\)</div>
      <div class="given-item answer-option" data-option="D">(D) \(\sqrt{2}\)</div>
      <div class="given-item answer-option" data-option="E">(E) \(1\)</div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127919;</span> Plan resavanja</div>
    <p class="plan-text">
      Kljucna ideja je da izraz pod korenom zapisemo kao potpun kvadrat. Na primer, \(8 + 2\sqrt{7} = (\sqrt{7}+1)^2\). Zatim racionalisemo razlomke i sve svedemo na proste izraze koji se na kraju poniste.
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128218;</span> Podsecanje na teoriju</div>
    <details>
      <summary>Potpun kvadrat sa korenima</summary>
      <div class="math-box">
        \[ a + 2\sqrt{b} = (\sqrt{x} + \sqrt{y})^2 \;\text{ gde je }\; x+y = a,\; xy = b \]
      </div>
      <p>Na primer: \(8 + 2\sqrt{7} = 7 + 2\sqrt{7} + 1 = (\sqrt{7}+1)^2\)</p>
    </details>
    <details style="margin-top: 10px;">
      <summary>Racionalizacija razlomka</summary>
      <div class="math-box">
        \[ \frac{a+b}{a-b} = \frac{(a+b)^2}{a^2-b^2} \]
      </div>
      <p>Mnozimo i brojilac i imenilac konjugovanim izrazom da uklonimo koren iz imenioca.</p>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127912;</span> Vizuelni prikaz resavanja</div>
    <canvas id="solutionCanvas" width="900" height="480"></canvas>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128736;</span> Resenje korak po korak</div>

    <!-- Step 1 -->
    <div style="margin-bottom: 24px;">
      <div class="step-title"><span class="step-badge">1</span> Prepoznaj potpune kvadrate</div>
      <p class="step-explanation">
        Primetimo da se izrazi pod korenima mogu zapisati kao potpuni kvadrati:
      </p>
      <div class="math-box">
        \[ 8 + 2\sqrt{7} = 7 + 2\sqrt{7} + 1 = (\sqrt{7} + 1)^2 \]
        \[ 8 - 2\sqrt{7} = 7 - 2\sqrt{7} + 1 = (\sqrt{7} - 1)^2 \]
      </div>
      <p class="step-explanation">
        Ovo nam omogucava da odmah izvadimo korene:
      </p>
      <div class="math-box">
        \[ \sqrt{8 + 2\sqrt{7}} = \sqrt{7} + 1, \quad \sqrt{8 - 2\sqrt{7}} = \sqrt{7} - 1 \]
      </div>
      <details>
        <summary>Proveri sebe: Zasto je \(\sqrt{(\sqrt{7}-1)^2} = \sqrt{7}-1\)?</summary>
        <p>Zato sto je \(\sqrt{7} \approx 2{,}646 > 1\), pa je \(\sqrt{7}-1 > 0\). Koren kvadrata pozitivnog broja je sam taj broj.</p>
      </details>
    </div>

    <!-- Step 2 -->
    <div style="margin-bottom: 24px;">
      <div class="step-title"><span class="step-badge">2</span> Izracunaj prvi clan</div>
      <p class="step-explanation">
        Zamenjujemo u prvom razlomku i racionalisemo:
      </p>
      <div class="math-box">
        \[ 3 \cdot \frac{\sqrt{7}+1}{\sqrt{7}-1} \]
      </div>
      <p class="step-explanation">
        Mnozimo brojilac i imenilac sa \((\sqrt{7}+1)\):
      </p>
      <div class="math-box">
        \[ 3 \cdot \frac{(\sqrt{7}+1)^2}{(\sqrt{7}-1)(\sqrt{7}+1)} = 3 \cdot \frac{7 + 2\sqrt{7} + 1}{7-1} = 3 \cdot \frac{8+2\sqrt{7}}{6} = \frac{8+2\sqrt{7}}{2} = 4+\sqrt{7} \]
      </div>
      <details>
        <summary>Proveri sebe: Koliko je \((\sqrt{7}+1)^2\)?</summary>
        <p>\((\sqrt{7}+1)^2 = 7 + 2\sqrt{7} + 1 = 8 + 2\sqrt{7}\). Tacno!</p>
      </details>
    </div>

    <!-- Step 3 -->
    <div style="margin-bottom: 24px;">
      <div class="step-title"><span class="step-badge">3</span> Obradi drugi razlomak</div>
      <p class="step-explanation">
        Drugi razlomak mozemo zapisati kao jedan koren:
      </p>
      <div class="math-box">
        \[ \frac{\sqrt{3+\sqrt{7}}}{\sqrt{3-\sqrt{7}}} = \sqrt{\frac{3+\sqrt{7}}{3-\sqrt{7}}} \]
      </div>
      <p class="step-explanation">
        Racionalisemo izraz pod korenom mnozenjem sa \(\frac{3+\sqrt{7}}{3+\sqrt{7}}\):
      </p>
      <div class="math-box">
        \[ \frac{(3+\sqrt{7})^2}{(3-\sqrt{7})(3+\sqrt{7})} = \frac{9 + 6\sqrt{7} + 7}{9-7} = \frac{16+6\sqrt{7}}{2} = 8+3\sqrt{7} \]
      </div>
      <p class="step-explanation">
        Dakle:
      </p>
      <div class="math-box">
        \[ \frac{\sqrt{3+\sqrt{7}}}{\sqrt{3-\sqrt{7}}} = \sqrt{8+3\sqrt{7}} \]
      </div>
    </div>

    <!-- Step 4 -->
    <div style="margin-bottom: 24px;">
      <div class="step-title"><span class="step-badge">4</span> Izracunaj drugi clan</div>
      <p class="step-explanation">
        Mnozimo sa \(\sqrt{2}\):
      </p>
      <div class="math-box">
        \[ \sqrt{8+3\sqrt{7}} \cdot \sqrt{2} = \sqrt{2(8+3\sqrt{7})} = \sqrt{16+6\sqrt{7}} \]
      </div>
      <p class="step-explanation">
        Sada pokusavamo da \(16+6\sqrt{7}\) zapisemo kao potpun kvadrat \((\sqrt{a}+\sqrt{b})^2\):
      </p>
      <div class="math-box">
        \[ (\sqrt{a}+\sqrt{b})^2 = a + b + 2\sqrt{ab} = 16 + 6\sqrt{7} \]
        \[ a+b = 16, \quad 2\sqrt{ab} = 6\sqrt{7} \;\Rightarrow\; 4ab = 252 \;\Rightarrow\; ab = 63 \]
      </div>
      <p class="step-explanation">
        Resavamo sistem \(a+b=16,\; ab=63\):
      </p>
      <div class="math-box">
        \[ t^2 - 16t + 63 = 0 \;\Rightarrow\; t = \frac{16 \pm \sqrt{256-252}}{2} = \frac{16 \pm 2}{2} \]
        \[ t = 9 \;\text{ ili }\; t = 7 \]
      </div>
      <p class="step-explanation">
        Prema tome:
      </p>
      <div class="math-box">
        \[ \sqrt{16+6\sqrt{7}} = \sqrt{9} + \sqrt{7} = 3 + \sqrt{7} \]
      </div>
      <details>
        <summary>Proveri sebe: Da li je \((3+\sqrt{7})^2 = 16+6\sqrt{7}\)?</summary>
        <p>\((3+\sqrt{7})^2 = 9 + 6\sqrt{7} + 7 = 16 + 6\sqrt{7}\). Da, tacno je!</p>
      </details>
    </div>

    <!-- Step 5 -->
    <div style="margin-bottom: 24px;">
      <div class="step-title"><span class="step-badge">5</span> Konacno oduzimanje</div>
      <p class="step-explanation">
        Sada znamo oba clana izraza:
      </p>
      <div class="math-box">
        \[ \underbrace{(4+\sqrt{7})}_{\text{prvi clan}} \;-\; \underbrace{(3+\sqrt{7})}_{\text{drugi clan}} = 4 + \sqrt{7} - 3 - \sqrt{7} = \boxed{1} \]
      </div>
      <p class="step-explanation">
        Clanovi sa \(\sqrt{7}\) se savrseno poniste, a ostaje \(4-3 = 1\).
      </p>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <div class="insight-title">Kljucni uvid</div>
    <p>
      Oba clana izraza sadrze \(\sqrt{7}\), ali sa suprotnim znacima pri oduzimanju. Kada se sve pojednostavi, iracionalni delovi se savrseno poniste i ostaje celobrojan rezultat. Tehnika prepoznavanja potpunih kvadrata oblika \(a + 2\sqrt{b} = (\sqrt{x} + \sqrt{y})^2\) je kljucna za ovakve zadatke.
    </p>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-card">
    <div class="label">Konacni odgovor</div>
    <div class="answer">\(1\)</div>
    <div class="final-options">
      <div class="final-option" data-option="A">(A) \(2\)</div>
      <div class="final-option" data-option="B">(B) \(\sqrt{6}\)</div>
      <div class="final-option" data-option="C">(C) \(3\sqrt{2}\)</div>
      <div class="final-option" data-option="D">(D) \(\sqrt{2}\)</div>
      <div class="final-option correct" data-option="E">(E) \(1\)</div>
    </div>
    <p class="verification-note">
      Verifikacija: \(4+\sqrt{7} - (3+\sqrt{7}) = 4-3+\sqrt{7}-\sqrt{7} = 1\) &#10004;
    </p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9888;&#65039;</span> Ceste greske</div>
    <div class="pitfall-item">
      <div class="pitfall-title">Pogresna racionalizacija</div>
      <p>Pri racionalizaciji razlomka \(\frac{\sqrt{7}+1}{\sqrt{7}-1}\), ucestala greska je zaboraviti da se mnozi i brojilac i imenilac istim izrazom, sto dovodi do pogresnog rezultata.</p>
    </div>
    <div class="pitfall-item">
      <div class="pitfall-title">Greska pri odredjivanju potpunog kvadrata</div>
      <p>Kod izraza \(\sqrt{16+6\sqrt{7}}\), neki ucenici pokusavaju da zapisu \(16+6\sqrt{7} = (4+\sqrt{7})^2\), sto bi dalo \(16+8\sqrt{7}+7 = 23+8\sqrt{7}\) &mdash; pogresno! Pravilno je \((3+\sqrt{7})^2\).</p>
    </div>
  </div>

  <!-- Optional Challenge -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127942;</span> Dodatni izazov</div>
    <p class="step-explanation">
      Izracunaj vrednost izraza:
    </p>
    <div class="math-box">
      \[ \frac{\sqrt{11 + 2\sqrt{10}}}{\sqrt{11 - 2\sqrt{10}}} + \frac{\sqrt{5+\sqrt{10}}}{\sqrt{5-\sqrt{10}}} \cdot \sqrt{3} \]
    </div>
    <details>
      <summary>Nagovestan</summary>
      <p>Primeni istu tehniku: \(11+2\sqrt{10} = (\sqrt{10}+1)^2\) i \(11-2\sqrt{10} = (\sqrt{10}-1)^2\). Zatim racionalizuj oba razlomka i pojednostavi.</p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('solutionCanvas');
  const ctx = canvas.getContext('2d');

  function draw() {
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    canvas.width = rect.width * dpr;
    canvas.height = 480 * dpr;
    ctx.scale(dpr, dpr);

    const W = rect.width;
    const H = 480;

    // Background
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Title
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 18px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Tok pojednostavljivanja', W / 2, 30);

    // Draw flow diagram
    const boxes = [
      { text: 'Polazni izraz', sub: '3 * A/B - C/D * sqrt(2)', y: 65, color: '#a78bfa' },
      { text: 'Potpuni kvadrati', sub: '8+2sqrt7 = (sqrt7+1)^2', y: 135, color: '#60a5fa' },
      { text: 'Racionalizacija', sub: '3*(sqrt7+1)/(sqrt7-1)', y: 205, color: '#60a5fa' },
      { text: 'Prvi clan', sub: '= 4 + sqrt(7)', y: 275, color: '#34d399' },
    ];

    const boxes2 = [
      { text: 'Spajanje korena', sub: 'sqrt((3+sqrt7)/(3-sqrt7))', y: 135, color: '#60a5fa' },
      { text: 'Mnozenje sa sqrt(2)', sub: '= sqrt(16+6*sqrt7)', y: 205, color: '#60a5fa' },
      { text: 'Drugi clan', sub: '= 3 + sqrt(7)', y: 275, color: '#34d399' },
    ];

    const leftX = W * 0.28;
    const rightX = W * 0.72;
    const boxW = Math.min(220, W * 0.3);
    const boxH = 50;

    // Draw initial box spanning both columns
    drawBox(W / 2, boxes[0].y, boxW * 1.2, boxH, boxes[0].text, boxes[0].sub, boxes[0].color);

    // Arrow from initial to left column
    drawArrow(W / 2 - 40, boxes[0].y + boxH / 2 + 2, leftX, boxes[1].y - boxH / 2);
    // Arrow from initial to right column
    drawArrow(W / 2 + 40, boxes[0].y + boxH / 2 + 2, rightX, boxes2[0].y - boxH / 2);

    // Left column labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Prvi clan', leftX, boxes[1].y - boxH / 2 - 6);
    ctx.fillText('Drugi clan', rightX, boxes2[0].y - boxH / 2 - 6);

    // Left column boxes
    for (let i = 1; i < boxes.length; i++) {
      drawBox(leftX, boxes[i].y, boxW, boxH, boxes[i].text, boxes[i].sub, boxes[i].color);
      if (i > 1) drawArrow(leftX, boxes[i - 1].y + boxH / 2 + 2, leftX, boxes[i].y - boxH / 2);
    }

    // Right column boxes
    for (let i = 0; i < boxes2.length; i++) {
      drawBox(rightX, boxes2[i].y, boxW, boxH, boxes2[i].text, boxes2[i].sub, boxes2[i].color);
      if (i > 0) drawArrow(rightX, boxes2[i - 1].y + boxH / 2 + 2, rightX, boxes2[i].y - boxH / 2);
    }

    // Draw subtraction
    const subY = 345;
    drawArrow(leftX, boxes[3].y + boxH / 2 + 2, W / 2, subY - boxH / 2);
    drawArrow(rightX, boxes2[2].y + boxH / 2 + 2, W / 2, subY - boxH / 2);

    // Subtraction box
    drawBox(W / 2, subY, boxW * 1.4, boxH, 'Oduzimanje', '(4+sqrt7) - (3+sqrt7)', '#f472b6');

    // Final result
    const finalY = 420;
    drawArrow(W / 2, subY + boxH / 2 + 2, W / 2, finalY - boxH / 2);

    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 22px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('= 1', W / 2, finalY + 8);

    // Draw green circle around result
    ctx.beginPath();
    ctx.arc(W / 2, finalY + 3, 30, 0, Math.PI * 2);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2.5;
    ctx.stroke();
  }

  function drawBox(x, y, w, h, title, sub, color) {
    const r = 10;
    ctx.beginPath();
    ctx.roundRect(x - w / 2, y - h / 2, w, h, r);
    ctx.fillStyle = 'rgba(30, 41, 59, 0.9)';
    ctx.fill();
    ctx.strokeStyle = color;
    ctx.lineWidth = 1.5;
    ctx.stroke();

    ctx.fillStyle = color;
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText(title, x, y - 5);

    ctx.fillStyle = '#94a3b8';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.fillText(sub, x, y + 14);
  }

  function drawArrow(x1, y1, x2, y2) {
    ctx.beginPath();
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([4, 3]);
    ctx.stroke();
    ctx.setLineDash([]);

    // Arrowhead
    const angle = Math.atan2(y2 - y1, x2 - x1);
    const size = 7;
    ctx.beginPath();
    ctx.moveTo(x2, y2);
    ctx.lineTo(x2 - size * Math.cos(angle - 0.4), y2 - size * Math.sin(angle - 0.4));
    ctx.lineTo(x2 - size * Math.cos(angle + 0.4), y2 - size * Math.sin(angle + 0.4));
    ctx.closePath();
    ctx.fillStyle = '#475569';
    ctx.fill();
  }

  draw();
  window.addEventListener('resize', draw);
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Pojednostavljivanje izraza sa ugnjezdenim kvadratnim korenima",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["korenovanje", "racionalizacija", "potpun kvadrat", "algebarski izrazi", "iracionalni brojevi"]
}
BRAINSPARK_META-->