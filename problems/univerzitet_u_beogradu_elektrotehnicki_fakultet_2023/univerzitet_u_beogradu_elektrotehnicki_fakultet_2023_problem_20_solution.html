<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Presecne tacke prave i krive</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
Problem: Naci skup vrednosti parametra n za koje prava y = x + n i kriva
y = x^3 - 2x^2 + x - 2 imaju najveci broj presecnih tacaka.

Intersection condition:
x + n = x^3 - 2x^2 + x - 2
n = x^3 - 2x^2 + x - 2 - x
n = x^3 - 2x^2 - 2

So the number of intersections equals the number of real solutions of:
f(x) = x^3 - 2x^2 - 2 = n

Analyze f(x) = x^3 - 2x^2 - 2:
f'(x) = 3x^2 - 4x = x(3x - 4)

Critical points:
x = 0: f(0) = 0 - 0 - 2 = -2 (local maximum, since f''(0) = -4 < 0)
x = 4/3: f(4/3) = (4/3)^3 - 2(4/3)^2 - 2
       = 64/27 - 32/9 - 2
       = 64/27 - 96/27 - 54/27
       = -86/27 (local minimum, since f''(4/3) = 4 > 0)

f''(x) = 6x - 4
f''(0) = -4 < 0 => local maximum at x=0
f''(4/3) = 8 - 4 = 4 > 0 => local minimum at x=4/3

For cubic y = f(x):
- When n < -86/27 or n > -2: exactly 1 real solution (1 intersection)
- When n = -86/27 or n = -2: exactly 2 real solutions (2 intersections)
- When -86/27 < n < -2: exactly 3 real solutions (3 intersections)

Maximum number of intersections is 3, achieved for n in (-86/27, -2).

Note: -86/27 â‰ˆ -3.185

This is an open interval (a, b) with a = -86/27 and b = -2.

Answer: (D) (a, b)
</script>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 700;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.card-title {
  font-size: 1.3rem;
  font-weight: 600;
  color: #60a5fa;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.4rem;
}

.problem-statement {
  border-left: 4px solid #a78bfa;
  font-size: 1.1rem;
}

.problem-statement .problem-text {
  margin-bottom: 20px;
}

.given-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 10px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 10px;
  padding: 10px 16px;
  text-align: center;
  font-size: 1.05rem;
}

.answer-option {
  cursor: default;
  transition: transform 0.15s;
}

.math-box {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 14px 0;
  overflow-x: auto;
}

.step-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  color: #fff;
  font-weight: 700;
  font-size: 0.95rem;
  margin-right: 10px;
  flex-shrink: 0;
}

.step-title {
  font-size: 1.15rem;
  font-weight: 600;
  color: #e2e8f0;
  display: flex;
  align-items: center;
  margin-bottom: 12px;
}

.step-explanation {
  color: #cbd5e1;
  margin-bottom: 12px;
}

details {
  background: rgba(167, 139, 250, 0.08);
  border: 1px solid rgba(167, 139, 250, 0.2);
  border-radius: 10px;
  padding: 12px 16px;
  margin: 12px 0;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  user-select: none;
}

details summary:hover {
  color: #c4b5fd;
}

details[open] summary {
  margin-bottom: 10px;
}

.insight-box {
  background: rgba(96, 165, 250, 0.1);
  border: 1px solid rgba(96, 165, 250, 0.3);
  border-left: 4px solid #60a5fa;
  border-radius: 12px;
  padding: 20px 24px;
  margin: 24px 0;
}

.insight-box .insight-title {
  color: #60a5fa;
  font-weight: 700;
  font-size: 1.15rem;
  margin-bottom: 8px;
}

.final-answer-card {
  background: rgba(52, 211, 153, 0.08);
  border: 2px solid rgba(52, 211, 153, 0.3);
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin: 28px 0;
}

.final-answer-card .label {
  color: #34d399;
  font-size: 1.1rem;
  font-weight: 600;
  margin-bottom: 10px;
}

.final-answer-card .answer {
  font-size: 2.2rem;
  font-weight: 700;
  color: #4ade80;
  margin-bottom: 16px;
}

.final-options {
  display: flex;
  justify-content: center;
  gap: 12px;
  flex-wrap: wrap;
  margin-top: 16px;
}

.final-option {
  padding: 8px 20px;
  border-radius: 10px;
  font-size: 1.05rem;
  border: 1px solid #334155;
  background: #1e293b;
  color: #94a3b8;
}

.final-option.correct {
  background: rgba(52, 211, 153, 0.15);
  border-color: #34d399;
  color: #4ade80;
  font-weight: 700;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 14px;
}

.pitfall-item {
  background: rgba(244, 114, 182, 0.08);
  border-left: 3px solid #f472b6;
  border-radius: 8px;
  padding: 12px 16px;
  margin: 10px 0;
  color: #fbb6ce;
}

.pitfall-title {
  color: #f472b6;
  font-weight: 600;
  margin-bottom: 4px;
}

canvas {
  width: 100%;
  border-radius: 12px;
  touch-action: none;
  display: block;
  margin: 0 auto;
}

.plan-text {
  color: #94a3b8;
  font-size: 1.05rem;
  line-height: 1.8;
}

.arrow {
  color: #60a5fa;
  margin: 0 4px;
}

.checkpoint {
  background: rgba(52, 211, 153, 0.1);
  border: 1px solid rgba(52, 211, 153, 0.25);
  border-radius: 10px;
  padding: 12px 16px;
  margin: 12px 0;
  color: #34d399;
  font-weight: 600;
}

.canvas-controls {
  display: flex;
  justify-content: center;
  gap: 12px;
  margin-top: 12px;
  flex-wrap: wrap;
}

.canvas-btn {
  background: rgba(96, 165, 250, 0.12);
  border: 1px solid rgba(96, 165, 250, 0.3);
  border-radius: 8px;
  color: #60a5fa;
  padding: 6px 16px;
  cursor: pointer;
  font-size: 0.9rem;
  font-family: inherit;
  transition: background 0.15s;
}

.canvas-btn:hover {
  background: rgba(96, 165, 250, 0.22);
}

.canvas-btn.active {
  background: rgba(96, 165, 250, 0.3);
  border-color: #60a5fa;
  font-weight: 600;
}

@media (max-width: 700px) {
  h1 { font-size: 1.5rem; }
  .card { padding: 16px; }
  .container { padding: 10px; }
  .given-grid { grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); }
  .final-answer-card .answer { font-size: 1.7rem; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Presecne tacke prave i kubne krive</h1>
  <p class="subtitle">Analiza broja resenja kubne jednacine pomocu kriticnih tacaka</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <div class="card-title"><span class="icon">&#128221;</span> Tekst zadatka</div>
    <div class="problem-text">
      Skup svih vrednosti parametra \(n \in \mathbb{R}\) za koje prava \(y = x + n\) i kriva \(y = x^3 - 2x^2 + x - 2\) imaju najveci broj presecnih tacaka je oblika (za neke \(a, b \in \mathbb{R}\), takve da je \(a < b\)):
    </div>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">(A) \((-\infty, a] \cup \{b\}\)</div>
      <div class="given-item answer-option" data-option="B">(B) \(\{a\} \cup [b, \infty)\)</div>
      <div class="given-item answer-option" data-option="C">(C) \((-\infty, a] \cup [b, \infty)\)</div>
      <div class="given-item answer-option" data-option="D">(D) \((a, b)\)</div>
      <div class="given-item answer-option" data-option="E">(E) \([a, b]\)</div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127919;</span> Plan resavanja</div>
    <p class="plan-text">
      Potrebno je odrediti za koje vrednosti parametra \(n\) prava i kriva imaju <strong>najveci broj</strong> presecnih tacaka. Presecne tacke nalazimo izjednacavanjem, a zatim analiziramo kubnu funkciju koja preostaje.
    </p>
    <p class="plan-text" style="margin-top: 8px;">
      <span class="arrow">&#8594;</span> Izjednaci \(y\) koordinate
      <span class="arrow">&#8594;</span> Svedi na \(f(x) = n\)
      <span class="arrow">&#8594;</span> Analiziraj kriticne tacke \(f\)
      <span class="arrow">&#8594;</span> Odredi interval za 3 resenja
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128218;</span> Podsecanje na teoriju</div>
    <details>
      <summary>Kubna funkcija i broj realnih korena</summary>
      <p style="margin-top: 8px;">
        Kubna funkcija \(f(x) = ax^3 + bx^2 + cx + d\) moze imati 1, 2 ili 3 realna korena. Ako ima lokalni maksimum \(M\) i lokalni minimum \(m\) (gde \(m < M\)), tada jednacina \(f(x) = n\) ima:
      </p>
      <ul style="margin: 8px 0 0 20px; color: #cbd5e1;">
        <li><strong>3 razlicita resenja</strong> kada je \(m < n < M\)</li>
        <li><strong>2 resenja</strong> (jedno dvostruko) kada je \(n = m\) ili \(n = M\)</li>
        <li><strong>1 resenje</strong> kada je \(n < m\) ili \(n > M\)</li>
      </ul>
    </details>
    <details style="margin-top: 10px;">
      <summary>Odredjivanje kriticnih tacaka</summary>
      <p style="margin-top: 8px;">
        Kriticne tacke funkcije nalazimo resavanjem \(f'(x) = 0\). Priroda kriticne tacke (maksimum ili minimum) odredjuje se pomocu drugog izvoda ili ispitivanjem znaka prvog izvoda.
      </p>
    </details>
    <details style="margin-top: 10px;">
      <summary>Geometrijska interpretacija</summary>
      <p style="margin-top: 8px;">
        Jednacina \(f(x) = n\) geometrijski predstavlja presek grafika \(y = f(x)\) sa horizontalnom pravom \(y = n\). Broj presecnih tacaka odgovara broju realnih resenja jednacine.
      </p>
    </details>
  </div>

  <!-- Interactive Canvas -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127912;</span> Interaktivni grafik</div>
    <p class="step-explanation" style="margin-bottom: 8px;">
      Grafik prikazuje funkciju \(f(x) = x^3 - 2x^2 - 2\) i horizontalnu pravu \(y = n\). Prevlacite misa gore-dole da menjate vrednost \(n\) i vidite kako se menja broj presecnih tacaka.
    </p>
    <canvas id="graphCanvas" width="900" height="520"></canvas>
    <div class="canvas-controls">
      <button class="canvas-btn" id="btnN3">n = -3 (3 preseka)</button>
      <button class="canvas-btn" id="btnNMax">n = -2 (granica)</button>
      <button class="canvas-btn" id="btnNMin">n = -86/27 (granica)</button>
      <button class="canvas-btn" id="btnN0">n = 0 (1 presek)</button>
    </div>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128736;</span> Resenje korak po korak</div>

    <!-- Step 1 -->
    <div style="margin-bottom: 24px;">
      <div class="step-title"><span class="step-badge">1</span> Postavi jednacinu preseka</div>
      <p class="step-explanation">
        Presecne tacke prave i krive nalazimo izjednacavanjem \(y\) koordinata:
      </p>
      <div class="math-box">
        \[ x + n = x^3 - 2x^2 + x - 2 \]
      </div>
      <p class="step-explanation">
        Oduzimanjem \(x\) sa obe strane dobijamo:
      </p>
      <div class="math-box">
        \[ n = x^3 - 2x^2 - 2 \]
      </div>
      <p class="step-explanation">
        Definisimo funkciju \(f(x) = x^3 - 2x^2 - 2\). Broj presecnih tacaka prave i krive jednak je broju realnih resenja jednacine \(f(x) = n\).
      </p>
      <div class="checkpoint">&#10003; Sveli smo problem na analizu broja resenja kubne jednacine.</div>
    </div>

    <!-- Step 2 -->
    <div style="margin-bottom: 24px;">
      <div class="step-title"><span class="step-badge">2</span> Nadji kriticne tacke funkcije \(f\)</div>
      <p class="step-explanation">
        Izracunajmo prvi izvod:
      </p>
      <div class="math-box">
        \[ f'(x) = 3x^2 - 4x = x(3x - 4) \]
      </div>
      <p class="step-explanation">
        Resavamo \(f'(x) = 0\):
      </p>
      <div class="math-box">
        \[ x(3x - 4) = 0 \implies x_1 = 0 \quad \text{ili} \quad x_2 = \frac{4}{3} \]
      </div>
      <details>
        <summary>Odredjivanje prirode kriticnih tacaka</summary>
        <p style="margin-top: 8px;">
          Koristimo drugi izvod: \(f''(x) = 6x - 4\)
        </p>
        <ul style="margin: 8px 0 0 20px; color: #cbd5e1;">
          <li>\(f''(0) = -4 < 0\) &mdash; u tacki \(x = 0\) je <strong>lokalni maksimum</strong></li>
          <li>\(f''\!\left(\frac{4}{3}\right) = 8 - 4 = 4 > 0\) &mdash; u tacki \(x = \frac{4}{3}\) je <strong>lokalni minimum</strong></li>
        </ul>
      </details>
    </div>

    <!-- Step 3 -->
    <div style="margin-bottom: 24px;">
      <div class="step-title"><span class="step-badge">3</span> Izracunaj vrednosti u kriticnim tackama</div>
      <p class="step-explanation">
        <strong>Lokalni maksimum</strong> u \(x = 0\):
      </p>
      <div class="math-box">
        \[ f(0) = 0^3 - 2 \cdot 0^2 - 2 = -2 \]
      </div>
      <p class="step-explanation">
        <strong>Lokalni minimum</strong> u \(x = \frac{4}{3}\):
      </p>
      <div class="math-box">
        \[ f\!\left(\frac{4}{3}\right) = \left(\frac{4}{3}\right)^{\!3} - 2\left(\frac{4}{3}\right)^{\!2} - 2 = \frac{64}{27} - \frac{32}{9} - 2 \]
      </div>
      <p class="step-explanation">
        Svedemo na zajednicki imenilac 27:
      </p>
      <div class="math-box">
        \[ = \frac{64}{27} - \frac{96}{27} - \frac{54}{27} = \frac{64 - 96 - 54}{27} = -\frac{86}{27} \]
      </div>
      <details>
        <summary>Decimalna vrednost</summary>
        <p style="margin-top: 8px;">
          \(-\frac{86}{27} \approx -3{,}185\), sto je zaista manje od \(-2\), pa potvrdjujemo: lokalni minimum \(< \) lokalni maksimum.
        </p>
      </details>
      <div class="checkpoint">&#10003; Lokalni maksimum: \(f(0) = -2\), lokalni minimum: \(f\!\left(\frac{4}{3}\right) = -\frac{86}{27}\)</div>
    </div>

    <!-- Step 4 -->
    <div style="margin-bottom: 24px;">
      <div class="step-title"><span class="step-badge">4</span> Odredi interval za 3 resenja</div>
      <p class="step-explanation">
        Za kubnu funkciju sa lokalnim maksimumom \(M = -2\) i lokalnim minimumom \(m = -\frac{86}{27}\), horizontalna prava \(y = n\) sece grafik u <strong>3 tacke</strong> ako i samo ako:
      </p>
      <div class="math-box">
        \[ m < n < M \quad \Longleftrightarrow \quad -\frac{86}{27} < n < -2 \]
      </div>
      <p class="step-explanation">
        Razmotrimo granicne slucajeve:
      </p>
      <ul style="margin: 0 0 12px 20px; color: #cbd5e1;">
        <li>Za \(n = -2\): prava dodiruje grafik u lokalnom maksimumu (dvostruko resenje u \(x = 0\)) i sece ga u jos jednoj tacki &mdash; ukupno <strong>2 preseka</strong>.</li>
        <li>Za \(n = -\frac{86}{27}\): prava dodiruje grafik u lokalnom minimumu (dvostruko resenje u \(x = \frac{4}{3}\)) i sece ga u jos jednoj tacki &mdash; ukupno <strong>2 preseka</strong>.</li>
        <li>Za \(n < -\frac{86}{27}\) ili \(n > -2\): prava sece grafik u samo <strong>1 tacki</strong>.</li>
      </ul>
      <p class="step-explanation">
        Dakle, <strong>najveci broj presecnih tacaka je 3</strong>, a postize se za \(n \in \left(-\frac{86}{27},\; -2\right)\).
      </p>
      <div class="checkpoint">&#10003; Skup vrednosti je otvoren interval &mdash; oblik \((a,\; b)\).</div>
    </div>

    <!-- Step 5 -->
    <div style="margin-bottom: 24px;">
      <div class="step-title"><span class="step-badge">5</span> Identifikuj odgovor</div>
      <p class="step-explanation">
        Interval \(\left(-\frac{86}{27},\; -2\right)\) je oblika \((a,\; b)\) gde je:
      </p>
      <div class="math-box">
        \[ a = -\frac{86}{27}, \quad b = -2 \]
      </div>
      <p class="step-explanation">
        Ovo odgovara opciji <strong>(D)</strong>.
      </p>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <div class="insight-title">Kljucni uvid</div>
    <p>
      Ovo je elegantna primena analize kubne funkcije. Kljucni trik je u prepoznavanju da se problem presecnih tacaka prave \(y = x + n\) i krive svodi na horizontalno secenje grafika funkcije \(f(x) = x^3 - 2x^2 - 2\). Koeficijent uz \(x\) u pravi i u krivoj se poklapaju (oba su 1), pa se pri oduzimanju poniste &mdash; i preostaje kubna funkcija bez linearnog clana. Maksimalni broj preseka kubne krive horizontalnom pravom je 3, a postize se <strong>strogo izmedju</strong> lokalnog minimuma i lokalnog maksimuma.
    </p>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-card">
    <div class="label">Konacan odgovor</div>
    <div class="answer">(D) \((a,\; b)\)</div>
    <p style="color: #94a3b8; margin-bottom: 12px;">gde je \(a = -\dfrac{86}{27}\), \(b = -2\)</p>
    <div class="final-options">
      <div class="final-option" data-option="A">(A) \((-\infty, a] \cup \{b\}\)</div>
      <div class="final-option" data-option="B">(B) \(\{a\} \cup [b, \infty)\)</div>
      <div class="final-option" data-option="C">(C) \((-\infty, a] \cup [b, \infty)\)</div>
      <div class="final-option correct" data-option="D">(D) \((a, b)\)</div>
      <div class="final-option" data-option="E">(E) \([a, b]\)</div>
    </div>
    <p class="verification-note">
      Verifikacija: Za \(n = -3 \in \left(-\frac{86}{27},\; -2\right)\) jednacina \(x^3 - 2x^2 - 2 = -3\), tj. \(x^3 - 2x^2 + 1 = 0\), ima tri realna korena. &#10004;
    </p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9888;&#65039;</span> Ceste greske</div>
    <div class="pitfall-item">
      <div class="pitfall-title">Ukljucivanje granicnih vrednosti</div>
      <p>Na granicama intervala (\(n = -2\) i \(n = -\frac{86}{27}\)) dobijamo samo 2 presecne tacke (jer je jedno resenje dvostruko), ne 3. Zato je interval <strong>otvoren</strong> &mdash; \((a,b)\), a ne \([a,b]\). Odgovor (E) bi bio pogresan!</p>
    </div>
    <div class="pitfall-item">
      <div class="pitfall-title">Zaborav da se linerani clanovi poniste</div>
      <p>Pri izjednacavanju \(x + n = x^3 - 2x^2 + x - 2\), clan \(x\) postoji na obe strane i ponisti se. Ako ovo previdite i zadrzite \(x\) u jednacini, dobicete pogresnu funkciju za analizu.</p>
    </div>
    <div class="pitfall-item">
      <div class="pitfall-title">Zamena maksimuma i minimuma</div>
      <p>Kubna funkcija sa pozitivnim vodecim koeficijentom ima lokalni maksimum <strong>pre</strong> lokalnog minimuma (za manju vrednost \(x\)). Ovde je \(f(0) = -2\) lokalni maksimum, a \(f(4/3) = -86/27\) lokalni minimum. Bitno je da je \(-86/27 < -2\), dakle lokalni minimum je ispod lokalnog maksimuma.</p>
    </div>
    <div class="pitfall-item">
      <div class="pitfall-title">Pitanje &bdquo;najveceg broja&rdquo;</div>
      <p>Zadatak trazi skup vrednosti \(n\) za koje je broj presecnih tacaka <strong>najveci moguci</strong>. Najveci moguci broj je 3 (za kubnu krivu i pravu). Nemojte pomesati sa &bdquo;bar jednom presecnom tackom&rdquo; ili &bdquo;bar dve presecne tacke&rdquo;.</p>
    </div>
  </div>

  <!-- Challenge -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127942;</span> Dodatni izazov</div>
    <p class="step-explanation">
      Za koje vrednosti parametra \(n\) prava \(y = x + n\) <strong>dodiruje</strong> krivu \(y = x^3 - 2x^2 + x - 2\) (tj. ima tacno jednu zajednicku tacku u kojoj se dodiruju)?
    </p>
    <details>
      <summary>Nagovestaj</summary>
      <p style="margin-top: 8px;">
        Dodirna tacka odgovara dvostrukom korenu jednacine \(x^3 - 2x^2 - 2 = n\). To se desava tacno na granicama intervala: za \(n = -2\) dodirna tacka je \(x = 0\), a za \(n = -\frac{86}{27}\) dodirna tacka je \(x = \frac{4}{3}\). Primetimo da u oba slucaja postoji i jos jedan (jednostruki) presek, pa prava i kriva imaju ukupno 2 zajednicke tacke &mdash; jednu dodirnu i jednu presecnu.
      </p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('graphCanvas');
  const ctx = canvas.getContext('2d');

  let currentN = -2.5;
  let isDragging = false;

  const LOCAL_MAX_Y = -2;
  const LOCAL_MIN_Y = -86 / 27;

  function f(x) {
    return x * x * x - 2 * x * x - 2;
  }

  function draw() {
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    const W = rect.width;
    const H = 520;
    canvas.width = W * dpr;
    canvas.height = H * dpr;
    ctx.scale(dpr, dpr);

    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Coordinate system parameters
    const xMin = -2, xMax = 4;
    const yMin = -5, yMax = 3;

    function toScreenX(x) {
      return 60 + (x - xMin) / (xMax - xMin) * (W - 100);
    }
    function toScreenY(y) {
      return H - 50 - (y - yMin) / (yMax - yMin) * (H - 90);
    }

    // Grid lines
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (let x = Math.ceil(xMin); x <= xMax; x++) {
      ctx.beginPath();
      ctx.moveTo(toScreenX(x), toScreenY(yMin));
      ctx.lineTo(toScreenX(x), toScreenY(yMax));
      ctx.stroke();
    }
    for (let y = Math.ceil(yMin); y <= yMax; y++) {
      ctx.beginPath();
      ctx.moveTo(toScreenX(xMin), toScreenY(y));
      ctx.lineTo(toScreenX(xMax), toScreenY(y));
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(toScreenX(xMin), toScreenY(0));
    ctx.lineTo(toScreenX(xMax), toScreenY(0));
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(toScreenX(0), toScreenY(yMin));
    ctx.lineTo(toScreenX(0), toScreenY(yMax));
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    for (let x = Math.ceil(xMin); x <= xMax; x++) {
      if (x === 0) continue;
      ctx.fillText(x.toString(), toScreenX(x), toScreenY(0) + 16);
    }
    ctx.textAlign = 'right';
    for (let y = Math.ceil(yMin); y <= yMax; y++) {
      if (y === 0) continue;
      ctx.fillText(y.toString(), toScreenX(0) - 8, toScreenY(y) + 4);
    }

    // Draw the 3-solution zone (shaded)
    ctx.fillStyle = 'rgba(96, 165, 250, 0.06)';
    ctx.fillRect(toScreenX(xMin), toScreenY(LOCAL_MAX_Y), toScreenX(xMax) - toScreenX(xMin), toScreenY(LOCAL_MIN_Y) - toScreenY(LOCAL_MAX_Y));

    // Draw local max and local min horizontal dashed lines
    ctx.setLineDash([6, 4]);
    ctx.strokeStyle = 'rgba(167, 139, 250, 0.4)';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(toScreenX(xMin), toScreenY(LOCAL_MAX_Y));
    ctx.lineTo(toScreenX(xMax), toScreenY(LOCAL_MAX_Y));
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(toScreenX(xMin), toScreenY(LOCAL_MIN_Y));
    ctx.lineTo(toScreenX(xMax), toScreenY(LOCAL_MIN_Y));
    ctx.stroke();
    ctx.setLineDash([]);

    // Labels for boundaries
    ctx.fillStyle = '#a78bfa';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('y = -2 (lok. maks.)', toScreenX(xMax) - 140, toScreenY(LOCAL_MAX_Y) - 6);
    ctx.fillText('y = -86/27 (lok. min.)', toScreenX(xMax) - 155, toScreenY(LOCAL_MIN_Y) + 16);

    // Zone label
    ctx.fillStyle = 'rgba(96, 165, 250, 0.5)';
    ctx.font = 'italic 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    var zoneY = (toScreenY(LOCAL_MAX_Y) + toScreenY(LOCAL_MIN_Y)) / 2;
    ctx.fillText('Zona sa 3 preseka', toScreenX((xMax + xMin) / 2), zoneY);

    // Draw f(x) curve
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 3;
    ctx.beginPath();
    var started = false;
    for (var px = 0; px <= W; px++) {
      var x = xMin + (px - 60) / (W - 100) * (xMax - xMin);
      var y = f(x);
      var sy = toScreenY(y);
      if (sy < 0 || sy > H) {
        started = false;
        continue;
      }
      if (!started) {
        ctx.moveTo(px, sy);
        started = true;
      } else {
        ctx.lineTo(px, sy);
      }
    }
    ctx.stroke();

    // Label the curve
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('f(x) = x\u00B3 - 2x\u00B2 - 2', toScreenX(2.3), toScreenY(f(2.3)) - 12);

    // Draw horizontal line y = n
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(toScreenX(xMin), toScreenY(currentN));
    ctx.lineTo(toScreenX(xMax), toScreenY(currentN));
    ctx.stroke();

    // Label the line
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    var nStr = currentN === -86/27 ? 'n = -86/27' : 'n = ' + currentN.toFixed(2).replace('.', ',');
    ctx.fillText(nStr, toScreenX(xMax) - 5, toScreenY(currentN) - 8);

    // Find and mark intersection points
    var intersections = [];
    var step = 0.001;
    for (var x = xMin; x < xMax; x += step) {
      var y1 = f(x) - currentN;
      var y2 = f(x + step) - currentN;
      if (y1 * y2 <= 0) {
        // Linear interpolation
        var t = Math.abs(y1) / (Math.abs(y1) + Math.abs(y2));
        var xi = x + t * step;
        intersections.push(xi);
      }
    }

    ctx.fillStyle = '#4ade80';
    for (var i = 0; i < intersections.length; i++) {
      var xi = intersections[i];
      var sx = toScreenX(xi);
      var sy = toScreenY(currentN);
      ctx.beginPath();
      ctx.arc(sx, sy, 6, 0, Math.PI * 2);
      ctx.fill();
    }

    // Mark critical points on the curve
    ctx.fillStyle = '#a78bfa';
    ctx.beginPath();
    ctx.arc(toScreenX(0), toScreenY(-2), 5, 0, Math.PI * 2);
    ctx.fill();
    ctx.beginPath();
    ctx.arc(toScreenX(4/3), toScreenY(-86/27), 5, 0, Math.PI * 2);
    ctx.fill();

    // Intersection count display
    var count = intersections.length;
    ctx.fillStyle = count === 3 ? '#4ade80' : (count === 2 ? '#fbbf24' : '#94a3b8');
    ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Broj preseka: ' + count, 20, 30);

    // Instruction
    ctx.fillStyle = '#64748b';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText('Prevucite misem gore-dole da promenite n', W - 20, 25);
  }

  // Mouse/touch interaction
  canvas.addEventListener('pointerdown', function(e) {
    isDragging = true;
    canvas.setPointerCapture(e.pointerId);
    updateN(e);
  });

  canvas.addEventListener('pointermove', function(e) {
    if (!isDragging) return;
    updateN(e);
  });

  canvas.addEventListener('pointerup', function(e) {
    isDragging = false;
    canvas.releasePointerCapture(e.pointerId);
  });

  function updateN(e) {
    var rect = canvas.getBoundingClientRect();
    var mouseY = e.clientY - rect.top;
    var H = 520;
    var yMin = -5, yMax = 3;
    var n = yMax - (mouseY - 40) / (H - 90) * (yMax - yMin);
    n = Math.max(-5, Math.min(3, n));
    currentN = n;
    draw();
  }

  // Preset buttons
  document.getElementById('btnN3').addEventListener('click', function() {
    currentN = -3;
    draw();
  });
  document.getElementById('btnNMax').addEventListener('click', function() {
    currentN = -2;
    draw();
  });
  document.getElementById('btnNMin').addEventListener('click', function() {
    currentN = -86 / 27;
    draw();
  });
  document.getElementById('btnN0').addEventListener('click', function() {
    currentN = 0;
    draw();
  });

  draw();
  window.addEventListener('resize', draw);
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{"title":"Presecne tacke prave i kubne krive","subject":"math","unit":"calculus","topic_tags":["kubna funkcija","analiza funkcije","kriticne tacke","presecne tacke","parametar"]}
BRAINSPARK_META-->