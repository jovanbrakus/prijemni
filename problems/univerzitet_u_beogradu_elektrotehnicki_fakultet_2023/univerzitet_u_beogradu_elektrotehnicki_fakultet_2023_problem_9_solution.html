<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Četvorocifreni brojevi deljivi sa 5 sa različitim ciframa</title>
<script>
MathJax = { tex: { inlineMath: [['\\(', '\\)'], ['$', '$']], displayMath: [['\\[', '\\]']] }, svg: { fontCache: 'global' } };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

<script type="text/info" id="logic-scratchpad">
Problem: Broj četvorocifrenih brojeva deljivih sa 5 čije su sve cifre različite jednak je?

Četvorocifreni brojevi: od 1000 do 9999.
Deljivost sa 5: poslednja cifra mora biti 0 ili 5.
Sve cifre moraju biti različite.

Broj ima oblik: d1 d2 d3 d4, gde je d1 ∈ {1,...,9}, d4 ∈ {0, 5}.

Slučaj 1: d4 = 0
  d1: bilo koja od {1,2,3,4,5,6,7,8,9} → 9 izbora
  d2: bilo koja od {0,1,...,9} \ {d1, 0} = {0,1,...,9} \ {d1, 0}
      Zapravo: d2 može biti bilo šta od {0,...,9} osim d1 i d4=0.
      Ali d4=0 je već zauzeto. Dakle d2 ∈ {1,...,9}\{d1} ∪ {} - ne, d2 može biti 0? Ne, 0 je zauzeto za d4.
      Čekaj, razmislimo ponovo. Sve cifre moraju biti RAZLIČITE.
      d4 = 0. d1 ∈ {1,...,9}: 9 izbora.
      d2: bilo koja cifra od 0-9 osim d1 i d4(=0): 8 izbora.
      d3: bilo koja cifra od 0-9 osim d1, d2 i d4(=0): 7 izbora.
      Ukupno Slučaj 1: 9 × 8 × 7 = 504

Slučaj 2: d4 = 5
  d1: mora biti ≥ 1 i ≠ 5 → d1 ∈ {1,2,3,4,6,7,8,9} → 8 izbora
  d2: bilo koja cifra od 0-9 osim d1 i d4(=5): 8 izbora
  d3: bilo koja cifra od 0-9 osim d1, d2 i d4(=5): 7 izbora
  Ukupno Slučaj 2: 8 × 8 × 7 = 448

Ukupno: 504 + 448 = 952

Odgovor: (B) 952
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, sans-serif;
  line-height: 1.7;
  padding: 20px;
  max-width: 860px;
  margin: 0 auto;
}

h1 {
  text-align: center;
  font-size: 1.9rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 6px;
}

.subtitle {
  text-align: center;
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 28px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 22px;
  margin-bottom: 22px;
}

.card-title {
  font-size: 1.2rem;
  font-weight: 700;
  margin-bottom: 12px;
  color: #60a5fa;
}

.problem-statement {
  border-left: 4px solid #a78bfa;
}

.problem-statement .card-title {
  color: #a78bfa;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-top: 14px;
}

.given-item {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 8px;
  padding: 8px 16px;
  font-size: 1rem;
}

.answer-option {
  cursor: default;
  transition: border-color 0.2s;
}

.answer-option[data-option] {
  min-width: 70px;
  text-align: center;
}

.plan-text {
  color: #94a3b8;
  font-style: italic;
  font-size: 1.02rem;
}

details {
  margin-top: 10px;
}

summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 6px 0;
  user-select: none;
}

summary:hover {
  color: #93c5fd;
}

details .detail-content {
  padding: 12px 0 4px 10px;
  color: #cbd5e1;
}

.step {
  margin-bottom: 18px;
}

.step-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 30px;
  height: 30px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  font-weight: 700;
  font-size: 0.95rem;
  color: #0f172a;
  margin-right: 10px;
  vertical-align: middle;
}

.step-title {
  font-weight: 700;
  font-size: 1.08rem;
  color: #e2e8f0;
  vertical-align: middle;
}

.step-body {
  margin-top: 8px;
  padding-left: 42px;
}

.checkpoint summary {
  color: #f472b6;
  font-size: 0.95rem;
}

.key-insight {
  border: 1px solid #a78bfa;
  background: rgba(167, 139, 250, 0.08);
  border-radius: 12px;
  padding: 18px 20px;
  margin-bottom: 22px;
}

.key-insight .card-title {
  color: #a78bfa;
}

.final-answer {
  border: 2px solid #4ade80;
  background: rgba(74, 222, 128, 0.06);
}

.final-answer .card-title {
  color: #4ade80;
  font-size: 1.3rem;
}

.answer-display {
  font-size: 1.6rem;
  text-align: center;
  color: #4ade80;
  font-weight: 700;
  margin: 16px 0;
}

.options-final {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin: 16px 0;
}

.option-box {
  background: #0f172a;
  border: 2px solid #334155;
  border-radius: 10px;
  padding: 10px 20px;
  font-size: 1.05rem;
  text-align: center;
  min-width: 80px;
}

.option-box.correct {
  border-color: #4ade80;
  background: rgba(74, 222, 128, 0.12);
  color: #4ade80;
  font-weight: 700;
}

.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 6px 0 6px 24px;
  position: relative;
  color: #fbbf24;
}

.pitfall-list li::before {
  content: '\26A0';
  position: absolute;
  left: 0;
}

.canvas-container {
  display: flex;
  justify-content: center;
  margin: 10px 0;
}

canvas {
  border-radius: 10px;
  background: #0f172a;
  border: 1px solid #334155;
  touch-action: none;
  max-width: 100%;
}

.case-box {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 16px;
  margin: 12px 0;
}

.case-box.case-a {
  border-left: 3px solid #60a5fa;
}

.case-box.case-b {
  border-left: 3px solid #a78bfa;
}

.case-label {
  font-weight: 700;
  font-size: 1.02rem;
  margin-bottom: 8px;
}

.case-a .case-label { color: #60a5fa; }
.case-b .case-label { color: #a78bfa; }

.digit-slots {
  display: flex;
  gap: 8px;
  justify-content: center;
  margin: 12px 0;
  flex-wrap: wrap;
}

.digit-slot {
  width: 72px;
  height: 72px;
  border: 2px solid #334155;
  border-radius: 10px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: #0f172a;
  font-size: 0.85rem;
  color: #94a3b8;
}

.digit-slot .slot-label {
  font-size: 0.72rem;
  color: #64748b;
  margin-bottom: 2px;
}

.digit-slot .slot-value {
  font-size: 1.2rem;
  font-weight: 700;
  color: #e2e8f0;
}

.digit-slot.fixed {
  border-color: #4ade80;
  background: rgba(74, 222, 128, 0.08);
}

.digit-slot.fixed .slot-value {
  color: #4ade80;
}

.multiplication {
  text-align: center;
  font-size: 1.15rem;
  color: #e2e8f0;
  margin: 10px 0;
  font-weight: 600;
}

.result-highlight {
  display: inline-block;
  background: linear-gradient(135deg, rgba(96,165,250,0.15), rgba(167,139,250,0.15));
  border: 1px solid #60a5fa;
  border-radius: 8px;
  padding: 4px 14px;
  font-weight: 700;
  color: #60a5fa;
}

.sum-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 14px;
  margin: 16px 0;
  font-size: 1.2rem;
  font-weight: 700;
  flex-wrap: wrap;
}

.sum-part-a { color: #60a5fa; }
.sum-part-b { color: #a78bfa; }
.sum-result { color: #4ade80; font-size: 1.4rem; }

.verification {
  background: #0f172a;
  border-radius: 8px;
  padding: 14px;
  margin-top: 10px;
  color: #94a3b8;
  font-size: 0.97rem;
}

.tree-diagram {
  margin: 10px 0;
  padding: 10px;
  background: #0f172a;
  border-radius: 8px;
  overflow-x: auto;
}

@media (max-width: 700px) {
  body { padding: 12px; }
  h1 { font-size: 1.4rem; }
  .card { padding: 16px; }
  .step-body { padding-left: 20px; }
  .given-grid { gap: 6px; }
  .given-item { padding: 6px 12px; font-size: 0.92rem; }
  .digit-slot { width: 60px; height: 60px; }
  .digit-slot .slot-value { font-size: 1rem; }
}
</style>
</head>
<body>

<h1>Četvorocifreni brojevi deljivi sa 5</h1>
<p class="subtitle">Kombinatorika — prebrojavanje</p>

<!-- Problem Statement -->
<div class="card problem-statement">
  <div class="card-title">Tekst zadatka</div>
  <p>Broj četvorocifrenih brojeva deljivih sa 5 čije su sve cifre različite jednak je:</p>
  <div class="given-grid">
    <div class="given-item answer-option" data-option="A">(A) 1008</div>
    <div class="given-item answer-option" data-option="B">(B) 952</div>
    <div class="given-item answer-option" data-option="C">(C) 1200</div>
    <div class="given-item answer-option" data-option="D">(D) 896</div>
    <div class="given-item answer-option" data-option="E">(E) 840</div>
  </div>
</div>

<!-- Plan -->
<div class="card">
  <div class="card-title">Plan rešavanja</div>
  <p class="plan-text">Razdvojićemo problem na dva slučaja prema poslednjoj cifri (0 ili 5), jer deljivost sa 5 zahteva upravo te dve mogućnosti. U svakom slučaju prebrojićemo koliko načina postoji da popunimo preostale tri pozicije sa različitim ciframa.</p>
</div>

<!-- Theory Refresher -->
<div class="card">
  <div class="card-title">Teorijska osnova</div>
  <details>
    <summary>Pravilo deljivosti sa 5</summary>
    <div class="detail-content">
      <p>Broj je <strong>deljiv sa 5</strong> ako i samo ako mu je poslednja cifra \(0\) ili \(5\).</p>
      <p>Primera radi: \(1230\) je deljiv sa 5 (poslednja cifra 0), \(4785\) je deljiv sa 5 (poslednja cifra 5), a \(1237\) nije deljiv sa 5.</p>
    </div>
  </details>
  <details>
    <summary>Princip množenja (pravilo produkta)</summary>
    <div class="detail-content">
      <p>Ako se prvi izbor može napraviti na \(n_1\) načina, drugi na \(n_2\) načina, ..., i \(k\)-ti na \(n_k\) načina, onda se ukupan niz izbora može napraviti na:</p>
      \[n_1 \times n_2 \times \cdots \times n_k \text{ načina}\]
      <p><strong>Uslov:</strong> Broj načina za svaki korak ne sme zavisiti od konkretnih izbora u prethodnim koracima, ali može zavisiti od <em>broja</em> prethodno iskorišćenih mogućnosti.</p>
    </div>
  </details>
  <details>
    <summary>Princip sabiranja (pravilo zbira)</summary>
    <div class="detail-content">
      <p>Ako se zadatak može obaviti na način A <strong>ili</strong> na način B, i ova dva načina se međusobno isključuju, onda je ukupan broj načina:</p>
      \[\text{(broj načina za A)} + \text{(broj načina za B)}\]
    </div>
  </details>
</div>

<!-- Visual Aid: Canvas -->
<div class="card">
  <div class="card-title">Interaktivni prikaz</div>
  <p style="color:#94a3b8; margin-bottom:8px;">Klikni na poziciju cifre da vidiš dostupne izbore za svaki slučaj.</p>
  <div class="canvas-container">
    <canvas id="mainCanvas" width="600" height="400"></canvas>
  </div>
  <div style="display:flex; gap:20px; justify-content:center; margin-top:10px; flex-wrap:wrap;">
    <button id="btnCase0" style="background:#1e3a5f; color:#60a5fa; border:2px solid #60a5fa; border-radius:8px; padding:8px 20px; cursor:pointer; font-size:1rem; font-weight:600;">Slučaj 1: d\u2084 = 0</button>
    <button id="btnCase5" style="background:#1e293b; color:#a78bfa; border:2px solid #a78bfa; border-radius:8px; padding:8px 20px; cursor:pointer; font-size:1rem; font-weight:600;">Slučaj 2: d\u2084 = 5</button>
  </div>
</div>

<!-- Step-by-step Solution -->
<div class="card">
  <div class="card-title">Rešenje korak po korak</div>

  <!-- Step 1 -->
  <div class="step">
    <span class="step-badge">1</span>
    <span class="step-title">Analiziramo uslove</span>
    <div class="step-body">
      <p>Tražimo četvorocifrene brojeve \(\overline{d_1 d_2 d_3 d_4}\) sa sledećim uslovima:</p>
      <ul style="margin:8px 0 8px 20px; color:#cbd5e1;">
        <li><strong>Četvorocifren:</strong> \(d_1 \in \{1, 2, \ldots, 9\}\) (prva cifra nije nula)</li>
        <li><strong>Deljiv sa 5:</strong> \(d_4 \in \{0, 5\}\)</li>
        <li><strong>Sve cifre različite:</strong> \(d_1 \neq d_2 \neq d_3 \neq d_4\) (svake dve cifre su različite)</li>
      </ul>
      <p>Pošto poslednja cifra može biti 0 ili 5, razdvajamo na <strong>dva slučaja</strong>.</p>

      <details class="checkpoint">
        <summary>Zašto razdvajamo na slučajeve?</summary>
        <div class="detail-content">
          <p>Zato što uslov "prva cifra nije nula" različito utiče na prebrojavanje zavisno od toga da li je 0 već zauzeta na poslednjoj poziciji ili nije. Kad je \(d_4 = 0\), nula je "potrošena" i ne može se pojaviti na prvom mestu. Kad je \(d_4 = 5\), nula je slobodna, ali ne sme biti prva cifra.</p>
        </div>
      </details>
    </div>
  </div>

  <!-- Step 2 -->
  <div class="step">
    <span class="step-badge">2</span>
    <span class="step-title">Slučaj 1: poslednja cifra je 0</span>
    <div class="step-body">
      <div class="case-box case-a">
        <div class="case-label">d\u2084 = 0 (fiksirana)</div>
        <div class="digit-slots">
          <div class="digit-slot">
            <div class="slot-label">d\u2081</div>
            <div class="slot-value">9</div>
            <div style="font-size:0.7rem; color:#64748b;">izbora</div>
          </div>
          <div style="align-self:center; font-size:1.5rem; color:#64748b;">\(\times\)</div>
          <div class="digit-slot">
            <div class="slot-label">d\u2082</div>
            <div class="slot-value">8</div>
            <div style="font-size:0.7rem; color:#64748b;">izbora</div>
          </div>
          <div style="align-self:center; font-size:1.5rem; color:#64748b;">\(\times\)</div>
          <div class="digit-slot">
            <div class="slot-label">d\u2083</div>
            <div class="slot-value">7</div>
            <div style="font-size:0.7rem; color:#64748b;">izbora</div>
          </div>
          <div style="align-self:center; font-size:1.5rem; color:#64748b;">\(\times\)</div>
          <div class="digit-slot fixed">
            <div class="slot-label">d\u2084</div>
            <div class="slot-value">0</div>
            <div style="font-size:0.7rem; color:#4ade80;">fiksno</div>
          </div>
        </div>

        <p style="margin-top:10px;"><strong>\(d_1\):</strong> Može biti bilo koja cifra od 1 do 9 (ne sme biti 0, jer je 0 na poslednjoj poziciji i jer bi broj bio trocifreni). To je <strong>9 izbora</strong>.</p>
        <p><strong>\(d_2\):</strong> Može biti bilo koja cifra od 0 do 9, osim \(d_1\) i 0. Dakle, od 10 cifara oduzimamo 2 već iskorišćene: <strong>8 izbora</strong>.</p>
        <p><strong>\(d_3\):</strong> Može biti bilo koja cifra od 0 do 9, osim \(d_1\), \(d_2\) i 0. Od 10 cifara oduzimamo 3: <strong>7 izbora</strong>.</p>

        <div class="multiplication">
          \(9 \times 8 \times 7 = \) <span class="result-highlight">504</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Step 3 -->
  <div class="step">
    <span class="step-badge">3</span>
    <span class="step-title">Slučaj 2: poslednja cifra je 5</span>
    <div class="step-body">
      <div class="case-box case-b">
        <div class="case-label">d\u2084 = 5 (fiksirana)</div>
        <div class="digit-slots">
          <div class="digit-slot">
            <div class="slot-label">d\u2081</div>
            <div class="slot-value">8</div>
            <div style="font-size:0.7rem; color:#64748b;">izbora</div>
          </div>
          <div style="align-self:center; font-size:1.5rem; color:#64748b;">\(\times\)</div>
          <div class="digit-slot">
            <div class="slot-label">d\u2082</div>
            <div class="slot-value">8</div>
            <div style="font-size:0.7rem; color:#64748b;">izbora</div>
          </div>
          <div style="align-self:center; font-size:1.5rem; color:#64748b;">\(\times\)</div>
          <div class="digit-slot">
            <div class="slot-label">d\u2083</div>
            <div class="slot-value">7</div>
            <div style="font-size:0.7rem; color:#64748b;">izbora</div>
          </div>
          <div style="align-self:center; font-size:1.5rem; color:#64748b;">\(\times\)</div>
          <div class="digit-slot fixed">
            <div class="slot-label">d\u2084</div>
            <div class="slot-value">5</div>
            <div style="font-size:0.7rem; color:#4ade80;">fiksno</div>
          </div>
        </div>

        <p style="margin-top:10px;"><strong>\(d_1\):</strong> Može biti bilo koja cifra od 1 do 9, <em>osim</em> 5 (jer je 5 već na poslednjoj poziciji). To je \(\{1,2,3,4,6,7,8,9\}\) = <strong>8 izbora</strong>.</p>
        <p><strong>\(d_2\):</strong> Može biti bilo koja cifra od 0 do 9, osim \(d_1\) i 5. Od 10 cifara oduzimamo 2: <strong>8 izbora</strong>.</p>
        <p><strong>\(d_3\):</strong> Može biti bilo koja cifra od 0 do 9, osim \(d_1\), \(d_2\) i 5. Od 10 cifara oduzimamo 3: <strong>7 izbora</strong>.</p>

        <div class="multiplication">
          \(8 \times 8 \times 7 = \) <span class="result-highlight" style="border-color:#a78bfa; color:#a78bfa;">448</span>
        </div>
      </div>

      <details class="checkpoint">
        <summary>Zašto d\u2082 ima 8 izbora, a ne 7?</summary>
        <div class="detail-content">
          <p>U ovom slučaju, \(d_1 \neq 0\) i \(d_1 \neq 5\). Cifra 0 je slobodna i može se pojaviti na poziciji \(d_2\). Zabranjene cifre za \(d_2\) su samo \(d_1\) i 5 — to su tačno 2 cifre, pa od 10 ukupnih cifara ostaje \(10 - 2 = 8\).</p>
        </div>
      </details>
    </div>
  </div>

  <!-- Step 4 -->
  <div class="step">
    <span class="step-badge">4</span>
    <span class="step-title">Sabiramo slučajeve</span>
    <div class="step-body">
      <p>Slučajevi se međusobno isključuju (broj ne može istovremeno imati poslednju cifru 0 i 5), pa primenjujemo <strong>princip sabiranja</strong>:</p>
      <div class="sum-row">
        <span class="sum-part-a">504</span>
        <span style="color:#64748b;">+</span>
        <span class="sum-part-b">448</span>
        <span style="color:#64748b;">=</span>
        <span class="sum-result">952</span>
      </div>
    </div>
  </div>
</div>

<!-- Key Insight -->
<div class="key-insight">
  <div class="card-title">Ključni uvid</div>
  <p>Suština ovog zadatka leži u tome što pozicija cifre 0 igra posebnu ulogu. Kada je \(d_4 = 0\), nula je "bezbedno sklonjena" na poslednju poziciju i ne utiče na izbor prve cifre. Ali kada je \(d_4 = 5\), nula je slobodna i <em>mogla bi</em> doći na prvo mesto — to moramo sprečiti. Upravo zbog toga se broj izbora za \(d_1\) razlikuje u dva slučaja: <span style="color:#60a5fa;">9</span> naspram <span style="color:#a78bfa;">8</span>.</p>
</div>

<!-- Final Answer -->
<div class="card final-answer">
  <div class="card-title">Konačan odgovor</div>
  <div class="answer-display">\(952\)</div>
  <div class="options-final">
    <div class="option-box">(A) 1008</div>
    <div class="option-box correct">(B) 952</div>
    <div class="option-box">(C) 1200</div>
    <div class="option-box">(D) 896</div>
    <div class="option-box">(E) 840</div>
  </div>
  <p style="text-align:center; color:#4ade80; font-weight:600;">Tačan odgovor je (B)</p>
  <div class="verification">
    <strong>Verifikacija:</strong> Alternativni pristup — ukupan broj četvorocifrenih brojeva sa različitim ciframa deljivih sa 5 možemo proveriti računajući varijacije. Za \(d_4 = 0\): to je \(V_9^3 = 9 \cdot 8 \cdot 7 = 504\). Za \(d_4 = 5\): biramo \(d_1\) od 8 cifara, \(d_2\) od preostalih 8, \(d_3\) od preostalih 7: \(8 \cdot 8 \cdot 7 = 448\). Ukupno: \(504 + 448 = 952\). Potvrđeno!
  </div>
</div>

<!-- Common Pitfalls -->
<div class="card">
  <div class="card-title">Česte greške</div>
  <ul class="pitfall-list">
    <li>Ne razdvojiti slučajeve za \(d_4 = 0\) i \(d_4 = 5\) — ova dva slučaja imaju različit broj izbora za prvu cifru, pa se ne mogu tretirati isto.</li>
    <li>Zaboraviti da prva cifra ne sme biti 0 — to bi dao trocifreni (ili manji) broj.</li>
    <li>Greškom računati \(d_2\) u drugom slučaju kao 7 umesto 8 — cifra 0 jeste dozvoljena za \(d_2\), zabranjene su samo \(d_1\) i 5.</li>
    <li>Koristiti formulu za permutacije bez obzira na ograničenja — \(P(10,4)/\text{nešto}\) bez razdvajanja slučajeva daje pogrešan rezultat.</li>
  </ul>
</div>

<!-- Optional Challenge -->
<div class="card">
  <div class="card-title">Dodatni izazov</div>
  <details>
    <summary>Koliko ima petocifrenih brojeva deljivih sa 5 sa svim različitim ciframa?</summary>
    <div class="detail-content">
      <p><strong>Savet:</strong> Ponovo razdvoj na slučajeve prema poslednjoj cifri.</p>
      <p><strong>Slučaj \(d_5 = 0\):</strong> \(d_1\): 9 izbora, \(d_2\): 8, \(d_3\): 7, \(d_4\): 6. Ukupno: \(9 \cdot 8 \cdot 7 \cdot 6 = 3024\).</p>
      <p><strong>Slučaj \(d_5 = 5\):</strong> \(d_1\): 8 izbora (bez 0 i 5), \(d_2\): 8, \(d_3\): 7, \(d_4\): 6. Ukupno: \(8 \cdot 8 \cdot 7 \cdot 6 = 2688\).</p>
      <p><strong>Zbir:</strong> \(3024 + 2688 = 5712\).</p>
    </div>
  </details>
</div>

<script>
(() => {
  const canvas = document.getElementById('mainCanvas');
  const ctx = canvas.getContext('2d');
  const btnCase0 = document.getElementById('btnCase0');
  const btnCase5 = document.getElementById('btnCase5');

  let currentCase = 0; // 0 = last digit 0, 5 = last digit 5
  let selectedSlot = -1; // -1 = none, 0-3 = digit position
  let animProgress = 0;
  let animTarget = 0;
  let animFrame = null;

  const slotPositions = [
    { x: 80, y: 100, w: 100, h: 120 },
    { x: 200, y: 100, w: 100, h: 120 },
    { x: 320, y: 100, w: 100, h: 120 },
    { x: 440, y: 100, w: 100, h: 120 }
  ];

  const slotLabels = ['d\u2081', 'd\u2082', 'd\u2083', 'd\u2084'];

  function getSlotInfo(caseVal, slotIdx) {
    if (caseVal === 0) {
      if (slotIdx === 3) return { choices: '0', count: 'fiksno', color: '#4ade80', available: ['0'], note: 'Poslednja cifra je 0' };
      if (slotIdx === 0) return { choices: '1\u20139', count: '9 izbora', color: '#60a5fa', available: ['1','2','3','4','5','6','7','8','9'], note: 'Bilo koja cifra od 1 do 9\n(0 je zauzeta na poslednjoj poziciji)' };
      if (slotIdx === 1) return { choices: '0\u20139 \\ {d\u2081, 0}', count: '8 izbora', color: '#60a5fa', available: ['?','?','?','?','?','?','?','?'], note: 'Preostalo 8 cifara\n(oduzimamo d\u2081 i 0)' };
      if (slotIdx === 2) return { choices: '0\u20139 \\ {d\u2081, d\u2082, 0}', count: '7 izbora', color: '#60a5fa', available: ['?','?','?','?','?','?','?'], note: 'Preostalo 7 cifara\n(oduzimamo d\u2081, d\u2082 i 0)' };
    } else {
      if (slotIdx === 3) return { choices: '5', count: 'fiksno', color: '#4ade80', available: ['5'], note: 'Poslednja cifra je 5' };
      if (slotIdx === 0) return { choices: '1\u20139 \\ {5}', count: '8 izbora', color: '#a78bfa', available: ['1','2','3','4','6','7','8','9'], note: 'Bilo koja cifra od 1 do 9, osim 5\n(5 je zauzeta, 0 nije dozvoljena za d\u2081)' };
      if (slotIdx === 1) return { choices: '0\u20139 \\ {d\u2081, 5}', count: '8 izbora', color: '#a78bfa', available: ['?','?','?','?','?','?','?','?'], note: 'Preostalo 8 cifara\n(oduzimamo d\u2081 i 5; 0 je dozvoljena!)' };
      if (slotIdx === 2) return { choices: '0\u20139 \\ {d\u2081, d\u2082, 5}', count: '7 izbora', color: '#a78bfa', available: ['?','?','?','?','?','?','?'], note: 'Preostalo 7 cifara\n(oduzimamo d\u2081, d\u2082 i 5)' };
    }
  }

  function draw() {
    const dpr = window.devicePixelRatio || 1;
    const w = canvas.width;
    const h = canvas.height;

    ctx.clearRect(0, 0, w, h);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, w, h);

    // Title
    ctx.fillStyle = currentCase === 0 ? '#60a5fa' : '#a78bfa';
    ctx.font = 'bold 18px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText(currentCase === 0 ? 'Slučaj 1: poslednja cifra = 0' : 'Slučaj 2: poslednja cifra = 5', w / 2, 40);

    // Draw multiplication signs
    ctx.fillStyle = '#64748b';
    ctx.font = 'bold 24px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    for (let i = 0; i < 3; i++) {
      const x1 = slotPositions[i].x + slotPositions[i].w;
      const x2 = slotPositions[i + 1].x;
      ctx.fillText('\u00D7', (x1 + x2) / 2, slotPositions[i].y + slotPositions[i].h / 2 + 6);
    }

    // Draw slots
    for (let i = 0; i < 4; i++) {
      const sp = slotPositions[i];
      const info = getSlotInfo(currentCase, i);
      const isSelected = selectedSlot === i;
      const isFixed = i === 3;

      // Slot background
      ctx.fillStyle = isSelected ? (isFixed ? 'rgba(74,222,128,0.12)' : 'rgba(96,165,250,0.12)') : 'rgba(15,23,42,0.8)';
      ctx.strokeStyle = isSelected ? info.color : (isFixed ? '#4ade80' : '#334155');
      ctx.lineWidth = isSelected ? 3 : 2;

      ctx.beginPath();
      ctx.roundRect(sp.x, sp.y, sp.w, sp.h, 10);
      ctx.fill();
      ctx.stroke();

      // Slot label
      ctx.fillStyle = '#64748b';
      ctx.font = '13px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(slotLabels[i], sp.x + sp.w / 2, sp.y + 22);

      // Count
      ctx.fillStyle = info.color;
      ctx.font = 'bold 28px Segoe UI, system-ui, sans-serif';
      ctx.fillText(isFixed ? (currentCase === 0 ? '0' : '5') : info.count.split(' ')[0], sp.x + sp.w / 2, sp.y + 62);

      // Sub-label
      ctx.fillStyle = isFixed ? '#4ade80' : '#94a3b8';
      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      ctx.fillText(info.count, sp.x + sp.w / 2, sp.y + 84);

      // Choices preview
      if (isFixed) {
        ctx.fillStyle = '#4ade80';
        ctx.font = '11px Segoe UI, system-ui, sans-serif';
        ctx.fillText('fiksirana', sp.x + sp.w / 2, sp.y + 108);
      } else {
        ctx.fillStyle = '#64748b';
        ctx.font = '10px Segoe UI, system-ui, sans-serif';
        ctx.fillText(info.choices, sp.x + sp.w / 2, sp.y + 108);
      }
    }

    // Result row
    const counts = [];
    for (let i = 0; i < 3; i++) {
      counts.push(parseInt(getSlotInfo(currentCase, i).count));
    }
    const product = counts.reduce(function(a, b) { return a * b; }, 1);

    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 20px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    const resultY = 268;
    const resultText = counts.join(' \u00D7 ') + ' = ' + product;
    ctx.fillText(resultText, w / 2, resultY);

    // Info panel for selected slot
    if (selectedSlot >= 0) {
      const info = getSlotInfo(currentCase, selectedSlot);
      const panelY = 300;
      const panelH = 80;

      ctx.fillStyle = 'rgba(30,41,59,0.95)';
      ctx.strokeStyle = info.color;
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.roundRect(40, panelY, w - 80, panelH, 10);
      ctx.fill();
      ctx.stroke();

      ctx.fillStyle = info.color;
      ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(slotLabels[selectedSlot] + ': ' + info.count, w / 2, panelY + 24);

      ctx.fillStyle = '#cbd5e1';
      ctx.font = '13px Segoe UI, system-ui, sans-serif';
      var noteLines = info.note.split('\n');
      for (var li = 0; li < noteLines.length; li++) {
        ctx.fillText(noteLines[li], w / 2, panelY + 46 + li * 18);
      }
    }
  }

  function setCase(c) {
    currentCase = c;
    selectedSlot = -1;
    if (c === 0) {
      btnCase0.style.background = '#1e3a5f';
      btnCase5.style.background = '#1e293b';
    } else {
      btnCase0.style.background = '#1e293b';
      btnCase5.style.background = '#2d1f5e';
    }
    draw();
  }

  btnCase0.addEventListener('click', function() { setCase(0); });
  btnCase5.addEventListener('click', function() { setCase(5); });

  canvas.addEventListener('click', function(e) {
    var rect = canvas.getBoundingClientRect();
    var mx = (e.clientX - rect.left) * (canvas.width / rect.width);
    var my = (e.clientY - rect.top) * (canvas.height / rect.height);

    selectedSlot = -1;
    for (var i = 0; i < 4; i++) {
      var sp = slotPositions[i];
      if (mx >= sp.x && mx <= sp.x + sp.w && my >= sp.y && my <= sp.y + sp.h) {
        selectedSlot = i;
        break;
      }
    }
    draw();
  });

  canvas.addEventListener('mousemove', function(e) {
    var rect = canvas.getBoundingClientRect();
    var mx = (e.clientX - rect.left) * (canvas.width / rect.width);
    var my = (e.clientY - rect.top) * (canvas.height / rect.height);

    var hovering = false;
    for (var i = 0; i < 4; i++) {
      var sp = slotPositions[i];
      if (mx >= sp.x && mx <= sp.x + sp.w && my >= sp.y && my <= sp.y + sp.h) {
        hovering = true;
        break;
      }
    }
    canvas.style.cursor = hovering ? 'pointer' : 'default';
  });

  // roundRect polyfill
  if (!ctx.roundRect) {
    ctx.roundRect = function(x, y, w, h, r) {
      if (typeof r === 'number') r = [r, r, r, r];
      ctx.beginPath();
      ctx.moveTo(x + r[0], y);
      ctx.lineTo(x + w - r[1], y);
      ctx.quadraticCurveTo(x + w, y, x + w, y + r[1]);
      ctx.lineTo(x + w, y + h - r[2]);
      ctx.quadraticCurveTo(x + w, y + h, x + w - r[2], y + h);
      ctx.lineTo(x + r[3], y + h);
      ctx.quadraticCurveTo(x, y + h, x, y + h - r[3]);
      ctx.lineTo(x, y + r[0]);
      ctx.quadraticCurveTo(x, y, x + r[0], y);
      ctx.closePath();
    };
  }

  draw();
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{"title":"Četvorocifreni brojevi deljivi sa 5 sa različitim ciframa","subject":"math","unit":"combinatorics","topic_tags":["kombinatorika","prebrojavanje","princip množenja","deljivost sa 5","cifre"]}
BRAINSPARK_META-->