<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Maksimalna zapremina pravilne sestostrane piramide upisane u loptu</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
Problem: Maksimalna zapremina V pravilne sestostrane piramide upisane u loptu poluprecnika R iznosi:
(A) 16√3 R³/27
(B) 45√3 R³/128
(C) 40√3 R³/27
(D) 32√3 R³/81
(E) 32√3 R³/9

Step 1: Set up coordinate system
Place center of sphere at origin O. Sphere has radius R.
Let the apex of the pyramid be at the "north pole" of the sphere: point (0, 0, R).
The base is a regular hexagon in a horizontal plane at height z = R - h from center,
where h is the height of the pyramid.

Step 2: Find side length of hexagonal base
For a regular hexagon, the circumradius (distance from center to vertex) equals the side length a.
All base vertices lie on the sphere, at distance a from the vertical axis and at height z = R - h.
Sphere condition: a² + (R - h)² = R²
=> a² = R² - (R - h)² = R² - R² + 2Rh - h² = 2Rh - h²

Constraint: a² > 0 => 2Rh - h² > 0 => h(2R - h) > 0 => 0 < h < 2R

Step 3: Volume of regular hexagonal pyramid
Area of regular hexagon with side a: S = (3√3/2)a²
Volume: V = (1/3) · S · h = (1/3) · (3√3/2) · a² · h = (√3/2) · a² · h

Step 4: Substitute a² = 2Rh - h²
V(h) = (√3/2)(2Rh - h²) · h = (√3/2)(2Rh² - h³)

Step 5: Find maximum — take derivative and set to zero
dV/dh = (√3/2)(4Rh - 3h²) = (√3/2) · h · (4R - 3h) = 0
Since h > 0: 4R - 3h = 0 => h = 4R/3

Step 6: Verify h = 4R/3 < 2R (constraint satisfied since 4/3 < 2)
Second derivative test:
d²V/dh² = (√3/2)(4R - 6h) = (√3/2)(4R - 8R) = (√3/2)(-4R) < 0
So h = 4R/3 is indeed a maximum.

Step 7: Compute a² at optimal h
a² = 2R · (4R/3) - (4R/3)² = 8R²/3 - 16R²/9 = (24R² - 16R²)/9 = 8R²/9

Step 8: Compute maximum volume
V = (√3/2) · (8R²/9) · (4R/3) = (√3/2) · (32R³/27) = 16√3 R³/27

Answer: (A) 16√3 R³/27

Verification:
- a² = 8R²/9, so a = 2R√2/3 ≈ 0.943R. This is reasonable.
- h = 4R/3 ≈ 1.333R. The apex is at R, base center at R - h = -R/3.
  Base vertices at distance a from axis at height -R/3.
  Check: a² + (R-h)² = 8R²/9 + R²/9 = 9R²/9 = R². Correct!
- Volume = 16√3/27 · R³ ≈ 1.027R³
</script>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 700;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.card-title {
  font-size: 1.3rem;
  font-weight: 600;
  color: #60a5fa;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.4rem;
}

.problem-statement {
  border-left: 4px solid #a78bfa;
  font-size: 1.1rem;
}

.problem-statement .problem-text {
  margin-bottom: 20px;
}

.given-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 10px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 10px;
  padding: 10px 16px;
  text-align: center;
  font-size: 1.05rem;
}

.answer-option {
  cursor: default;
  transition: transform 0.15s;
}

.math-box {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 14px 0;
  overflow-x: auto;
}

.step-container {
  margin-bottom: 24px;
  padding: 16px;
  border-radius: 12px;
  border-left: 3px solid transparent;
  transition: border-color 0.2s, background 0.2s;
  cursor: pointer;
}

.step-container:hover {
  border-left-color: #4ade80;
  background: rgba(74, 222, 128, 0.04);
}

.step-container.active {
  border-left-color: #4ade80;
  background: rgba(74, 222, 128, 0.06);
}

.step-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  color: #fff;
  font-weight: 700;
  font-size: 0.95rem;
  margin-right: 10px;
  flex-shrink: 0;
}

.step-title {
  font-size: 1.15rem;
  font-weight: 600;
  color: #e2e8f0;
  display: flex;
  align-items: center;
  margin-bottom: 12px;
}

.step-explanation {
  color: #cbd5e1;
  margin-bottom: 12px;
}

details {
  background: rgba(167, 139, 250, 0.08);
  border: 1px solid rgba(167, 139, 250, 0.2);
  border-radius: 10px;
  padding: 12px 16px;
  margin: 12px 0;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  user-select: none;
}

details summary:hover {
  color: #c4b5fd;
}

details[open] summary {
  margin-bottom: 10px;
}

.insight-box {
  background: rgba(96, 165, 250, 0.1);
  border: 1px solid rgba(96, 165, 250, 0.3);
  border-left: 4px solid #60a5fa;
  border-radius: 12px;
  padding: 20px 24px;
  margin: 24px 0;
}

.insight-box .insight-title {
  color: #60a5fa;
  font-weight: 700;
  font-size: 1.15rem;
  margin-bottom: 8px;
}

.final-answer-card {
  background: rgba(52, 211, 153, 0.08);
  border: 2px solid rgba(52, 211, 153, 0.3);
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin: 28px 0;
}

.final-answer-card .label {
  color: #34d399;
  font-size: 1.1rem;
  font-weight: 600;
  margin-bottom: 10px;
}

.final-answer-card .answer {
  font-size: 2.2rem;
  font-weight: 700;
  color: #4ade80;
  margin-bottom: 16px;
}

.final-options {
  display: flex;
  justify-content: center;
  gap: 12px;
  flex-wrap: wrap;
  margin-top: 16px;
}

.final-option {
  padding: 8px 20px;
  border-radius: 10px;
  font-size: 1.05rem;
  border: 1px solid #334155;
  background: #1e293b;
  color: #94a3b8;
}

.final-option.correct {
  background: rgba(52, 211, 153, 0.15);
  border-color: #34d399;
  color: #4ade80;
  font-weight: 700;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 14px;
}

.pitfall-item {
  background: rgba(244, 114, 182, 0.08);
  border-left: 3px solid #f472b6;
  border-radius: 8px;
  padding: 12px 16px;
  margin: 10px 0;
  color: #fbb6ce;
}

.pitfall-title {
  color: #f472b6;
  font-weight: 600;
  margin-bottom: 4px;
}

canvas {
  width: 100%;
  border-radius: 12px;
  touch-action: none;
  display: block;
  margin: 0 auto;
}

.plan-text {
  color: #94a3b8;
  font-size: 1.05rem;
  line-height: 1.8;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.factor-color {
  color: #60a5fa;
}

.challenge-box {
  background: rgba(167, 139, 250, 0.08);
  border: 1px solid rgba(167, 139, 250, 0.25);
  border-left: 4px solid #a78bfa;
  border-radius: 12px;
  padding: 20px 24px;
  margin: 24px 0;
}

.challenge-box .challenge-title {
  color: #a78bfa;
  font-weight: 700;
  font-size: 1.15rem;
  margin-bottom: 8px;
}

@media (max-width: 700px) {
  h1 { font-size: 1.5rem; }
  .card { padding: 16px; }
  .container { padding: 10px; }
  .given-grid { grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); }
  .final-answer-card .answer { font-size: 1.7rem; }
  .step-container { padding: 10px; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Maksimalna zapremina pravilne sestostrane piramide upisane u loptu</h1>
  <p class="subtitle">Optimizacija zapremine &mdash; geometrija tela i diferencijalni racun</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <div class="card-title"><span class="icon">&#128221;</span> Postavka zadatka</div>
    <div class="problem-text">
      Maksimalna zapremina \(V\) pravilne sestostrane piramide upisane u loptu poluprecnika \(R\) iznosi:
    </div>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">(A) \(\dfrac{16\sqrt{3}\,R^3}{27}\)</div>
      <div class="given-item answer-option" data-option="B">(B) \(\dfrac{45\sqrt{3}\,R^3}{128}\)</div>
      <div class="given-item answer-option" data-option="C">(C) \(\dfrac{40\sqrt{3}\,R^3}{27}\)</div>
      <div class="given-item answer-option" data-option="D">(D) \(\dfrac{32\sqrt{3}\,R^3}{81}\)</div>
      <div class="given-item answer-option" data-option="E">(E) \(\dfrac{32\sqrt{3}\,R^3}{9}\)</div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127919;</span> Plan resavanja</div>
    <p class="plan-text">
      1. Postavicemo koordinatni sistem sa centrom lopte u koordinatnom pocetku.<br>
      2. Izrazicemo stranicu osnove \(a\) preko visine piramide \(h\) i poluprecnika \(R\).<br>
      3. Zapisacemo zapreminu \(V\) kao funkciju jedne promenljive \(h\).<br>
      4. Nadjcemo maksimum primenom izvoda &mdash; klasican optimizacioni problem.<br>
      5. Izracunacemo maksimalnu zapreminu i uporedicemo sa ponudjenim odgovorima.
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>&#128208; Kljucne formule i teoreme</summary>
      <ul style="margin-top: 12px; padding-left: 20px; color: #cbd5e1;">
        <li style="margin-bottom: 10px;"><strong>Zapremina piramide:</strong>
          <div class="math-box">\[ V = \frac{1}{3} \cdot B \cdot h \]</div>
          gde je \(B\) povrsina osnove, a \(h\) visina piramide.
        </li>
        <li style="margin-bottom: 10px;"><strong>Povrsina pravilnog sestostranog:</strong>
          <div class="math-box">\[ B = \frac{3\sqrt{3}}{2}\,a^2 \]</div>
          gde je \(a\) stranica sestostranog (jednaka poluprecniku opisanog kruga osnove).
        </li>
        <li style="margin-bottom: 10px;"><strong>Kljucno svojstvo pravilnog sestostranog:</strong>
          Poluprecnik opisanog kruga pravilnog sestostranog jednak je stranici: \(r = a\).
        </li>
        <li style="margin-bottom: 10px;"><strong>Uslov upisanosti u loptu:</strong>
          Sva temena piramide (i vrh i svih 6 temena osnove) leze na lopti poluprecnika \(R\).
        </li>
        <li style="margin-bottom: 10px;"><strong>Potreban uslov za ekstremum:</strong>
          <div class="math-box">\[ \frac{dV}{dh} = 0 \]</div>
        </li>
      </ul>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127912;</span> Vizuelni prikaz &mdash; presek piramide i lopte</div>
    <canvas id="solutionCanvas" width="900" height="620"></canvas>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128736;</span> Resenje korak po korak</div>

    <!-- Step 1 -->
    <div class="step-container" data-step="1">
      <div class="step-title"><span class="step-badge">1</span> Postavljanje koordinatnog sistema</div>
      <p class="step-explanation">
        Stavimo centar lopte \(O\) u koordinatni pocetak. Vrh piramide (apex) postavljamo na "severni pol" lopte, u tacku \((0,\,0,\,R)\). Osnova piramide je pravilan sestostrani u horizontalnoj ravni na visini \(z = R - h\), gde je \(h\) visina piramide.
      </p>
      <div class="math-box">
        \[ \text{Vrh piramide: } (0,\,0,\,R) \qquad \text{Ravan osnove: } z = R - h \]
      </div>
      <p class="step-explanation">
        Prava osa piramide se poklapa sa \(z\)-osom, sto je moguce jer je piramida pravilna.
      </p>
    </div>

    <!-- Step 2 -->
    <div class="step-container" data-step="2">
      <div class="step-title"><span class="step-badge">2</span> Veza izmedju \(a\), \(h\) i \(R\)</div>
      <p class="step-explanation">
        Svako teme osnove je na rastojanju \(a\) od ose piramide (jer je poluprecnik opisanog kruga pravilnog sestostranog jednak stranici \(a\)), i na visini \(z = R - h\). Posto to teme lezi na lopti:
      </p>
      <div class="math-box">
        \[ a^2 + (R - h)^2 = R^2 \]
      </div>
      <p class="step-explanation">
        Resavamo po \(a^2\):
      </p>
      <div class="math-box">
        \[ a^2 = R^2 - (R-h)^2 = R^2 - R^2 + 2Rh - h^2 = 2Rh - h^2 \]
      </div>
      <p class="step-explanation">
        Uslov \(a^2 > 0\) daje \(h(2R - h) > 0\), tj. \(0 < h < 2R\).
      </p>
      <details>
        <summary>Proveri se: Zasto je poluprecnik opisanog kruga jednak stranici?</summary>
        <p style="color: #cbd5e1; margin-top: 8px;">
          Pravilan sestostrani se moze podeliti na 6 jednakostranicnih trouglova. Centar sestostranog je na jednakom rastojanju od svakog temena, i to rastojanje je tacno jednako stranici sestostranog. Dakle, \(r_{\text{opisani}} = a\). Ovo je specificno svojstvo pravilnog sestostranog &mdash; za ostale pravilne poligone ova jednakost ne vazi.
        </p>
      </details>
    </div>

    <!-- Step 3 -->
    <div class="step-container" data-step="3">
      <div class="step-title"><span class="step-badge">3</span> Zapremina kao funkcija od \(h\)</div>
      <p class="step-explanation">
        Povrsina pravilnog sestostranog sa stranicom \(a\):
      </p>
      <div class="math-box">
        \[ B = \frac{3\sqrt{3}}{2}\,a^2 \]
      </div>
      <p class="step-explanation">
        Zapremina piramide:
      </p>
      <div class="math-box">
        \[ V = \frac{1}{3}\,B\,h = \frac{1}{3} \cdot \frac{3\sqrt{3}}{2}\,a^2 \cdot h = \frac{\sqrt{3}}{2}\,a^2\,h \]
      </div>
      <p class="step-explanation">
        Sada uvrstimo \(a^2 = 2Rh - h^2\):
      </p>
      <div class="math-box">
        \[ V(h) = \frac{\sqrt{3}}{2}(2Rh - h^2) \cdot h = \frac{\sqrt{3}}{2}\left(2Rh^2 - h^3\right) \]
      </div>
      <p class="step-explanation">
        Dobili smo zapreminu kao funkciju jedne promenljive \(h\), za \(h \in (0,\,2R)\).
      </p>
    </div>

    <!-- Step 4 -->
    <div class="step-container" data-step="4">
      <div class="step-title"><span class="step-badge">4</span> Nalazenje maksimuma &mdash; prvi izvod</div>
      <p class="step-explanation">
        Diferenciramo \(V(h)\) po \(h\):
      </p>
      <div class="math-box">
        \[ \frac{dV}{dh} = \frac{\sqrt{3}}{2}\left(4Rh - 3h^2\right) = \frac{\sqrt{3}}{2}\,h\left(4R - 3h\right) \]
      </div>
      <p class="step-explanation">
        Postavljamo \(\dfrac{dV}{dh} = 0\):
      </p>
      <div class="math-box">
        \[ \frac{\sqrt{3}}{2}\,h\,(4R - 3h) = 0 \]
      </div>
      <p class="step-explanation">
        Resenja su \(h = 0\) (trivijalno, nema piramide) i:
      </p>
      <div class="math-box">
        \[ 4R - 3h = 0 \quad \Longrightarrow \quad \boxed{h = \frac{4R}{3}} \]
      </div>
      <p class="step-explanation">
        Proveravamo: \(\dfrac{4R}{3} < 2R\), dakle vrednost je u dozvoljenom opsegu.
      </p>
      <details>
        <summary>Proveri se: Potvrdimo da je ovo zaista maksimum</summary>
        <p style="color: #cbd5e1; margin-top: 8px;">
          Drugi izvod: \(\dfrac{d^2V}{dh^2} = \dfrac{\sqrt{3}}{2}(4R - 6h)\). Za \(h = \dfrac{4R}{3}\):
          \[\frac{d^2V}{dh^2} = \frac{\sqrt{3}}{2}\left(4R - 6 \cdot \frac{4R}{3}\right) = \frac{\sqrt{3}}{2}(4R - 8R) = \frac{\sqrt{3}}{2}(-4R) < 0\]
          Posto je drugi izvod negativan, to je zaista <strong>maksimum</strong>.
        </p>
      </details>
    </div>

    <!-- Step 5 -->
    <div class="step-container" data-step="5">
      <div class="step-title"><span class="step-badge">5</span> Racunanje stranice osnove pri optimalnoj visini</div>
      <p class="step-explanation">
        Za \(h = \dfrac{4R}{3}\) racunamo \(a^2\):
      </p>
      <div class="math-box">
        \[ a^2 = 2R \cdot \frac{4R}{3} - \left(\frac{4R}{3}\right)^2 = \frac{8R^2}{3} - \frac{16R^2}{9} = \frac{24R^2 - 16R^2}{9} = \frac{8R^2}{9} \]
      </div>
      <p class="step-explanation">
        Dakle, stranica osnove je \(a = \dfrac{2R\sqrt{2}}{3}\).
      </p>
    </div>

    <!-- Step 6 -->
    <div class="step-container" data-step="6">
      <div class="step-title"><span class="step-badge">6</span> Racunanje maksimalne zapremine</div>
      <p class="step-explanation">
        Uvrstimo u formulu za zapreminu:
      </p>
      <div class="math-box">
        \[ V_{\max} = \frac{\sqrt{3}}{2} \cdot a^2 \cdot h = \frac{\sqrt{3}}{2} \cdot \frac{8R^2}{9} \cdot \frac{4R}{3} \]
      </div>
      <p class="step-explanation">
        Mnozimo korak po korak:
      </p>
      <div class="math-box">
        \[ V_{\max} = \frac{\sqrt{3}}{2} \cdot \frac{32R^3}{27} = \frac{32\sqrt{3}\,R^3}{54} = \frac{16\sqrt{3}\,R^3}{27} \]
      </div>
    </div>

    <!-- Step 7 -->
    <div class="step-container" data-step="7">
      <div class="step-title"><span class="step-badge">7</span> Verifikacija rezultata</div>
      <p class="step-explanation">
        Proverimo da temena osnove zaista leze na lopti. Za \(h = \dfrac{4R}{3}\) i \(a^2 = \dfrac{8R^2}{9}\):
      </p>
      <div class="math-box">
        \[ a^2 + (R - h)^2 = \frac{8R^2}{9} + \left(R - \frac{4R}{3}\right)^2 = \frac{8R^2}{9} + \left(-\frac{R}{3}\right)^2 = \frac{8R^2}{9} + \frac{R^2}{9} = \frac{9R^2}{9} = R^2 \;\; \checkmark \]
      </div>
      <p class="step-explanation">
        Numericka provera za \(R = 3\): \(h = 4\), \(a^2 = 8\), \(V = \dfrac{\sqrt{3}}{2} \cdot 8 \cdot 4 = 16\sqrt{3} \approx 27{,}71\).
        <br>Iz formule: \(\dfrac{16\sqrt{3} \cdot 27}{27} = 16\sqrt{3} \approx 27{,}71\). Slaze se!
      </p>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <div class="insight-title">Kljucni uvid</div>
    <p>
      Sustina zadatka je u svodjenju problema na optimizaciju funkcije jedne promenljive. Kljucni korak je uocavanje da je poluprecnik opisanog kruga pravilnog sestostranog <span class="highlight">jednak stranici</span>, sto direktno daje vezu \(a^2 = 2Rh - h^2\) iz jednacine lopte. Zapremina se tada izrazava samo preko \(h\) i standardno se optimizuje izvodom. Optimalna visina \(h = \frac{4R}{3}\) daje centar osnove ispod centra lopte (na visini \(-\frac{R}{3}\)), sto je geometrijski intuitivno &mdash; piramida je "dublja" nego sto bi se mozda ocekivalo.
    </p>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-card">
    <div class="label">Konacan odgovor</div>
    <div class="answer">\(\dfrac{16\sqrt{3}\,R^3}{27}\)</div>
    <div class="final-options">
      <div class="final-option correct" data-option="A">(A) \(\dfrac{16\sqrt{3}\,R^3}{27}\)</div>
      <div class="final-option" data-option="B">(B) \(\dfrac{45\sqrt{3}\,R^3}{128}\)</div>
      <div class="final-option" data-option="C">(C) \(\dfrac{40\sqrt{3}\,R^3}{27}\)</div>
      <div class="final-option" data-option="D">(D) \(\dfrac{32\sqrt{3}\,R^3}{81}\)</div>
      <div class="final-option" data-option="E">(E) \(\dfrac{32\sqrt{3}\,R^3}{9}\)</div>
    </div>
    <p class="verification-note">
      Verifikacija: za \(R = 3\), \(V_{\max} = 16\sqrt{3} \approx 27{,}71\), uz \(h = 4\) i \(a = 2\sqrt{2} \approx 2{,}83\) &#10004;
    </p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9888;&#65039;</span> Ceste greske</div>
    <div class="pitfall-item">
      <div class="pitfall-title">Poluprecnik opisanog kruga sestostranog nije \(\frac{a\sqrt{3}}{2}\)</div>
      To bi bio poluprecnik <em>upisanog</em> kruga (apotema). Za pravilan sestostrani poluprecnik <em>opisanog</em> kruga je upravo jednak stranici: \(r = a\). Zamena ova dva poluprecnika vodi na potpuno pogresan rezultat.
    </div>
    <div class="pitfall-item">
      <div class="pitfall-title">Pogresan postav jednacine lopte</div>
      Centar osnove piramide se NE poklapa sa centrom lopte! Centar lopte je na visini \(\frac{R}{3}\) iznad osnove (ili, ekvivalentno, osnova je na visini \(-\frac{R}{3}\) od centra lopte). Cesta greska je pretpostaviti da je centar lopte u centru osnove.
    </div>
    <div class="pitfall-item">
      <div class="pitfall-title">Zaboravljena provera opsega za \(h\)</div>
      Rezultat \(h = \frac{4R}{3}\) treba proveriti da pripada intervalu \((0, 2R)\). U ovom slucaju \(\frac{4}{3} < 2\) pa je sve u redu, ali kod slicnih zadataka stacionarna tacka moze pasti van dozvoljenog opsega.
    </div>
    <div class="pitfall-item">
      <div class="pitfall-title">Greska u racunanju povrsine sestostranog</div>
      Formula za povrsinu pravilnog sestostranog je \(\frac{3\sqrt{3}}{2}a^2\), a ne \(\frac{\sqrt{3}}{4}a^2\) (to je za jednakostranican trougao) niti \(6a^2\) (to nema veze sa pravilnim setostranim).
    </div>
  </div>

  <!-- Challenge -->
  <div class="challenge-box">
    <div class="challenge-title">Izazov za razmisljanje</div>
    <p style="color: #cbd5e1;">
      Pokusaj da resis analogan problem za <strong>pravilnu cetvorostranu piramidu</strong> (sa kvadratnom osnovom) upisanu u loptu poluprecnika \(R\). Da li se optimalna visina razlikuje? Kolika je maksimalna zapremina u tom slucaju?
    </p>
    <details>
      <summary>Pogledaj odgovor</summary>
      <p style="color: #cbd5e1; margin-top: 8px;">
        Za pravilnu cetvorostranu piramidu: poluprecnik opisanog kruga kvadratne osnove je \(r = \frac{a\sqrt{2}}{2}\), dakle \(r^2 = \frac{a^2}{2}\). Iz uslova lopte: \(\frac{a^2}{2} + (R-h)^2 = R^2\), pa \(a^2 = 2(2Rh - h^2)\). Zapremina je \(V = \frac{1}{3}a^2 h = \frac{2}{3}(2Rh^2 - h^3)\). Optimizacijom: \(h = \frac{4R}{3}\) &mdash; ista optimalna visina! Maksimalna zapremina je \(V_{\max} = \frac{64R^3}{81}\).
      </p>
    </details>
  </div>

</div>

<script>
(function() {
  // Canvas drawing - cross-section of pyramid inscribed in sphere
  const canvas = document.getElementById('solutionCanvas');
  const ctx = canvas.getContext('2d');

  function draw() {
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    canvas.width = rect.width * dpr;
    canvas.height = rect.height * dpr;
    ctx.scale(dpr, dpr);
    const W = rect.width;
    const H = rect.height;

    // Clear
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Layout parameters
    const cx = W * 0.5;
    const cy = H * 0.47;
    const R = Math.min(W, H) * 0.32;

    // Optimal values: h = 4R/3, a² = 8R²/9, base at z = R - h = -R/3
    const hOpt = 4 * R / 3;
    const baseY = cy - (R - hOpt); // base center: cy + R/3 (below center)
    const aOpt = R * Math.sqrt(8/9);

    // Draw sphere (circle)
    ctx.beginPath();
    ctx.arc(cx, cy, R, 0, 2 * Math.PI);
    ctx.strokeStyle = 'rgba(96, 165, 250, 0.4)';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Fill sphere lightly
    const grad = ctx.createRadialGradient(cx, cy, 0, cx, cy, R);
    grad.addColorStop(0, 'rgba(96, 165, 250, 0.06)');
    grad.addColorStop(1, 'rgba(96, 165, 250, 0.02)');
    ctx.fillStyle = grad;
    ctx.fill();

    // Apex of pyramid (top of sphere)
    const apexX = cx;
    const apexY = cy - R;

    // Base center
    const baseCenterY = cy + R / 3;

    // Draw vertical axis (dashed)
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.moveTo(cx, cy - R - 30);
    ctx.lineTo(cx, cy + R + 30);
    ctx.strokeStyle = 'rgba(148, 163, 184, 0.3)';
    ctx.lineWidth = 1;
    ctx.stroke();
    ctx.setLineDash([]);

    // Draw horizontal axis through center (dashed)
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.moveTo(cx - R - 30, cy);
    ctx.lineTo(cx + R + 30, cy);
    ctx.strokeStyle = 'rgba(148, 163, 184, 0.3)';
    ctx.lineWidth = 1;
    ctx.stroke();
    ctx.setLineDash([]);

    // Draw base horizontal line
    ctx.setLineDash([4, 3]);
    ctx.beginPath();
    ctx.moveTo(cx - aOpt - 20, baseCenterY);
    ctx.lineTo(cx + aOpt + 20, baseCenterY);
    ctx.strokeStyle = 'rgba(52, 211, 153, 0.3)';
    ctx.lineWidth = 1;
    ctx.stroke();
    ctx.setLineDash([]);

    // Draw the hexagonal base as an ellipse (3D effect)
    ctx.beginPath();
    ctx.ellipse(cx, baseCenterY, aOpt, aOpt * 0.3, 0, 0, 2 * Math.PI);
    ctx.strokeStyle = 'rgba(52, 211, 153, 0.5)';
    ctx.lineWidth = 1.5;
    ctx.stroke();

    // Draw pyramid edges (cross-section: left and right edges)
    // Left base vertex
    const leftBaseX = cx - aOpt;
    const rightBaseX = cx + aOpt;

    // Fill pyramid
    ctx.beginPath();
    ctx.moveTo(apexX, apexY);
    ctx.lineTo(leftBaseX, baseCenterY);
    ctx.lineTo(rightBaseX, baseCenterY);
    ctx.closePath();
    ctx.fillStyle = 'rgba(167, 139, 250, 0.08)';
    ctx.fill();

    // Draw pyramid edges
    ctx.beginPath();
    ctx.moveTo(apexX, apexY);
    ctx.lineTo(leftBaseX, baseCenterY);
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2;
    ctx.stroke();

    ctx.beginPath();
    ctx.moveTo(apexX, apexY);
    ctx.lineTo(rightBaseX, baseCenterY);
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Base line
    ctx.beginPath();
    ctx.moveTo(leftBaseX, baseCenterY);
    ctx.lineTo(rightBaseX, baseCenterY);
    ctx.strokeStyle = '#34d399';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Draw radius from center to apex
    ctx.beginPath();
    ctx.moveTo(cx, cy);
    ctx.lineTo(apexX, apexY);
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Draw radius from center to right base vertex
    ctx.beginPath();
    ctx.moveTo(cx, cy);
    ctx.lineTo(rightBaseX, baseCenterY);
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Draw height h (from apex to base center)
    const hLineX = cx + aOpt + 40;
    ctx.beginPath();
    ctx.moveTo(hLineX, apexY);
    ctx.lineTo(hLineX, baseCenterY);
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2;
    ctx.stroke();
    // Arrowheads
    drawArrow(ctx, hLineX, apexY, hLineX, apexY + 8, '#f472b6');
    drawArrow(ctx, hLineX, baseCenterY, hLineX, baseCenterY - 8, '#f472b6');

    // Draw a dimension
    const dimY = baseCenterY + 30;
    ctx.beginPath();
    ctx.moveTo(cx, dimY);
    ctx.lineTo(rightBaseX, dimY);
    ctx.strokeStyle = '#34d399';
    ctx.lineWidth = 1.5;
    ctx.stroke();
    drawArrow(ctx, cx, dimY, cx + 8, dimY, '#34d399');
    drawArrow(ctx, rightBaseX, dimY, rightBaseX - 8, dimY, '#34d399');

    // Draw R-h dimension (center to base)
    const rhLineX = cx - aOpt - 40;
    ctx.setLineDash([4, 3]);
    ctx.beginPath();
    ctx.moveTo(rhLineX, cy);
    ctx.lineTo(rhLineX, baseCenterY);
    ctx.strokeStyle = 'rgba(244, 114, 182, 0.6)';
    ctx.lineWidth = 1.5;
    ctx.stroke();
    ctx.setLineDash([]);

    // Points
    function drawPoint(x, y, color, size) {
      ctx.beginPath();
      ctx.arc(x, y, size || 5, 0, 2 * Math.PI);
      ctx.fillStyle = color;
      ctx.fill();
    }

    drawPoint(cx, cy, '#60a5fa', 5);       // Center O
    drawPoint(apexX, apexY, '#a78bfa', 6);  // Apex
    drawPoint(leftBaseX, baseCenterY, '#34d399', 5);  // Left base vertex
    drawPoint(rightBaseX, baseCenterY, '#34d399', 5); // Right base vertex
    drawPoint(cx, baseCenterY, '#94a3b8', 4); // Base center

    // Labels
    ctx.font = '600 15px "Segoe UI", system-ui, sans-serif';

    // Center O
    ctx.fillStyle = '#60a5fa';
    ctx.textAlign = 'right';
    ctx.fillText('O (centar)', cx - 10, cy - 8);

    // Apex
    ctx.fillStyle = '#a78bfa';
    ctx.textAlign = 'center';
    ctx.fillText('Vrh (0, 0, R)', apexX, apexY - 14);

    // R labels
    ctx.fillStyle = '#60a5fa';
    ctx.textAlign = 'left';
    ctx.font = '700 16px "Segoe UI", system-ui, sans-serif';
    // R to apex
    const rMidX1 = (cx + apexX) / 2;
    const rMidY1 = (cy + apexY) / 2;
    ctx.fillText('R', rMidX1 - 20, rMidY1);
    // R to base vertex
    const rMidX2 = (cx + rightBaseX) / 2;
    const rMidY2 = (cy + baseCenterY) / 2;
    ctx.fillText('R', rMidX2 + 8, rMidY2 - 5);

    // h label
    ctx.fillStyle = '#f472b6';
    ctx.font = '700 16px "Segoe UI", system-ui, sans-serif';
    ctx.textAlign = 'left';
    const hMidY = (apexY + baseCenterY) / 2;
    ctx.fillText('h = 4R/3', hLineX + 8, hMidY);

    // a label
    ctx.fillStyle = '#34d399';
    ctx.font = '600 14px "Segoe UI", system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('a = 2R\u221A2/3', (cx + rightBaseX) / 2, dimY + 20);

    // R-h label (distance from center to base)
    ctx.fillStyle = 'rgba(244, 114, 182, 0.8)';
    ctx.font = '600 13px "Segoe UI", system-ui, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText('R/3', rhLineX - 6, (cy + baseCenterY) / 2 + 4);

    // Base center label
    ctx.fillStyle = '#94a3b8';
    ctx.font = '600 13px "Segoe UI", system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('centar osnove', cx + 6, baseCenterY + 20);

    // Title and info box
    ctx.fillStyle = '#e2e8f0';
    ctx.font = '700 16px "Segoe UI", system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Aksijalni presek piramide upisane u loptu', 20, 28);

    // Info box in bottom-left
    const infoX = 20;
    const infoY = H - 100;
    ctx.fillStyle = 'rgba(30, 41, 59, 0.9)';
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    roundRect(ctx, infoX, infoY, 260, 85, 8);

    ctx.fillStyle = '#94a3b8';
    ctx.font = '600 13px "Segoe UI", system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Optimalne vrednosti:', infoX + 12, infoY + 22);
    ctx.fillStyle = '#f472b6';
    ctx.fillText('h = 4R/3', infoX + 12, infoY + 42);
    ctx.fillStyle = '#34d399';
    ctx.fillText('a = 2R\u221A2/3', infoX + 12, infoY + 60);
    ctx.fillStyle = '#4ade80';
    ctx.font = '700 13px "Segoe UI", system-ui, sans-serif';
    ctx.fillText('V\u2098\u2090\u2093 = 16\u221A3 R\u00B3/27', infoX + 12, infoY + 78);

    // Right-angle marker at base center
    const sqSize = 8;
    ctx.beginPath();
    ctx.moveTo(cx + sqSize, baseCenterY);
    ctx.lineTo(cx + sqSize, baseCenterY - sqSize);
    ctx.lineTo(cx, baseCenterY - sqSize);
    ctx.strokeStyle = '#94a3b8';
    ctx.lineWidth = 1;
    ctx.stroke();
  }

  function drawArrow(ctx, x1, y1, x2, y2, color) {
    ctx.beginPath();
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.strokeStyle = color;
    ctx.lineWidth = 2;
    ctx.stroke();
  }

  function roundRect(ctx, x, y, w, h, r) {
    ctx.beginPath();
    ctx.moveTo(x + r, y);
    ctx.lineTo(x + w - r, y);
    ctx.arcTo(x + w, y, x + w, y + r, r);
    ctx.lineTo(x + w, y + h - r);
    ctx.arcTo(x + w, y + h, x + w - r, y + h, r);
    ctx.lineTo(x + r, y + h);
    ctx.arcTo(x, y + h, x, y + h - r, r);
    ctx.lineTo(x, y + r);
    ctx.arcTo(x, y, x + r, y, r);
    ctx.closePath();
    ctx.fill();
    ctx.stroke();
  }

  draw();
  window.addEventListener('resize', draw);

  // Step highlighting
  document.querySelectorAll('.step-container').forEach(function(step) {
    step.addEventListener('click', function() {
      document.querySelectorAll('.step-container').forEach(function(s) {
        s.classList.remove('active');
      });
      step.classList.toggle('active');
    });
  });
})();
</script>
</div>
</body>
</html>
<!--BRAINSPARK_META
{"title":"Maksimalna zapremina pravilne sestostrane piramide upisane u loptu","subject":"math","unit":"geometry","topic_tags":["stereometrija","optimizacija","zapremina_piramide","upisana_tela","diferencijalni_racun","pravilni_sestostrani"]}
BRAINSPARK_META-->