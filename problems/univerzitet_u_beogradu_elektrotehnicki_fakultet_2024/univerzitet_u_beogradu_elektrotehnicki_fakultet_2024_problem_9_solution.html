<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Skup rešenja nejednačine sa beskonačnim geometrijskim redom</title>
<script>
MathJax = { tex: { inlineMath: [['\\(', '\\)'], ['$', '$']], displayMath: [['\\[', '\\]']] }, svg: { fontCache: 'global' } };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

<script type="text/info" id="logic-scratchpad">
Problem: Skup rešenja nejednačine -3/5 <= x + x^2 + x^3 + ... + x^n + ... < 1, x in R.

Red x + x^2 + x^3 + ... je geometrijski red sa prvim članom a1 = x i količnikom q = x.
Konvergira za |x| < 1, tj. x in (-1, 1).
Suma: S = x / (1 - x)

Nejednačina postaje: -3/5 <= x/(1-x) < 1, uz uslov x in (-1, 1).

LEVA NEJEDNAČINA: x/(1-x) >= -3/5
x/(1-x) + 3/5 >= 0
(5x + 3(1-x)) / (5(1-x)) >= 0
(5x + 3 - 3x) / (5(1-x)) >= 0
(2x + 3) / (5(1-x)) >= 0

Na domenu (-1, 1): 1-x > 0, dakle 5(1-x) > 0.
Zato: 2x + 3 >= 0  =>  x >= -3/2
Pošto je -3/2 < -1, ovo je uvek ispunjeno na (-1, 1).
Ali: jednakost bi bila za x = -3/2, što je van domena => leva nejednačina je STROGA na domenu.

Proverimo: za x -> -1+, S = (-1)/(1-(-1)) = -1/2 = -0,5. A -3/5 = -0,6. Dakle -0,5 > -0,6. OK.
f(x) = x/(1-x) je rastuća na (-1, 1) jer f'(x) = 1/(1-x)^2 > 0.
Minimum f na (-1,1) teži ka f(-1) = -1/2 = -0,5 > -3/5 = -0,6.
Dakle leva nejednačina je uvek strogo ispunjena na (-1, 1).

DESNA NEJEDNAČINA: x/(1-x) < 1
x/(1-x) - 1 < 0
(x - (1-x)) / (1-x) < 0
(2x - 1) / (1-x) < 0

Na domenu (-1, 1): 1-x > 0.
Zato: 2x - 1 < 0  =>  x < 1/2

Kombinovano: x in (-1, 1) i x < 1/2  =>  x in (-1, 1/2)

Za x = 1/2: S = (1/2)/(1/2) = 1. Nije strogo manje od 1. Dakle x = 1/2 ne pripada skupu.
Za x -> -1+: S -> -1/2 > -3/5. Dakle krajnja tačka -1 ne pripada (red ne konvergira).

Skup rešenja: (-1, 1/2) = (a, b) gde a = -1, b = 1/2.
Oblik: (a, b) - otvoren interval.

Odgovor: (E) (a, b)
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, sans-serif;
  line-height: 1.7;
  padding: 20px;
  max-width: 860px;
  margin: 0 auto;
}

h1 {
  text-align: center;
  font-size: 1.9rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 6px;
}

.subtitle {
  text-align: center;
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 28px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 22px;
  margin-bottom: 22px;
}

.card-title {
  font-size: 1.2rem;
  font-weight: 700;
  margin-bottom: 12px;
  color: #60a5fa;
}

.problem-statement {
  border-left: 4px solid #a78bfa;
}

.problem-statement .card-title {
  color: #a78bfa;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-top: 14px;
}

.given-item {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 8px;
  padding: 8px 16px;
  font-size: 1rem;
}

.answer-option {
  cursor: default;
  transition: border-color 0.2s;
}

.answer-option[data-option] {
  min-width: 70px;
  text-align: center;
}

.plan-text {
  color: #94a3b8;
  font-style: italic;
  font-size: 1.02rem;
}

details {
  margin-top: 10px;
}

summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 6px 0;
  user-select: none;
}

summary:hover {
  color: #93c5fd;
}

details .detail-content {
  padding: 12px 0 4px 10px;
  color: #cbd5e1;
}

.step {
  margin-bottom: 18px;
}

.step-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 30px;
  height: 30px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  font-weight: 700;
  font-size: 0.95rem;
  color: #0f172a;
  margin-right: 10px;
  vertical-align: middle;
}

.step-title {
  font-weight: 700;
  font-size: 1.08rem;
  color: #e2e8f0;
  vertical-align: middle;
}

.step-body {
  margin-top: 8px;
  padding-left: 42px;
}

.checkpoint summary {
  color: #f472b6;
  font-size: 0.95rem;
}

.key-insight {
  border: 1px solid #a78bfa;
  background: rgba(167, 139, 250, 0.08);
  border-radius: 12px;
  padding: 18px 20px;
  margin-bottom: 22px;
}

.key-insight .card-title {
  color: #a78bfa;
}

.final-answer {
  border: 2px solid #4ade80;
  background: rgba(74, 222, 128, 0.06);
}

.final-answer .card-title {
  color: #4ade80;
  font-size: 1.3rem;
}

.answer-display {
  font-size: 1.6rem;
  text-align: center;
  color: #4ade80;
  font-weight: 700;
  margin: 16px 0;
}

.options-final {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin: 16px 0;
}

.option-box {
  background: #0f172a;
  border: 2px solid #334155;
  border-radius: 10px;
  padding: 10px 20px;
  font-size: 1.05rem;
  text-align: center;
  min-width: 80px;
}

.option-box.correct {
  border-color: #4ade80;
  background: rgba(74, 222, 128, 0.12);
  color: #4ade80;
  font-weight: 700;
}

.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 6px 0 6px 24px;
  position: relative;
  color: #fbbf24;
}

.pitfall-list li::before {
  content: '\26A0';
  position: absolute;
  left: 0;
}

.canvas-container {
  display: flex;
  justify-content: center;
  margin: 10px 0;
}

canvas {
  border-radius: 10px;
  background: #0f172a;
  border: 1px solid #334155;
  touch-action: none;
  max-width: 100%;
}

.case-box {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 16px;
  margin: 12px 0;
}

.case-box.case-a {
  border-left: 3px solid #60a5fa;
}

.case-box.case-b {
  border-left: 3px solid #a78bfa;
}

.case-box.case-c {
  border-left: 3px solid #34d399;
}

.case-label {
  font-weight: 700;
  font-size: 1.02rem;
  margin-bottom: 8px;
}

.case-a .case-label { color: #60a5fa; }
.case-b .case-label { color: #a78bfa; }
.case-c .case-label { color: #34d399; }

.result-highlight {
  display: inline-block;
  background: linear-gradient(135deg, rgba(96,165,250,0.15), rgba(167,139,250,0.15));
  border: 1px solid #60a5fa;
  border-radius: 8px;
  padding: 4px 14px;
  font-weight: 700;
  color: #60a5fa;
}

.multiplication {
  text-align: center;
  font-size: 1.15rem;
  color: #e2e8f0;
  margin: 10px 0;
  font-weight: 600;
}

.sum-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 14px;
  margin: 16px 0;
  font-size: 1.2rem;
  font-weight: 700;
  flex-wrap: wrap;
}

.verification {
  background: #0f172a;
  border-radius: 8px;
  padding: 14px;
  margin-top: 10px;
  color: #94a3b8;
  font-size: 0.97rem;
}

.ineq-chain {
  text-align: center;
  font-size: 1.1rem;
  margin: 14px 0;
  color: #e2e8f0;
}

.slider-container {
  margin: 16px 0;
  text-align: center;
}

.slider-container input[type="range"] {
  width: 80%;
  max-width: 400px;
  accent-color: #60a5fa;
  cursor: pointer;
}

.slider-label {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-bottom: 6px;
}

.slider-value {
  color: #60a5fa;
  font-weight: 700;
  font-size: 1.1rem;
}

@media (max-width: 700px) {
  body { padding: 12px; }
  h1 { font-size: 1.4rem; }
  .card { padding: 16px; }
  .step-body { padding-left: 20px; }
  .given-grid { gap: 6px; }
  .given-item { padding: 6px 12px; font-size: 0.92rem; }
}
</style>
</head>
<body>

<h1>Nejednačina sa beskonačnim geometrijskim redom</h1>
<p class="subtitle">Redovi i nejednačine — geometrijski red</p>

<!-- Problem Statement -->
<div class="card problem-statement">
  <div class="card-title">Tekst zadatka</div>
  <p>Skup rešenja nejednačine</p>
  \[-\frac{3}{5} \leq x + x^2 + x^3 + \ldots + x^n + \ldots < 1, \quad x \in \mathbb{R}\]
  <p>je oblika (za neke realne brojeve \(a, b\) takve da je \(-\infty < a < b < +\infty\)):</p>
  <div class="given-grid">
    <div class="given-item answer-option" data-option="A">(A) \([a,\, b)\)</div>
    <div class="given-item answer-option" data-option="B">(B) \((a,\, b]\)</div>
    <div class="given-item answer-option" data-option="C">(C) \([a,\, b]\)</div>
    <div class="given-item answer-option" data-option="D">(D) \(\{a,\, b\}\)</div>
    <div class="given-item answer-option" data-option="E">(E) \((a,\, b)\)</div>
  </div>
</div>

<!-- Plan -->
<div class="card">
  <div class="card-title">Plan rešavanja</div>
  <p class="plan-text">Prepoznajemo da je \(x + x^2 + x^3 + \ldots\) beskonačan geometrijski red sa prvim članom \(x\) i količnikom \(x\). Prvo ćemo odrediti domen konvergencije, zatim zameniti sumu zatvorenom formom \(\frac{x}{1-x}\), pa rešiti dvostruku nejednačinu. Na kraju analiziramo tip intervala (otvoreni, zatvoreni, poluotvoreni).</p>
</div>

<!-- Theory Refresher -->
<div class="card">
  <div class="card-title">Teorijska osnova</div>
  <details>
    <summary>Beskonačan geometrijski red</summary>
    <div class="detail-content">
      <p>Geometrijski red \(\sum_{n=0}^{\infty} a \cdot q^n = a + aq + aq^2 + \ldots\) <strong>konvergira</strong> ako i samo ako je \(|q| < 1\), i tada je suma:</p>
      \[S = \frac{a}{1 - q}\]
      <p>U našem slučaju, red je \(x + x^2 + x^3 + \ldots = \sum_{n=1}^{\infty} x^n\). Ovde je prvi član \(a_1 = x\) i količnik \(q = x\), pa:</p>
      \[S = \frac{x}{1 - x}, \quad \text{za } |x| < 1\]
    </div>
  </details>
  <details>
    <summary>Rešavanje racionalnih nejednačina</summary>
    <div class="detail-content">
      <p>Za nejednačinu oblika \(\frac{P(x)}{Q(x)} \geq 0\) ili \(\frac{P(x)}{Q(x)} < 0\), prebacujemo sve na jednu stranu, svodimo na zajednički imenilac i analiziramo znak izraza. Ključno je:</p>
      <ul style="margin:8px 0 8px 20px;">
        <li>Imenilac nikada ne množimo obostrano ako ne znamo njegov znak</li>
        <li>Nule brojioca i imenioca razdvajaju brojnu pravu na intervale sa konstantnim znakom</li>
        <li>Posebno proveravamo krajnje tačke (jednakost ili stroga nejednakost)</li>
      </ul>
    </div>
  </details>
  <details>
    <summary>Analiza graničnih vrednosti</summary>
    <div class="detail-content">
      <p>Funkcija \(f(x) = \frac{x}{1-x}\) je definisana za \(x \neq 1\). Na intervalu \((-1, 1)\) je <strong>strogo rastuća</strong>, jer je:</p>
      \[f'(x) = \frac{1}{(1-x)^2} > 0\]
      <p>Ovo znači da ako tražimo interval gde je \(f(x)\) između dve vrednosti, rešenje je uvek jedan povezan interval.</p>
    </div>
  </details>
</div>

<!-- Visual Aid: Canvas -->
<div class="card">
  <div class="card-title">Grafički prikaz funkcije \(f(x) = \frac{x}{1-x}\)</div>
  <p style="color:#94a3b8; margin-bottom:8px;">Pomeri klizač da istražiš vrednosti funkcije. Oblast rešenja je osenčena.</p>
  <div class="canvas-container">
    <canvas id="mainCanvas" width="700" height="460"></canvas>
  </div>
  <div class="slider-container">
    <div class="slider-label">Vrednost \(x\):</div>
    <input type="range" id="xSlider" min="-99" max="49" value="0">
    <div><span class="slider-value" id="sliderDisplay">x = 0 &rarr; f(x) = 0</span></div>
  </div>
</div>

<!-- Step-by-step Solution -->
<div class="card">
  <div class="card-title">Rešenje korak po korak</div>

  <!-- Step 1 -->
  <div class="step">
    <span class="step-badge">1</span>
    <span class="step-title">Domen konvergencije reda</span>
    <div class="step-body">
      <p>Red \(x + x^2 + x^3 + \ldots\) je geometrijski red sa prvim članom \(a_1 = x\) i količnikom \(q = x\).</p>
      <p>Uslov konvergencije: \(|q| < 1\), tj. \(|x| < 1\), što daje:</p>
      \[x \in (-1,\; 1)\]
      <p>Za \(|x| \geq 1\) red <strong>divergira</strong> i nejednačina nema smisla.</p>
      <p>Kada red konvergira, suma je:</p>
      \[S(x) = \frac{x}{1 - x}\]

      <details class="checkpoint">
        <summary>Proveri se: Kolika je suma za \(x = \frac{1}{2}\)?</summary>
        <div class="detail-content">
          <p>\(S\!\left(\frac{1}{2}\right) = \frac{\frac{1}{2}}{1 - \frac{1}{2}} = \frac{\frac{1}{2}}{\frac{1}{2}} = 1\). Zaista, \(\frac{1}{2} + \frac{1}{4} + \frac{1}{8} + \ldots = 1\).</p>
        </div>
      </details>
    </div>
  </div>

  <!-- Step 2 -->
  <div class="step">
    <span class="step-badge">2</span>
    <span class="step-title">Zamena sudom zatvorenom formom</span>
    <div class="step-body">
      <p>Nejednačina postaje:</p>
      \[-\frac{3}{5} \leq \frac{x}{1 - x} < 1, \quad x \in (-1,\; 1)\]
      <p>Ovo su zapravo <strong>dve nejednačine</strong> koje moramo rešiti istovremeno:</p>
      <div class="case-box case-a">
        <div class="case-label">Leva nejednačina</div>
        <p>\(\displaystyle\frac{x}{1-x} \geq -\frac{3}{5}\)</p>
      </div>
      <div class="case-box case-b">
        <div class="case-label">Desna nejednačina</div>
        <p>\(\displaystyle\frac{x}{1-x} < 1\)</p>
      </div>
    </div>
  </div>

  <!-- Step 3 -->
  <div class="step">
    <span class="step-badge">3</span>
    <span class="step-title">Rešavanje leve nejednačine: \(\frac{x}{1-x} \geq -\frac{3}{5}\)</span>
    <div class="step-body">
      <p>Prebacujemo sve na jednu stranu:</p>
      \[\frac{x}{1-x} + \frac{3}{5} \geq 0\]
      <p>Svodimo na zajednički imenilac:</p>
      \[\frac{5x + 3(1-x)}{5(1-x)} \geq 0\]
      \[\frac{5x + 3 - 3x}{5(1-x)} \geq 0\]
      \[\frac{2x + 3}{5(1-x)} \geq 0\]

      <p>Na domenu \(x \in (-1, 1)\) važi \(1 - x > 0\), pa je \(5(1-x) > 0\).</p>
      <p>Zato se nejednačina svodi na:</p>
      \[2x + 3 \geq 0 \quad \Longleftrightarrow \quad x \geq -\frac{3}{2}\]

      <p>Pošto je \(-\frac{3}{2} < -1\), a naš domen je \((-1, 1)\), ovo je <strong>automatski ispunjeno</strong> za svako \(x\) iz domena.</p>

      <div class="case-box case-c">
        <div class="case-label">Ključno zapažanje</div>
        <p>Jednakost \(\frac{x}{1-x} = -\frac{3}{5}\) važi za \(x = -\frac{3}{2}\), ali ta vrednost je <strong>van domena konvergencije</strong> \((-1, 1)\).</p>
        <p>Minimalna vrednost funkcije \(\frac{x}{1-x}\) na domenu \((-1, 1)\) teži ka \(\frac{-1}{1-(-1)} = -\frac{1}{2}\) kada \(x \to -1^+\).</p>
        <p>Pošto je \(-\frac{1}{2} > -\frac{3}{5}\), leva nejednačina je <strong>strogo ispunjena</strong> na celom domenu.</p>
      </div>

      <details class="checkpoint">
        <summary>Proveri se: Zašto je \(-\frac{1}{2} > -\frac{3}{5}\)?</summary>
        <div class="detail-content">
          <p>Uporedimo razlomke: \(-\frac{1}{2} = -\frac{5}{10}\) i \(-\frac{3}{5} = -\frac{6}{10}\). Pošto je \(-\frac{5}{10} > -\frac{6}{10}\), zaista je \(-\frac{1}{2} > -\frac{3}{5}\).</p>
        </div>
      </details>
    </div>
  </div>

  <!-- Step 4 -->
  <div class="step">
    <span class="step-badge">4</span>
    <span class="step-title">Rešavanje desne nejednačine: \(\frac{x}{1-x} < 1\)</span>
    <div class="step-body">
      <p>Prebacujemo sve na jednu stranu:</p>
      \[\frac{x}{1-x} - 1 < 0\]
      <p>Svodimo na zajednički imenilac:</p>
      \[\frac{x - (1-x)}{1-x} < 0\]
      \[\frac{2x - 1}{1-x} < 0\]

      <p>Na domenu \(x \in (-1, 1)\) važi \(1 - x > 0\). Zato:</p>
      \[2x - 1 < 0 \quad \Longleftrightarrow \quad x < \frac{1}{2}\]

      <p>Kombinujemo sa domenom konvergencije \((-1, 1)\):</p>
      <div class="ineq-chain">\(x \in (-1,\; 1) \cap \left(-\infty,\; \frac{1}{2}\right) = \left(-1,\; \frac{1}{2}\right)\)</div>

      <details class="checkpoint">
        <summary>Proveri se: Šta se dešava za \(x = \frac{1}{2}\)?</summary>
        <div class="detail-content">
          <p>Za \(x = \frac{1}{2}\): \(\frac{x}{1-x} = \frac{1/2}{1/2} = 1\). Nejednačina zahteva \(< 1\) (strogo manje), pa \(x = \frac{1}{2}\) <strong>ne pripada</strong> skupu rešenja.</p>
        </div>
      </details>
    </div>
  </div>

  <!-- Step 5 -->
  <div class="step">
    <span class="step-badge">5</span>
    <span class="step-title">Presek uslova</span>
    <div class="step-body">
      <p>Objedinjavamo sve uslove:</p>
      <ul style="margin:8px 0 8px 20px; color:#cbd5e1;">
        <li><strong>Konvergencija:</strong> \(x \in (-1, 1)\)</li>
        <li><strong>Leva nejednačina:</strong> ispunjena za sve \(x \in (-1, 1)\) (strogo)</li>
        <li><strong>Desna nejednačina:</strong> \(x \in \left(-1, \frac{1}{2}\right)\)</li>
      </ul>
      <p>Presek svih uslova:</p>
      \[\boxed{x \in \left(-1,\; \frac{1}{2}\right)}\]
    </div>
  </div>

  <!-- Step 6 -->
  <div class="step">
    <span class="step-badge">6</span>
    <span class="step-title">Analiza tipa intervala</span>
    <div class="step-body">
      <p>Proveravamo krajnje tačke:</p>
      <div class="case-box case-a">
        <div class="case-label">\(x = -1\): ne pripada</div>
        <p>Red \((-1) + (-1)^2 + (-1)^3 + \ldots = -1 + 1 - 1 + 1 - \ldots\) <strong>divergira</strong>. Dakle \(x = -1\) ne može biti rešenje.</p>
      </div>
      <div class="case-box case-b">
        <div class="case-label">\(x = \frac{1}{2}\): ne pripada</div>
        <p>Za \(x = \frac{1}{2}\) suma reda je \(\frac{1/2}{1 - 1/2} = 1\), a nejednačina zahteva <strong>strogo manje</strong> od 1. Dakle \(x = \frac{1}{2}\) nije rešenje.</p>
      </div>
      <p style="margin-top:12px;">Oba kraja su <strong>isključena</strong>, pa je interval oblika \((a,\;b)\) gde \(a = -1\) i \(b = \frac{1}{2}\).</p>
    </div>
  </div>
</div>

<!-- Key Insight -->
<div class="key-insight">
  <div class="card-title">Ključni uvid</div>
  <p>Leva nejednačina \(\frac{x}{1-x} \geq -\frac{3}{5}\) je u stvari <strong>automatski ispunjena</strong> na celom domenu konvergencije \((-1, 1)\). To je zato što je funkcija \(f(x) = \frac{x}{1-x}\) rastuća, a njena minimalna vrednost na domenu (u graničnom slučaju \(x \to -1^+\)) teži ka \(-\frac{1}{2}\), što je veće od \(-\frac{3}{5}\). Jedino desna nejednačina daje pravo ograničenje: \(x < \frac{1}{2}\).</p>
  <p style="margin-top:10px;">Dakle, leva granica nejednačine je "mamac" koji navodi na pogrešan zaključak da bi mogla postojati tačka gde važi jednakost (što bi dalo zatvoren interval). Ovaj uvid je suština zadatka.</p>
</div>

<!-- Final Answer -->
<div class="card final-answer">
  <div class="card-title">Konačan odgovor</div>
  <div class="answer-display">\(\left(-1,\; \frac{1}{2}\right)\) — otvoren interval, oblik \((a,\,b)\)</div>
  <div class="options-final">
    <div class="option-box">(A) \([a,\, b)\)</div>
    <div class="option-box">(B) \((a,\, b]\)</div>
    <div class="option-box">(C) \([a,\, b]\)</div>
    <div class="option-box">(D) \(\{a,\, b\}\)</div>
    <div class="option-box correct">(E) \((a,\, b)\)</div>
  </div>
  <p style="text-align:center; color:#4ade80; font-weight:600;">Tačan odgovor je (E)</p>
  <div class="verification">
    <strong>Verifikacija:</strong> Proveravamo nekoliko tačaka.
    Za \(x = 0\): \(S = 0\). Važi \(-\frac{3}{5} \leq 0 < 1\). OK.
    Za \(x = 0{,}4\): \(S = \frac{0{,}4}{0{,}6} = \frac{2}{3} \approx 0{,}667\). Važi \(-\frac{3}{5} \leq \frac{2}{3} < 1\). OK.
    Za \(x = -0{,}5\): \(S = \frac{-0{,}5}{1{,}5} = -\frac{1}{3} \approx -0{,}333\). Važi \(-\frac{3}{5} \leq -\frac{1}{3} < 1\). OK.
    Za \(x = 0{,}5\): \(S = 1\). Ne važi \(S < 1\). Van rešenja. OK.
    Za \(x = -0{,}99\): \(S = \frac{-0{,}99}{1{,}99} \approx -0{,}497\). Važi \(-0{,}6 \leq -0{,}497 < 1\). OK.
  </div>
</div>

<!-- Common Pitfalls -->
<div class="card">
  <div class="card-title">Česte greške</div>
  <ul class="pitfall-list">
    <li>Zaboraviti uslov konvergencije \(|x| < 1\) — bez njega, nejednačina nema smisla jer suma reda ne postoji.</li>
    <li>Pogrešno zaključiti da jednačina \(\frac{x}{1-x} = -\frac{3}{5}\) daje levu granicu — rešenje \(x = -\frac{3}{2}\) je van domena konvergencije!</li>
    <li>Množiti nejednačinu sa \((1-x)\) bez provere znaka — na domenu \((-1,1)\) jeste pozitivno, ali to treba eksplicitno navesti.</li>
    <li>Mešati \(\leq\) i \(<\) — levi deo nejednačine ima \(\leq\), desni \(<\), ali to ne znači automatski poluotvoren interval, jer jednakost iz levog dela možda nije dostižna.</li>
  </ul>
</div>

<!-- Optional Challenge -->
<div class="card">
  <div class="card-title">Dodatni izazov</div>
  <details>
    <summary>Odrediti skup rešenja nejednačine \(-\frac{1}{3} \leq x + x^2 + x^3 + \ldots < 3\).</summary>
    <div class="detail-content">
      <p><strong>Savet:</strong> Isti pristup. Suma reda je \(\frac{x}{1-x}\) za \(|x| < 1\).</p>
      <p><strong>Leva nejednačina:</strong> \(\frac{x}{1-x} \geq -\frac{1}{3}\) vodi do \(\frac{4x+1}{3(1-x)} \geq 0\), pa \(x \geq -\frac{1}{4}\).</p>
      <p>Tačka \(x = -\frac{1}{4}\) jeste u domenu \((-1, 1)\), pa tu važi jednakost!</p>
      <p><strong>Desna nejednačina:</strong> \(\frac{x}{1-x} < 3\) vodi do \(\frac{-2x-3}{1-x} > 0\), pa \(x < \frac{3}{4}\) (na domenu).</p>
      <p><strong>Odgovor:</strong> \(x \in \left[-\frac{1}{4},\; \frac{3}{4}\right)\) — interval oblika \([a, b)\).</p>
    </div>
  </details>
</div>

<script>
(() => {
  const canvas = document.getElementById('mainCanvas');
  const ctx = canvas.getContext('2d');
  const slider = document.getElementById('xSlider');
  const display = document.getElementById('sliderDisplay');

  let currentX = 0;
  let hoverX = null;

  // roundRect polyfill
  if (!ctx.roundRect) {
    ctx.roundRect = function(x, y, w, h, r) {
      if (typeof r === 'number') r = [r, r, r, r];
      ctx.beginPath();
      ctx.moveTo(x + r[0], y);
      ctx.lineTo(x + w - r[1], y);
      ctx.quadraticCurveTo(x + w, y, x + w, y + r[1]);
      ctx.lineTo(x + w, y + h - r[2]);
      ctx.quadraticCurveTo(x + w, y + h, x + w - r[2], y + h);
      ctx.lineTo(x + r[3], y + h);
      ctx.quadraticCurveTo(x, y + h, x, y + h - r[3]);
      ctx.lineTo(x, y + r[0]);
      ctx.quadraticCurveTo(x, y, x + r[0], y);
      ctx.closePath();
    };
  }

  function f(x) {
    if (Math.abs(1 - x) < 0.001) return NaN;
    return x / (1 - x);
  }

  // Coordinate system mapping
  const margin = { left: 70, right: 30, top: 30, bottom: 50 };
  const plotW = canvas.width - margin.left - margin.right;
  const plotH = canvas.height - margin.top - margin.bottom;

  const xMin = -1.3, xMax = 0.8;
  const yMin = -1.2, yMax = 2.5;

  function toCanvasX(x) { return margin.left + (x - xMin) / (xMax - xMin) * plotW; }
  function toCanvasY(y) { return margin.top + (1 - (y - yMin) / (yMax - yMin)) * plotH; }
  function fromCanvasX(cx) { return xMin + (cx - margin.left) / plotW * (xMax - xMin); }

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Grid lines
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (var gx = -1.5; gx <= 1; gx += 0.5) {
      var cx = toCanvasX(gx);
      ctx.beginPath(); ctx.moveTo(cx, margin.top); ctx.lineTo(cx, canvas.height - margin.bottom); ctx.stroke();
    }
    for (var gy = -1; gy <= 2.5; gy += 0.5) {
      var cy = toCanvasY(gy);
      ctx.beginPath(); ctx.moveTo(margin.left, cy); ctx.lineTo(canvas.width - margin.right, cy); ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 2;
    // x-axis
    var yAxisPos = toCanvasY(0);
    ctx.beginPath(); ctx.moveTo(margin.left, yAxisPos); ctx.lineTo(canvas.width - margin.right, yAxisPos); ctx.stroke();
    // y-axis
    var xAxisPos = toCanvasX(0);
    ctx.beginPath(); ctx.moveTo(xAxisPos, margin.top); ctx.lineTo(xAxisPos, canvas.height - margin.bottom); ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    for (var gx2 = -1; gx2 <= 0.5; gx2 += 0.5) {
      if (Math.abs(gx2) < 0.01) continue;
      ctx.fillText(gx2.toFixed(1).replace('.', ','), toCanvasX(gx2), yAxisPos + 18);
    }
    ctx.textAlign = 'right';
    for (var gy2 = -1; gy2 <= 2; gy2 += 0.5) {
      if (Math.abs(gy2) < 0.01) continue;
      ctx.fillText(gy2.toFixed(1).replace('.', ','), xAxisPos - 8, toCanvasY(gy2) + 4);
    }

    // Shade solution region
    ctx.fillStyle = 'rgba(96, 165, 250, 0.08)';
    var solLeft = toCanvasX(-1);
    var solRight = toCanvasX(0.5);
    var solTop = toCanvasY(yMax);
    var solBot = toCanvasY(yMin);
    ctx.fillRect(solLeft, solTop, solRight - solLeft, solBot - solTop);

    // Shade between y = -3/5 and y = 1 within solution region
    ctx.fillStyle = 'rgba(52, 211, 153, 0.1)';
    var bandTop = toCanvasY(1);
    var bandBot = toCanvasY(-0.6);
    ctx.fillRect(solLeft, bandTop, solRight - solLeft, bandBot - bandTop);

    // Horizontal lines y = -3/5 and y = 1
    ctx.setLineDash([6, 4]);
    ctx.lineWidth = 1.5;
    // y = 1
    ctx.strokeStyle = '#f472b6';
    ctx.beginPath();
    ctx.moveTo(margin.left, toCanvasY(1));
    ctx.lineTo(canvas.width - margin.right, toCanvasY(1));
    ctx.stroke();
    // y = -3/5
    ctx.strokeStyle = '#fbbf24';
    ctx.beginPath();
    ctx.moveTo(margin.left, toCanvasY(-0.6));
    ctx.lineTo(canvas.width - margin.right, toCanvasY(-0.6));
    ctx.stroke();
    ctx.setLineDash([]);

    // Labels for horizontal lines
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillStyle = '#f472b6';
    ctx.fillText('y = 1', canvas.width - margin.right - 50, toCanvasY(1) - 6);
    ctx.fillStyle = '#fbbf24';
    ctx.fillText('y = -3/5', canvas.width - margin.right - 62, toCanvasY(-0.6) + 16);

    // Vertical dashed lines at x = -1 and x = 1/2
    ctx.setLineDash([4, 4]);
    ctx.lineWidth = 1;
    ctx.strokeStyle = '#64748b';
    ctx.beginPath();
    ctx.moveTo(toCanvasX(-1), margin.top);
    ctx.lineTo(toCanvasX(-1), canvas.height - margin.bottom);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(toCanvasX(0.5), margin.top);
    ctx.lineTo(toCanvasX(0.5), canvas.height - margin.bottom);
    ctx.stroke();
    ctx.setLineDash([]);

    // Labels for vertical lines
    ctx.fillStyle = '#64748b';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('x = -1', toCanvasX(-1), canvas.height - margin.bottom + 16);
    ctx.fillText('x = 1/2', toCanvasX(0.5), canvas.height - margin.bottom + 16);

    // Draw the function f(x) = x/(1-x)
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 3;
    ctx.beginPath();
    var started = false;
    for (var px = margin.left; px <= canvas.width - margin.right; px += 1) {
      var xVal = fromCanvasX(px);
      if (Math.abs(xVal - 1) < 0.01) { started = false; continue; }
      var yVal = f(xVal);
      if (isNaN(yVal) || yVal < yMin - 1 || yVal > yMax + 1) { started = false; continue; }
      var cyVal = toCanvasY(yVal);
      if (cyVal < margin.top - 5 || cyVal > canvas.height - margin.bottom + 5) { started = false; continue; }
      if (!started) { ctx.moveTo(px, cyVal); started = true; }
      else { ctx.lineTo(px, cyVal); }
    }
    ctx.stroke();

    // Function label
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('f(x) = x/(1-x)', toCanvasX(0.05), toCanvasY(1.8));

    // Open circle at x = -1 (diverges)
    var cx1 = toCanvasX(-1);
    var cy1 = toCanvasY(-0.5);
    ctx.beginPath();
    ctx.arc(cx1, cy1, 5, 0, 2 * Math.PI);
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.stroke();
    ctx.fillStyle = '#0f172a';
    ctx.fill();

    // Open circle at x = 1/2, f = 1
    var cx2 = toCanvasX(0.5);
    var cy2 = toCanvasY(1);
    ctx.beginPath();
    ctx.arc(cx2, cy2, 5, 0, 2 * Math.PI);
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.stroke();
    ctx.fillStyle = '#0f172a';
    ctx.fill();

    // Highlight solution interval on x-axis
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 4;
    ctx.beginPath();
    ctx.moveTo(toCanvasX(-1), yAxisPos);
    ctx.lineTo(toCanvasX(0.5), yAxisPos);
    ctx.stroke();

    // Open circles on x-axis for endpoints
    ctx.beginPath();
    ctx.arc(toCanvasX(-1), yAxisPos, 4, 0, 2 * Math.PI);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2;
    ctx.stroke();
    ctx.fillStyle = '#0f172a';
    ctx.fill();

    ctx.beginPath();
    ctx.arc(toCanvasX(0.5), yAxisPos, 4, 0, 2 * Math.PI);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2;
    ctx.stroke();
    ctx.fillStyle = '#0f172a';
    ctx.fill();

    // Solution label
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('(-1, 1/2)', toCanvasX(-0.25), yAxisPos + 30);

    // Current x marker from slider
    if (currentX > -1 && currentX < 1 && Math.abs(currentX - 1) > 0.01) {
      var cxM = toCanvasX(currentX);
      var fVal = f(currentX);
      var cyM = toCanvasY(fVal);

      if (cyM >= margin.top && cyM <= canvas.height - margin.bottom) {
        // Vertical line from x-axis to curve
        ctx.setLineDash([3, 3]);
        ctx.strokeStyle = '#a78bfa';
        ctx.lineWidth = 1.5;
        ctx.beginPath();
        ctx.moveTo(cxM, yAxisPos);
        ctx.lineTo(cxM, cyM);
        ctx.stroke();
        ctx.setLineDash([]);

        // Horizontal line from curve to y-axis
        ctx.setLineDash([3, 3]);
        ctx.strokeStyle = '#a78bfa';
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.moveTo(cxM, cyM);
        ctx.lineTo(xAxisPos, cyM);
        ctx.stroke();
        ctx.setLineDash([]);

        // Point on curve
        var isSolution = (currentX > -1 && currentX < 0.5);
        var ptColor = isSolution ? '#4ade80' : '#ef4444';
        ctx.beginPath();
        ctx.arc(cxM, cyM, 6, 0, 2 * Math.PI);
        ctx.fillStyle = ptColor;
        ctx.fill();
        ctx.strokeStyle = '#fff';
        ctx.lineWidth = 1.5;
        ctx.stroke();

        // Value label
        ctx.fillStyle = '#e2e8f0';
        ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
        ctx.textAlign = 'left';
        var labelX = cxM + 10;
        var labelY = cyM - 10;
        if (labelX > canvas.width - 120) labelX = cxM - 100;
        if (labelY < margin.top + 15) labelY = cyM + 20;
        ctx.fillText('f(' + currentX.toFixed(2).replace('.', ',') + ') = ' + fVal.toFixed(3).replace('.', ','), labelX, labelY);

        // Status
        ctx.fillStyle = ptColor;
        ctx.font = 'bold 11px Segoe UI, system-ui, sans-serif';
        ctx.fillText(isSolution ? 'Pripada resenju' : 'Ne pripada resenju', labelX, labelY + 15);
      }
    }

    // Title
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('f(x) = x/(1-x) i oblast resenja', canvas.width / 2, 18);
  }

  slider.addEventListener('input', function() {
    currentX = parseInt(slider.value) / 100;
    var fVal = f(currentX);
    var fStr = isNaN(fVal) ? 'nedefinisano' : fVal.toFixed(3).replace('.', ',');
    var xStr = currentX.toFixed(2).replace('.', ',');
    display.textContent = 'x = ' + xStr + '  \u2192  f(x) = ' + fStr;
    draw();
  });

  canvas.addEventListener('mousemove', function(e) {
    var rect = canvas.getBoundingClientRect();
    var mx = (e.clientX - rect.left) * (canvas.width / rect.width);
    var xVal = fromCanvasX(mx);
    if (xVal >= -1.3 && xVal <= 0.8) {
      hoverX = xVal;
    } else {
      hoverX = null;
    }
  });

  canvas.addEventListener('click', function(e) {
    var rect = canvas.getBoundingClientRect();
    var mx = (e.clientX - rect.left) * (canvas.width / rect.width);
    var xVal = fromCanvasX(mx);
    if (xVal > -1.2 && xVal < 0.75) {
      currentX = xVal;
      slider.value = Math.round(currentX * 100);
      var fVal = f(currentX);
      var fStr = isNaN(fVal) ? 'nedefinisano' : fVal.toFixed(3).replace('.', ',');
      var xStr = currentX.toFixed(2).replace('.', ',');
      display.textContent = 'x = ' + xStr + '  \u2192  f(x) = ' + fStr;
      draw();
    }
  });

  draw();
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{"title":"Skup rešenja nejednačine sa beskonačnim geometrijskim redom","subject":"math","unit":"sequences_and_series","topic_tags":["geometrijski red","nejednačine","konvergencija","racionalne nejednačine","beskonačni redovi"]}
BRAINSPARK_META-->