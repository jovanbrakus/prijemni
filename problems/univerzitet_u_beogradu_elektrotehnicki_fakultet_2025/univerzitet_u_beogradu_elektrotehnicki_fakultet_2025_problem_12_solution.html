<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Povrsina trougla i duzina stranice BC</title>
<script>MathJax={tex:{inlineMath:[['\\(','\\)'],['$','$']],displayMath:[['\\[','\\]']]},svg:{fontCache:'global'}};</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<script type="text/info" id="logic-scratchpad">
PROBLEM: Povrsina trougla ABC je 30 cm^2. D je tacka na AB takva da AD:DB = 2:3.
E je tacka na BC takva da ED _|_ BC i ED = 9 cm. Naci BC.

SETUP: Postavimo koordinatni sistem.
B = (0, 0), C = (a, 0) gde je a = BC.
A = (Ax, h) gde je h visina iz A na BC.

STEP 1: Povrsina trougla
P = (1/2) * a * h = 30
=> a * h = 60

STEP 2: Tacka D deli AB u razmeri AD:DB = 2:3
D = A + (2/5)(B - A) = (3/5)A + (2/5)B
D_x = (3/5)*Ax + (2/5)*0 = 3*Ax/5
D_y = (3/5)*h + (2/5)*0 = 3*h/5

STEP 3: ED je normalna na BC
BC lezi na x-osi, pa je ED vertikalna (paralelna y-osi).
E je na BC, znaci E_y = 0, E_x = D_x.
Duzina ED = |D_y - E_y| = |3h/5 - 0| = 3h/5 = 9
=> h = 15

STEP 4: Racunamo BC
a * h = 60
a * 15 = 60
a = 4

VERIFICATION:
- h = 15, a = BC = 4
- P = (1/2)*4*15 = 30 ✓
- D_y = 3*15/5 = 9 = ED ✓

ANSWER: (B) 4 cm
</script>
<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
body {
    background: #0f172a;
    color: #e2e8f0;
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    line-height: 1.7;
    padding: 1.5rem;
    max-width: 900px;
    margin: 0 auto;
}
h1 {
    text-align: center;
    font-size: 2rem;
    margin-bottom: 0.5rem;
    background: linear-gradient(135deg, #60a5fa, #a78bfa, #f472b6);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}
.subtitle {
    text-align: center;
    color: #94a3b8;
    margin-bottom: 2rem;
    font-size: 1.05rem;
}
.card {
    background: #1e293b;
    border: 1px solid #334155;
    border-radius: 12px;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
}
.card h2 {
    font-size: 1.25rem;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}
.card h2 .icon { font-size: 1.3rem; }
.problem-statement {
    border-left: 4px solid #a78bfa;
}
.given-grid {
    display: grid;
    gap: 0.5rem;
    margin: 1rem 0;
}
.answer-option {
    background: #0f172a;
    border: 1px solid #334155;
    border-radius: 8px;
    padding: 0.75rem 1rem;
    cursor: pointer;
    transition: all 0.25s;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}
.answer-option:hover { border-color: #60a5fa; background: #162035; }
.answer-option.correct {
    border-color: #4ade80;
    background: rgba(74, 222, 128, 0.08);
}
.answer-option.incorrect {
    border-color: #f87171;
    background: rgba(248, 113, 113, 0.06);
    opacity: 0.65;
}
.option-label {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 32px; height: 32px;
    border-radius: 50%;
    font-weight: 700;
    font-size: 0.85rem;
    flex-shrink: 0;
}
.answer-option.correct .option-label {
    background: #4ade80; color: #0f172a;
}
.answer-option.incorrect .option-label {
    background: #475569; color: #94a3b8;
}
.answer-option:not(.correct):not(.incorrect) .option-label {
    background: #334155; color: #e2e8f0;
}
.plan-card { border-left: 4px solid #60a5fa; }
.theory-card { border-left: 4px solid #a78bfa; }
.steps-card { border-left: 4px solid #34d399; }
.insight-card { border-left: 4px solid #f472b6; }
.final-card {
    border: 2px solid #4ade80;
    background: rgba(74, 222, 128, 0.06);
}
.pitfalls-card { border-left: 4px solid #fbbf24; }
.challenge-card { border-left: 4px solid #60a5fa; }

.collapsible-toggle {
    background: none; border: none; color: #60a5fa;
    cursor: pointer; font-size: 0.95rem; display: flex;
    align-items: center; gap: 0.4rem; margin-top: 0.5rem;
    padding: 0;
}
.collapsible-toggle:hover { color: #93c5fd; }
.collapsible-content {
    max-height: 0; overflow: hidden;
    transition: max-height 0.4s ease;
}
.collapsible-content.open { max-height: 3000px; }
.collapsible-inner { padding-top: 1rem; }

.step {
    position: relative;
    padding-left: 2.5rem;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid #1e293b;
}
.step:last-child { border-bottom: none; margin-bottom: 0; }
.step-badge {
    position: absolute; left: 0; top: 0;
    width: 28px; height: 28px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-weight: 700; font-size: 0.8rem;
    background: linear-gradient(135deg, #60a5fa, #a78bfa);
    color: #0f172a;
}
.step h3 {
    font-size: 1.05rem;
    color: #60a5fa;
    margin-bottom: 0.5rem;
}
.checkpoint {
    background: rgba(52, 211, 153, 0.1);
    border: 1px solid #34d399;
    border-radius: 8px;
    padding: 0.6rem 1rem;
    margin-top: 0.75rem;
    font-size: 0.9rem;
    color: #34d399;
}
.domain-box {
    display: inline-block;
    background: rgba(96, 165, 250, 0.1);
    border: 1px solid #60a5fa;
    border-radius: 6px;
    padding: 0.4rem 0.8rem;
    margin: 0.3rem 0.2rem;
    font-size: 0.95rem;
}
.formula-box {
    display: inline-block;
    background: rgba(167, 139, 250, 0.1);
    border: 1px solid #a78bfa;
    border-radius: 6px;
    padding: 0.4rem 0.8rem;
    margin: 0.3rem 0.2rem;
    font-size: 0.95rem;
}
.summary-table {
    width: 100%;
    border-collapse: collapse;
    margin: 1rem 0;
}
.summary-table th, .summary-table td {
    border: 1px solid #334155;
    padding: 0.65rem 0.85rem;
    text-align: center;
}
.summary-table th {
    background: #0f172a;
    color: #60a5fa;
    font-weight: 600;
}
.summary-table td { background: #1e293b; }

canvas#geoCanvas {
    width: 100%;
    max-width: 600px;
    display: block;
    margin: 1rem auto;
    border-radius: 8px;
    border: 1px solid #334155;
    background: #0f172a;
}
.canvas-legend {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 1rem;
    margin-top: 0.5rem;
    font-size: 0.9rem;
}
.legend-item {
    display: flex; align-items: center; gap: 0.4rem;
}
.legend-swatch {
    width: 18px; height: 4px; border-radius: 2px;
}
.legend-circle {
    width: 10px; height: 10px; border-radius: 50%; border: 2px solid;
}
.muted { color: #94a3b8; }
.highlight { color: #4ade80; font-weight: 600; }
ul.clean { list-style: none; padding-left: 0; }
ul.clean li { padding: 0.3rem 0; padding-left: 1.2rem; position: relative; }
ul.clean li::before {
    content: ''; position: absolute; left: 0; top: 0.7rem;
    width: 6px; height: 6px; border-radius: 50%;
    background: #60a5fa;
}
.pitfall-item {
    background: rgba(251, 191, 36, 0.07);
    border-left: 3px solid #fbbf24;
    padding: 0.6rem 1rem;
    margin: 0.5rem 0;
    border-radius: 0 8px 8px 0;
    font-size: 0.95rem;
}
.tri-values {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 0.5rem;
    margin: 0.75rem 0;
}
.tri-val {
    background: #0f172a;
    border: 1px solid #334155;
    border-radius: 8px;
    padding: 0.5rem 0.75rem;
    text-align: center;
}
.tri-val .label { color: #94a3b8; font-size: 0.8rem; display: block; }
.tri-val .value { font-size: 1.05rem; font-weight: 600; }
@media (max-width: 600px) {
    body { padding: 1rem; }
    h1 { font-size: 1.5rem; }
    .card { padding: 1.1rem; }
}
</style>
</head>
<body>

<h1>Povrsina trougla i duzina stranice BC</h1>
<p class="subtitle">Razmera deljenja stranice, visina trougla i formula za povrsinu</p>

<!-- Problem Statement -->
<div class="card problem-statement">
    <h2><span class="icon">&#128220;</span> Zadatak</h2>
    <p>Povrsina trougla \(\triangle ABC\) je \(30 \text{ cm}^2\). Neka je \(D\) tacka na stranici \(AB\) takva da deli duzinu \(AB\) u razmeri \(2{:}3\) i neka je \(E\) tacka na stranici \(BC\) takva da je duz \(ED\) duzine \(9\text{ cm}\) i normalna na stranicu \(BC\). Tada duzina duzi \(BC\) iznosi:</p>
    <div class="given-grid">
        <div class="answer-option" data-option="A">
            <span class="option-label">A</span>
            <span>\(2\text{ cm}\)</span>
        </div>
        <div class="answer-option" data-option="B">
            <span class="option-label">B</span>
            <span>\(4\text{ cm}\)</span>
        </div>
        <div class="answer-option" data-option="C">
            <span class="option-label">C</span>
            <span>\(6\text{ cm}\)</span>
        </div>
        <div class="answer-option" data-option="D">
            <span class="option-label">D</span>
            <span>\(8\text{ cm}\)</span>
        </div>
        <div class="answer-option" data-option="E">
            <span class="option-label">E</span>
            <span>\(10\text{ cm}\)</span>
        </div>
    </div>
</div>

<!-- Plan -->
<div class="card plan-card">
    <h2><span class="icon">&#128204;</span> Plan resavanja</h2>
    <ol style="padding-left:1.2rem;">
        <li>Postaviti <strong>koordinatni sistem</strong>: \(B\) u koordinatnom pocetku, \(C\) na \(x\)-osi.</li>
        <li>Izraziti <strong>visinu trougla</strong> \(h\) iz tacke \(A\) na stranicu \(BC\) pomocu formule za povrsinu.</li>
        <li>Naci koordinate tacke \(D\) koristeci <strong>razmeru deljenja</strong> \(AD{:}DB = 2{:}3\).</li>
        <li>Iskoristiti uslov \(ED \perp BC\) i \(ED = 9\) da se izracuna \(h\).</li>
        <li>Iz jednacine \(P = \frac{1}{2} \cdot BC \cdot h\) odrediti \(BC\).</li>
    </ol>
</div>

<!-- Theory -->
<div class="card theory-card">
    <h2><span class="icon">&#128218;</span> Teorijska osnova</h2>
    <button class="collapsible-toggle" id="theoryToggle">&#9660; Prikazi / sakrij teoriju</button>
    <div class="collapsible-content" id="theoryContent">
        <div class="collapsible-inner">
            <p><strong>Povrsina trougla:</strong> Za trougao sa osnovicom \(a\) i odgovarajucom visinom \(h_a\):</p>
            \[
            P = \frac{1}{2} \cdot a \cdot h_a
            \]

            <p style="margin-top:0.75rem;"><strong>Deljenje duzi u datoj razmeri:</strong> Ako tacka \(D\) deli duz \(AB\) u razmeri \(AD{:}DB = m{:}n\), tada:</p>
            \[
            D = \frac{n \cdot A + m \cdot B}{m + n} = A + \frac{m}{m+n}(B - A)
            \]

            <p style="margin-top:0.75rem;">Ekvivalentno, mozemo posmatrati od strane \(B\):</p>
            \[
            D = B + \frac{n}{m+n}(A - B)
            \]
            <p>Dakle, \(D\) se nalazi na \(\frac{n}{m+n}\) puta od \(B\) ka \(A\), sto znaci da \(D\) ima \(\frac{n}{m+n}\) od visine tacke \(A\) iznad \(BC\).</p>

            <p style="margin-top:0.75rem;"><strong>Normalnost na x-osu:</strong> Ako duz \(ED\) je normalna na \(BC\) (koja lezi na \(x\)-osi), onda je \(ED\) vertikalna. Posto je \(E\) na \(BC\), imamo \(E_y = 0\), pa je \(ED = |D_y|\).</p>
        </div>
    </div>
</div>

<!-- Canvas -->
<div class="card">
    <h2><span class="icon">&#128200;</span> Graficki prikaz</h2>
    <p class="muted" style="text-align:center;margin-bottom:0.5rem;">Trougao \(\triangle ABC\) sa tackama \(D\) i \(E\), gde \(ED \perp BC\)</p>
    <canvas id="geoCanvas" width="600" height="500"></canvas>
    <div class="canvas-legend">
        <span class="legend-item"><span class="legend-swatch" style="background:#60a5fa;"></span> Trougao \(ABC\)</span>
        <span class="legend-item"><span class="legend-swatch" style="background:#f472b6;"></span> Duz \(ED\) (normala)</span>
        <span class="legend-item"><span class="legend-swatch" style="background:#fbbf24;"></span> Visina \(h\) iz \(A\)</span>
        <span class="legend-item"><span class="legend-swatch" style="background:#34d399;"></span> Stranica \(BC\)</span>
    </div>
</div>

<!-- Steps -->
<div class="card steps-card">
    <h2><span class="icon">&#128736;</span> Postupak</h2>

    <!-- Step 1 -->
    <div class="step">
        <div class="step-badge">1</div>
        <h3>Postavljanje koordinatnog sistema</h3>
        <p>Postavimo koordinatni sistem tako da stranica \(BC\) lezi na \(x\)-osi:</p>
        <div class="tri-values">
            <div class="tri-val">
                <span class="label">Teme B</span>
                <span class="value">\(B = (0,\; 0)\)</span>
            </div>
            <div class="tri-val">
                <span class="label">Teme C</span>
                <span class="value">\(C = (a,\; 0)\)</span>
            </div>
            <div class="tri-val">
                <span class="label">Teme A</span>
                <span class="value">\(A = (A_x,\; h)\)</span>
            </div>
        </div>
        <p>Ovde je \(a = BC\) duzina koju trazimo, a \(h > 0\) je visina trougla iz temena \(A\) na stranicu \(BC\).</p>
        <div class="checkpoint">&#10003; Proveri se: \(BC\) lezi na \(x\)-osi, pa je visina iz \(A\) jednaka \(y\)-koordinati tacke \(A\).</div>
    </div>

    <!-- Step 2 -->
    <div class="step">
        <div class="step-badge">2</div>
        <h3>Veza izmedju \(a\) i \(h\) iz formule za povrsinu</h3>
        <p>Povrsina trougla \(\triangle ABC\) je data:</p>
        \[
        P = \frac{1}{2} \cdot a \cdot h = 30
        \]
        <p>Odavde dobijamo kljucnu vezu:</p>
        <div class="formula-box">
            \(a \cdot h = 60\)
        </div>
        <div class="checkpoint">&#10003; Imamo jednu jednacinu sa dve nepoznate &mdash; trebace nam jos jedan uslov.</div>
    </div>

    <!-- Step 3 -->
    <div class="step">
        <div class="step-badge">3</div>
        <h3>Koordinate tacke \(D\) &mdash; deljenje duzi u razmeri \(2{:}3\)</h3>
        <p>Tacka \(D\) deli stranicu \(AB\) u razmeri \(AD{:}DB = 2{:}3\). To znaci da je \(D\) na \(\frac{2}{5}\) puta od \(A\) ka \(B\):</p>
        \[
        D = A + \frac{2}{5}(B - A) = \frac{3}{5}A + \frac{2}{5}B
        \]
        <p>Racunamo koordinate:</p>
        \[
        D_x = \frac{3}{5} \cdot A_x + \frac{2}{5} \cdot 0 = \frac{3A_x}{5}
        \]
        \[
        D_y = \frac{3}{5} \cdot h + \frac{2}{5} \cdot 0 = \frac{3h}{5}
        \]
        <p>Kljucan zakljucak: <strong>visina tacke \(D\) iznad \(BC\) iznosi \(\frac{3h}{5}\)</strong>.</p>
        <p class="muted" style="margin-top:0.5rem;">Intuitivno: \(D\) je blize temenu \(A\) (na \(\frac{3}{5}\) visine), jer je \(AD\) kraci deo duzi (\(2\) od ukupno \(5\) delova).</p>
        <div class="checkpoint">&#10003; Proveri se: Posto je \(DB = \frac{3}{5} \cdot AB\), tacka \(D\) je na \(\frac{3}{5}\) puta od \(B\) ka \(A\), pa je na visini \(\frac{3}{5} \cdot h\).</div>
    </div>

    <!-- Step 4 -->
    <div class="step">
        <div class="step-badge">4</div>
        <h3>Uslov \(ED \perp BC\) i \(ED = 9\)</h3>
        <p>Posto \(BC\) lezi na \(x\)-osi, uslov \(ED \perp BC\) znaci da je duz \(ED\) <strong>vertikalna</strong> (paralelna \(y\)-osi).</p>
        <p>Tacka \(E\) je na stranici \(BC\), pa je \(E_y = 0\). Tacke \(D\) i \(E\) imaju istu \(x\)-koordinatu (jer je \(ED\) vertikalna), pa:</p>
        \[
        ED = |D_y - E_y| = \left|\frac{3h}{5} - 0\right| = \frac{3h}{5}
        \]
        <p>Iz uslova \(ED = 9\):</p>
        \[
        \frac{3h}{5} = 9
        \]
        <p>Resavamo po \(h\):</p>
        \[
        h = \frac{9 \cdot 5}{3} = \frac{45}{3} = 15
        \]
        <div class="tri-values">
            <div class="tri-val">
                <span class="label">Visina trougla</span>
                <span class="value" style="color:#4ade80;">\(h = 15 \text{ cm}\)</span>
            </div>
        </div>
        <div class="checkpoint">&#10003; Proveri se: \(\frac{3 \cdot 15}{5} = \frac{45}{5} = 9 = ED\) &mdash; tacno!</div>
    </div>

    <!-- Step 5 -->
    <div class="step">
        <div class="step-badge">5</div>
        <h3>Racunanje duzine \(BC\)</h3>
        <p>Sada imamo \(h = 15\) i jednacinu iz koraka 2:</p>
        \[
        a \cdot h = 60 \implies a \cdot 15 = 60 \implies a = \frac{60}{15} = 4
        \]
        <p>Dakle:</p>
        <div class="formula-box" style="border-color:#4ade80; background:rgba(74, 222, 128, 0.1);">
            \(BC = 4 \text{ cm}\)
        </div>
        <div class="checkpoint">&#10003; Verifikacija: \(P = \frac{1}{2} \cdot 4 \cdot 15 = \frac{60}{2} = 30 \text{ cm}^2\) &mdash; tacno!</div>
    </div>
</div>

<!-- Key Insight -->
<div class="card insight-card">
    <h2><span class="icon">&#128161;</span> Kljucni uvid</h2>
    <p>Trik u ovom zadatku je shvatiti da <strong>normalnost \(ED\) na \(BC\)</strong> direktno povezuje visinu tacke \(D\) sa duzinom \(ED\). Posto \(D\) deli \(AB\) u razmeri \(2{:}3\), visina tacke \(D\) je proporcionalna visini tacke \(A\):</p>
    \[
    \text{visina od } D = \frac{3}{5} \cdot h
    \]
    <p style="margin-top:0.75rem;">Ovo daje vezu izmedju \(ED\) i visine trougla \(h\), sto u kombinaciji sa formulom za povrsinu omogucava nalazenje \(BC\). Dva uslova &mdash; dve nepoznate &mdash; jednoznacno resenje.</p>
</div>

<!-- Final Answer -->
<div class="card final-card">
    <h2><span class="icon">&#127919;</span> Konacan odgovor</h2>
    <p style="text-align:center; font-size:1.3rem; margin:1rem 0;">
        \[
        \boxed{BC = 4 \text{ cm}}
        \]
    </p>
    <p style="text-align:center; font-size:1.15rem;" class="highlight">Odgovor: (B)</p>
</div>

<!-- Pitfalls -->
<div class="card pitfalls-card">
    <h2><span class="icon">&#9888;</span> Ceste greske</h2>
    <div class="pitfall-item">
        <strong>Pogresan smer razmere:</strong> Razmera \(AD{:}DB = 2{:}3\) znaci da je \(D\) blize tacki \(A\) (kraci deo je od \(A\)). Ako se razmera pogleda od \(B\), onda je \(BD{:}DA = 3{:}2\), pa je \(D\) na \(\frac{3}{5}\) puta od \(B\) ka \(A\). Obrnuti tumacenje razmere dovodi do pogresnog rezultata.
    </div>
    <div class="pitfall-item">
        <strong>Brkanje visine \(D\) i visine \(A\):</strong> Visina tacke \(D\) iznad \(BC\) nije \(h\), vec \(\frac{3}{5}h\). Posto je \(D\) na \(\frac{3}{5}\) od \(B\) ka \(A\), ona "nasledjuje" \(\frac{3}{5}\) od visine tacke \(A\). Cesta greska je staviti \(ED = h\), sto bi dalo \(h = 9\) i pogresno \(BC = \frac{60}{9} = 6{,}67\).
    </div>
    <div class="pitfall-item">
        <strong>Zaboravljanje da je \(E\) na \(BC\):</strong> Uslov \(ED \perp BC\) sam po sebi ne znaci da je \(E\) podnozje normale iz \(D\) &mdash; ali posto je \(E\) na \(BC\), to je upravo podnozje, pa je \(ED\) jednako visini tacke \(D\) iznad prave \(BC\).
    </div>
    <div class="pitfall-item">
        <strong>Pogresno racunanje proporcije:</strong> Ako je \(AD{:}DB = 2{:}3\), visina tacke \(D\) je \(\frac{3}{5}h\) (ne \(\frac{2}{5}h\)). Razlog: \(D\) je blize \(A\), pa je blize visini \(h\). Od \(B\) (visina 0) do \(A\) (visina \(h\)), tacka \(D\) je na \(\frac{3}{5}\) puta.
    </div>
</div>

<!-- Challenge -->
<div class="card challenge-card">
    <h2><span class="icon">&#127942;</span> Izazov za razmisljanje</h2>
    <p>Pretpostavimo da se tacka \(D\) pomera duz stranice \(AB\) tako da \(AD{:}DB = k{:}(1-k)\) za \(0 < k < 1\). Za koje vrednosti \(k\) duzina \(BC\) iznosi tacno \(1\text{ cm}\), ako je povrsina trougla i dalje \(30 \text{ cm}^2\) i \(ED = 9\text{ cm}\)?</p>
    <button class="collapsible-toggle" id="challengeToggle">&#9660; Prikazi odgovor</button>
    <div class="collapsible-content" id="challengeContent">
        <div class="collapsible-inner">
            <p>Visina tacke \(D\) iznad \(BC\) je \((1-k) \cdot h\). Iz uslova \(ED = 9\):</p>
            \[
            (1-k) \cdot h = 9 \implies h = \frac{9}{1-k}
            \]
            <p>Iz formule za povrsinu:</p>
            \[
            BC = \frac{60}{h} = \frac{60(1-k)}{9} = \frac{20(1-k)}{3}
            \]
            <p>Za \(BC = 1\):</p>
            \[
            \frac{20(1-k)}{3} = 1 \implies 1-k = \frac{3}{20} \implies k = \frac{17}{20} = 0{,}85
            \]
            <p>Dakle, za \(AD{:}DB = 17{:}3\), dobili bismo \(BC = 1\text{ cm}\) (i visinu \(h = 60\text{ cm}\) &mdash; veoma "tanak" i visok trougao).</p>
        </div>
    </div>
</div>

<script>
(function() {
    // Collapsible toggles
    function setupCollapsible(toggleId, contentId) {
        var toggle = document.getElementById(toggleId);
        var content = document.getElementById(contentId);
        if (!toggle || !content) return;
        toggle.addEventListener('click', function() {
            content.classList.toggle('open');
            toggle.textContent = content.classList.contains('open')
                ? '\u25B2 Sakrij'
                : '\u25BC Prika\u017Ei / sakrij';
        });
    }
    setupCollapsible('theoryToggle', 'theoryContent');
    setupCollapsible('challengeToggle', 'challengeContent');

    // Answer option highlighting
    var options = document.querySelectorAll('.answer-option');
    options.forEach(function(opt) {
        opt.addEventListener('click', function() {
            options.forEach(function(o) {
                if (o.getAttribute('data-option') === 'B') {
                    o.classList.add('correct');
                    o.classList.remove('incorrect');
                } else {
                    o.classList.add('incorrect');
                    o.classList.remove('correct');
                }
            });
        });
    });

    // Canvas drawing
    var canvas = document.getElementById('geoCanvas');
    if (!canvas) return;
    var dpr = window.devicePixelRatio || 1;
    var dispW = 600, dispH = 500;
    canvas.width = dispW * dpr;
    canvas.height = dispH * dpr;
    canvas.style.width = dispW + 'px';
    canvas.style.height = dispH + 'px';
    var ctx = canvas.getContext('2d');
    ctx.scale(dpr, dpr);
    var W = dispW, H = dispH;

    // We'll draw the triangle with proportional coordinates
    // B = (0, 0), C = (4, 0), A = (1.5, 15)
    // D divides AB with AD:DB = 2:3, so D = (3/5)*A + (2/5)*B = (0.9, 9)
    // E = (0.9, 0) on BC, ED vertical with length 9

    // Map math coords to canvas
    // x range: -1 to 6, y range: -2 to 18
    var xMin = -1.5, xMax = 6.5, yMin = -2.5, yMax = 18.5;

    function toX(x) { return (x - xMin) / (xMax - xMin) * W; }
    function toY(y) { return H - (y - yMin) / (yMax - yMin) * H; }

    // Triangle vertices
    var Bx = 0, By = 0;
    var Cx = 4, Cy = 0;
    var Ax = 1.5, Ay = 15;

    // D = (3/5)*A + (2/5)*B
    var Dx = 3*Ax/5, Dy = 3*Ay/5; // (0.9, 9)
    // E on BC below D
    var Ex = Dx, Ey = 0;

    // Foot of altitude from A to BC
    var Fx = Ax, Fy = 0;

    // Background
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Grid
    ctx.strokeStyle = '#1a2332';
    ctx.lineWidth = 0.5;
    for (var gx = Math.ceil(xMin); gx <= Math.floor(xMax); gx++) {
        ctx.beginPath();
        ctx.moveTo(toX(gx), 0);
        ctx.lineTo(toX(gx), H);
        ctx.stroke();
    }
    for (var gy = Math.ceil(yMin); gy <= Math.floor(yMax); gy++) {
        ctx.beginPath();
        ctx.moveTo(0, toY(gy));
        ctx.lineTo(W, toY(gy));
        ctx.stroke();
    }

    // Fill triangle lightly
    ctx.fillStyle = 'rgba(96, 165, 250, 0.05)';
    ctx.beginPath();
    ctx.moveTo(toX(Ax), toY(Ay));
    ctx.lineTo(toX(Bx), toY(By));
    ctx.lineTo(toX(Cx), toY(Cy));
    ctx.closePath();
    ctx.fill();

    // Draw triangle sides
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(toX(Ax), toY(Ay));
    ctx.lineTo(toX(Bx), toY(By));
    ctx.lineTo(toX(Cx), toY(Cy));
    ctx.closePath();
    ctx.stroke();

    // Highlight BC in green
    ctx.strokeStyle = '#34d399';
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(toX(Bx), toY(By));
    ctx.lineTo(toX(Cx), toY(Cy));
    ctx.stroke();

    // Draw height from A (dashed, yellow)
    ctx.strokeStyle = '#fbbf24';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.moveTo(toX(Ax), toY(Ay));
    ctx.lineTo(toX(Fx), toY(Fy));
    ctx.stroke();
    ctx.setLineDash([]);

    // Right angle marker at F (foot of altitude)
    var raSize = 0.4;
    ctx.strokeStyle = '#fbbf24';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(toX(Fx + raSize), toY(Fy));
    ctx.lineTo(toX(Fx + raSize), toY(Fy + raSize));
    ctx.lineTo(toX(Fx), toY(Fy + raSize));
    ctx.stroke();

    // Draw ED (pink, thick)
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(toX(Ex), toY(Ey));
    ctx.lineTo(toX(Dx), toY(Dy));
    ctx.stroke();

    // Right angle marker at E
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(toX(Ex + raSize), toY(Ey));
    ctx.lineTo(toX(Ex + raSize), toY(Ey + raSize));
    ctx.lineTo(toX(Ex), toY(Ey + raSize));
    ctx.stroke();

    // Draw D on AB segment - small marker
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 1.5;
    // Tick marks on AB to show 2:3 ratio
    // AD = 2/5 of AB, DB = 3/5 of AB
    // Show ticks at 1/5, 2/5, 3/5, 4/5 along AB
    for (var i = 1; i <= 4; i++) {
        var t = i / 5;
        var tx = Ax + t * (Bx - Ax);
        var ty = Ay + t * (By - Ay);
        // perpendicular to AB direction
        var abx = Bx - Ax, aby = By - Ay;
        var abLen = Math.sqrt(abx*abx + aby*aby);
        var nx = -aby / abLen, ny = abx / abLen;
        var tickSize = (i === 2) ? 0.35 : 0.2; // longer tick at D position
        ctx.strokeStyle = (i === 2) ? '#a78bfa' : '#475569';
        ctx.lineWidth = (i === 2) ? 1.5 : 0.8;
        ctx.beginPath();
        ctx.moveTo(toX(tx - nx * tickSize), toY(ty - ny * tickSize));
        ctx.lineTo(toX(tx + nx * tickSize), toY(ty + ny * tickSize));
        ctx.stroke();
    }

    // Labels for AD:DB ratio
    // midpoint of AD
    var midADx = (Ax + Dx) / 2, midADy = (Ay + Dy) / 2;
    var midDBx = (Dx + Bx) / 2, midDBy = (Dy + By) / 2;
    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 13px sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText('2', toX(midADx) - 14, toY(midADy) + 2);
    ctx.fillText('3', toX(midDBx) - 14, toY(midDBy) + 2);

    // Points
    function drawPoint(x, y, color, label, offX, offY) {
        ctx.fillStyle = color;
        ctx.beginPath();
        ctx.arc(toX(x), toY(y), 5, 0, 2 * Math.PI);
        ctx.fill();
        ctx.strokeStyle = '#0f172a';
        ctx.lineWidth = 1.5;
        ctx.stroke();
        ctx.fillStyle = color;
        ctx.font = 'bold 14px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText(label, toX(x) + (offX || 0), toY(y) + (offY || -12));
    }

    drawPoint(Ax, Ay, '#e2e8f0', 'A', 0, -12);
    drawPoint(Bx, By, '#e2e8f0', 'B', -18, 16);
    drawPoint(Cx, Cy, '#e2e8f0', 'C', 18, 16);
    drawPoint(Dx, Dy, '#a78bfa', 'D', -18, 0);
    drawPoint(Ex, Ey, '#f472b6', 'E', 0, 20);

    // Dimension labels
    ctx.font = '12px sans-serif';
    ctx.textAlign = 'center';

    // BC = 4
    ctx.fillStyle = '#34d399';
    ctx.fillText('BC = 4', toX((Bx + Cx) / 2), toY(0) + 36);

    // ED = 9
    ctx.fillStyle = '#f472b6';
    ctx.save();
    ctx.translate(toX(Ex) + 20, toY((Ey + Dy) / 2));
    ctx.fillText('ED = 9', 0, 4);
    ctx.restore();

    // h = 15
    ctx.fillStyle = '#fbbf24';
    ctx.save();
    ctx.translate(toX(Fx) + 30, toY(Ay / 2));
    ctx.fillText('h = 15', 0, 4);
    ctx.restore();

    // Area label inside triangle
    ctx.fillStyle = 'rgba(226, 232, 240, 0.4)';
    ctx.font = '13px sans-serif';
    ctx.textAlign = 'center';
    var centX = (Ax + Bx + Cx) / 3;
    var centY = (Ay + By + Cy) / 3;
    ctx.fillText('P = 30 cm\u00B2', toX(centX) + 20, toY(centY));
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{"title":"Povrsina trougla i duzina stranice BC","subject":"math","unit":"geometry","topic_tags":["povrsina_trougla","deljenje_duzi_u_razmeri","visina_trougla","normalnost","koordinatni_sistem"]}
BRAINSPARK_META-->