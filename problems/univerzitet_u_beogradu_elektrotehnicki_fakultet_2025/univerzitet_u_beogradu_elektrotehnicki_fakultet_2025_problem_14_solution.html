<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ugao između elipse i hiperbole u presečnoj tački</title>
<script type="text/info" id="logic-scratchpad">
Problem: Ugao između elipse x²/9 + y²/4 = 1 i hiperbole x²/4 − y² = 1
u njihovoj presečnoj tački u prvom kvadrantu.

Korak 1: Nalaženje presečne tačke u prvom kvadrantu
Iz hiperbole: x²/4 − y² = 1 => y² = x²/4 − 1

Zamena u jednačinu elipse:
x²/9 + (x²/4 − 1)/4 = 1
x²/9 + x²/16 − 1/4 = 1
x²(1/9 + 1/16) = 5/4
x²(16 + 9)/(9·16) = 5/4
x²·25/144 = 5/4
x² = (5/4)·(144/25) = 144/20 = 36/5

y² = x²/4 − 1 = 36/(5·4) − 1 = 9/5 − 1 = 4/5

U prvom kvadrantu: x = 6/√5, y = 2/√5

Korak 2: Nagib tangente na elipsu
Elipsa: x²/9 + y²/4 = 1
Implicitno diferenciranje: 2x/9 + 2y·y'/4 = 0
y' = −4x/(9y)

U tački (6/√5, 2/√5):
m₁ = −4·(6/√5) / (9·(2/√5)) = −24/(9·2) = −24/18 = −4/3

Korak 3: Nagib tangente na hiperbolu
Hiperbola: x²/4 − y² = 1
Implicitno diferenciranje: 2x/4 − 2y·y' = 0
y' = x/(4y)

U tački (6/√5, 2/√5):
m₂ = (6/√5) / (4·(2/√5)) = 6/8 = 3/4

Korak 4: Ugao između tangenti
tan(θ) = |m₁ − m₂| / |1 + m₁·m₂|
m₁·m₂ = (−4/3)·(3/4) = −1

1 + m₁·m₂ = 1 + (−1) = 0

Imenilac je 0, što znači da je tan(θ) → ∞, tj. θ = 90°.

Tangente su međusobno normalne!

Odgovor: (D) 90°
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}
h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}
.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}
.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}
.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}
.card h3 {
  color: #a78bfa;
  font-size: 1.15rem;
  margin-bottom: 10px;
}
.highlight-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  font-size: 1.05rem;
  text-align: center;
}
.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}
.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  text-align: center;
  min-width: 80px;
  flex: 1;
}
.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}
.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}
.answer-option {
  cursor: default;
  transition: border-color 0.2s;
}
.plan-card {
  border-left: 3px solid #a78bfa;
}
details {
  background: rgba(167,139,250,0.06);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 12px 0;
}
details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 1.05rem;
  padding: 4px 0;
}
details summary:hover {
  color: #c4b5fd;
}
details[open] summary {
  margin-bottom: 12px;
}
.step-container {
  position: relative;
  padding-left: 50px;
  margin-bottom: 20px;
  cursor: pointer;
  border-left: 3px solid transparent;
  transition: border-color 0.2s, background 0.2s;
  border-radius: 8px;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-right: 8px;
}
.step-container:hover, .step-container.active {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}
.step-badge {
  position: absolute;
  left: 8px;
  top: 12px;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
}
.step-title {
  color: #60a5fa;
  font-weight: 600;
  font-size: 1.1rem;
  margin-bottom: 6px;
}
.step-text {
  color: #e2e8f0;
  margin-bottom: 8px;
}
.final-answer-card {
  border: 2px solid #4ade80;
  text-align: center;
}
.final-answer-value {
  color: #4ade80;
  font-size: 2rem;
  font-weight: 700;
  margin: 16px 0;
}
.answer-options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 16px 0;
}
.answer-chip {
  padding: 10px 22px;
  border-radius: 10px;
  font-size: 1.05rem;
  font-weight: 600;
  border: 2px solid #334155;
  background: rgba(30,41,59,0.8);
  color: #94a3b8;
  transition: all 0.2s;
}
.answer-chip.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.12);
  color: #4ade80;
}
.pitfall-card {
  border-left: 3px solid #e09468;
}
.pitfall-card h2 {
  color: #e09468;
}
.challenge-card {
  border-left: 3px solid #f472b6;
}
.challenge-card h2 {
  color: #f472b6;
}
.verification {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 10px;
}
canvas {
  width: 100%;
  border-radius: 10px;
  display: block;
  margin: 0 auto;
}
.insight-card {
  border-left: 3px solid #60a5fa;
}
.micro-check details {
  background: rgba(52,211,153,0.06);
  border-color: rgba(52,211,153,0.2);
}
.micro-check details summary {
  color: #34d399;
}
@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step-container { padding-left: 42px; }
  .given-grid { flex-direction: column; }
  .answer-options-row { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Ugao između elipse i hiperbole</h1>
  <p class="subtitle">Ortogonalnost krivih u presečnoj tački preko tangenti</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Ugao između elipse i hiperbole u njihovoj presečnoj tački u prvom kvadrantu iznosi:</p>

    <div class="given-grid">
      <div class="given-item">
        <div class="label">Elipsa</div>
        <div class="value">\( \dfrac{x^2}{9} + \dfrac{y^2}{4} = 1 \)</div>
      </div>
      <div class="given-item">
        <div class="label">Hiperbola</div>
        <div class="value">\( \dfrac{x^2}{4} - y^2 = 1 \)</div>
      </div>
      <div class="given-item">
        <div class="label">Traži se</div>
        <div class="value">Ugao \( \theta \) u I kvadrantu</div>
      </div>
    </div>

    <h3 style="margin-top: 20px;">Ponuđeni odgovori</h3>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">45°</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">15°</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">60°</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">90°</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">30°</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan rešavanja</h2>
    <p>1. Naći ćemo presečnu tačku elipse i hiperbole u prvom kvadrantu rešavanjem sistema jednačina.<br>
    2. Implicitnim diferenciranjem odredićemo nagibe tangenti obe krive u toj tački.<br>
    3. Primenom formule za ugao između dve prave izračunaćemo traženi ugao.</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Ključne formule i teoreme</summary>
      <div style="margin-top: 10px;">
        <p><strong>Ugao između dve krive:</strong></p>
        <p>Ugao između dve krive u presečnoj tački je ugao između njihovih tangenti u toj tački.</p>
        <ul style="margin-left: 20px; margin-top: 8px; color: #e2e8f0;">
          <li>Formula za ugao između pravih sa nagibima \( m_1 \) i \( m_2 \):
          \[ \tan \theta = \left|\frac{m_1 - m_2}{1 + m_1 \cdot m_2}\right| \]</li>
          <li>Ako je \( 1 + m_1 \cdot m_2 = 0 \), tj. \( m_1 \cdot m_2 = -1 \), tangente su <strong>međusobno normalne</strong> i \( \theta = 90° \).</li>
          <li><strong>Implicitno diferenciranje:</strong> Diferenciramo obe strane jednačine krive po \( x \), tretirajući \( y \) kao funkciju od \( x \).</li>
        </ul>
        <p style="margin-top: 12px;"><strong>Elipsa</strong> \( \frac{x^2}{a^2} + \frac{y^2}{b^2} = 1 \): poluose \( a = 3 \), \( b = 2 \).</p>
        <p><strong>Hiperbola</strong> \( \frac{x^2}{a^2} - \frac{y^2}{b^2} = 1 \): poluosa \( a = 2 \), \( b = 1 \).</p>
      </div>
    </details>
  </div>

  <!-- Canvas Visual -->
  <div class="card">
    <h2>Vizuelni prikaz</h2>
    <canvas id="curvesCanvas" height="520"></canvas>
  </div>

  <!-- Step-by-step Solution -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <div class="step-container" id="step1">
      <div class="step-badge">1</div>
      <div class="step-title">Sistem jednačina za presečnu tačku</div>
      <div class="step-text">
        <p>Iz jednačine hiperbole izrazimo \( y^2 \):</p>
        <div class="highlight-box">
          \[ \frac{x^2}{4} - y^2 = 1 \implies y^2 = \frac{x^2}{4} - 1 \]
        </div>
        <p>Ovaj izraz za \( y^2 \) zamenjujemo u jednačinu elipse.</p>
      </div>
    </div>

    <div class="step-container" id="step2">
      <div class="step-badge">2</div>
      <div class="step-title">Zamena u jednačinu elipse</div>
      <div class="step-text">
        <p>Uvrstimo \( y^2 = \frac{x^2}{4} - 1 \) u elipsu:</p>
        <div class="highlight-box">
          \[ \frac{x^2}{9} + \frac{\frac{x^2}{4} - 1}{4} = 1 \]
        </div>
        <p>Raspisujemo:</p>
        <div class="highlight-box">
          \[ \frac{x^2}{9} + \frac{x^2}{16} - \frac{1}{4} = 1 \]
        </div>
        <p>Prebacimo konstantu na desnu stranu:</p>
        <div class="highlight-box">
          \[ x^2 \left(\frac{1}{9} + \frac{1}{16}\right) = \frac{5}{4} \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step3">
      <div class="step-badge">3</div>
      <div class="step-title">Nalaženje \( x^2 \) i \( y^2 \)</div>
      <div class="step-text">
        <p>Sabiramo razlomke u zagradi:</p>
        <div class="highlight-box">
          \[ \frac{1}{9} + \frac{1}{16} = \frac{16 + 9}{144} = \frac{25}{144} \]
        </div>
        <p>Dakle:</p>
        <div class="highlight-box">
          \[ x^2 \cdot \frac{25}{144} = \frac{5}{4} \implies x^2 = \frac{5}{4} \cdot \frac{144}{25} = \frac{144}{20} = \frac{36}{5} \]
        </div>
        <p>Sada nalazimo \( y^2 \):</p>
        <div class="highlight-box">
          \[ y^2 = \frac{x^2}{4} - 1 = \frac{36/5}{4} - 1 = \frac{9}{5} - 1 = \frac{4}{5} \]
        </div>
        <p>U prvom kvadrantu (\( x > 0,\; y > 0 \)):</p>
        <div class="highlight-box">
          \[ x = \frac{6}{\sqrt{5}}, \quad y = \frac{2}{\sqrt{5}} \]
        </div>
      </div>
    </div>

    <div class="micro-check">
      <details>
        <summary>Proveri se: Da li tačka pripada obe krive?</summary>
        <p style="margin-top: 8px;">
          Elipsa: \( \frac{36/5}{9} + \frac{4/5}{4} = \frac{4}{5} + \frac{1}{5} = 1 \;\; \checkmark \)<br>
          Hiperbola: \( \frac{36/5}{4} - \frac{4}{5} = \frac{9}{5} - \frac{4}{5} = \frac{5}{5} = 1 \;\; \checkmark \)
        </p>
      </details>
    </div>

    <div class="step-container" id="step4">
      <div class="step-badge">4</div>
      <div class="step-title">Nagib tangente na elipsu (implicitno diferenciranje)</div>
      <div class="step-text">
        <p>Diferenciramo jednačinu elipse \( \frac{x^2}{9} + \frac{y^2}{4} = 1 \) po \( x \):</p>
        <div class="highlight-box">
          \[ \frac{2x}{9} + \frac{2y \cdot y'}{4} = 0 \]
        </div>
        <p>Rešavamo po \( y' \):</p>
        <div class="highlight-box">
          \[ y' = -\frac{4x}{9y} \]
        </div>
        <p>U presečnoj tački \( \left(\frac{6}{\sqrt{5}},\; \frac{2}{\sqrt{5}}\right) \):</p>
        <div class="highlight-box">
          \[ m_1 = -\frac{4 \cdot \frac{6}{\sqrt{5}}}{9 \cdot \frac{2}{\sqrt{5}}} = -\frac{\frac{24}{\sqrt{5}}}{\frac{18}{\sqrt{5}}} = -\frac{24}{18} = -\frac{4}{3} \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step5">
      <div class="step-badge">5</div>
      <div class="step-title">Nagib tangente na hiperbolu (implicitno diferenciranje)</div>
      <div class="step-text">
        <p>Diferenciramo jednačinu hiperbole \( \frac{x^2}{4} - y^2 = 1 \) po \( x \):</p>
        <div class="highlight-box">
          \[ \frac{2x}{4} - 2y \cdot y' = 0 \]
        </div>
        <p>Rešavamo po \( y' \):</p>
        <div class="highlight-box">
          \[ y' = \frac{x}{4y} \]
        </div>
        <p>U presečnoj tački:</p>
        <div class="highlight-box">
          \[ m_2 = \frac{\frac{6}{\sqrt{5}}}{4 \cdot \frac{2}{\sqrt{5}}} = \frac{\frac{6}{\sqrt{5}}}{\frac{8}{\sqrt{5}}} = \frac{6}{8} = \frac{3}{4} \]
        </div>
      </div>
    </div>

    <div class="micro-check">
      <details>
        <summary>Proveri se: Proizvod nagiba</summary>
        <p style="margin-top: 8px;">
          \( m_1 \cdot m_2 = \left(-\frac{4}{3}\right) \cdot \frac{3}{4} = -1 \).<br>
          Proizvod nagiba je \( -1 \), što je uslov za ortogonalnost! Ovo je jak signal da je ugao \( 90° \).
        </p>
      </details>
    </div>

    <div class="step-container" id="step6">
      <div class="step-badge">6</div>
      <div class="step-title">Izračunavanje ugla između tangenti</div>
      <div class="step-text">
        <p>Primenjujemo formulu za ugao između dve prave:</p>
        <div class="highlight-box">
          \[ \tan \theta = \left|\frac{m_1 - m_2}{1 + m_1 \cdot m_2}\right| = \left|\frac{-\frac{4}{3} - \frac{3}{4}}{1 + \left(-\frac{4}{3}\right) \cdot \frac{3}{4}}\right| \]
        </div>
        <p>Izračunajmo brojilac:</p>
        <div class="highlight-box">
          \[ m_1 - m_2 = -\frac{4}{3} - \frac{3}{4} = -\frac{16}{12} - \frac{9}{12} = -\frac{25}{12} \]
        </div>
        <p>Izračunajmo imenilac:</p>
        <div class="highlight-box">
          \[ 1 + m_1 \cdot m_2 = 1 + (-1) = 0 \]
        </div>
        <p>Imenilac je <strong>nula</strong>, što znači:</p>
        <div class="highlight-box">
          \[ \tan \theta = \frac{25/12}{0} \to \infty \implies \theta = 90° \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step7">
      <div class="step-badge">7</div>
      <div class="step-title">Zaključak: tangente su normalne</div>
      <div class="step-text">
        <p>Pošto je \( m_1 \cdot m_2 = -1 \), tangente na elipsu i hiperbolu u presečnoj tački su <strong>međusobno normalne</strong> (grade ugao od \( 90° \)).</p>
        <p>Ovo znači da se elipsa i hiperbola seku pod pravim uglom, tj. one su <strong>ortogonalne krive</strong> u ovoj tački.</p>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="card insight-card">
    <h2>Ključni uvid</h2>
    <p>Elipsa \( \frac{x^2}{9} + \frac{y^2}{4} = 1 \) i hiperbola \( \frac{x^2}{4} - y^2 = 1 \) su <strong>konfokalne konike</strong>. Obe imaju žiže u tačkama \( (\pm c, 0) \) gde:</p>
    <div class="highlight-box">
      \[ \text{Elipsa: } c^2 = a^2 - b^2 = 9 - 4 = 5 \implies c = \sqrt{5} \]
      \[ \text{Hiperbola: } c^2 = a^2 + b^2 = 4 + 1 = 5 \implies c = \sqrt{5} \]
    </div>
    <p style="margin-top: 12px;">Poznato je iz teorije konika da se <strong>konfokalne konike uvek seku pod pravim uglom</strong>. Ovo je fundamentalni rezultat analitičke geometrije koji daje elegantan put do odgovora bez računanja.</p>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer-card">
    <h2 style="color: #4ade80;">Konačan odgovor</h2>
    <div class="final-answer-value">\( \theta = 90° \)</div>

    <div class="answer-options-row">
      <div class="answer-chip">(A) 45°</div>
      <div class="answer-chip">(B) 15°</div>
      <div class="answer-chip">(C) 60°</div>
      <div class="answer-chip correct">(D) 90°</div>
      <div class="answer-chip">(E) 30°</div>
    </div>

    <p class="verification">Verifikacija: \( m_1 \cdot m_2 = \left(-\frac{4}{3}\right) \cdot \frac{3}{4} = -1 \implies \) tangente su normalne \( \implies \theta = 90° \;\; \checkmark \)</p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfall-card">
    <h2>Česte greške</h2>
    <ul style="margin-left: 20px; margin-top: 8px;">
      <li style="margin-bottom: 10px;"><strong>Greška u implicitnom diferenciranju:</strong> Često se zaboravi da se \( y \) tretira kao funkcija od \( x \), pa se propusti faktor \( y' \) pri diferenciranju \( y^2 \). Rezultat \( \frac{d}{dx}(y^2) = 2y \cdot y' \), a ne \( 2y \).</li>
      <li style="margin-bottom: 10px;"><strong>Pogrešno uprošćavanje razlomaka:</strong> Pri deljenju dva razlomka oblika \( \frac{a/\sqrt{5}}{b/\sqrt{5}} \), koren \( \sqrt{5} \) se skrati. Ako se ne primeti ovo skraćivanje, račun postaje nepotrebno komplikovan.</li>
      <li style="margin-bottom: 10px;"><strong>Zaboravljanje specijalnog slučaja:</strong> Kada je imenilac u formuli za ugao jednak nuli, to ne znači da je ugao nedefinisan, već da je ugao tačno \( 90° \). Mnogi učenici se zbune misleći da je došlo do greške.</li>
      <li><strong>Pogrešna interpretacija hiperbole:</strong> Jednačina \( \frac{x^2}{4} - y^2 = 1 \) ima \( b^2 = 1 \) (ne \( b^2 = 4 \) za \( y \)). Pažljivo čitajte oblik jednačine.</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Dokažite opšte tvrđenje: ako su elipsa \( \frac{x^2}{a^2} + \frac{y^2}{b^2} = 1 \) i hiperbola \( \frac{x^2}{A^2} - \frac{y^2}{B^2} = 1 \) <strong>konfokalne</strong> (tj. \( a^2 - b^2 = A^2 + B^2 \)), tada se one seku pod pravim uglom u svim presečnim tačkama.</p>
    <p style="margin-top: 10px;"><em>Savet:</em> Koristite implicitno diferenciranje za obe krive i pokažite da za proizvod nagiba uvek važi \( m_1 \cdot m_2 = -1 \), koristeći uslov konfokalnosti i jednačine koje definišu presečnu tačku.</p>
  </div>

</div>

<script>
(() => {
  // Step click interaction
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.add('active');
    });
  });

  // Canvas: visualize the ellipse, hyperbola, tangent lines
  const canvas = document.getElementById('curvesCanvas');
  const ctx = canvas.getContext('2d');

  function resizeCanvas() {
    const rect = canvas.parentElement.getBoundingClientRect();
    const w = rect.width - 48;
    const h = 520;
    canvas.width = w * 2;
    canvas.height = h * 2;
    canvas.style.height = h + 'px';
    ctx.scale(2, 2);
    drawScene(w, h);
  }

  function drawScene(W, H) {
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.beginPath();
    ctx.roundRect(0, 0, W, H, 10);
    ctx.fill();

    // Coordinate system
    const cx = W / 2;
    const cy = H / 2 + 10;
    const scale = Math.min(W, H) / 10;

    // Draw axes
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(20, cy);
    ctx.lineTo(W - 20, cy);
    ctx.moveTo(cx, 20);
    ctx.lineTo(cx, H - 20);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('x', W - 15, cy - 8);
    ctx.fillText('y', cx + 12, 28);

    // Grid ticks
    ctx.fillStyle = '#475569';
    ctx.font = '10px Segoe UI, sans-serif';
    for (let i = -4; i <= 4; i++) {
      if (i === 0) continue;
      const tx = cx + i * scale;
      const ty = cy - i * scale;
      ctx.beginPath();
      ctx.moveTo(tx, cy - 3);
      ctx.lineTo(tx, cy + 3);
      ctx.stroke();
      ctx.fillText(i.toString(), tx, cy + 14);

      ctx.beginPath();
      ctx.moveTo(cx - 3, ty);
      ctx.lineTo(cx + 3, ty);
      ctx.stroke();
      ctx.fillText(i.toString(), cx - 14, ty + 4);
    }

    // Draw ellipse: x^2/9 + y^2/4 = 1
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    for (let t = 0; t <= 2 * Math.PI + 0.01; t += 0.02) {
      const ex = 3 * Math.cos(t);
      const ey = 2 * Math.sin(t);
      const px = cx + ex * scale;
      const py = cy - ey * scale;
      if (t === 0) ctx.moveTo(px, py);
      else ctx.lineTo(px, py);
    }
    ctx.stroke();

    // Draw hyperbola: x^2/4 - y^2 = 1 (right branch and left branch)
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2.5;

    // Right branch
    ctx.beginPath();
    let first = true;
    for (let t = -2.5; t <= 2.5; t += 0.02) {
      const hx = 2 * Math.cosh(t);
      const hy = Math.sinh(t);
      const px = cx + hx * scale;
      const py = cy - hy * scale;
      if (px > W - 10 || px < 10 || py > H - 10 || py < 10) { first = true; continue; }
      if (first) { ctx.moveTo(px, py); first = false; }
      else ctx.lineTo(px, py);
    }
    ctx.stroke();

    // Left branch
    ctx.beginPath();
    first = true;
    for (let t = -2.5; t <= 2.5; t += 0.02) {
      const hx = -2 * Math.cosh(t);
      const hy = Math.sinh(t);
      const px = cx + hx * scale;
      const py = cy - hy * scale;
      if (px > W - 10 || px < 10 || py > H - 10 || py < 10) { first = true; continue; }
      if (first) { ctx.moveTo(px, py); first = false; }
      else ctx.lineTo(px, py);
    }
    ctx.stroke();

    // Intersection point in first quadrant
    const ix = 6 / Math.sqrt(5);
    const iy = 2 / Math.sqrt(5);
    const ipx = cx + ix * scale;
    const ipy = cy - iy * scale;

    // Draw tangent lines at intersection point
    const m1 = -4 / 3; // ellipse tangent slope
    const m2 = 3 / 4;  // hyperbola tangent slope
    const tanLen = 2.0; // length in coordinate units

    // Tangent to ellipse (blue, dashed)
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.moveTo(cx + (ix - tanLen) * scale, cy - (iy + m1 * (-tanLen)) * scale);
    ctx.lineTo(cx + (ix + tanLen) * scale, cy - (iy + m1 * tanLen) * scale);
    ctx.stroke();
    ctx.setLineDash([]);

    // Tangent to hyperbola (purple, dashed)
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.moveTo(cx + (ix - tanLen) * scale, cy - (iy + m2 * (-tanLen)) * scale);
    ctx.lineTo(cx + (ix + tanLen) * scale, cy - (iy + m2 * tanLen) * scale);
    ctx.stroke();
    ctx.setLineDash([]);

    // Draw right angle symbol at intersection
    const rSize = 12;
    // Normalize tangent direction vectors
    const d1x = 1 / Math.sqrt(1 + m1 * m1);
    const d1y = m1 / Math.sqrt(1 + m1 * m1);
    const d2x = 1 / Math.sqrt(1 + m2 * m2);
    const d2y = m2 / Math.sqrt(1 + m2 * m2);

    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2;
    ctx.setLineDash([]);
    ctx.beginPath();
    const r1x = ipx + d1x * rSize;
    const r1y = ipy - d1y * rSize;
    const r2x = ipx + d2x * rSize;
    const r2y = ipy - d2y * rSize;
    const rcx = r1x + d2x * rSize;
    const rcy = r1y - d2y * rSize;
    ctx.moveTo(r1x, r1y);
    ctx.lineTo(rcx, rcy);
    ctx.lineTo(r2x, r2y);
    ctx.stroke();

    // Draw intersection point
    ctx.fillStyle = '#4ade80';
    ctx.beginPath();
    ctx.arc(ipx, ipy, 6, 0, 2 * Math.PI);
    ctx.fill();

    // Draw foci
    const fc = Math.sqrt(5);
    ctx.fillStyle = '#f472b6';
    ctx.beginPath();
    ctx.arc(cx + fc * scale, cy, 5, 0, 2 * Math.PI);
    ctx.fill();
    ctx.beginPath();
    ctx.arc(cx - fc * scale, cy, 5, 0, 2 * Math.PI);
    ctx.fill();

    // Labels
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 13px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Elipsa', cx + 3.1 * scale, cy - 1.8 * scale);

    ctx.fillStyle = '#a78bfa';
    ctx.fillText('Hiperbola', cx + 2.1 * scale, cy - 2.6 * scale);

    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 12px Segoe UI, sans-serif';
    ctx.fillText('(6/\u221A5, 2/\u221A5)', ipx + 10, ipy - 10);
    ctx.fillText('\u03B8 = 90\u00B0', ipx + 10, ipy + 20);

    ctx.fillStyle = '#f472b6';
    ctx.font = '11px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('F\u2081', cx + fc * scale, cy + 18);
    ctx.fillText('F\u2082', cx - fc * scale, cy + 18);
    ctx.fillText('Zajedni\u010Dke \u017Ei\u017Ee (\u00B1\u221A5, 0)', cx, cy + 36);

    // Legend
    const lx = 20;
    const ly = 20;
    ctx.fillStyle = '#0c1222cc';
    ctx.beginPath();
    ctx.roundRect(lx, ly, 200, 90, 8);
    ctx.fill();
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.roundRect(lx, ly, 200, 90, 8);
    ctx.stroke();

    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 11px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Legenda:', lx + 10, ly + 18);

    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(lx + 10, ly + 35);
    ctx.lineTo(lx + 35, ly + 35);
    ctx.stroke();
    ctx.fillStyle = '#e2e8f0';
    ctx.font = '11px Segoe UI, sans-serif';
    ctx.fillText('Elipsa: x\u00B2/9 + y\u00B2/4 = 1', lx + 42, ly + 39);

    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(lx + 10, ly + 55);
    ctx.lineTo(lx + 35, ly + 55);
    ctx.stroke();
    ctx.fillStyle = '#e2e8f0';
    ctx.fillText('Hiperbola: x\u00B2/4 \u2212 y\u00B2 = 1', lx + 42, ly + 59);

    ctx.fillStyle = '#f472b6';
    ctx.beginPath();
    ctx.arc(lx + 22, ly + 77, 4, 0, 2 * Math.PI);
    ctx.fill();
    ctx.fillStyle = '#e2e8f0';
    ctx.fillText('Zajedni\u010Dke \u017Ei\u017Ee (\u00B1\u221A5, 0)', lx + 42, ly + 81);
  }

  resizeCanvas();
  window.addEventListener('resize', resizeCanvas);
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Ugao između elipse i hiperbole u presečnoj tački",
  "subject": "math",
  "unit": "geometry",
  "topic_tags": ["elipsa", "hiperbola", "konike", "implicitno diferenciranje", "tangenta", "ugao između krivih", "ortogonalne krive", "konfokalne konike"]
}
BRAINSPARK_META-->