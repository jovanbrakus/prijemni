<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nejednačina sa korenom i logaritmom - Skup rešenja</title>
<script type="text/info" id="logic-scratchpad">
Problem: √(7 − log₂(x²)) + log₂(x⁴) > 4
Find the form of the solution set.

Step 1: Substitution
Let t = log₂(x²) = 2·log₂|x|. Note x ≠ 0.
Then log₂(x⁴) = 2·log₂(x²) = 2t.

Step 2: Domain
We need 7 − t ≥ 0, so t ≤ 7.
Also x ≠ 0 (log domain).

Step 3: Transformed inequality
√(7 − t) + 2t > 4

Step 4: Second substitution
Let u = √(7 − t), so u ≥ 0 and t = 7 − u².
Substitute: u + 2(7 − u²) > 4
u + 14 − 2u² > 4
−2u² + u + 10 > 0
2u² − u − 10 < 0

Step 5: Solve quadratic
Discriminant = 1 + 80 = 81
u = (1 ± 9)/4
u₁ = (1 + 9)/4 = 10/4 = 5/2
u₂ = (1 − 9)/4 = −8/4 = −2

So 2u² − u − 10 < 0 when u ∈ (−2, 5/2).
Since u ≥ 0, we get u ∈ [0, 5/2).

Step 6: Back to t
u ∈ [0, 5/2) means √(7−t) ∈ [0, 5/2)
At u = 0: t = 7
At u = 5/2: t = 7 − 25/4 = 3/4

Since √(7−t) is decreasing in t, u < 5/2 ↔ t > 3/4
And u ≥ 0 ↔ t ≤ 7.
So t ∈ (3/4, 7].

Check boundary:
At t = 3/4: √(7 − 3/4) + 2(3/4) = √(25/4) + 3/2 = 5/2 + 3/2 = 4. NOT > 4. Excluded. ✓
At t = 7: √0 + 14 = 14 > 4. Included. ✓

Step 7: Back to x
t = log₂(x²) ∈ (3/4, 7]
x² ∈ (2^(3/4), 2^7] = (2^(3/4), 128]
|x| ∈ (2^(3/8), 2^(7/2)] = (2^(3/8), 8√2]

So x ∈ [−8√2, −2^(3/8)) ∪ (2^(3/8), 8√2]

This is form (B): [a, b) ∪ (c, d] with:
a = −8√2, b = −2^(3/8), c = 2^(3/8), d = 8√2

Answer: (B)
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}
h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}
.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}
.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}
.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}
.card h3 {
  color: #a78bfa;
  font-size: 1.15rem;
  margin-bottom: 10px;
}
.highlight-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  font-size: 1.05rem;
  text-align: center;
}
.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}
.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  text-align: center;
  min-width: 80px;
  flex: 1;
}
.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}
.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}
.answer-option {
  cursor: default;
  transition: border-color 0.2s;
}
.plan-card {
  border-left: 3px solid #a78bfa;
}
details {
  background: rgba(167,139,250,0.06);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 12px 0;
}
details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 1.05rem;
  padding: 4px 0;
}
details summary:hover {
  color: #c4b5fd;
}
details[open] summary {
  margin-bottom: 12px;
}
.step-container {
  position: relative;
  padding-left: 50px;
  margin-bottom: 20px;
  cursor: pointer;
  border-left: 3px solid transparent;
  transition: border-color 0.2s, background 0.2s;
  border-radius: 8px;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-right: 8px;
}
.step-container:hover, .step-container.active {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}
.step-badge {
  position: absolute;
  left: 8px;
  top: 12px;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
}
.step-title {
  color: #60a5fa;
  font-weight: 600;
  font-size: 1.1rem;
  margin-bottom: 6px;
}
.step-text {
  color: #e2e8f0;
  margin-bottom: 8px;
}
.final-answer-card {
  border: 2px solid #4ade80;
  text-align: center;
}
.final-answer-value {
  color: #4ade80;
  font-size: 2rem;
  font-weight: 700;
  margin: 16px 0;
}
.answer-options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 16px 0;
}
.answer-chip {
  padding: 10px 22px;
  border-radius: 10px;
  font-size: 1.05rem;
  font-weight: 600;
  border: 2px solid #334155;
  background: rgba(30,41,59,0.8);
  color: #94a3b8;
  transition: all 0.2s;
}
.answer-chip.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.12);
  color: #4ade80;
}
.pitfall-card {
  border-left: 3px solid #e09468;
}
.pitfall-card h2 {
  color: #e09468;
}
.challenge-card {
  border-left: 3px solid #f472b6;
}
.challenge-card h2 {
  color: #f472b6;
}
.verification {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 10px;
}
canvas {
  width: 100%;
  border-radius: 10px;
  display: block;
  margin: 0 auto;
}
.insight-card {
  border-left: 3px solid #60a5fa;
}
.micro-check details {
  background: rgba(52,211,153,0.06);
  border-color: rgba(52,211,153,0.2);
}
.micro-check details summary {
  color: #34d399;
}
@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step-container { padding-left: 42px; }
  .given-grid { flex-direction: column; }
  .answer-options-row { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Nejednačina sa korenom i logaritmom</h1>
  <p class="subtitle">Određivanje skupa rešenja nejednačine sa \(\sqrt{\phantom{x}}\) i \(\log_2\) pomoću smene promenljive</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Skup svih realnih rešenja nejednačine</p>
    <div class="highlight-box">
      \[ \sqrt{7 - \log_2(x^2)} + \log_2(x^4) > 4 \]
    </div>
    <p>je oblika (za neke \( a, b, c, d \in \mathbb{R} \) takve da je \( -\infty < a < b < c < d < +\infty \)):</p>

    <div class="given-grid">
      <div class="given-item">
        <div class="label">Tip</div>
        <div class="value">Nejednačina</div>
      </div>
      <div class="given-item">
        <div class="label">Funkcije</div>
        <div class="value">\(\sqrt{\phantom{x}}\), \(\log_2\)</div>
      </div>
      <div class="given-item">
        <div class="label">Traži se</div>
        <div class="value">Oblik skupa rešenja</div>
      </div>
    </div>

    <h3 style="margin-top: 20px;">Ponuđeni odgovori</h3>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\([a, b]\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\([a, b) \cup (c, d]\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\((-\infty, a) \cup [b, c]\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\((-\infty, a) \cup (b, c) \cup (d, +\infty)\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\([a, b] \cup (c, +\infty)\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan rešavanja</h2>
    <p>Koristićemo smenu \( t = \log_2(x^2) \) da svedemo nejednačinu na oblik sa jednom nepoznatom. Zatim ćemo uvesti drugu smenu \( u = \sqrt{7 - t} \) da bismo dobili kvadratnu nejednačinu. Nakon rešavanja, vratićemo se na promenljivu \( x \) i odredićemo oblik skupa rešenja.</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Ključne formule i teoreme</summary>
      <div style="margin-top: 10px;">
        <p><strong>Logaritamske osobine:</strong></p>
        <ul style="margin-left: 20px; margin-top: 8px; color: #e2e8f0;">
          <li>\( \log_a(x^n) = n \cdot \log_a(x) \) za \( x > 0 \)</li>
          <li>\( \log_a(x^2) = 2 \cdot \log_a|x| \) za \( x \ne 0 \)</li>
          <li>\( \log_a(x^4) = 4 \cdot \log_a|x| = 2 \cdot \log_a(x^2) \) za \( x \ne 0 \)</li>
        </ul>
        <p style="margin-top: 12px;"><strong>Domen korena:</strong></p>
        <ul style="margin-left: 20px; margin-top: 8px; color: #e2e8f0;">
          <li>\( \sqrt{A} \) je definisano za \( A \ge 0 \)</li>
        </ul>
        <p style="margin-top: 12px;"><strong>Kvadratna nejednačina:</strong></p>
        <ul style="margin-left: 20px; margin-top: 8px; color: #e2e8f0;">
          <li>Ako je \( ax^2 + bx + c < 0 \) i \( a > 0 \), rešenje je \( x \in (x_1, x_2) \) gde su \( x_1, x_2 \) koreni</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- Canvas Visual -->
  <div class="card">
    <h2>Vizuelni prikaz — brojevna prava</h2>
    <canvas id="numberLineCanvas" height="340"></canvas>
  </div>

  <!-- Step-by-step Solution -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <div class="step-container" id="step1">
      <div class="step-badge">1</div>
      <div class="step-title">Domen i smena \( t = \log_2(x^2) \)</div>
      <div class="step-text">
        <p>Pre svega, \( x \ne 0 \) (domen logaritma). Uvedimo smenu:</p>
        <div class="highlight-box">
          \[ t = \log_2(x^2) = 2\log_2|x| \]
        </div>
        <p>Tada je \( \log_2(x^4) = \log_2\!\bigl((x^2)^2\bigr) = 2\log_2(x^2) = 2t \).</p>
        <p>Uslov pod korenom: \( 7 - t \ge 0 \), dakle \( t \le 7 \).</p>
        <p>Nejednačina postaje:</p>
        <div class="highlight-box">
          \[ \sqrt{7 - t} + 2t > 4, \quad t \le 7 \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step2">
      <div class="step-badge">2</div>
      <div class="step-title">Druga smena \( u = \sqrt{7 - t} \)</div>
      <div class="step-text">
        <p>Neka je \( u = \sqrt{7 - t} \ge 0 \). Tada je \( u^2 = 7 - t \), pa \( t = 7 - u^2 \). Zamenom u nejednačinu:</p>
        <div class="highlight-box">
          \[ u + 2(7 - u^2) > 4 \]
        </div>
        <p>Sredimo:</p>
        <div class="highlight-box">
          \[ u + 14 - 2u^2 > 4 \implies -2u^2 + u + 10 > 0 \implies 2u^2 - u - 10 < 0 \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step3">
      <div class="step-badge">3</div>
      <div class="step-title">Rešavanje kvadratne nejednačine po \( u \)</div>
      <div class="step-text">
        <p>Rešavamo \( 2u^2 - u - 10 = 0 \):</p>
        <div class="highlight-box">
          \[ D = (-1)^2 - 4 \cdot 2 \cdot (-10) = 1 + 80 = 81 \]
        </div>
        <div class="highlight-box">
          \[ u = \frac{1 \pm \sqrt{81}}{4} = \frac{1 \pm 9}{4} \]
        </div>
        <p>Dobijamo dva korena:</p>
        <div class="highlight-box">
          \[ u_1 = \frac{1 + 9}{4} = \frac{10}{4} = \frac{5}{2}, \qquad u_2 = \frac{1 - 9}{4} = \frac{-8}{4} = -2 \]
        </div>
        <p>Nejednačina \( 2u^2 - u - 10 < 0 \) važi za \( u \in (-2,\; \tfrac{5}{2}) \).</p>
        <p>Kako je \( u \ge 0 \), dobijamo:</p>
        <div class="highlight-box">
          \[ u \in \left[0,\; \frac{5}{2}\right) \]
        </div>
      </div>
    </div>

    <div class="micro-check">
      <details>
        <summary>Proveri se: Zašto je \( u = 5/2 \) isključeno?</summary>
        <p style="margin-top: 8px;">Za \( u = \frac{5}{2} \): \( 2 \cdot \frac{25}{4} - \frac{5}{2} - 10 = \frac{50}{4} - \frac{10}{4} - \frac{40}{4} = 0 \). Dakle, \( u = \frac{5}{2} \) daje jednakost, ne strogu nejednačinu. Zato koristimo otvorenu zagradu!</p>
      </details>
    </div>

    <div class="step-container" id="step4">
      <div class="step-badge">4</div>
      <div class="step-title">Vraćanje na promenljivu \( t \)</div>
      <div class="step-text">
        <p>Iz \( u = \sqrt{7 - t} \in [0,\; \frac{5}{2}) \) izvodimo granice za \( t \):</p>
        <p>Funkcija \( u = \sqrt{7-t} \) je opadajuća u \( t \), pa:</p>
        <ul style="margin-left: 20px; margin-top: 8px;">
          <li>\( u \ge 0 \iff 7 - t \ge 0 \iff t \le 7 \)</li>
          <li>\( u < \frac{5}{2} \iff 7 - t < \frac{25}{4} \iff t > 7 - \frac{25}{4} = \frac{3}{4} \)</li>
        </ul>
        <div class="highlight-box">
          \[ t \in \left(\frac{3}{4},\; 7\right] \]
        </div>
      </div>
    </div>

    <div class="micro-check">
      <details>
        <summary>Proveri se: Provera graničnih vrednosti</summary>
        <p style="margin-top: 8px;">Za \( t = \frac{3}{4} \): \( \sqrt{7 - \frac{3}{4}} + 2 \cdot \frac{3}{4} = \sqrt{\frac{25}{4}} + \frac{3}{2} = \frac{5}{2} + \frac{3}{2} = 4 \). Nije strogo veće od 4, pa je \( t = \frac{3}{4} \) isključeno.</p>
        <p>Za \( t = 7 \): \( \sqrt{0} + 14 = 14 > 4 \;\checkmark \). Uključeno.</p>
      </details>
    </div>

    <div class="step-container" id="step5">
      <div class="step-badge">5</div>
      <div class="step-title">Vraćanje na promenljivu \( x \)</div>
      <div class="step-text">
        <p>Sada iz \( t = \log_2(x^2) \in \bigl(\frac{3}{4},\; 7\bigr] \) izvodimo:</p>
        <div class="highlight-box">
          \[ x^2 \in \left(2^{3/4},\; 2^7\right] = \left(2^{3/4},\; 128\right] \]
        </div>
        <p>Odavde za apsolutnu vrednost:</p>
        <div class="highlight-box">
          \[ |x| \in \left(2^{3/8},\; 2^{7/2}\right] = \left(2^{3/8},\; 8\sqrt{2}\right] \]
        </div>
        <p>Razrešavajući apsolutnu vrednost, dobijamo:</p>
        <div class="highlight-box">
          \[ x \in \left[-8\sqrt{2},\; -2^{3/8}\right) \cup \left(2^{3/8},\; 8\sqrt{2}\right] \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step6">
      <div class="step-badge">6</div>
      <div class="step-title">Analiza tipa intervala i zagrade</div>
      <div class="step-text">
        <p>Pogledajmo pažljivo zagrade:</p>
        <ul style="margin-left: 20px; margin-top: 8px;">
          <li><strong>Levi interval:</strong> \( [-8\sqrt{2},\; -2^{3/8}) \) — zatvorena na \( -8\sqrt{2} \) (uključena), otvorena na \( -2^{3/8} \) (isključena)</li>
          <li><strong>Desni interval:</strong> \( (2^{3/8},\; 8\sqrt{2}] \) — otvorena na \( 2^{3/8} \) (isključena), zatvorena na \( 8\sqrt{2} \) (uključena)</li>
        </ul>
        <p style="margin-top: 12px;">Zašto su \( \pm 8\sqrt{2} \) uključeni? Jer za \( |x| = 8\sqrt{2} = 2^{7/2} \) dobijamo \( t = 7 \le 7 \;\checkmark\)</p>
        <p>Zašto su \( \pm 2^{3/8} \) isključeni? Jer za \( |x| = 2^{3/8} \) dobijamo \( t = \frac{3}{4} \), a leva strana jednaka 4, ne strogo veća.</p>
      </div>
    </div>

    <div class="step-container" id="step7">
      <div class="step-badge">7</div>
      <div class="step-title">Prepoznavanje oblika iz ponuđenih odgovora</div>
      <div class="step-text">
        <p>Skup rešenja je:</p>
        <div class="highlight-box">
          \[ \underbrace{[-8\sqrt{2}}_{a},\; \underbrace{-2^{3/8}}_{b}) \;\cup\; (\underbrace{2^{3/8}}_{c},\; \underbrace{8\sqrt{2}}_{d}] \]
        </div>
        <p>gde je \( a = -8\sqrt{2} < b = -2^{3/8} < 0 < c = 2^{3/8} < d = 8\sqrt{2} \).</p>
        <p>Ovo je oblik \( [a, b) \cup (c, d] \), što odgovara <strong>odgovoru (B)</strong>.</p>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="card insight-card">
    <h2>Ključni uvid</h2>
    <p>Simetrija skupa rešenja dolazi od toga što nejednačina zavisi od \( x^2 \) i \( x^4 \), dakle samo od \( |x| \). Zato je skup rešenja simetričan u odnosu na nulu. Međutim, <strong>zagrade su „obrnute"</strong> na negativnoj poluosi u odnosu na pozitivnu — zatvorena na spoljašnjem kraju, otvorena na unutrašnjem.</p>
    <div class="highlight-box">
      \[ |x| \in (2^{3/8},\; 8\sqrt{2}] \;\Longrightarrow\; x \in [-8\sqrt{2},\; -2^{3/8}) \cup (2^{3/8},\; 8\sqrt{2}] \]
    </div>
    <p>Ovo „ogledalo" zagrade je ključ za prepoznavanje odgovora (B).</p>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer-card">
    <h2 style="color: #4ade80;">Konačan odgovor</h2>
    <div class="final-answer-value">\( [a, b) \cup (c, d] \) — odgovor (B)</div>

    <div class="answer-options-row">
      <div class="answer-chip">(A) \([a, b]\)</div>
      <div class="answer-chip correct">(B) \([a, b) \cup (c, d]\)</div>
      <div class="answer-chip">(C) \((-\infty, a) \cup [b, c]\)</div>
      <div class="answer-chip">(D) \((-\infty, a) \cup (b, c) \cup (d, +\infty)\)</div>
      <div class="answer-chip">(E) \([a, b] \cup (c, +\infty)\)</div>
    </div>

    <p class="verification">
      Verifikacija: Za \( x = 8\sqrt{2} \): \( \log_2(128) = 7 \), pa \( \sqrt{0} + 14 = 14 > 4\;\checkmark \)<br>
      Za \( x = 2^{3/8} \): \( t = \frac{3}{4} \), pa \( \sqrt{\frac{25}{4}} + \frac{3}{2} = 4 \), nije \( > 4 \) — isključeno \(\checkmark\)
    </p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfall-card">
    <h2>Česte greške</h2>
    <ul style="margin-left: 20px; margin-top: 8px;">
      <li style="margin-bottom: 10px;"><strong>Zaboravljanje da \( x \ne 0 \):</strong> Logaritam \( \log_2(x^2) \) nije definisan za \( x = 0 \). U ovom zadatku nula ionako nije u rešenju, ali domen treba uvek proveriti.</li>
      <li style="margin-bottom: 10px;"><strong>Zamena \( \log_2(x^4) = 4\log_2 x \):</strong> Ovo važi samo za \( x > 0 \). Za sve realne \( x \ne 0 \) tačno je \( \log_2(x^4) = 4\log_2|x| = 2\log_2(x^2) \).</li>
      <li style="margin-bottom: 10px;"><strong>Pogrešan smer nejednakosti pri vraćanju smene:</strong> Funkcija \( u = \sqrt{7 - t} \) je opadajuća, pa se pri prelasku sa \( u < \frac{5}{2} \) na \( t \) smer nejednačine menja.</li>
      <li><strong>Pogrešne zagrade:</strong> Pošto nejednačina ima strogi znak \( > \), granične vrednosti gde važi jednakost moraju biti isključene. Domen korena (\( t \le 7 \)) daje zatvorenu zagradu na drugom kraju.</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Razmisli šta bi se desilo da je nejednačina bila nestrogа:</p>
    <div class="highlight-box">
      \[ \sqrt{7 - \log_2(x^2)} + \log_2(x^4) \ge 4 \]
    </div>
    <p>Tada bi granična tačka \( t = \frac{3}{4} \) bila uključena, pa bi skup rešenja bio \( [-8\sqrt{2},\; -2^{3/8}] \cup [2^{3/8},\; 8\sqrt{2}] \), što odgovara obliku \( [a, b] \cup [c, d] \). Obrati pažnju kako strogi/nestrogi znak menja tip zagrada!</p>
  </div>

</div>

<script>
(() => {
  // Step click interaction
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.add('active');
    });
  });

  // Canvas: number line visualization
  const canvas = document.getElementById('numberLineCanvas');
  const ctx = canvas.getContext('2d');

  function resizeCanvas() {
    const rect = canvas.parentElement.getBoundingClientRect();
    const w = rect.width - 48;
    canvas.width = w * 2;
    canvas.height = 340 * 2;
    canvas.style.height = '340px';
    ctx.scale(2, 2);
    drawNumberLine(w);
  }

  function drawNumberLine(W) {
    const H = 340;
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.beginPath();
    ctx.roundRect(0, 0, W, H, 10);
    ctx.fill();

    // Title
    ctx.fillStyle = '#94a3b8';
    ctx.font = '14px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Skup rešenja na brojevnoj pravoj', W / 2, 28);

    // Constants
    const val238 = Math.pow(2, 3/8);  // ≈ 1.297
    const val8s2 = 8 * Math.sqrt(2);   // ≈ 11.314

    // Number line parameters
    const margin = 60;
    const lineY = 90;
    const lineLeft = margin;
    const lineRight = W - margin;
    const lineLen = lineRight - lineLeft;

    // Map value to x coordinate (range: -14 to 14)
    const rangeMin = -14;
    const rangeMax = 14;
    function valToX(v) {
      return lineLeft + (v - rangeMin) / (rangeMax - rangeMin) * lineLen;
    }

    // Draw axis
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(lineLeft, lineY);
    ctx.lineTo(lineRight, lineY);
    ctx.stroke();

    // Draw arrow tips
    ctx.fillStyle = '#475569';
    ctx.beginPath();
    ctx.moveTo(lineRight, lineY);
    ctx.lineTo(lineRight - 8, lineY - 4);
    ctx.lineTo(lineRight - 8, lineY + 4);
    ctx.fill();
    ctx.beginPath();
    ctx.moveTo(lineLeft, lineY);
    ctx.lineTo(lineLeft + 8, lineY - 4);
    ctx.lineTo(lineLeft + 8, lineY + 4);
    ctx.fill();

    // Draw tick at 0
    ctx.strokeStyle = '#64748b';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(valToX(0), lineY - 6);
    ctx.lineTo(valToX(0), lineY + 6);
    ctx.stroke();
    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('0', valToX(0), lineY + 20);

    // Solution intervals on number line
    // Left interval: [-8√2, -2^(3/8))
    const leftA = valToX(-val8s2);
    const leftB = valToX(-val238);
    // Right interval: (2^(3/8), 8√2]
    const rightC = valToX(val238);
    const rightD = valToX(val8s2);

    // Draw solution regions (filled bars)
    const barH = 8;

    // Left interval fill
    const gradL = ctx.createLinearGradient(leftA, 0, leftB, 0);
    gradL.addColorStop(0, 'rgba(96, 165, 250, 0.5)');
    gradL.addColorStop(1, 'rgba(167, 139, 250, 0.5)');
    ctx.fillStyle = gradL;
    ctx.fillRect(leftA, lineY - barH/2, leftB - leftA, barH);

    // Right interval fill
    const gradR = ctx.createLinearGradient(rightC, 0, rightD, 0);
    gradR.addColorStop(0, 'rgba(167, 139, 250, 0.5)');
    gradR.addColorStop(1, 'rgba(96, 165, 250, 0.5)');
    ctx.fillStyle = gradR;
    ctx.fillRect(rightC, lineY - barH/2, rightD - rightC, barH);

    // Draw endpoint markers
    function drawClosedDot(x) {
      ctx.fillStyle = '#4ade80';
      ctx.beginPath();
      ctx.arc(x, lineY, 5, 0, 2 * Math.PI);
      ctx.fill();
    }
    function drawOpenDot(x) {
      ctx.strokeStyle = '#f472b6';
      ctx.lineWidth = 2;
      ctx.fillStyle = '#0c1222';
      ctx.beginPath();
      ctx.arc(x, lineY, 5, 0, 2 * Math.PI);
      ctx.fill();
      ctx.stroke();
    }

    // Left interval: [closed, open)
    drawClosedDot(leftA);   // -8√2 included
    drawOpenDot(leftB);     // -2^(3/8) excluded

    // Right interval: (open, closed]
    drawOpenDot(rightC);    // 2^(3/8) excluded
    drawClosedDot(rightD);  // 8√2 included

    // Labels for endpoints
    ctx.font = '11px Segoe UI, sans-serif';
    ctx.textAlign = 'center';

    ctx.fillStyle = '#4ade80';
    ctx.fillText('-8\u221A2', leftA, lineY + 22);
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('\u2248 -11{,}31', leftA, lineY + 36);

    ctx.fillStyle = '#f472b6';
    ctx.fillText('-2^(3/8)', leftB, lineY - 14);
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('\u2248 -1{,}30', leftB, lineY - 28);

    ctx.fillStyle = '#f472b6';
    ctx.fillText('2^(3/8)', rightC, lineY - 14);
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('\u2248 1{,}30', rightC, lineY - 28);

    ctx.fillStyle = '#4ade80';
    ctx.fillText('8\u221A2', rightD, lineY + 22);
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('\u2248 11{,}31', rightD, lineY + 36);

    // Legend
    const legendY = 150;
    ctx.font = '13px Segoe UI, sans-serif';
    ctx.textAlign = 'left';

    // Closed dot legend
    ctx.fillStyle = '#4ade80';
    ctx.beginPath();
    ctx.arc(margin + 10, legendY, 5, 0, 2*Math.PI);
    ctx.fill();
    ctx.fillStyle = '#e2e8f0';
    ctx.fillText('= uključena tačka (zatvorena zagrada)', margin + 22, legendY + 4);

    // Open dot legend
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2;
    ctx.fillStyle = '#0c1222';
    ctx.beginPath();
    ctx.arc(margin + 10, legendY + 26, 5, 0, 2*Math.PI);
    ctx.fill();
    ctx.stroke();
    ctx.fillStyle = '#e2e8f0';
    ctx.fillText('= isključena tačka (otvorena zagrada)', margin + 22, legendY + 30);

    // Draw interval notation
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 14px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('[-8\u221A2, -2^(3/8))  \u222A  (2^(3/8), 8\u221A2]', W/2, legendY + 70);

    // Draw the transformation chain
    const chainY = legendY + 105;
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Lanac smena:', W/2, chainY);

    const boxW = 120;
    const boxH = 36;
    const gap = 20;
    const arrowLen = 24;
    const totalW = 3 * boxW + 2 * (gap + arrowLen);
    const startX = (W - totalW) / 2;

    // Box 1: u
    drawChainBox(startX, chainY + 12, boxW, boxH, 'u \u2208 [0, 5/2)', '#a78bfa');
    // Arrow
    drawChainArrow(startX + boxW, chainY + 12 + boxH/2, arrowLen + gap);
    // Box 2: t
    drawChainBox(startX + boxW + gap + arrowLen, chainY + 12, boxW, boxH, 't \u2208 (3/4, 7]', '#60a5fa');
    // Arrow
    drawChainArrow(startX + 2*boxW + gap + arrowLen, chainY + 12 + boxH/2, arrowLen + gap);
    // Box 3: x
    drawChainBox(startX + 2*(boxW + gap + arrowLen), chainY + 12, boxW + 20, boxH, '|x| \u2208 (2^(3/8), 8\u221A2]', '#4ade80');

    // Final answer highlight
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 15px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Odgovor: (B)  [a, b) \u222A (c, d]', W/2, chainY + 78);
  }

  function drawChainBox(x, y, w, h, text, color) {
    ctx.strokeStyle = color;
    ctx.lineWidth = 1.5;
    ctx.fillStyle = 'rgba(15, 23, 42, 0.8)';
    ctx.beginPath();
    ctx.roundRect(x, y, w, h, 6);
    ctx.fill();
    ctx.stroke();

    ctx.fillStyle = color;
    ctx.font = '12px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText(text, x + w/2, y + h/2 + 4);
  }

  function drawChainArrow(x, y, len) {
    ctx.strokeStyle = '#64748b';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(x, y);
    ctx.lineTo(x + len, y);
    ctx.stroke();

    ctx.fillStyle = '#64748b';
    ctx.beginPath();
    ctx.moveTo(x + len, y);
    ctx.lineTo(x + len - 6, y - 3);
    ctx.lineTo(x + len - 6, y + 3);
    ctx.fill();
  }

  resizeCanvas();
  window.addEventListener('resize', resizeCanvas);
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Nejednačina sa korenom i logaritmom - skup rešenja",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["logaritamske nejednačine", "smena promenljive", "kvadratne nejednačine", "domen funkcije", "apsolutna vrednost"]
}
BRAINSPARK_META-->