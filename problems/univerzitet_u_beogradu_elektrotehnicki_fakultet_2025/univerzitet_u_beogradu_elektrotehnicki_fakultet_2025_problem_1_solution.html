<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ugnježdeni koreni - Jednačina sa stepenima</title>
<script type="text/info" id="logic-scratchpad">
Problem: sqrt(x * sqrt(x * sqrt(x * sqrt(x * sqrt(x))))) = 2
x = 2^(p/q), gcd(p,q) = 1, find p + q.

Let's work from the inside out, expressing each nested radical as a power of x.

Layer 1 (innermost): sqrt(x) = x^(1/2)

Layer 2: sqrt(x * x^(1/2)) = sqrt(x^(1 + 1/2)) = sqrt(x^(3/2)) = x^(3/4)

Layer 3: sqrt(x * x^(3/4)) = sqrt(x^(1 + 3/4)) = sqrt(x^(7/4)) = x^(7/8)

Layer 4: sqrt(x * x^(7/8)) = sqrt(x^(1 + 7/8)) = sqrt(x^(15/8)) = x^(15/16)

Layer 5 (outermost): sqrt(x * x^(15/16)) = sqrt(x^(1 + 15/16)) = sqrt(x^(31/16)) = x^(31/32)

So the equation becomes: x^(31/32) = 2

Substituting x = 2^(p/q):
2^((p/q) * (31/32)) = 2^1
(31p)/(32q) = 1
31p = 32q
p/q = 32/31

Check: gcd(32, 31) = 1 (yes, 31 is prime, 32 = 2^5, so they are coprime)
p = 32, q = 31
p + q = 32 + 31 = 63

Answer: (E) 63

Verification pattern:
The exponents follow the pattern: a_n = (2^n - 1) / 2^n
For n = 1: 1/2
For n = 2: 3/4
For n = 3: 7/8
For n = 4: 15/16
For n = 5: 31/32

This is because a_1 = 1/2, and a_{n+1} = (1 + a_n)/2.
If a_n = (2^n - 1)/2^n, then a_{n+1} = (1 + (2^n-1)/2^n)/2 = (2^n + 2^n - 1)/(2^(n+1)) = (2^(n+1) - 1)/2^(n+1). Confirmed.

So x^(31/32) = 2 => x = 2^(32/31) => p = 32, q = 31, p + q = 63.
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}
h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}
.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}
.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}
.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}
.card h3 {
  color: #a78bfa;
  font-size: 1.15rem;
  margin-bottom: 10px;
}
.highlight-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  font-size: 1.05rem;
  text-align: center;
}
.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}
.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  text-align: center;
  min-width: 80px;
  flex: 1;
}
.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}
.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}
.answer-option {
  cursor: default;
  transition: border-color 0.2s;
}
.plan-card {
  border-left: 3px solid #a78bfa;
}
details {
  background: rgba(167,139,250,0.06);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 12px 0;
}
details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 1.05rem;
  padding: 4px 0;
}
details summary:hover {
  color: #c4b5fd;
}
details[open] summary {
  margin-bottom: 12px;
}
.step-container {
  position: relative;
  padding-left: 50px;
  margin-bottom: 20px;
  cursor: pointer;
  border-left: 3px solid transparent;
  transition: border-color 0.2s, background 0.2s;
  border-radius: 8px;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-right: 8px;
}
.step-container:hover, .step-container.active {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}
.step-badge {
  position: absolute;
  left: 8px;
  top: 12px;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
}
.step-title {
  color: #60a5fa;
  font-weight: 600;
  font-size: 1.1rem;
  margin-bottom: 6px;
}
.step-text {
  color: #e2e8f0;
  margin-bottom: 8px;
}
.final-answer-card {
  border: 2px solid #4ade80;
  text-align: center;
}
.final-answer-value {
  color: #4ade80;
  font-size: 2rem;
  font-weight: 700;
  margin: 16px 0;
}
.answer-options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 16px 0;
}
.answer-chip {
  padding: 10px 22px;
  border-radius: 10px;
  font-size: 1.05rem;
  font-weight: 600;
  border: 2px solid #334155;
  background: rgba(30,41,59,0.8);
  color: #94a3b8;
  transition: all 0.2s;
}
.answer-chip.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.12);
  color: #4ade80;
}
.pitfall-card {
  border-left: 3px solid #e09468;
}
.pitfall-card h2 {
  color: #e09468;
}
.challenge-card {
  border-left: 3px solid #f472b6;
}
.challenge-card h2 {
  color: #f472b6;
}
.verification {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 10px;
}
canvas {
  width: 100%;
  border-radius: 10px;
  display: block;
  margin: 0 auto;
}
.insight-card {
  border-left: 3px solid #60a5fa;
}
.micro-check details {
  background: rgba(52,211,153,0.06);
  border-color: rgba(52,211,153,0.2);
}
.micro-check details summary {
  color: #34d399;
}
@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step-container { padding-left: 42px; }
  .given-grid { flex-direction: column; }
  .answer-options-row { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Ugnježdeni koreni i eksponencijalna jednačina</h1>
  <p class="subtitle">Rešavanje višestruko ugnježdene korenove jednačine pomoću stepenih zakona</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Ako je \( x = 2^{p/q} \) rešenje jednačine</p>
    <div class="highlight-box">
      \[ \sqrt{x\cdot\sqrt{x\cdot\sqrt{x\cdot\sqrt{x\cdot\sqrt{x}}}}} = 2 \]
    </div>
    <p>za neke uzajamno proste prirodne brojeve \( p \) i \( q \), tada je \( p + q \) jednako:</p>

    <div class="given-grid">
      <div class="given-item">
        <div class="label">Poznato</div>
        <div class="value">\( x = 2^{p/q} \)</div>
      </div>
      <div class="given-item">
        <div class="label">Uslov</div>
        <div class="value">\( \gcd(p, q) = 1 \)</div>
      </div>
      <div class="given-item">
        <div class="label">Traži se</div>
        <div class="value">\( p + q \)</div>
      </div>
    </div>

    <h3 style="margin-top: 20px;">Ponuđeni odgovori</h3>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">47</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">50</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">53</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">57</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">63</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan rešavanja</h2>
    <p>Radićemo od unutrašnjeg korena ka spolja, izražavajući svaki sloj kao stepen broja \( x \). Kada dobijemo ukupan eksponent, izjednačićemo ga sa jedinicom (jer je rezultat \( 2 = 2^1 \)) i rešiti po \( p/q \).</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Ključne formule i teoreme</summary>
      <div style="margin-top: 10px;">
        <p><strong>Pravila za stepene:</strong></p>
        <ul style="margin-left: 20px; margin-top: 8px; color: #e2e8f0;">
          <li>\( \sqrt{a} = a^{1/2} \)</li>
          <li>\( a^m \cdot a^n = a^{m+n} \)</li>
          <li>\( (a^m)^n = a^{m \cdot n} \)</li>
          <li>\( 2^a = 2^b \implies a = b \)</li>
        </ul>
        <p style="margin-top: 12px;"><strong>Ključna ideja:</strong> Svaki kvadratni koren je stepenovanje sa \( \frac{1}{2} \), a množenje sa \( x \) dodaje 1 na eksponent.</p>
      </div>
    </details>
  </div>

  <!-- Canvas Visual -->
  <div class="card">
    <h2>Vizuelni prikaz ugnježdenih slojeva</h2>
    <canvas id="layersCanvas" height="420"></canvas>
  </div>

  <!-- Step-by-step Solution -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <div class="step-container" id="step1">
      <div class="step-badge">1</div>
      <div class="step-title">Najdublji sloj (sloj 1)</div>
      <div class="step-text">
        <p>Počinjemo od najdubljeg korena. Najdublji izraz je jednostavno \( \sqrt{x} \):</p>
        <div class="highlight-box">
          \[ \sqrt{x} = x^{1/2} \]
        </div>
        <p>Dakle, eksponent u prvom sloju je \( a_1 = \frac{1}{2} \).</p>
      </div>
    </div>

    <div class="step-container" id="step2">
      <div class="step-badge">2</div>
      <div class="step-title">Sloj 2 — množimo sa \( x \) i korenujemo</div>
      <div class="step-text">
        <p>Drugi sloj sadrži \( \sqrt{x \cdot (\text{sloj 1})} = \sqrt{x \cdot x^{1/2}} \):</p>
        <div class="highlight-box">
          \[ \sqrt{x \cdot x^{1/2}} = \sqrt{x^{1 + 1/2}} = \sqrt{x^{3/2}} = x^{3/4} \]
        </div>
        <p>Eksponent: \( a_2 = \frac{3}{4} \).</p>
      </div>
    </div>

    <div class="step-container" id="step3">
      <div class="step-badge">3</div>
      <div class="step-title">Sloj 3 — ponavljamo postupak</div>
      <div class="step-text">
        <p>Treći sloj: \( \sqrt{x \cdot x^{3/4}} \):</p>
        <div class="highlight-box">
          \[ \sqrt{x \cdot x^{3/4}} = \sqrt{x^{1 + 3/4}} = \sqrt{x^{7/4}} = x^{7/8} \]
        </div>
        <p>Eksponent: \( a_3 = \frac{7}{8} \).</p>
      </div>
    </div>

    <div class="micro-check">
      <details>
        <summary>Proveri se: Primećuješ li obrazac?</summary>
        <p style="margin-top: 8px;">Eksponenti su: \( \frac{1}{2},\; \frac{3}{4},\; \frac{7}{8},\; \ldots \) Brojilac je uvek za 1 manji od imenioca. Obrazac je \( a_n = \frac{2^n - 1}{2^n} \). Proveri za \( n = 3 \): \( \frac{2^3 - 1}{2^3} = \frac{7}{8} \). Tačno!</p>
      </details>
    </div>

    <div class="step-container" id="step4">
      <div class="step-badge">4</div>
      <div class="step-title">Sloj 4</div>
      <div class="step-text">
        <p>Četvrti sloj: \( \sqrt{x \cdot x^{7/8}} \):</p>
        <div class="highlight-box">
          \[ \sqrt{x \cdot x^{7/8}} = \sqrt{x^{1 + 7/8}} = \sqrt{x^{15/8}} = x^{15/16} \]
        </div>
        <p>Eksponent: \( a_4 = \frac{15}{16} \).</p>
      </div>
    </div>

    <div class="step-container" id="step5">
      <div class="step-badge">5</div>
      <div class="step-title">Sloj 5 (spoljašnji) — konačan eksponent</div>
      <div class="step-text">
        <p>Peti i poslednji sloj: \( \sqrt{x \cdot x^{15/16}} \):</p>
        <div class="highlight-box">
          \[ \sqrt{x \cdot x^{15/16}} = \sqrt{x^{1 + 15/16}} = \sqrt{x^{31/16}} = x^{31/32} \]
        </div>
        <p>Konačan eksponent: \( a_5 = \frac{31}{32} \).</p>
      </div>
    </div>

    <div class="micro-check">
      <details>
        <summary>Proveri se: Da li je formula ispravna?</summary>
        <p style="margin-top: 8px;">Za 5 slojeva: \( a_5 = \frac{2^5 - 1}{2^5} = \frac{32 - 1}{32} = \frac{31}{32} \). Tačno!</p>
      </details>
    </div>

    <div class="step-container" id="step6">
      <div class="step-badge">6</div>
      <div class="step-title">Postavljamo jednačinu</div>
      <div class="step-text">
        <p>Cela leva strana jednačine je \( x^{31/32} \), a desna strana je 2. Dakle:</p>
        <div class="highlight-box">
          \[ x^{31/32} = 2 \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step7">
      <div class="step-badge">7</div>
      <div class="step-title">Zamenjujemo \( x = 2^{p/q} \)</div>
      <div class="step-text">
        <p>Uvrstimo \( x = 2^{p/q} \) u jednačinu:</p>
        <div class="highlight-box">
          \[ \left(2^{p/q}\right)^{31/32} = 2^1 \]
        </div>
        <p>Koristeći pravilo \( (a^m)^n = a^{mn} \):</p>
        <div class="highlight-box">
          \[ 2^{\frac{31p}{32q}} = 2^1 \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step8">
      <div class="step-badge">8</div>
      <div class="step-title">Izjednačavamo eksponente</div>
      <div class="step-text">
        <p>Pošto su baze jednake (i jednake 2), eksponenti moraju biti jednaki:</p>
        <div class="highlight-box">
          \[ \frac{31p}{32q} = 1 \implies 31p = 32q \implies \frac{p}{q} = \frac{32}{31} \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step9">
      <div class="step-badge">9</div>
      <div class="step-title">Proveravamo da su \( p \) i \( q \) uzajamno prosti</div>
      <div class="step-text">
        <p>Imamo \( p = 32 \) i \( q = 31 \). Da li su uzajamno prosti?</p>
        <p>Broj 31 je <span style="color: #f472b6; font-weight: 600;">prost broj</span>, a \( 32 = 2^5 \). Pošto 31 ne deli 32, važi \( \gcd(32, 31) = 1 \).</p>
        <p>Dakle, \( p = 32 \) i \( q = 31 \) su zaista uzajamno prosti.</p>
      </div>
    </div>

    <div class="micro-check">
      <details>
        <summary>Proveri se: Verifikacija rešenja</summary>
        <p style="margin-top: 8px;">Ako je \( x = 2^{32/31} \), tada \( x^{31/32} = 2^{(32/31) \cdot (31/32)} = 2^{32 \cdot 31 / (31 \cdot 32)} = 2^1 = 2 \). Jednačina je zadovoljena!</p>
      </details>
    </div>

    <div class="step-container" id="step10">
      <div class="step-badge">10</div>
      <div class="step-title">Računamo \( p + q \)</div>
      <div class="step-text">
        <div class="highlight-box">
          \[ p + q = 32 + 31 = 63 \]
        </div>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="card insight-card">
    <h2>Ključni uvid</h2>
    <p>Eksponent u \( n \)-tom sloju ugnježdenih korena prati obrazac:</p>
    <div class="highlight-box">
      \[ a_n = \frac{2^n - 1}{2^n} \]
    </div>
    <p>Ovo sledi iz rekurentne relacije \( a_{n+1} = \frac{1 + a_n}{2} \), gde množenje sa \( x \) dodaje 1, a korenovanje deli sa 2. Za 5 slojeva dobijamo \( \frac{31}{32} \), što vodi ka elegantnom rešenju sa prostim brojem 31 u imeniocu.</p>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer-card">
    <h2 style="color: #4ade80;">Konačan odgovor</h2>
    <div class="final-answer-value">\( p + q = 32 + 31 = 63 \)</div>

    <div class="answer-options-row">
      <div class="answer-chip">(A) 47</div>
      <div class="answer-chip">(B) 50</div>
      <div class="answer-chip">(C) 53</div>
      <div class="answer-chip">(D) 57</div>
      <div class="answer-chip correct">(E) 63</div>
    </div>

    <p class="verification">Verifikacija: \( x = 2^{32/31} \implies x^{31/32} = 2^{(32/31)(31/32)} = 2^1 = 2 \;\; \checkmark \)</p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfall-card">
    <h2>Česte greške</h2>
    <ul style="margin-left: 20px; margin-top: 8px;">
      <li style="margin-bottom: 10px;"><strong>Pogrešno brojanje slojeva:</strong> Lako je pogrešiti broj ugnježdenih korena. U ovom zadatku imamo tačno 5 slojeva kvadratnog korena. Svaki \( \sqrt{\phantom{x}} \) znak je jedan sloj.</li>
      <li style="margin-bottom: 10px;"><strong>Zamena \( p \) i \( q \):</strong> Iz \( 31p = 32q \) dobijamo \( p/q = 32/31 \), ne \( 31/32 \). Da je obrnuto, dobili bismo \( p + q = 31 + 32 = 63 \) (isti rezultat u ovom slučaju, ali princip je bitan).</li>
      <li><strong>Greška u sabiranju eksponenata:</strong> Kada računamo \( x \cdot x^{a_n} = x^{1 + a_n} \), vodite računa da pravilno saberete razlomke, npr. \( 1 + \frac{7}{8} = \frac{15}{8} \), ne \( \frac{8}{8} \).</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Šta bi bilo da umesto 5 slojeva korena imamo \( n \) slojeva? Dakle, ako jednačina glasi:</p>
    <div class="highlight-box">
      \[ \underbrace{\sqrt{x \cdot \sqrt{x \cdot \sqrt{x \cdots \sqrt{x}}}}}_{n \text{ korena}} = 2 \]
    </div>
    <p>Pokaži da je tada \( x = 2^{2^n / (2^n - 1)} \), pa je \( p + q = 2^n + (2^n - 1) = 2^{n+1} - 1 \). Za \( n = 5 \): \( 2^6 - 1 = 63 \).</p>
  </div>

</div>

<script>
(() => {
  // Step click interaction
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.add('active');
    });
  });

  // Canvas: visualize the layers
  const canvas = document.getElementById('layersCanvas');
  const ctx = canvas.getContext('2d');

  function resizeCanvas() {
    const rect = canvas.parentElement.getBoundingClientRect();
    const w = rect.width - 48;
    canvas.width = w * 2;
    canvas.height = 420 * 2;
    canvas.style.height = '420px';
    ctx.scale(2, 2);
    drawLayers(w);
  }

  function drawLayers(W) {
    const H = 420;
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.beginPath();
    ctx.roundRect(0, 0, W, H, 10);
    ctx.fill();

    const layers = [
      { n: 1, num: 1, den: 2, expr: '\\sqrt{x}' },
      { n: 2, num: 3, den: 4, expr: '\\sqrt{x \\cdot \\sqrt{x}}' },
      { n: 3, num: 7, den: 8, expr: '\\sqrt{x \\cdot \\sqrt{x \\cdot \\sqrt{x}}}' },
      { n: 4, num: 15, den: 16, expr: '' },
      { n: 5, num: 31, den: 32, expr: '' }
    ];

    const startY = 40;
    const rowH = 70;
    const barMaxW = W - 220;
    const barX = 140;
    const barH = 32;

    // Title
    ctx.fillStyle = '#94a3b8';
    ctx.font = '14px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Eksponent po slojevima', W / 2, 24);

    // Reference line at 1.0
    const refX = barX + barMaxW;
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.setLineDash([4, 4]);
    ctx.beginPath();
    ctx.moveTo(refX, startY - 5);
    ctx.lineTo(refX, startY + layers.length * rowH - 10);
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = '#94a3b8';
    ctx.font = '11px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('1', refX, startY - 10);

    layers.forEach((layer, i) => {
      const y = startY + i * rowH;
      const frac = layer.num / layer.den;
      const barW = frac * barMaxW;

      // Label
      ctx.fillStyle = '#94a3b8';
      ctx.font = '13px Segoe UI, sans-serif';
      ctx.textAlign = 'right';
      ctx.fillText('Sloj ' + layer.n, barX - 16, y + barH / 2 + 5);

      // Bar background
      ctx.fillStyle = '#1e293b';
      ctx.beginPath();
      ctx.roundRect(barX, y, barMaxW, barH, 6);
      ctx.fill();

      // Bar fill with gradient
      const grad = ctx.createLinearGradient(barX, 0, barX + barW, 0);
      if (i === layers.length - 1) {
        grad.addColorStop(0, '#34d399');
        grad.addColorStop(1, '#4ade80');
      } else {
        grad.addColorStop(0, '#60a5fa');
        grad.addColorStop(1, '#a78bfa');
      }
      ctx.fillStyle = grad;
      ctx.beginPath();
      ctx.roundRect(barX, y, barW, barH, 6);
      ctx.fill();

      // Fraction text
      ctx.fillStyle = '#fff';
      ctx.font = 'bold 14px Segoe UI, sans-serif';
      ctx.textAlign = 'left';
      const fracText = layer.num + '/' + layer.den;
      const textX = barX + barW / 2 - ctx.measureText(fracText).width / 2;
      ctx.fillText(fracText, Math.max(barX + 8, textX), y + barH / 2 + 5);
    });

    // Bottom: formula
    ctx.fillStyle = '#60a5fa';
    ctx.font = '14px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Obrazac: a(n) = (2\u207F \u2212 1) / 2\u207F', W / 2, startY + layers.length * rowH + 20);

    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 15px Segoe UI, sans-serif';
    ctx.fillText('x^(31/32) = 2  \u21D2  x = 2^(32/31)  \u21D2  p + q = 63', W / 2, startY + layers.length * rowH + 50);
  }

  resizeCanvas();
  window.addEventListener('resize', resizeCanvas);
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Ugnježdeni koreni - jednačina sa stepenima dvojke",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["ugnježdeni koreni", "eksponencijalne jednačine", "stepeni", "uzajamno prosti brojevi", "rekurentne relacije"]
}
BRAINSPARK_META-->