<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Povrsina pravouglog trapeza sa upisanom kruznicom</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
Problem: Pravougli trapez sa upisanom kruznicom.
  Duzi krak = 10, poluprecnik upisane kruznice r = 4.
  Naci povrsinu trapeza.

Postavka:
  Pravougli trapez ABCD: prav ugao kod A i D (ili A i B).
  Neka su: a = kraca osnova (gore), c = duza osnova (dole),
           b = kraci krak (visina, normalan na osnove), d = duzi krak = 10.

  Visina trapeza = precnik upisane kruznice = 2r = 8.
  Dakle: b = h = 8.

  Za trapez sa upisanom kruznicom (tangentni trapez):
    a + c = b + d
    a + c = 8 + 10 = 18

  Duzi krak d zatvara pravougli trougao sa visinom h i razlikom osnova (c - a):
    d^2 = h^2 + (c - a)^2
    100 = 64 + (c - a)^2
    (c - a)^2 = 36
    c - a = 6

  Iz sistema:
    a + c = 18
    c - a = 6
  Dobijamo:
    2c = 24 => c = 12
    a = 6

  Povrsina = (a + c) / 2 * h = 18 / 2 * 8 = 9 * 8 = 72

  Verifikacija:
    Provera uslova tangentnog trapeza: a + c = 6 + 12 = 18 = 8 + 10 = b + d. OK.
    Provera duzeg kraka: sqrt(8^2 + 6^2) = sqrt(64 + 36) = sqrt(100) = 10. OK.
    Provera poluprecnika: r = h/2 = 8/2 = 4. OK.
    Takodje: r = P/s = 72/18 = 4. (gde je s = poluobim = (6+8+12+10)/2 = 18). OK.

Answer: (E) 72
</script>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 700;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.card-title {
  font-size: 1.3rem;
  font-weight: 600;
  color: #60a5fa;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.4rem;
}

.problem-statement {
  border-left: 4px solid #a78bfa;
  font-size: 1.1rem;
}

.problem-statement .problem-text {
  margin-bottom: 20px;
}

.given-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 10px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 10px;
  padding: 10px 16px;
  text-align: center;
  font-size: 1.05rem;
}

.answer-option {
  cursor: default;
  transition: transform 0.15s;
}

.math-box {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 14px 0;
  overflow-x: auto;
}

.step-container {
  margin-bottom: 24px;
  padding: 16px;
  border-radius: 12px;
  border-left: 3px solid transparent;
  transition: border-color 0.2s, background 0.2s;
  cursor: pointer;
}

.step-container:hover {
  border-left-color: #4ade80;
  background: rgba(74, 222, 128, 0.04);
}

.step-container.active {
  border-left-color: #4ade80;
  background: rgba(74, 222, 128, 0.06);
}

.step-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  color: #fff;
  font-weight: 700;
  font-size: 0.95rem;
  margin-right: 10px;
  flex-shrink: 0;
}

.step-title {
  font-size: 1.15rem;
  font-weight: 600;
  color: #e2e8f0;
  display: flex;
  align-items: center;
  margin-bottom: 12px;
}

.step-explanation {
  color: #cbd5e1;
  margin-bottom: 12px;
}

details {
  background: rgba(167, 139, 250, 0.08);
  border: 1px solid rgba(167, 139, 250, 0.2);
  border-radius: 10px;
  padding: 12px 16px;
  margin: 12px 0;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  user-select: none;
}

details summary:hover {
  color: #c4b5fd;
}

details[open] summary {
  margin-bottom: 10px;
}

.insight-box {
  background: rgba(96, 165, 250, 0.1);
  border: 1px solid rgba(96, 165, 250, 0.3);
  border-left: 4px solid #60a5fa;
  border-radius: 12px;
  padding: 20px 24px;
  margin: 24px 0;
}

.insight-box .insight-title {
  color: #60a5fa;
  font-weight: 700;
  font-size: 1.15rem;
  margin-bottom: 8px;
}

.final-answer-card {
  background: rgba(52, 211, 153, 0.08);
  border: 2px solid rgba(52, 211, 153, 0.3);
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin: 28px 0;
}

.final-answer-card .label {
  color: #34d399;
  font-size: 1.1rem;
  font-weight: 600;
  margin-bottom: 10px;
}

.final-answer-card .answer {
  font-size: 2.2rem;
  font-weight: 700;
  color: #4ade80;
  margin-bottom: 16px;
}

.final-options {
  display: flex;
  justify-content: center;
  gap: 12px;
  flex-wrap: wrap;
  margin-top: 16px;
}

.final-option {
  padding: 8px 20px;
  border-radius: 10px;
  font-size: 1.05rem;
  border: 1px solid #334155;
  background: #1e293b;
  color: #94a3b8;
}

.final-option.correct {
  background: rgba(52, 211, 153, 0.15);
  border-color: #34d399;
  color: #4ade80;
  font-weight: 700;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 14px;
}

.pitfall-item {
  background: rgba(244, 114, 182, 0.08);
  border-left: 3px solid #f472b6;
  border-radius: 8px;
  padding: 12px 16px;
  margin: 10px 0;
  color: #fbb6ce;
}

.pitfall-title {
  color: #f472b6;
  font-weight: 600;
  margin-bottom: 4px;
}

canvas {
  width: 100%;
  border-radius: 12px;
  touch-action: none;
  display: block;
  margin: 0 auto;
}

.plan-text {
  color: #94a3b8;
  font-size: 1.05rem;
  line-height: 1.8;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.factor-color {
  color: #60a5fa;
}

.given-data {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 10px;
  margin-top: 16px;
  margin-bottom: 16px;
}

.given-data-item {
  background: rgba(167, 139, 250, 0.08);
  border: 1px solid rgba(167, 139, 250, 0.2);
  border-radius: 10px;
  padding: 10px 16px;
  text-align: center;
  font-size: 1.05rem;
}

@media (max-width: 700px) {
  h1 { font-size: 1.5rem; }
  .card { padding: 16px; }
  .container { padding: 10px; }
  .given-grid { grid-template-columns: repeat(auto-fit, minmax(90px, 1fr)); }
  .final-answer-card .answer { font-size: 1.7rem; }
  .step-container { padding: 10px; }
  .given-data { grid-template-columns: 1fr; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Povrsina pravouglog trapeza sa upisanom kruznicom</h1>
  <p class="subtitle">Tangentni trapez, Pitagorina teorema i osobine upisane kruznice</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <div class="card-title"><span class="icon">&#128221;</span> Postavka zadatka</div>
    <div class="problem-text">
      Ako je duzi krak pravouglog trapeza jednak \(10\), a poluprecnik kruznice upisane u taj trapez jednak \(4\), onda je povrsina tog trapeza jednaka:
    </div>
    <div class="given-data">
      <div class="given-data-item">Duzi krak: \(d = 10\)</div>
      <div class="given-data-item">Poluprecnik: \(r = 4\)</div>
    </div>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">(A) 96</div>
      <div class="given-item answer-option" data-option="B">(B) 36</div>
      <div class="given-item answer-option" data-option="C">(C) 24</div>
      <div class="given-item answer-option" data-option="D">(D) 48</div>
      <div class="given-item answer-option" data-option="E">(E) 72</div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127919;</span> Plan resavanja</div>
    <p class="plan-text">
      1. Odrediti visinu trapeza koristeci poluprecnik upisane kruznice.<br>
      2. Primeniti osobinu tangentnog trapeza: zbir suprotnih strana je jednak.<br>
      3. Primeniti Pitagorinu teoremu na duzi krak da nadjemo razliku osnova.<br>
      4. Resiti sistem jednacina za osnove i izracunati povrsinu.
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>&#128208; Kljucne formule i teoreme</summary>
      <ul style="margin-top: 12px; padding-left: 20px; color: #cbd5e1;">
        <li style="margin-bottom: 10px;"><strong>Pravougli trapez:</strong> Trapez koji ima jedan prav ugao (zapravo dva prava ugla na istom kraku). Jedan krak je normalan na obe osnove i jednak je visini trapeza.
        </li>
        <li style="margin-bottom: 10px;"><strong>Upisana kruznica u trapez:</strong> Kruznica koja dodiruje sve cetiri stranice trapeza. Za pravougli trapez, visina je jednaka precniku upisane kruznice:
          <div class="math-box">\[ h = 2r \]</div>
        </li>
        <li style="margin-bottom: 10px;"><strong>Osobina tangentnog trapeza:</strong> Ako trapez ima upisanu kruznicu, zbir suprotnih strana je jednak:
          <div class="math-box">\[ a + c = b + d \]</div>
          gde su \(a\) i \(c\) osnove, a \(b\) i \(d\) krakovi.
        </li>
        <li style="margin-bottom: 10px;"><strong>Pitagorina teorema:</strong>
          <div class="math-box">\[ d^2 = h^2 + (c - a)^2 \]</div>
          gde je \(d\) duzi (kosi) krak, \(h\) visina, a \(c - a\) razlika osnova.
        </li>
        <li style="margin-bottom: 10px;"><strong>Povrsina trapeza:</strong>
          <div class="math-box">\[ P = \frac{a + c}{2} \cdot h \]</div>
        </li>
      </ul>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127912;</span> Vizuelni prikaz trapeza sa upisanom kruznicom</div>
    <canvas id="solutionCanvas" width="900" height="560"></canvas>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128736;</span> Resenje korak po korak</div>

    <!-- Step 1 -->
    <div class="step-container" data-step="1">
      <div class="step-title"><span class="step-badge">1</span> Odredjivanje visine trapeza</div>
      <p class="step-explanation">
        Kod pravouglog trapeza, kraci krak je normalan na obe osnove &mdash; on predstavlja visinu trapeza. Upisana kruznica dodiruje obe osnove, pa je njen precnik jednak visini:
      </p>
      <div class="math-box">
        \[ h = 2r = 2 \cdot 4 = 8 \]
      </div>
      <p class="step-explanation">
        Dakle, kraci krak (ujedno i visina) trapeza je \(b = h = 8\).
      </p>
      <details>
        <summary>Proveri se: Zasto je visina jednaka precniku?</summary>
        <p>Upisana kruznica dodiruje obe osnove trapeza. Posto je kraci krak normalan na osnove, rastojanje izmedju osnova (visina) je tacno jednako precniku kruznice. Centar kruznice lezi na polovini visine, na rastojanju \(r\) od svake osnove.</p>
      </details>
    </div>

    <!-- Step 2 -->
    <div class="step-container" data-step="2">
      <div class="step-title"><span class="step-badge">2</span> Osobina tangentnog trapeza</div>
      <p class="step-explanation">
        Trapez sa upisanom kruznicom je <span class="highlight">tangentni cetvorougao</span>. Za svaki tangentni cetvorougao vazi da je zbir suprotnih strana jednak:
      </p>
      <div class="math-box">
        \[ a + c = b + d \]
      </div>
      <p class="step-explanation">
        Uvrstimo poznate vrednosti (\(b = 8\), \(d = 10\)):
      </p>
      <div class="math-box">
        \[ a + c = 8 + 10 = 18 \]
      </div>
      <details>
        <summary>Proveri se: Odakle dolazi ova osobina?</summary>
        <p>Neka su duzine tangentnih odsecaka iz temena \(A, B, C, D\) redom \(p, q, s, t\). Tada je \(a = p + q\), \(b = q + s\), \(c = s + t\), \(d = t + p\). Sabiranjem suprotnih strana: \(a + c = p + q + s + t = b + d\). Ova osobina vazi za svaki tangentni cetvorougao.</p>
      </details>
    </div>

    <!-- Step 3 -->
    <div class="step-container" data-step="3">
      <div class="step-title"><span class="step-badge">3</span> Primena Pitagorine teoreme na duzi krak</div>
      <p class="step-explanation">
        Duzi krak \(d\) je hipotenuza pravouglog trougla cije su katete visina \(h\) i razlika osnova \(c - a\):
      </p>
      <div class="math-box">
        \[ d^2 = h^2 + (c - a)^2 \]
      </div>
      <p class="step-explanation">
        Uvrstimo \(d = 10\) i \(h = 8\):
      </p>
      <div class="math-box">
        \[ 10^2 = 8^2 + (c - a)^2 \]
        \[ 100 = 64 + (c - a)^2 \]
        \[ (c - a)^2 = 36 \]
        \[ c - a = 6 \]
      </div>
      <p class="step-explanation">
        Razlika osnova iznosi \(6\) (uzimamo pozitivnu vrednost jer je \(c > a\)).
      </p>
      <details>
        <summary>Proveri se: Odakle potice ovaj pravougli trougao?</summary>
        <p>Kada iz gornjeg temena duzeg kraka spustimo normalu na duzu osnovu, dobijamo pravougli trougao. Jedna kateta je visina trapeza \(h = 8\), druga kateta je horizontalni pomak \(c - a = 12 - 6 = 6\), a hipotenuza je duzi krak \(d = 10\). Ovo je poznati Pitagorin trojac \(6, 8, 10\) (tj. \(3, 4, 5\) pomnozeno sa \(2\)).</p>
      </details>
    </div>

    <!-- Step 4 -->
    <div class="step-container" data-step="4">
      <div class="step-title"><span class="step-badge">4</span> Resavanje sistema jednacina za osnove</div>
      <p class="step-explanation">
        Imamo sistem od dve jednacine sa dve nepoznate:
      </p>
      <div class="math-box">
        \[ \begin{cases} a + c = 18 \\ c - a = 6 \end{cases} \]
      </div>
      <p class="step-explanation">
        Sabiranjem ove dve jednacine:
      </p>
      <div class="math-box">
        \[ 2c = 24 \implies c = 12 \]
      </div>
      <p class="step-explanation">
        Oduzimanjem druge od prve (ili uvrstanjem):
      </p>
      <div class="math-box">
        \[ a = 18 - 12 = 6 \]
      </div>
      <p class="step-explanation">
        Kraca osnova je \(a = 6\), a duza osnova je \(c = 12\).
      </p>
    </div>

    <!-- Step 5 -->
    <div class="step-container" data-step="5">
      <div class="step-title"><span class="step-badge">5</span> Racunanje povrsine trapeza</div>
      <p class="step-explanation">
        Sada imamo sve potrebne velicine. Primenjujemo formulu za povrsinu trapeza:
      </p>
      <div class="math-box">
        \[ P = \frac{a + c}{2} \cdot h = \frac{6 + 12}{2} \cdot 8 = \frac{18}{2} \cdot 8 = 9 \cdot 8 = 72 \]
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step-container" data-step="6">
      <div class="step-title"><span class="step-badge">6</span> Verifikacija rezultata</div>
      <p class="step-explanation">
        Proverimo sve uslove sa dobijenim vrednostima \(a = 6\), \(b = 8\), \(c = 12\), \(d = 10\):
      </p>
      <p class="step-explanation">
        <strong>1. Tangentni uslov:</strong> \(a + c = 6 + 12 = 18 = 8 + 10 = b + d\) &#10004;
      </p>
      <p class="step-explanation">
        <strong>2. Duzi krak:</strong> \(\sqrt{8^2 + 6^2} = \sqrt{64 + 36} = \sqrt{100} = 10\) &#10004;
      </p>
      <p class="step-explanation">
        <strong>3. Poluprecnik (preko formule \(r = P / s\)):</strong>
      </p>
      <div class="math-box">
        \[ s = \frac{a + b + c + d}{2} = \frac{6 + 8 + 12 + 10}{2} = \frac{36}{2} = 18 \]
        \[ r = \frac{P}{s} = \frac{72}{18} = 4 \quad \checkmark \]
      </div>
      <p class="step-explanation">
        Svi uslovi su zadovoljeni. Rezultat je potvrden.
      </p>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <div class="insight-title">Kljucni uvid</div>
    <p>
      Sustina ovog zadatka lezi u dve kljucne osobine: (1) visina pravouglog trapeza sa upisanom kruznicom je jednaka precniku te kruznice (\(h = 2r\)), i (2) zbir suprotnih strana tangentnog cetvorougla je jednak (\(a + c = b + d\)). Kombinujuci ove dve cinjenice sa Pitagorinom teoremom za duzi krak, dobijamo sistem od koga lako nalazimo obe osnove. Primetite i da se pojavljuje poznati Pitagorin trojac \(6{-}8{-}10\), sto je dupli trojac \(3{-}4{-}5\).
    </p>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-card">
    <div class="label">Konacan odgovor</div>
    <div class="answer">\(P = 72\)</div>
    <div class="final-options">
      <div class="final-option" data-option="A">(A) 96</div>
      <div class="final-option" data-option="B">(B) 36</div>
      <div class="final-option" data-option="C">(C) 24</div>
      <div class="final-option" data-option="D">(D) 48</div>
      <div class="final-option correct" data-option="E">(E) 72</div>
    </div>
    <p class="verification-note">
      Verifikacija: \(a=6,\; b=8,\; c=12,\; d=10\). Obim \(= 36\), poluobim \(s = 18\), \(r = P/s = 72/18 = 4\) &#10004;
    </p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9888;&#65039;</span> Ceste greske</div>
    <div class="pitfall-item">
      <div class="pitfall-title">Zamena visine i poluprecnika</div>
      <p>Cesta greska je uzeti \(h = r = 4\) umesto \(h = 2r = 8\). Visina pravouglog trapeza sa upisanom kruznicom je <em>precnik</em>, ne poluprecnik. Kruznica dodiruje obe osnove, pa je visina jednaka celom precniku.</p>
    </div>
    <div class="pitfall-item">
      <div class="pitfall-title">Zaboravljanje osobine tangentnog trapeza</div>
      <p>Bez koriscenja uslova \(a + c = b + d\) ne mozemo odrediti obe osnove. Ovaj uslov je posledica cinjenice da tangentni odsecci iz istog temena imaju jednake duzine. Bez njega bismo imali samo jednu jednacinu sa dve nepoznate.</p>
    </div>
    <div class="pitfall-item">
      <div class="pitfall-title">Pogresan pravougli trougao</div>
      <p>Neki ucenici pokusavaju da primene Pitagorinu teoremu direktno na krakove trapeza, sto je pogresno. Pravougli trougao se formira od duzeg kraka (hipotenuza), visine trapeza (jedna kateta) i razlike osnova (druga kateta).</p>
    </div>
  </div>

  <!-- Optional Challenge -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127942;</span> Dodatni izazov</div>
    <p class="step-explanation">
      Pravougli trapez ima upisanu kruznicu poluprecnika \(r = 6\). Ako je duzi krak jednak \(15\), odredite sve stranice trapeza i njegovu povrsinu.
    </p>
    <details>
      <summary>Nagovestaj</summary>
      <p>Visina je \(h = 2r = 12\). Iz Pitagorine teoreme: \((c - a)^2 = 15^2 - 12^2 = 225 - 144 = 81\), dakle \(c - a = 9\). Iz tangentnog uslova: \(a + c = 12 + 15 = 27\). Resavanjem sistema: \(c = 18\), \(a = 9\). Povrsina: \(P = \frac{9 + 18}{2} \cdot 12 = \frac{27}{2} \cdot 12 = 162\). Proverite: \(r = P/s = 162 / (9 + 12 + 18 + 15)/2 = 162/27 = 6\). Tacno!</p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('solutionCanvas');
  const ctx = canvas.getContext('2d');

  function draw() {
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    canvas.width = rect.width * dpr;
    canvas.height = 560 * dpr;
    ctx.scale(dpr, dpr);

    const W = rect.width;
    const H = 560;

    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 18px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Pravougli trapez sa upisanom kruznicom', W / 2, 30);

    // Trapezoid coordinates - scaled to fit nicely
    var scale = Math.min(W / 700, 1) * 0.85;
    var ox = W / 2 - 120 * scale;
    var oy = 80;

    // Points of trapezoid ABCD
    // A = bottom-left, B = top-left, C = top-right, D = bottom-right
    // a (top) = 6, c (bottom) = 12, h = 8
    // We scale everything by a factor for visibility
    var sf = 32 * scale; // scale factor: 1 unit = 32px

    var Ax = ox;
    var Ay = oy + 8 * sf;
    var Bx = ox;
    var By = oy;
    var Cx = ox + 6 * sf;
    var Cy = oy;
    var Dx = ox + 12 * sf;
    var Dy = oy + 8 * sf;

    // Draw the trapezoid
    ctx.beginPath();
    ctx.moveTo(Ax, Ay);
    ctx.lineTo(Bx, By);
    ctx.lineTo(Cx, Cy);
    ctx.lineTo(Dx, Dy);
    ctx.closePath();
    ctx.fillStyle = 'rgba(96, 165, 250, 0.06)';
    ctx.fill();
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.stroke();

    // Draw inscribed circle
    var r_px = 4 * sf;
    var circle_cx = ox + 4 * sf; // center x: at distance r from left side, actually tangent to left side (x = r from left)
    // For right trapezoid with right angle at A and B:
    // The circle center is at (r, r) from bottom-left inside
    // Actually, center x = tangent distance from left side = r (from left wall)
    // Wait, let me recalculate: the circle touches all 4 sides.
    // Left side (x = ox): cx = ox + r_px
    // Bottom side (y = Ay): cy = Ay - r_px
    // Top side (y = By): cy = By + r_px => By + r_px = Ay - r_px => Ay - By = 2*r_px. Correct since h = 2r.
    var ccx = ox + r_px;
    var ccy = oy + r_px; // = By + r_px = oy + 4*sf

    ctx.beginPath();
    ctx.arc(ccx, ccy, r_px, 0, 2 * Math.PI);
    ctx.strokeStyle = '#34d399';
    ctx.lineWidth = 2;
    ctx.setLineDash([6, 4]);
    ctx.stroke();
    ctx.setLineDash([]);

    // Circle center dot
    ctx.beginPath();
    ctx.arc(ccx, ccy, 4, 0, 2 * Math.PI);
    ctx.fillStyle = '#34d399';
    ctx.fill();

    // Radius line
    ctx.beginPath();
    ctx.moveTo(ccx, ccy);
    ctx.lineTo(ccx, Ay);
    ctx.strokeStyle = '#34d399';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([3, 3]);
    ctx.stroke();
    ctx.setLineDash([]);

    // Label r
    ctx.fillStyle = '#34d399';
    ctx.font = 'bold ' + Math.max(13, 15 * scale) + 'px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('r = 4', ccx + 6, ccy + r_px / 2 + 4);

    // Right angle marks at A
    var markSize = 12 * scale;
    ctx.beginPath();
    ctx.moveTo(Ax + markSize, Ay);
    ctx.lineTo(Ax + markSize, Ay - markSize);
    ctx.lineTo(Ax, Ay - markSize);
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 1.5;
    ctx.stroke();

    // Right angle mark at B
    ctx.beginPath();
    ctx.moveTo(Bx + markSize, By);
    ctx.lineTo(Bx + markSize, By + markSize);
    ctx.lineTo(Bx, By + markSize);
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 1.5;
    ctx.stroke();

    // Labels for vertices
    ctx.font = 'bold ' + Math.max(14, 16 * scale) + 'px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';

    ctx.fillStyle = '#e2e8f0';
    ctx.fillText('A', Ax - 16 * scale, Ay + 18 * scale);
    ctx.fillText('B', Bx - 16 * scale, By - 8 * scale);
    ctx.fillText('C', Cx + 16 * scale, Cy - 8 * scale);
    ctx.fillText('D', Dx + 16 * scale, Dy + 18 * scale);

    // Side labels
    ctx.font = 'bold ' + Math.max(13, 15 * scale) + 'px Segoe UI, system-ui, sans-serif';

    // Top side: a = 6
    ctx.fillStyle = '#a78bfa';
    ctx.fillText('a = 6', (Bx + Cx) / 2, By - 14 * scale);

    // Bottom side: c = 12
    ctx.fillText('c = 12', (Ax + Dx) / 2, Ay + 22 * scale);

    // Left side: b = h = 8
    ctx.fillStyle = '#60a5fa';
    ctx.textAlign = 'right';
    ctx.fillText('b = h = 8', Ax - 20 * scale, (Ay + By) / 2 + 4);

    // Right side: d = 10 (the slanted side)
    ctx.fillStyle = '#f472b6';
    ctx.textAlign = 'left';
    var midDx = (Cx + Dx) / 2;
    var midDy = (Cy + Dy) / 2;
    ctx.fillText('d = 10', midDx + 10 * scale, midDy + 4);

    // Draw the right triangle from C to D
    // Drop perpendicular from C to bottom base
    var Fx = Cx;
    var Fy = Dy; // foot of perpendicular from C

    // Dashed line for the perpendicular from C
    ctx.beginPath();
    ctx.moveTo(Cx, Cy);
    ctx.lineTo(Fx, Fy);
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([5, 4]);
    ctx.stroke();
    ctx.setLineDash([]);

    // Dashed line from F to D
    ctx.beginPath();
    ctx.moveTo(Fx, Fy);
    ctx.lineTo(Dx, Dy);
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([5, 4]);
    ctx.stroke();
    ctx.setLineDash([]);

    // Right angle at F
    ctx.beginPath();
    ctx.moveTo(Fx + markSize, Fy);
    ctx.lineTo(Fx + markSize, Fy - markSize);
    ctx.lineTo(Fx, Fy - markSize);
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1;
    ctx.stroke();

    // Label c - a = 6
    ctx.fillStyle = '#f472b6';
    ctx.font = Math.max(12, 13 * scale) + 'px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('c \u2212 a = 6', (Fx + Dx) / 2, Fy + 16 * scale + 22);

    // Label h = 8 on the perpendicular
    ctx.fillStyle = '#94a3b8';
    ctx.textAlign = 'right';
    ctx.fillText('8', Fx - 8 * scale, (Cy + Fy) / 2 + 4);

    // --- Lower section: step-by-step summary ---
    var infoY = Ay + 60 * scale;

    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold ' + Math.max(14, 16 * scale) + 'px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Pregled resavanja', W / 2, infoY);

    var stepY = infoY + 30;
    var stepX = W * 0.08;
    var stepW = W * 0.84;

    function drawInfoStep(num, text, y, color) {
      ctx.fillStyle = color;
      ctx.font = 'bold ' + Math.max(12, 13 * scale) + 'px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';

      // Circle badge
      ctx.beginPath();
      ctx.arc(stepX + 12, y, 12, 0, 2 * Math.PI);
      ctx.fillStyle = color;
      ctx.fill();
      ctx.fillStyle = '#0f172a';
      ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(num, stepX + 12, y + 4);

      // Text
      ctx.fillStyle = '#e2e8f0';
      ctx.font = Math.max(12, 14 * scale) + 'px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText(text, stepX + 32, y + 5);
    }

    drawInfoStep('1', 'h = 2r = 2 \u00B7 4 = 8', stepY, '#a78bfa');
    drawInfoStep('2', 'a + c = b + d = 8 + 10 = 18', stepY + 32, '#60a5fa');
    drawInfoStep('3', '10\u00B2 = 8\u00B2 + (c \u2212 a)\u00B2  \u21D2  c \u2212 a = 6', stepY + 64, '#f472b6');
    drawInfoStep('4', 'c = 12, a = 6', stepY + 96, '#34d399');
    drawInfoStep('5', 'P = (6 + 12)/2 \u00B7 8 = 72', stepY + 128, '#4ade80');

    // Final answer box
    var fboxY = stepY + 170;
    var fboxW = Math.min(220, W * 0.35);
    ctx.beginPath();
    ctx.roundRect(W / 2 - fboxW / 2, fboxY - 22, fboxW, 48, 14);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2.5;
    ctx.stroke();

    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold ' + Math.max(22, 26 * scale) + 'px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('P = 72', W / 2, fboxY + 8);
  }

  const stepContainers = document.querySelectorAll('.step-container');
  stepContainers.forEach(function(container) {
    container.addEventListener('click', function() {
      stepContainers.forEach(function(c) { c.classList.remove('active'); });
      container.classList.add('active');
    });
  });

  draw();
  window.addEventListener('resize', draw);
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Povrsina pravouglog trapeza sa upisanom kruznicom",
  "subject": "math",
  "unit": "geometry",
  "topic_tags": ["pravougli trapez", "upisana kruznica", "tangentni cetvorougao", "Pitagorina teorema", "povrsina trapeza"]
}
BRAINSPARK_META-->