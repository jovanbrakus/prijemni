<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Deljivost polinoma i odredjivanje koeficijenata</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM: Given P(x) = x^5 + ax^3 + bx and Q(x) = x^2 + 2x + 1 = (x+1)^2.
P is divisible by Q. Find a^2 + b^2.

APPROACH: Since Q(x) = (x+1)^2, x = -1 is a double root of P(x).
This means P(-1) = 0 AND P'(-1) = 0.

STEP 1: Compute P(-1) = 0
P(-1) = (-1)^5 + a(-1)^3 + b(-1)
      = -1 - a - b = 0
=> a + b = -1  ... (1)

STEP 2: Compute P'(x) and evaluate at x = -1
P'(x) = 5x^4 + 3ax^2 + b
P'(-1) = 5(1) + 3a(1) + b = 5 + 3a + b = 0
=> 3a + b = -5  ... (2)

STEP 3: Solve the system
From (1): b = -1 - a
Substitute into (2): 3a + (-1 - a) = -5
  2a - 1 = -5
  2a = -4
  a = -2
Then b = -1 - (-2) = 1

STEP 4: Calculate a^2 + b^2
a^2 + b^2 = (-2)^2 + 1^2 = 4 + 1 = 5

VERIFICATION (Full factorization):
P(x) = x^5 - 2x^3 + x
     = x(x^4 - 2x^2 + 1)
     = x(x^2 - 1)^2
     = x((x-1)(x+1))^2
     = x(x-1)^2(x+1)^2

Indeed, (x+1)^2 divides P(x). Confirmed!

P(x) / Q(x) = x(x-1)^2 = x^3 - 2x^2 + x — a valid polynomial, so divisibility holds.

ANSWER: C) 5. Matches the answer key. ✓
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

<style>
*, *::before, *::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 1rem;
  min-height: 100vh;
}

.container {
  max-width: 900px;
  margin: 0 auto;
  padding: 1rem 0;
}

h1 {
  font-size: clamp(1.5rem, 4vw, 2.2rem);
  font-weight: 700;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-align: center;
  margin-bottom: 0.25rem;
}

.subtitle {
  text-align: center;
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 2rem;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
}

.card-title {
  font-size: 1.15rem;
  font-weight: 600;
  color: #60a5fa;
  margin-bottom: 0.75rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.card-title .icon {
  font-size: 1.3rem;
}

.problem-statement {
  border: 2px solid #a78bfa;
  font-size: 1.08rem;
}

.problem-statement .card-title {
  color: #a78bfa;
}

.given-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
  gap: 0.5rem;
  margin-top: 1rem;
}

.given-item {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 8px;
  padding: 0.5rem 0.75rem;
  text-align: center;
  transition: border-color 0.2s;
}

.given-item .label {
  font-size: 0.85rem;
  color: #94a3b8;
  margin-bottom: 0.2rem;
}

.given-item .value {
  font-size: 1rem;
  color: #e2e8f0;
  font-weight: 600;
}

.plan-list {
  list-style: none;
  counter-reset: plan;
}

.plan-list li {
  counter-increment: plan;
  padding: 0.4rem 0 0.4rem 2.2rem;
  position: relative;
}

.plan-list li::before {
  content: counter(plan);
  position: absolute;
  left: 0;
  top: 0.4rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  width: 1.6rem;
  height: 1.6rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.85rem;
}

details {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  margin: 15px 0;
}

details summary {
  padding: 1rem 1.5rem;
  cursor: pointer;
  font-weight: 600;
  color: #a78bfa;
  list-style: none;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

details summary::-webkit-details-marker { display: none; }

details summary::before {
  content: '\25B6';
  font-size: 0.75rem;
  transition: transform 0.2s;
}

details[open] summary::before {
  transform: rotate(90deg);
}

details .detail-content {
  padding: 0 1.5rem 1.5rem;
}

.step {
  border-left: 3px solid #334155;
  padding-left: 1.25rem;
  margin-bottom: 1.5rem;
  position: relative;
  cursor: pointer;
  transition: border-color 0.2s;
}

.step:hover, .step.active {
  border-left-color: #4ade80;
}

.step::before {
  content: '';
  position: absolute;
  left: -7px;
  top: 0;
  width: 11px;
  height: 11px;
  border-radius: 50%;
  background: #60a5fa;
}

.step-title {
  font-weight: 600;
  color: #60a5fa;
  margin-bottom: 0.4rem;
  font-size: 1.05rem;
}

.math-block {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 8px;
  padding: 0.75rem 1rem;
  margin: 0.5rem 0;
  overflow-x: auto;
}

.checkpoint {
  background: rgba(163, 130, 250, 0.1);
  border: 1px solid #a78bfa;
  border-radius: 10px;
  margin: 15px 0;
}

.checkpoint summary {
  padding: 0.75rem 1rem;
  cursor: pointer;
  font-weight: 600;
  color: #a78bfa;
  font-size: 0.95rem;
  list-style: none;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.checkpoint summary::-webkit-details-marker { display: none; }

.checkpoint summary::before {
  content: '\25B6';
  font-size: 0.7rem;
  transition: transform 0.2s;
}

.checkpoint[open] summary::before {
  transform: rotate(90deg);
}

.checkpoint .checkpoint-content {
  padding: 0 1rem 0.75rem;
  font-size: 0.95rem;
}

.canvas-wrap {
  text-align: center;
  margin: 1rem 0;
}

canvas {
  border-radius: 12px;
  background: #0f172a;
  border: 1px solid #334155;
  max-width: 100%;
  touch-action: none;
}

.canvas-hint {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-top: 0.5rem;
}

.final-answer {
  background: rgba(74, 222, 128, 0.08);
  border: 2px solid #4ade80;
  border-radius: 14px;
  padding: 1.5rem;
  text-align: center;
  margin-bottom: 1.5rem;
}

.final-answer .label {
  font-size: 0.95rem;
  color: #94a3b8;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  margin-bottom: 0.5rem;
}

.final-answer .value {
  font-size: 1.6rem;
  font-weight: 700;
  color: #4ade80;
}

.final-options {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
  gap: 0.5rem;
  margin-top: 1rem;
}

.final-option {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 8px;
  padding: 0.5rem 0.75rem;
  text-align: center;
  font-size: 1rem;
  transition: border-color 0.2s;
}

.final-option.correct {
  border-color: #4ade80;
  background: rgba(74, 222, 128, 0.1);
  color: #4ade80;
  font-weight: 600;
}

.verification {
  margin-top: 1rem;
  font-size: 0.9rem;
  color: #94a3b8;
  font-style: italic;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid #60a5fa;
  border-radius: 14px;
  padding: 1.25rem 1.5rem;
  margin-bottom: 1.5rem;
}

.insight-box .card-title {
  color: #60a5fa;
}

.pitfall {
  background: rgba(244, 114, 182, 0.08);
  border: 1px solid #f472b6;
  border-radius: 10px;
  padding: 0.75rem 1rem;
  margin-bottom: 0.75rem;
}

.pitfall strong {
  color: #f472b6;
}

.challenge-box {
  background: rgba(52, 211, 153, 0.08);
  border: 1px dashed #34d399;
  border-radius: 14px;
  padding: 1.25rem 1.5rem;
  margin-bottom: 1rem;
}

.challenge-box .card-title {
  color: #34d399;
}

.muted {
  color: #94a3b8;
}

.highlight {
  color: #4ade80;
  font-weight: 600;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

.highlight-blue {
  color: #60a5fa;
  font-weight: 600;
}

mjx-container {
  overflow-x: auto;
}

@media (max-width: 700px) {
  body { padding: 0.5rem; }
  .card, .problem-statement, details .detail-content, .final-answer,
  .insight-box, .challenge-box { padding: 1rem; }
  .given-grid { grid-template-columns: repeat(2, 1fr); }
  .final-options { grid-template-columns: repeat(2, 1fr); }
}
</style>
</head>
<body>
<div class="container">

  <!-- TITLE -->
  <h1>Deljivost polinoma i odredjivanje koeficijenata</h1>
  <p class="subtitle">Algebra polinoma, visestruki koreni i sistem linearnih jednacina</p>

  <!-- PROBLEM STATEMENT -->
  <div class="card problem-statement">
    <div class="card-title"><span class="icon">&#128220;</span> Zadatak</div>
    <p>Neka je \(P(x) = x^5 + ax^3 + bx\) i \(Q(x) = x^2 + 2x + 1\), gde su \(a\) i \(b\) realni brojevi. Ako je polinom \(P\) deljiv polinomom \(Q\), tada je vrednost izraza \(a^2 + b^2\) jednaka:</p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(2\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(13\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(5\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(8\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(10\)</div>
      </div>
    </div>
  </div>

  <!-- PLAN -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128204;</span> Plan resavanja</div>
    <ol class="plan-list">
      <li>Prepoznamo da je \(Q(x) = (x+1)^2\), pa \(x = -1\) mora biti dvostruki koren polinoma \(P(x)\).</li>
      <li>Iz uslova \(P(-1) = 0\) i \(P'(-1) = 0\) formiramo sistem od dve jednacine sa dve nepoznate.</li>
      <li>Resimo sistem, nadjemo \(a\) i \(b\), i izracunamo \(a^2 + b^2\).</li>
    </ol>
  </div>

  <!-- THEORY REFRESHER -->
  <details>
    <summary>Podsetnik iz teorije</summary>
    <div class="detail-content">
      <p><strong>Deljivost polinoma:</strong> Ako je polinom \(P(x)\) deljiv sa \((x - c)^2\), tada je \(c\) dvostruki koren, sto znaci:</p>
      \[P(c) = 0 \quad \text{i} \quad P'(c) = 0\]

      <p style="margin-top:0.75rem"><strong>Obrazlozenje:</strong> Ako \((x-c)^2\) deli \(P(x)\), tada \(P(x) = (x-c)^2 \cdot R(x)\) za neki polinom \(R(x)\). Izvod je:</p>
      \[P'(x) = 2(x-c) \cdot R(x) + (x-c)^2 \cdot R'(x)\]
      <p>Za \(x = c\) oba sabirka su nula, pa je \(P'(c) = 0\).</p>

      <p style="margin-top:0.75rem"><strong>Potpuni kvadrat:</strong></p>
      \[x^2 + 2x + 1 = (x + 1)^2\]

      <p style="margin-top:0.75rem"><strong>Pravilo za izvod stepena:</strong></p>
      \[\frac{d}{dx}\left(x^n\right) = n \cdot x^{n-1}\]
    </div>
  </details>

  <!-- VISUAL AID -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128202;</span> Vizuelni prikaz - Grafik polinoma \(P(x)\)</div>
    <p class="muted" style="margin-bottom:0.75rem;">Grafik prikazuje polinom \(P(x) = x^5 - 2x^3 + x\) sa oznacenim korenima. Koristite klizac da menjate koeficijent \(a\) i posmatrajte kako se grafik menja.</p>
    <div class="canvas-wrap">
      <canvas id="poly-canvas" width="700" height="450"></canvas>
      <p class="canvas-hint">Pomerajte klizac da vidite kako koeficijent \(a\) utice na oblik polinoma</p>
    </div>
    <div style="text-align:center; margin-top:0.75rem;">
      <label class="muted" id="slider-label" style="font-size:0.95rem;">a = -2,00 (resenje)</label><br>
      <input type="range" id="a-slider" min="-4" max="2" step="0.05" value="-2" style="width:80%; max-width:400px; margin-top:0.4rem; accent-color:#60a5fa;">
    </div>
  </div>

  <!-- STEP-BY-STEP SOLUTION -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9999;&#65039;</span> Resenje korak po korak</div>

    <!-- Step 1 -->
    <div class="step">
      <div class="step-title">Korak 1: Faktorizujemo \(Q(x)\)</div>
      <p>Uocavamo da je \(Q(x)\) potpun kvadrat:</p>
      <div class="math-block">
        \[Q(x) = x^2 + 2x + 1 = (x + 1)^2\]
      </div>
      <p>To znaci da ako \(P(x)\) deli \(Q(x)\), onda je \(x = -1\) <span class="highlight-blue">dvostruki koren</span> polinoma \(P(x)\).</p>
    </div>

    <!-- Step 2 -->
    <div class="step">
      <div class="step-title">Korak 2: Uslov \(P(-1) = 0\) (prvi uslov)</div>
      <p>Uvrstimo \(x = -1\) u \(P(x) = x^5 + ax^3 + bx\):</p>
      <div class="math-block">
        \[P(-1) = (-1)^5 + a \cdot (-1)^3 + b \cdot (-1)\]
      </div>
      <p>Izracunamo stepene broja \(-1\):</p>
      <div class="math-block">
        \[P(-1) = -1 - a - b = 0\]
      </div>
      <p>Odavde dobijamo prvu jednacinu:</p>
      <div class="math-block">
        \[\boxed{a + b = -1} \quad \ldots (1)\]
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Zasto je \((-1)^5 = -1\) a \((-1)^3 = -1\)?</summary>
      <div class="checkpoint-content">
        <p>Neparan stepen negativnog broja daje negativan rezultat: \((-1)^n = -1\) za svako neparno \(n\). Zato su i \((-1)^5\) i \((-1)^3\) jednaki \(-1\).</p>
      </div>
    </details>

    <!-- Step 3 -->
    <div class="step">
      <div class="step-title">Korak 3: Nadjemo izvod \(P'(x)\)</div>
      <p>Primenjujemo pravilo za izvod stepena na svaki clan:</p>
      <div class="math-block">
        \[P'(x) = 5x^4 + 3ax^2 + b\]
      </div>
      <p class="muted">Napomena: izvod od \(x^5\) je \(5x^4\), od \(ax^3\) je \(3ax^2\), a od \(bx\) je \(b\).</p>
    </div>

    <!-- Step 4 -->
    <div class="step">
      <div class="step-title">Korak 4: Uslov \(P'(-1) = 0\) (drugi uslov)</div>
      <p>Uvrstimo \(x = -1\) u izvod:</p>
      <div class="math-block">
        \[P'(-1) = 5 \cdot (-1)^4 + 3a \cdot (-1)^2 + b\]
      </div>
      <p>Posto je \((-1)^4 = 1\) i \((-1)^2 = 1\) (parni stepeni!):</p>
      <div class="math-block">
        \[P'(-1) = 5 + 3a + b = 0\]
      </div>
      <p>Odavde dobijamo drugu jednacinu:</p>
      <div class="math-block">
        \[\boxed{3a + b = -5} \quad \ldots (2)\]
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Koji sistem jednacina smo dobili?</summary>
      <div class="checkpoint-content">
        <p>Imamo sistem od dve linearne jednacine sa dve nepoznate:</p>
        <div class="math-block">
          \[\begin{cases} a + b = -1 \\ 3a + b = -5 \end{cases}\]
        </div>
        <p>Ovo je standardan sistem koji resavamo oduzimanjem jednacina.</p>
      </div>
    </details>

    <!-- Step 5 -->
    <div class="step">
      <div class="step-title">Korak 5: Resimo sistem jednacina</div>
      <p>Oduzmemo jednacinu (1) od jednacine (2):</p>
      <div class="math-block">
        \[(3a + b) - (a + b) = -5 - (-1)\]
      </div>
      <div class="math-block">
        \[2a = -4\]
      </div>
      <div class="math-block">
        \[\color{#60a5fa}{a = -2}\]
      </div>
      <p>Uvrstimo \(a = -2\) u jednacinu (1):</p>
      <div class="math-block">
        \[-2 + b = -1\]
      </div>
      <div class="math-block">
        \[\color{#f472b6}{b = 1}\]
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step">
      <div class="step-title">Korak 6: Izracunamo \(a^2 + b^2\)</div>
      <p>Sada jednostavno uvrstimo nadjene vrednosti:</p>
      <div class="math-block">
        \[a^2 + b^2 = (-2)^2 + 1^2 = 4 + 1 = \color{#4ade80}{5}\]
      </div>
    </div>

    <!-- Step 7 -->
    <div class="step">
      <div class="step-title">Korak 7: Verifikacija - potpuna faktorizacija</div>
      <p>Proverimo deljivost uvrstavanjem \(a = -2\) i \(b = 1\):</p>
      <div class="math-block">
        \[P(x) = x^5 - 2x^3 + x\]
      </div>
      <p>Izlucujemo \(x\):</p>
      <div class="math-block">
        \[P(x) = x(x^4 - 2x^2 + 1)\]
      </div>
      <p>Izraz \(x^4 - 2x^2 + 1\) je potpun kvadrat (smena \(t = x^2\)):</p>
      <div class="math-block">
        \[x^4 - 2x^2 + 1 = (x^2 - 1)^2 = \bigl((x-1)(x+1)\bigr)^2 = (x-1)^2(x+1)^2\]
      </div>
      <p>Dakle:</p>
      <div class="math-block">
        \[P(x) = x \cdot (x-1)^2 \cdot (x+1)^2\]
      </div>
      <p>Vidimo da \((x+1)^2 = Q(x)\) zaista deli \(P(x)\), i kolicnik je \(x(x-1)^2 = x^3 - 2x^2 + x\).</p>
    </div>

    <!-- Checkpoint 3 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Koji su svi koreni polinoma \(P(x)\)?</summary>
      <div class="checkpoint-content">
        <p>Iz faktorizacije \(P(x) = x(x-1)^2(x+1)^2\) vidimo da su koreni:</p>
        <ul style="margin-left:1.5rem; margin-top:0.5rem;">
          <li>\(x = 0\) (jednostruki koren)</li>
          <li>\(x = 1\) (dvostruki koren)</li>
          <li>\(x = -1\) (dvostruki koren)</li>
        </ul>
        <p style="margin-top:0.5rem;">Ukupno 5 korena (brojeci visestrukost), sto odgovara stepenu polinoma.</p>
      </div>
    </details>
  </div>

  <!-- KEY INSIGHT -->
  <div class="insight-box">
    <div class="card-title"><span class="icon">&#128161;</span> Kljucni uvid</div>
    <p>Kada polinom \(P(x)\) ima dvostruki koren u tacki \(c\), to znaci da grafik dodiruje \(x\)-osu u toj tacki (ne sece je). Matematicki, to daje <strong>dva nezavisna uslova</strong>: \(P(c) = 0\) i \(P'(c) = 0\). Ovaj princip je izuzetno koristan jer od jednog uslova deljivosti dobijamo sistem jednacina koji omogucava odredjivanje dva nepoznata koeficijenta.</p>
  </div>

  <!-- FINAL ANSWER -->
  <div class="final-answer">
    <div class="label">Konacan odgovor</div>
    <div class="value">\(a^2 + b^2 = 5\)</div>
    <div class="final-options">
      <div class="final-option">(A) \(2\)</div>
      <div class="final-option">(B) \(13\)</div>
      <div class="final-option correct">(C) \(5\)</div>
      <div class="final-option">(D) \(8\)</div>
      <div class="final-option">(E) \(10\)</div>
    </div>
    <p class="verification">Verifikacija: Za \(a = -2\), \(b = 1\), polinom \(P(x) = x^5 - 2x^3 + x = x(x^2-1)^2 = x(x-1)^2(x+1)^2\) je zaista deljiv sa \((x+1)^2\). Rezultat \(a^2 + b^2 = 4 + 1 = 5\).</p>
  </div>

  <!-- COMMON PITFALLS -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9888;&#65039;</span> Ceste greske</div>
    <div class="pitfall">
      <strong>Zaborav na drugi uslov:</strong> Mnogi studenti postave samo \(P(-1) = 0\), sto daje jednu jednacinu sa dve nepoznate. Kljucno je prepoznati da dvostruki koren zahteva i \(P'(-1) = 0\) - to je uslov koji daje drugu jednacinu i cini sistem resivim.
    </div>
    <div class="pitfall">
      <strong>Greska u znaku kod neparnih stepena:</strong> Prilikom racunanja \(P(-1)\), cesta greska je da se zaboravi da je \((-1)^3 = -1\) (ne \(+1\)!) i da se pogresno dobije \(P(-1) = -1 + a - b\) umesto ispravnog \(-1 - a - b\).
    </div>
  </div>

  <!-- OPTIONAL CHALLENGE -->
  <div class="challenge-box">
    <div class="card-title"><span class="icon">&#127942;</span> Dodatni izazov</div>
    <p>Neka je \(P(x) = x^6 + ax^4 + bx^2 + c\) i neka je \(P\) deljiv sa \((x^2 - 1)^2\). Odredite vrednost \(a + b + c\).</p>
    <details style="background: transparent; border: 1px solid #34d399; margin: 15px 0;">
      <summary style="color: #34d399;">Prikazi nagovestavajuci savet</summary>
      <div class="detail-content">
        <p>Polinom \((x^2 - 1)^2 = (x-1)^2(x+1)^2\) ima dvostruke korene \(x = 1\) i \(x = -1\). Primenite uslove \(P(\pm 1) = 0\) i \(P'(\pm 1) = 0\). Koristite cinjenicu da je \(P(x)\) paran polinom (sadrzi samo parne stepene), pa vaze simetrije koje smanjuju broj nezavisnih jednacina. Smena \(t = x^2\) moze takodje biti korisna.</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('poly-canvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  const slider = document.getElementById('a-slider');
  const sliderLabel = document.getElementById('slider-label');

  const originX = W * 0.5;
  const originY = H * 0.5;
  const scaleX = 120;
  const scaleY = 40;

  function toCanvas(x, y) {
    return { x: originX + x * scaleX, y: originY - y * scaleY };
  }

  function fromCanvas(cx, cy) {
    return { x: (cx - originX) / scaleX, y: (originY - cy) / scaleY };
  }

  function P(x, a) {
    const b = -1 - a;
    return Math.pow(x, 5) + a * Math.pow(x, 3) + b * x;
  }

  function roundRect(context, x, y, w, h, r) {
    context.beginPath();
    context.moveTo(x + r, y);
    context.lineTo(x + w - r, y);
    context.arcTo(x + w, y, x + w, y + r, r);
    context.lineTo(x + w, y + h - r);
    context.arcTo(x + w, y + h, x + w - r, y + h, r);
    context.lineTo(x + r, y + h);
    context.arcTo(x, y + h, x, y + h - r, r);
    context.lineTo(x, y + r);
    context.arcTo(x, y, x + r, y, r);
    context.closePath();
    context.fill();
    context.stroke();
  }

  function draw() {
    const aVal = parseFloat(slider.value);
    const bVal = -1 - aVal;
    const isSolution = Math.abs(aVal - (-2)) < 0.06;

    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Grid
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 0.5;
    for (let gx = -3; gx <= 3; gx++) {
      const p = toCanvas(gx, 0);
      ctx.beginPath();
      ctx.moveTo(p.x, 20);
      ctx.lineTo(p.x, H - 20);
      ctx.stroke();
    }
    for (let gy = -5; gy <= 5; gy++) {
      const p = toCanvas(0, gy);
      if (p.y > 20 && p.y < H - 20) {
        ctx.beginPath();
        ctx.moveTo(20, p.y);
        ctx.lineTo(W - 20, p.y);
        ctx.stroke();
      }
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(20, originY);
    ctx.lineTo(W - 20, originY);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(originX, 20);
    ctx.lineTo(originX, H - 20);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    for (let gx = -3; gx <= 3; gx++) {
      if (gx === 0) continue;
      const p = toCanvas(gx, 0);
      ctx.fillText(String(gx), p.x, originY + 5);
    }
    ctx.textAlign = 'right';
    ctx.textBaseline = 'middle';
    for (let gy = -4; gy <= 4; gy += 2) {
      if (gy === 0) continue;
      const p = toCanvas(0, gy);
      if (p.y > 25 && p.y < H - 25) {
        ctx.fillText(String(gy), originX - 8, p.y);
      }
    }

    // Draw the polynomial curve
    ctx.beginPath();
    let started = false;
    for (let px = 20; px <= W - 20; px += 1) {
      const coords = fromCanvas(px, 0);
      const yVal = P(coords.x, aVal);
      const cp = toCanvas(coords.x, yVal);
      if (cp.y < -100 || cp.y > H + 100) {
        started = false;
        continue;
      }
      if (!started) {
        ctx.moveTo(px, cp.y);
        started = true;
      } else {
        ctx.lineTo(px, cp.y);
      }
    }
    ctx.strokeStyle = isSolution ? '#4ade80' : '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.stroke();

    // Mark roots: always x=0 is root (since P(x)=x^5+ax^3+bx = x(x^4+ax^2+b))
    // For solution a=-2, b=1: roots at 0, +-1 (double)
    // Highlight x=-1 root
    const pMinus1 = toCanvas(-1, 0);
    const p0 = toCanvas(0, 0);
    const pPlus1 = toCanvas(1, 0);

    // x=0 root (always present)
    ctx.beginPath();
    ctx.arc(p0.x, p0.y, 5, 0, 2 * Math.PI);
    ctx.fillStyle = '#94a3b8';
    ctx.fill();
    ctx.strokeStyle = '#0f172a';
    ctx.lineWidth = 2;
    ctx.stroke();

    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'bottom';
    ctx.fillText('x = 0', p0.x, p0.y - 10);

    if (isSolution) {
      // x = -1 double root
      ctx.beginPath();
      ctx.arc(pMinus1.x, pMinus1.y, 7, 0, 2 * Math.PI);
      ctx.fillStyle = '#4ade80';
      ctx.fill();
      ctx.strokeStyle = '#0f172a';
      ctx.lineWidth = 2;
      ctx.stroke();

      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'bottom';
      ctx.fillText('x = \u22121 (dvostruki)', pMinus1.x, pMinus1.y - 12);

      // x = 1 double root
      ctx.beginPath();
      ctx.arc(pPlus1.x, pPlus1.y, 7, 0, 2 * Math.PI);
      ctx.fillStyle = '#a78bfa';
      ctx.fill();
      ctx.strokeStyle = '#0f172a';
      ctx.lineWidth = 2;
      ctx.stroke();

      ctx.fillStyle = '#a78bfa';
      ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'top';
      ctx.fillText('x = 1 (dvostruki)', pPlus1.x, pPlus1.y + 10);
    }

    // Info panel
    const panelX = 15;
    const panelY = 15;
    const panelW = 220;
    const panelH = isSolution ? 120 : 85;

    ctx.fillStyle = 'rgba(30, 41, 59, 0.92)';
    ctx.strokeStyle = isSolution ? 'rgba(74, 222, 128, 0.4)' : 'rgba(96, 165, 250, 0.3)';
    ctx.lineWidth = 1;
    roundRect(ctx, panelX, panelY, panelW, panelH, 10);

    ctx.fillStyle = isSolution ? '#4ade80' : '#60a5fa';
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.textBaseline = 'top';
    ctx.fillText('Parametri:', panelX + 12, panelY + 10);

    ctx.fillStyle = '#e2e8f0';
    ctx.font = '12px Courier New, monospace';
    const aStr = aVal.toFixed(2).replace('.', ',');
    const bStr = bVal.toFixed(2).replace('.', ',');
    ctx.fillText('a = ' + aStr, panelX + 12, panelY + 30);
    ctx.fillText('b = ' + bStr, panelX + 12, panelY + 48);

    const a2b2 = aVal * aVal + bVal * bVal;
    ctx.fillText('a\u00B2 + b\u00B2 = ' + a2b2.toFixed(2).replace('.', ','), panelX + 12, panelY + 66);

    if (isSolution) {
      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
      ctx.fillText('Resenje! Q(x) | P(x)', panelX + 12, panelY + 92);
    }

    // Title
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'bottom';
    ctx.fillText('P(x) = x\u2075 + ax\u00B3 + bx,  uslov a + b = \u22121', W / 2, H - 8);

    // Update label
    const aDisplay = aVal.toFixed(2).replace('.', ',');
    sliderLabel.textContent = 'a = ' + aDisplay + (isSolution ? ' (resenje)' : '');
    sliderLabel.style.color = isSolution ? '#4ade80' : '#94a3b8';
  }

  draw();

  slider.addEventListener('input', draw);

  // Touch support
  let touching = false;
  canvas.addEventListener('touchstart', function(e) { touching = true; }, { passive: true });
  canvas.addEventListener('touchend', function(e) { touching = false; }, { passive: true });
})();
</script>

<script>
(() => {
  const steps = document.querySelectorAll('.step');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.add('active');
    });
  });
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{"title":"Deljivost polinoma i odredjivanje koeficijenata","subject":"math","unit":"algebra","topic_tags":["polinomi","deljivost polinoma","dvostruki koreni","sistem linearnih jednacina","izvod polinoma"]}
BRAINSPARK_META-->