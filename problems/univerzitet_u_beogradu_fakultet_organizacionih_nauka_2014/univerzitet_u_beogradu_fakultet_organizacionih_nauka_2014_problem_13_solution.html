<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Odnos povrsina valjka i kupe</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
  Problem: Cylinder and cone both have base radius r = 12 cm.
  Their volumes are equal, and the cone's height is 6 cm longer than
  the cylinder's height. Find the ratio of total surface areas (cylinder : cone).

  Step 1: Find heights.
    V_cylinder = pi * r^2 * h1
    V_cone = (1/3) * pi * r^2 * h2
    V_cyl = V_cone => pi*r^2*h1 = (1/3)*pi*r^2*h2
    Cancel pi*r^2: h1 = h2/3, so h2 = 3*h1

    Condition: h2 = h1 + 6
    => 3*h1 = h1 + 6
    => 2*h1 = 6
    => h1 = 3 cm, h2 = 9 cm

  Step 2: Total surface area of the cylinder.
    S_cyl = 2*pi*r^2 + 2*pi*r*h1
    = 2*pi*(12)^2 + 2*pi*12*3
    = 2*pi*144 + 2*pi*36
    = 288*pi + 72*pi
    = 360*pi

  Step 3: Total surface area of the cone.
    Slant height: l = sqrt(r^2 + h2^2) = sqrt(144 + 81) = sqrt(225) = 15 cm
    S_cone = pi*r^2 + pi*r*l
    = pi*144 + pi*12*15
    = 144*pi + 180*pi
    = 324*pi

  Step 4: Ratio.
    S_cyl : S_cone = 360*pi : 324*pi = 360 : 324
    GCD(360, 324):
      360 = 1*324 + 36
      324 = 9*36 + 0
    GCD = 36
    360/36 = 10, 324/36 = 9
    Ratio = 10 : 9

  Verification against answer key: E) 10 : 9. Correct!

  Double-check volumes:
    V_cyl = pi * 144 * 3 = 432*pi
    V_cone = (1/3) * pi * 144 * 9 = (1/3)*1296*pi = 432*pi. Equal. Correct.

  Double-check h2 - h1 = 9 - 3 = 6 cm. Correct.
</script>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.5rem;
  margin-bottom: 16px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 100px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  min-width: 90px;
  cursor: default;
}

.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 12px 0;
  overflow-x: auto;
}

.step-container {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  padding: 16px;
  border-radius: 12px;
  transition: all 0.3s ease;
  cursor: pointer;
}

.step-container:hover {
  background: rgba(96,165,250,0.05);
  border-left: 3px solid #4ade80;
  padding-left: 13px;
}

.step-container.active {
  background: rgba(96,165,250,0.05);
  border-left: 3px solid #4ade80;
  padding-left: 13px;
}

.step-badge {
  width: 28px;
  height: 28px;
  min-width: 28px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.85rem;
  color: #0f172a;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  margin-bottom: 8px;
}

.muted {
  color: #94a3b8;
  font-size: 0.9rem;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

.highlight-green {
  color: #4ade80;
  font-weight: 600;
}

.highlight-blue {
  color: #60a5fa;
  font-weight: 600;
}

details {
  margin: 15px 0;
  background: rgba(167,139,250,0.08);
  border: 1px solid rgba(167,139,250,0.2);
  border-radius: 10px;
  padding: 14px 18px;
}

details summary {
  cursor: pointer;
  font-weight: 600;
  color: #a78bfa;
}

details summary:hover {
  color: #c4b5fd;
}

details[open] summary {
  margin-bottom: 10px;
}

.theory-card details {
  background: rgba(96,165,250,0.06);
  border-color: rgba(96,165,250,0.15);
}

.theory-card details summary {
  color: #60a5fa;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
  text-align: center;
}

.insight-box .insight-label {
  color: #a78bfa;
  font-size: 0.9rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 12px;
}

.final-answer-box {
  background: linear-gradient(135deg, rgba(52,211,153,0.1), rgba(74,222,128,0.1));
  border: 2px solid rgba(52,211,153,0.35);
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
  text-align: center;
}

.final-answer-box .answer-label {
  color: #34d399;
  font-size: 0.9rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 12px;
}

.final-answer-box .answer-value {
  color: #4ade80;
  font-size: 1.8rem;
  font-weight: 700;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin-top: 16px;
}

.final-option {
  padding: 10px 18px;
  border-radius: 10px;
  border: 1px solid #334155;
  background: #1e293b;
  color: #94a3b8;
  font-size: 1rem;
}

.final-option.correct {
  border-color: #34d399;
  background: rgba(52,211,153,0.12);
  color: #4ade80;
  font-weight: 700;
}

.pitfall-card {
  border-left: 3px solid #e09468;
}

.pitfall-card h2 {
  color: #e09468;
}

.canvas-container {
  text-align: center;
  margin: 16px 0;
}

.canvas-container canvas {
  border-radius: 12px;
  border: 1px solid #334155;
  touch-action: none;
  max-width: 100%;
}

.canvas-hint {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-top: 8px;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 12px;
  padding: 12px 16px;
  background: rgba(52,211,153,0.06);
  border-radius: 10px;
  border: 1px solid rgba(52,211,153,0.15);
}

ul {
  padding-left: 20px;
}

ul li {
  margin-bottom: 8px;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 18px; }
  .given-grid { gap: 8px; }
  .given-item { min-width: 80px; padding: 10px 12px; }
  .step-container { flex-direction: column; gap: 8px; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Odnos povrsina valjka i kupe</h1>
  <p class="subtitle">Stereometrija - zapremine i povrsine rotacionih tela</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Tekst zadatka</h2>
    <p>
      Osnove pravog valjka i prave kupe su krugovi poluprecnika
      <span class="highlight-blue">\(12\) cm</span>. Ako su zapremine valjka i kupe jednake,
      a visina kupe za <span class="highlight-pink">\(6\) cm</span> duza od visine valjka,
      onda je odnos povrsina valjka i kupe jednak:
    </p>

    <div class="given-grid">
      <div class="given-item">
        <div class="label">Poluprecnik</div>
        <div class="value">\(r = 12\) cm</div>
      </div>
      <div class="given-item">
        <div class="label">Zapremine</div>
        <div class="value">\(V_v = V_k\)</div>
      </div>
      <div class="given-item">
        <div class="label">Razlika visina</div>
        <div class="value">\(h_2 - h_1 = 6\) cm</div>
      </div>
      <div class="given-item">
        <div class="label">Trazeno</div>
        <div class="value">\(P_v : P_k = \;?\)</div>
      </div>
    </div>

    <div class="given-grid" style="margin-top: 20px;">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(4 : 3\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(6 : 5\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(3 : 2\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(8 : 7\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(10 : 9\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>
      Iz uslova jednakih zapremina izracunacemo visine oba tela, a zatim odrediti
      ukupne povrsine valjka i kupe i naci njihov odnos.
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card theory-card">
    <details>
      <summary>Kljucne formule i teoreme</summary>
      <ul>
        <li><strong>Zapremina valjka:</strong> \( V_v = \pi r^2 h_1 \)</li>
        <li><strong>Zapremina kupe:</strong> \( V_k = \frac{1}{3}\pi r^2 h_2 \)</li>
        <li><strong>Ukupna povrsina valjka:</strong> \( P_v = 2\pi r^2 + 2\pi r h_1 \) (dve baze + omotac)</li>
        <li><strong>Ukupna povrsina kupe:</strong> \( P_k = \pi r^2 + \pi r l \) (baza + omotac), gde je \( l = \sqrt{r^2 + h_2^2} \) izvodnica (bocna strana)</li>
        <li><strong>Pitagorina teorema:</strong> \( l^2 = r^2 + h_2^2 \) - izvodnica kupe je hipotenuza pravouglog trougla sa katetama \(r\) i \(h_2\)</li>
      </ul>
      <div class="canvas-container" style="margin-top: 14px;">
        <canvas id="theoryCanvas" width="400" height="220"></canvas>
      </div>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <h2>Vizuelni prikaz</h2>
    <div class="canvas-container">
      <canvas id="mainCanvas" width="720" height="400"></canvas>
      <p class="canvas-hint">Valjak (levo) i kupa (desno) sa istim poluprecnikom osnove</p>
    </div>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <div class="step-container" id="step1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Postavimo jednacinu za zapremine</h3>
        <p>Posto su zapremine valjka i kupe jednake, imamo:</p>
        <div class="math-block">
          \[ V_v = V_k \]
          \[ \pi r^2 h_1 = \frac{1}{3} \pi r^2 h_2 \]
        </div>
        <p class="muted">Ovde je \(h_1\) visina valjka, a \(h_2\) visina kupe.</p>
      </div>
    </div>

    <div class="step-container" id="step2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Skratimo i izrazimo vezu izmedju visina</h3>
        <p>Posto su poluprecnici jednaki, mozemo da skratimo \(\pi r^2\) sa obe strane:</p>
        <div class="math-block">
          \[ h_1 = \frac{1}{3} h_2 \]
        </div>
        <p>Odnosno:</p>
        <div class="math-block">
          \[ h_2 = 3 h_1 \]
        </div>
        <p class="muted">Visina kupe je tri puta veca od visine valjka - to je posledica toga sto kupa treba da bude 3 puta visa da bi imala istu zapreminu kao valjak istog poluprecnika.</p>
      </div>
    </div>

    <div class="step-container" id="step3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Iskoristimo uslov za razliku visina</h3>
        <p>Znamo da je visina kupe za 6 cm duza od visine valjka:</p>
        <div class="math-block">
          \[ h_2 = h_1 + 6 \]
        </div>
        <p>Zamenimo \(h_2 = 3h_1\):</p>
        <div class="math-block">
          \[ 3h_1 = h_1 + 6 \]
          \[ 2h_1 = 6 \]
          \[ h_1 = 3 \text{ cm} \]
        </div>
        <p>Prema tome:</p>
        <div class="math-block">
          \[ h_2 = 3 \cdot 3 = 9 \text{ cm} \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details>
      <summary>Proveri se: Kolika je zapremina valjka?</summary>
      <p style="margin-top: 8px;">
        \( V_v = \pi \cdot 12^2 \cdot 3 = 432\pi \text{ cm}^3 \).
        Proverite i kupu: \( V_k = \frac{1}{3}\pi \cdot 144 \cdot 9 = 432\pi \text{ cm}^3 \). Jednake su!
      </p>
    </details>

    <div class="step-container" id="step4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Izracunamo ukupnu povrsinu valjka</h3>
        <p>Ukupna povrsina valjka se sastoji od dve baze i omotaca:</p>
        <div class="math-block">
          \[ P_v = 2\pi r^2 + 2\pi r h_1 \]
        </div>
        <p>Zamenom \(r = 12\) i \(h_1 = 3\):</p>
        <div class="math-block">
          \[ P_v = 2\pi \cdot 144 + 2\pi \cdot 12 \cdot 3 \]
          \[ P_v = 288\pi + 72\pi \]
          \[ P_v = 360\pi \text{ cm}^2 \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Odredimo izvodnicu kupe</h3>
        <p>Izvodnica (bocna strana) kupe je hipotenuza pravouglog trougla sa katetama \(r\) i \(h_2\):</p>
        <div class="math-block">
          \[ l = \sqrt{r^2 + h_2^2} = \sqrt{12^2 + 9^2} \]
          \[ l = \sqrt{144 + 81} = \sqrt{225} \]
          \[ l = 15 \text{ cm} \]
        </div>
        <p class="muted">Lepo se dobija ceo broj - trougao sa stranicama 9, 12, 15 je slican trouglu 3, 4, 5 (pomnozenom sa 3).</p>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details>
      <summary>Proveri se: Da li je \(9, 12, 15\) Pitagorina trojka?</summary>
      <p style="margin-top: 8px;">
        \(9^2 + 12^2 = 81 + 144 = 225 = 15^2\). Da, jeste!
        To je trojka \(3 \cdot (3, 4, 5)\).
      </p>
    </details>

    <div class="step-container" id="step6">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Izracunamo ukupnu povrsinu kupe</h3>
        <p>Ukupna povrsina kupe se sastoji od jedne baze i omotaca:</p>
        <div class="math-block">
          \[ P_k = \pi r^2 + \pi r l \]
        </div>
        <p>Zamenom \(r = 12\) i \(l = 15\):</p>
        <div class="math-block">
          \[ P_k = \pi \cdot 144 + \pi \cdot 12 \cdot 15 \]
          \[ P_k = 144\pi + 180\pi \]
          \[ P_k = 324\pi \text{ cm}^2 \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step7">
      <div class="step-badge">7</div>
      <div class="step-content">
        <h3>Odredimo odnos povrsina</h3>
        <p>Sada racunamo trazeni odnos:</p>
        <div class="math-block">
          \[ \frac{P_v}{P_k} = \frac{360\pi}{324\pi} = \frac{360}{324} \]
        </div>
        <p>Skracujemo sa \(36\) (NZD od 360 i 324):</p>
        <div class="math-block">
          \[ \frac{360}{324} = \frac{360 \div 36}{324 \div 36} = \frac{10}{9} \]
        </div>
        <p>Dakle, odnos povrsina valjka i kupe je <span class="highlight-green">\(10 : 9\)</span>.</p>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details>
      <summary>Proveri se: Da li je NZD(360, 324) zaista 36?</summary>
      <p style="margin-top: 8px;">
        \(360 = 1 \cdot 324 + 36\), zatim \(324 = 9 \cdot 36 + 0\).
        Prema Euklidovom algoritmu, NZD = 36. Tacno!
      </p>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <div class="insight-label">Kljucni uvid</div>
    <p style="margin-bottom: 12px;">Posto zapremina kupe iznosi tacno \(\frac{1}{3}\) zapremine valjka istih dimenzija, jednakost zapremina zahteva da kupa bude <strong>tri puta visa</strong>. Ovo, zajedno sa Pitagorinom trojkom \(9{-}12{-}15\), dovodi do elegantnog odnosa:</p>
    <div style="font-size: 1.6rem; font-weight: 700; color: #a78bfa; margin-top: 8px;">
      \( P_v : P_k = 10 : 9 \)
    </div>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <div class="answer-label">Konacan odgovor</div>
    <div class="answer-value">\( P_v : P_k = 10 : 9 \)</div>

    <div class="final-options">
      <div class="final-option">(A) \(4 : 3\)</div>
      <div class="final-option">(B) \(6 : 5\)</div>
      <div class="final-option">(C) \(3 : 2\)</div>
      <div class="final-option">(D) \(8 : 7\)</div>
      <div class="final-option correct">(E) \(10 : 9\)</div>
    </div>

    <div class="verification-note">
      <strong>Provera:</strong> Odnos \(10 : 9\) znaci da je povrsina valjka samo za oko 11% veca od povrsine kupe.
      To ima smisla jer je valjak veoma nizak (\(h_1 = 3\) cm) pa njegov omotac dodaje malo, ali ima dve baze
      umesto jedne. Kupa je visa, ali njen omotac se "suzava", pa je konacni odnos blizak \(1 : 1\).
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfall-card">
    <h2>Ceste greske</h2>
    <ul>
      <li>
        <strong>Zaboraviti da kupa ima samo jednu bazu:</strong> Ukupna povrsina valjka ima \(2\pi r^2\) (dve baze),
        dok kupa ima samo \(\pi r^2\) (jednu bazu). Ovo je cesta greska koja menja rezultat.
      </li>
      <li>
        <strong>Zameniti visinu i izvodnicu kupe:</strong> U formuli za omotac kupe koristi se
        izvodnica \(l\), a ne visina \(h_2\). Izvodnica se racuna Pitagorinom teoremom:
        \(l = \sqrt{r^2 + h_2^2}\).
      </li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card">
    <h2>Dodatni izazov</h2>
    <p>
      Sta bi se desilo sa odnosom povrsina da je razlika visina bila 12 cm umesto 6 cm
      (a svi ostali uslovi isti)?
    </p>
    <details>
      <summary>Pomoc</summary>
      <p style="margin-top: 8px;">
        Iz istog sistema jednacina dobijamo \(h_1 = 6\) cm i \(h_2 = 18\) cm.
        Izvodnica kupe bi bila \(l = \sqrt{144 + 324} = \sqrt{468} = 6\sqrt{13}\).
        Izracunajte obe povrsine i uporedite odnos sa prethodnim. Da li se odnos
        priblizio ili udaljio od \(1 : 1\)?
      </p>
    </details>
  </div>

</div>

<script>
(() => {
  // Theory canvas - right triangle showing slant height concept
  const thCanvas = document.getElementById('theoryCanvas');
  if (thCanvas) {
    const ctx = thCanvas.getContext('2d');
    const W = thCanvas.width;
    const H = thCanvas.height;

    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Draw a right triangle: r (horizontal), h (vertical), l (hypotenuse)
    const ox = 80, oy = H - 40;
    const rLen = 180, hLen = 140;

    // Triangle
    ctx.beginPath();
    ctx.moveTo(ox, oy);
    ctx.lineTo(ox + rLen, oy);
    ctx.lineTo(ox, oy - hLen);
    ctx.closePath();
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Right angle marker
    const sq = 14;
    ctx.beginPath();
    ctx.moveTo(ox + sq, oy);
    ctx.lineTo(ox + sq, oy - sq);
    ctx.lineTo(ox, oy - sq);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1.5;
    ctx.stroke();

    // Labels
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';

    // r label (bottom)
    ctx.fillStyle = '#f472b6';
    ctx.fillText('r', ox + rLen / 2, oy + 22);

    // h label (left)
    ctx.fillStyle = '#a78bfa';
    ctx.fillText('h', ox - 20, oy - hLen / 2 + 5);

    // l label (hypotenuse)
    ctx.save();
    ctx.fillStyle = '#4ade80';
    ctx.translate(ox + rLen / 2 + 15, oy - hLen / 2 - 10);
    ctx.fillText('l = \u221A(r\u00B2 + h\u00B2)', 60, 0);
    ctx.restore();

    // Dashed line for h
    ctx.setLineDash([5, 5]);
    ctx.beginPath();
    ctx.moveTo(ox, oy);
    ctx.lineTo(ox, oy - hLen);
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 1.5;
    ctx.stroke();
    ctx.setLineDash([]);

    // Title
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Presek kupe: pravougli trougao', ox + rLen + 30, 30);
    ctx.fillText('sa katetama r i h', ox + rLen + 30, 50);
    ctx.fillText('i hipotenuzom l (izvodnica)', ox + rLen + 30, 70);
  }

  // Main canvas - cylinder and cone side by side
  const canvas = document.getElementById('mainCanvas');
  if (canvas) {
    const ctx = canvas.getContext('2d');
    const W = canvas.width;
    const H = canvas.height;

    function draw() {
      ctx.clearRect(0, 0, W, H);
      ctx.fillStyle = '#0f172a';
      ctx.fillRect(0, 0, W, H);

      // Scale: 1 cm = ~12 px for nice proportions
      const scale = 12;
      const r = 12; // cm
      const h1 = 3; // cm (cylinder)
      const h2 = 9; // cm (cone)
      const l = 15; // cm (slant)

      const rPx = r * scale;
      const h1Px = h1 * scale;
      const h2Px = h2 * scale;

      // Ellipse ratio for 3D effect
      const ellipseRatio = 0.25;

      // --- CYLINDER (left side) ---
      const cxCyl = W * 0.28;
      const cyBase = H - 80; // bottom of cylinder
      const cyTop = cyBase - h1Px;

      // Bottom ellipse (base)
      ctx.beginPath();
      ctx.ellipse(cxCyl, cyBase, rPx, rPx * ellipseRatio, 0, 0, Math.PI * 2);
      ctx.strokeStyle = '#60a5fa';
      ctx.lineWidth = 2;
      ctx.stroke();

      // Fill bottom base
      ctx.beginPath();
      ctx.ellipse(cxCyl, cyBase, rPx, rPx * ellipseRatio, 0, 0, Math.PI * 2);
      ctx.fillStyle = 'rgba(96,165,250,0.08)';
      ctx.fill();

      // Side lines
      ctx.beginPath();
      ctx.moveTo(cxCyl - rPx, cyBase);
      ctx.lineTo(cxCyl - rPx, cyTop);
      ctx.strokeStyle = '#60a5fa';
      ctx.lineWidth = 2;
      ctx.stroke();

      ctx.beginPath();
      ctx.moveTo(cxCyl + rPx, cyBase);
      ctx.lineTo(cxCyl + rPx, cyTop);
      ctx.stroke();

      // Top ellipse
      ctx.beginPath();
      ctx.ellipse(cxCyl, cyTop, rPx, rPx * ellipseRatio, 0, 0, Math.PI * 2);
      ctx.strokeStyle = '#60a5fa';
      ctx.lineWidth = 2;
      ctx.stroke();

      // Fill top
      ctx.beginPath();
      ctx.ellipse(cxCyl, cyTop, rPx, rPx * ellipseRatio, 0, 0, Math.PI * 2);
      ctx.fillStyle = 'rgba(96,165,250,0.12)';
      ctx.fill();

      // Fill side
      ctx.beginPath();
      ctx.moveTo(cxCyl - rPx, cyBase);
      ctx.lineTo(cxCyl - rPx, cyTop);
      ctx.ellipse(cxCyl, cyTop, rPx, rPx * ellipseRatio, 0, Math.PI, 0, true);
      ctx.lineTo(cxCyl + rPx, cyBase);
      ctx.ellipse(cxCyl, cyBase, rPx, rPx * ellipseRatio, 0, 0, Math.PI, true);
      ctx.fillStyle = 'rgba(96,165,250,0.05)';
      ctx.fill();

      // Cylinder height dimension line
      ctx.setLineDash([4, 4]);
      ctx.beginPath();
      ctx.moveTo(cxCyl + rPx + 20, cyBase);
      ctx.lineTo(cxCyl + rPx + 20, cyTop);
      ctx.strokeStyle = '#a78bfa';
      ctx.lineWidth = 1.5;
      ctx.stroke();
      ctx.setLineDash([]);

      // Arrow caps
      ctx.beginPath();
      ctx.moveTo(cxCyl + rPx + 15, cyBase);
      ctx.lineTo(cxCyl + rPx + 25, cyBase);
      ctx.strokeStyle = '#a78bfa';
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(cxCyl + rPx + 15, cyTop);
      ctx.lineTo(cxCyl + rPx + 25, cyTop);
      ctx.stroke();

      // h1 label
      ctx.fillStyle = '#a78bfa';
      ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText('h\u2081 = 3 cm', cxCyl + rPx + 28, (cyBase + cyTop) / 2 + 5);

      // Radius dimension (dashed from center to edge)
      ctx.setLineDash([3, 3]);
      ctx.beginPath();
      ctx.moveTo(cxCyl, cyBase);
      ctx.lineTo(cxCyl + rPx, cyBase);
      ctx.strokeStyle = '#f472b6';
      ctx.lineWidth = 1.5;
      ctx.stroke();
      ctx.setLineDash([]);

      ctx.fillStyle = '#f472b6';
      ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('r = 12', cxCyl + rPx / 2, cyBase + 20);

      // "VALJAK" label
      ctx.fillStyle = '#60a5fa';
      ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('VALJAK', cxCyl, 30);

      // Volume label
      ctx.fillStyle = '#94a3b8';
      ctx.font = '13px Segoe UI, system-ui, sans-serif';
      ctx.fillText('V = 432\u03C0 cm\u00B3', cxCyl, 52);
      ctx.fillText('P = 360\u03C0 cm\u00B2', cxCyl, 70);

      // --- CONE (right side) ---
      const cxCone = W * 0.72;
      const coneBase = cyBase;
      const coneApex = coneBase - h2Px;

      // Base ellipse
      ctx.beginPath();
      ctx.ellipse(cxCone, coneBase, rPx, rPx * ellipseRatio, 0, 0, Math.PI * 2);
      ctx.strokeStyle = '#a78bfa';
      ctx.lineWidth = 2;
      ctx.stroke();

      // Fill base
      ctx.beginPath();
      ctx.ellipse(cxCone, coneBase, rPx, rPx * ellipseRatio, 0, 0, Math.PI * 2);
      ctx.fillStyle = 'rgba(167,139,250,0.08)';
      ctx.fill();

      // Side lines to apex
      ctx.beginPath();
      ctx.moveTo(cxCone - rPx, coneBase);
      ctx.lineTo(cxCone, coneApex);
      ctx.strokeStyle = '#a78bfa';
      ctx.lineWidth = 2;
      ctx.stroke();

      ctx.beginPath();
      ctx.moveTo(cxCone + rPx, coneBase);
      ctx.lineTo(cxCone, coneApex);
      ctx.stroke();

      // Fill cone body
      ctx.beginPath();
      ctx.moveTo(cxCone - rPx, coneBase);
      ctx.lineTo(cxCone, coneApex);
      ctx.lineTo(cxCone + rPx, coneBase);
      ctx.ellipse(cxCone, coneBase, rPx, rPx * ellipseRatio, 0, 0, Math.PI, true);
      ctx.fillStyle = 'rgba(167,139,250,0.05)';
      ctx.fill();

      // Apex point
      ctx.beginPath();
      ctx.arc(cxCone, coneApex, 4, 0, Math.PI * 2);
      ctx.fillStyle = '#a78bfa';
      ctx.fill();

      // Height dimension line
      ctx.setLineDash([4, 4]);
      ctx.beginPath();
      ctx.moveTo(cxCone + rPx + 20, coneBase);
      ctx.lineTo(cxCone + rPx + 20, coneApex);
      ctx.strokeStyle = '#4ade80';
      ctx.lineWidth = 1.5;
      ctx.stroke();
      ctx.setLineDash([]);

      ctx.beginPath();
      ctx.moveTo(cxCone + rPx + 15, coneBase);
      ctx.lineTo(cxCone + rPx + 25, coneBase);
      ctx.strokeStyle = '#4ade80';
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(cxCone + rPx + 15, coneApex);
      ctx.lineTo(cxCone + rPx + 25, coneApex);
      ctx.stroke();

      // h2 label
      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText('h\u2082 = 9 cm', cxCone + rPx + 28, (coneBase + coneApex) / 2 + 5);

      // Slant height label (along one side)
      const midSlantX = (cxCone + rPx + cxCone) / 2 + 8;
      const midSlantY = (coneBase + coneApex) / 2;
      ctx.fillStyle = '#f472b6';
      ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText('l = 15', midSlantX + 5, midSlantY - 5);

      // Radius dimension
      ctx.setLineDash([3, 3]);
      ctx.beginPath();
      ctx.moveTo(cxCone, coneBase);
      ctx.lineTo(cxCone + rPx, coneBase);
      ctx.strokeStyle = '#f472b6';
      ctx.lineWidth = 1.5;
      ctx.stroke();
      ctx.setLineDash([]);

      ctx.fillStyle = '#f472b6';
      ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('r = 12', cxCone + rPx / 2, coneBase + 20);

      // Dashed height line inside cone
      ctx.setLineDash([3, 3]);
      ctx.beginPath();
      ctx.moveTo(cxCone, coneBase);
      ctx.lineTo(cxCone, coneApex);
      ctx.strokeStyle = 'rgba(74,222,128,0.4)';
      ctx.lineWidth = 1;
      ctx.stroke();
      ctx.setLineDash([]);

      // "KUPA" label
      ctx.fillStyle = '#a78bfa';
      ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('KUPA', cxCone, 30);

      // Volume label
      ctx.fillStyle = '#94a3b8';
      ctx.font = '13px Segoe UI, system-ui, sans-serif';
      ctx.fillText('V = 432\u03C0 cm\u00B3', cxCone, 52);
      ctx.fillText('P = 324\u03C0 cm\u00B2', cxCone, 70);

      // "=" sign between volumes
      ctx.fillStyle = '#34d399';
      ctx.font = 'bold 22px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('V\u2081 = V\u2082', W / 2, H / 2 - 20);

      // Ratio at bottom center
      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
      ctx.fillText('P\u2081 : P\u2082 = 360\u03C0 : 324\u03C0 = 10 : 9', W / 2, H - 20);
    }

    draw();
  }

  // Step click interaction
  document.querySelectorAll('.step-container').forEach(function(step) {
    step.addEventListener('click', function() {
      document.querySelectorAll('.step-container').forEach(function(s) {
        s.classList.remove('active');
      });
      step.classList.toggle('active');
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Odnos povrsina valjka i kupe jednakih zapremina",
  "subject": "math",
  "unit": "geometry",
  "topic_tags": ["stereometrija", "valjak", "kupa", "zapremina", "povrsina", "Pitagorina teorema"]
}
BRAINSPARK_META-->