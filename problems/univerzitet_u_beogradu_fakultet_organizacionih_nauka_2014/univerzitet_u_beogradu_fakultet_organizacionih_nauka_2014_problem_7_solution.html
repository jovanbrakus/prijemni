<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Imaginarni deo proizvoda kompleksnih brojeva</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM: Find Im(i*z) given two conditions on complex number z:
  Condition 1: |z - 1 + i| / |z - 2 + 2i| = 1, i.e. |z - (1-i)| = |z - (2-2i)|
  Condition 2: |z| / |z - 1 - i| = 1, i.e. |z| = |z - (1+i)|

Let z = x + yi where x, y are real numbers.

CONDITION 1 ANALYSIS:
|z - (1 - i)| = |z - (2 - 2i)|
This means z is equidistant from points A(1, -1) and B(2, -2) in the complex plane.
The locus is the perpendicular bisector of segment AB.

Midpoint of AB: ((1+2)/2, (-1+(-2))/2) = (3/2, -3/2)
Direction vector AB: (2-1, -2-(-1)) = (1, -1)
Perpendicular direction: (1, 1), so slope of perpendicular bisector = 1

Equation through (3/2, -3/2) with slope 1:
y - (-3/2) = 1*(x - 3/2)
y + 3/2 = x - 3/2
y = x - 3

VERIFICATION by squaring:
(x-1)^2 + (y+1)^2 = (x-2)^2 + (y+2)^2
x^2 - 2x + 1 + y^2 + 2y + 1 = x^2 - 4x + 4 + y^2 + 4y + 4
-2x + 2y + 2 = -4x + 4y + 8
2x - 2y - 6 = 0
x - y = 3
y = x - 3  CONFIRMED

CONDITION 2 ANALYSIS:
|z| = |z - (1 + i)|
This means z is equidistant from O(0, 0) and C(1, 1).
The locus is the perpendicular bisector of segment OC.

Midpoint of OC: (1/2, 1/2)
Direction vector OC: (1, 1)
Perpendicular direction: (1, -1), so slope = -1

Equation through (1/2, 1/2) with slope -1:
y - 1/2 = -1*(x - 1/2)
y = -x + 1

VERIFICATION by squaring:
x^2 + y^2 = (x-1)^2 + (y-1)^2
x^2 + y^2 = x^2 - 2x + 1 + y^2 - 2y + 1
0 = -2x - 2y + 2
2x + 2y = 2
x + y = 1
y = -x + 1  CONFIRMED

INTERSECTION:
y = x - 3  ... (1)
y = -x + 1 ... (2)

From (1) and (2):
x - 3 = -x + 1
2x = 4
x = 2
y = 2 - 3 = -1

So z = 2 - i.

COMPUTE Im(i * z):
i * z = i * (2 - i) = 2i - i^2 = 2i - (-1) = 1 + 2i

Im(i * z) = 2

ANSWER CHECK: The correct answer from the key is B) 2. CONFIRMED!

DOUBLE CHECK:
Verify z = 2 - i satisfies both conditions:
Condition 1: |z - (1-i)| = |(2-i) - (1-i)| = |1| = 1
             |z - (2-2i)| = |(2-i) - (2-2i)| = |i| = 1
             1 = 1  OK

Condition 2: |z| = |2 - i| = sqrt(4 + 1) = sqrt(5)
             |z - (1+i)| = |(2-i) - (1+i)| = |1 - 2i| = sqrt(1 + 4) = sqrt(5)
             sqrt(5) = sqrt(5)  OK

Everything checks out. Answer: B) 2
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

<style>
*, *::before, *::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 1rem;
  min-height: 100vh;
}

.container {
  max-width: 900px;
  margin: 0 auto;
  padding: 1rem 0;
}

h1 {
  font-size: clamp(1.5rem, 4vw, 2.2rem);
  font-weight: 700;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-align: center;
  margin-bottom: 0.25rem;
}

.subtitle {
  text-align: center;
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 2rem;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
}

.card-title {
  font-size: 1.15rem;
  font-weight: 600;
  color: #60a5fa;
  margin-bottom: 0.75rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.card-title .icon {
  font-size: 1.3rem;
}

.problem-statement {
  border: 2px solid #a78bfa;
  font-size: 1.08rem;
}

.problem-statement .card-title {
  color: #a78bfa;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  margin-top: 1rem;
}

.given-item {
  background: rgba(96, 165, 250, 0.08);
  border: 1px solid rgba(96, 165, 250, 0.2);
  border-radius: 10px;
  padding: 0.6rem 1rem;
  text-align: center;
  min-width: 70px;
}

.given-item .label {
  font-size: 0.8rem;
  color: #94a3b8;
  margin-bottom: 0.2rem;
}

.given-item .value {
  font-size: 1.05rem;
  color: #e2e8f0;
  font-weight: 600;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card .card-title {
  color: #a78bfa;
}

.theory-card details {
  margin: 15px 0;
}

.theory-card summary {
  cursor: pointer;
  font-size: 1.05rem;
  font-weight: 600;
  color: #60a5fa;
  padding: 0.5rem 0;
  list-style: none;
}

.theory-card summary::-webkit-details-marker {
  display: none;
}

.theory-card summary::before {
  content: '\25B6';
  display: inline-block;
  margin-right: 0.5rem;
  font-size: 0.8rem;
  transition: transform 0.2s;
}

.theory-card details[open] summary::before {
  transform: rotate(90deg);
}

.theory-content {
  padding: 1rem 0;
  color: #cbd5e1;
}

.theory-content ul {
  list-style: none;
  padding: 0;
}

.theory-content li {
  padding: 0.4rem 0;
  padding-left: 1.2rem;
  position: relative;
}

.theory-content li::before {
  content: '\2022';
  color: #60a5fa;
  position: absolute;
  left: 0;
  font-weight: bold;
}

.canvas-card {
  text-align: center;
}

.canvas-card canvas {
  border-radius: 10px;
  border: 1px solid #334155;
  max-width: 100%;
  touch-action: none;
}

.drag-hint {
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 0.5rem;
  font-style: italic;
}

.step {
  display: flex;
  gap: 1rem;
  padding: 1rem;
  border-radius: 10px;
  margin-bottom: 0.75rem;
  cursor: pointer;
  transition: all 0.2s;
  border-left: 3px solid transparent;
}

.step:hover, .step.active {
  background: rgba(96, 165, 250, 0.05);
  border-left-color: #4ade80;
}

.step-badge {
  width: 32px;
  height: 32px;
  min-width: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  margin-top: 0.1rem;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  font-size: 1.05rem;
  color: #e2e8f0;
  margin-bottom: 0.4rem;
}

.step-content p {
  color: #cbd5e1;
  margin-bottom: 0.5rem;
}

.math-block {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 8px;
  padding: 0.75rem 1rem;
  margin: 0.5rem 0;
  overflow-x: auto;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 0.3rem;
}

.checkpoint {
  margin: 15px 0;
  background: rgba(163, 139, 250, 0.06);
  border: 1px solid rgba(163, 139, 250, 0.2);
  border-radius: 10px;
  padding: 0.75rem 1rem;
}

.checkpoint summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 0.95rem;
  list-style: none;
}

.checkpoint summary::-webkit-details-marker {
  display: none;
}

.checkpoint summary::before {
  content: '\2753';
  margin-right: 0.5rem;
}

.checkpoint .reveal {
  padding-top: 0.5rem;
  color: #cbd5e1;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.12), rgba(167, 139, 250, 0.12));
  border: 1px solid rgba(96, 165, 250, 0.3);
  border-radius: 14px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  text-align: center;
}

.insight-box .card-title {
  justify-content: center;
  color: #60a5fa;
}

.insight-formula {
  font-size: 1.3rem;
  margin: 1rem 0;
}

.insight-formula .result {
  color: #4ade80;
  font-weight: 700;
}

.final-answer {
  background: linear-gradient(135deg, rgba(52, 211, 153, 0.1), rgba(74, 222, 128, 0.1));
  border: 2px solid #34d399;
  border-radius: 14px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  text-align: center;
}

.final-answer .card-title {
  justify-content: center;
  color: #34d399;
}

.answer-big {
  font-size: 1.6rem;
  font-weight: 700;
  color: #4ade80;
  margin: 0.75rem 0;
}

.answer-options-row {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 0.75rem;
  margin-top: 1rem;
}

.answer-opt {
  padding: 0.5rem 1.2rem;
  border-radius: 10px;
  border: 1px solid #334155;
  background: #1e293b;
  color: #94a3b8;
  font-size: 1rem;
}

.answer-opt.correct {
  border-color: #34d399;
  color: #4ade80;
  background: rgba(52, 211, 153, 0.12);
  font-weight: 700;
}

.verification-note {
  margin-top: 1rem;
  padding: 0.75rem 1rem;
  background: rgba(52, 211, 153, 0.06);
  border-radius: 8px;
  color: #94a3b8;
  font-size: 0.9rem;
  text-align: left;
}

.pitfall-card {
  border-left: 3px solid #f472b6;
}

.pitfall-card .card-title {
  color: #f472b6;
}

.pitfall-card ul {
  list-style: none;
  padding: 0;
}

.pitfall-card li {
  padding: 0.4rem 0;
  padding-left: 1.5rem;
  position: relative;
  color: #cbd5e1;
}

.pitfall-card li::before {
  content: '\26A0';
  position: absolute;
  left: 0;
  color: #e09468;
}

.challenge-card details {
  margin: 15px 0;
}

.challenge-card summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  list-style: none;
}

.challenge-card summary::-webkit-details-marker {
  display: none;
}

.challenge-card summary::before {
  content: '\1F4A1';
  margin-right: 0.5rem;
}

@media (max-width: 700px) {
  .container {
    padding: 0.5rem 0;
  }
  .card {
    padding: 1rem;
  }
  .step {
    padding: 0.75rem;
  }
  .given-grid {
    justify-content: center;
  }
  h1 {
    font-size: 1.4rem;
  }
}
</style>
</head>
<body>
<div class="container">

  <h1>Imaginarni deo proizvoda kompleksnih brojeva</h1>
  <p class="subtitle">Kompleksni brojevi - geometrijska interpretacija i simetrala duzhi</p>

  <!-- PROBLEM STATEMENT -->
  <div class="card problem-statement">
    <h2 class="card-title"><span class="icon">&#128209;</span> Tekst zadatka</h2>
    <p>Ako za kompleksan broj \( z \) vazhi:</p>
    <div class="math-block">
      \[ \frac{|z - 1 + i|}{|z - 2 + 2i|} = 1 \quad \text{i} \quad \frac{|z|}{|z - 1 - i|} = 1 \]
    </div>
    <p>gde je \( i^2 = -1 \), tada je \( \text{Im}(i \cdot z) \) jednak:</p>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(1\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(2\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(-2\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(0\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(-1\)</div>
      </div>
    </div>
  </div>

  <!-- PLAN -->
  <div class="card plan-card">
    <h2 class="card-title"><span class="icon">&#128204;</span> Plan resavanja</h2>
    <p>Svaki uslov oblika \( |z - A| = |z - B| \) opisuje simetralu duzhi \( AB \) u kompleksnoj ravni. Nacicemo jednachine obe simetrale, pronaci njihov presek i tako odrediti \( z \), a zatim izrachunati \( \text{Im}(i \cdot z) \).</p>
  </div>

  <!-- THEORY -->
  <div class="card theory-card">
    <details>
      <summary>&#128208; Kljuchne formule i teoreme</summary>
      <div class="theory-content">
        <ul>
          <li><strong>Geometrijsko znachenje modula razlike:</strong> \( |z - w| \) je rastojanje izmedju tachaka \( z \) i \( w \) u kompleksnoj ravni.</li>
          <li><strong>Simetrala duzhi:</strong> Skup tachaka jednako udaljenih od dve date tachke \( A \) i \( B \) je prava koja prolazi kroz sredishte duzhi \( AB \) i normalna je na nju.</li>
          <li><strong>Imaginarni deo proizvoda:</strong> Ako je \( z = x + yi \), tada je \( i \cdot z = i(x + yi) = -y + xi \), pa je \( \text{Im}(i \cdot z) = x \).</li>
          <li><strong>Kvadriranje modula:</strong> \( |z - a|^2 = (x - \text{Re}(a))^2 + (y - \text{Im}(a))^2 \)</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- VISUAL AID / CANVAS -->
  <div class="card canvas-card">
    <h2 class="card-title"><span class="icon">&#128200;</span> Geometrijska ilustracija</h2>
    <canvas id="diagram" width="600" height="520"></canvas>
    <p class="drag-hint">Dijagram prikazuje simetrale i tachku preseka z = 2 - i</p>
  </div>

  <!-- STEP-BY-STEP SOLUTION -->
  <div class="card">
    <h2 class="card-title"><span class="icon">&#128736;</span> Reshenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step" tabindex="0">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Interpretacija prvog uslova</h3>
        <p>Uslov \( |z - 1 + i| = |z - 2 + 2i| \) zapisujemo kao:</p>
        <div class="math-block">
          \[ |z - (1 - i)| = |z - (2 - 2i)| \]
        </div>
        <p>To znachi da je tachka \( z \) jednako udaljena od tachaka \( A(1, -1) \) i \( B(2, -2) \) u kompleksnoj ravni.</p>
        <p class="note">Lokus ovakvih tachaka je simetrala duzhi AB.</p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step" tabindex="0">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Jednachina simetrale duzhi AB</h3>
        <p>Sredishte duzhi \( AB \):</p>
        <div class="math-block">
          \[ S_1 = \left(\frac{1+2}{2},\; \frac{-1+(-2)}{2}\right) = \left(\frac{3}{2},\; -\frac{3}{2}\right) \]
        </div>
        <p>Vektor pravca duzhi \( AB \) je \( \vec{AB} = (1, -1) \). Simetrala je normalna na \( AB \), dakle njen nagibni koeficijent je \( k = 1 \).</p>
        <p>Jednachina prave kroz \( S_1 \) sa nagibom 1:</p>
        <div class="math-block">
          \[ y + \frac{3}{2} = 1 \cdot \left(x - \frac{3}{2}\right) \implies y = x - 3 \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Koji uslov opisuje pravu \( y = x - 3 \)?</summary>
      <div class="reveal">
        <p>To je uslov \( x - y = 3 \). Mozhe se proveriti kvadriranjem: iz \( |z - (1-i)|^2 = |z - (2-2i)|^2 \) dobijamo \( -2x + 2y + 2 = -4x + 4y + 8 \), tj. \( 2x - 2y = 6 \), odnosno \( x - y = 3 \).</p>
      </div>
    </details>

    <!-- Step 3 -->
    <div class="step" tabindex="0">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Interpretacija drugog uslova</h3>
        <p>Uslov \( |z| = |z - 1 - i| \) zapisujemo kao:</p>
        <div class="math-block">
          \[ |z - 0| = |z - (1 + i)| \]
        </div>
        <p>Tachka \( z \) je jednako udaljena od koordinatnog pochetka \( O(0, 0) \) i tachke \( C(1, 1) \).</p>
        <p class="note">Lokus je simetrala duzhi OC.</p>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step" tabindex="0">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Jednachina simetrale duzhi OC</h3>
        <p>Sredishte duzhi \( OC \):</p>
        <div class="math-block">
          \[ S_2 = \left(\frac{0+1}{2},\; \frac{0+1}{2}\right) = \left(\frac{1}{2},\; \frac{1}{2}\right) \]
        </div>
        <p>Vektor pravca \( \vec{OC} = (1, 1) \). Normala ima nagib \( k = -1 \).</p>
        <p>Jednachina prave kroz \( S_2 \) sa nagibom \( -1 \):</p>
        <div class="math-block">
          \[ y - \frac{1}{2} = -1 \cdot \left(x - \frac{1}{2}\right) \implies y = -x + 1 \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Koliki je zbir \( x + y \) za tachke na drugoj simetrali?</summary>
      <div class="reveal">
        <p>Iz \( y = -x + 1 \) sledi \( x + y = 1 \). Svaka tachka na ovoj simetrali ima zbir koordinata jednak 1.</p>
      </div>
    </details>

    <!-- Step 5 -->
    <div class="step" tabindex="0">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Presek simetrala - odredjivanje z</h3>
        <p>Reshavamo sistem jednachina:</p>
        <div class="math-block">
          \[ \begin{cases} y = x - 3 \\ y = -x + 1 \end{cases} \]
        </div>
        <p>Izjednachavamo desne strane:</p>
        <div class="math-block">
          \[ x - 3 = -x + 1 \]
        </div>
        <div class="math-block">
          \[ 2x = 4 \implies x = 2 \]
        </div>
        <div class="math-block">
          \[ y = 2 - 3 = -1 \]
        </div>
        <p>Dakle, \( z = 2 - i \).</p>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step" tabindex="0">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Rachunanje \( \text{Im}(i \cdot z) \)</h3>
        <p>Mnozhimo \( z = 2 - i \) sa \( i \):</p>
        <div class="math-block">
          \[ i \cdot z = i \cdot (2 - i) = 2i - i^2 \]
        </div>
        <p>Poshto je \( i^2 = -1 \):</p>
        <div class="math-block">
          \[ i \cdot z = 2i - (-1) = 1 + 2i \]
        </div>
        <p>Imaginarni deo je:</p>
        <div class="math-block">
          \[ \text{Im}(i \cdot z) = \text{Im}(1 + 2i) = 2 \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Koji je realni deo broja \( i \cdot z \)?</summary>
      <div class="reveal">
        <p>\( \text{Re}(i \cdot z) = \text{Re}(1 + 2i) = 1 \). Generalno, za \( z = x + yi \) vazhi \( \text{Re}(i \cdot z) = -y \), a \( \text{Im}(i \cdot z) = x \).</p>
      </div>
    </details>

  </div>

  <!-- KEY INSIGHT -->
  <div class="insight-box">
    <h2 class="card-title"><span class="icon">&#10024;</span> Kljuchni uvid</h2>
    <p>Uslov \( |z - A| = |z - B| \) uvek opisuje simetralu duzhi \( AB \). Presek dve simetrale daje jedinstven kompleksan broj.</p>
    <div class="insight-formula">
      \[ z = 2 - i \implies i \cdot z = 1 + 2i \implies \text{Im}(i \cdot z) = \color{#4ade80}{2} \]
    </div>
  </div>

  <!-- FINAL ANSWER -->
  <div class="final-answer">
    <h2 class="card-title"><span class="icon">&#9989;</span> Konachni odgovor</h2>
    <div class="answer-big">\( \text{Im}(i \cdot z) = 2 \)</div>
    <div class="answer-options-row">
      <span class="answer-opt">(A) \(1\)</span>
      <span class="answer-opt correct">(B) \(2\)</span>
      <span class="answer-opt">(C) \(-2\)</span>
      <span class="answer-opt">(D) \(0\)</span>
      <span class="answer-opt">(E) \(-1\)</span>
    </div>
    <div class="verification-note">
      <strong>Verifikacija:</strong> Za \( z = 2 - i \):
      \( |z - (1-i)| = |1| = 1 \) i \( |z - (2-2i)| = |i| = 1 \), dakle prvi uslov vazhi.
      \( |z| = \sqrt{5} \) i \( |z - (1+i)| = |1 - 2i| = \sqrt{5} \), dakle i drugi uslov vazhi.
    </div>
  </div>

  <!-- COMMON PITFALLS -->
  <div class="card pitfall-card">
    <h2 class="card-title"><span class="icon">&#9888;</span> Cheste greshke</h2>
    <ul>
      <li>Nepravilno chitanje znakova: \( z - 1 + i = z - (1 - i) \), a ne \( z - (1 + i) \). Slichno, \( z - 2 + 2i = z - (2 - 2i) \). Obratite pazhnju na znake ispred imaginarnog dela!</li>
      <li>Zamena realnog i imaginarnog dela u konachnom rachunu: \( \text{Im}(1 + 2i) = 2 \), a ne 1. Rezultat mnozhenja sa \( i \) zamenjuje uloge Re i Im dela.</li>
    </ul>
  </div>

  <!-- OPTIONAL CHALLENGE -->
  <div class="card challenge-card">
    <h2 class="card-title"><span class="icon">&#127942;</span> Dodatni izazov</h2>
    <p>Odredite \( \text{Re}(\bar{z} \cdot z + i \cdot z^2) \) za isti kompleksan broj \( z = 2 - i \).</p>
    <details>
      <summary>Nagovestaj</summary>
      <div class="reveal">
        <p>Iskoristite da je \( \bar{z} \cdot z = |z|^2 = 5 \), a \( z^2 = (2-i)^2 = 4 - 4i + i^2 = 3 - 4i \). Zatim izrachunajte \( i \cdot z^2 \) i saberite sa 5.</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  // Step click interaction
  const steps = document.querySelectorAll('.step');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.add('active');
    });
  });

  // Canvas diagram
  const canvas = document.getElementById('diagram');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  // Coordinate system: center at pixel (180, 320), scale 80px per unit
  const originX = 180;
  const originY = 320;
  const scale = 80;

  function toCanvas(x, y) {
    return { x: originX + x * scale, y: originY - y * scale };
  }

  function drawAll() {
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Grid
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (let gx = -3; gx <= 5; gx++) {
      const p = toCanvas(gx, 0);
      ctx.beginPath();
      ctx.moveTo(p.x, 0);
      ctx.lineTo(p.x, H);
      ctx.stroke();
    }
    for (let gy = -4; gy <= 3; gy++) {
      const p = toCanvas(0, gy);
      ctx.beginPath();
      ctx.moveTo(0, p.y);
      ctx.lineTo(W, p.y);
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    // x-axis
    ctx.beginPath();
    ctx.moveTo(0, originY);
    ctx.lineTo(W, originY);
    ctx.stroke();
    // y-axis
    ctx.beginPath();
    ctx.moveTo(originX, 0);
    ctx.lineTo(originX, H);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#64748b';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    for (let gx = -2; gx <= 4; gx++) {
      if (gx === 0) continue;
      const p = toCanvas(gx, 0);
      ctx.fillText(gx.toString(), p.x, originY + 6);
    }
    ctx.textAlign = 'right';
    ctx.textBaseline = 'middle';
    for (let gy = -3; gy <= 2; gy++) {
      if (gy === 0) continue;
      const p = toCanvas(0, gy);
      ctx.fillText(gy.toString(), originX - 8, p.y);
    }
    ctx.fillText('Re', W - 10, originY - 10);
    ctx.textAlign = 'center';
    ctx.fillText('Im', originX + 18, 12);
    ctx.fillText('O', originX - 12, originY + 10);

    // Draw perpendicular bisector 1: y = x - 3 (from x=-1 to x=5)
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.setLineDash([]);
    const l1Start = toCanvas(-1, -4);
    const l1End = toCanvas(5, 2);
    ctx.beginPath();
    ctx.moveTo(l1Start.x, l1Start.y);
    ctx.lineTo(l1End.x, l1End.y);
    ctx.stroke();

    // Label for bisector 1
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    const lb1 = toCanvas(4.2, 1.5);
    ctx.fillText('y = x - 3', lb1.x, lb1.y);

    // Draw perpendicular bisector 2: y = -x + 1 (from x=-1 to x=4)
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2;
    const l2Start = toCanvas(-1, 2);
    const l2End = toCanvas(4, -3);
    ctx.beginPath();
    ctx.moveTo(l2Start.x, l2Start.y);
    ctx.lineTo(l2End.x, l2End.y);
    ctx.stroke();

    // Label for bisector 2
    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    const lb2 = toCanvas(-1.2, 2.3);
    ctx.fillText('y = -x + 1', lb2.x, lb2.y);

    // Draw segment AB dashed
    const pA = toCanvas(1, -1);
    const pB = toCanvas(2, -2);
    ctx.strokeStyle = 'rgba(96,165,250,0.4)';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.moveTo(pA.x, pA.y);
    ctx.lineTo(pB.x, pB.y);
    ctx.stroke();
    ctx.setLineDash([]);

    // Draw segment OC dashed
    const pO = toCanvas(0, 0);
    const pC = toCanvas(1, 1);
    ctx.strokeStyle = 'rgba(167,139,250,0.4)';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.moveTo(pO.x, pO.y);
    ctx.lineTo(pC.x, pC.y);
    ctx.stroke();
    ctx.setLineDash([]);

    // Points A, B, O, C
    function drawPoint(cx, cy, color, label, labelOffX, labelOffY) {
      const p = toCanvas(cx, cy);
      ctx.beginPath();
      ctx.arc(p.x, p.y, 5, 0, 2 * Math.PI);
      ctx.fillStyle = color;
      ctx.fill();
      ctx.strokeStyle = '#0f172a';
      ctx.lineWidth = 1.5;
      ctx.stroke();

      ctx.fillStyle = color;
      ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText(label, p.x + labelOffX, p.y + labelOffY);
    }

    drawPoint(1, -1, '#60a5fa', 'A(1,-1)', 40, 0);
    drawPoint(2, -2, '#60a5fa', 'B(2,-2)', 45, 0);
    drawPoint(0, 0, '#a78bfa', '', 0, 0);
    drawPoint(1, 1, '#a78bfa', 'C(1,1)', 35, -5);

    // Intersection point z = (2, -1)
    const pZ = toCanvas(2, -1);

    // Glow effect for z
    const glow = ctx.createRadialGradient(pZ.x, pZ.y, 0, pZ.x, pZ.y, 25);
    glow.addColorStop(0, 'rgba(74,222,128,0.3)');
    glow.addColorStop(1, 'rgba(74,222,128,0)');
    ctx.fillStyle = glow;
    ctx.beginPath();
    ctx.arc(pZ.x, pZ.y, 25, 0, 2 * Math.PI);
    ctx.fill();

    // z point
    ctx.beginPath();
    ctx.arc(pZ.x, pZ.y, 7, 0, 2 * Math.PI);
    ctx.fillStyle = '#4ade80';
    ctx.fill();
    ctx.strokeStyle = '#0f172a';
    ctx.lineWidth = 2;
    ctx.stroke();

    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('z = 2 - i', pZ.x + 12, pZ.y - 5);

    // Legend
    const legendX = W - 190;
    const legendY = 20;
    ctx.fillStyle = 'rgba(30,41,59,0.9)';
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.roundRect(legendX, legendY, 175, 85, 8);
    ctx.fill();
    ctx.stroke();

    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';

    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(legendX + 10, legendY + 18);
    ctx.lineTo(legendX + 35, legendY + 18);
    ctx.stroke();
    ctx.fillStyle = '#60a5fa';
    ctx.fillText('Simetrala AB', legendX + 42, legendY + 22);

    ctx.strokeStyle = '#a78bfa';
    ctx.beginPath();
    ctx.moveTo(legendX + 10, legendY + 40);
    ctx.lineTo(legendX + 35, legendY + 40);
    ctx.stroke();
    ctx.fillStyle = '#a78bfa';
    ctx.fillText('Simetrala OC', legendX + 42, legendY + 44);

    ctx.beginPath();
    ctx.arc(legendX + 22, legendY + 62, 5, 0, 2 * Math.PI);
    ctx.fillStyle = '#4ade80';
    ctx.fill();
    ctx.fillText('Presek: z = 2 - i', legendX + 42, legendY + 66);
  }

  drawAll();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Imaginarni deo proizvoda kompleksnih brojeva",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["kompleksni brojevi", "modul kompleksnog broja", "simetrala duzhi", "geometrija kompleksne ravni"]
}
BRAINSPARK_META-->