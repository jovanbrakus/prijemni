<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ortogonalna projekcija centra kruznice na pravu</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM:
Ortogonalna projekcija centra kruznice x^2 + y^2 - 2x - 4y - 2 = 0
na pravu x + y + 1 = 0.
Options: A) Q(1,-2), B) N(-1,0), C) P(2,-3), D) R(-2,1), E) M(0,-1)

STEP-BY-STEP LOGIC:

1. Nadjimo centar i poluprecnik kruznice:
   x^2 + y^2 - 2x - 4y - 2 = 0
   (x^2 - 2x + 1) + (y^2 - 4y + 4) - 2 - 1 - 4 = 0
   (x - 1)^2 + (y - 2)^2 = 7
   Centar: C(1, 2), poluprecnik: r = sqrt(7)

2. Prava: x + y + 1 = 0, tj. y = -x - 1
   Normalni vektor prave: n = (1, 1)

3. Ortogonalna projekcija tacke C(1, 2) na pravu x + y + 1 = 0:
   Normala iz C na pravu ima pravac (1, 1) (isti kao normalni vektor prave).
   Parametarski: (x, y) = (1 + t, 2 + t)

   Uslov da tacka lezi na pravoj:
   (1 + t) + (2 + t) + 1 = 0
   4 + 2t = 0
   t = -2

   Projekcija: (1 + (-2), 2 + (-2)) = (-1, 0)

4. Verifikacija:
   - Tacka (-1, 0) na pravoj: (-1) + 0 + 1 = 0 ✓
   - Vektor C->N = (-1-1, 0-2) = (-2, -2) = -2*(1, 1), paralelno sa normalom prave ✓

5. Provera ostalih odgovora:
   A) Q(1, -2): 1 + (-2) + 1 = 0 ✓ (na pravoj), ali vektor CQ = (0, -4), nije paralelno sa (1,1) ✗
   B) N(-1, 0): na pravoj ✓, normala ✓ -- TACAN
   C) P(2, -3): 2 + (-3) + 1 = 0 ✓ (na pravoj), ali CP = (1, -5), nije paralelno sa (1,1) ✗
   D) R(-2, 1): (-2) + 1 + 1 = 0 ✓ (na pravoj), ali CR = (-3, -1), nije paralelno sa (1,1) ✗
   E) M(0, -1): 0 + (-1) + 1 = 0 ✓ (na pravoj), ali CM = (-1, -3), nije paralelno sa (1,1) ✗

ANSWER: B) N(-1, 0)

Alternativni metod (formula za projekciju):
Projekcija tacke P(x0, y0) na pravu ax + by + c = 0:
x' = x0 - a * (ax0 + by0 + c) / (a^2 + b^2)
y' = y0 - b * (ax0 + by0 + c) / (a^2 + b^2)

a=1, b=1, c=1, x0=1, y0=2
ax0 + by0 + c = 1 + 2 + 1 = 4
a^2 + b^2 = 1 + 1 = 2

x' = 1 - 1*4/2 = 1 - 2 = -1
y' = 2 - 1*4/2 = 2 - 2 = 0

Projekcija: (-1, 0) ✓
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  text-align: center;
}

.subtitle {
  color: #94a3b8;
  text-align: center;
  font-size: 1.05rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.35rem;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.1rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56,189,248,0.06);
  border: 1px solid rgba(56,189,248,0.12);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 100px;
  text-align: center;
  flex: 1;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
  font-weight: 600;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  transition: border-color 0.2s ease, background 0.2s ease;
  cursor: default;
}

.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 14px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.plan-card {
  border-left: 4px solid #a78bfa;
}

.theory-card details {
  margin: 15px 0;
}

.theory-card summary {
  cursor: pointer;
  font-size: 1.05rem;
  font-weight: 600;
  color: #a78bfa;
  padding: 8px 0;
  user-select: none;
}

.theory-card ul {
  list-style: none;
  padding: 12px 0;
}

.theory-card li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #e2e8f0;
}

.theory-card li:last-child {
  border-bottom: none;
}

.step {
  display: flex;
  gap: 16px;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 12px;
  border-left: 3px solid transparent;
  transition: border-color 0.2s ease, background 0.2s ease;
}

.step:hover {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}

.step-badge {
  width: 32px;
  height: 32px;
  min-width: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  margin-bottom: 8px;
  color: #e2e8f0;
  font-size: 1.05rem;
}

.step-content p {
  color: #cbd5e1;
  margin-bottom: 8px;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 6px;
}

.checkpoint {
  margin: 20px 0;
  background: rgba(167,139,250,0.06);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
}

.checkpoint summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 0.95rem;
  user-select: none;
}

.checkpoint .answer {
  padding-top: 10px;
  color: #4ade80;
  font-weight: 600;
}

.insight-card {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid rgba(96,165,250,0.25);
  text-align: center;
  padding: 28px;
}

.insight-card .big-formula {
  font-size: 1.4rem;
  margin: 16px 0;
  color: #4ade80;
}

.final-answer-card {
  border: 2px solid #4ade80;
  background: linear-gradient(135deg, rgba(52,211,153,0.08), rgba(74,222,128,0.04));
  text-align: center;
  padding: 28px;
}

.final-answer-card h2 {
  color: #4ade80;
  justify-content: center;
}

.final-answer-value {
  font-size: 1.8rem;
  color: #4ade80;
  font-weight: 800;
  margin: 16px 0;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 20px 0;
}

.option-card {
  padding: 10px 22px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: #1e293b;
  color: #94a3b8;
  font-size: 1rem;
  font-weight: 600;
  transition: all 0.2s ease;
}

.option-card.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.1);
  color: #4ade80;
  box-shadow: 0 0 20px rgba(74,222,128,0.15);
}

.verification-note {
  color: #94a3b8;
  font-size: 0.92rem;
  margin-top: 14px;
  padding-top: 14px;
  border-top: 1px solid #334155;
  text-align: left;
}

.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #cbd5e1;
}

.pitfall-list li:last-child {
  border-bottom: none;
}

.pitfall-label {
  color: #e09468;
  font-weight: 700;
  margin-right: 6px;
}

.challenge-card {
  border-left: 4px solid #f472b6;
}

.challenge-card details {
  margin: 15px 0;
}

.challenge-card summary {
  cursor: pointer;
  color: #f472b6;
  font-weight: 600;
  user-select: none;
}

canvas {
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  touch-action: none;
  width: 100%;
}

.canvas-hint {
  text-align: center;
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

.highlight-blue {
  color: #60a5fa;
  font-weight: 600;
}

.highlight-green {
  color: #4ade80;
  font-weight: 600;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step { padding: 12px; flex-direction: column; gap: 8px; }
  .given-grid { gap: 8px; }
  .given-item { min-width: 70px; padding: 10px 12px; }
  .final-answer-value { font-size: 1.4rem; }
  .options-row { gap: 8px; }
  .option-card { padding: 8px 14px; font-size: 0.9rem; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Ortogonalna projekcija centra kruznice na pravu</h1>
  <p class="subtitle">Analitička geometrija &mdash; kruznica, prava, ortogonalna projekcija tacke</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>
      Ortogonalna projekcija centra kruznice
      <span class="highlight-blue">\(x^2 + y^2 - 2x - 4y - 2 = 0\)</span>
      na pravu <span class="highlight-pink">\(x + y + 1 = 0\)</span> je tacka:
    </p>

    <div class="given-grid">
      <div class="given-item">
        <div class="label">Kruznica</div>
        <div class="value">\(x^2 + y^2 - 2x - 4y - 2 = 0\)</div>
      </div>
      <div class="given-item">
        <div class="label">Prava</div>
        <div class="value">\(x + y + 1 = 0\)</div>
      </div>
    </div>

    <div class="given-grid" style="margin-top: 14px;">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(Q(1,\, -2)\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(N(-1,\, 0)\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(P(2,\, -3)\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(R(-2,\, 1)\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(M(0,\, -1)\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>
      Prvo cemo dovesti jednacinu kruznice na kanonski oblik da odredimo njen centar.
      Zatim cemo naci ortogonalnu projekciju tog centra na datu pravu koristeci formulu
      za projekciju tacke na pravu (ili parametarski pristup kroz normalu).
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card theory-card">
    <details>
      <summary>Kljucne formule i teoreme</summary>
      <ul>
        <li>
          <strong>Opsti oblik jednacine kruznice:</strong>
          \(x^2 + y^2 + Dx + Ey + F = 0\) ima centar
          \(C\!\left(-\frac{D}{2},\, -\frac{E}{2}\right)\) i poluprecnik
          \(r = \sqrt{\frac{D^2}{4} + \frac{E^2}{4} - F}\).
        </li>
        <li>
          <strong>Ortogonalna projekcija tacke na pravu:</strong>
          Projekcija tacke \(T(x_0, y_0)\) na pravu \(ax + by + c = 0\) je tacka \(T'\) takva da:
          \[
            x' = x_0 - a \cdot \frac{ax_0 + by_0 + c}{a^2 + b^2}, \quad
            y' = y_0 - b \cdot \frac{ax_0 + by_0 + c}{a^2 + b^2}
          \]
        </li>
        <li>
          <strong>Normala na pravu:</strong>
          Prava \(ax + by + c = 0\) ima normalni vektor \(\vec{n} = (a, b)\).
          Normala iz tacke \(T\) na pravu ima pravac vektora \(\vec{n}\).
        </li>
        <li>
          <strong>Rastojanje tacke od prave:</strong>
          \[d = \frac{|ax_0 + by_0 + c|}{\sqrt{a^2 + b^2}}\]
        </li>
      </ul>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <h2>Vizuelni prikaz</h2>
    <p style="color:#94a3b8; margin-bottom: 14px;">
      Dijagram prikazuje kruznnicu, pravu i ortogonalnu projekciju centra na pravu.
      Prevucite misa preko dijagrama da istrazite koordinate.
    </p>
    <canvas id="diagramCanvas" width="800" height="600"></canvas>
    <p class="canvas-hint">Prevucite misa da vidite koordinate tacaka</p>
  </div>

  <!-- Step-by-step Solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Svodjenje jednacine kruznice na kanonski oblik</h3>
        <p>
          Polazimo od jednacine kruznice i dopunjavamo do punog kvadrata po \(x\) i po \(y\):
        </p>
        <div class="math-block">
          \[ x^2 + y^2 - 2x - 4y - 2 = 0 \]
        </div>
        <p>Grupišemo clanove:</p>
        <div class="math-block">
          \[ (x^2 - 2x) + (y^2 - 4y) = 2 \]
        </div>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Dopuna do punog kvadrata</h3>
        <p>
          Za \(x\): dodajemo i oduzimamo \(\left(\frac{2}{2}\right)^2 = 1\).
          Za \(y\): dodajemo i oduzimamo \(\left(\frac{4}{2}\right)^2 = 4\).
        </p>
        <div class="math-block">
          \[ (x^2 - 2x + 1) + (y^2 - 4y + 4) = 2 + 1 + 4 \]
          \[ (x - 1)^2 + (y - 2)^2 = 7 \]
        </div>
        <p>
          Dakle, centar kruznice je <span class="highlight-green">\(C(1,\, 2)\)</span>,
          a poluprecnik je \(r = \sqrt{7}\).
        </p>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri se: Koji su centar i poluprecnik kruznice?</summary>
      <div class="answer">
        Centar je \(C(1, 2)\), a poluprecnik \(r = \sqrt{7} \approx 2{,}646\).
      </div>
    </details>

    <!-- Step 3 -->
    <div class="step">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Primena formule za ortogonalnu projekciju</h3>
        <p>
          Projekcija tacke \(C(x_0, y_0) = (1, 2)\) na pravu \(x + y + 1 = 0\)
          (gde je \(a = 1\), \(b = 1\), \(c = 1\)):
        </p>
        <div class="math-block">
          \[ ax_0 + by_0 + c = 1 \cdot 1 + 1 \cdot 2 + 1 = 4 \]
          \[ a^2 + b^2 = 1^2 + 1^2 = 2 \]
        </div>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Racunanje koordinata projekcije</h3>
        <p>
          Uvrstavamo u formulu:
        </p>
        <div class="math-block">
          \[ x' = x_0 - a \cdot \frac{ax_0 + by_0 + c}{a^2 + b^2} = 1 - 1 \cdot \frac{4}{2} = 1 - 2 = -1 \]
        </div>
        <div class="math-block">
          \[ y' = y_0 - b \cdot \frac{ax_0 + by_0 + c}{a^2 + b^2} = 2 - 1 \cdot \frac{4}{2} = 2 - 2 = 0 \]
        </div>
        <p>
          Projekcija centra je tacka <span class="highlight-green">\(N(-1,\, 0)\)</span>.
        </p>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri se: Da li tacka N(-1, 0) zaista lezi na pravoj x + y + 1 = 0?</summary>
      <div class="answer">
        Da! Uvrstimo: \((-1) + 0 + 1 = 0\). Uslov je ispunjen &mdash; tacka lezi na pravoj.
      </div>
    </details>

    <!-- Step 5 -->
    <div class="step">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Verifikacija ortogonalnosti</h3>
        <p>
          Proverimo da li je duž \(CN\) zaista normalna na pravu. Vektor od \(C\) do \(N\):
        </p>
        <div class="math-block">
          \[ \vec{CN} = N - C = (-1 - 1,\; 0 - 2) = (-2,\, -2) \]
        </div>
        <p>
          Vektor pravca prave \(x + y + 1 = 0\) je \(\vec{v} = (-1,\, 1)\)
          (ili ekvivalentno \((1,\, -1)\)).
          Proveravamo skalarni proizvod:
        </p>
        <div class="math-block">
          \[ \vec{CN} \cdot \vec{v} = (-2) \cdot (-1) + (-2) \cdot 1 = 2 - 2 = 0 \]
        </div>
        <p class="note">
          Skalarni proizvod je nula, sto znaci da je \(\vec{CN}\) normalan na pravu. Projekcija je tacna!
        </p>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details class="checkpoint">
      <summary>Proveri se: Zasto ostali odgovori nisu tacni?</summary>
      <div class="answer">
        Sve ponudjene tacke leze na pravoj \(x + y + 1 = 0\) (proverite!), ali samo za
        \(N(-1, 0)\) je vektor od centra \(C(1,2)\) do te tacke normalan na pravu.
        Na primer, za \(A\): \(\vec{CQ} = (0, -4)\), skalarni proizvod sa \((-1, 1)\) je
        \(0 + (-4) = -4 \neq 0\).
      </div>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="card insight-card">
    <h2 style="justify-content: center;">Kljucno zapazanje</h2>
    <p>
      Ortogonalna projekcija tacke na pravu se svodi na
      <span class="highlight-blue">spustanje normale iz tacke na pravu</span>.
      Normalni vektor prave \(ax + by + c = 0\) je upravo \((a, b)\), pa se normala
      iz bilo koje tacke lako parametrizuje i presece sa pravom.
    </p>
    <div class="big-formula">
      \[ T' = T - \frac{aT_x + bT_y + c}{a^2 + b^2} \cdot (a,\, b) \]
    </div>
    <p style="color: #94a3b8; margin-top: 12px;">
      Ovde: \(C'= (1,2) - \frac{4}{2}\cdot(1,1) = (1-2,\; 2-2) = (-1,\, 0)\).
    </p>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer-card">
    <h2>Konacan odgovor</h2>
    <div class="final-answer-value">
      \(N(-1,\, 0)\)
    </div>
    <p style="color:#94a3b8; margin-bottom: 14px;">Tacan odgovor je <strong style="color:#4ade80;">B)</strong></p>
    <div class="options-row">
      <div class="option-card">(A) \(Q(1, -2)\)</div>
      <div class="option-card correct">(B) \(N(-1, 0)\) &#10003;</div>
      <div class="option-card">(C) \(P(2, -3)\)</div>
      <div class="option-card">(D) \(R(-2, 1)\)</div>
      <div class="option-card">(E) \(M(0, -1)\)</div>
    </div>
    <p class="verification-note">
      <strong>Verifikacija:</strong>
      1) Centar kruznice: \(C(1, 2)\) &mdash; dobijen dopunom do punog kvadrata.
      2) Tacka \(N(-1, 0)\) lezi na pravoj: \((-1) + 0 + 1 = 0\) &check;
      3) Vektor \(\vec{CN} = (-2, -2)\) je normalan na pravu jer \(\vec{CN} \cdot \vec{v}_\text{prave} = 0\) &check;
      4) Rastojanje centra od prave: \(d = \frac{|1 + 2 + 1|}{\sqrt{2}} = \frac{4}{\sqrt{2}} = 2\sqrt{2}\).
      Duzina \(|CN| = \sqrt{4 + 4} = 2\sqrt{2}\) &check;
    </p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Ceste greske</h2>
    <ul class="pitfall-list">
      <li>
        <span class="pitfall-label">Greska 1:</span>
        Pogresan predznak prilikom citanja centra kruznice. Iz jednacine \(x^2 + y^2 - 2x - 4y - 2 = 0\)
        centar NIJE \((-1, -2)\) vec \((1, 2)\). Zapamtite: ako je clan \(-2x\), onda je \(p = +1\)
        (suprotan znak od koeficijenta uz \(x\), podeljenog sa 2).
      </li>
      <li>
        <span class="pitfall-label">Greska 2:</span>
        Brkanje projekcije sa presekom. Sve ponudjene tacke leze na pravoj, ali samo jedna
        je ortogonalna projekcija centra &mdash; ona za koju je vektor od centra do tacke normalan na pravu.
        Ne treba birati "najblizu na oko" vec proveriti ortogonalnost.
      </li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>
      Nadji ortogonalnu projekciju centra iste kruznice na pravu \(x - y + 3 = 0\).
      Da li projekcija lezi unutar, na, ili van kruznice?
    </p>
    <details>
      <summary>Nagovestaj</summary>
      <p style="padding-top: 10px; color: #cbd5e1;">
        Sada je normalni vektor \((1, -1)\). Primeni istu formulu sa \(a=1, b=-1, c=3\).
        Dobices \(ax_0+by_0+c = 1-2+3 = 2\), pa je \(x' = 1 - \frac{2}{2} = 0\),
        \(y' = 2 + \frac{2}{2} = 3\). Projekcija je \((0, 3)\).
        Rastojanje od centra: \(\sqrt{1+1} = \sqrt{2} \approx 1{,}41 < \sqrt{7} \approx 2{,}65\),
        dakle projekcija lezi <em>unutar</em> kruznice.
      </p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('diagramCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');

  // Math coordinates
  const centerX = 1, centerY = 2;
  const radius = Math.sqrt(7);
  const projX = -1, projY = 0;

  // All answer points
  const points = [
    { label: 'Q', x: 1, y: -2, option: 'A' },
    { label: 'N', x: -1, y: 0, option: 'B', correct: true },
    { label: 'P', x: 2, y: -3, option: 'C' },
    { label: 'R', x: -2, y: 1, option: 'D' },
    { label: 'M', x: 0, y: -1, option: 'E' }
  ];

  let mouseX = -1000, mouseY = -1000;

  function draw() {
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    const W = rect.width;
    const H = 600;

    canvas.width = W * dpr;
    canvas.height = H * dpr;
    canvas.style.height = H + 'px';
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);

    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Coordinate system transformation
    // Map math range: x in [-4, 5], y in [-5, 5]
    const xMin = -4.5, xMax = 5.5, yMin = -5, yMax = 5.5;
    const pad = 50;
    const plotW = W - 2 * pad;
    const plotH = H - 2 * pad;

    function toScreen(mx, my) {
      const sx = pad + (mx - xMin) / (xMax - xMin) * plotW;
      const sy = pad + (yMax - my) / (yMax - yMin) * plotH;
      return [sx, sy];
    }

    function toMath(sx, sy) {
      const mx = xMin + (sx - pad) / plotW * (xMax - xMin);
      const my = yMax - (sy - pad) / plotH * (yMax - yMin);
      return [mx, my];
    }

    // Grid
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (let gx = Math.ceil(xMin); gx <= Math.floor(xMax); gx++) {
      const [sx] = toScreen(gx, 0);
      ctx.beginPath();
      ctx.moveTo(sx, pad);
      ctx.lineTo(sx, H - pad);
      ctx.stroke();
    }
    for (let gy = Math.ceil(yMin); gy <= Math.floor(yMax); gy++) {
      const [, sy] = toScreen(0, gy);
      ctx.beginPath();
      ctx.moveTo(pad, sy);
      ctx.lineTo(W - pad, sy);
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    // X-axis
    const [axXStart] = toScreen(xMin, 0);
    const [axXEnd, axY] = toScreen(xMax, 0);
    ctx.beginPath();
    ctx.moveTo(axXStart, axY);
    ctx.lineTo(axXEnd, axY);
    ctx.stroke();
    // Y-axis
    const [ayX, ayStart] = toScreen(0, yMax);
    const [, ayEnd] = toScreen(0, yMin);
    ctx.beginPath();
    ctx.moveTo(ayX, ayStart);
    ctx.lineTo(ayX, ayEnd);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#64748b';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    for (let gx = Math.ceil(xMin); gx <= Math.floor(xMax); gx++) {
      if (gx === 0) continue;
      const [sx, sy] = toScreen(gx, 0);
      ctx.fillText(gx.toString(), sx, sy + 16);
    }
    ctx.textAlign = 'right';
    for (let gy = Math.ceil(yMin); gy <= Math.floor(yMax); gy++) {
      if (gy === 0) continue;
      const [sx, sy] = toScreen(0, gy);
      ctx.fillText(gy.toString(), sx - 8, sy + 4);
    }
    // Origin
    ctx.textAlign = 'right';
    const [ox, oy] = toScreen(0, 0);
    ctx.fillText('O', ox - 8, oy + 16);

    // Axis arrows
    ctx.fillStyle = '#475569';
    ctx.textAlign = 'center';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.fillText('x', axXEnd - 5, axY - 10);
    ctx.fillText('y', ayX + 14, ayStart + 5);

    // Draw the line x + y + 1 = 0 => y = -x - 1
    const lineStartX = xMin;
    const lineStartY = -lineStartX - 1;
    const lineEndX = xMax;
    const lineEndY = -lineEndX - 1;
    const [lsx, lsy] = toScreen(lineStartX, lineStartY);
    const [lex, ley] = toScreen(lineEndX, lineEndY);

    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(lsx, lsy);
    ctx.lineTo(lex, ley);
    ctx.stroke();

    // Line label
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    const [llx, lly] = toScreen(3.2, -4.2);
    ctx.fillText('x + y + 1 = 0', llx + 5, lly - 5);

    // Draw the circle
    const [cx, cy] = toScreen(centerX, centerY);
    const [crx] = toScreen(centerX + radius, centerY);
    const screenRadius = crx - cx;

    // Circle glow
    const glow = ctx.createRadialGradient(cx, cy, screenRadius * 0.8, cx, cy, screenRadius * 1.3);
    glow.addColorStop(0, 'rgba(96, 165, 250, 0.05)');
    glow.addColorStop(1, 'rgba(96, 165, 250, 0)');
    ctx.fillStyle = glow;
    ctx.beginPath();
    ctx.arc(cx, cy, screenRadius * 1.3, 0, 2 * Math.PI);
    ctx.fill();

    // Circle fill
    ctx.fillStyle = 'rgba(96, 165, 250, 0.06)';
    ctx.beginPath();
    ctx.arc(cx, cy, screenRadius, 0, 2 * Math.PI);
    ctx.fill();

    // Circle stroke
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.arc(cx, cy, screenRadius, 0, 2 * Math.PI);
    ctx.stroke();

    // Dashed line from center to projection (normal)
    const [px, py] = toScreen(projX, projY);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2;
    ctx.setLineDash([8, 5]);
    ctx.beginPath();
    ctx.moveTo(cx, cy);
    ctx.lineTo(px, py);
    ctx.stroke();
    ctx.setLineDash([]);

    // Right angle marker at projection point
    const markerSize = 12;
    // Direction from proj to center (normalized)
    const dnX = (cx - px) / Math.sqrt((cx - px) * (cx - px) + (cy - py) * (cy - py));
    const dnY = (cy - py) / Math.sqrt((cx - px) * (cx - px) + (cy - py) * (cy - py));
    // Direction along the line (normalized)
    const dlX = (lex - lsx) / Math.sqrt((lex - lsx) * (lex - lsx) + (ley - lsy) * (ley - lsy));
    const dlY = (ley - lsy) / Math.sqrt((lex - lsx) * (lex - lsx) + (ley - lsy) * (ley - lsy));

    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(px + dlX * markerSize, py + dlY * markerSize);
    ctx.lineTo(px + dlX * markerSize + dnX * markerSize, py + dlY * markerSize + dnY * markerSize);
    ctx.lineTo(px + dnX * markerSize, py + dnY * markerSize);
    ctx.stroke();

    // Draw center point C
    ctx.fillStyle = '#60a5fa';
    ctx.beginPath();
    ctx.arc(cx, cy, 6, 0, 2 * Math.PI);
    ctx.fill();
    ctx.strokeStyle = '#0c1222';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Center label
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('C(1, 2)', cx + 10, cy - 10);

    // Draw projection point N
    ctx.fillStyle = '#4ade80';
    ctx.beginPath();
    ctx.arc(px, py, 7, 0, 2 * Math.PI);
    ctx.fill();
    ctx.strokeStyle = '#0c1222';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Projection label
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText('N(-1, 0)', px - 10, py - 12);

    // Draw other answer points (smaller, muted)
    points.forEach(function(pt) {
      if (pt.correct) return; // Already drew N
      const [ptx, pty] = toScreen(pt.x, pt.y);
      ctx.fillStyle = 'rgba(148, 163, 184, 0.5)';
      ctx.beginPath();
      ctx.arc(ptx, pty, 4, 0, 2 * Math.PI);
      ctx.fill();

      ctx.fillStyle = '#64748b';
      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = pt.x < 0 ? 'right' : 'left';
      const offX = pt.x < 0 ? -8 : 8;
      ctx.fillText(pt.label + '(' + pt.x + ', ' + pt.y + ')', ptx + offX, pty - 8);
    });

    // Legend
    const legendY = H - 35;
    ctx.font = '13px Segoe UI, system-ui, sans-serif';

    // Circle legend
    ctx.fillStyle = '#60a5fa';
    ctx.beginPath();
    ctx.arc(pad + 10, legendY, 5, 0, 2 * Math.PI);
    ctx.fill();
    ctx.textAlign = 'left';
    ctx.fillText('Kruznica', pad + 22, legendY + 4);

    // Line legend
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(pad + 120, legendY);
    ctx.lineTo(pad + 140, legendY);
    ctx.stroke();
    ctx.fillStyle = '#f472b6';
    ctx.fillText('Prava', pad + 148, legendY + 4);

    // Normal legend
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.moveTo(pad + 225, legendY);
    ctx.lineTo(pad + 245, legendY);
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = '#4ade80';
    ctx.fillText('Normala (projekcija)', pad + 253, legendY + 4);

    // Mouse coordinate display
    if (mouseX >= pad && mouseX <= W - pad && mouseY >= pad && mouseY <= H - pad) {
      const [mx, my] = toMath(mouseX, mouseY);
      ctx.fillStyle = 'rgba(30, 41, 59, 0.9)';
      ctx.strokeStyle = '#334155';
      ctx.lineWidth = 1;
      const tooltipW = 120;
      const tooltipH = 28;
      let tx = mouseX + 15;
      let ty = mouseY - 25;
      if (tx + tooltipW > W - pad) tx = mouseX - tooltipW - 15;
      if (ty < pad) ty = mouseY + 15;

      ctx.beginPath();
      ctx.moveTo(tx + 6, ty);
      ctx.lineTo(tx + tooltipW - 6, ty);
      ctx.arcTo(tx + tooltipW, ty, tx + tooltipW, ty + 6, 6);
      ctx.lineTo(tx + tooltipW, ty + tooltipH - 6);
      ctx.arcTo(tx + tooltipW, ty + tooltipH, tx + tooltipW - 6, ty + tooltipH, 6);
      ctx.lineTo(tx + 6, ty + tooltipH);
      ctx.arcTo(tx, ty + tooltipH, tx, ty + tooltipH - 6, 6);
      ctx.lineTo(tx, ty + 6);
      ctx.arcTo(tx, ty, tx + 6, ty, 6);
      ctx.closePath();
      ctx.fill();
      ctx.stroke();

      ctx.fillStyle = '#e2e8f0';
      ctx.font = '12px Courier New, monospace';
      ctx.textAlign = 'center';
      ctx.fillText('(' + mx.toFixed(1) + ', ' + my.toFixed(1) + ')', tx + tooltipW / 2, ty + 18);
    }
  }

  function handleMove(e) {
    const rect = canvas.getBoundingClientRect();
    if (e.touches) {
      mouseX = e.touches[0].clientX - rect.left;
      mouseY = e.touches[0].clientY - rect.top;
    } else {
      mouseX = e.clientX - rect.left;
      mouseY = e.clientY - rect.top;
    }
    draw();
  }

  function handleLeave() {
    mouseX = -1000;
    mouseY = -1000;
    draw();
  }

  canvas.addEventListener('mousemove', handleMove);
  canvas.addEventListener('mouseleave', handleLeave);
  canvas.addEventListener('touchmove', function(e) {
    e.preventDefault();
    handleMove(e);
  });
  canvas.addEventListener('touchend', handleLeave);

  draw();
  window.addEventListener('resize', draw);
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Ortogonalna projekcija centra kruznice na pravu",
  "subject": "math",
  "unit": "geometry",
  "topic_tags": ["ortogonalna projekcija", "kruznica", "analitička geometrija", "projekcija tacke na pravu", "normala na pravu"]
}
BRAINSPARK_META-->