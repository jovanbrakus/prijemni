<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valjak maksimalne povr≈°ine omotaƒça upisan u kupu</title>

<script type="text/info" id="logic-scratchpad">
Problem: A right circular cone has height H = 24 cm and base radius R = 12 cm.
A cylinder is inscribed in the cone such that the lateral surface area of the cylinder is maximized.
Find the radius of the base of this cylinder.

Setup:
- Cone: H = 24, R = 12
- Cylinder inscribed in the cone: radius r, height h
- The cylinder sits on the base of the cone, with its top circle touching the cone surface.

Relationship between r and h (similar triangles):
Looking at the cross-section (an isosceles triangle with an inscribed rectangle),
the slant side of the cone goes from (R, 0) at the base to (0, H) at the apex.
The equation of the slant line: x/R + y/H = 1, i.e., x = R(1 - y/H).

At height y = h (top of cylinder), the cone radius is:
  R_cone(h) = R(1 - h/H)

For the cylinder to be inscribed: r = R(1 - h/H)
So: h = H(1 - r/R)

Substitute H = 24, R = 12:
  h = 24(1 - r/12) = 24 - 2r

Lateral surface area of cylinder:
  S = 2*pi*r*h = 2*pi*r*(24 - 2r) = 2*pi*(24r - 2r^2)

To maximize, take derivative with respect to r and set to 0:
  dS/dr = 2*pi*(24 - 4r) = 0
  24 - 4r = 0
  4r = 24
  r = 6

Second derivative: d¬≤S/dr¬≤ = 2*pi*(-4) = -8*pi < 0, so this is indeed a maximum.

Check: h = 24 - 2*6 = 12 cm
Lateral surface area: S = 2*pi*6*12 = 144*pi cm¬≤

The radius of the inscribed cylinder is r = 6 cm.
Answer: D) 6 cm.

Verification: r must be between 0 and R = 12.
  r = 6 is in (0, 12). ‚úì
At r = 0: S = 0 (degenerate, no cylinder)
At r = 12: h = 0, S = 0 (flat disk, no height)
At r = 6: S = 144*pi ‚âà 452.39 cm¬≤ (maximum) ‚úì
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 10px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56, 189, 248, 0.06);
  border: 1px solid rgba(56, 189, 248, 0.12);
  border-radius: 10px;
  padding: 12px 18px;
  text-align: center;
  min-width: 80px;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.math-block {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 14px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.step-container {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  padding: 16px;
  border-radius: 10px;
  border-left: 3px solid transparent;
  transition: border-color 0.3s, background 0.15s;
  cursor: pointer;
}

.step-container:hover, .step-container.active {
  border-left-color: #4ade80;
  background: rgba(74, 222, 128, 0.04);
}

.step-badge {
  min-width: 28px;
  height: 28px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.85rem;
  font-weight: 700;
  flex-shrink: 0;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-content p {
  margin-bottom: 8px;
}

.muted {
  color: #94a3b8;
  font-size: 0.92rem;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  padding: 8px 0;
  user-select: none;
}

details summary:hover {
  color: #c4b5fd;
}

details[open] summary {
  margin-bottom: 10px;
}

.theory-list {
  list-style: none;
  padding-left: 0;
}

.theory-list li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51, 65, 85, 0.5);
  color: #e2e8f0;
}

.theory-list li:last-child {
  border-bottom: none;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.12), rgba(167, 139, 250, 0.12));
  border: 1px solid rgba(96, 165, 250, 0.25);
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  text-align: center;
}

.insight-box .insight-label {
  color: #a78bfa;
  font-size: 0.9rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 12px;
}

.final-answer-box {
  background: linear-gradient(135deg, rgba(52, 211, 153, 0.1), rgba(74, 222, 128, 0.1));
  border: 2px solid rgba(52, 211, 153, 0.3);
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
  text-align: center;
}

.final-answer-box .answer-label {
  color: #34d399;
  font-size: 1rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  margin-bottom: 12px;
}

.final-answer-box .answer-value {
  color: #4ade80;
  font-size: 1.8rem;
  font-weight: 800;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-top: 18px;
}

.option-card {
  background: rgba(30, 41, 59, 0.8);
  border: 2px solid #334155;
  border-radius: 10px;
  padding: 12px 20px;
  text-align: center;
  min-width: 90px;
  transition: all 0.3s;
}

.option-card.correct {
  border-color: #4ade80;
  background: rgba(74, 222, 128, 0.12);
  box-shadow: 0 0 20px rgba(74, 222, 128, 0.15);
}

.option-card .opt-letter {
  color: #94a3b8;
  font-size: 0.8rem;
  margin-bottom: 4px;
}

.option-card.correct .opt-letter {
  color: #4ade80;
}

.option-card .opt-value {
  font-size: 1.15rem;
  font-weight: 700;
  color: #e2e8f0;
}

.option-card.correct .opt-value {
  color: #4ade80;
}

.verification-note {
  background: rgba(52, 211, 153, 0.06);
  border: 1px solid rgba(52, 211, 153, 0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin-top: 18px;
  color: #94a3b8;
  font-size: 0.95rem;
}

.verification-note strong {
  color: #34d399;
}

.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 0;
  border-bottom: 1px solid rgba(51, 65, 85, 0.4);
  color: #e2e8f0;
}

.pitfall-list li:last-child {
  border-bottom: none;
}

.pitfall-list li::before {
  content: "\26A0 ";
  color: #f472b6;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

.highlight-blue {
  color: #60a5fa;
  font-weight: 600;
}

.highlight-green {
  color: #4ade80;
  font-weight: 600;
}

canvas {
  touch-action: none;
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  max-width: 100%;
}

.canvas-hint {
  color: #64748b;
  font-size: 0.82rem;
  text-align: center;
  margin-top: 8px;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step-container { flex-direction: column; gap: 8px; }
  .given-grid { justify-content: center; }
  .options-row { gap: 8px; }
  .option-card { min-width: 70px; padding: 10px 14px; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title & Subtitle -->
  <h1>Valjak maksimalne povr≈°ine omotaƒça upisan u kupu</h1>
  <p class="subtitle">Stereometrija i optimizacija ‚Äî ekstremna vrednost funkcije povr≈°ine</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Tekst zadatka</h2>
    <p>
      U pravu kru≈ænu kupu visine <span class="highlight-pink">\(H = 24\) cm</span> i
      polupreƒçnika osnove <span class="highlight-blue">\(R = 12\) cm</span> upisan je
      valjak <span class="highlight-green">maksimalne povr≈°ine omotaƒça</span>.
      Du≈æina polupreƒçnika osnove tog valjka je:
    </p>
    <div class="given-grid">
      <div class="given-item">
        <div class="label">Visina kupe</div>
        <div class="value">\(H = 24\) cm</div>
      </div>
      <div class="given-item">
        <div class="label">Polupreƒçnik kupe</div>
        <div class="value">\(R = 12\) cm</div>
      </div>
      <div class="given-item">
        <div class="label">Tra≈æimo</div>
        <div class="value">\(r = \,?\)</div>
      </div>
    </div>

    <h3 style="margin-top: 20px; color: #94a3b8; font-size: 1rem;">Ponuƒëeni odgovori:</h3>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(8\) cm</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(5\) cm</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(7\) cm</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(6\) cm</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(4\) cm</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <h2>Plan re≈°avanja</h2>
    <p>
      Pomoƒáu sliƒçnosti trouglova u aksijalnom preseku kupe izraziƒáemo visinu valjka \(h\) preko
      njegovog polupreƒçnika \(r\). Zatim ƒáemo povr≈°inu omotaƒça valjka \(S = 2\pi r h\) zapisati
      kao funkciju samo od \(r\) i naƒái njen maksimum izjednaƒçavanjem prvog izvoda sa nulom.
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>üìê Kljuƒçne formule i teoreme</summary>
      <ul class="theory-list">
        <li>
          <strong>Povr≈°ina omotaƒça valjka</strong> polupreƒçnika \(r\) i visine \(h\):
          \[ S_{\text{om}} = 2\pi r h \]
        </li>
        <li>
          <strong>Sliƒçnost trouglova:</strong> U aksijalnom preseku kupe (jednakokraki trougao),
          pravougaonik upisanog valjka daje manje sliƒçne trouglove. Odnos stranica daje:
          \[ \frac{r}{R} + \frac{h}{H} = 1 \quad \Longrightarrow \quad h = H\left(1 - \frac{r}{R}\right) \]
        </li>
        <li>
          <strong>Nala≈æenje ekstrema:</strong> Za funkciju \(f(r)\) na intervalu \((0, R)\),
          ekstremna vrednost se tra≈æi iz uslova \(f'(r) = 0\). Ako je \(f''(r) < 0\), to je maksimum.
        </li>
        <li>
          <strong>Izvod proizvoda:</strong> \((uv)' = u'v + uv'\)
        </li>
      </ul>
    </details>
  </div>

  <!-- Visual Aid ‚Äî Canvas Diagram -->
  <div class="card">
    <h2>Vizuelni prikaz: presek kupe sa upisanim valjkom</h2>
    <canvas id="coneCanvas" width="700" height="520"></canvas>
    <p class="canvas-hint">Prevucite klizaƒç da menjate polupreƒçnik valjka i posmatrate kako se menja povr≈°ina omotaƒça</p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Re≈°enje korak po korak</h2>

    <div class="step-container" id="step1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Postavka: aksijalni presek</h3>
        <p>
          Posmatramo aksijalni presek kupe ‚Äî to je jednakokraki trougao sa osnovicom \(2R = 24\) cm
          i visinom \(H = 24\) cm. Valjak upisan u kupu se u preseku vidi kao pravougaonik
          ≈°irine \(2r\) i visine \(h\), ƒçija gornja strana dodiruje boƒçnu stranu kupe.
        </p>
        <p class="muted">
          Valjak stoji na osnovi kupe, pa mu donja osnova le≈æi u ravni osnove kupe.
        </p>
      </div>
    </div>

    <div class="step-container" id="step2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Veza izmeƒëu \(r\) i \(h\) ‚Äî sliƒçnost trouglova</h3>
        <p>
          Vrh kupe je na visini \(H\) iznad centra osnove. Boƒçna stranica kupe u preseku je prava
          koja spaja taƒçku \((R, 0)\) sa taƒçkom \((0, H)\). Jednaƒçina te prave je:
        </p>
        <div class="math-block">
          \[ \frac{x}{R} + \frac{y}{H} = 1 \]
        </div>
        <p>
          Na visini \(y = h\) (vrh valjka), polupreƒçnik kupe je \(x = r\), pa:
        </p>
        <div class="math-block">
          \[ \frac{r}{R} + \frac{h}{H} = 1 \quad \Longrightarrow \quad h = H\left(1 - \frac{r}{R}\right) \]
        </div>
        <p>Ubacimo konkretne vrednosti \(H = 24\) i \(R = 12\):</p>
        <div class="math-block">
          \[ h = 24\left(1 - \frac{r}{12}\right) = 24 - 2r \]
        </div>
        <p class="muted">
          Primetimo: za \(r = 0\) dobijamo \(h = 24\) (degenerisano ‚Äî nema valjka),
          a za \(r = 12\) dobijamo \(h = 0\) (opet degenerisano). Realni valjak ima \(0 < r < 12\).
        </p>
      </div>
    </div>

    <div class="step-container" id="step3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Funkcija povr≈°ine omotaƒça</h3>
        <p>
          Povr≈°ina omotaƒça valjka je \(S = 2\pi r h\). Zamenimo \(h = 24 - 2r\):
        </p>
        <div class="math-block">
          \[ S(r) = 2\pi r (24 - 2r) = 2\pi (24r - 2r^2) \]
        </div>
        <p>
          Ovo je kvadratna funkcija po \(r\) (parabola okrenuta nadole), pa ima taƒçno jedan maksimum.
        </p>
        <details>
          <summary>üîç Proveri se: Za≈°to je parabola okrenuta nadole?</summary>
          <p class="muted">
            Koeficijent uz \(r^2\) je \(-4\pi < 0\), ≈°to znaƒçi da je parabola okrenuta nadole,
            pa teme parabole daje maksimum.
          </p>
        </details>
      </div>
    </div>

    <div class="step-container" id="step4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Nala≈æenje maksimuma ‚Äî izvod</h3>
        <p>Izraƒçunavamo prvi izvod funkcije \(S(r)\) i izjednaƒçavamo ga sa nulom:</p>
        <div class="math-block">
          \[ S'(r) = 2\pi(24 - 4r) = 0 \]
        </div>
        <p>Delimo sa \(2\pi \neq 0\):</p>
        <div class="math-block">
          \[ 24 - 4r = 0 \quad \Longrightarrow \quad 4r = 24 \quad \Longrightarrow \quad r = 6 \]
        </div>
        <details>
          <summary>üîç Proveri se: Da li je ovo zaista maksimum?</summary>
          <p class="muted">
            Drugi izvod: \(S''(r) = 2\pi \cdot (-4) = -8\pi < 0\).
            Po≈°to je drugi izvod negativan, taƒçka \(r = 6\) je zaista <strong>maksimum</strong>.
          </p>
        </details>
      </div>
    </div>

    <div class="step-container" id="step5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Izraƒçunavanje visine i provera</h3>
        <p>Za \(r = 6\):</p>
        <div class="math-block">
          \[ h = 24 - 2 \cdot 6 = 24 - 12 = 12 \text{ cm} \]
        </div>
        <p>Maksimalna povr≈°ina omotaƒça iznosi:</p>
        <div class="math-block">
          \[ S_{\max} = 2\pi \cdot 6 \cdot 12 = 144\pi \approx 452{,}39 \text{ cm}^2 \]
        </div>
        <details>
          <summary>üîç Proveri se: Uporedi sa drugim ponuƒëenim odgovorima</summary>
          <p class="muted">
            Za \(r = 4\): \(h = 16\), \(S = 2\pi \cdot 4 \cdot 16 = 128\pi \approx 402{,}1\) cm¬≤<br>
            Za \(r = 5\): \(h = 14\), \(S = 2\pi \cdot 5 \cdot 14 = 140\pi \approx 439{,}8\) cm¬≤<br>
            Za \(r = 6\): \(h = 12\), \(S = 2\pi \cdot 6 \cdot 12 = 144\pi \approx 452{,}4\) cm¬≤<br>
            Za \(r = 7\): \(h = 10\), \(S = 2\pi \cdot 7 \cdot 10 = 140\pi \approx 439{,}8\) cm¬≤<br>
            Za \(r = 8\): \(h = 8\), \(S = 2\pi \cdot 8 \cdot 8 = 128\pi \approx 402{,}1\) cm¬≤<br>
            Zaista, \(r = 6\) daje najveƒáu povr≈°inu!
          </p>
        </details>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <div class="insight-label">Kljuƒçni uvid</div>
    <p style="margin-bottom: 12px; color: #e2e8f0;">
      Povr≈°ina omotaƒça \(S(r) = 2\pi r(24 - 2r)\) je parabola okrenuta nadole.
      Njen maksimum se posti≈æe u temenu, tj. taƒçno na <strong>polovini</strong> intervala
      izmeƒëu korenova (\(r = 0\) i \(r = 12\)):
    </p>
    <div class="math-block" style="display: inline-block; font-size: 1.2rem;">
      \[ r = \frac{0 + 12}{2} = \frac{R}{2} = \color{#4ade80}{6 \text{ cm}} \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <div class="answer-label">Konaƒçan odgovor</div>
    <div class="answer-value">\(r = 6\) cm</div>

    <div class="options-row">
      <div class="option-card">
        <div class="opt-letter">(A)</div>
        <div class="opt-value">8 cm</div>
      </div>
      <div class="option-card">
        <div class="opt-letter">(B)</div>
        <div class="opt-value">5 cm</div>
      </div>
      <div class="option-card">
        <div class="opt-letter">(C)</div>
        <div class="opt-value">7 cm</div>
      </div>
      <div class="option-card correct">
        <div class="opt-letter">(D) ‚úì</div>
        <div class="opt-value">6 cm</div>
      </div>
      <div class="option-card">
        <div class="opt-letter">(E)</div>
        <div class="opt-value">4 cm</div>
      </div>
    </div>

    <div class="verification-note">
      <strong>Provera:</strong> Za \(r = 6\): visina valjka \(h = 24 - 2 \cdot 6 = 12\) cm,
      povr≈°ina omotaƒça \(S = 2\pi \cdot 6 \cdot 12 = 144\pi \approx 452{,}4\) cm¬≤.
      Svi drugi ponuƒëeni odgovori daju manju povr≈°inu. ‚úì
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>ƒåeste gre≈°ke</h2>
    <ul class="pitfall-list">
      <li>
        <strong>Maksimizacija pogre≈°ne veliƒçine:</strong> Pa≈æljivo proƒçitajte ≈°ta se tra≈æi!
        Zadatak tra≈æi maksimalnu <em>povr≈°inu omotaƒça</em> (\(2\pi r h\)), ne ukupnu povr≈°inu
        valjka (\(2\pi r h + 2\pi r^2\)) niti zapreminu (\(\pi r^2 h\)).
        Za razliƒçite veliƒçine dobijaju se razliƒçiti optimalni polupreƒçnici.
      </li>
      <li>
        <strong>Pogre≈°na veza \(r\) i \(h\):</strong> Mnogi uƒçenici pogrije≈°e u postavljanju
        proporcije iz sliƒçnosti trouglova. Zapamtite: ≈°to je veƒái polupreƒçnik valjka,
        to je manja njegova visina (i obratno).
      </li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card">
    <h2>Dodatni izazov</h2>
    <p>
      Koliki bi bio polupreƒçnik osnove valjka da je tra≈æen valjak <strong>maksimalne zapremine</strong>
      upisan u istu kupu?
    </p>
    <details>
      <summary>üí° Pogledaj nagove≈°taj</summary>
      <p class="muted">
        Zapremina valjka je \(V = \pi r^2 h = \pi r^2 (24 - 2r)\). Izjednaƒçi \(V'(r) = 0\):
        \(\pi(48r - 6r^2) = 0\), odakle \(r(48 - 6r) = 0\), tj. \(r = 8\) cm.
        Za maksimalnu zapreminu polupreƒçnik je \(r = \frac{2R}{3} = 8\) cm (odgovor A).
      </p>
    </details>
  </div>

</div>

<script>
(() => {
  // Step click interaction
  var steps = document.querySelectorAll('.step-container');
  steps.forEach(function(step) {
    step.addEventListener('click', function() {
      steps.forEach(function(s) { s.classList.remove('active'); });
      step.classList.add('active');
    });
  });

  // Canvas drawing
  var canvas = document.getElementById('coneCanvas');
  if (!canvas) return;
  var ctx = canvas.getContext('2d');
  var W = canvas.width;
  var H = canvas.height;

  // Slider state
  var sliderR = 6;
  var dragging = false;

  // Layout constants for the cross-section diagram
  var diagramLeft = 40;
  var diagramWidth = 360;
  var diagramTop = 40;
  var diagramHeight = 400;
  var diagramCenterX = diagramLeft + diagramWidth / 2;
  var diagramBottom = diagramTop + diagramHeight;

  // Graph area for S(r) plot
  var graphLeft = 440;
  var graphRight = 680;
  var graphTop = 60;
  var graphBottom = 400;
  var graphWidth = graphRight - graphLeft;
  var graphHeight = graphBottom - graphTop;

  // Slider bar position
  var sliderBarY = 460;
  var sliderBarLeft = 60;
  var sliderBarRight = 360;
  var sliderBarWidth = sliderBarRight - sliderBarLeft;

  // Cone parameters (in cm)
  var coneH = 24;
  var coneR = 12;

  // Scale factors: map cm to pixels for the cross-section
  var scaleX = diagramWidth / (2 * coneR);
  var scaleY = diagramHeight / coneH;

  function cmToPixelX(x) {
    return diagramCenterX + x * scaleX;
  }
  function cmToPixelY(y) {
    return diagramBottom - y * scaleY;
  }

  function getCylinderH(r) {
    return coneH * (1 - r / coneR);
  }

  function getLateralArea(r) {
    var h = getCylinderH(r);
    return 2 * Math.PI * r * h;
  }

  function rFromSliderX(px) {
    var t = (px - sliderBarLeft) / sliderBarWidth;
    t = Math.max(0.05, Math.min(0.95, t));
    return t * coneR;
  }

  function sliderXFromR(r) {
    return sliderBarLeft + (r / coneR) * sliderBarWidth;
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    var r = sliderR;
    var h = getCylinderH(r);
    var S = getLateralArea(r);

    // === LEFT: Cross-section diagram ===

    // Title
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 14px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Aksijalni presek', diagramCenterX, 28);

    // Draw cone outline (triangle)
    var apexX = cmToPixelX(0);
    var apexY = cmToPixelY(coneH);
    var baseLeftX = cmToPixelX(-coneR);
    var baseRightX = cmToPixelX(coneR);
    var baseY = cmToPixelY(0);

    // Cone fill
    ctx.fillStyle = 'rgba(96, 165, 250, 0.06)';
    ctx.beginPath();
    ctx.moveTo(apexX, apexY);
    ctx.lineTo(baseLeftX, baseY);
    ctx.lineTo(baseRightX, baseY);
    ctx.closePath();
    ctx.fill();

    // Cone outline
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(apexX, apexY);
    ctx.lineTo(baseLeftX, baseY);
    ctx.lineTo(baseRightX, baseY);
    ctx.closePath();
    ctx.stroke();

    // Cylinder (rectangle in cross-section)
    var cylLeftX = cmToPixelX(-r);
    var cylRightX = cmToPixelX(r);
    var cylBottomY = cmToPixelY(0);
    var cylTopY = cmToPixelY(h);

    // Cylinder fill
    ctx.fillStyle = 'rgba(74, 222, 128, 0.12)';
    ctx.fillRect(cylLeftX, cylTopY, cylRightX - cylLeftX, cylBottomY - cylTopY);

    // Cylinder outline
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2.5;
    ctx.strokeRect(cylLeftX, cylTopY, cylRightX - cylLeftX, cylBottomY - cylTopY);

    // Height dimension line for cone (H)
    ctx.strokeStyle = '#94a3b8';
    ctx.lineWidth = 1;
    ctx.setLineDash([4, 4]);
    // Vertical line from base center to apex
    ctx.beginPath();
    ctx.moveTo(diagramCenterX, baseY);
    ctx.lineTo(diagramCenterX, apexY);
    ctx.stroke();
    ctx.setLineDash([]);

    // Label H
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 13px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('H = 24', diagramCenterX + 5, (baseY + apexY) / 2);

    // Label R
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 13px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('R = 12', (diagramCenterX + baseRightX) / 2, baseY + 18);

    // Label r on the cylinder
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 13px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('r = ' + r.toFixed(1), (diagramCenterX + cylRightX) / 2, cylBottomY + 34);

    // Label h on the cylinder
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 13px Segoe UI, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText('h = ' + h.toFixed(1), cylLeftX - 8, (cylTopY + cylBottomY) / 2 + 4);

    // Mark the apex
    ctx.fillStyle = '#f472b6';
    ctx.beginPath();
    ctx.arc(apexX, apexY, 4, 0, 2 * Math.PI);
    ctx.fill();

    // Dashed line from apex to cylinder top corner (showing similar triangles)
    ctx.strokeStyle = 'rgba(244, 114, 182, 0.4)';
    ctx.lineWidth = 1;
    ctx.setLineDash([3, 3]);
    ctx.beginPath();
    ctx.moveTo(cylRightX, cylTopY);
    ctx.lineTo(cylRightX, cylBottomY);
    ctx.stroke();
    ctx.setLineDash([]);

    // Surface area value display
    ctx.fillStyle = '#e2e8f0';
    ctx.font = '13px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('S = 2\u03C0 \u00B7 ' + r.toFixed(1) + ' \u00B7 ' + h.toFixed(1) +
                 ' = ' + (S / Math.PI).toFixed(1) + '\u03C0 \u2248 ' + S.toFixed(1) + ' cm\u00B2',
                 diagramCenterX, diagramBottom + 55);

    // === RIGHT: Graph of S(r) ===

    // Title
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 14px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Graf S(r) = 2\u03C0r(24 \u2212 2r)', (graphLeft + graphRight) / 2, 28);

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(graphLeft, graphBottom);
    ctx.lineTo(graphRight, graphBottom);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(graphLeft, graphBottom);
    ctx.lineTo(graphLeft, graphTop);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('r (cm)', (graphLeft + graphRight) / 2, graphBottom + 30);
    ctx.save();
    ctx.translate(graphLeft - 30, (graphTop + graphBottom) / 2);
    ctx.rotate(-Math.PI / 2);
    ctx.fillText('S (cm\u00B2)', 0, 0);
    ctx.restore();

    // Grid and tick marks on graph
    var maxS = 160 * Math.PI; // ~502
    var rMax = 12;

    function graphXFromR(rv) {
      return graphLeft + (rv / rMax) * graphWidth;
    }
    function graphYFromS(sv) {
      return graphBottom - (sv / maxS) * graphHeight;
    }

    // Grid lines
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (var gr = 2; gr <= 12; gr += 2) {
      var gx = graphXFromR(gr);
      ctx.beginPath();
      ctx.moveTo(gx, graphBottom);
      ctx.lineTo(gx, graphTop);
      ctx.stroke();
      ctx.fillStyle = '#64748b';
      ctx.font = '11px Segoe UI, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(gr.toString(), gx, graphBottom + 14);
    }
    for (var gs = 100; gs <= 500; gs += 100) {
      var gy = graphYFromS(gs);
      ctx.strokeStyle = '#1e293b';
      ctx.beginPath();
      ctx.moveTo(graphLeft, gy);
      ctx.lineTo(graphRight, gy);
      ctx.stroke();
      ctx.fillStyle = '#64748b';
      ctx.font = '11px Segoe UI, sans-serif';
      ctx.textAlign = 'right';
      ctx.fillText(gs.toString(), graphLeft - 6, gy + 4);
    }

    // Draw the parabola S(r) = 2*pi*r*(24 - 2r)
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    var started = false;
    for (var pr = 0; pr <= 12; pr += 0.1) {
      var pS = 2 * Math.PI * pr * (24 - 2 * pr);
      if (pS < 0) pS = 0;
      var px = graphXFromR(pr);
      var py = graphYFromS(pS);
      if (!started) { ctx.moveTo(px, py); started = true; }
      else { ctx.lineTo(px, py); }
    }
    ctx.stroke();

    // Mark current point
    var curS = getLateralArea(r);
    var curX = graphXFromR(r);
    var curY = graphYFromS(curS);

    // Glow
    var glow = ctx.createRadialGradient(curX, curY, 0, curX, curY, 20);
    glow.addColorStop(0, 'rgba(74, 222, 128, 0.4)');
    glow.addColorStop(1, 'rgba(74, 222, 128, 0)');
    ctx.fillStyle = glow;
    ctx.fillRect(curX - 20, curY - 20, 40, 40);

    ctx.fillStyle = '#4ade80';
    ctx.beginPath();
    ctx.arc(curX, curY, 6, 0, 2 * Math.PI);
    ctx.fill();
    ctx.strokeStyle = '#0c1222';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Dashed lines to axes from current point
    ctx.strokeStyle = 'rgba(74, 222, 128, 0.3)';
    ctx.lineWidth = 1;
    ctx.setLineDash([4, 4]);
    ctx.beginPath();
    ctx.moveTo(curX, curY);
    ctx.lineTo(curX, graphBottom);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(curX, curY);
    ctx.lineTo(graphLeft, curY);
    ctx.stroke();
    ctx.setLineDash([]);

    // Mark maximum point (r=6)
    var maxSVal = getLateralArea(6);
    var maxX = graphXFromR(6);
    var maxY = graphYFromS(maxSVal);
    if (Math.abs(r - 6) > 0.3) {
      ctx.fillStyle = 'rgba(244, 114, 182, 0.6)';
      ctx.beginPath();
      ctx.arc(maxX, maxY, 4, 0, 2 * Math.PI);
      ctx.fill();
      ctx.fillStyle = '#f472b6';
      ctx.font = '11px Segoe UI, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('max (r=6)', maxX, maxY - 10);
    }

    // Current value label
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 12px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('S \u2248 ' + curS.toFixed(1), curX + 10, curY - 6);

    // === SLIDER BAR ===
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Polupreƒçnik valjka r:', (sliderBarLeft + sliderBarRight) / 2, sliderBarY - 16);

    // Track
    ctx.fillStyle = '#334155';
    ctx.beginPath();
    ctx.roundRect(sliderBarLeft, sliderBarY - 3, sliderBarWidth, 6, 3);
    ctx.fill();

    // Filled part
    var filledWidth = sliderXFromR(r) - sliderBarLeft;
    var trackGrad = ctx.createLinearGradient(sliderBarLeft, 0, sliderBarLeft + filledWidth, 0);
    trackGrad.addColorStop(0, '#60a5fa');
    trackGrad.addColorStop(1, '#4ade80');
    ctx.fillStyle = trackGrad;
    ctx.beginPath();
    ctx.roundRect(sliderBarLeft, sliderBarY - 3, filledWidth, 6, 3);
    ctx.fill();

    // Thumb
    var thumbX = sliderXFromR(r);
    ctx.fillStyle = '#4ade80';
    ctx.beginPath();
    ctx.arc(thumbX, sliderBarY, 10, 0, 2 * Math.PI);
    ctx.fill();
    ctx.strokeStyle = '#0c1222';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Value on thumb
    ctx.fillStyle = '#0c1222';
    ctx.font = 'bold 10px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText(r.toFixed(1), thumbX, sliderBarY + 3.5);

    // Labels at ends
    ctx.fillStyle = '#64748b';
    ctx.font = '11px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('0', sliderBarLeft, sliderBarY + 22);
    ctx.fillText('12', sliderBarRight, sliderBarY + 22);
  }

  draw();

  function getEventPos(e) {
    var rect = canvas.getBoundingClientRect();
    var scaleFactorX = W / rect.width;
    var scaleFactorY = H / rect.height;
    var clientX, clientY;
    if (e.touches) {
      clientX = e.touches[0].clientX;
      clientY = e.touches[0].clientY;
    } else {
      clientX = e.clientX;
      clientY = e.clientY;
    }
    return {
      x: (clientX - rect.left) * scaleFactorX,
      y: (clientY - rect.top) * scaleFactorY
    };
  }

  function isOnSlider(pos) {
    return pos.x >= sliderBarLeft - 15 && pos.x <= sliderBarRight + 15 &&
           pos.y >= sliderBarY - 20 && pos.y <= sliderBarY + 20;
  }

  function handleStart(e) {
    var pos = getEventPos(e);
    if (isOnSlider(pos)) {
      dragging = true;
      sliderR = rFromSliderX(pos.x);
      draw();
      e.preventDefault();
    }
  }

  function handleMove(e) {
    if (!dragging) return;
    var pos = getEventPos(e);
    sliderR = rFromSliderX(pos.x);
    draw();
    e.preventDefault();
  }

  function handleEnd() {
    dragging = false;
  }

  canvas.addEventListener('mousedown', handleStart);
  canvas.addEventListener('mousemove', handleMove);
  canvas.addEventListener('mouseup', handleEnd);
  canvas.addEventListener('mouseleave', handleEnd);

  canvas.addEventListener('touchstart', handleStart, { passive: false });
  canvas.addEventListener('touchmove', handleMove, { passive: false });
  canvas.addEventListener('touchend', handleEnd);
  canvas.addEventListener('touchcancel', handleEnd);
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Valjak maksimalne povr≈°ine omotaƒça upisan u kupu",
  "subject": "math",
  "unit": "geometry",
  "topic_tags": ["stereometrija", "kupa", "valjak", "optimizacija", "izvod funkcije", "povr≈°ina omotaƒça", "sliƒçnost trouglova"]
}
BRAINSPARK_META-->