<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kompozicija funkcija (g ‚àò f)(0)</title>
<script>
MathJax = {
  tex: { inlineMath: [['\\(', '\\)'], ['$', '$']], displayMath: [['\\[', '\\]']] },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<script type="text/info" id="logic-scratchpad">
Problem: Ako je f(3 - x) = x + 5 i g(x + 5) = 2 - x, onda je vrednost (g ‚àò f)(0) jednaka?

Step 1: Naƒái eksplicitnu formulu za f(x).
  f(3 - x) = x + 5
  Neka t = 3 - x, tada x = 3 - t.
  f(t) = (3 - t) + 5 = 8 - t
  Dakle: f(x) = 8 - x

Step 2: Naƒái eksplicitnu formulu za g(x).
  g(x + 5) = 2 - x
  Neka t = x + 5, tada x = t - 5.
  g(t) = 2 - (t - 5) = 2 - t + 5 = 7 - t
  Dakle: g(x) = 7 - x

Step 3: Izraƒçunati f(0).
  f(0) = 8 - 0 = 8

Step 4: Izraƒçunati g(f(0)) = g(8).
  g(8) = 7 - 8 = -1

Step 5: (g ‚àò f)(0) = g(f(0)) = -1

Verification:
  f(3 - x) = x + 5. Check with our f(x) = 8 - x:
    f(3 - x) = 8 - (3 - x) = 8 - 3 + x = 5 + x = x + 5 ‚úì

  g(x + 5) = 2 - x. Check with our g(x) = 7 - x:
    g(x + 5) = 7 - (x + 5) = 7 - x - 5 = 2 - x ‚úì

Answer: B) -1
</script>
<style>
  *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    background: #0f172a;
    color: #e2e8f0;
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    line-height: 1.7;
    padding: 20px;
    max-width: 900px;
    margin: 0 auto;
  }
  h1 {
    font-size: 2rem;
    font-weight: 800;
    background: linear-gradient(135deg, #60a5fa, #a78bfa);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 4px;
    line-height: 1.3;
  }
  .subtitle {
    color: #94a3b8;
    font-size: 1.05rem;
    margin-bottom: 28px;
  }
  .card {
    background: #1e293b;
    border: 1px solid #334155;
    border-radius: 14px;
    padding: 24px 28px;
    margin-bottom: 22px;
  }
  .card-title {
    font-size: 1.2rem;
    font-weight: 700;
    margin-bottom: 14px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .card-title .icon {
    font-size: 1.3rem;
  }
  .problem-box {
    background: #172033;
    border-left: 4px solid #60a5fa;
    padding: 18px 22px;
    border-radius: 0 10px 10px 0;
    font-size: 1.08rem;
    margin-bottom: 10px;
  }
  .given-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 10px;
    margin-top: 16px;
  }
  .given-item {
    background: #0f172a;
    border: 1px solid #334155;
    border-radius: 10px;
    padding: 12px 16px;
    text-align: center;
    transition: all 0.2s;
  }
  .given-item .label {
    font-size: 0.85rem;
    color: #94a3b8;
    font-weight: 600;
    margin-bottom: 4px;
  }
  .given-item .value {
    font-size: 1.1rem;
    color: #e2e8f0;
    font-weight: 700;
  }
  .plan-list {
    list-style: none;
    counter-reset: plan;
  }
  .plan-list li {
    counter-increment: plan;
    padding: 6px 0 6px 36px;
    position: relative;
  }
  .plan-list li::before {
    content: counter(plan);
    position: absolute;
    left: 0;
    top: 6px;
    width: 26px;
    height: 26px;
    background: linear-gradient(135deg, #60a5fa, #a78bfa);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.82rem;
    font-weight: 700;
    color: #0f172a;
  }
  details {
    background: #172033;
    border: 1px solid #334155;
    border-radius: 10px;
    padding: 14px 20px;
    margin: 15px 0;
  }
  details summary {
    cursor: pointer;
    font-weight: 600;
    color: #a78bfa;
    list-style: none;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  details summary::-webkit-details-marker { display: none; }
  details summary::before {
    content: '>';
    display: inline-block;
    transition: transform 0.2s;
    font-family: monospace;
    font-size: 1.1rem;
  }
  details[open] summary::before {
    transform: rotate(90deg);
  }
  details .inner {
    margin-top: 14px;
    padding-top: 14px;
    border-top: 1px solid #334155;
  }
  .step {
    border-left: 3px solid #334155;
    padding: 14px 0 14px 22px;
    margin-left: 12px;
    position: relative;
    margin-bottom: 4px;
    cursor: pointer;
    transition: border-color 0.2s;
  }
  .step:hover, .step.active {
    border-left-color: #4ade80;
  }
  .step::before {
    content: '';
    position: absolute;
    left: -7px;
    top: 18px;
    width: 12px;
    height: 12px;
    background: #60a5fa;
    border-radius: 50%;
    border: 2px solid #0f172a;
  }
  .step:last-child { border-left-color: transparent; }
  .step:last-child:hover, .step:last-child.active { border-left-color: #4ade80; }
  .step-label {
    font-weight: 700;
    color: #60a5fa;
    font-size: 1rem;
    margin-bottom: 6px;
  }
  .math-block {
    background: rgba(56, 189, 248, 0.08);
    border: 1px solid rgba(56, 189, 248, 0.15);
    border-radius: 8px;
    padding: 12px 18px;
    margin: 10px 0;
    font-family: 'Courier New', monospace;
  }
  .checkpoint {
    background: rgba(167, 139, 250, 0.1);
    border: 1px dashed #a78bfa;
    border-radius: 10px;
    padding: 12px 18px;
    margin: 15px 0;
    font-size: 0.95rem;
    color: #a78bfa;
  }
  .checkpoint strong { color: #c4b5fd; }
  .final-answer {
    background: linear-gradient(135deg, rgba(52, 211, 153, 0.12), rgba(74, 222, 128, 0.08));
    border: 2px solid #34d399;
    border-radius: 14px;
    padding: 26px 30px;
    text-align: center;
  }
  .final-answer .label {
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: #34d399;
    font-weight: 700;
    margin-bottom: 10px;
  }
  .final-answer .value {
    font-size: 1.7rem;
    font-weight: 800;
    color: #4ade80;
  }
  .final-options {
    display: flex;
    justify-content: center;
    gap: 12px;
    flex-wrap: wrap;
    margin-top: 18px;
  }
  .final-opt {
    background: #0f172a;
    border: 1px solid #334155;
    border-radius: 10px;
    padding: 8px 18px;
    font-size: 1rem;
    color: #94a3b8;
  }
  .final-opt.correct {
    border-color: #34d399;
    background: rgba(52, 211, 153, 0.12);
    color: #4ade80;
    font-weight: 700;
    box-shadow: 0 0 14px rgba(52, 211, 153, 0.2);
  }
  .insight-box {
    background: rgba(96, 165, 250, 0.08);
    border: 1px solid rgba(96, 165, 250, 0.3);
    border-radius: 12px;
    padding: 18px 22px;
  }
  .insight-box .label {
    font-weight: 700;
    color: #60a5fa;
    margin-bottom: 6px;
    font-size: 1.05rem;
  }
  .pitfall {
    background: rgba(244, 114, 182, 0.08);
    border-left: 4px solid #f472b6;
    border-radius: 0 10px 10px 0;
    padding: 14px 20px;
    margin-bottom: 10px;
  }
  .pitfall strong { color: #f472b6; }
  .challenge-box {
    background: rgba(167, 139, 250, 0.06);
    border: 1px solid rgba(167, 139, 250, 0.25);
    border-radius: 12px;
    padding: 18px 22px;
  }
  .challenge-box .label {
    font-weight: 700;
    color: #a78bfa;
    margin-bottom: 6px;
  }
  canvas {
    display: block;
    margin: 0 auto;
    border-radius: 10px;
    background: #0c1222;
    max-width: 100%;
    touch-action: none;
  }
  .muted { color: #94a3b8; }
  .blue { color: #60a5fa; }
  .green { color: #34d399; }
  .purple { color: #a78bfa; }
  .pink { color: #f472b6; }
  @media (max-width: 700px) {
    body { padding: 12px; }
    h1 { font-size: 1.5rem; }
    .card { padding: 18px 16px; }
    .given-grid { grid-template-columns: repeat(auto-fit, minmax(90px, 1fr)); }
    .final-options { gap: 8px; }
    .final-opt { padding: 6px 12px; font-size: 0.9rem; }
  }
</style>
</head>
<body>

<h1>Kompozicija funkcija</h1>
<p class="subtitle">Funkcije i kompozicija &mdash; Odredjivanje eksplicitnih formula metodom smene</p>

<!-- Problem Statement -->
<div class="card problem-statement">
  <div class="card-title"><span class="icon">üìã</span> Zadatak</div>
  <div class="problem-box">
    Ako je \(f(3 - x) = x + 5\) i \(g(x + 5) = 2 - x\), onda je vrednost \((g \circ f)(0)\) jednaka:
  </div>
  <div class="given-grid">
    <div class="given-item answer-option" data-option="A">
      <div class="label">(A)</div>
      <div class="value">\(2\)</div>
    </div>
    <div class="given-item answer-option" data-option="B">
      <div class="label">(B)</div>
      <div class="value">\(-1\)</div>
    </div>
    <div class="given-item answer-option" data-option="C">
      <div class="label">(C)</div>
      <div class="value">\(0\)</div>
    </div>
    <div class="given-item answer-option" data-option="D">
      <div class="label">(D)</div>
      <div class="value">\(1\)</div>
    </div>
    <div class="given-item answer-option" data-option="E">
      <div class="label">(E)</div>
      <div class="value">\(-2\)</div>
    </div>
  </div>
</div>

<!-- Plan -->
<div class="card">
  <div class="card-title"><span class="icon">üó∫Ô∏è</span> Plan re≈°avanja</div>
  <ol class="plan-list">
    <li>Iz definicije \(f(3 - x) = x + 5\) smenom odrediti eksplicitnu formulu za \(f(x)\).</li>
    <li>Iz definicije \(g(x + 5) = 2 - x\) smenom odrediti eksplicitnu formulu za \(g(x)\).</li>
    <li>Izraƒçunati \(f(0)\), pa zatim \(g(f(0))\) da bismo dobili \((g \circ f)(0)\).</li>
  </ol>
</div>

<!-- Theory Refresher -->
<div class="card">
  <div class="card-title"><span class="icon">üìñ</span> Teorijska podloga</div>
  <details>
    <summary>Kljuƒçne formule i teoreme</summary>
    <div class="inner">
      <ul style="list-style:disc;margin-left:20px;">
        <li><strong>Kompozicija funkcija:</strong> \((g \circ f)(x) = g(f(x))\) &mdash; prvo se primeni \(f\), pa na rezultat primeni \(g\).</li>
        <li><strong>Metoda smene:</strong> Ako je data \(f(h(x)) = \text{izraz}(x)\), uvodimo smenu \(t = h(x)\), izrazimo \(x\) preko \(t\), i dobijemo \(f(t)\).</li>
        <li><strong>Definicioni domen:</strong> Kod kompozicije \(g \circ f\), kodomen funkcije \(f\) mora biti podskup domena funkcije \(g\).</li>
      </ul>
      <p class="muted" style="margin-top:10px;">Ova tehnika je univerzalna: kad god vidite funkciju ƒçiji je argument slo≈æeniji izraz (npr. \(3 - x\), \(x + 5\)), smena tog izraza direktno vodi do eksplicitne formule.</p>
    </div>
  </details>
</div>

<!-- Visual Aid / Interactive Diagram -->
<div class="card">
  <div class="card-title"><span class="icon">üìê</span> Vizuelni prikaz kompozicije</div>
  <p class="muted" style="margin-bottom:14px;">Dijagram pokazuje kako ulazna vrednost prolazi kroz funkciju \(f\), pa kroz \(g\). Pomerite klizaƒç da vidite kako se vrednosti menjaju za razliƒçite ulaze.</p>
  <div style="display:flex;align-items:center;gap:12px;flex-wrap:wrap;margin-bottom:14px;">
    <label style="display:flex;align-items:center;gap:8px;">
      <span class="blue">x =</span>
      <input type="range" id="slider-x" min="-5" max="10" value="0" step="0.5" style="width:180px;">
      <span id="val-x" class="blue" style="min-width:30px;">0</span>
    </label>
  </div>
  <canvas id="canvas" width="780" height="360"></canvas>
  <p class="muted" style="margin-top:8px;text-align:center;font-size:0.88rem;">Pomerite klizaƒç da pratite tok vrednosti kroz kompoziciju.</p>
</div>

<!-- Step-by-step Solution -->
<div class="card">
  <div class="card-title"><span class="icon">‚úèÔ∏è</span> Re≈°enje korak po korak</div>

  <div class="step" data-step="1">
    <div class="step-label">Korak 1: Odrediti eksplicitnu formulu za f(x)</div>
    <p>Data je jednakost \(f(3 - x) = x + 5\). Argument funkcije \(f\) je izraz \(3 - x\), a ne samo \(x\). Da bismo dobili \(f(x)\), uvodimo <strong>smenu</strong>:</p>
    <div class="math-block">
      \[t = 3 - x \quad \Longrightarrow \quad x = 3 - t\]
    </div>
    <p>Zamenjujemo u polaznu jednakost:</p>
    \[f(t) = (3 - t) + 5 = 8 - t\]
    <p>Po≈°to je \(t\) samo ime promenljive, mo≈æemo pisati:</p>
    \[\boxed{f(x) = 8 - x}\]
  </div>

  <div class="step" data-step="2">
    <div class="step-label">Korak 2: Odrediti eksplicitnu formulu za g(x)</div>
    <p>Data je jednakost \(g(x + 5) = 2 - x\). Argument funkcije \(g\) je \(x + 5\). Uvodimo smenu:</p>
    <div class="math-block">
      \[t = x + 5 \quad \Longrightarrow \quad x = t - 5\]
    </div>
    <p>Zamenjujemo u polaznu jednakost:</p>
    \[g(t) = 2 - (t - 5) = 2 - t + 5 = 7 - t\]
    <p>Dakle:</p>
    \[\boxed{g(x) = 7 - x}\]

    <details>
      <summary>Proveri se!</summary>
      <div class="inner">
        <p>Proverimo obe formule vraƒáanjem u originalne definicije:</p>
        <p><strong>Za \(f\):</strong> \(f(3 - x) = 8 - (3 - x) = 8 - 3 + x = x + 5\) &check;</p>
        <p><strong>Za \(g\):</strong> \(g(x + 5) = 7 - (x + 5) = 7 - x - 5 = 2 - x\) &check;</p>
        <p class="muted">Obe formule su taƒçne!</p>
      </div>
    </details>
  </div>

  <div class="step" data-step="3">
    <div class="step-label">Korak 3: Izraƒçunati f(0)</div>
    <p>Sada kada znamo da je \(f(x) = 8 - x\), mo≈æemo lako izraƒçunati:</p>
    \[f(0) = 8 - 0 = 8\]
    <p>Dakle, rezultat primene funkcije \(f\) na vrednost \(0\) je <span class="blue">\(8\)</span>.</p>
  </div>

  <div class="step" data-step="4">
    <div class="step-label">Korak 4: Izraƒçunati g(f(0)) = g(8)</div>
    <p>Dobijenu vrednost \(8\) sada unosimo u funkciju \(g\):</p>
    \[g(8) = 7 - 8 = -1\]
    <p>I to je na≈° konaƒçan rezultat!</p>
  </div>

  <div class="step" data-step="5">
    <div class="step-label">Korak 5: Zakljuƒçak</div>
    <p>Spojena izraƒçunavanja:</p>
    \[(g \circ f)(0) = g\big(f(0)\big) = g(8) = 7 - 8 = -1\]

    <details>
      <summary>Alternativni pristup &mdash; bez nala≈æenja eksplicitnih formula</summary>
      <div class="inner">
        <p>Mo≈æe se re≈°iti i direktno, bez nala≈æenja \(f(x)\) i \(g(x)\):</p>
        <p><strong>1.</strong> Iz \(f(3 - x) = x + 5\), za \(x = 3\): \(f(3 - 3) = 3 + 5\), tj. \(f(0) = 8\).</p>
        <p><strong>2.</strong> Iz \(g(x + 5) = 2 - x\), za \(x = 3\): \(g(3 + 5) = 2 - 3\), tj. \(g(8) = -1\).</p>
        <p><strong>3.</strong> Dakle \((g \circ f)(0) = g(f(0)) = g(8) = -1\).</p>
        <p class="muted" style="margin-top:8px;">Ovaj pristup je br≈æi, ali zahteva da uoƒçite prave vrednosti za \(x\) odmah.</p>
      </div>
    </details>
  </div>
</div>

<!-- Key Insight -->
<div class="card">
  <div class="insight-box">
    <div class="label">Kljuƒçni uvid</div>
    <p>Kada je funkcija definisana implicitno (npr. \(f(3 - x) = x + 5\)), kljuƒç je <strong>metoda smene</strong>: uvedemo novu promenljivu za slo≈æeni argument i izrazimo sve preko nje. Ovim postupkom dolazimo do eksplicitne formule oblika \(f(x) = \ldots\), sa kojom se dalje raƒçuna jednostavno.</p>
    <p style="margin-top:10px;text-align:center;font-size:1.2rem;font-weight:700;">
      <span class="blue">\(0\)</span>
      <span class="muted" style="margin:0 6px;">\(\xrightarrow{\;f\;}\)</span>
      <span class="purple">\(8\)</span>
      <span class="muted" style="margin:0 6px;">\(\xrightarrow{\;g\;}\)</span>
      <span class="green">\(-1\)</span>
    </p>
  </div>
</div>

<!-- Final Answer -->
<div class="card">
  <div class="final-answer">
    <div class="label">Konaƒçan odgovor</div>
    <div class="value">B) \(-1\)</div>
    <p style="margin-top:14px;color:#94a3b8;font-size:1rem;">
      \((g \circ f)(0) = g(f(0)) = g(8) = 7 - 8 = -1\)
    </p>
  </div>
  <div class="final-options">
    <div class="final-opt">A) \(2\)</div>
    <div class="final-opt correct">B) \(-1\)</div>
    <div class="final-opt">C) \(0\)</div>
    <div class="final-opt">D) \(1\)</div>
    <div class="final-opt">E) \(-2\)</div>
  </div>
  <p class="muted" style="margin-top:16px;text-align:center;font-size:0.92rem;">
    <strong>Verifikacija:</strong> \(f(0) = 8 - 0 = 8\), pa \(g(8) = 7 - 8 = -1\). Takoƒëe, direktno: za \(x = 3\) u \(f(3-x)=x+5\) dobijamo \(f(0)=8\); za \(x = 3\) u \(g(x+5)=2-x\) dobijamo \(g(8)=-1\).
  </p>
</div>

<!-- Common Pitfalls -->
<div class="card">
  <div class="card-title"><span class="icon">‚ö†Ô∏è</span> Najƒçe≈°ƒáe gre≈°ke</div>
  <div class="pitfall">
    <strong>Gre≈°ka 1: Pogre≈°an redosled u kompoziciji.</strong>
    Mnogi uƒçenici me≈°aju redosled i raƒçunaju \(f(g(0))\) umesto \(g(f(0))\). Zapamtite: \((g \circ f)(x)\) znaƒçi da se <em>prvo</em> primeni \(f\), pa <em>zatim</em> \(g\) na rezultat. ƒåita se "g nakon f".
  </div>
  <div class="pitfall">
    <strong>Gre≈°ka 2: Pogre≈°na smena pri nala≈æenju eksplicitne formule.</strong>
    Kod \(g(x + 5) = 2 - x\), ako uvedete \(t = x + 5\), morate izraziti \(x = t - 5\) i zameniti <em>svuda</em> gde se pojavljuje \(x\). ƒåesta gre≈°ka je da se zameni samo u argumentu, a ne i na desnoj strani: \(g(t) = 2 - (t - 5)\), ne \(g(t) = 2 - t\).
  </div>
</div>

<!-- Optional Challenge -->
<div class="card">
  <div class="challenge-box">
    <div class="label">Izazov za napredne</div>
    <p>Ako je \(f(x) = 8 - x\) i \(g(x) = 7 - x\), odredite op≈°tu formulu za \((g \circ f)(x)\) i \((f \circ g)(x)\). Da li je kompozicija komutativna, tj. da li je \(g \circ f = f \circ g\)?</p>
    <details>
      <summary>Nagove≈°taj</summary>
      <div class="inner">
        <p>\((g \circ f)(x) = g(f(x)) = g(8 - x) = 7 - (8 - x) = x - 1\).</p>
        <p>\((f \circ g)(x) = f(g(x)) = f(7 - x) = 8 - (7 - x) = x + 1\).</p>
        <p class="muted">Rezultati su razliƒçiti, ≈°to znaƒçi da kompozicija u op≈°tem sluƒçaju <strong>nije</strong> komutativna!</p>
      </div>
    </details>
  </div>
</div>

<script>
(() => {
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  const slider = document.getElementById('slider-x');
  const valDisplay = document.getElementById('val-x');

  function f(x) { return 8 - x; }
  function g(x) { return 7 - x; }

  function draw() {
    const W = canvas.width, H = canvas.height;
    const xVal = parseFloat(slider.value);
    const fVal = f(xVal);
    const gfVal = g(fVal);

    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Layout: three columns for x, f(x), g(f(x))
    const colW = W / 3;
    const centerY = H / 2;

    // Draw connecting arrows
    // Arrow from x to f(x)
    const arrowY1 = centerY - 20;
    const arrowY2 = centerY + 30;

    // Column labels
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';

    // Column 1: Input x
    ctx.fillStyle = '#60a5fa';
    ctx.fillText('Ulaz: x', colW * 0.5, 35);

    // Column 2: f(x) = 8 - x
    ctx.fillStyle = '#a78bfa';
    ctx.fillText('f(x) = 8 \u2212 x', colW * 1.5, 35);

    // Column 3: g(f(x)) = 7 - f(x)
    ctx.fillStyle = '#34d399';
    ctx.fillText('g(f(x)) = 7 \u2212 f(x)', colW * 2.5, 35);

    // Draw value circles
    var circleR = 42;

    // Circle 1: x value
    ctx.beginPath();
    ctx.arc(colW * 0.5, centerY, circleR, 0, 2 * Math.PI);
    ctx.fillStyle = 'rgba(96, 165, 250, 0.15)';
    ctx.fill();
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.stroke();

    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 24px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText(formatNum(xVal), colW * 0.5, centerY);

    // Circle 2: f(x) value
    ctx.beginPath();
    ctx.arc(colW * 1.5, centerY, circleR, 0, 2 * Math.PI);
    ctx.fillStyle = 'rgba(167, 139, 250, 0.15)';
    ctx.fill();
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2.5;
    ctx.stroke();

    ctx.fillStyle = '#a78bfa';
    ctx.fillText(formatNum(fVal), colW * 1.5, centerY);

    // Circle 3: g(f(x)) value
    ctx.beginPath();
    ctx.arc(colW * 2.5, centerY, circleR, 0, 2 * Math.PI);
    ctx.fillStyle = 'rgba(52, 211, 153, 0.15)';
    ctx.fill();
    ctx.strokeStyle = '#34d399';
    ctx.lineWidth = 2.5;
    ctx.stroke();

    ctx.fillStyle = '#34d399';
    ctx.fillText(formatNum(gfVal), colW * 2.5, centerY);

    // Draw arrows between circles
    drawArrow(colW * 0.5 + circleR + 8, centerY - 10, colW * 1.5 - circleR - 8, centerY - 10, '#a78bfa', 'f');
    drawArrow(colW * 1.5 + circleR + 8, centerY - 10, colW * 2.5 - circleR - 8, centerY - 10, '#34d399', 'g');

    // Sub-labels (computation)
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textBaseline = 'top';

    ctx.fillStyle = '#94a3b8';
    ctx.fillText('x = ' + formatNum(xVal), colW * 0.5, centerY + circleR + 14);

    ctx.fillStyle = '#94a3b8';
    ctx.fillText('8 \u2212 ' + formatNum(xVal) + ' = ' + formatNum(fVal), colW * 1.5, centerY + circleR + 14);

    ctx.fillStyle = '#94a3b8';
    ctx.fillText('7 \u2212 ' + formatNum(fVal) + ' = ' + formatNum(gfVal), colW * 2.5, centerY + circleR + 14);

    // Bottom: composition formula
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textBaseline = 'bottom';
    ctx.fillStyle = '#e2e8f0';
    ctx.fillText('(g \u2218 f)(' + formatNum(xVal) + ') = g(f(' + formatNum(xVal) + ')) = g(' + formatNum(fVal) + ') = ' + formatNum(gfVal), W / 2, H - 20);

    // Highlight x=0 case
    if (Math.abs(xVal) < 0.01) {
      ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = '#4ade80';
      ctx.textBaseline = 'bottom';
      ctx.fillText('Tra≈æena vrednost: (g \u2218 f)(0) = \u22121', W / 2, H - 44);
    }

    // Draw small function graphs at the bottom of each column
    var graphY = centerY + circleR + 40;
    var graphH = 80;
    var graphW = colW - 40;

    // Graph of f
    drawMiniGraph(colW * 1.5 - graphW / 2, graphY, graphW, graphH, f, '#a78bfa', xVal, fVal, 'f');

    // Graph of g
    drawMiniGraph(colW * 2.5 - graphW / 2, graphY, graphW, graphH, g, '#34d399', fVal, gfVal, 'g');
  }

  function drawMiniGraph(gx, gy, gw, gh, fn, color, inputVal, outputVal, label) {
    // Draw mini coordinate system
    var xMin = -5, xMax = 15;
    var yMin = -7, yMax = 15;

    function mapX(v) { return gx + (v - xMin) / (xMax - xMin) * gw; }
    function mapY(v) { return gy + gh - (v - yMin) / (yMax - yMin) * gh; }

    // Axes
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 0.5;
    ctx.beginPath();
    ctx.moveTo(mapX(xMin), mapY(0));
    ctx.lineTo(mapX(xMax), mapY(0));
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(mapX(0), mapY(yMin));
    ctx.lineTo(mapX(0), mapY(yMax));
    ctx.stroke();

    // Function line
    ctx.strokeStyle = color;
    ctx.lineWidth = 1.5;
    ctx.globalAlpha = 0.7;
    ctx.beginPath();
    var first = true;
    for (var px = 0; px <= gw; px += 2) {
      var xv = xMin + (px / gw) * (xMax - xMin);
      var yv = fn(xv);
      var sx = gx + px;
      var sy = mapY(yv);
      if (sy < gy - 5 || sy > gy + gh + 5) {
        first = true;
        continue;
      }
      if (first) { ctx.moveTo(sx, sy); first = false; }
      else { ctx.lineTo(sx, sy); }
    }
    ctx.stroke();
    ctx.globalAlpha = 1;

    // Mark point
    var ptX = mapX(inputVal);
    var ptY = mapY(outputVal);
    if (ptY >= gy - 3 && ptY <= gy + gh + 3) {
      ctx.beginPath();
      ctx.arc(ptX, ptY, 4, 0, 2 * Math.PI);
      ctx.fillStyle = color;
      ctx.fill();

      // Dashed lines to axes
      ctx.setLineDash([3, 3]);
      ctx.strokeStyle = color;
      ctx.lineWidth = 0.8;
      ctx.globalAlpha = 0.4;
      ctx.beginPath();
      ctx.moveTo(ptX, ptY);
      ctx.lineTo(ptX, mapY(0));
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(ptX, ptY);
      ctx.lineTo(mapX(0), ptY);
      ctx.stroke();
      ctx.setLineDash([]);
      ctx.globalAlpha = 1;
    }

    // Label
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = color;
    ctx.textAlign = 'left';
    ctx.textBaseline = 'top';
    ctx.fillText(label + '(x)', gx + 2, gy + 2);
    ctx.textAlign = 'center';
  }

  function drawArrow(x1, y1, x2, y2, color, label) {
    var headLen = 10;
    var angle = Math.atan2(y2 - y1, x2 - x1);

    ctx.strokeStyle = color;
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.stroke();

    // Arrowhead
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.moveTo(x2, y2);
    ctx.lineTo(x2 - headLen * Math.cos(angle - Math.PI / 6), y2 - headLen * Math.sin(angle - Math.PI / 6));
    ctx.lineTo(x2 - headLen * Math.cos(angle + Math.PI / 6), y2 - headLen * Math.sin(angle + Math.PI / 6));
    ctx.closePath();
    ctx.fill();

    // Label above arrow
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = color;
    ctx.textAlign = 'center';
    ctx.textBaseline = 'bottom';
    ctx.fillText(label, (x1 + x2) / 2, y1 - 8);
  }

  function formatNum(n) {
    if (Number.isInteger(n)) return n.toString();
    return n.toFixed(1).replace('.', ',');
  }

  slider.addEventListener('input', function() {
    valDisplay.textContent = formatNum(parseFloat(slider.value));
    draw();
  });

  // Step click highlighting
  var steps = document.querySelectorAll('.step');
  steps.forEach(function(step) {
    step.addEventListener('click', function() {
      steps.forEach(function(s) { s.classList.remove('active'); });
      step.classList.add('active');
    });
  });

  // Touch support on canvas
  canvas.addEventListener('touchstart', function(e) { e.preventDefault(); }, { passive: false });

  // Responsive canvas
  function resizeCanvas() {
    var container = canvas.parentElement;
    var maxW = container.clientWidth - 56;
    if (maxW < 780) {
      canvas.style.width = maxW + 'px';
      canvas.style.height = (maxW * 360 / 780) + 'px';
    }
  }
  window.addEventListener('resize', resizeCanvas);
  resizeCanvas();

  draw();
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{"title":"Kompozicija funkcija (g ‚àò f)(0) ‚Äî metoda smene","subject":"math","unit":"algebra","topic_tags":["kompozicija funkcija","smena promenljive","eksplicitna formula funkcije","funkcije"]}
BRAINSPARK_META-->