<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Geometrijski niz - Zbir prvih članova</title>

<script type="text/info" id="logic-scratchpad">
Problem: Geometrijski niz a₁, a₂, a₃, ...
Dato: a₅ - a₂ = 756 i a₂ + a₃ + a₄ = 252
Traži se: a₁ + a₂

Opšti član geometrijskog niza: aₙ = a₁ · q^(n-1)

Zapisujemo uslove:
a₅ = a₁·q⁴, a₂ = a₁·q, a₃ = a₁·q², a₄ = a₁·q³

Jednačina 1: a₅ - a₂ = a₁q⁴ - a₁q = a₁q(q³ - 1) = 756
Jednačina 2: a₂ + a₃ + a₄ = a₁q + a₁q² + a₁q³ = a₁q(1 + q + q²) = 252

Delimo jednačinu 1 sa jednačinom 2:
a₁q(q³ - 1) / [a₁q(1 + q + q²)] = 756 / 252
(q³ - 1) / (1 + q + q²) = 3

Koristimo razliku kubova: q³ - 1 = (q - 1)(q² + q + 1)

Zamena:
(q - 1)(q² + q + 1) / (q² + q + 1) = q - 1 = 3

Dakle: q = 4

Iz jednačine 2:
a₁ · 4 · (1 + 4 + 16) = 252
a₁ · 4 · 21 = 252
a₁ · 84 = 252
a₁ = 3

a₁ + a₂ = a₁ + a₁·q = a₁(1 + q) = 3·(1 + 4) = 3·5 = 15

Verifikacija:
a₁ = 3, q = 4
a₁ = 3, a₂ = 12, a₃ = 48, a₄ = 192, a₅ = 768
a₅ - a₂ = 768 - 12 = 756 ✓
a₂ + a₃ + a₄ = 12 + 48 + 192 = 252 ✓
a₁ + a₂ = 3 + 12 = 15 ✓

Odgovor: D) 15
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56, 189, 248, 0.06);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 100px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.15rem;
  font-weight: 600;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card p {
  color: #cbd5e1;
  font-size: 1.05rem;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  font-size: 1.05rem;
  padding: 8px 0;
  user-select: none;
}

details summary:hover {
  color: #93c5fd;
}

details .detail-content {
  padding: 14px 0 6px 12px;
  color: #cbd5e1;
}

details .detail-content ul {
  list-style: none;
  padding: 0;
}

details .detail-content ul li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51, 65, 85, 0.5);
}

details .detail-content ul li:last-child {
  border-bottom: none;
}

.step-container {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  padding: 16px;
  border-radius: 12px;
  border-left: 3px solid transparent;
  cursor: pointer;
  transition: all 0.2s ease;
}

.step-container:hover, .step-container.active {
  background: rgba(96, 165, 250, 0.04);
  border-left-color: #4ade80;
}

.step-badge {
  width: 32px;
  height: 32px;
  min-width: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  margin-top: 2px;
}

.step-content h3 {
  color: #e2e8f0;
  font-size: 1.1rem;
  margin-bottom: 8px;
}

.step-content p {
  color: #cbd5e1;
  margin-bottom: 8px;
}

.math-block {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 10px 0;
  overflow-x: auto;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 6px;
}

.checkpoint {
  background: rgba(167, 139, 250, 0.06);
  border: 1px solid rgba(167, 139, 250, 0.2);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 15px 0;
}

.checkpoint summary {
  color: #a78bfa;
  font-size: 0.95rem;
}

.checkpoint .detail-content {
  color: #4ade80;
  font-weight: 600;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.25);
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  text-align: center;
}

.insight-box h2 {
  justify-content: center;
  color: #a78bfa;
}

.insight-box .big-formula {
  font-size: 1.4rem;
  margin: 16px 0;
  color: #4ade80;
}

.final-answer-card {
  border: 2px solid #4ade80;
  text-align: center;
}

.final-answer-card .answer-value {
  font-size: 2rem;
  font-weight: 800;
  color: #4ade80;
  margin: 16px 0;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 18px 0;
}

.option-card {
  background: rgba(51, 65, 85, 0.5);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 22px;
  min-width: 80px;
  text-align: center;
  font-size: 1.05rem;
  transition: all 0.2s;
}

.option-card.correct-option {
  background: rgba(52, 211, 153, 0.15);
  border-color: #4ade80;
  color: #4ade80;
  font-weight: 700;
}

.option-card .opt-label {
  color: #94a3b8;
  font-size: 0.8rem;
  margin-bottom: 2px;
}

.verification-note {
  background: rgba(52, 211, 153, 0.06);
  border: 1px solid rgba(52, 211, 153, 0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin-top: 16px;
  color: #94a3b8;
  font-size: 0.95rem;
  text-align: left;
}

.pitfall-card {
  border-left: 3px solid #f472b6;
}

.pitfall-card h2 {
  color: #f472b6;
}

.pitfall-card ul {
  list-style: none;
  padding: 0;
}

.pitfall-card ul li {
  padding: 8px 0;
  color: #cbd5e1;
  border-bottom: 1px solid rgba(51,65,85,0.5);
}

.pitfall-card ul li:last-child {
  border-bottom: none;
}

.pitfall-card ul li::before {
  content: "\26A0";
  margin-right: 8px;
  color: #e09468;
}

.challenge-card {
  border-left: 3px solid #60a5fa;
}

canvas {
  display: block;
  margin: 0 auto;
  border-radius: 10px;
  touch-action: none;
  max-width: 100%;
}

.canvas-hint {
  color: #64748b;
  font-size: 0.85rem;
  text-align: center;
  margin-top: 8px;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step-container { flex-direction: column; gap: 10px; }
  .given-grid { flex-direction: column; }
  .options-row { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Geometrijski niz - zbir prvog i drugog člana</h1>
  <p class="subtitle">Algebra nizova -- određivanje parametara geometrijskog niza iz dva uslova</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>
      Dat je geometrijski niz \( a_1, a_2, a_3, \ldots \) Ako je
      \( a_5 - a_2 = 756 \) i \( a_2 + a_3 + a_4 = 252 \), onda je \( a_1 + a_2 \) jednako:
    </p>

    <div class="given-grid" style="margin-bottom: 12px;">
      <div class="given-item">
        <div class="label">Uslov 1</div>
        <div class="value">\( a_5 - a_2 = 756 \)</div>
      </div>
      <div class="given-item">
        <div class="label">Uslov 2</div>
        <div class="value">\( a_2 + a_3 + a_4 = 252 \)</div>
      </div>
      <div class="given-item">
        <div class="label">Traži se</div>
        <div class="value">\( a_1 + a_2 \)</div>
      </div>
    </div>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(5\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(20\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(25\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(15\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(10\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan rešavanja</h2>
    <p>
      Izrazićemo oba uslova pomoću prvog člana \( a_1 \) i količnika \( q \), zatim podeliti jednu jednačinu drugom da eliminišemo \( a_1 \) i nađemo \( q \). Potom računamo \( a_1 \) i traženi zbir.
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Ključne formule i teoreme</summary>
      <div class="detail-content">
        <ul>
          <li><strong>Opšti član geometrijskog niza:</strong> \( a_n = a_1 \cdot q^{n-1} \), gde je \( a_1 \) prvi član, a \( q \) količnik niza.</li>
          <li><strong>Razlika kubova:</strong> \( a^3 - b^3 = (a - b)(a^2 + ab + b^2) \). Specijalno, za \( b = 1 \):
            \[ q^3 - 1 = (q - 1)(q^2 + q + 1) \]
          </li>
          <li><strong>Izdvajanje zajedničkog faktora:</strong> Kada više članova niza ima zajednički faktor \( a_1 q \), iznosimo ga ispred da pojednostavimo izraze.</li>
          <li><strong>Metod deljenja jednačina:</strong> Kada imamo dve jednačine sa istim proizvodom \( a_1 q \), deljenjem eliminišemo nepoznatu i dobijamo jednačinu sa jednom nepoznatom.</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <h2>Vizuelni prikaz niza</h2>
    <canvas id="seqCanvas" width="800" height="380"></canvas>
    <p class="canvas-hint">Prikaz prvih 5 članova geometrijskog niza sa \( a_1 = 3 \) i \( q = 4 \)</p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container" id="step1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Izrazimo članove niza pomoću \( a_1 \) i \( q \)</h3>
        <p>U geometrijskom nizu, svaki član je oblika \( a_n = a_1 \cdot q^{n-1} \). Zapisujemo članove koji se pojavljuju u zadatku:</p>
        <div class="math-block">
          \[
          \begin{align}
          a_2 &= a_1 q \\
          a_3 &= a_1 q^2 \\
          a_4 &= a_1 q^3 \\
          a_5 &= a_1 q^4
          \end{align}
          \]
        </div>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container" id="step2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Zapišimo uslove iz zadatka</h3>
        <p>Zamenimo članove niza u oba data uslova:</p>
        <div class="math-block">
          \[
          a_5 - a_2 = a_1 q^4 - a_1 q = a_1 q(q^3 - 1) = 756 \quad \text{...(I)}
          \]
        </div>
        <div class="math-block">
          \[
          a_2 + a_3 + a_4 = a_1 q + a_1 q^2 + a_1 q^3 = a_1 q(1 + q + q^2) = 252 \quad \text{...(II)}
          \]
        </div>
        <p class="note">U oba izraza smo izdvojili zajednički faktor \( a_1 q \).</p>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Šta je zajednički faktor u obe jednačine?</summary>
      <div class="detail-content">
        Zajednički faktor je \( a_1 q \). Upravo to nam omogućava da deljenjem eliminišemo dve nepoznate odjednom!
      </div>
    </details>

    <!-- Step 3 -->
    <div class="step-container" id="step3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Podelimo jednačinu (I) sa jednačinom (II)</h3>
        <p>Deljenjem eliminišemo \( a_1 q \) i ostaje samo \( q \):</p>
        <div class="math-block">
          \[
          \frac{a_1 q(q^3 - 1)}{a_1 q(1 + q + q^2)} = \frac{756}{252}
          \]
        </div>
        <div class="math-block">
          \[
          \frac{q^3 - 1}{q^2 + q + 1} = 3
          \]
        </div>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step-container" id="step4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Primenimo formulu za razliku kubova</h3>
        <p>Koristimo identitet \( q^3 - 1 = (q - 1)(q^2 + q + 1) \):</p>
        <div class="math-block">
          \[
          \frac{(q - 1)(q^2 + q + 1)}{q^2 + q + 1} = 3
          \]
        </div>
        <p>Kako je \( q^2 + q + 1 > 0 \) za svako realno \( q \), možemo skratiti:</p>
        <div class="math-block">
          \[
          q - 1 = 3
          \]
        </div>
        <div class="math-block">
          \[
          \boxed{q = 4}
          \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Zašto smemo skratiti \( q^2 + q + 1 \)?</summary>
      <div class="detail-content">
        Diskriminanta kvadratnog trinoma \( q^2 + q + 1 \) je \( D = 1 - 4 = -3 < 0 \), pa je ovaj izraz uvek pozitivan. Zato nikada nije nula i smemo skratiti.
      </div>
    </details>

    <!-- Step 5 -->
    <div class="step-container" id="step5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Izračunajmo \( a_1 \) iz jednačine (II)</h3>
        <p>Sada znamo da je \( q = 4 \). Uvrstimo u jednačinu (II):</p>
        <div class="math-block">
          \[
          a_1 \cdot 4 \cdot (1 + 4 + 16) = 252
          \]
        </div>
        <div class="math-block">
          \[
          a_1 \cdot 4 \cdot 21 = 252
          \]
        </div>
        <div class="math-block">
          \[
          84 \, a_1 = 252
          \]
        </div>
        <div class="math-block">
          \[
          \boxed{a_1 = 3}
          \]
        </div>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step-container" id="step6">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Izračunajmo traženi zbir \( a_1 + a_2 \)</h3>
        <p>Sada imamo sve što nam treba:</p>
        <div class="math-block">
          \[
          a_1 + a_2 = a_1 + a_1 q = a_1(1 + q) = 3 \cdot (1 + 4) = 3 \cdot 5 = 15
          \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Da li je \( a_5 - a_2 = 756 \)?</summary>
      <div class="detail-content">
        \( a_5 = 3 \cdot 4^4 = 3 \cdot 256 = 768 \), \( a_2 = 3 \cdot 4 = 12 \). Razlika: \( 768 - 12 = 756 \). Tačno!
      </div>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Ključni uvid</h2>
    <p style="color: #cbd5e1; margin-bottom: 12px;">
      Obe jednačine sadrže zajednički faktor \( a_1 q \). Deljenjem ga eliminišemo, a razlika kubova \( q^3 - 1 = (q-1)(q^2+q+1) \) se upravo skraćuje sa imeniocem!
    </p>
    <div class="big-formula">
      \[ a_1 + a_2 = a_1(1 + q) = 3 \cdot 5 = 15 \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer-card">
    <h2 style="justify-content: center; color: #4ade80;">Konačan odgovor</h2>
    <div class="answer-value">\( a_1 + a_2 = 15 \)</div>

    <div class="options-row">
      <div class="option-card">
        <div class="opt-label">(A)</div>
        5
      </div>
      <div class="option-card">
        <div class="opt-label">(B)</div>
        20
      </div>
      <div class="option-card">
        <div class="opt-label">(C)</div>
        25
      </div>
      <div class="option-card correct-option">
        <div class="opt-label">(D)</div>
        15
      </div>
      <div class="option-card">
        <div class="opt-label">(E)</div>
        10
      </div>
    </div>

    <div class="verification-note">
      <strong>Verifikacija:</strong> Za \( a_1 = 3 \), \( q = 4 \) niz glasi: 3, 12, 48, 192, 768, ...
      <br>Provera: \( a_5 - a_2 = 768 - 12 = 756 \) &check;
      <br>Provera: \( a_2 + a_3 + a_4 = 12 + 48 + 192 = 252 \) &check;
      <br>Rezultat: \( a_1 + a_2 = 3 + 12 = 15 \) &check;
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfall-card">
    <h2>Česte greške</h2>
    <ul>
      <li>
        <strong>Zaboravljanje formule za razliku kubova:</strong> Bez prepoznavanja da je \( q^3 - 1 = (q-1)(q^2+q+1) \), jednačina posle deljenja deluje komplikovano. Ova faktorizacija je ključ za elegantno rešenje.
      </li>
      <li>
        <strong>Pogrešno izdvajanje zajedničkog faktora:</strong> Članovi \( a_2, a_3, a_4 \) svi sadrže \( a_1 q \) kao faktor, ali se lako pogreši ako se izostavi \( q \) ili pogrešno izračuna stepen.
      </li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Kolika je suma prvih 5 članova ovog geometrijskog niza, tj. \( S_5 = a_1 + a_2 + a_3 + a_4 + a_5 \)?</p>
    <details>
      <summary>Nagoveštaj</summary>
      <div class="detail-content">
        Koristite formulu za sumu geometrijskog niza: \( S_n = a_1 \cdot \dfrac{q^n - 1}{q - 1} \). Uvrstite \( a_1 = 3 \), \( q = 4 \), \( n = 5 \).
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  // Step click highlighting
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.add('active');
    });
  });

  // Canvas: Visualization of the geometric sequence
  const canvas = document.getElementById('seqCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');

  const W = canvas.width;
  const H = canvas.height;

  // Sequence values
  const a1 = 3;
  const q = 4;
  const terms = [];
  for (let i = 0; i < 5; i++) {
    terms.push(a1 * Math.pow(q, i));
  }
  // terms = [3, 12, 48, 192, 768]

  function draw() {
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    const padLeft = 80;
    const padRight = 40;
    const padTop = 50;
    const padBottom = 60;
    const plotW = W - padLeft - padRight;
    const plotH = H - padTop - padBottom;

    const maxVal = 768;
    const barCount = 5;
    const barGap = 20;
    const barWidth = (plotW - (barCount + 1) * barGap) / barCount;

    // Grid lines
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    const gridSteps = [0, 100, 200, 300, 400, 500, 600, 700, 800];
    for (const val of gridSteps) {
      const y = padTop + plotH - (val / maxVal) * plotH;
      ctx.beginPath();
      ctx.moveTo(padLeft, y);
      ctx.lineTo(W - padRight, y);
      ctx.stroke();

      // Label
      ctx.fillStyle = '#64748b';
      ctx.font = '12px Segoe UI, sans-serif';
      ctx.textAlign = 'right';
      ctx.fillText(val.toString(), padLeft - 10, y + 4);
    }

    // Axis
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(padLeft, padTop);
    ctx.lineTo(padLeft, padTop + plotH);
    ctx.lineTo(W - padRight, padTop + plotH);
    ctx.stroke();

    // Bars
    const colors = ['#60a5fa', '#60a5fa', '#a78bfa', '#a78bfa', '#60a5fa'];
    const highlights = [true, true, false, false, true]; // a1, a2 and a5 are highlighted differently

    for (let i = 0; i < barCount; i++) {
      const x = padLeft + barGap + i * (barWidth + barGap);
      const barH = (terms[i] / maxVal) * plotH;
      const y = padTop + plotH - barH;

      // Bar gradient
      const grad = ctx.createLinearGradient(x, y, x, padTop + plotH);
      if (i <= 1) {
        // a1, a2 - green (answer related)
        grad.addColorStop(0, '#4ade80');
        grad.addColorStop(1, 'rgba(52, 211, 153, 0.3)');
      } else if (i >= 2 && i <= 3) {
        // a3, a4 - purple (sum condition)
        grad.addColorStop(0, '#a78bfa');
        grad.addColorStop(1, 'rgba(167, 139, 250, 0.3)');
      } else {
        // a5 - blue
        grad.addColorStop(0, '#60a5fa');
        grad.addColorStop(1, 'rgba(96, 165, 250, 0.3)');
      }

      ctx.fillStyle = grad;
      ctx.beginPath();
      ctx.roundRect(x, y, barWidth, barH, [6, 6, 0, 0]);
      ctx.fill();

      // Glow
      ctx.shadowColor = i <= 1 ? '#4ade80' : (i <= 3 ? '#a78bfa' : '#60a5fa');
      ctx.shadowBlur = 10;
      ctx.fill();
      ctx.shadowBlur = 0;

      // Value on top
      ctx.fillStyle = '#e2e8f0';
      ctx.font = 'bold 14px Segoe UI, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(terms[i].toString(), x + barWidth / 2, y - 10);

      // Label below
      ctx.fillStyle = '#94a3b8';
      ctx.font = '14px Segoe UI, sans-serif';
      ctx.fillText('a' + (i + 1), x + barWidth / 2, padTop + plotH + 20);
    }

    // Annotations
    // Arrow for a5 - a2 = 756
    const x2 = padLeft + barGap + 1 * (barWidth + barGap) + barWidth / 2;
    const x5 = padLeft + barGap + 4 * (barWidth + barGap) + barWidth / 2;
    const yArrow = padTop + 15;

    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2;
    ctx.setLineDash([5, 4]);
    ctx.beginPath();
    ctx.moveTo(x2, yArrow);
    ctx.lineTo(x5, yArrow);
    ctx.stroke();
    ctx.setLineDash([]);

    // Arrow heads
    ctx.fillStyle = '#f472b6';
    ctx.beginPath();
    ctx.moveTo(x5, yArrow);
    ctx.lineTo(x5 - 8, yArrow - 5);
    ctx.lineTo(x5 - 8, yArrow + 5);
    ctx.closePath();
    ctx.fill();

    ctx.beginPath();
    ctx.moveTo(x2, yArrow);
    ctx.lineTo(x2 + 8, yArrow - 5);
    ctx.lineTo(x2 + 8, yArrow + 5);
    ctx.closePath();
    ctx.fill();

    // Label for difference
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 13px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('a\u2085 - a\u2082 = 756', (x2 + x5) / 2, yArrow - 6);

    // Bracket for a2 + a3 + a4 = 252
    const x2left = padLeft + barGap + 1 * (barWidth + barGap);
    const x4right = padLeft + barGap + 3 * (barWidth + barGap) + barWidth;
    const yBracket = padTop + plotH + 38;

    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(x2left, yBracket - 5);
    ctx.lineTo(x2left, yBracket);
    ctx.lineTo(x4right, yBracket);
    ctx.lineTo(x4right, yBracket - 5);
    ctx.stroke();

    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 12px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('a\u2082 + a\u2083 + a\u2084 = 252', (x2left + x4right) / 2, yBracket + 16);

    // Legend for a1+a2 result
    const xA1 = padLeft + barGap + 0 * (barWidth + barGap);
    const xA2right = padLeft + barGap + 1 * (barWidth + barGap) + barWidth;

    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2;
    ctx.setLineDash([3, 3]);
    ctx.beginPath();
    ctx.moveTo(xA1, padTop + plotH + 38);
    ctx.lineTo(xA1, padTop + plotH + 43);
    ctx.lineTo(xA2right, padTop + plotH + 43);
    ctx.lineTo(xA2right, padTop + plotH + 38);
    ctx.stroke();
    ctx.setLineDash([]);

    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 12px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('a\u2081 + a\u2082 = 15', (xA1 + xA2right) / 2, padTop + plotH + 57);
  }

  draw();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Geometrijski niz - zbir prvog i drugog člana",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["geometrijski niz", "količnik niza", "razlika kubova", "sistem jednačina", "nizovi"]
}
BRAINSPARK_META-->