<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Iracionalna nejednačina</title>
<script type="text/info" id="logic-scratchpad">
Problem: sqrt(3x^2 + 11x - 4) < x + 1

We need three conditions simultaneously:

CONDITION 1: Expression under the square root must be non-negative.
3x^2 + 11x - 4 >= 0
Discriminant: D = 121 + 48 = 169, sqrt(D) = 13
Roots: x = (-11 + 13)/6 = 2/6 = 1/3  and  x = (-11 - 13)/6 = -24/6 = -4
Since a = 3 > 0, the parabola opens upward.
So 3x^2 + 11x - 4 >= 0 for x <= -4 or x >= 1/3
In interval notation: (-inf, -4] ∪ [1/3, +inf)

CONDITION 2: The right side must be positive (since sqrt is non-negative, if RHS <= 0 then we need sqrt = 0 and RHS = 0 for equality, but strict inequality means RHS must be > 0).
Actually more precisely: sqrt(...) >= 0 always, so if x + 1 <= 0 then the inequality sqrt(...) < x+1 cannot hold (non-negative < non-positive is impossible).
So we need: x + 1 > 0 => x > -1

CONDITION 3: When both sides are non-negative, we can square both sides:
3x^2 + 11x - 4 < (x + 1)^2
3x^2 + 11x - 4 < x^2 + 2x + 1
2x^2 + 9x - 5 < 0
Discriminant: D = 81 + 40 = 121, sqrt(D) = 11
Roots: x = (-9 + 11)/4 = 2/4 = 1/2  and  x = (-9 - 11)/4 = -20/4 = -5
Since a = 2 > 0, the parabola opens upward.
So 2x^2 + 9x - 5 < 0 for -5 < x < 1/2

INTERSECTION:
C1: x <= -4 or x >= 1/3
C2: x > -1
C3: -5 < x < 1/2

C1 ∩ C2: The part x <= -4 doesn't intersect with x > -1. The part x >= 1/3 intersects with x > -1 to give x >= 1/3.
So C1 ∩ C2 = [1/3, +inf)

(C1 ∩ C2) ∩ C3 = [1/3, +inf) ∩ (-5, 1/2) = [1/3, 1/2)

ANSWER: [1/3, 1/2) which is option E.

Verification:
- At x = 1/3: sqrt(3*(1/9) + 11*(1/3) - 4) = sqrt(1/3 + 11/3 - 4) = sqrt(12/3 - 4) = sqrt(4 - 4) = sqrt(0) = 0
  RHS = 1/3 + 1 = 4/3. So 0 < 4/3 ✓ (x = 1/3 is included)
- At x = 1/2: sqrt(3*(1/4) + 11*(1/2) - 4) = sqrt(3/4 + 11/2 - 4) = sqrt(3/4 + 22/4 - 16/4) = sqrt(9/4) = 3/2
  RHS = 1/2 + 1 = 3/2. So 3/2 < 3/2 is FALSE. (x = 1/2 is NOT included) ✓
- At x = 0.4 (= 2/5): sqrt(3*0.16 + 11*0.4 - 4) = sqrt(0.48 + 4.4 - 4) = sqrt(0.88) ≈ 0.938
  RHS = 0.4 + 1 = 1.4. So 0.938 < 1.4 ✓ (x = 2/5 is inside the interval)
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56,189,248,0.06);
  border: 1px solid rgba(56,189,248,0.12);
  border-radius: 10px;
  padding: 12px 18px;
  text-align: center;
  min-width: 100px;
  flex: 1;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.05rem;
  font-weight: 600;
}

.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 12px 0;
  overflow-x: auto;
}

.step-container {
  display: flex;
  gap: 16px;
  margin-bottom: 18px;
  padding: 16px;
  border-left: 3px solid transparent;
  border-radius: 8px;
  transition: all 0.2s;
  cursor: pointer;
}

.step-container:hover, .step-container.active {
  background: rgba(96,165,250,0.04);
  border-left-color: #4ade80;
}

.step-number {
  width: 32px;
  height: 32px;
  min-width: 32px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  color: #0f172a;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  margin-bottom: 8px;
}

.step-note {
  color: #94a3b8;
  font-size: 0.92rem;
  margin-top: 6px;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 8px 0;
}

details summary:hover {
  color: #93c5fd;
}

.checkpoint {
  background: rgba(52,211,153,0.08);
  border: 1px solid rgba(52,211,153,0.2);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 15px 0;
}

.checkpoint summary {
  color: #34d399;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(96,165,250,0.25);
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  text-align: center;
}

.insight-box .insight-label {
  color: #a78bfa;
  font-weight: 700;
  font-size: 0.95rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 10px;
}

.final-answer {
  background: rgba(52,211,153,0.1);
  border: 2px solid rgba(52,211,153,0.3);
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  text-align: center;
}

.final-answer .answer-text {
  color: #4ade80;
  font-size: 1.8rem;
  font-weight: 700;
  margin: 12px 0;
}

.final-answer .answer-label {
  color: #34d399;
  font-weight: 700;
  font-size: 1rem;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin-top: 16px;
}

.option-card {
  padding: 10px 18px;
  border-radius: 10px;
  border: 1px solid #334155;
  background: #1e293b;
  color: #94a3b8;
  font-size: 1rem;
  transition: all 0.2s;
}

.option-card.correct {
  border-color: #4ade80;
  background: rgba(52,211,153,0.12);
  color: #4ade80;
  font-weight: 700;
}

.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  position: relative;
  padding-left: 24px;
  margin-bottom: 12px;
  color: #e2e8f0;
}

.pitfall-list li::before {
  content: '!';
  position: absolute;
  left: 0;
  top: 2px;
  width: 18px;
  height: 18px;
  background: rgba(224,148,104,0.2);
  color: #e09468;
  font-size: 0.75rem;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
}

canvas {
  touch-action: none;
  display: block;
  margin: 0 auto;
  border-radius: 10px;
  max-width: 100%;
}

.canvas-hint {
  text-align: center;
  color: #94a3b8;
  font-size: 0.85rem;
  margin-top: 8px;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

.highlight-blue {
  color: #60a5fa;
  font-weight: 600;
}

.highlight-green {
  color: #4ade80;
  font-weight: 600;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.92rem;
  margin-top: 12px;
  padding: 12px;
  background: rgba(148,163,184,0.06);
  border-radius: 8px;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .given-grid { flex-direction: column; }
  .given-item { min-width: unset; }
  .step-container { flex-direction: column; gap: 8px; }
  .options-row { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Iracionalna nejednačina sa korenom</h1>
  <p class="subtitle">Rešavanje nejednačine koja sadrži kvadratni koren -- analiza uslova i presek skupova</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Tekst zadatka</h2>
    <p>Skup svih rešenja nejednačine:</p>
    <div class="math-block">
      \[ \sqrt{3x^2 + 11x - 4} < x + 1 \]
    </div>
    <p>je:</p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(\left[\dfrac{1}{3},\; \dfrac{2}{5}\right)\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(\left[\dfrac{2}{5},\; \dfrac{1}{2}\right)\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(\left[\dfrac{1}{6},\; \dfrac{1}{2}\right)\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(\left[\dfrac{1}{3},\; \dfrac{3}{5}\right)\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(\left[\dfrac{1}{3},\; \dfrac{1}{2}\right)\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan rešavanja</h2>
    <p>Postavićemo tri uslova koji moraju istovremeno da važe: podkorena funkcija mora biti nenegativna, desna strana mora biti pozitivna, i nakon kvadriranja obe strane dobijamo treću nejednačinu. Rešenje je <span class="highlight-blue">presek sva tri skupa</span>.</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Ključne formule i teoreme</summary>
      <div style="padding: 12px 0;">
        <ul style="list-style: disc; padding-left: 20px;">
          <li style="margin-bottom: 10px;">
            <strong>Iracionalna nejednačina oblika \(\sqrt{f(x)} < g(x)\)</strong> važi ako i samo ako su ispunjeni svi uslovi:
            <div class="math-block">
              \[ f(x) \geq 0, \quad g(x) > 0, \quad f(x) < [g(x)]^2 \]
            </div>
          </li>
          <li style="margin-bottom: 10px;">
            <strong>Kvadratna nejednačina:</strong> Za \(ax^2 + bx + c \geq 0\) sa \(a > 0\) i realnim korenima \(x_1, x_2\) (gde je \(x_1 < x_2\)), rešenje je \(x \leq x_1\) ili \(x \geq x_2\). Za \(< 0\), rešenje je \(x_1 < x < x_2\).
          </li>
          <li style="margin-bottom: 10px;">
            <strong>Kvadratna formula:</strong> \(x = \dfrac{-b \pm \sqrt{b^2 - 4ac}}{2a}\)
          </li>
          <li style="margin-bottom: 10px;">
            <strong>Presek skupova:</strong> Konačno rešenje je presek svih pojedinačnih uslova.
          </li>
        </ul>
      </div>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <h2>Grafički prikaz</h2>
    <canvas id="mainCanvas" width="800" height="500"></canvas>
    <p class="canvas-hint">Grafik prikazuje funkcije \(y = \sqrt{3x^2 + 11x - 4}\) (plava) i \(y = x + 1\) (zelena). Oblast rešenja je označena.</p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container" id="step1">
      <div class="step-number">1</div>
      <div class="step-content">
        <h3>Postavljamo uslove</h3>
        <p>Nejednačina oblika \(\sqrt{f(x)} < g(x)\) važi kada su ispunjena <span class="highlight-pink">sva tri uslova</span> istovremeno:</p>
        <div class="math-block">
          \[ \text{(U1)}\quad 3x^2 + 11x - 4 \geq 0 \]
          \[ \text{(U2)}\quad x + 1 > 0 \]
          \[ \text{(U3)}\quad 3x^2 + 11x - 4 < (x+1)^2 \]
        </div>
        <p class="step-note">Uslov U2 zahteva da desna strana bude strogo pozitivna jer je leva strana (koren) uvek nenegativna.</p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container" id="step2">
      <div class="step-number">2</div>
      <div class="step-content">
        <h3>Uslov U1: \(3x^2 + 11x - 4 \geq 0\)</h3>
        <p>Rešavamo kvadratnu jednačinu \(3x^2 + 11x - 4 = 0\):</p>
        <div class="math-block">
          \[ D = 11^2 - 4 \cdot 3 \cdot (-4) = 121 + 48 = 169 \]
          \[ \sqrt{D} = 13 \]
        </div>
        <div class="math-block">
          \[ x_1 = \frac{-11 + 13}{6} = \frac{2}{6} = \frac{1}{3} \]
          \[ x_2 = \frac{-11 - 13}{6} = \frac{-24}{6} = -4 \]
        </div>
        <p>Pošto je \(a = 3 > 0\), parabola je otvorena nagore. Izraz je nenegativan za:</p>
        <div class="math-block">
          \[ \text{U1:} \quad x \in (-\infty,\; -4\,] \cup [\,\tfrac{1}{3},\; +\infty) \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri se: Koliko iznosi diskriminanta jednačine \(3x^2 + 11x - 4 = 0\)?</summary>
      <p style="padding: 8px 0; color: #4ade80;"><strong>D = 169</strong>, a njeni koreni su \(x = \frac{1}{3}\) i \(x = -4\).</p>
    </details>

    <!-- Step 3 -->
    <div class="step-container" id="step3">
      <div class="step-number">3</div>
      <div class="step-content">
        <h3>Uslov U2: \(x + 1 > 0\)</h3>
        <p>Ovo je jednostavan uslov:</p>
        <div class="math-block">
          \[ x + 1 > 0 \implies x > -1 \]
          \[ \text{U2:} \quad x \in (-1,\; +\infty) \]
        </div>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step-container" id="step4">
      <div class="step-number">4</div>
      <div class="step-content">
        <h3>Uslov U3: Kvadriranje obe strane</h3>
        <p>Kvadriramo nejednačinu (dozvoljeno jer su obe strane nenegativne na osnovu U1 i U2):</p>
        <div class="math-block">
          \[ 3x^2 + 11x - 4 < (x+1)^2 \]
          \[ 3x^2 + 11x - 4 < x^2 + 2x + 1 \]
        </div>
        <p>Prenosimo sve na levu stranu:</p>
        <div class="math-block">
          \[ 2x^2 + 9x - 5 < 0 \]
        </div>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step-container" id="step5">
      <div class="step-number">5</div>
      <div class="step-content">
        <h3>Rešavanje \(2x^2 + 9x - 5 < 0\)</h3>
        <p>Nalazimo nule:</p>
        <div class="math-block">
          \[ D = 9^2 - 4 \cdot 2 \cdot (-5) = 81 + 40 = 121 \]
          \[ \sqrt{D} = 11 \]
        </div>
        <div class="math-block">
          \[ x_1 = \frac{-9 + 11}{4} = \frac{2}{4} = \frac{1}{2} \]
          \[ x_2 = \frac{-9 - 11}{4} = \frac{-20}{4} = -5 \]
        </div>
        <p>Pošto je \(a = 2 > 0\), parabola je otvorena nagore. Izraz je negativan <span class="highlight-blue">između korena</span>:</p>
        <div class="math-block">
          \[ \text{U3:} \quad x \in (-5,\; \tfrac{1}{2}) \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri se: Koji su koreni jednačine \(2x^2 + 9x - 5 = 0\)?</summary>
      <p style="padding: 8px 0; color: #4ade80;"><strong>\(x_1 = \frac{1}{2}\) i \(x_2 = -5\)</strong>. Negativan je izraz za \(x \in (-5,\; \frac{1}{2})\).</p>
    </details>

    <!-- Step 6 -->
    <div class="step-container" id="step6">
      <div class="step-number">6</div>
      <div class="step-content">
        <h3>Presek sva tri uslova</h3>
        <p>Tražimo presek skupova U1, U2 i U3:</p>
        <div class="math-block">
          \[ \text{U1:} \quad (-\infty, -4\,] \cup [\,\tfrac{1}{3}, +\infty) \]
          \[ \text{U2:} \quad (-1, +\infty) \]
          \[ \text{U3:} \quad (-5, \tfrac{1}{2}) \]
        </div>
        <p><strong>Korak 6a:</strong> Presek U1 i U2: Deo \(x \leq -4\) ne seče \(x > -1\), pa ostaje samo \(x \geq \frac{1}{3}\).</p>
        <div class="math-block">
          \[ \text{U1} \cap \text{U2} = \left[\tfrac{1}{3},\; +\infty\right) \]
        </div>
        <p><strong>Korak 6b:</strong> Presečemo sa U3:</p>
        <div class="math-block">
          \[ \left[\tfrac{1}{3},\; +\infty\right) \cap \left(-5,\; \tfrac{1}{2}\right) = \left[\tfrac{1}{3},\; \tfrac{1}{2}\right) \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details class="checkpoint">
      <summary>Proveri se: Da li je \(x = \frac{1}{3}\) rešenje nejednačine?</summary>
      <p style="padding: 8px 0; color: #4ade80;"><strong>Da!</strong> Za \(x = \frac{1}{3}\): leva strana je \(\sqrt{0} = 0\), desna strana je \(\frac{1}{3} + 1 = \frac{4}{3}\). Važi \(0 < \frac{4}{3}\).</p>
    </details>

  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <div class="insight-label">Ključni uvid</div>
    <p>Nejednačina \(\sqrt{f(x)} < g(x)\) zahteva <span class="highlight-pink">tri simultana uslova</span>. Presek skupova U1, U2 i U3 daje konačno rešenje:</p>
    <div class="math-block" style="background: rgba(74,222,128,0.08); border-color: rgba(74,222,128,0.2); font-size: 1.2rem;">
      \[ x \in \left[\frac{1}{3},\; \frac{1}{2}\right) \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="final-answer">
    <div class="answer-label">Konačan odgovor</div>
    <div class="answer-text">\(\displaystyle \left[\frac{1}{3},\; \frac{1}{2}\right)\)</div>
    <div class="options-row">
      <div class="option-card">(A) \(\left[\frac{1}{3},\; \frac{2}{5}\right)\)</div>
      <div class="option-card">(B) \(\left[\frac{2}{5},\; \frac{1}{2}\right)\)</div>
      <div class="option-card">(C) \(\left[\frac{1}{6},\; \frac{1}{2}\right)\)</div>
      <div class="option-card">(D) \(\left[\frac{1}{3},\; \frac{3}{5}\right)\)</div>
      <div class="option-card correct">(E) \(\left[\frac{1}{3},\; \frac{1}{2}\right)\)</div>
    </div>
    <div class="verification-note">
      <strong>Provera:</strong> Za \(x = \frac{1}{3}\): \(\sqrt{0} = 0 < \frac{4}{3}\) -- važi (uključena leva granica). Za \(x = \frac{1}{2}\): \(\sqrt{\frac{9}{4}} = \frac{3}{2}\) i \(\frac{1}{2} + 1 = \frac{3}{2}\), pa \(\frac{3}{2} < \frac{3}{2}\) ne važi (isključena desna granica). Odgovor \(\left[\frac{1}{3},\; \frac{1}{2}\right)\) je tačan.
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Česte greške</h2>
    <ul class="pitfall-list">
      <li>Zaboravljanje uslova da desna strana mora biti strogo pozitivna (\(x + 1 > 0\)). Bez ovog uslova, moglo bi se pogrešno uključiti vrednosti gde je \(x \leq -1\).</li>
      <li>Kvadriranje nejednačine bez provere da su obe strane nenegativne. Kvadriranje je dozvoljeno samo kada su obe strane nenegativne, što obezbeđuju uslovi U1 i U2.</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card">
    <h2>Dodatni izazov</h2>
    <p>Reši nejednačinu: \(\sqrt{3x^2 + 11x - 4} > x + 1\). Kako se razlikuju uslovi u odnosu na polaznu nejednačinu?</p>
    <details>
      <summary>Pomoć</summary>
      <p style="padding: 8px 0;">Kod nejednačine sa znakom \(>\) razlikujemo dva slučaja: (1) kada je \(x + 1 \leq 0\), svaka vrednost iz domena je rešenje (koren je uvek \(\geq 0\)); (2) kada je \(x + 1 > 0\), kvadriramo i menjamo smer nejednačine. Konačan odgovor je unija ta dva slučaja.</p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('mainCanvas');
  const ctx = canvas.getContext('2d');

  function draw() {
    const W = canvas.width;
    const H = canvas.height;

    // Coordinate system setup
    const originX = W * 0.45;
    const originY = H * 0.75;
    const scaleX = 120;
    const scaleY = 60;

    const toCanvas = (x, y) => ({
      x: originX + x * scaleX,
      y: originY - y * scaleY
    });

    const fromCanvas = (cx, cy) => ({
      x: (cx - originX) / scaleX,
      y: (originY - cy) / scaleY
    });

    // Clear
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Grid lines
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (let gx = -5; gx <= 4; gx++) {
      const p = toCanvas(gx, 0);
      ctx.beginPath();
      ctx.moveTo(p.x, 0);
      ctx.lineTo(p.x, H);
      ctx.stroke();
    }
    for (let gy = -2; gy <= 8; gy++) {
      const p = toCanvas(0, gy);
      ctx.beginPath();
      ctx.moveTo(0, p.y);
      ctx.lineTo(W, p.y);
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 2;
    // X axis
    ctx.beginPath();
    ctx.moveTo(0, originY);
    ctx.lineTo(W, originY);
    ctx.stroke();
    // Y axis
    ctx.beginPath();
    ctx.moveTo(originX, 0);
    ctx.lineTo(originX, H);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    for (let gx = -4; gx <= 3; gx++) {
      if (gx === 0) continue;
      const p = toCanvas(gx, 0);
      ctx.fillText(gx.toString(), p.x, originY + 18);
    }
    ctx.textAlign = 'right';
    for (let gy = 1; gy <= 7; gy++) {
      const p = toCanvas(0, gy);
      ctx.fillText(gy.toString(), originX - 8, p.y + 4);
    }

    // Shade solution region [1/3, 1/2)
    ctx.fillStyle = 'rgba(74, 222, 128, 0.12)';
    const leftBound = toCanvas(1/3, 0);
    const rightBound = toCanvas(0.5, 0);
    ctx.fillRect(leftBound.x, 20, rightBound.x - leftBound.x, originY - 20);

    // Draw y = sqrt(3x^2 + 11x - 4) where defined
    // Domain: x <= -4 or x >= 1/3
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;

    // Right branch: x >= 1/3
    ctx.beginPath();
    let started = false;
    for (let px = 0; px < W; px++) {
      const coords = fromCanvas(px, 0);
      const x = coords.x;
      if (x < 1/3) continue;
      const val = 3*x*x + 11*x - 4;
      if (val < 0) continue;
      const y = Math.sqrt(val);
      const p = toCanvas(x, y);
      if (p.y < 0 || p.y > H) continue;
      if (!started) {
        ctx.moveTo(p.x, p.y);
        started = true;
      } else {
        ctx.lineTo(p.x, p.y);
      }
    }
    ctx.stroke();

    // Left branch: x <= -4
    ctx.beginPath();
    started = false;
    for (let px = 0; px < W; px++) {
      const coords = fromCanvas(px, 0);
      const x = coords.x;
      if (x > -4) continue;
      const val = 3*x*x + 11*x - 4;
      if (val < 0) continue;
      const y = Math.sqrt(val);
      const p = toCanvas(x, y);
      if (p.y < 0 || p.y > H) continue;
      if (!started) {
        ctx.moveTo(p.x, p.y);
        started = true;
      } else {
        ctx.lineTo(p.x, p.y);
      }
    }
    ctx.stroke();

    // Draw y = x + 1
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    const lineStart = toCanvas(-5, -5 + 1);
    const lineEnd = toCanvas(4, 4 + 1);
    ctx.moveTo(lineStart.x, lineStart.y);
    ctx.lineTo(lineEnd.x, lineEnd.y);
    ctx.stroke();

    // Mark x = 1/3 (left boundary, included)
    const p13 = toCanvas(1/3, 0);
    ctx.fillStyle = '#4ade80';
    ctx.beginPath();
    ctx.arc(p13.x, originY, 5, 0, 2 * Math.PI);
    ctx.fill();

    // Mark x = 1/2 (right boundary, excluded)
    const p12 = toCanvas(0.5, 0);
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.arc(p12.x, originY, 5, 0, 2 * Math.PI);
    ctx.stroke();

    // Intersection point at x = 1/2: y = 3/2
    const pIntersect = toCanvas(0.5, 1.5);
    ctx.fillStyle = '#f472b6';
    ctx.beginPath();
    ctx.arc(pIntersect.x, pIntersect.y, 5, 0, 2 * Math.PI);
    ctx.fill();

    // Point at x = 1/3 on the curve: y = 0, and on line: y = 4/3
    const pCurve13 = toCanvas(1/3, 0);
    const pLine13 = toCanvas(1/3, 4/3);

    // Vertical dashed line at x = 1/3
    ctx.setLineDash([5, 5]);
    ctx.strokeStyle = 'rgba(74, 222, 128, 0.4)';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(pCurve13.x, pCurve13.y);
    ctx.lineTo(pLine13.x, pLine13.y);
    ctx.stroke();

    // Vertical dashed line at x = 1/2
    ctx.strokeStyle = 'rgba(244, 114, 182, 0.4)';
    ctx.beginPath();
    ctx.moveTo(pIntersect.x, originY);
    ctx.lineTo(pIntersect.x, pIntersect.y);
    ctx.stroke();
    ctx.setLineDash([]);

    // Labels
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';

    ctx.fillStyle = '#4ade80';
    ctx.fillText('x = 1/3', p13.x, originY + 34);

    ctx.fillStyle = '#f472b6';
    ctx.fillText('x = 1/2', p12.x, originY + 34);

    ctx.fillStyle = '#f472b6';
    ctx.fillText('(1/2, 3/2)', pIntersect.x + 50, pIntersect.y - 8);

    // Legend
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    const legendX = W - 200;
    const legendY = 30;

    ctx.fillStyle = 'rgba(30, 41, 59, 0.85)';
    ctx.fillRect(legendX - 10, legendY - 5, 190, 80);
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.strokeRect(legendX - 10, legendY - 5, 190, 80);

    // Blue line
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(legendX, legendY + 12);
    ctx.lineTo(legendX + 30, legendY + 12);
    ctx.stroke();
    ctx.fillStyle = '#e2e8f0';
    ctx.textAlign = 'left';
    ctx.fillText('y = \u221A(3x\u00B2+11x\u22124)', legendX + 38, legendY + 16);

    // Green line
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(legendX, legendY + 38);
    ctx.lineTo(legendX + 30, legendY + 38);
    ctx.stroke();
    ctx.fillStyle = '#e2e8f0';
    ctx.fillText('y = x + 1', legendX + 38, legendY + 42);

    // Solution region
    ctx.fillStyle = 'rgba(74, 222, 128, 0.25)';
    ctx.fillRect(legendX, legendY + 54, 30, 12);
    ctx.fillStyle = '#e2e8f0';
    ctx.fillText('Oblast rešenja', legendX + 38, legendY + 65);
  }

  draw();

  // Click on steps
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(step => {
    step.addEventListener('click', function() {
      steps.forEach(s => s.classList.remove('active'));
      this.classList.add('active');
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Iracionalna nejednačina sa korenom",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["iracionalne nejednačine", "kvadratne nejednačine", "presek skupova", "domen funkcije"]
}
BRAINSPARK_META-->