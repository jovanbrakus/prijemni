<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Maksimalna zapremina piramide</title>
<script type="text/info" id="logic-scratchpad">
PROBLEM: Find the maximum volume of a right regular square pyramid with total surface area P.

GIVEN:
- Right regular square pyramid (base = square with side a)
- Slant height = l
- Height = h
- Total surface area = P

FORMULAS:
- Total surface area: P = a¬≤ + 4¬∑(1/2)¬∑a¬∑l = a¬≤ + 2al
- Height via Pythagorean theorem: h = sqrt(l¬≤ - (a/2)¬≤)
  (apothem of square base = a/2, distance from center to midpoint of side)
- Volume: V = (1/3)¬∑a¬≤¬∑h

SOLUTION:

Step 1: Express l in terms of a and P
From P = a¬≤ + 2al:
l = (P - a¬≤)/(2a)

Step 2: Express h in terms of a and P
h¬≤ = l¬≤ - a¬≤/4
   = (P - a¬≤)¬≤/(4a¬≤) - a¬≤/4
   = [(P - a¬≤)¬≤ - a‚Å¥]/(4a¬≤)
   = [P¬≤ - 2Pa¬≤ + a‚Å¥ - a‚Å¥]/(4a¬≤)
   = [P¬≤ - 2Pa¬≤]/(4a¬≤)
   = P(P - 2a¬≤)/(4a¬≤)

So h = sqrt(P(P - 2a¬≤))/(2a)

Constraint: P - 2a¬≤ > 0 ‚Üí a¬≤ < P/2

Step 3: Express V in terms of a only
V = (1/3)¬∑a¬≤¬∑h = (1/3)¬∑a¬≤¬∑sqrt(P(P - 2a¬≤))/(2a)
V = a¬∑sqrt(P(P - 2a¬≤))/6

Step 4: Maximize V
It is easier to maximize V¬≤.
V¬≤ = a¬≤¬∑P¬∑(P - 2a¬≤)/36

Let u = a¬≤. Then:
V¬≤ = P¬∑u¬∑(P - 2u)/36 = P¬∑(Pu - 2u¬≤)/36

Let f(u) = Pu - 2u¬≤, where 0 < u < P/2.
f'(u) = P - 4u = 0
u = P/4 ‚Üí a¬≤ = P/4

f''(u) = -4 < 0, so this is a maximum.

Step 5: Compute V_max
At u = a¬≤ = P/4:
V¬≤ = P¬∑(P¬∑P/4 - 2¬∑P¬≤/16)/36
   = P¬∑(P¬≤/4 - P¬≤/8)/36
   = P¬∑(P¬≤/8)/36
   = P¬≥/288

V = sqrt(P¬≥/288) = P^(3/2)/(12¬∑sqrt(2)) = P¬∑sqrt(P)/(12¬∑sqrt(2))

ANSWER: B) P‚àöP/(12‚àö2)

VERIFICATION:
At a¬≤ = P/4:
- a = ‚àöP/2
- l = (P - P/4)/(2¬∑‚àöP/2) = (3P/4)/(‚àöP) = 3‚àöP/4
- h¬≤ = (3‚àöP/4)¬≤ - (‚àöP/2)¬≤/4... wait, let me redo:
  h¬≤ = l¬≤ - (a/2)¬≤ = 9P/16 - P/16 = 8P/16 = P/2
  h = ‚àö(P/2)
- V = (1/3)¬∑(P/4)¬∑‚àö(P/2) = P‚àö(P/2)/12 = P¬∑‚àöP/(12‚àö2) ‚úì

Also check: surface area
P_check = a¬≤ + 2al = P/4 + 2¬∑(‚àöP/2)¬∑(3‚àöP/4) = P/4 + 3P/4 = P ‚úì
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 10px;
}

h1 {
  font-size: 2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 28px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 22px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.35rem;
  margin-bottom: 14px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.1rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 14px;
}

.given-item {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 12px 16px;
  min-width: 100px;
  text-align: center;
  flex: 1;
  min-width: 120px;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1rem;
  font-weight: 600;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card p {
  color: #e2e8f0;
  font-size: 1rem;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  font-size: 1.05rem;
  padding: 8px 0;
}

details summary:hover {
  color: #93c5fd;
}

details .theory-content {
  padding: 14px 0;
}

details .theory-content ul {
  list-style: none;
  padding-left: 10px;
}

details .theory-content li {
  margin-bottom: 10px;
  padding-left: 20px;
  position: relative;
}

details .theory-content li::before {
  content: '‚ñ∏';
  position: absolute;
  left: 0;
  color: #a78bfa;
}

.step {
  display: flex;
  gap: 16px;
  margin-bottom: 18px;
  padding: 14px;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.2s;
  border-left: 3px solid transparent;
}

.step:hover, .step.active {
  background: rgba(96,165,250,0.05);
  border-left-color: #4ade80;
}

.step-number {
  width: 32px;
  height: 32px;
  min-width: 32px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  color: #0f172a;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  font-size: 1.05rem;
  margin-bottom: 8px;
  color: #e2e8f0;
}

.step-content p {
  margin-bottom: 8px;
  color: #cbd5e1;
}

.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 10px 0;
  overflow-x: auto;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 6px;
}

.checkpoint {
  background: rgba(167,139,250,0.08);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 15px 0;
}

.checkpoint summary {
  color: #a78bfa;
  font-size: 0.95rem;
}

.checkpoint .answer {
  padding-top: 10px;
  color: #4ade80;
  font-weight: 600;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.15), rgba(167,139,250,0.15));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 14px;
  padding: 24px;
  text-align: center;
  margin-bottom: 24px;
}

.insight-box h2 {
  color: #a78bfa;
  margin-bottom: 12px;
}

.final-answer-box {
  background: linear-gradient(135deg, rgba(52,211,153,0.1), rgba(74,222,128,0.1));
  border: 2px solid rgba(52,211,153,0.3);
  border-radius: 14px;
  padding: 26px;
  text-align: center;
  margin-bottom: 24px;
}

.final-answer-box h2 {
  color: #4ade80;
  margin-bottom: 14px;
}

.final-answer-text {
  font-size: 1.5rem;
  color: #4ade80;
  font-weight: 700;
  margin: 14px 0;
}

.answer-options-final {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin: 16px 0;
}

.answer-opt {
  padding: 10px 18px;
  border-radius: 10px;
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  color: #94a3b8;
  font-size: 1rem;
}

.answer-opt.correct {
  background: rgba(52,211,153,0.15);
  border-color: #4ade80;
  color: #4ade80;
  font-weight: 700;
}

.verification-note {
  margin-top: 14px;
  padding: 14px;
  background: rgba(52,211,153,0.06);
  border-radius: 8px;
  color: #94a3b8;
  font-size: 0.95rem;
  text-align: left;
}

.pitfalls ul {
  list-style: none;
  padding-left: 10px;
}

.pitfalls li {
  margin-bottom: 10px;
  padding-left: 24px;
  position: relative;
  color: #cbd5e1;
}

.pitfalls li::before {
  content: '‚ö†';
  position: absolute;
  left: 0;
}

.challenge-card {
  border-left: 3px solid #f472b6;
}

canvas {
  display: block;
  margin: 0 auto;
  max-width: 100%;
  touch-action: none;
}

.canvas-hint {
  text-align: center;
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

@media (max-width: 700px) {
  h1 { font-size: 1.5rem; }
  .card { padding: 16px; }
  .given-item { min-width: 90px; }
  .step { flex-direction: column; gap: 8px; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Maksimalna zapremina prave pravilne ƒçetvorostrane piramide</h1>
  <p class="subtitle">Optimizacija zapremine tela pri datoj povr≈°ini -- primena diferencijalnog raƒçuna</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Maksimalna zapremina prave pravilne ƒçetvorostrane piramide povr≈°ine \(P\) iznosi:</p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(\dfrac{P\sqrt{P}}{12\sqrt{3}}\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(\dfrac{P\sqrt{P}}{12\sqrt{2}}\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(\dfrac{P\sqrt{P}}{16}\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(\dfrac{P\sqrt{P}}{18}\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(\dfrac{P\sqrt{P}}{12}\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan re≈°avanja</h2>
    <p>Izraziƒáemo zapreminu piramide kao funkciju jedne promenljive (stranice osnove \(a\)), koristeƒái uslov da je ukupna povr≈°ina jednaka \(P\). Zatim ƒáemo naƒái maksimum te funkcije pomoƒáu izvoda.</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>üìê Kljuƒçne formule i teoreme</summary>
      <div class="theory-content">
        <ul>
          <li><strong>Povr≈°ina prave pravilne ƒçetvorostrane piramide:</strong> \( P = a^2 + 2al \), gde je \(a\) stranica kvadratne osnove, a \(l\) je apotema boƒçne strane (boƒçna visina).</li>
          <li><strong>Visina piramide:</strong> Za kvadratnu osnovu, rastojanje od centra osnove do sredine stranice (apotema osnove) iznosi \(\frac{a}{2}\). Prema Pitagorinoj teoremi: \( h = \sqrt{l^2 - \frac{a^2}{4}} \).</li>
          <li><strong>Zapremina piramide:</strong> \( V = \frac{1}{3} \cdot a^2 \cdot h \)</li>
          <li><strong>Uslov za ekstremum:</strong> Ako je \(f'(x_0) = 0\) i \(f''(x_0) < 0\), tada funkcija \(f\) ima lokalni maksimum u taƒçki \(x_0\).</li>
        </ul>
        <canvas id="theoryCanvas" width="400" height="280"></canvas>
      </div>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <h2>Dijagram piramide</h2>
    <canvas id="pyramidCanvas" width="600" height="420"></canvas>
    <p class="canvas-hint">Pomeranje klizaƒça menja odnos stranice osnove i visine pri konstantnoj povr≈°ini</p>
    <div style="display:flex;align-items:center;justify-content:center;gap:12px;margin-top:14px;">
      <span style="color:#94a3b8;font-size:0.9rem;">a manje</span>
      <input type="range" id="aSlider" min="5" max="95" value="50" style="width:200px;accent-color:#60a5fa;">
      <span style="color:#94a3b8;font-size:0.9rem;">a veƒáe</span>
    </div>
    <p id="sliderInfo" style="text-align:center;color:#94a3b8;font-size:0.9rem;margin-top:8px;"></p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Re≈°enje korak po korak</h2>

    <div class="step" id="step1">
      <div class="step-number">1</div>
      <div class="step-content">
        <h3>Defini≈°imo veliƒçine piramide</h3>
        <p>Neka je \(a\) stranica kvadratne osnove, \(l\) apotema boƒçne strane (nagibna visina), a \(h\) visina piramide.</p>
        <p>Ukupna povr≈°ina piramide je zbir povr≈°ine osnove i ƒçetiri jednakokrake trougaone strane:</p>
        <div class="math-block">
          \[ P = a^2 + 4 \cdot \frac{1}{2} \cdot a \cdot l = a^2 + 2al \]
        </div>
      </div>
    </div>

    <div class="step" id="step2">
      <div class="step-number">2</div>
      <div class="step-content">
        <h3>Izrazimo \(l\) pomoƒáu \(a\) i \(P\)</h3>
        <p>Iz formule za povr≈°inu izrazimo apotemu:</p>
        <div class="math-block">
          \[ 2al = P - a^2 \]
          \[ l = \frac{P - a^2}{2a} \]
        </div>
        <p class="note">Uslov: \(P - a^2 > 0\), tj. \(a^2 < P\), kako bi \(l\) bilo pozitivno.</p>
      </div>
    </div>

    <div class="step" id="step3">
      <div class="step-number">3</div>
      <div class="step-content">
        <h3>Izrazimo visinu \(h\)</h3>
        <p>Apotema osnove (rastojanje od centra kvadrata do sredine stranice) iznosi \(\frac{a}{2}\). Iz Pitagorine teoreme u pravouglom trouglu sa hipotenuzom \(l\):</p>
        <div class="math-block">
          \[ h^2 = l^2 - \left(\frac{a}{2}\right)^2 = l^2 - \frac{a^2}{4} \]
        </div>
        <p>Uvr≈°tavamo izraz za \(l\):</p>
        <div class="math-block">
          \[ h^2 = \frac{(P - a^2)^2}{4a^2} - \frac{a^2}{4} = \frac{(P - a^2)^2 - a^4}{4a^2} \]
        </div>
      </div>
    </div>

    <div class="step" id="step4">
      <div class="step-number">4</div>
      <div class="step-content">
        <h3>Pojednostavimo izraz za \(h^2\)</h3>
        <p>Razvijaƒáemo brojilac:</p>
        <div class="math-block">
          \[ (P - a^2)^2 - a^4 = P^2 - 2Pa^2 + a^4 - a^4 = P^2 - 2Pa^2 \]
        </div>
        <p>Izvlaƒçimo zajedniƒçki faktor:</p>
        <div class="math-block">
          \[ h^2 = \frac{P(P - 2a^2)}{4a^2} \]
        </div>
        <p class="note">Dodatni uslov: \(P - 2a^2 > 0\), tj. \(a^2 < \frac{P}{2}\), kako bi \(h\) bilo realno.</p>
      </div>
    </div>

    <details class="checkpoint">
      <summary>üîç Proveri se: Koliko iznosi \(h\)?</summary>
      <div class="answer">
        \[ h = \frac{\sqrt{P(P - 2a^2)}}{2a} \]
      </div>
    </details>

    <div class="step" id="step5">
      <div class="step-number">5</div>
      <div class="step-content">
        <h3>Zapremina kao funkcija od \(a\)</h3>
        <p>Uvr≈°tavamo u formulu za zapreminu:</p>
        <div class="math-block">
          \[ V = \frac{1}{3} \cdot a^2 \cdot h = \frac{1}{3} \cdot a^2 \cdot \frac{\sqrt{P(P - 2a^2)}}{2a} \]
        </div>
        <p>Skraƒáujemo:</p>
        <div class="math-block">
          \[ V = \frac{a}{6} \sqrt{P(P - 2a^2)} \]
        </div>
      </div>
    </div>

    <div class="step" id="step6">
      <div class="step-number">6</div>
      <div class="step-content">
        <h3>Smena za lak≈°u optimizaciju</h3>
        <p>Umesto da tra≈æimo maksimum od \(V\), tra≈æiƒáemo maksimum od \(V^2\) (isti argument daje isto re≈°enje):</p>
        <div class="math-block">
          \[ V^2 = \frac{a^2 \cdot P \cdot (P - 2a^2)}{36} \]
        </div>
        <p>Uvodimo smenu \(u = a^2\), pa je:</p>
        <div class="math-block">
          \[ V^2 = \frac{P \cdot u \cdot (P - 2u)}{36} = \frac{P(Pu - 2u^2)}{36} \]
        </div>
        <p class="note">Domen: \(0 < u < \frac{P}{2}\).</p>
      </div>
    </div>

    <div class="step" id="step7">
      <div class="step-number">7</div>
      <div class="step-content">
        <h3>Nala≈æenje ekstrema</h3>
        <p>Defini≈°emo \(f(u) = Pu - 2u^2\) i tra≈æimo nulu prvog izvoda:</p>
        <div class="math-block">
          \[ f'(u) = P - 4u = 0 \]
          \[ u = \frac{P}{4} \quad \Rightarrow \quad a^2 = \frac{P}{4} \]
        </div>
        <p>Proveravamo da je ovo maksimum:</p>
        <div class="math-block">
          \[ f''(u) = -4 < 0 \quad \checkmark \]
        </div>
        <p class="note">Drugi izvod je negativan, dakle u pitanju je zaista maksimum.</p>
      </div>
    </div>

    <details class="checkpoint">
      <summary>üîç Proveri se: Koliko iznosi \(a\) na maksimumu?</summary>
      <div class="answer">
        \( a = \frac{\sqrt{P}}{2} \), jer \(a^2 = \frac{P}{4}\).
      </div>
    </details>

    <div class="step" id="step8">
      <div class="step-number">8</div>
      <div class="step-content">
        <h3>Izraƒçunavanje maksimalne zapremine</h3>
        <p>Za \(u = \frac{P}{4}\):</p>
        <div class="math-block">
          \[ V^2 = \frac{P \cdot \frac{P}{4} \cdot \left(P - 2 \cdot \frac{P}{4}\right)}{36} = \frac{P \cdot \frac{P}{4} \cdot \frac{P}{2}}{36} = \frac{P^3}{8 \cdot 36} = \frac{P^3}{288} \]
        </div>
        <p>Korenujemo:</p>
        <div class="math-block">
          \[ V = \sqrt{\frac{P^3}{288}} = \frac{P\sqrt{P}}{\sqrt{288}} = \frac{P\sqrt{P}}{12\sqrt{2}} \]
        </div>
        <p class="note">Koristimo \(\sqrt{288} = \sqrt{144 \cdot 2} = 12\sqrt{2}\).</p>
      </div>
    </div>

    <details class="checkpoint">
      <summary>üîç Proveri se: Da li se povr≈°ina zaista poklapa?</summary>
      <div class="answer">
        Za \(a = \frac{\sqrt{P}}{2}\) i \(l = \frac{3\sqrt{P}}{4}\):
        \[ P_{\text{prov.}} = a^2 + 2al = \frac{P}{4} + 2 \cdot \frac{\sqrt{P}}{2} \cdot \frac{3\sqrt{P}}{4} = \frac{P}{4} + \frac{3P}{4} = P \quad \checkmark \]
      </div>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Kljuƒçni uvid</h2>
    <p style="color:#cbd5e1;margin-bottom:12px;">Kada ukupna povr≈°ina piramide iznosi \(P\), optimalna stranica osnove je \(a = \frac{\sqrt{P}}{2}\), ≈°to znaƒçi da osnova zauzima taƒçno ƒçetvrtinu ukupne povr≈°ine \(\left(a^2 = \frac{P}{4}\right)\).</p>
    <div class="math-block" style="display:inline-block;">
      \[ V_{\max} = \frac{P\sqrt{P}}{12\sqrt{2}} \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <h2>Konaƒçan odgovor</h2>
    <div class="final-answer-text">\(\displaystyle V_{\max} = \frac{P\sqrt{P}}{12\sqrt{2}}\)</div>
    <div class="answer-options-final">
      <div class="answer-opt">(A) \(\frac{P\sqrt{P}}{12\sqrt{3}}\)</div>
      <div class="answer-opt correct">(B) \(\frac{P\sqrt{P}}{12\sqrt{2}}\)</div>
      <div class="answer-opt">(C) \(\frac{P\sqrt{P}}{16}\)</div>
      <div class="answer-opt">(D) \(\frac{P\sqrt{P}}{18}\)</div>
      <div class="answer-opt">(E) \(\frac{P\sqrt{P}}{12}\)</div>
    </div>
    <div class="verification-note">
      <strong>Provera:</strong> Za \(a^2 = \frac{P}{4}\) dobijamo \(l = \frac{3\sqrt{P}}{4}\) i \(h = \sqrt{\frac{P}{2}}\). Povr≈°ina: \(\frac{P}{4} + 2 \cdot \frac{\sqrt{P}}{2} \cdot \frac{3\sqrt{P}}{4} = \frac{P}{4} + \frac{3P}{4} = P\). Zapremina: \(\frac{1}{3} \cdot \frac{P}{4} \cdot \sqrt{\frac{P}{2}} = \frac{P}{12} \cdot \frac{\sqrt{P}}{\sqrt{2}} = \frac{P\sqrt{P}}{12\sqrt{2}}\). Sve se poklapa.
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfalls">
    <h2>ƒåeste gre≈°ke</h2>
    <ul>
      <li><strong>Pogre≈°na apotema osnove:</strong> Za kvadratnu osnovu, apotema (rastojanje od centra do sredine stranice) iznosi \(\frac{a}{2}\), a NE \(\frac{a\sqrt{2}}{2}\). Rastojanje \(\frac{a\sqrt{2}}{2}\) je polupreƒçnik opisanog kruga (od centra do temena), ne apotema.</li>
      <li><strong>Zaboravljen uslov \(P > 2a^2\):</strong> Potrebno je da visina bude realna, ≈°to zahteva \(a^2 < \frac{P}{2}\). Optimum \(a^2 = \frac{P}{4}\) zadovoljava ovaj uslov.</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Kolika je maksimalna zapremina prave pravilne <em>trougaone</em> piramide (sa jednakostraniƒçnim trouglom u osnovi) ako joj je ukupna povr≈°ina jednaka \(P\)?</p>
    <details>
      <summary>Pogledaj nagove≈°taj</summary>
      <p style="padding-top:10px;color:#cbd5e1;">Povr≈°ina jednakostraniƒçnog trougla stranice \(a\) je \(\frac{a^2\sqrt{3}}{4}\). Ukupna povr≈°ina: \(P = \frac{a^2\sqrt{3}}{4} + 3 \cdot \frac{1}{2} \cdot a \cdot l\). Apotema osnove jednakostraniƒçnog trougla je \(\frac{a}{2\sqrt{3}}\). Koristi isti postupak: izrazi \(V\) kao funkciju od \(a\) i naƒëi ekstremum.</p>
    </details>
  </div>

</div>

<script>
(() => {
  // Theory canvas - simple pyramid diagram
  const tc = document.getElementById('theoryCanvas');
  if (tc) {
    const ctx = tc.getContext('2d');
    const W = tc.width, H = tc.height;

    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Draw a simple labeled right triangle showing l, h, a/2
    const cx = W / 2, baseY = H - 40;
    const triH = 160;
    const halfBase = 80;

    // Triangle: apex at top, base from (cx-halfBase, baseY) to (cx+halfBase, baseY) - but this is the cross-section
    // Actually draw: the cross-section triangle showing h, a/2, l
    const leftX = cx - halfBase;
    const rightX = cx + halfBase;
    const apexX = cx;
    const apexY = baseY - triH;

    // Fill triangle
    ctx.beginPath();
    ctx.moveTo(apexX, apexY);
    ctx.lineTo(rightX, baseY);
    ctx.lineTo(leftX, baseY);
    ctx.closePath();
    ctx.fillStyle = 'rgba(96,165,250,0.1)';
    ctx.fill();
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Height (dashed)
    ctx.setLineDash([6, 4]);
    ctx.strokeStyle = '#4ade80';
    ctx.beginPath();
    ctx.moveTo(apexX, apexY);
    ctx.lineTo(apexX, baseY);
    ctx.stroke();
    ctx.setLineDash([]);

    // Right angle marker
    const sq = 12;
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(apexX + sq, baseY);
    ctx.lineTo(apexX + sq, baseY - sq);
    ctx.lineTo(apexX, baseY - sq);
    ctx.stroke();

    // Labels
    ctx.font = 'bold 16px Segoe UI, sans-serif';
    ctx.textAlign = 'center';

    // h label
    ctx.fillStyle = '#4ade80';
    ctx.fillText('h', apexX - 18, apexY + triH / 2);

    // l label (slant)
    ctx.fillStyle = '#60a5fa';
    ctx.fillText('l', (apexX + rightX) / 2 + 14, (apexY + baseY) / 2);

    // a/2 label
    ctx.fillStyle = '#f472b6';
    ctx.fillText('a/2', (apexX + rightX) / 2, baseY + 22);

    // Title
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, sans-serif';
    ctx.fillText('Presek piramide: Pitagorina teorema', W / 2, 24);
    ctx.fillText('l\u00B2 = h\u00B2 + (a/2)\u00B2', W / 2, 44);
  }

  // Main pyramid canvas with slider
  const canvas = document.getElementById('pyramidCanvas');
  const slider = document.getElementById('aSlider');
  const info = document.getElementById('sliderInfo');

  if (canvas && slider) {
    const ctx = canvas.getContext('2d');
    const W = canvas.width, H = canvas.height;

    function drawPyramid(aRatio) {
      ctx.clearRect(0, 0, W, H);
      ctx.fillStyle = '#0f172a';
      ctx.fillRect(0, 0, W, H);

      // P is fixed conceptually; we parameterize by aRatio in (0.05, 0.95)
      // aRatio maps to a^2/P ratio from ~0.05 to ~0.49
      const uRatio = 0.05 + aRatio * 0.44; // u/P from 0.05 to 0.49
      const P_val = 1; // normalized
      const u = uRatio * P_val;
      const a = Math.sqrt(u);
      const lVal = (P_val - u) / (2 * a);
      const hSq = P_val * (P_val - 2 * u) / (4 * u);

      if (hSq <= 0) return;
      const hVal = Math.sqrt(hSq);
      const vol = (a / 6) * Math.sqrt(P_val * (P_val - 2 * u));

      // Optimal
      const optU = P_val / 4;
      const optA = Math.sqrt(optU);
      const optH = Math.sqrt(P_val / 2);
      const optVol = Math.sqrt(P_val * P_val * P_val / 288);

      // Scale for drawing
      const scale = 160;
      const cx = W / 2;
      const baseY = H - 80;

      // Draw base (parallelogram for 3D effect)
      const halfA = a * scale;
      const perspective = 0.35;
      const pyH = hVal * scale;

      // Limit drawing
      const maxHalf = 200;
      const drawHalf = Math.min(halfA, maxHalf);
      const drawH = Math.min(pyH, 280);
      const pOff = drawHalf * perspective;

      // Base corners (3D-ish)
      const bl = { x: cx - drawHalf, y: baseY };
      const br = { x: cx + drawHalf, y: baseY };
      const fl = { x: cx - drawHalf + pOff, y: baseY + pOff };
      const fr = { x: cx + drawHalf + pOff, y: baseY + pOff };
      const apex = { x: cx, y: baseY - drawH };

      // Back edges (dashed)
      ctx.setLineDash([5, 4]);
      ctx.strokeStyle = 'rgba(96,165,250,0.3)';
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.moveTo(bl.x, bl.y);
      ctx.lineTo(br.x, br.y);
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(bl.x, bl.y);
      ctx.lineTo(fl.x, fl.y);
      ctx.stroke();
      ctx.setLineDash([]);

      // Fill front face
      ctx.beginPath();
      ctx.moveTo(apex.x, apex.y);
      ctx.lineTo(fr.x, fr.y);
      ctx.lineTo(fl.x, fl.y);
      ctx.closePath();
      ctx.fillStyle = 'rgba(96,165,250,0.08)';
      ctx.fill();
      ctx.strokeStyle = '#60a5fa';
      ctx.lineWidth = 2;
      ctx.stroke();

      // Fill right face
      ctx.beginPath();
      ctx.moveTo(apex.x, apex.y);
      ctx.lineTo(fr.x, fr.y);
      ctx.lineTo(br.x, br.y);
      ctx.closePath();
      ctx.fillStyle = 'rgba(167,139,250,0.08)';
      ctx.fill();
      ctx.strokeStyle = '#a78bfa';
      ctx.lineWidth = 2;
      ctx.stroke();

      // Front base edge
      ctx.strokeStyle = '#60a5fa';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(fl.x, fl.y);
      ctx.lineTo(fr.x, fr.y);
      ctx.stroke();

      // Right base edge
      ctx.strokeStyle = '#a78bfa';
      ctx.beginPath();
      ctx.moveTo(br.x, br.y);
      ctx.lineTo(fr.x, fr.y);
      ctx.stroke();

      // Left face edge
      ctx.strokeStyle = '#60a5fa';
      ctx.beginPath();
      ctx.moveTo(apex.x, apex.y);
      ctx.lineTo(fl.x, fl.y);
      ctx.stroke();

      // Height line (dashed)
      const baseCenterX = cx + pOff / 2;
      const baseCenterY = baseY + pOff / 2;
      ctx.setLineDash([5, 4]);
      ctx.strokeStyle = '#4ade80';
      ctx.lineWidth = 1.5;
      ctx.beginPath();
      ctx.moveTo(apex.x, apex.y);
      ctx.lineTo(baseCenterX, baseCenterY);
      ctx.stroke();
      ctx.setLineDash([]);

      // Labels
      ctx.font = 'bold 14px Segoe UI, sans-serif';
      ctx.textAlign = 'center';

      // h label
      ctx.fillStyle = '#4ade80';
      ctx.fillText('h', baseCenterX - 20, (apex.y + baseCenterY) / 2);

      // a label
      ctx.fillStyle = '#60a5fa';
      ctx.fillText('a', (fl.x + fr.x) / 2, fl.y + 22);

      // Volume info
      const volPercent = (vol / optVol * 100).toFixed(1);
      const isOpt = Math.abs(uRatio - 0.25) < 0.01;

      ctx.font = 'bold 15px Segoe UI, sans-serif';
      ctx.fillStyle = isOpt ? '#4ade80' : '#e2e8f0';
      ctx.fillText('V/V_max = ' + volPercent + '%', cx, 30);

      if (isOpt) {
        ctx.fillStyle = '#4ade80';
        ctx.font = 'bold 13px Segoe UI, sans-serif';
        ctx.fillText('MAKSIMALNA ZAPREMINA!', cx, 52);
      }

      // Show a^2/P ratio
      ctx.font = '13px Segoe UI, sans-serif';
      ctx.fillStyle = '#94a3b8';
      ctx.fillText('a\u00B2/P = ' + uRatio.toFixed(3) + '  (optimum: 0,250)', cx, H - 15);

      // Optimal marker
      if (!isOpt) {
        ctx.fillStyle = 'rgba(52,211,153,0.3)';
        ctx.font = '12px Segoe UI, sans-serif';
        ctx.fillText('\u25B2 optimum', cx, H - 35);
      }

      // Update info text
      info.textContent = 'a\u00B2/P = ' + uRatio.toFixed(3).replace('.', ',') +
        ' | V/V_max = ' + volPercent.replace('.', ',') + '%' +
        (isOpt ? ' \u2014 optimum!' : '');
    }

    slider.addEventListener('input', function() {
      drawPyramid(this.value / 100);
    });

    drawPyramid(0.5);

    // Touch support for slider is native, but let's also handle canvas sizing
    function resizeCanvas() {
      const rect = canvas.parentElement.getBoundingClientRect();
      const displayW = Math.min(600, rect.width - 44);
      canvas.style.width = displayW + 'px';
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();
  }

  // Step click handlers
  document.querySelectorAll('.step').forEach(function(step) {
    step.addEventListener('click', function() {
      document.querySelectorAll('.step').forEach(function(s) {
        s.classList.remove('active');
      });
      step.classList.toggle('active');
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Maksimalna zapremina prave pravilne ƒçetvorostrane piramide",
  "subject": "math",
  "unit": "calculus",
  "topic_tags": ["optimizacija", "piramida", "zapremina", "povr≈°ina", "izvod", "ekstrem funkcije"]
}
BRAINSPARK_META-->