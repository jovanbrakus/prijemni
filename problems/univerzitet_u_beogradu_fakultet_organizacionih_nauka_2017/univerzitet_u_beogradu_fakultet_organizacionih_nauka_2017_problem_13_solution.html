<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kombinatorika -- izbor knjiga</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM:
Od 12 knjiga 4 su iz matematike. Broj različitih mogućnosti za kupovinu 3 knjige
tako da bar jedna bude iz matematike je:
A) 24   B) 164   C) 56   D) 984   E) 220

GIVEN:
- Total books: 12
- Math books: 4
- Non-math books: 12 - 4 = 8
- Choosing: 3 books
- Condition: at least 1 math book

APPROACH: Complement method.
Total ways to choose 3 books from 12, MINUS ways to choose 3 books with NO math books.

SOLUTION:

Step 1: Total ways to choose 3 from 12.
C(12,3) = 12! / (3! * 9!) = (12 * 11 * 10) / (3 * 2 * 1) = 1320 / 6 = 220

Step 2: Ways with NO math books (choose 3 from 8 non-math books).
C(8,3) = 8! / (3! * 5!) = (8 * 7 * 6) / (3 * 2 * 1) = 336 / 6 = 56

Step 3: Ways with at least 1 math book.
220 - 56 = 164

VERIFICATION with direct counting:
- Exactly 1 math book: C(4,1) * C(8,2) = 4 * 28 = 112
- Exactly 2 math books: C(4,2) * C(8,1) = 6 * 8 = 48
- Exactly 3 math books: C(4,3) * C(8,0) = 4 * 1 = 4
- Total: 112 + 48 + 4 = 164. Matches!

ANSWER: B) 164
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  text-align: center;
}

.subtitle {
  color: #94a3b8;
  text-align: center;
  font-size: 1.05rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.35rem;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.1rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(30, 41, 59, 0.8);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 90px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.05rem;
  font-weight: 600;
}

.answer-option {
  transition: none;
  cursor: default;
}

.plan-text {
  color: #e2e8f0;
  font-size: 1.02rem;
  line-height: 1.8;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 1.05rem;
  padding: 8px 0;
  user-select: none;
}

details summary:hover {
  color: #c4b5fd;
}

.theory-list {
  list-style: none;
  margin-top: 12px;
}

.theory-list li {
  padding: 10px 14px;
  margin-bottom: 8px;
  background: rgba(96, 165, 250, 0.06);
  border-left: 3px solid #60a5fa;
  border-radius: 0 8px 8px 0;
  color: #e2e8f0;
  line-height: 1.8;
}

.canvas-card {
  text-align: center;
}

.canvas-card canvas {
  border-radius: 10px;
  border: 1px solid #334155;
  max-width: 100%;
  touch-action: none;
}

.canvas-hint {
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

.step {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  padding: 16px;
  border-radius: 10px;
  cursor: pointer;
  transition: border-left 0.2s, background 0.2s;
  border-left: 3px solid transparent;
}

.step:hover, .step.active {
  border-left: 3px solid #4ade80;
  background: rgba(74, 222, 128, 0.04);
}

.step-badge {
  width: 32px;
  height: 32px;
  min-width: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  font-size: 1.05rem;
  margin-bottom: 8px;
  color: #e2e8f0;
}

.step-content p {
  color: #cbd5e1;
  margin-bottom: 8px;
  line-height: 1.7;
}

.math-block {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 10px 0;
  overflow-x: auto;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 6px;
}

.checkpoint {
  background: rgba(167, 139, 250, 0.08);
  border: 1px solid rgba(167, 139, 250, 0.2);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 15px 0;
}

.checkpoint summary {
  color: #a78bfa;
  font-size: 0.95rem;
}

.checkpoint .answer {
  margin-top: 10px;
  padding: 10px 14px;
  background: rgba(74, 222, 128, 0.08);
  border-radius: 8px;
  color: #4ade80;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167, 139, 250, 0.3);
  border-radius: 14px;
  padding: 24px;
  text-align: center;
  margin-bottom: 24px;
}

.insight-box h2 {
  justify-content: center;
  color: #a78bfa;
}

.insight-formula {
  font-size: 1.4rem;
  margin: 16px 0;
  color: #e2e8f0;
}

.final-answer-card {
  background: linear-gradient(135deg, rgba(52, 211, 153, 0.1), rgba(74, 222, 128, 0.1));
  border: 1px solid rgba(74, 222, 128, 0.3);
}

.final-answer-card h2 {
  color: #4ade80;
}

.final-answer-value {
  font-size: 1.8rem;
  font-weight: 800;
  color: #4ade80;
  text-align: center;
  margin: 16px 0;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 20px 0;
}

.final-option {
  padding: 10px 22px;
  border-radius: 10px;
  border: 1px solid #334155;
  background: #1e293b;
  color: #94a3b8;
  font-size: 1rem;
}

.final-option.correct {
  border-color: #4ade80;
  background: rgba(74, 222, 128, 0.12);
  color: #4ade80;
  font-weight: 700;
}

.verification {
  background: rgba(96, 165, 250, 0.06);
  border-radius: 10px;
  padding: 14px 18px;
  margin-top: 14px;
  color: #94a3b8;
  font-size: 0.95rem;
  line-height: 1.7;
}

.pitfalls-list {
  list-style: none;
}

.pitfalls-list li {
  padding: 10px 14px;
  margin-bottom: 8px;
  background: rgba(224, 148, 104, 0.06);
  border-left: 3px solid #e09468;
  border-radius: 0 8px 8px 0;
  color: #cbd5e1;
  line-height: 1.7;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

.highlight-blue {
  color: #60a5fa;
  font-weight: 600;
}

.highlight-green {
  color: #4ade80;
  font-weight: 600;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step { flex-direction: column; gap: 10px; }
  .given-grid { flex-direction: column; }
  .final-options { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>

<div class="container">

  <h1>Kombinatorika -- izbor knjiga</h1>
  <p class="subtitle">Kombinatorika -- binomni koeficijenti, metod komplementa</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Tekst zadatka</h2>
    <p>
      Od <span class="highlight-blue">12</span> knjiga <span class="highlight-pink">4</span> su iz matematike.
      Broj različitih mogućnosti za kupovinu <span class="highlight-blue">3</span> knjige tako da
      <span class="highlight-pink">bar jedna</span> bude iz matematike je:
    </p>

    <div class="given-grid" style="margin-bottom: 8px;">
      <div class="given-item">
        <div class="label">Ukupno knjiga</div>
        <div class="value">\(12\)</div>
      </div>
      <div class="given-item">
        <div class="label">Knjige iz matematike</div>
        <div class="value">\(4\)</div>
      </div>
      <div class="given-item">
        <div class="label">Ostale knjige</div>
        <div class="value">\(8\)</div>
      </div>
      <div class="given-item">
        <div class="label">Biramo</div>
        <div class="value">\(3\) knjige</div>
      </div>
      <div class="given-item">
        <div class="label">Uslov</div>
        <div class="value">bar 1 iz matematike</div>
      </div>
    </div>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(24\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(164\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(56\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(984\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(220\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <h2>Plan rešavanja</h2>
    <p class="plan-text">
      Koristićemo <strong>metod komplementa</strong>: od ukupnog broja načina da izaberemo 3 knjige od 12
      oduzećemo broj načina da nijedna od izabranih knjiga nije iz matematike. To je mnogo jednostavnije
      nego direktno brojanje slučajeva sa tačno 1, tačno 2 ili tačno 3 knjige iz matematike.
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Ključne formule i teoreme</summary>
      <ul class="theory-list">
        <li>
          <strong>Binomni koeficijent (kombinacije bez ponavljanja)</strong> &mdash; broj načina da se
          izabere \(k\) elemenata iz skupa od \(n\) elemenata, bez obzira na redosled:
          \[ \binom{n}{k} = \frac{n!}{k!\,(n-k)!} \]
        </li>
        <li>
          <strong>Metod komplementa</strong> &mdash; umesto da direktno brojimo slučajeve koji zadovoljavaju
          uslov „bar jedan", koristimo formulu:
          \[ N(\text{bar jedan}) = N(\text{ukupno}) - N(\text{nijedan}) \]
          Ovo je korisno kad je „nijedan" mnogo lakše izbrojati nego „bar jedan".
        </li>
        <li>
          <strong>Pravilo proizvoda</strong> &mdash; ako prvu grupu biramo na \(m\) načina, a drugu na \(n\)
          načina (nezavisno), ukupno ima \(m \cdot n\) načina.
        </li>
      </ul>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card canvas-card">
    <h2>Vizuelni prikaz</h2>
    <canvas id="mainCanvas" width="850" height="520"></canvas>
    <p class="canvas-hint">Šema izbora: ukupan broj kombinacija minus izbor bez knjiga iz matematike</p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <div class="step" tabindex="0">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Identifikujemo grupe knjiga</h3>
        <p>Imamo ukupno <span class="highlight-blue">12</span> knjiga, od kojih su:</p>
        <div class="math-block">
          \[ \text{Knjige iz matematike: } 4 \]
          \[ \text{Ostale knjige: } 12 - 4 = 8 \]
        </div>
        <p>Biramo <span class="highlight-blue">3</span> knjige, i želimo da <span class="highlight-pink">bar jedna</span> bude iz matematike.</p>
      </div>
    </div>

    <div class="step" tabindex="0">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Ukupan broj načina da izaberemo 3 od 12 knjiga</h3>
        <p>Bez ikakvih ograničenja, biramo 3 knjige od 12:</p>
        <div class="math-block">
          \[ \binom{12}{3} = \frac{12!}{3! \cdot 9!} = \frac{12 \cdot 11 \cdot 10}{3 \cdot 2 \cdot 1} \]
        </div>
        <p>Izračunajmo korak po korak:</p>
        <div class="math-block">
          \[ \frac{12 \cdot 11 \cdot 10}{6} = \frac{1320}{6} = 220 \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri sebe: Šta predstavlja broj 220?</summary>
      <div class="answer">
        To je ukupan broj načina da izaberemo bilo koje 3 knjige od 12, bez ikakvih ograničenja
        (i sa i bez knjiga iz matematike).
      </div>
    </details>

    <div class="step" tabindex="0">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Primenjujemo metod komplementa</h3>
        <p>Umesto da direktno brojimo slučajeve sa bar jednom knjigom iz matematike, lakše je da nađemo
        koliko ima načina da izaberemo 3 knjige <strong>bez ijedne iz matematike</strong>, pa to oduzmemo od ukupnog broja.</p>
        <div class="math-block">
          \[ N(\text{bar 1 iz mat.}) = N(\text{ukupno}) - N(\text{nijedna iz mat.}) \]
        </div>
        <p class="note">
          Ovo je klasičan metod komplementa: „bar jedan" = „sve" minus „nijedan".
        </p>
      </div>
    </div>

    <div class="step" tabindex="0">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Broj načina bez ijedne knjige iz matematike</h3>
        <p>Ako nijedna od 3 izabrane knjige ne sme biti iz matematike, biramo sve 3 iz preostalih <span class="highlight-blue">8</span> knjiga:</p>
        <div class="math-block">
          \[ \binom{8}{3} = \frac{8!}{3! \cdot 5!} = \frac{8 \cdot 7 \cdot 6}{3 \cdot 2 \cdot 1} \]
        </div>
        <p>Izračunajmo:</p>
        <div class="math-block">
          \[ \frac{8 \cdot 7 \cdot 6}{6} = \frac{336}{6} = 56 \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri sebe: Koliko je \(\binom{8}{3}\)?</summary>
      <div class="answer">
        \(\binom{8}{3} = 56\). To je broj načina da izaberemo 3 knjige iz grupe od 8 knjiga koje nisu iz matematike.
      </div>
    </details>

    <div class="step" tabindex="0">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Računamo konačan rezultat</h3>
        <p>Sada primenjujemo formulu komplementa:</p>
        <div class="math-block">
          \[ N(\text{bar 1 iz mat.}) = \binom{12}{3} - \binom{8}{3} = 220 - 56 = \boxed{164} \]
        </div>
      </div>
    </div>

    <div class="step" tabindex="0">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Verifikacija direktnim brojanjem</h3>
        <p>Da bismo bili sigurni, možemo isti rezultat dobiti i tako što saberemo sve slučajeve:</p>
        <div class="math-block">
          \[ \text{Tačno 1 iz mat.: } \binom{4}{1} \cdot \binom{8}{2} = 4 \cdot 28 = 112 \]
        </div>
        <div class="math-block">
          \[ \text{Tačno 2 iz mat.: } \binom{4}{2} \cdot \binom{8}{1} = 6 \cdot 8 = 48 \]
        </div>
        <div class="math-block">
          \[ \text{Tačno 3 iz mat.: } \binom{4}{3} \cdot \binom{8}{0} = 4 \cdot 1 = 4 \]
        </div>
        <p>Ukupno:</p>
        <div class="math-block">
          \[ 112 + 48 + 4 = 164 \quad \checkmark \]
        </div>
        <p class="note">Oba metoda daju isti rezultat, što potvrđuje da je rešenje tačno.</p>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri sebe: Koliko načina ima da izaberemo tačno 2 knjige iz matematike i 1 koja nije?</summary>
      <div class="answer">
        \(\binom{4}{2} \cdot \binom{8}{1} = 6 \cdot 8 = 48\) načina. Biramo 2 od 4 knjige iz matematike
        i 1 od 8 ostalih knjiga.
      </div>
    </details>

  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Ključni uvid</h2>
    <p style="color: #cbd5e1; margin-bottom: 12px;">
      Metod komplementa pretvara složen problem („bar jedan") u razliku dva jednostavna izraza.
      Umesto da razmatramo tri odvojena slučaja, dovoljno je izračunati samo dve kombinacije.
    </p>
    <div class="insight-formula">
      \[ \underbrace{\binom{12}{3}}_{220} - \underbrace{\binom{8}{3}}_{56} = 164 \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer-card">
    <h2>Konačan odgovor</h2>

    <div class="final-answer-value">
      \(164\)
    </div>

    <div class="final-options">
      <div class="final-option">(A) \(24\)</div>
      <div class="final-option correct">(B) \(164\)</div>
      <div class="final-option">(C) \(56\)</div>
      <div class="final-option">(D) \(984\)</div>
      <div class="final-option">(E) \(220\)</div>
    </div>

    <div class="verification">
      <strong>Verifikacija:</strong><br>
      Ukupan broj kombinacija: \(\binom{12}{3} = 220\).
      Kombinacije bez matematike: \(\binom{8}{3} = 56\).
      Razlika: \(220 - 56 = 164\).
      Direktnim brojanjem (112 + 48 + 4 = 164) potvrđujemo rezultat.
      Opcija E (220) je ukupan broj bez ograničenja, a opcija C (56) je komplement -- obe su zamke za nepažljive.
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Česte greške</h2>
    <ul class="pitfalls-list">
      <li>
        <strong>Odgovor 220 umesto 164:</strong> Broj 220 je ukupan broj načina da se izaberu 3 od 12 knjiga
        <em>bez ikakvih ograničenja</em>. Zadatak traži da bar jedna bude iz matematike, pa treba oduzeti
        slučajeve bez ijedne knjige iz matematike.
      </li>
      <li>
        <strong>Odgovor 56 umesto 164:</strong> Broj 56 je broj načina da se izaberu 3 knjige od 8 koje
        <em>nisu</em> iz matematike. To je upravo ono što treba <em>oduzeti</em>, a ne konačan odgovor.
        Ne mešajte komplement sa traženim rezultatom!
      </li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card">
    <h2>Bonus izazov</h2>
    <p>
      Ako bismo od istih 12 knjiga (4 iz matematike, 8 ostalih) birali <strong>5</strong> knjiga tako da
      bar dve budu iz matematike, koliko bi bilo različitih mogućnosti?
    </p>
    <details>
      <summary>Hint</summary>
      <div style="margin-top: 10px; color: #cbd5e1;">
        Komplement ovde obuhvata dva slučaja: nijedna iz matematike i tačno jedna iz matematike.
        Izračunaj \(\binom{12}{5} - \binom{8}{5} - \binom{4}{1}\binom{8}{4}\) i dobićeš traženi rezultat.
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  // Step click highlighting
  const steps = document.querySelectorAll('.step');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.add('active');
    });
  });

  // Canvas visualization
  const canvas = document.getElementById('mainCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  function roundRect(cx, x, y, w, h, r) {
    cx.beginPath();
    cx.moveTo(x + r, y);
    cx.lineTo(x + w - r, y);
    cx.quadraticCurveTo(x + w, y, x + w, y + r);
    cx.lineTo(x + w, y + h - r);
    cx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
    cx.lineTo(x + r, y + h);
    cx.quadraticCurveTo(x, y + h, x, y + h - r);
    cx.lineTo(x, y + r);
    cx.quadraticCurveTo(x, y, x + r, y);
    cx.closePath();
  }

  function drawBook(x, y, w, h, color, label) {
    // Book spine shadow
    ctx.fillStyle = 'rgba(0,0,0,0.3)';
    roundRect(ctx, x + 3, y + 3, w, h, 4);
    ctx.fill();

    // Book body
    ctx.fillStyle = color;
    roundRect(ctx, x, y, w, h, 4);
    ctx.fill();

    // Book spine line
    ctx.strokeStyle = 'rgba(255,255,255,0.15)';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(x + 5, y + 4);
    ctx.lineTo(x + 5, y + h - 4);
    ctx.stroke();

    // Label
    if (label) {
      ctx.fillStyle = '#fff';
      ctx.font = 'bold 11px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText(label, x + w / 2, y + h / 2);
    }
  }

  function drawBrace(x1, x2, y, height, label, color) {
    const midX = (x1 + x2) / 2;
    ctx.strokeStyle = color;
    ctx.lineWidth = 2;

    // Left arm
    ctx.beginPath();
    ctx.moveTo(x1, y);
    ctx.lineTo(x1, y + height * 0.4);
    ctx.quadraticCurveTo(x1, y + height * 0.5, midX, y + height * 0.5);
    ctx.stroke();

    // Right arm
    ctx.beginPath();
    ctx.moveTo(x2, y);
    ctx.lineTo(x2, y + height * 0.4);
    ctx.quadraticCurveTo(x2, y + height * 0.5, midX, y + height * 0.5);
    ctx.stroke();

    // Tip
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.arc(midX, y + height * 0.5 + 2, 3, 0, Math.PI * 2);
    ctx.fill();

    // Label
    ctx.fillStyle = color;
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    ctx.fillText(label, midX, y + height * 0.5 + 8);
  }

  function draw() {
    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Title
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 17px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('12 knjiga: 4 iz matematike + 8 ostalih', W / 2, 30);

    // --- Draw 12 books in a row ---
    var bookW = 42;
    var bookH = 55;
    var gap = 8;
    var totalW = 12 * bookW + 11 * gap;
    var startX = (W - totalW) / 2;
    var booksY = 52;

    // Math books (first 4)
    for (var i = 0; i < 4; i++) {
      var bx = startX + i * (bookW + gap);
      drawBook(bx, booksY, bookW, bookH, '#a78bfa', 'M' + (i + 1));
    }

    // Other books (next 8)
    for (var i = 4; i < 12; i++) {
      var bx = startX + i * (bookW + gap);
      drawBook(bx, booksY, bookW, bookH, '#334155', 'K' + (i - 3));
    }

    // Braces under math books
    var mathLeft = startX + bookW / 2;
    var mathRight = startX + 3 * (bookW + gap) + bookW / 2;
    drawBrace(mathLeft, mathRight, booksY + bookH + 5, 30, '4 iz matematike', '#a78bfa');

    // Braces under other books
    var otherLeft = startX + 4 * (bookW + gap) + bookW / 2;
    var otherRight = startX + 11 * (bookW + gap) + bookW / 2;
    drawBrace(otherLeft, otherRight, booksY + bookH + 5, 30, '8 ostalih', '#64748b');

    // --- Section: Complement method diagram ---
    var secY = 175;

    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Metod komplementa', W / 2, secY);

    // Three columns
    var colW = 220;
    var colGap = 40;
    var totalColW = 3 * colW + 2 * colGap;
    var colStartX = (W - totalColW) / 2;
    var colY = secY + 20;
    var colH = 170;

    // Column 1: Total C(12,3) = 220
    var c1x = colStartX;
    ctx.fillStyle = 'rgba(96, 165, 250, 0.08)';
    ctx.strokeStyle = 'rgba(96, 165, 250, 0.3)';
    ctx.lineWidth = 2;
    roundRect(ctx, c1x, colY, colW, colH, 12);
    ctx.fill();
    ctx.stroke();

    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Ukupno', c1x + colW / 2, colY + 25);

    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
    ctx.fillText('C(12, 3)', c1x + colW / 2, colY + 55);

    // Small books icon: 3 books of mixed types
    var miniY = colY + 75;
    drawBook(c1x + 55, miniY, 30, 40, '#a78bfa', '');
    drawBook(c1x + 90, miniY, 30, 40, '#334155', '');
    drawBook(c1x + 125, miniY, 30, 40, '#334155', '');

    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 22px Segoe UI, system-ui, sans-serif';
    ctx.fillText('= 220', c1x + colW / 2, colY + colH - 12);

    // Minus sign
    var minusX = c1x + colW + colGap / 2;
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 32px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('\u2212', minusX, colY + colH / 2 + 8);

    // Column 2: C(8,3) = 56
    var c2x = colStartX + colW + colGap;
    ctx.fillStyle = 'rgba(244, 114, 182, 0.08)';
    ctx.strokeStyle = 'rgba(244, 114, 182, 0.3)';
    ctx.lineWidth = 2;
    roundRect(ctx, c2x, colY, colW, colH, 12);
    ctx.fill();
    ctx.stroke();

    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Nijedna iz matematike', c2x + colW / 2, colY + 25);

    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
    ctx.fillText('C(8, 3)', c2x + colW / 2, colY + 55);

    // 3 gray books only
    drawBook(c2x + 55, miniY, 30, 40, '#334155', '');
    drawBook(c2x + 90, miniY, 30, 40, '#334155', '');
    drawBook(c2x + 125, miniY, 30, 40, '#334155', '');

    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 22px Segoe UI, system-ui, sans-serif';
    ctx.fillText('= 56', c2x + colW / 2, colY + colH - 12);

    // Equals sign
    var eqX = c2x + colW + colGap / 2;
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 32px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('=', eqX, colY + colH / 2 + 8);

    // Column 3: Result = 164
    var c3x = colStartX + 2 * (colW + colGap);
    ctx.fillStyle = 'rgba(74, 222, 128, 0.1)';
    ctx.strokeStyle = 'rgba(74, 222, 128, 0.4)';
    ctx.lineWidth = 2;
    roundRect(ctx, c3x, colY, colW, colH, 12);
    ctx.fill();
    ctx.stroke();

    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Bar jedna iz matematike', c3x + colW / 2, colY + 25);

    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
    ctx.fillText('220 \u2212 56', c3x + colW / 2, colY + 55);

    // Mixed books: at least 1 purple
    drawBook(c3x + 55, miniY, 30, 40, '#a78bfa', '');
    drawBook(c3x + 90, miniY, 30, 40, '#334155', '');
    drawBook(c3x + 125, miniY, 30, 40, '#a78bfa', '');

    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 28px Segoe UI, system-ui, sans-serif';
    ctx.fillText('= 164', c3x + colW / 2, colY + colH - 10);

    // --- Direct counting breakdown ---
    var breakY = colY + colH + 35;
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Verifikacija direktnim brojanjem', W / 2, breakY);

    var rowY = breakY + 18;
    var cases = [
      { math: 1, other: 2, formula: 'C(4,1) \u00B7 C(8,2)', result: '4 \u00B7 28 = 112', color: '#60a5fa' },
      { math: 2, other: 1, formula: 'C(4,2) \u00B7 C(8,1)', result: '6 \u00B7 8 = 48', color: '#a78bfa' },
      { math: 3, other: 0, formula: 'C(4,3) \u00B7 C(8,0)', result: '4 \u00B7 1 = 4', color: '#f472b6' }
    ];

    var caseW = 230;
    var caseH = 62;
    var caseGap = 20;
    var caseTotalW = 3 * caseW + 2 * caseGap;
    var caseStartX = (W - caseTotalW) / 2;

    cases.forEach(function(c, idx) {
      var cx = caseStartX + idx * (caseW + caseGap);

      ctx.fillStyle = 'rgba(30, 41, 59, 0.6)';
      ctx.strokeStyle = c.color + '55';
      ctx.lineWidth = 1;
      roundRect(ctx, cx, rowY, caseW, caseH, 8);
      ctx.fill();
      ctx.stroke();

      // Mini books
      var miniBookW = 16;
      var miniBookH = 22;
      var mbY = rowY + 8;
      var mbStartX = cx + 12;

      for (var j = 0; j < c.math; j++) {
        ctx.fillStyle = '#a78bfa';
        roundRect(ctx, mbStartX + j * 20, mbY, miniBookW, miniBookH, 2);
        ctx.fill();
      }
      for (var j = 0; j < c.other; j++) {
        ctx.fillStyle = '#475569';
        roundRect(ctx, mbStartX + (c.math + j) * 20, mbY, miniBookW, miniBookH, 2);
        ctx.fill();
      }

      // Formula text
      ctx.fillStyle = '#e2e8f0';
      ctx.font = '13px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText(c.formula, cx + 80, rowY + 22);

      // Result
      ctx.fillStyle = c.color;
      ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
      ctx.fillText(c.result, cx + 80, rowY + 48);
    });

    // Sum line
    var sumY = rowY + caseH + 20;
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(caseStartX + caseW, sumY);
    ctx.lineTo(caseStartX + caseTotalW, sumY);
    ctx.stroke();

    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 18px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('112 + 48 + 4 = 164  \u2713', W / 2, sumY + 25);
  }

  draw();
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Kombinatorika -- izbor knjiga sa uslovom",
  "subject": "math",
  "unit": "combinatorics",
  "topic_tags": ["kombinatorika", "binomni koeficijent", "metod komplementa", "kombinacije bez ponavljanja"]
}
BRAINSPARK_META-->