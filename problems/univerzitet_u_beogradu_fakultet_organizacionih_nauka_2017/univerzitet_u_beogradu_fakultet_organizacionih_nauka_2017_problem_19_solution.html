<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zapremina tela nastala rotacijom trapeza</title>
<script type="text/info" id="logic-scratchpad">
PROBLEM:
Trapez sa osnovicama 20 cm i 6 cm, kracima 13 cm i 15 cm.
Rotacija oko duže osnovice (20 cm). Naći zapreminu nastalog tela.

SETUP KOORDINATA:
Duža osnovica na x-osi od (0,0) do (20,0).
Kraća osnovica dužine 6, na visini h.
Neka je levo teme kraće osnovice na (a, h), desno na (a+6, h).

Krak od (0,0) do (a,h) ima dužinu 13:
  a² + h² = 169  ... (1)

Krak od (20,0) do (a+6,h) ima dužinu 15:
  (20 - a - 6)² + h² = 225
  (14 - a)² + h² = 225  ... (2)

(2) - (1):
  (14-a)² - a² = 225 - 169 = 56
  196 - 28a + a² - a² = 56
  196 - 28a = 56
  28a = 140
  a = 5

Iz (1): h² = 169 - 25 = 144, h = 12

Temena trapeza: A(0,0), B(20,0), C(11,12), D(5,12)

ROTACIJA OKO X-OSE (duža osnovica AB):
Telo rotacije se sastoji od tri dela:
1) Kupa od x=0 do x=5: nastaje rotacijom segmenta AD
   Poluprečnik raste od 0 (u x=0) do 12 (u x=5)
   V₁ = (1/3)π r² h = (1/3)π · 144 · 5 = 240π

2) Valjak od x=5 do x=11: nastaje rotacijom segmenta DC
   Poluprečnik = 12, dužina = 6
   V₂ = π r² h = π · 144 · 6 = 864π

3) Kupa od x=11 do x=20: nastaje rotacijom segmenta CB
   Poluprečnik opada od 12 (u x=11) do 0 (u x=20)
   V₃ = (1/3)π r² h = (1/3)π · 144 · 9 = 432π

UKUPNA ZAPREMINA:
V = V₁ + V₂ + V₃ = 240π + 864π + 432π = 1536π cm³

PROVERA:
240 + 864 + 432 = 1536 ✓
Odgovor D) 1536π cm³ ✓

DODATNA VERIFIKACIJA:
- Visina trapeza h = 12: provera sa obe krace
  Levi krak: √(5² + 12²) = √(25+144) = √169 = 13 ✓
  Desni krak: √(9² + 12²) = √(81+144) = √225 = 15 ✓
- Kraća osnovica: 11 - 5 = 6 ✓
- Duža osnovica: 20 ✓
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  text-align: center;
}

.subtitle {
  text-align: center;
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.35rem;
  margin-bottom: 16px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.1rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  flex: 0 1 auto;
  min-width: 100px;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card p {
  color: #c4b5fd;
  font-size: 1.02rem;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  font-size: 1.05rem;
  padding: 8px 0;
}

details summary:hover {
  color: #93c5fd;
}

details[open] summary {
  margin-bottom: 12px;
}

.theory-content ul {
  list-style: none;
  padding-left: 0;
}

.theory-content li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #cbd5e1;
}

.theory-content li:last-child {
  border-bottom: none;
}

.step-container {
  display: flex;
  gap: 16px;
  align-items: flex-start;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 14px;
  cursor: pointer;
  transition: all 0.2s;
  border-left: 3px solid transparent;
}

.step-container:hover,
.step-container.active {
  background: rgba(96,165,250,0.05);
  border-left-color: #4ade80;
}

.step-badge {
  width: 32px;
  height: 32px;
  min-width: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  color: #e2e8f0;
  font-size: 1.05rem;
  margin-bottom: 8px;
}

.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 10px 0;
  font-family: 'Courier New', monospace;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 6px;
  font-style: italic;
}

.checkpoint {
  background: rgba(167,139,250,0.08);
  border: 1px solid rgba(167,139,250,0.2);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 15px 0;
}

.checkpoint summary {
  color: #a78bfa;
}

.checkpoint-answer {
  color: #4ade80;
  font-weight: 600;
  padding-top: 8px;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  text-align: center;
}

.insight-box h2 {
  color: #a78bfa;
}

.insight-formula {
  font-size: 1.3rem;
  color: #4ade80;
  margin: 14px 0;
}

.final-answer {
  text-align: center;
  border: 2px solid #4ade80;
  background: rgba(52,211,153,0.08);
}

.final-answer .answer-value {
  font-size: 2rem;
  color: #4ade80;
  font-weight: 800;
  margin: 16px 0;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 18px 0;
}

.final-option {
  padding: 10px 22px;
  border-radius: 8px;
  background: rgba(51,65,85,0.5);
  border: 1px solid #334155;
  color: #94a3b8;
  font-size: 1rem;
}

.final-option.correct {
  background: rgba(52,211,153,0.15);
  border-color: #4ade80;
  color: #4ade80;
  font-weight: 700;
}

.verification {
  margin-top: 14px;
  padding: 12px 16px;
  background: rgba(52,211,153,0.06);
  border-radius: 8px;
  color: #94a3b8;
  font-size: 0.95rem;
}

.pitfalls {
  border-left: 3px solid #e09468;
}

.pitfalls h2 {
  color: #e09468;
}

.pitfalls ul {
  list-style: none;
  padding-left: 0;
}

.pitfalls li {
  padding: 6px 0;
  color: #cbd5e1;
}

.pitfalls li::before {
  content: "\26A0  ";
  color: #e09468;
}

.challenge {
  border-left: 3px solid #f472b6;
}

.challenge h2 {
  color: #f472b6;
}

canvas {
  display: block;
  margin: 0 auto;
  border-radius: 10px;
  touch-action: none;
  width: 100%;
  max-width: 700px;
}

.canvas-hint {
  text-align: center;
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

.highlight-blue {
  color: #60a5fa;
  font-weight: 600;
}

.highlight-green {
  color: #4ade80;
  font-weight: 600;
}

@media (max-width: 700px) {
  h1 { font-size: 1.5rem; }
  .card { padding: 16px; }
  .given-grid { gap: 8px; }
  .given-item { min-width: 70px; padding: 8px 12px; }
  .step-container { flex-direction: column; gap: 8px; }
  .final-option { padding: 8px 14px; font-size: 0.9rem; }
}
</style>
</head>
<body>
<div class="container">

  <!-- TITLE -->
  <h1>Zapremina rotacionog tela trapeza</h1>
  <p class="subtitle">Stereometrija — zapremina tela nastalog rotacijom trapeza oko duze osnovice</p>

  <!-- PROBLEM STATEMENT -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Duzine osnovica trapeza su <span class="highlight-blue">20 cm</span> i <span class="highlight-blue">6 cm</span>, a kraci su duzina <span class="highlight-pink">13 cm</span> i <span class="highlight-pink">15 cm</span>. Rotacijom trapeza oko <span class="highlight-green">duze osnovice</span> nastaje telo cija je zapremina jednaka:</p>

    <div class="given-grid">
      <div class="given-item">
        <div class="label">Duza osnovica</div>
        <div class="value">\(a = 20\) cm</div>
      </div>
      <div class="given-item">
        <div class="label">Kraca osnovica</div>
        <div class="value">\(b = 6\) cm</div>
      </div>
      <div class="given-item">
        <div class="label">Krak 1</div>
        <div class="value">\(c = 13\) cm</div>
      </div>
      <div class="given-item">
        <div class="label">Krak 2</div>
        <div class="value">\(d = 15\) cm</div>
      </div>
    </div>

    <div class="given-grid" style="margin-top: 20px;">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(1440\pi\) cm\(^3\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(1560\pi\) cm\(^3\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(1600\pi\) cm\(^3\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(1536\pi\) cm\(^3\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(1920\pi\) cm\(^3\)</div>
      </div>
    </div>
  </div>

  <!-- PLAN -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>Postavicemo trapez u koordinatni sistem sa duzom osnovicom na x-osi. Odrediti koordinate svih temena pomocu Pitagorine teoreme, a zatim izracunati zapreminu rotacionog tela kao zbir dve kupe i jednog valjka.</p>
  </div>

  <!-- THEORY -->
  <div class="card">
    <details>
      <summary>Kljucne formule i teoreme</summary>
      <div class="theory-content">
        <ul>
          <li><strong>Pitagorina teorema:</strong> U pravouglom trouglu sa katetama \(a\) i \(b\) i hipotenuzom \(c\): \[ a^2 + b^2 = c^2 \]</li>
          <li><strong>Zapremina kupe:</strong> Kupa sa poluprecnikom osnove \(r\) i visinom \(h\): \[ V_{\text{kupa}} = \frac{1}{3}\pi r^2 h \]</li>
          <li><strong>Zapremina valjka:</strong> Valjak sa poluprecnikom osnove \(r\) i visinom \(h\): \[ V_{\text{valjak}} = \pi r^2 h \]</li>
          <li><strong>Rotaciono telo trapeza:</strong> Kada se trapez rotira oko duze osnovice, nastaje telo koje se moze rastaviti na dve kupe i jedan valjak.</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- VISUAL AID -->
  <div class="card">
    <h2>Vizuelni prikaz</h2>
    <canvas id="mainCanvas" width="700" height="620"></canvas>
    <p class="canvas-hint">Gore: trapez sa oznacenim merama. Dole: rotaciono telo (dve kupe + valjak)</p>
  </div>

  <!-- STEP-BY-STEP SOLUTION -->
  <div class="card">
    <h2>Resenje — korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container" tabindex="0">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Postavimo koordinatni sistem</h3>
        <p>Duza osnovica trapeza lezi na x-osi. Oznacimo temena:</p>
        <div class="math-block">
          \[ A = (0, 0), \quad B = (20, 0) \]
        </div>
        <p>Temena kracev osnovice su na visini \(h\):</p>
        <div class="math-block">
          \[ D = (x_D, h), \quad C = (x_D + 6, h) \]
        </div>
        <p class="note">Krak AD ima duzinu 13, a krak BC ima duzinu 15.</p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container" tabindex="0">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Postavimo jednacine za krakove</h3>
        <p>Iz uslova da je \(|AD| = 13\):</p>
        <div class="math-block">
          \[ x_D^2 + h^2 = 13^2 = 169 \quad \ldots (1) \]
        </div>
        <p>Iz uslova da je \(|BC| = 15\), gde je \(C = (x_D + 6,\; h)\) i \(B = (20, 0)\):</p>
        <div class="math-block">
          \[ (20 - x_D - 6)^2 + h^2 = 15^2 = 225 \]
        </div>
        <div class="math-block">
          \[ (14 - x_D)^2 + h^2 = 225 \quad \ldots (2) \]
        </div>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step-container" tabindex="0">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Odredimo \(x_D\) oduzimanjem jednacina</h3>
        <p>Oduzmemo (1) od (2):</p>
        <div class="math-block">
          \[ (14 - x_D)^2 - x_D^2 = 225 - 169 = 56 \]
        </div>
        <p>Razvijemo levu stranu:</p>
        <div class="math-block">
          \[ 196 - 28x_D + x_D^2 - x_D^2 = 56 \]
        </div>
        <div class="math-block">
          \[ 196 - 28x_D = 56 \]
        </div>
        <div class="math-block">
          \[ 28x_D = 140 \implies x_D = 5 \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Kolika je visina trapeza?</summary>
      <p class="checkpoint-answer">Iz jednacine (1): \(h^2 = 169 - 25 = 144\), pa \(h = 12\) cm.</p>
    </details>

    <!-- Step 4 -->
    <div class="step-container" tabindex="0">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Izracunamo visinu trapeza</h3>
        <p>Uvrstimo \(x_D = 5\) u jednacinu (1):</p>
        <div class="math-block">
          \[ 5^2 + h^2 = 169 \]
        </div>
        <div class="math-block">
          \[ h^2 = 169 - 25 = 144 \]
        </div>
        <div class="math-block">
          \[ h = 12 \text{ cm} \]
        </div>
        <p>Koordinate svih temena trapeza:</p>
        <div class="math-block">
          \[ A(0,0),\; B(20,0),\; C(11,12),\; D(5,12) \]
        </div>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step-container" tabindex="0">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Verifikacija kraka BC</h3>
        <p>Proverimo da li se slaze duzina drugog kraka:</p>
        <div class="math-block">
          \[ |BC| = \sqrt{(20 - 11)^2 + (0 - 12)^2} = \sqrt{81 + 144} = \sqrt{225} = 15 \; \checkmark \]
        </div>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step-container" tabindex="0">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Analiziramo rotaciono telo</h3>
        <p>Rotacijom trapeza oko x-ose (duze osnovice \(AB\)) nastaje telo koje se moze rastaviti na <span class="highlight-blue">tri dela</span>:</p>
        <div class="math-block">
          <p><span class="highlight-blue">Kupa 1:</span> od \(x = 0\) do \(x = 5\) (rotacija kraka AD)</p>
          <p>Poluprecnik raste od 0 do 12, visina = 5</p>
        </div>
        <div class="math-block">
          <p><span class="highlight-green">Valjak:</span> od \(x = 5\) do \(x = 11\) (rotacija kracev osnovice DC)</p>
          <p>Poluprecnik = 12, visina = 6</p>
        </div>
        <div class="math-block">
          <p><span class="highlight-pink">Kupa 2:</span> od \(x = 11\) do \(x = 20\) (rotacija kraka CB)</p>
          <p>Poluprecnik opada od 12 do 0, visina = 9</p>
        </div>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Kolika je zapremina valjka sa r = 12 i h = 6?</summary>
      <p class="checkpoint-answer">\(V = \pi \cdot 12^2 \cdot 6 = \pi \cdot 144 \cdot 6 = 864\pi\) cm\(^3\).</p>
    </details>

    <!-- Step 7 -->
    <div class="step-container" tabindex="0">
      <div class="step-badge">7</div>
      <div class="step-content">
        <h3>Zapremina kupe 1 (rotacija kraka AD)</h3>
        <p>Kupa sa poluprecnikom osnove \(r = 12\) i visinom \(h_1 = 5\):</p>
        <div class="math-block">
          \[ V_1 = \frac{1}{3}\pi r^2 h_1 = \frac{1}{3}\pi \cdot 144 \cdot 5 = \frac{720\pi}{3} = 240\pi \text{ cm}^3 \]
        </div>
      </div>
    </div>

    <!-- Step 8 -->
    <div class="step-container" tabindex="0">
      <div class="step-badge">8</div>
      <div class="step-content">
        <h3>Zapremina valjka (rotacija strane DC)</h3>
        <p>Valjak sa poluprecnikom \(r = 12\) i visinom \(h_2 = 6\):</p>
        <div class="math-block">
          \[ V_2 = \pi r^2 h_2 = \pi \cdot 144 \cdot 6 = 864\pi \text{ cm}^3 \]
        </div>
      </div>
    </div>

    <!-- Step 9 -->
    <div class="step-container" tabindex="0">
      <div class="step-badge">9</div>
      <div class="step-content">
        <h3>Zapremina kupe 2 (rotacija kraka CB)</h3>
        <p>Kupa sa poluprecnikom osnove \(r = 12\) i visinom \(h_3 = 9\):</p>
        <div class="math-block">
          \[ V_3 = \frac{1}{3}\pi r^2 h_3 = \frac{1}{3}\pi \cdot 144 \cdot 9 = \frac{1296\pi}{3} = 432\pi \text{ cm}^3 \]
        </div>
      </div>
    </div>

    <!-- Step 10 -->
    <div class="step-container" tabindex="0">
      <div class="step-badge">10</div>
      <div class="step-content">
        <h3>Ukupna zapremina</h3>
        <p>Saberemo zapremine sva tri dela:</p>
        <div class="math-block">
          \[ V = V_1 + V_2 + V_3 = 240\pi + 864\pi + 432\pi \]
        </div>
        <div class="math-block">
          \[ V = 1536\pi \text{ cm}^3 \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Da li se zbir visina tri dela poklapa sa duzom osnovicom?</summary>
      <p class="checkpoint-answer">\(5 + 6 + 9 = 20\) cm, sto je tacno duzina duze osnovice. To potvrdjuje da smo ispravno podelili telo.</p>
    </details>
  </div>

  <!-- KEY INSIGHT -->
  <div class="insight-box">
    <h2>Kljucni uvid</h2>
    <p>Rotaciono telo trapeza oko duze osnovice se rastavlja na <strong>dve kupe i jedan valjak</strong>. Visina trapeza \(h = 12\) postaje poluprecnik svih delova, a horizontalna rastojanja temena odredjuju visine kupa i valjka.</p>
    <div class="insight-formula">
      \[ V = \frac{1}{3}\pi \cdot 12^2 \cdot 5 + \pi \cdot 12^2 \cdot 6 + \frac{1}{3}\pi \cdot 12^2 \cdot 9 = 1536\pi \]
    </div>
  </div>

  <!-- FINAL ANSWER -->
  <div class="card final-answer">
    <h2>Konacan odgovor</h2>
    <div class="answer-value">\(1536\pi\) cm\(^3\)</div>
    <div class="final-options">
      <div class="final-option">A) \(1440\pi\)</div>
      <div class="final-option">B) \(1560\pi\)</div>
      <div class="final-option">C) \(1600\pi\)</div>
      <div class="final-option correct">D) \(1536\pi\)</div>
      <div class="final-option">E) \(1920\pi\)</div>
    </div>
    <div class="verification">
      <strong>Provera:</strong> Visine delova: \(5 + 6 + 9 = 20\) (pokriva celu osnovicu). Zapremine: \(240\pi + 864\pi + 432\pi = 1536\pi\). Krakovi: \(\sqrt{5^2 + 12^2} = 13\), \(\sqrt{9^2 + 12^2} = 15\). Sve se slaze — odgovor je <strong>D) \(1536\pi\) cm\(^3\)</strong>.
    </div>
  </div>

  <!-- PITFALLS -->
  <div class="card pitfalls">
    <h2>Ceste greske</h2>
    <ul>
      <li>Pogresno rastavljanje tela — trapez koji nije jednakokraki ima razlicite horizontalne projekcije krakova (5 i 9), pa dve kupe imaju razlicite visine. Cesta greska je pretpostaviti da su jednake.</li>
      <li>Zaboravljanje da se rotacijom linije paralelne sa osom dobija valjak, a ne kupa. Samo se kosi krakovi rotiraju u kupe.</li>
      <li>Zamena visine trapeza i visine kupe — visina trapeza (12 cm) je poluprecnik rotacionog tela, a horizontalna rastojanja (5, 6, 9) su visine kupa i valjka.</li>
    </ul>
  </div>

  <!-- CHALLENGE -->
  <div class="card challenge">
    <h2>Dodatni izazov</h2>
    <p>Kolika bi bila zapremina rotacionog tela da se isti trapez rotira oko <strong>krace osnovice</strong> (6 cm)?</p>
    <details>
      <summary>Hint</summary>
      <p>Kada se trapez rotira oko krace osnovice, nastaje razlika dva kupe minus valjak (odnosno, rupa se stvara u sredini). Razmislite o tome kako se koordinatni sistem menja i sta je sada osa rotacije. Poluprecnik u x-osi sada nije konstantan.</p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('mainCanvas');
  const ctx = canvas.getContext('2d');

  function draw() {
    const W = canvas.width;
    const H = canvas.height;

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // ========== TOP SECTION: TRAPEZOID DIAGRAM ==========
    const topTitle = 'Trapez ABCD sa oznacenim merama';
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    ctx.fillText(topTitle, W / 2, 10);

    // Trapezoid vertices in canvas coords (Y pointing DOWN in canvas)
    // Real coords: A(0,0), B(20,0), C(11,12), D(5,12)
    // Canvas mapping: scale by 22, offset to center
    const scale = 22;
    const offsetX = (W - 20 * scale) / 2;
    const trapTopY = 60;
    const trapH = 12 * scale;

    const toCanvasTop = (x, y) => ({
      x: offsetX + x * scale,
      y: trapTopY + trapH - y * scale
    });

    const A = toCanvasTop(0, 0);
    const B = toCanvasTop(20, 0);
    const C = toCanvasTop(11, 12);
    const D = toCanvasTop(5, 12);

    // Draw grid lines
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 0.5;
    for (let i = 0; i <= 20; i++) {
      const p = toCanvasTop(i, 0);
      const q = toCanvasTop(i, 12);
      ctx.beginPath();
      ctx.moveTo(p.x, p.y);
      ctx.lineTo(q.x, q.y);
      ctx.stroke();
    }
    for (let j = 0; j <= 12; j++) {
      const p = toCanvasTop(0, j);
      const q = toCanvasTop(20, j);
      ctx.beginPath();
      ctx.moveTo(p.x, p.y);
      ctx.lineTo(q.x, q.y);
      ctx.stroke();
    }

    // Fill trapezoid
    ctx.fillStyle = 'rgba(96,165,250,0.12)';
    ctx.beginPath();
    ctx.moveTo(A.x, A.y);
    ctx.lineTo(B.x, B.y);
    ctx.lineTo(C.x, C.y);
    ctx.lineTo(D.x, D.y);
    ctx.closePath();
    ctx.fill();

    // Draw trapezoid edges
    // Bottom base (axis of rotation) - special
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(A.x, A.y);
    ctx.lineTo(B.x, B.y);
    ctx.stroke();

    // Top base
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(D.x, D.y);
    ctx.lineTo(C.x, C.y);
    ctx.stroke();

    // Left leg AD
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(A.x, A.y);
    ctx.lineTo(D.x, D.y);
    ctx.stroke();

    // Right leg BC
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(B.x, B.y);
    ctx.lineTo(C.x, C.y);
    ctx.stroke();

    // Height dashed line from D
    ctx.strokeStyle = '#94a3b8';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([6, 4]);
    const Dfoot = toCanvasTop(5, 0);
    ctx.beginPath();
    ctx.moveTo(D.x, D.y);
    ctx.lineTo(Dfoot.x, Dfoot.y);
    ctx.stroke();

    // Height dashed line from C
    const Cfoot = toCanvasTop(11, 0);
    ctx.beginPath();
    ctx.moveTo(C.x, C.y);
    ctx.lineTo(Cfoot.x, Cfoot.y);
    ctx.stroke();
    ctx.setLineDash([]);

    // Right angle markers
    const raSize = 8;
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1.5;
    // At D foot
    ctx.beginPath();
    ctx.moveTo(Dfoot.x + raSize, Dfoot.y);
    ctx.lineTo(Dfoot.x + raSize, Dfoot.y - raSize);
    ctx.lineTo(Dfoot.x, Dfoot.y - raSize);
    ctx.stroke();
    // At C foot
    ctx.beginPath();
    ctx.moveTo(Cfoot.x - raSize, Cfoot.y);
    ctx.lineTo(Cfoot.x - raSize, Cfoot.y - raSize);
    ctx.lineTo(Cfoot.x, Cfoot.y - raSize);
    ctx.stroke();

    // Vertex labels
    ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
    ctx.textBaseline = 'middle';

    ctx.fillStyle = '#4ade80';
    ctx.textAlign = 'right';
    ctx.fillText('A(0,0)', A.x - 8, A.y + 14);

    ctx.textAlign = 'left';
    ctx.fillText('B(20,0)', B.x + 8, B.y + 14);

    ctx.fillStyle = '#60a5fa';
    ctx.textAlign = 'left';
    ctx.fillText('C(11,12)', C.x + 8, C.y - 6);

    ctx.textAlign = 'right';
    ctx.fillText('D(5,12)', D.x - 8, D.y - 6);

    // Vertex dots
    [A, B, C, D].forEach((pt, i) => {
      ctx.fillStyle = i < 2 ? '#4ade80' : '#60a5fa';
      ctx.beginPath();
      ctx.arc(pt.x, pt.y, 5, 0, 2 * Math.PI);
      ctx.fill();
    });

    // Edge labels
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';

    // Bottom base label
    ctx.fillStyle = '#4ade80';
    ctx.fillText('20 (osa rotacije)', (A.x + B.x) / 2, A.y + 18);

    // Top base label
    ctx.fillStyle = '#60a5fa';
    ctx.fillText('6', (D.x + C.x) / 2, D.y - 14);

    // Left leg label
    ctx.fillStyle = '#f472b6';
    const midAD = { x: (A.x + D.x) / 2, y: (A.y + D.y) / 2 };
    ctx.fillText('13', midAD.x - 18, midAD.y);

    // Right leg label
    ctx.fillStyle = '#a78bfa';
    const midBC = { x: (B.x + C.x) / 2, y: (B.y + C.y) / 2 };
    ctx.fillText('15', midBC.x + 18, midBC.y);

    // Height label
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('h=12', Dfoot.x + 22, (D.y + Dfoot.y) / 2);

    // Horizontal distance labels
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('5', (A.x + Dfoot.x) / 2, Dfoot.y + 32);
    ctx.fillText('6', (Dfoot.x + Cfoot.x) / 2, Dfoot.y + 32);
    ctx.fillText('9', (Cfoot.x + B.x) / 2, Dfoot.y + 32);

    // ========== BOTTOM SECTION: SOLID OF REVOLUTION ==========
    const botY = 345;
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    ctx.fillText('Rotaciono telo: dve kupe + valjak', W / 2, botY);

    // Draw the solid of revolution as cross-section (symmetric about axis)
    const axisY = botY + 140;
    const solScale = 17;
    const solOffX = (W - 20 * solScale) / 2;

    const toSol = (x, r) => ({
      xc: solOffX + x * solScale,
      top: axisY - r * solScale,
      bot: axisY + r * solScale
    });

    // Key points along axis
    const pts = [
      { x: 0, r: 0 },
      { x: 5, r: 12 },
      { x: 11, r: 12 },
      { x: 20, r: 0 }
    ];

    // Fill cone 1 (left)
    const p0 = toSol(0, 0);
    const p1 = toSol(5, 12);

    ctx.fillStyle = 'rgba(244,114,182,0.15)';
    ctx.beginPath();
    ctx.moveTo(p0.xc, axisY);
    ctx.lineTo(p1.xc, p1.top);
    ctx.lineTo(p1.xc, p1.bot);
    ctx.closePath();
    ctx.fill();

    // Fill cylinder (middle)
    const p2 = toSol(11, 12);
    ctx.fillStyle = 'rgba(74,222,128,0.15)';
    ctx.fillRect(p1.xc, p1.top, p2.xc - p1.xc, p1.bot - p1.top);

    // Fill cone 2 (right)
    const p3 = toSol(20, 0);
    ctx.fillStyle = 'rgba(167,139,250,0.15)';
    ctx.beginPath();
    ctx.moveTo(p3.xc, axisY);
    ctx.lineTo(p2.xc, p2.top);
    ctx.lineTo(p2.xc, p2.bot);
    ctx.closePath();
    ctx.fill();

    // Draw outline — upper profile
    ctx.strokeStyle = '#e2e8f0';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(p0.xc, axisY);
    ctx.lineTo(p1.xc, p1.top);
    ctx.lineTo(p2.xc, p2.top);
    ctx.lineTo(p3.xc, axisY);
    ctx.stroke();

    // Lower profile
    ctx.beginPath();
    ctx.moveTo(p0.xc, axisY);
    ctx.lineTo(p1.xc, p1.bot);
    ctx.lineTo(p2.xc, p2.bot);
    ctx.lineTo(p3.xc, axisY);
    ctx.stroke();

    // Axis of rotation
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([8, 5]);
    ctx.beginPath();
    ctx.moveTo(p0.xc - 15, axisY);
    ctx.lineTo(p3.xc + 15, axisY);
    ctx.stroke();
    ctx.setLineDash([]);

    // Ellipses at x=5 and x=11
    const drawEllipse = (cx, ry, color) => {
      ctx.strokeStyle = color;
      ctx.lineWidth = 1.5;
      ctx.setLineDash([4, 3]);
      ctx.beginPath();
      ctx.ellipse(cx, axisY, 12, ry * solScale, 0, 0, 2 * Math.PI);
      ctx.stroke();
      ctx.setLineDash([]);
    };

    drawEllipse(p1.xc, 12, '#60a5fa');
    drawEllipse(p2.xc, 12, '#60a5fa');

    // Labels for the three parts
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';

    ctx.fillStyle = '#f472b6';
    ctx.fillText('Kupa 1', (p0.xc + p1.xc) / 2, p1.bot + 18);
    ctx.fillText('h\u2081=5', (p0.xc + p1.xc) / 2, p1.bot + 34);
    ctx.fillText('V\u2081=240\u03C0', (p0.xc + p1.xc) / 2, p1.bot + 50);

    ctx.fillStyle = '#4ade80';
    ctx.fillText('Valjak', (p1.xc + p2.xc) / 2, p1.bot + 18);
    ctx.fillText('h\u2082=6', (p1.xc + p2.xc) / 2, p1.bot + 34);
    ctx.fillText('V\u2082=864\u03C0', (p1.xc + p2.xc) / 2, p1.bot + 50);

    ctx.fillStyle = '#a78bfa';
    ctx.fillText('Kupa 2', (p2.xc + p3.xc) / 2, p2.bot + 18);
    ctx.fillText('h\u2083=9', (p2.xc + p3.xc) / 2, p2.bot + 34);
    ctx.fillText('V\u2083=432\u03C0', (p2.xc + p3.xc) / 2, p2.bot + 50);

    // Radius label
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.textBaseline = 'middle';
    ctx.fillText('r=12', p1.xc + 16, (axisY + p1.top) / 2);

    // Arrow for radius
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(p1.xc + 6, axisY);
    ctx.lineTo(p1.xc + 6, p1.top + 4);
    ctx.stroke();
    // arrowhead
    ctx.beginPath();
    ctx.moveTo(p1.xc + 6, p1.top + 4);
    ctx.lineTo(p1.xc + 2, p1.top + 12);
    ctx.lineTo(p1.xc + 10, p1.top + 12);
    ctx.closePath();
    ctx.fillStyle = '#60a5fa';
    ctx.fill();

    // Total volume at bottom
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    ctx.fillText('V = 240\u03C0 + 864\u03C0 + 432\u03C0 = 1536\u03C0 cm\u00B3', W / 2, p1.bot + 72);
  }

  draw();

  // Step click interactivity
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.add('active');
    });
    step.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        steps.forEach(s => s.classList.remove('active'));
        step.classList.add('active');
      }
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Zapremina rotacionog tela trapeza oko duze osnovice",
  "subject": "math",
  "unit": "geometry",
  "topic_tags": ["stereometrija", "rotaciono telo", "zapremina", "trapez", "kupa", "valjak", "Pitagorina teorema"]
}
BRAINSPARK_META-->