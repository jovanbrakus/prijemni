<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Obim trapeza</title>
<script type="text/info" id="logic-scratchpad">
PROBLEM:
Trapez sa sledecim podacima:
- Povrsina P = (3/2)(11 - sqrt(3)) cm²
- Duza osnovica a = 7 cm
- Visina h = 3 cm
- Jedan ugao na (duzoj) osnovici = 45°
Naci obim.

SOLUTION:

Step 1: Naci kracu osnovicu b iz formule za povrsinu trapeza.
P = (a + b) / 2 * h
(3/2)(11 - sqrt(3)) = (7 + b) / 2 * 3
(3/2)(11 - sqrt(3)) = 3(7 + b) / 2
Pomnozimo obe strane sa 2:
3(11 - sqrt(3)) = 3(7 + b)
Podelimo sa 3:
11 - sqrt(3) = 7 + b
b = 11 - sqrt(3) - 7 = 4 - sqrt(3)

Step 2: Naci horizontalne projekcije krakova.
Razlika osnovica: a - b = 7 - (4 - sqrt(3)) = 3 + sqrt(3)
Ova razlika se deli na dva dela d1 i d2 gde su d1 i d2 horizontalne projekcije
levog i desnog kraka. d1 + d2 = 3 + sqrt(3).

Step 3: Za krak sa uglom 45°:
tan(45°) = h / d1 => 1 = 3 / d1 => d1 = 3
Krak c1 = h / sin(45°) = 3 / (sqrt(2)/2) = 3*sqrt(2)

Step 4: Za drugi krak:
d2 = (3 + sqrt(3)) - 3 = sqrt(3)
Krak c2 = sqrt(h² + d2²) = sqrt(9 + 3) = sqrt(12) = 2*sqrt(3)
Ugao: tan(alpha) = 3/sqrt(3) = sqrt(3) => alpha = 60°

Step 5: Obim:
O = a + b + c1 + c2
O = 7 + (4 - sqrt(3)) + 3*sqrt(2) + 2*sqrt(3)
O = 11 - sqrt(3) + 3*sqrt(2) + 2*sqrt(3)
O = 11 + sqrt(3) + 3*sqrt(2)

ANSWER: B) 11 + sqrt(3) + 3*sqrt(2)

VERIFICATION:
- b = 4 - sqrt(3) ≈ 4 - 1.732 = 2.268 cm (pozitivno, manje od a = 7, OK)
- P = (7 + 2.268)/2 * 3 = 9.268/2 * 3 = 4.634 * 3 = 13.902
- (3/2)(11 - sqrt(3)) = 1.5 * (11 - 1.732) = 1.5 * 9.268 = 13.902 ✓
- Obim ≈ 11 + 1.732 + 4.243 ≈ 16.975
- Opcija A: 18 ≠ 16.975
- Opcija B: 11 + 1.732 + 4.243 = 16.975 ✓
- Opcija C: 11 + 4.243 = 15.243 ≠ 16.975
- Opcija D: 20 ≠ 16.975
- Opcija E: 11 + 5.196 = 16.196 ≠ 16.975
Answer B is correct.
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}

h1 {
  font-size: 2.2em;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1em;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4em;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(30, 41, 59, 0.8);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 12px 16px;
  min-width: 120px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85em;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1em;
  font-weight: 600;
}

.answer-option {
  min-width: 100px;
  transition: none;
  cursor: default;
}

.highlight {
  color: #60a5fa;
  font-weight: 600;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card h2 {
  color: #a78bfa;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  font-size: 1.05em;
  padding: 8px 0;
  user-select: none;
}

details summary:hover {
  color: #93c5fd;
}

details .detail-content {
  padding: 16px;
  margin-top: 8px;
  background: rgba(15, 23, 42, 0.5);
  border-radius: 10px;
  border: 1px solid #334155;
}

details .detail-content ul {
  list-style: none;
  padding-left: 0;
}

details .detail-content li {
  padding: 6px 0;
  padding-left: 20px;
  position: relative;
}

details .detail-content li::before {
  content: ">";
  position: absolute;
  left: 0;
  color: #a78bfa;
  font-weight: bold;
}

.canvas-card {
  text-align: center;
}

.canvas-card canvas {
  border-radius: 10px;
  max-width: 100%;
  touch-action: none;
}

.canvas-hint {
  color: #64748b;
  font-size: 0.85em;
  margin-top: 8px;
}

.step {
  display: flex;
  gap: 16px;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 12px;
  cursor: pointer;
  transition: border-left 0.2s, background 0.2s;
  border-left: 3px solid transparent;
}

.step:hover, .step.active {
  border-left: 3px solid #4ade80;
  background: rgba(74, 222, 128, 0.04);
}

.step-number {
  width: 32px;
  height: 32px;
  min-width: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9em;
  color: #0f172a;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  font-size: 1.1em;
  color: #e2e8f0;
  margin-bottom: 8px;
}

.step-content p {
  margin-bottom: 8px;
  color: #cbd5e1;
}

.math-block {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 10px 0;
  overflow-x: auto;
}

.note {
  color: #94a3b8;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 6px;
}

.checkpoint {
  background: rgba(99, 102, 241, 0.08);
  border: 1px solid rgba(99, 102, 241, 0.2);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 18px 0;
}

.checkpoint summary {
  color: #a78bfa;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.12), rgba(167, 139, 250, 0.12));
  border: 1px solid rgba(96, 165, 250, 0.3);
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  text-align: center;
}

.insight-box h2 {
  color: #a78bfa;
  justify-content: center;
}

.insight-formula {
  font-size: 1.4em;
  margin: 16px 0;
  color: #4ade80;
}

.final-answer {
  background: linear-gradient(135deg, rgba(52, 211, 153, 0.1), rgba(74, 222, 128, 0.1));
  border: 2px solid rgba(52, 211, 153, 0.3);
  text-align: center;
}

.final-answer h2 {
  color: #34d399;
  justify-content: center;
}

.answer-big {
  font-size: 1.8em;
  font-weight: 800;
  color: #4ade80;
  margin: 16px 0;
}

.answer-options-final {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin: 20px 0;
}

.answer-opt {
  padding: 10px 18px;
  border-radius: 8px;
  border: 1px solid #334155;
  background: rgba(15, 23, 42, 0.5);
  color: #94a3b8;
  font-size: 1em;
}

.answer-opt.correct {
  border-color: #34d399;
  background: rgba(52, 211, 153, 0.15);
  color: #4ade80;
  font-weight: 700;
}

.verification {
  color: #94a3b8;
  font-size: 0.95em;
  margin-top: 16px;
  padding: 14px;
  background: rgba(15, 23, 42, 0.5);
  border-radius: 8px;
  text-align: left;
}

.pitfall-card {
  border-left: 3px solid #f472b6;
}

.pitfall-card h2 {
  color: #f472b6;
}

.pitfall-card ul {
  list-style: none;
  padding-left: 0;
}

.pitfall-card li {
  padding: 8px 0;
  padding-left: 24px;
  position: relative;
  color: #cbd5e1;
}

.pitfall-card li::before {
  content: "!";
  position: absolute;
  left: 0;
  color: #f472b6;
  font-weight: bold;
  font-size: 1.1em;
}

.challenge-card {
  border-left: 3px solid #60a5fa;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6em; }
  .card { padding: 16px; }
  .step { flex-direction: column; gap: 10px; }
  .given-grid { flex-direction: column; }
  .given-item { min-width: auto; }
  .answer-options-final { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Obim trapeza</h1>
  <p class="subtitle">Geometrija ravni - trapez, trigonometrija, povrsina i obim</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Tekst zadatka</h2>
    <p>
      U trapezu povrsine \(\frac{3}{2}(11 - \sqrt{3})\) cm<sup>2</sup> duza osnovica je duzine
      <span class="highlight">7 cm</span>, a visina duzine <span class="highlight">3 cm</span>.
      Ako je jedan ugao na osnovici trapeza <span class="highlight">45&deg;</span>, onda je obim
      tog trapeza u centimetrima jednak:
    </p>

    <div class="given-grid" style="margin-bottom: 16px;">
      <div class="given-item">
        <div class="label">Povrsina</div>
        <div class="value">\(\frac{3}{2}(11 - \sqrt{3})\) cm&sup2;</div>
      </div>
      <div class="given-item">
        <div class="label">Duza osnovica</div>
        <div class="value">\(a = 7\) cm</div>
      </div>
      <div class="given-item">
        <div class="label">Visina</div>
        <div class="value">\(h = 3\) cm</div>
      </div>
      <div class="given-item">
        <div class="label">Ugao na osnovici</div>
        <div class="value">\(45°\)</div>
      </div>
    </div>

    <p style="margin-top: 12px; color: #94a3b8; font-weight: 600;">Ponudjeni odgovori:</p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(18\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(11 + \sqrt{3} + 3\sqrt{2}\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(11 + 3\sqrt{2}\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(20\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(11 + 3\sqrt{3}\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>
      Iz formule za povrsinu trapeza odredićemo kracu osnovicu \(b\). Zatim cemo, koristeci
      poznati ugao od \(45°\) i visinu, odrediti duzine oba kraka trapeza pomocu trigonometrije.
      Konacno, sabraćemo sve stranice da dobijemo obim.
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Kljucne formule i teoreme</summary>
      <div class="detail-content">
        <ul>
          <li><strong>Povrsina trapeza:</strong> \(P = \dfrac{a + b}{2} \cdot h\), gde su \(a\) i \(b\) osnovice, a \(h\) visina</li>
          <li><strong>Trigonometrijske funkcije u pravouglom trouglu:</strong>
            \(\tan(\alpha) = \dfrac{\text{naspramna kateta}}{\text{prilezeća kateta}}\),
            \(\sin(\alpha) = \dfrac{\text{naspramna kateta}}{\text{hipotenuza}}\)
          </li>
          <li><strong>Pitagorina teorema:</strong> \(c = \sqrt{a^2 + b^2}\) - za nalazenje hipotenuze pravouglog trougla</li>
          <li><strong>Poznate vrednosti:</strong> \(\tan 45° = 1\), \(\sin 45° = \dfrac{\sqrt{2}}{2}\), \(\tan 60° = \sqrt{3}\)</li>
        </ul>
        <canvas id="theoryCanvas" width="500" height="220" style="margin-top: 12px;"></canvas>
      </div>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card canvas-card">
    <h2>Dijagram trapeza</h2>
    <canvas id="mainCanvas" width="700" height="420"></canvas>
    <p class="canvas-hint">Interaktivni dijagram trapeza sa svim oznacenim elementima</p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step" id="step1">
      <div class="step-number">1</div>
      <div class="step-content">
        <h3>Odredjivanje krace osnovice iz formule za povrsinu</h3>
        <p>Formula za povrsinu trapeza glasi:</p>
        <div class="math-block">
          \[P = \frac{a + b}{2} \cdot h\]
        </div>
        <p>Zamenjujemo poznate vrednosti:</p>
        <div class="math-block">
          \[\frac{3}{2}(11 - \sqrt{3}) = \frac{7 + b}{2} \cdot 3\]
        </div>
        <p>Desnu stranu mozemo zapisati kao:</p>
        <div class="math-block">
          \[\frac{3}{2}(11 - \sqrt{3}) = \frac{3(7 + b)}{2}\]
        </div>
        <p>Pomnozimo obe strane sa \(2\):</p>
        <div class="math-block">
          \[3(11 - \sqrt{3}) = 3(7 + b)\]
        </div>
        <p>Podelimo obe strane sa \(3\):</p>
        <div class="math-block">
          \[11 - \sqrt{3} = 7 + b\]
        </div>
        <p>Odavde dobijamo:</p>
        <div class="math-block">
          \[b = 11 - \sqrt{3} - 7 = 4 - \sqrt{3}\]
        </div>
        <p class="note">Posto je \(\sqrt{3} \approx 1{,}732\), imamo \(b \approx 2{,}268\) cm, sto je manje od 7 cm - logicno, jer je \(b\) kraca osnovica.</p>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Kolika je kraca osnovica?</summary>
      <div class="detail-content">
        <p>\(b = 4 - \sqrt{3} \approx 2{,}27\) cm</p>
      </div>
    </details>

    <!-- Step 2 -->
    <div class="step" id="step2">
      <div class="step-number">2</div>
      <div class="step-content">
        <h3>Razlika osnovica i horizontalne projekcije krakova</h3>
        <p>Spustimo normale (visine) iz krajnjih tacaka krace osnovice na duzu. Razlika duzina osnovica
          jednaka je zbiru horizontalnih projekcija levog i desnog kraka:</p>
        <div class="math-block">
          \[d_1 + d_2 = a - b = 7 - (4 - \sqrt{3}) = 3 + \sqrt{3}\]
        </div>
        <p class="note">
          Gde su \(d_1\) i \(d_2\) horizontalne projekcije krakova na duzu osnovicu.
        </p>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step" id="step3">
      <div class="step-number">3</div>
      <div class="step-content">
        <h3>Odredjivanje kraka uz ugao od 45&deg;</h3>
        <p>U pravouglom trouglu koji formira krak sa uglom od \(45°\) na osnovici, visina trapeza je
          naspramna kateta, a horizontalna projekcija je prilezeca kateta.</p>
        <div class="math-block">
          \[\tan 45° = \frac{h}{d_1} \implies 1 = \frac{3}{d_1} \implies d_1 = 3\]
        </div>
        <p>Sada mozemo naci duzinu kraka \(c_1\) koristeci Pitagorinu teoremu (ili sinusnu funkciju):</p>
        <div class="math-block">
          \[c_1 = \frac{h}{\sin 45°} = \frac{3}{\frac{\sqrt{2}}{2}} = \frac{3 \cdot 2}{\sqrt{2}} = \frac{6}{\sqrt{2}} = 3\sqrt{2}\]
        </div>
        <p class="note">Alternativno: \(c_1 = \sqrt{d_1^2 + h^2} = \sqrt{9 + 9} = \sqrt{18} = 3\sqrt{2}\).</p>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step" id="step4">
      <div class="step-number">4</div>
      <div class="step-content">
        <h3>Odredjivanje drugog kraka</h3>
        <p>Horizontalna projekcija drugog kraka je:</p>
        <div class="math-block">
          \[d_2 = (3 + \sqrt{3}) - 3 = \sqrt{3}\]
        </div>
        <p>Duzina drugog kraka \(c_2\) pomocu Pitagorine teoreme:</p>
        <div class="math-block">
          \[c_2 = \sqrt{h^2 + d_2^2} = \sqrt{3^2 + (\sqrt{3})^2} = \sqrt{9 + 3} = \sqrt{12} = 2\sqrt{3}\]
        </div>
        <p class="note">Ugao na toj strani osnovice je \(\alpha = \arctan\!\left(\frac{3}{\sqrt{3}}\right) = \arctan(\sqrt{3}) = 60°\). Ukupan zbir uglova na duzoj osnovici: \(45° + 60° = 105°\).</p>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Koliki su krakovi trapeza?</summary>
      <div class="detail-content">
        <p>\(c_1 = 3\sqrt{2} \approx 4{,}24\) cm i \(c_2 = 2\sqrt{3} \approx 3{,}46\) cm</p>
      </div>
    </details>

    <!-- Step 5 -->
    <div class="step" id="step5">
      <div class="step-number">5</div>
      <div class="step-content">
        <h3>Racunanje obima</h3>
        <p>Obim trapeza je zbir svih cetiri stranice:</p>
        <div class="math-block">
          \[O = a + b + c_1 + c_2\]
        </div>
        <p>Zamenjujemo vrednosti:</p>
        <div class="math-block">
          \[O = 7 + (4 - \sqrt{3}) + 3\sqrt{2} + 2\sqrt{3}\]
        </div>
        <p>Grupisemo racionalne i iracionalne clanove:</p>
        <div class="math-block">
          \[O = (7 + 4) + (-\sqrt{3} + 2\sqrt{3}) + 3\sqrt{2}\]
        </div>
        <div class="math-block">
          \[O = 11 + \sqrt{3} + 3\sqrt{2}\]
        </div>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Koliki je obim numerickim izrazom?</summary>
      <div class="detail-content">
        <p>\(O \approx 11 + 1{,}732 + 4{,}243 \approx 16{,}975\) cm</p>
      </div>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Kljucni uvid</h2>
    <p style="color: #cbd5e1;">Poznati ugao od \(45°\) formira jednakokraki pravougli trougao (obe katete jednake visini \(h = 3\)), dok se drugi krak odredjuje iz razlike osnovica. Ispostavlja se da je drugi ugao na osnovici \(60°\), sto daje "lepe" iracionalne vrednosti.</p>
    <div class="insight-formula">
      \[O = 11 + \sqrt{3} + 3\sqrt{2}\]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer">
    <h2>Konacan odgovor</h2>
    <div class="answer-big">
      \(O = 11 + \sqrt{3} + 3\sqrt{2}\)
    </div>

    <div class="answer-options-final">
      <div class="answer-opt">(A) \(18\)</div>
      <div class="answer-opt correct">(B) \(11 + \sqrt{3} + 3\sqrt{2}\)</div>
      <div class="answer-opt">(C) \(11 + 3\sqrt{2}\)</div>
      <div class="answer-opt">(D) \(20\)</div>
      <div class="answer-opt">(E) \(11 + 3\sqrt{3}\)</div>
    </div>

    <div class="verification">
      <strong>Verifikacija:</strong><br>
      Numericka provera: \(O \approx 11 + 1{,}732 + 4{,}243 \approx 16{,}975\) cm.<br>
      Povrsina: \(P = \frac{7 + (4 - \sqrt{3})}{2} \cdot 3 = \frac{11 - \sqrt{3}}{2} \cdot 3 = \frac{3}{2}(11 - \sqrt{3})\) &check; &mdash; tacan rezultat.<br>
      Zbir uglova na duzoj osnovici: \(45° + 60° = 105° < 180°\), sto je konzistentno sa trapezom. &check;
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfall-card">
    <h2>Ceste greske</h2>
    <ul>
      <li><strong>Pogresno grupisanje korenova:</strong> Pri sabiranju \(-\sqrt{3} + 2\sqrt{3}\) mnogi ucenici dobiju \(3\sqrt{3}\) umesto tacnog \(\sqrt{3}\). Pazljivo saberite: \(-1 + 2 = 1\), dakle rezultat je \(1 \cdot \sqrt{3} = \sqrt{3}\).</li>
      <li><strong>Zaboravljanje da trapez ima dva razlicita kraka:</strong> Osim ako nije jednakokraki, oba kraka se moraju zasebno izracunati. Ovde krakovi imaju razlicite duzine (\(3\sqrt{2}\) i \(2\sqrt{3}\)).</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Sta ako je ugao na osnovici bio \(60°\) umesto \(45°\)? Koliki bi tada bio obim trapeza?</p>
    <details>
      <summary>Nagoveštaj</summary>
      <div class="detail-content">
        <p>Ponovite isti postupak: iz \(\tan 60° = \sqrt{3}\) odredite \(d_1 = \frac{3}{\sqrt{3}} = \sqrt{3}\), pa \(d_2 = 3 + \sqrt{3} - \sqrt{3} = 3\). Krak uz ugao \(60°\) je \(\frac{3}{\sin 60°} = 2\sqrt{3}\), a drugi krak \(\sqrt{9 + 9} = 3\sqrt{2}\). Obim ostaje isti!</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  // Theory canvas - right triangle illustration
  const tc = document.getElementById('theoryCanvas');
  if (tc) {
    const ctx = tc.getContext('2d');
    const w = tc.width, h = tc.height;

    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, w, h);

    // Draw a right triangle with angle alpha at bottom-left
    const ox = 60, oy = h - 40;
    const bx = 260, by = oy;
    const tx = ox, ty = 50;

    // Triangle fill
    ctx.beginPath();
    ctx.moveTo(ox, oy);
    ctx.lineTo(bx, by);
    ctx.lineTo(tx, ty);
    ctx.closePath();
    ctx.fillStyle = 'rgba(96, 165, 250, 0.08)';
    ctx.fill();

    // Triangle sides
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(ox, oy);
    ctx.lineTo(bx, by);
    ctx.lineTo(tx, ty);
    ctx.closePath();
    ctx.stroke();

    // Right angle marker
    const rs = 15;
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(ox + rs, oy);
    ctx.lineTo(ox + rs, oy - rs);
    ctx.lineTo(ox, oy - rs);
    ctx.stroke();

    // Angle arc at bottom-right (alpha angle)
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    const angle1 = Math.PI;
    const angle2 = Math.PI + Math.atan2(oy - ty, bx - tx);
    ctx.arc(bx, by, 25, angle1, angle2, true);
    ctx.stroke();

    // Labels
    ctx.font = 'bold 14px Segoe UI, sans-serif';
    ctx.textAlign = 'center';

    // alpha label
    ctx.fillStyle = '#f472b6';
    ctx.fillText('\u03B1', bx - 38, by - 10);

    // "h" label on vertical side
    ctx.fillStyle = '#60a5fa';
    ctx.fillText('h', ox - 18, (oy + ty) / 2);

    // "d" label on horizontal side
    ctx.fillText('d', (ox + bx) / 2, oy + 22);

    // "c" label on hypotenuse
    ctx.fillStyle = '#a78bfa';
    ctx.fillText('c', (bx + tx) / 2 + 18, (by + ty) / 2);

    // Formulas on the right
    ctx.font = '13px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('tan(\u03B1) = h / d', 310, 60);
    ctx.fillText('sin(\u03B1) = h / c', 310, 85);
    ctx.fillText('c = \u221A(h\u00B2 + d\u00B2)', 310, 110);
  }

  // Main canvas - trapezoid diagram
  const mc = document.getElementById('mainCanvas');
  if (mc) {
    const ctx = mc.getContext('2d');
    const w = mc.width, h = mc.height;

    function draw() {
      ctx.clearRect(0, 0, w, h);
      ctx.fillStyle = '#0f172a';
      ctx.fillRect(0, 0, w, h);

      // Scale and position
      const scale = 60;
      const centerX = w / 2;
      const baseY = h - 100;
      const topY = baseY - 3 * scale; // height = 3

      // Trapezoid vertices (bottom-left origin)
      // A = bottom-left, B = bottom-right, C = top-right, D = top-left
      const a_len = 7;
      const b_len = 4 - Math.sqrt(3);
      const d1 = 3; // horizontal projection of left leg (45 degree side)
      const d2 = Math.sqrt(3); // horizontal projection of right leg

      const Ax = centerX - (a_len * scale) / 2;
      const Ay = baseY;
      const Bx = centerX + (a_len * scale) / 2;
      const By = baseY;
      const Dx = Ax + d1 * scale;
      const Dy = topY;
      const Cx = Bx - d2 * scale;
      const Cy = topY;

      // Grid
      ctx.strokeStyle = '#1e293b';
      ctx.lineWidth = 0.5;
      for (let x = 0; x < w; x += 30) {
        ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, h); ctx.stroke();
      }
      for (let y = 0; y < h; y += 30) {
        ctx.beginPath(); ctx.moveTo(0, y); ctx.lineTo(w, y); ctx.stroke();
      }

      // Trapezoid fill
      ctx.beginPath();
      ctx.moveTo(Ax, Ay);
      ctx.lineTo(Bx, By);
      ctx.lineTo(Cx, Cy);
      ctx.lineTo(Dx, Dy);
      ctx.closePath();
      ctx.fillStyle = 'rgba(96, 165, 250, 0.1)';
      ctx.fill();

      // Trapezoid edges
      ctx.strokeStyle = '#60a5fa';
      ctx.lineWidth = 2.5;
      ctx.beginPath();
      ctx.moveTo(Ax, Ay);
      ctx.lineTo(Bx, By);
      ctx.lineTo(Cx, Cy);
      ctx.lineTo(Dx, Dy);
      ctx.closePath();
      ctx.stroke();

      // Dashed height lines from D and C down
      ctx.setLineDash([6, 4]);
      ctx.strokeStyle = '#94a3b8';
      ctx.lineWidth = 1.2;

      // Height from D
      ctx.beginPath();
      ctx.moveTo(Dx, Dy);
      ctx.lineTo(Dx, Ay);
      ctx.stroke();

      // Height from C
      ctx.beginPath();
      ctx.moveTo(Cx, Cy);
      ctx.lineTo(Cx, Ay);
      ctx.stroke();

      ctx.setLineDash([]);

      // Right angle markers
      const rs = 10;

      // At D foot
      ctx.strokeStyle = '#4ade80';
      ctx.lineWidth = 1.5;
      ctx.beginPath();
      ctx.moveTo(Dx - rs, Ay);
      ctx.lineTo(Dx - rs, Ay - rs);
      ctx.lineTo(Dx, Ay - rs);
      ctx.stroke();

      // At C foot
      ctx.beginPath();
      ctx.moveTo(Cx + rs, Ay);
      ctx.lineTo(Cx + rs, Ay - rs);
      ctx.lineTo(Cx, Ay - rs);
      ctx.stroke();

      // 45 degree angle arc at A
      ctx.strokeStyle = '#f472b6';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.arc(Ax, Ay, 35, -Math.PI/4, 0, false);
      ctx.stroke();

      // 60 degree angle arc at B
      ctx.strokeStyle = '#a78bfa';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.arc(Bx, By, 35, Math.PI, Math.PI + Math.PI/3, true);
      ctx.stroke();

      // Labels
      ctx.font = 'bold 15px Segoe UI, sans-serif';
      ctx.textAlign = 'center';

      // Vertex labels
      ctx.fillStyle = '#4ade80';
      ctx.fillText('A', Ax - 16, Ay + 20);
      ctx.fillText('B', Bx + 16, By + 20);
      ctx.fillText('D', Dx - 16, Dy - 10);
      ctx.fillText('C', Cx + 16, Cy - 10);

      // Side labels
      ctx.font = 'bold 14px Segoe UI, sans-serif';

      // Bottom base a = 7
      ctx.fillStyle = '#60a5fa';
      ctx.fillText('a = 7', (Ax + Bx) / 2, Ay + 30);

      // Top base b = 4 - sqrt(3)
      ctx.fillText('b = 4 - \u221A3', (Dx + Cx) / 2, Dy - 16);

      // Left leg c1 = 3sqrt(2)
      ctx.fillStyle = '#f472b6';
      ctx.save();
      const midLX = (Ax + Dx) / 2 - 24;
      const midLY = (Ay + Dy) / 2;
      ctx.fillText('c\u2081 = 3\u221A2', midLX, midLY);
      ctx.restore();

      // Right leg c2 = 2sqrt(3)
      ctx.fillStyle = '#a78bfa';
      ctx.fillText('c\u2082 = 2\u221A3', (Bx + Cx) / 2 + 28, (By + Cy) / 2);

      // Height label
      ctx.fillStyle = '#94a3b8';
      ctx.fillText('h = 3', Dx + 22, (Dy + Ay) / 2);

      // Angle labels
      ctx.font = 'bold 13px Segoe UI, sans-serif';
      ctx.fillStyle = '#f472b6';
      ctx.fillText('45\u00B0', Ax + 48, Ay - 12);

      ctx.fillStyle = '#a78bfa';
      ctx.fillText('60\u00B0', Bx - 50, By - 12);

      // Horizontal projection labels (d1 and d2)
      ctx.font = '12px Segoe UI, sans-serif';
      ctx.fillStyle = '#64748b';

      // d1 bracket
      const d1px = Ax;
      const d1ex = Dx;
      ctx.beginPath();
      ctx.moveTo(d1px, Ay + 44);
      ctx.lineTo(d1ex, Ay + 44);
      ctx.strokeStyle = '#64748b';
      ctx.lineWidth = 1;
      ctx.stroke();
      ctx.fillText('d\u2081 = 3', (d1px + d1ex) / 2, Ay + 58);

      // d2 bracket
      const d2px = Cx;
      const d2ex = Bx;
      ctx.beginPath();
      ctx.moveTo(d2px, Ay + 44);
      ctx.lineTo(d2ex, Ay + 44);
      ctx.stroke();
      ctx.fillText('d\u2082 = \u221A3', (d2px + d2ex) / 2, Ay + 58);

      // Vertex points
      const points = [[Ax, Ay], [Bx, By], [Cx, Cy], [Dx, Dy]];
      points.forEach(([px, py]) => {
        ctx.beginPath();
        ctx.arc(px, py, 4, 0, Math.PI * 2);
        ctx.fillStyle = '#e2e8f0';
        ctx.fill();
      });
    }

    draw();
  }

  // Step click interaction
  document.querySelectorAll('.step').forEach(step => {
    step.addEventListener('click', function() {
      document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
      this.classList.toggle('active');
    });
  });
})();
</script>
</div>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Obim trapeza sa poznatom povrsinom, osnovicom, visinom i uglom",
  "subject": "math",
  "unit": "geometry",
  "topic_tags": ["trapez", "obim", "povrsina trapeza", "trigonometrija", "Pitagorina teorema"]
}
BRAINSPARK_META-->