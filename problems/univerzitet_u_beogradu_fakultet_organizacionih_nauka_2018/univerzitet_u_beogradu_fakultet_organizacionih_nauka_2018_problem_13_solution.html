<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Geometrijski i aritmetički niz</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM:
Realni brojevi a, b i c, čiji je zbir jednak 19, čine rastući geometrijski niz.
Ako brojevi a, b i c - 1 čine aritmetički niz, onda je c * (a + b)^(-1) jednako:
A) 4/15   B) 9/10   C) 90   D) 15/4   E) 10/9

SOLUTION:

Step 1: Set up equations from the geometric sequence condition.
Since a, b, c form a geometric sequence: b^2 = a * c  ... (1)
Sum condition: a + b + c = 19                            ... (2)

Step 2: Use the arithmetic sequence condition.
a, b, c - 1 form an arithmetic sequence means:
b - a = (c - 1) - b
2b = a + c - 1                                           ... (3)

Step 3: From (2): a + c = 19 - b. Substitute into (3):
2b = (19 - b) - 1
2b = 18 - b
3b = 18
b = 6

Step 4: Find a and c.
From (2): a + c = 19 - 6 = 13
From (1): a * c = b^2 = 36

So a and c are roots of: t^2 - 13t + 36 = 0
Discriminant: 169 - 144 = 25
t = (13 ± 5) / 2
t = 9 or t = 4

Since the GP is increasing (a < b < c) and b = 6:
a = 4, c = 9 (since 4 < 6 < 9)

Step 5: Compute c * (a + b)^(-1):
c / (a + b) = 9 / (4 + 6) = 9 / 10

VERIFICATION:
- GP: 4, 6, 9; ratio = 6/4 = 3/2, 9/6 = 3/2. Correct.
- Increasing: 4 < 6 < 9. Correct.
- Sum: 4 + 6 + 9 = 19. Correct.
- AP: a, b, c-1 = 4, 6, 8; differences = 2, 2. Correct.
- c/(a+b) = 9/10. Matches option B.

ANSWER: B) 9/10
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  text-align: center;
}

.subtitle {
  color: #94a3b8;
  text-align: center;
  font-size: 1.05rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.35rem;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.1rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(30, 41, 59, 0.8);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 90px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.05rem;
  font-weight: 600;
}

.answer-option {
  transition: none;
  cursor: default;
}

.plan-text {
  color: #e2e8f0;
  font-size: 1.02rem;
  line-height: 1.8;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 1.05rem;
  padding: 8px 0;
  user-select: none;
}

details summary:hover {
  color: #c4b5fd;
}

.theory-list {
  list-style: none;
  margin-top: 12px;
}

.theory-list li {
  padding: 10px 14px;
  margin-bottom: 8px;
  background: rgba(96, 165, 250, 0.06);
  border-left: 3px solid #60a5fa;
  border-radius: 0 8px 8px 0;
  color: #e2e8f0;
  line-height: 1.8;
}

.canvas-card {
  text-align: center;
}

.canvas-card canvas {
  border-radius: 10px;
  border: 1px solid #334155;
  max-width: 100%;
  touch-action: none;
}

.canvas-hint {
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

.step {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  padding: 16px;
  border-radius: 10px;
  cursor: pointer;
  transition: border-left 0.2s, background 0.2s;
  border-left: 3px solid transparent;
}

.step:hover, .step.active {
  border-left: 3px solid #4ade80;
  background: rgba(74, 222, 128, 0.04);
}

.step-badge {
  width: 32px;
  height: 32px;
  min-width: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  font-size: 1.05rem;
  margin-bottom: 8px;
  color: #e2e8f0;
}

.step-content p {
  color: #cbd5e1;
  margin-bottom: 8px;
  line-height: 1.7;
}

.math-block {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 10px 0;
  overflow-x: auto;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 6px;
}

.checkpoint {
  background: rgba(167, 139, 250, 0.08);
  border: 1px solid rgba(167, 139, 250, 0.2);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 15px 0;
}

.checkpoint summary {
  color: #a78bfa;
  font-size: 0.95rem;
}

.checkpoint .answer {
  margin-top: 10px;
  padding: 10px 14px;
  background: rgba(74, 222, 128, 0.08);
  border-radius: 8px;
  color: #4ade80;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167, 139, 250, 0.3);
  border-radius: 14px;
  padding: 24px;
  text-align: center;
  margin-bottom: 24px;
}

.insight-box h2 {
  justify-content: center;
  color: #a78bfa;
}

.insight-formula {
  font-size: 1.4rem;
  margin: 16px 0;
  color: #e2e8f0;
}

.final-answer-card {
  background: linear-gradient(135deg, rgba(52, 211, 153, 0.1), rgba(74, 222, 128, 0.1));
  border: 1px solid rgba(74, 222, 128, 0.3);
}

.final-answer-card h2 {
  color: #4ade80;
}

.final-answer-value {
  font-size: 1.8rem;
  font-weight: 800;
  color: #4ade80;
  text-align: center;
  margin: 16px 0;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 20px 0;
}

.final-option {
  padding: 10px 22px;
  border-radius: 10px;
  border: 1px solid #334155;
  background: #1e293b;
  color: #94a3b8;
  font-size: 1rem;
}

.final-option.correct {
  border-color: #4ade80;
  background: rgba(74, 222, 128, 0.12);
  color: #4ade80;
  font-weight: 700;
}

.verification {
  background: rgba(96, 165, 250, 0.06);
  border-radius: 10px;
  padding: 14px 18px;
  margin-top: 14px;
  color: #94a3b8;
  font-size: 0.95rem;
  line-height: 1.7;
}

.pitfalls-list {
  list-style: none;
}

.pitfalls-list li {
  padding: 10px 14px;
  margin-bottom: 8px;
  background: rgba(224, 148, 104, 0.06);
  border-left: 3px solid #e09468;
  border-radius: 0 8px 8px 0;
  color: #cbd5e1;
  line-height: 1.7;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

.highlight-blue {
  color: #60a5fa;
  font-weight: 600;
}

.highlight-green {
  color: #4ade80;
  font-weight: 600;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step { flex-direction: column; gap: 10px; }
  .given-grid { flex-direction: column; }
  .final-options { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>

<div class="container">

  <h1>Geometrijski i aritmetički niz</h1>
  <p class="subtitle">Algebra -- nizovi, sistemi jednačina, kvadratna jednačina</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Tekst zadatka</h2>
    <p>
      Realni brojevi \(a\), \(b\) i \(c\), čiji je zbir jednak <span class="highlight-blue">19</span>,
      čine <span class="highlight-pink">rastući geometrijski niz</span>. Ako brojevi
      \(a\), \(b\) i \(c - 1\) čine <span class="highlight-pink">aritmetički niz</span>,
      onda je \(c \cdot (a + b)^{-1}\) jednako:
    </p>

    <div class="given-grid" style="margin-bottom: 8px;">
      <div class="given-item">
        <div class="label">Zbir</div>
        <div class="value">\(a + b + c = 19\)</div>
      </div>
      <div class="given-item">
        <div class="label">GP uslov</div>
        <div class="value">\(b^2 = ac\)</div>
      </div>
      <div class="given-item">
        <div class="label">AP uslov</div>
        <div class="value">\(a, b, c\!-\!1\)</div>
      </div>
      <div class="given-item">
        <div class="label">Traži se</div>
        <div class="value">\(\dfrac{c}{a+b}\)</div>
      </div>
    </div>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(\dfrac{4}{15}\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(\dfrac{9}{10}\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(90\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(\dfrac{15}{4}\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(\dfrac{10}{9}\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <h2>Plan rešavanja</h2>
    <p class="plan-text">
      Iskoristićemo svojstva geometrijskog i aritmetičkog niza da postavimo sistem od tri jednačine
      sa tri nepoznate. Izrazićemo \(b\) iz uslova za aritmetički niz, a zatim ćemo \(a\) i \(c\) naći
      rešavanjem kvadratne jednačine, vodeći računa o tome da je niz rastući.
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Ključne formule i teoreme</summary>
      <ul class="theory-list">
        <li>
          <strong>Geometrijski niz</strong> &mdash; tri broja \(a, b, c\) čine geometrijski niz
          ako i samo ako važi:
          \[ b^2 = a \cdot c \]
          (srednji član je geometrijska sredina krajnjih)
        </li>
        <li>
          <strong>Aritmetički niz</strong> &mdash; tri broja \(x, y, z\) čine aritmetički niz
          ako i samo ako važi:
          \[ 2y = x + z \]
          (srednji član je aritmetička sredina krajnjih)
        </li>
        <li>
          <strong>Vijetove formule</strong> &mdash; ako su \(t_1\) i \(t_2\) koreni jednačine
          \(t^2 - St + P = 0\), tada:
          \[ t_1 + t_2 = S, \quad t_1 \cdot t_2 = P \]
        </li>
      </ul>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card canvas-card">
    <h2>Vizuelni prikaz</h2>
    <canvas id="mainCanvas" width="800" height="420"></canvas>
    <p class="canvas-hint">Geometrijski niz 4, 6, 9 sa količnikom q = 3/2 i odgovarajući aritmetički niz 4, 6, 8</p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <div class="step" tabindex="0">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Postavljamo jednačine</h3>
        <p>Iz uslova zadatka izvlačimo tri ključne relacije:</p>
        <div class="math-block">
          \[ a + b + c = 19 \quad \text{...(1)} \]
          \[ b^2 = a \cdot c \quad \text{...(2) -- geometrijski niz} \]
          \[ 2b = a + (c - 1) \quad \text{...(3) -- aritmetički niz} \]
        </div>
        <p class="note">
          Jednačina (3) dolazi iz uslova da je \(b\) aritmetička sredina od \(a\) i \(c - 1\).
        </p>
      </div>
    </div>

    <div class="step" tabindex="0">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Nalazimo \(b\)</h3>
        <p>Iz jednačine (1) izrazimo zbir \(a + c\):</p>
        <div class="math-block">
          \[ a + c = 19 - b \]
        </div>
        <p>Uvrstimo ovo u jednačinu (3):</p>
        <div class="math-block">
          \[ 2b = (19 - b) - 1 \]
        </div>
        <p>Sredimo:</p>
        <div class="math-block">
          \[ 2b = 18 - b \]
          \[ 3b = 18 \]
          \[ \boxed{b = 6} \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri sebe: Koliko je \(a + c\)?</summary>
      <div class="answer">
        Pošto je \(b = 6\) i \(a + b + c = 19\), sledi \(a + c = 19 - 6 = 13\).
      </div>
    </details>

    <div class="step" tabindex="0">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Postavljamo jednačinu za \(a\) i \(c\)</h3>
        <p>Sada znamo:</p>
        <div class="math-block">
          \[ a + c = 13 \]
          \[ a \cdot c = b^2 = 36 \]
        </div>
        <p>Po Vijetovim formulama, \(a\) i \(c\) su koreni kvadratne jednačine:</p>
        <div class="math-block">
          \[ t^2 - 13t + 36 = 0 \]
        </div>
      </div>
    </div>

    <div class="step" tabindex="0">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Rešavamo kvadratnu jednačinu</h3>
        <p>Izračunajmo diskriminantu:</p>
        <div class="math-block">
          \[ D = 13^2 - 4 \cdot 36 = 169 - 144 = 25 \]
        </div>
        <p>Koreni su:</p>
        <div class="math-block">
          \[ t_{1,2} = \frac{13 \pm \sqrt{25}}{2} = \frac{13 \pm 5}{2} \]
        </div>
        <div class="math-block">
          \[ t_1 = \frac{13 + 5}{2} = 9, \quad t_2 = \frac{13 - 5}{2} = 4 \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri sebe: Zašto moramo da izaberemo \(a = 4\) i \(c = 9\)?</summary>
      <div class="answer">
        Zato što je niz <strong>rastući</strong>: \(a < b < c\). Pošto je \(b = 6\), mora da važi
        \(a < 6 < c\). Jedina mogućnost je \(a = 4\) i \(c = 9\).
      </div>
    </details>

    <div class="step" tabindex="0">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Određujemo \(a\) i \(c\) iz uslova rastuće</h3>
        <p>Geometrijski niz je <span class="highlight-pink">rastući</span>, tj. \(a < b < c\).</p>
        <p>Pošto je \(b = 6\), mora da važi \(a < 6\) i \(c > 6\).</p>
        <div class="math-block">
          \[ \boxed{a = 4, \quad b = 6, \quad c = 9} \]
        </div>
        <p class="note">Provera: količnik \(q = \frac{b}{a} = \frac{6}{4} = \frac{3}{2}\),
          i \(\frac{c}{b} = \frac{9}{6} = \frac{3}{2}\). Niz je zaista geometrijski sa \(q = \frac{3}{2} > 1\).</p>
      </div>
    </div>

    <div class="step" tabindex="0">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Izračunavamo traženi izraz</h3>
        <p>Konačno, nalazimo:</p>
        <div class="math-block">
          \[ c \cdot (a + b)^{-1} = \frac{c}{a + b} = \frac{9}{4 + 6} = \frac{9}{10} \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri sebe: Da li 4, 6, 8 čine aritmetički niz?</summary>
      <div class="answer">
        Da! \(c - 1 = 9 - 1 = 8\), pa imamo niz \(4, 6, 8\) sa razlikom \(d = 2\). To jeste aritmetički niz.
      </div>
    </details>

  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Ključni uvid</h2>
    <p style="color: #cbd5e1; margin-bottom: 12px;">
      Kombinovanjem uslova za zbir i aritmetički niz odmah dobijamo \(b = 6\).
      Zatim Vijetove formule svode problem na jednostavnu kvadratnu jednačinu.
    </p>
    <div class="insight-formula">
      \[ a = 4, \quad b = 6, \quad c = 9 \quad \Longrightarrow \quad \frac{c}{a+b} = \frac{9}{10} \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer-card">
    <h2>Konačan odgovor</h2>

    <div class="final-answer-value">
      \(\dfrac{c}{a+b} = \dfrac{9}{10}\)
    </div>

    <div class="final-options">
      <div class="final-option">(A) \(\dfrac{4}{15}\)</div>
      <div class="final-option correct">(B) \(\dfrac{9}{10}\)</div>
      <div class="final-option">(C) \(90\)</div>
      <div class="final-option">(D) \(\dfrac{15}{4}\)</div>
      <div class="final-option">(E) \(\dfrac{10}{9}\)</div>
    </div>

    <div class="verification">
      <strong>Verifikacija:</strong><br>
      Geometrijski niz: \(4, 6, 9\) -- količnik \(q = \frac{3}{2}\), niz je rastući.
      Zbir: \(4 + 6 + 9 = 19\).
      Aritmetički niz: \(4, 6, 8\) -- razlika \(d = 2\).
      Sve tri jednačine su zadovoljene, a traženi izraz daje \(\frac{9}{10}\).
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Česte greške</h2>
    <ul class="pitfalls-list">
      <li>
        <strong>Zamena \(a\) i \(c\):</strong> Ako se izabere \(a = 9\) i \(c = 4\),
        niz \(9, 6, 4\) bi bio <em>opadajući</em>, a u zadatku se traži rastući.
        Tada bi se dobio pogrešan odgovor \(\frac{4}{15}\) (opcija A).
      </li>
      <li>
        <strong>Zaboravljanje "\(c - 1\)":</strong> Ako se koristi \(c\) umesto \(c - 1\)
        u uslovu aritmetičkog niza, sistem jednačina daje drugačije rezultate.
        Pažljivo pročitajte tekst zadatka!
      </li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card">
    <h2>Bonus izazov</h2>
    <p>
      Ako bi umesto uslova \(a + b + c = 19\) bio dat uslov \(a + b + c = 37\),
      a svi ostali uslovi ostali isti, koliko bi iznosilo \(c \cdot (a + b)^{-1}\)?
    </p>
    <details>
      <summary>Hint</summary>
      <div style="margin-top: 10px; color: #cbd5e1;">
        Isti pristup: iz uslova za aritmetički niz i zbir dobija se \(b = 12\),
        pa je \(a + c = 25\) i \(ac = 144\). Reši kvadratnu \(t^2 - 25t + 144 = 0\)
        i odredi koji koren je \(a\), a koji \(c\) (niz je rastući!).
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  // Step click highlighting
  const steps = document.querySelectorAll('.step');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.add('active');
    });
  });

  // Canvas visualization
  const canvas = document.getElementById('mainCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  function draw() {
    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Title
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';

    // --- GEOMETRIC SEQUENCE ---
    const gpY = 130;
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
    ctx.fillText('Geometrijski niz (GP): a, b, c', W / 2, 40);

    // Number line for GP
    const nlLeft = 100;
    const nlRight = 700;
    const nlY = gpY;

    // Line
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(nlLeft, nlY);
    ctx.lineTo(nlRight, nlY);
    ctx.stroke();

    // Tick marks and values for GP: 4, 6, 9
    const gpVals = [
      { val: 4, label: 'a = 4', color: '#60a5fa' },
      { val: 6, label: 'b = 6', color: '#a78bfa' },
      { val: 9, label: 'c = 9', color: '#f472b6' }
    ];

    const minVal = 0;
    const maxVal = 12;
    const scale = (nlRight - nlLeft) / (maxVal - minVal);
    const toX = v => nlLeft + (v - minVal) * scale;

    // Minor ticks
    for (let i = 0; i <= maxVal; i++) {
      const x = toX(i);
      ctx.strokeStyle = '#334155';
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.moveTo(x, nlY - 6);
      ctx.lineTo(x, nlY + 6);
      ctx.stroke();

      ctx.fillStyle = '#475569';
      ctx.font = '11px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(i.toString(), x, nlY + 22);
    }

    // GP points
    gpVals.forEach(item => {
      const x = toX(item.val);

      // Glow
      const grd = ctx.createRadialGradient(x, nlY, 0, x, nlY, 20);
      grd.addColorStop(0, item.color + '44');
      grd.addColorStop(1, 'transparent');
      ctx.fillStyle = grd;
      ctx.fillRect(x - 20, nlY - 20, 40, 40);

      // Dot
      ctx.fillStyle = item.color;
      ctx.beginPath();
      ctx.arc(x, nlY, 8, 0, Math.PI * 2);
      ctx.fill();

      // Label
      ctx.fillStyle = item.color;
      ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(item.label, x, nlY - 20);
    });

    // Ratio arrows for GP
    const arrowY = nlY - 48;
    drawRatioArrow(toX(4), toX(6), arrowY, 'x 3/2', '#34d399');
    drawRatioArrow(toX(6), toX(9), arrowY, 'x 3/2', '#34d399');

    // --- ARITHMETIC SEQUENCE ---
    const apY = 260;
    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
    ctx.fillText('Aritmeticki niz (AP): a, b, c - 1', W / 2, 195);

    // Line
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(nlLeft, apY);
    ctx.lineTo(nlRight, apY);
    ctx.stroke();

    // Minor ticks
    for (let i = 0; i <= maxVal; i++) {
      const x = toX(i);
      ctx.strokeStyle = '#334155';
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.moveTo(x, apY - 6);
      ctx.lineTo(x, apY + 6);
      ctx.stroke();

      ctx.fillStyle = '#475569';
      ctx.font = '11px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(i.toString(), x, apY + 22);
    }

    // AP values: 4, 6, 8
    const apVals = [
      { val: 4, label: 'a = 4', color: '#60a5fa' },
      { val: 6, label: 'b = 6', color: '#a78bfa' },
      { val: 8, label: 'c - 1 = 8', color: '#f472b6' }
    ];

    apVals.forEach(item => {
      const x = toX(item.val);

      const grd = ctx.createRadialGradient(x, apY, 0, x, apY, 20);
      grd.addColorStop(0, item.color + '44');
      grd.addColorStop(1, 'transparent');
      ctx.fillStyle = grd;
      ctx.fillRect(x - 20, apY - 20, 40, 40);

      ctx.fillStyle = item.color;
      ctx.beginPath();
      ctx.arc(x, apY, 8, 0, Math.PI * 2);
      ctx.fill();

      ctx.fillStyle = item.color;
      ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(item.label, x, apY - 20);
    });

    // Difference arrows for AP
    const apArrowY = apY - 48;
    drawRatioArrow(toX(4), toX(6), apArrowY, '+ 2', '#34d399');
    drawRatioArrow(toX(6), toX(8), apArrowY, '+ 2', '#34d399');

    // --- RESULT BOX ---
    const boxY = 320;
    const boxW = 380;
    const boxH = 70;
    const boxX = (W - boxW) / 2;

    ctx.fillStyle = 'rgba(74, 222, 128, 0.08)';
    ctx.strokeStyle = 'rgba(74, 222, 128, 0.3)';
    ctx.lineWidth = 2;
    roundRect(ctx, boxX, boxY, boxW, boxH, 12);
    ctx.fill();
    ctx.stroke();

    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 20px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('c / (a + b) = 9 / (4 + 6) = 9/10', W / 2, boxY + 42);
  }

  function drawRatioArrow(x1, x2, y, label, color) {
    ctx.strokeStyle = color;
    ctx.fillStyle = color;
    ctx.lineWidth = 2;

    // Curved arrow
    ctx.beginPath();
    const midX = (x1 + x2) / 2;
    const cpY = y - 15;
    ctx.moveTo(x1, y + 10);
    ctx.quadraticCurveTo(midX, cpY, x2, y + 10);
    ctx.stroke();

    // Arrow head
    const angle = Math.atan2(10, (x2 - midX));
    const headLen = 8;
    ctx.beginPath();
    ctx.moveTo(x2, y + 10);
    ctx.lineTo(x2 - headLen * Math.cos(angle - 0.4), y + 10 - headLen * Math.sin(angle - 0.4));
    ctx.moveTo(x2, y + 10);
    ctx.lineTo(x2 - headLen * Math.cos(angle + 0.4), y + 10 - headLen * Math.sin(angle + 0.4));
    ctx.stroke();

    // Label
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText(label, midX, cpY + 2);
  }

  function roundRect(ctx, x, y, w, h, r) {
    ctx.beginPath();
    ctx.moveTo(x + r, y);
    ctx.lineTo(x + w - r, y);
    ctx.quadraticCurveTo(x + w, y, x + w, y + r);
    ctx.lineTo(x + w, y + h - r);
    ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
    ctx.lineTo(x + r, y + h);
    ctx.quadraticCurveTo(x, y + h, x, y + h - r);
    ctx.lineTo(x, y + r);
    ctx.quadraticCurveTo(x, y, x + r, y);
    ctx.closePath();
  }

  draw();
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Geometrijski i aritmetički niz -- nalaženje odnosa članova",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["geometrijski niz", "aritmetički niz", "sistemi jednačina", "kvadratna jednačina", "Vijetove formule"]
}
BRAINSPARK_META-->