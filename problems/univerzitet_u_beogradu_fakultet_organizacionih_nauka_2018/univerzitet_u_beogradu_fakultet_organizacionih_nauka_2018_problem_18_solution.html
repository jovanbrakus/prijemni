<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valjak opisan oko prizme – Minimalna površina</title>
<script type="text/info" id="logic-scratchpad">
PROBLEM:
Regular triangular prism with volume V = 4 cm³.
A cylinder is circumscribed around it such that their bases lie in the same planes.
Find the minimum total surface area of the cylinder.

SETUP:
Let the side of the equilateral triangle base be a and the prism height be h.

For an equilateral triangle with side a:
- Circumradius (radius of circumscribed circle): R = a / √3
- Area: A_base = (a² √3) / 4

Volume of prism: V = A_base · h = (a² √3 / 4) · h = 4

The circumscribed cylinder:
- Has the same height h as the prism
- Has radius R = a / √3 (circumradius of the equilateral triangle)

Express a in terms of R: a = R√3

Volume constraint:
V = ((R√3)² √3 / 4) · h = (3R² √3 / 4) · h = 4
=> h = 16 / (3R² √3) = 16√3 / (9R²)

Total surface area of cylinder:
S = 2πR² + 2πRh
S = 2πR² + 2πR · 16√3/(9R²)
S = 2πR² + 32π√3/(9R)

MINIMIZE S:
dS/dR = 4πR - 32π√3/(9R²) = 0
4πR = 32π√3/(9R²)
4R · 9R² = 32√3
36R³ = 32√3
R³ = 32√3/36 = 8√3/9

Key observation: from the critical point equation:
32π√3/(9R²) = 4πR
=> 32π√3/(9R) = 4πR²

So the lateral surface area term = 2 × (base area):
S = 2πR² + 4πR² = 6πR²

Compute R²:
R³ = 8√3/9 = 2³ · 3^(1/2) · 3^(-2) = 2³ · 3^(-3/2)
R = (2³ · 3^(-3/2))^(1/3) = 2 · 3^(-1/2)
R² = (2³ · 3^(-3/2))^(2/3) = 2² · 3^(-1) = 4/3

S_min = 6π · 4/3 = 24π/3 = 8π

ANSWER: D) 8π cm²

VERIFICATION:
R² = 4/3, so R = 2/√3
a = R√3 = 2
h = 16/(3 · (4/3) · √3) = 16/(4√3) = 4/√3 = 4√3/3

Check volume: V = (a²√3/4)·h = (4·√3/4)·(4√3/3) = √3 · 4√3/3 = 4·3/3 = 4 ✓

Check surface area:
S = 2π(4/3) + 2π(2/√3)(4√3/3) = 8π/3 + 2π·8/3 = 8π/3 + 16π/3 = 24π/3 = 8π ✓

Second derivative test:
d²S/dR² = 4π + 64π√3/(9R³)
At critical point this is positive (sum of two positive terms), so it's indeed a minimum. ✓
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-align: center;
  margin-bottom: 8px;
}

.subtitle {
  text-align: center;
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 14px;
}

.given-item {
  background: rgba(56,189,248,0.06);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 110px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.05rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
  transition: none;
}

.plan-card {
  background: linear-gradient(135deg, rgba(96,165,250,0.08), rgba(167,139,250,0.08));
  border-color: rgba(96,165,250,0.2);
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 1.05rem;
  padding: 8px 0;
}

details summary:hover {
  color: #c4b5fd;
}

details[open] > summary {
  margin-bottom: 12px;
}

.theory-content ul {
  list-style: none;
  padding-left: 0;
}

.theory-content li {
  padding: 8px 12px;
  margin-bottom: 8px;
  background: rgba(56,189,248,0.05);
  border-left: 3px solid #60a5fa;
  border-radius: 0 8px 8px 0;
}

.step-container {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  padding: 16px;
  border-radius: 12px;
  border-left: 3px solid transparent;
  transition: border-color 0.2s, background 0.2s;
  cursor: pointer;
}

.step-container:hover, .step-container.active {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}

.step-badge {
  flex-shrink: 0;
  width: 32px;
  height: 32px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  color: #fff;
}

.step-content {
  flex: 1;
}

.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 10px 0;
  overflow-x: auto;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 6px;
}

.checkpoint {
  background: rgba(167,139,250,0.08);
  border: 1px solid rgba(167,139,250,0.2);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 15px 0;
}

.checkpoint summary {
  color: #a78bfa;
  font-size: 0.95rem;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  text-align: center;
}

.insight-box h2 {
  color: #a78bfa;
}

.final-answer {
  background: linear-gradient(135deg, rgba(52,211,153,0.1), rgba(74,222,128,0.1));
  border: 2px solid rgba(52,211,153,0.3);
  border-radius: 14px;
  padding: 28px;
  margin-bottom: 24px;
  text-align: center;
}

.final-answer h2 {
  color: #4ade80;
  margin-bottom: 16px;
}

.final-answer .big-answer {
  font-size: 1.8rem;
  font-weight: 800;
  color: #4ade80;
  margin: 16px 0;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin-top: 16px;
}

.final-option {
  padding: 10px 20px;
  border-radius: 10px;
  background: rgba(56,189,248,0.06);
  border: 1px solid #334155;
  color: #94a3b8;
  font-size: 1rem;
}

.final-option.correct {
  background: rgba(74,222,128,0.15);
  border-color: #4ade80;
  color: #4ade80;
  font-weight: 700;
}

.verification {
  margin-top: 16px;
  padding: 14px;
  background: rgba(52,211,153,0.06);
  border-radius: 10px;
  color: #94a3b8;
  font-size: 0.95rem;
  text-align: left;
}

.pitfall-box {
  border-left: 3px solid #f472b6;
  padding-left: 16px;
}

.pitfall-box li {
  margin-bottom: 10px;
  color: #e2e8f0;
}

.pitfall-box li strong {
  color: #f472b6;
}

.canvas-card {
  text-align: center;
}

canvas {
  border-radius: 12px;
  touch-action: none;
  max-width: 100%;
}

.canvas-hint {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-top: 8px;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

.highlight-blue {
  color: #60a5fa;
  font-weight: 600;
}

.highlight-green {
  color: #4ade80;
  font-weight: 600;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step-container { flex-direction: column; gap: 10px; }
  .given-grid { flex-direction: column; }
  .final-options { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

<!-- TITLE -->
<h1>Valjak opisan oko trostrane prizme</h1>
<p class="subtitle">Stereometrija — optimizacija površine opisanog valjka</p>

<!-- PROBLEM STATEMENT -->
<div class="card problem-statement">
  <h2>Postavka zadatka</h2>
  <p>
    Oko <span class="highlight-blue">pravilne trostrane prizme</span> zapremine
    <span class="highlight-pink">\(4 \text{ cm}^3\)</span> opisan je valjak tako da su im
    osnove u istoj ravni. Odrediti <span class="highlight-green">najmanju površinu</span>
    tako opisanog valjka.
  </p>

  <div class="given-grid" style="margin-bottom: 18px;">
    <div class="given-item">
      <div class="label">Osnova prizme</div>
      <div class="value">Jednakostranični \(\triangle\)</div>
    </div>
    <div class="given-item">
      <div class="label">Zapremina prizme</div>
      <div class="value">\(V = 4 \text{ cm}^3\)</div>
    </div>
    <div class="given-item">
      <div class="label">Uslov</div>
      <div class="value">Osnove u istoj ravni</div>
    </div>
    <div class="given-item">
      <div class="label">Traži se</div>
      <div class="value">\(S_{\min}\) valjka</div>
    </div>
  </div>

  <h3>Ponuđeni odgovori</h3>
  <div class="given-grid">
    <div class="given-item answer-option" data-option="A">
      <div class="label">(A)</div>
      <div class="value">\(2\sqrt[3]{4}\pi \text{ cm}^2\)</div>
    </div>
    <div class="given-item answer-option" data-option="B">
      <div class="label">(B)</div>
      <div class="value">\(4\pi \text{ cm}^2\)</div>
    </div>
    <div class="given-item answer-option" data-option="C">
      <div class="label">(C)</div>
      <div class="value">\(16\pi \text{ cm}^2\)</div>
    </div>
    <div class="given-item answer-option" data-option="D">
      <div class="label">(D)</div>
      <div class="value">\(8\pi \text{ cm}^2\)</div>
    </div>
    <div class="given-item answer-option" data-option="E">
      <div class="label">(E)</div>
      <div class="value">\(4\sqrt[3]{4}\pi \text{ cm}^2\)</div>
    </div>
  </div>
</div>

<!-- PLAN -->
<div class="card plan-card">
  <h2>Plan rešavanja</h2>
  <p>
    Izrazićemo poluprečnik valjka \(R\) kao obimni poluprečnik jednakostraničnog trougla osnove,
    zatim pomoću uslova zapremine eliminisati jednu promenljivu, i minimizovati ukupnu površinu
    valjka kao funkciju jedne promenljive korišćenjem izvoda.
  </p>
</div>

<!-- THEORY REFRESHER -->
<div class="card">
  <details>
    <summary>Ključne formule i teoreme</summary>
    <div class="theory-content">
      <ul>
        <li>
          <strong>Obimni poluprečnik jednakostraničnog trougla:</strong>
          Za jednakostranični trougao stranice \(a\):
          \[ R = \frac{a}{\sqrt{3}} \]
        </li>
        <li>
          <strong>Površina jednakostraničnog trougla:</strong>
          \[ P = \frac{a^2 \sqrt{3}}{4} \]
        </li>
        <li>
          <strong>Zapremina prizme:</strong>
          \[ V = P_{\text{osnove}} \cdot h \]
        </li>
        <li>
          <strong>Ukupna površina valjka</strong> (poluprečnika \(R\), visine \(h\)):
          \[ S = 2\pi R^2 + 2\pi R h \]
        </li>
        <li>
          <strong>Optimizacija:</strong> Minimum funkcije nalazimo iz uslova
          \(\frac{dS}{dR} = 0\), uz proveru predznaka drugog izvoda.
        </li>
      </ul>
    </div>
  </details>
</div>

<!-- VISUAL AID -->
<div class="card canvas-card">
  <h2>Vizualizacija</h2>
  <canvas id="mainCanvas" width="700" height="500"></canvas>
  <p class="canvas-hint">Prevucite klizač ispod da menjate poluprečnik valjka i vidite kako se menja površina</p>
  <div style="margin-top: 14px; display: flex; align-items: center; justify-content: center; gap: 14px; flex-wrap: wrap;">
    <label for="rSlider" style="color: #94a3b8; font-size: 0.95rem;">Poluprečnik \(R\):</label>
    <input type="range" id="rSlider" min="0.6" max="3.0" step="0.01" value="1.155"
           style="width: 220px; accent-color: #60a5fa;">
    <span id="rValue" style="color: #60a5fa; font-weight: 600; min-width: 60px;">1,15</span>
    <span style="color: #94a3b8; margin-left: 10px;">S =</span>
    <span id="sValue" style="color: #4ade80; font-weight: 700; min-width: 70px;">25,13</span>
  </div>
</div>

<script>
(() => {
  const canvas = document.getElementById('mainCanvas');
  const ctx = canvas.getContext('2d');
  const slider = document.getElementById('rSlider');
  const rValueEl = document.getElementById('rValue');
  const sValueEl = document.getElementById('sValue');

  const W = canvas.width;
  const H = canvas.height;

  function formatNum(n) {
    return n.toFixed(2).replace('.', ',');
  }

  function getH(R) {
    return 16 * Math.sqrt(3) / (9 * R * R);
  }

  function getSurface(R) {
    const h = getH(R);
    return 2 * Math.PI * R * R + 2 * Math.PI * R * h;
  }

  const optR = Math.pow(8 * Math.sqrt(3) / 9, 1/3);

  function draw() {
    ctx.clearRect(0, 0, W, H);

    const R = parseFloat(slider.value);
    const h = getH(R);
    const S = getSurface(R);

    rValueEl.textContent = formatNum(R);
    sValueEl.textContent = formatNum(S);

    // --- LEFT: 3D view of prism inside cylinder ---
    const cx = 200, cy = 250;
    const scaleR = 55;
    const scaleH = 35;
    const drawR = R * scaleR;
    const drawH = h * scaleH;
    const tilt = 0.3;

    // Draw bottom ellipse of cylinder
    ctx.beginPath();
    ctx.ellipse(cx, cy + drawH/2, drawR, drawR * tilt, 0, 0, 2 * Math.PI);
    ctx.strokeStyle = 'rgba(96,165,250,0.3)';
    ctx.lineWidth = 1.5;
    ctx.stroke();

    // Draw bottom triangle
    const a = R * Math.sqrt(3);
    const drawA = a * scaleR;
    const triPts = [];
    for (let i = 0; i < 3; i++) {
      const angle = -Math.PI/2 + i * 2 * Math.PI / 3;
      const tx = cx + drawR * Math.cos(angle);
      const ty = cy + drawH/2 + drawR * tilt * Math.sin(angle);
      triPts.push({x: tx, y: ty});
    }

    ctx.beginPath();
    ctx.moveTo(triPts[0].x, triPts[0].y);
    for (let i = 1; i < 3; i++) ctx.lineTo(triPts[i].x, triPts[i].y);
    ctx.closePath();
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2;
    ctx.stroke();
    ctx.fillStyle = 'rgba(244,114,182,0.08)';
    ctx.fill();

    // Side lines of cylinder
    ctx.beginPath();
    ctx.moveTo(cx - drawR, cy - drawH/2);
    ctx.lineTo(cx - drawR, cy + drawH/2);
    ctx.moveTo(cx + drawR, cy - drawH/2);
    ctx.lineTo(cx + drawR, cy + drawH/2);
    ctx.strokeStyle = 'rgba(96,165,250,0.4)';
    ctx.lineWidth = 1.5;
    ctx.stroke();

    // Draw top triangle
    const topTriPts = [];
    for (let i = 0; i < 3; i++) {
      const angle = -Math.PI/2 + i * 2 * Math.PI / 3;
      const tx = cx + drawR * Math.cos(angle);
      const ty = cy - drawH/2 + drawR * tilt * Math.sin(angle);
      topTriPts.push({x: tx, y: ty});
    }

    // Side edges of prism
    for (let i = 0; i < 3; i++) {
      ctx.beginPath();
      ctx.moveTo(topTriPts[i].x, topTriPts[i].y);
      ctx.lineTo(triPts[i].x, triPts[i].y);
      ctx.strokeStyle = 'rgba(244,114,182,0.5)';
      ctx.lineWidth = 1.5;
      ctx.stroke();
    }

    ctx.beginPath();
    ctx.moveTo(topTriPts[0].x, topTriPts[0].y);
    for (let i = 1; i < 3; i++) ctx.lineTo(topTriPts[i].x, topTriPts[i].y);
    ctx.closePath();
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2;
    ctx.stroke();
    ctx.fillStyle = 'rgba(244,114,182,0.06)';
    ctx.fill();

    // Top ellipse of cylinder
    ctx.beginPath();
    ctx.ellipse(cx, cy - drawH/2, drawR, drawR * tilt, 0, 0, 2 * Math.PI);
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.stroke();
    ctx.fillStyle = 'rgba(96,165,250,0.05)';
    ctx.fill();

    // R label on top
    ctx.setLineDash([5, 5]);
    ctx.beginPath();
    ctx.moveTo(cx, cy - drawH/2);
    ctx.lineTo(cx + drawR, cy - drawH/2);
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 1.5;
    ctx.stroke();
    ctx.setLineDash([]);

    ctx.font = 'bold 14px Segoe UI, sans-serif';
    ctx.fillStyle = '#60a5fa';
    ctx.textAlign = 'center';
    ctx.fillText('R', cx + drawR/2, cy - drawH/2 - 10);

    // h label
    ctx.setLineDash([5, 5]);
    ctx.beginPath();
    ctx.moveTo(cx + drawR + 20, cy - drawH/2);
    ctx.lineTo(cx + drawR + 20, cy + drawH/2);
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 1.5;
    ctx.stroke();
    ctx.setLineDash([]);

    // h arrow heads
    ctx.beginPath();
    ctx.moveTo(cx + drawR + 15, cy - drawH/2 + 8);
    ctx.lineTo(cx + drawR + 20, cy - drawH/2);
    ctx.lineTo(cx + drawR + 25, cy - drawH/2 + 8);
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 1.5;
    ctx.stroke();

    ctx.beginPath();
    ctx.moveTo(cx + drawR + 15, cy + drawH/2 - 8);
    ctx.lineTo(cx + drawR + 20, cy + drawH/2);
    ctx.lineTo(cx + drawR + 25, cy + drawH/2 - 8);
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 1.5;
    ctx.stroke();

    ctx.fillStyle = '#a78bfa';
    ctx.fillText('h', cx + drawR + 35, cy + 5);

    // Labels
    ctx.font = 'bold 13px Segoe UI, sans-serif';
    ctx.fillStyle = '#f472b6';
    ctx.fillText('Prizma', cx, cy + drawH/2 + 30);
    ctx.fillStyle = '#60a5fa';
    ctx.fillText('Valjak', cx, cy + drawH/2 + 48);

    // --- RIGHT: Graph of S(R) ---
    const gx0 = 420, gy0 = 60, gw = 250, gh = 370;

    // Graph background
    ctx.fillStyle = 'rgba(15,23,42,0.5)';
    ctx.fillRect(gx0, gy0, gw, gh);
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.strokeRect(gx0, gy0, gw, gh);

    // Grid
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 0.5;
    for (let i = 1; i < 10; i++) {
      const yy = gy0 + (gh * i / 10);
      ctx.beginPath();
      ctx.moveTo(gx0, yy);
      ctx.lineTo(gx0 + gw, yy);
      ctx.stroke();
    }
    for (let i = 1; i < 8; i++) {
      const xx = gx0 + (gw * i / 8);
      ctx.beginPath();
      ctx.moveTo(xx, gy0);
      ctx.lineTo(xx, gy0 + gh);
      ctx.stroke();
    }

    // Plot S(R) curve
    const rMin = 0.5, rMax = 3.2;
    const sMin2 = 20, sMax2 = 80;

    const toGx = (r) => gx0 + (r - rMin) / (rMax - rMin) * gw;
    const toGy = (s) => gy0 + gh - (s - sMin2) / (sMax2 - sMin2) * gh;

    ctx.beginPath();
    let first = true;
    for (let r = rMin; r <= rMax; r += 0.01) {
      const sv = getSurface(r);
      if (sv < sMin2 || sv > sMax2) { first = true; continue; }
      const px = toGx(r);
      const py = toGy(sv);
      if (first) { ctx.moveTo(px, py); first = false; }
      else ctx.lineTo(px, py);
    }
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.stroke();

    // Mark minimum
    const minS = getSurface(optR);
    const minPx = toGx(optR);
    const minPy = toGy(minS);

    ctx.beginPath();
    ctx.arc(minPx, minPy, 6, 0, 2 * Math.PI);
    ctx.fillStyle = '#4ade80';
    ctx.fill();
    ctx.strokeStyle = '#fff';
    ctx.lineWidth = 1.5;
    ctx.stroke();

    ctx.font = 'bold 12px Segoe UI, sans-serif';
    ctx.fillStyle = '#4ade80';
    ctx.textAlign = 'left';
    ctx.fillText('Min: S = 8\u03C0 \u2248 ' + formatNum(minS), minPx + 10, minPy - 8);

    // Mark current R
    const curS = getSurface(R);
    if (curS >= sMin2 && curS <= sMax2) {
      const cpx = toGx(R);
      const cpy = toGy(curS);

      ctx.beginPath();
      ctx.arc(cpx, cpy, 5, 0, 2 * Math.PI);
      ctx.fillStyle = '#f472b6';
      ctx.fill();
      ctx.strokeStyle = '#fff';
      ctx.lineWidth = 1;
      ctx.stroke();

      // Dashed lines to axes
      ctx.setLineDash([4, 4]);
      ctx.beginPath();
      ctx.moveTo(cpx, cpy);
      ctx.lineTo(cpx, gy0 + gh);
      ctx.strokeStyle = 'rgba(244,114,182,0.4)';
      ctx.lineWidth = 1;
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(cpx, cpy);
      ctx.lineTo(gx0, cpy);
      ctx.stroke();
      ctx.setLineDash([]);
    }

    // Axes labels
    ctx.font = 'bold 13px Segoe UI, sans-serif';
    ctx.fillStyle = '#94a3b8';
    ctx.textAlign = 'center';
    ctx.fillText('R', gx0 + gw / 2, gy0 + gh + 22);
    ctx.save();
    ctx.translate(gx0 - 18, gy0 + gh / 2);
    ctx.rotate(-Math.PI / 2);
    ctx.fillText('S(R)', 0, 0);
    ctx.restore();

    // Axis ticks
    ctx.font = '10px Segoe UI, sans-serif';
    ctx.fillStyle = '#94a3b8';
    ctx.textAlign = 'center';
    for (let r = 1; r <= 3; r += 0.5) {
      const px = toGx(r);
      ctx.fillText(formatNum(r), px, gy0 + gh + 12);
    }
    ctx.textAlign = 'right';
    for (let s = 20; s <= 80; s += 10) {
      const py = toGy(s);
      ctx.fillText(s.toString(), gx0 - 5, py + 4);
    }

    // Graph title
    ctx.font = 'bold 14px Segoe UI, sans-serif';
    ctx.fillStyle = '#60a5fa';
    ctx.textAlign = 'center';
    ctx.fillText('Grafik S(R)', gx0 + gw / 2, gy0 - 10);
  }

  slider.addEventListener('input', draw);
  draw();
})();
</script>

<!-- STEP-BY-STEP SOLUTION -->
<div class="card">
  <h2>Rešenje korak po korak</h2>

  <div class="step-container" id="step1">
    <div class="step-badge">1</div>
    <div class="step-content">
      <h3>Definišemo oznake</h3>
      <p>Neka je \(a\) stranica jednakostraničnog trougla u osnovi prizme, a \(h\) visina prizme.</p>
      <p>Valjak je opisan oko prizme tako da su im osnove u istim ravnima. To znači:</p>
      <ul style="margin-left: 18px; margin-top: 8px;">
        <li>Poluprečnik valjka \(R\) jednaka je <strong>obimnom poluprečniku</strong> jednakostraničnog trougla</li>
        <li>Visina valjka jednaka je visini prizme \(h\)</li>
      </ul>
      <div class="math-block">
        \[ R = \frac{a}{\sqrt{3}} \]
      </div>
      <p class="note">Obimni poluprečnik jednakostraničnog trougla stranice \(a\) je \(R = \frac{a}{\sqrt{3}}\).</p>
    </div>
  </div>

  <div class="step-container" id="step2">
    <div class="step-badge">2</div>
    <div class="step-content">
      <h3>Izrazimo \(a\) pomoću \(R\)</h3>
      <p>Iz prethodne formule izražavamo stranicu trougla:</p>
      <div class="math-block">
        \[ a = R\sqrt{3} \]
      </div>
    </div>
  </div>

  <div class="step-container" id="step3">
    <div class="step-badge">3</div>
    <div class="step-content">
      <h3>Koristimo uslov za zapreminu</h3>
      <p>Površina jednakostraničnog trougla stranice \(a\):</p>
      <div class="math-block">
        \[ P_{\text{osnove}} = \frac{a^2 \sqrt{3}}{4} = \frac{(R\sqrt{3})^2 \sqrt{3}}{4} = \frac{3R^2 \sqrt{3}}{4} \]
      </div>
      <p>Zapremina prizme:</p>
      <div class="math-block">
        \[ V = P_{\text{osnove}} \cdot h = \frac{3R^2\sqrt{3}}{4} \cdot h = 4 \]
      </div>
      <p>Izrazimo visinu \(h\):</p>
      <div class="math-block">
        \[ h = \frac{16}{3R^2\sqrt{3}} = \frac{16\sqrt{3}}{9R^2} \]
      </div>
    </div>
  </div>

  <details class="checkpoint">
    <summary>Proveri se: Kolika je visina \(h\) za \(R = 2/\sqrt{3}\)?</summary>
    <p style="margin-top: 8px;">
      \(h = \frac{16\sqrt{3}}{9 \cdot \frac{4}{3}} = \frac{16\sqrt{3}}{12} = \frac{4\sqrt{3}}{3} \approx 2{,}31 \text{ cm}\).
      Zapremina: \(V = \frac{3 \cdot \frac{4}{3} \cdot \sqrt{3}}{4} \cdot \frac{4\sqrt{3}}{3} = \sqrt{3} \cdot \frac{4\sqrt{3}}{3} = \frac{4 \cdot 3}{3} = 4\) cm\(^3\). Tačno!
    </p>
  </details>

  <div class="step-container" id="step4">
    <div class="step-badge">4</div>
    <div class="step-content">
      <h3>Zapisujemo površinu valjka kao funkciju od \(R\)</h3>
      <p>Ukupna površina valjka (dve baze + omotač):</p>
      <div class="math-block">
        \[ S(R) = 2\pi R^2 + 2\pi R h \]
      </div>
      <p>Zamenom izraza za \(h\):</p>
      <div class="math-block">
        \[ S(R) = 2\pi R^2 + 2\pi R \cdot \frac{16\sqrt{3}}{9R^2} \]
      </div>
      <div class="math-block">
        \[ S(R) = 2\pi R^2 + \frac{32\pi\sqrt{3}}{9R} \]
      </div>
    </div>
  </div>

  <div class="step-container" id="step5">
    <div class="step-badge">5</div>
    <div class="step-content">
      <h3>Nalazimo minimum — prvi izvod</h3>
      <p>Izračunavamo \(\frac{dS}{dR}\) i izjednačavamo sa nulom:</p>
      <div class="math-block">
        \[ \frac{dS}{dR} = 4\pi R - \frac{32\pi\sqrt{3}}{9R^2} = 0 \]
      </div>
      <p>Rešavamo po \(R\):</p>
      <div class="math-block">
        \[ 4\pi R = \frac{32\pi\sqrt{3}}{9R^2} \]
      </div>
      <div class="math-block">
        \[ 4R \cdot 9R^2 = 32\sqrt{3} \]
      </div>
      <div class="math-block">
        \[ 36R^3 = 32\sqrt{3} \]
      </div>
      <div class="math-block">
        \[ R^3 = \frac{32\sqrt{3}}{36} = \frac{8\sqrt{3}}{9} \]
      </div>
    </div>
  </div>

  <details class="checkpoint">
    <summary>Proveri se: Koliko iznosi \(R\) numerički?</summary>
    <p style="margin-top: 8px;">
      \(R^3 = \frac{8\sqrt{3}}{9} \approx \frac{8 \cdot 1{,}732}{9} \approx 1{,}540\),
      pa je \(R \approx \sqrt[3]{1{,}540} \approx 1{,}155 \text{ cm} = \frac{2}{\sqrt{3}}\).
    </p>
  </details>

  <div class="step-container" id="step6">
    <div class="step-badge">6</div>
    <div class="step-content">
      <h3>Izračunavamo \(R^2\)</h3>
      <p>Zapišimo \(R^3\) u pogodnijem obliku:</p>
      <div class="math-block">
        \[ R^3 = \frac{8\sqrt{3}}{9} = \frac{2^3 \cdot 3^{1/2}}{3^2} = 2^3 \cdot 3^{-3/2} \]
      </div>
      <p>Stepenujemo sa \(\frac{2}{3}\) da dobijemo \(R^2\):</p>
      <div class="math-block">
        \[ R^2 = \left(R^3\right)^{2/3} = \left(2^3 \cdot 3^{-3/2}\right)^{2/3} = 2^2 \cdot 3^{-1} = \frac{4}{3} \]
      </div>
      <p class="note">Dakle, \(R^2 = \frac{4}{3}\), odnosno \(R = \frac{2}{\sqrt{3}}\).</p>
    </div>
  </div>

  <div class="step-container" id="step7">
    <div class="step-badge">7</div>
    <div class="step-content">
      <h3>Izračunavamo minimalnu površinu — elegantan pristup</h3>
      <p>Iz uslova stacionarne tačke (korak 5) imamo:</p>
      <div class="math-block">
        \[ \frac{32\pi\sqrt{3}}{9R^2} = 4\pi R \]
      </div>
      <p>Pomnožimo obe strane sa \(R\):</p>
      <div class="math-block">
        \[ \frac{32\pi\sqrt{3}}{9R} = 4\pi R^2 \]
      </div>
      <p>Ovo je upravo drugi sabirak u \(S(R)\)! Dakle:</p>
      <div class="math-block">
        \[ S_{\min} = 2\pi R^2 + 4\pi R^2 = 6\pi R^2 \]
      </div>
      <p>Zamenjujemo \(R^2 = \frac{4}{3}\):</p>
      <div class="math-block">
        \[ S_{\min} = 6\pi \cdot \frac{4}{3} = \frac{24\pi}{3} = 8\pi \text{ cm}^2 \]
      </div>
    </div>
  </div>

  <div class="step-container" id="step8">
    <div class="step-badge">8</div>
    <div class="step-content">
      <h3>Potvrda da je to zaista minimum</h3>
      <p>Drugi izvod:</p>
      <div class="math-block">
        \[ \frac{d^2S}{dR^2} = 4\pi + \frac{64\pi\sqrt{3}}{9R^3} \]
      </div>
      <p>Za svako \(R > 0\) ovo je <span class="highlight-green">pozitivno</span> (zbir dva pozitivna broja), čime je potvrđeno da se radi o minimumu.</p>
    </div>
  </div>

  <details class="checkpoint">
    <summary>Finalna provera: Da li se zapremina slaže?</summary>
    <p style="margin-top: 8px;">
      Za \(R = \frac{2}{\sqrt{3}}\): \(a = R\sqrt{3} = 2\), \(h = \frac{16\sqrt{3}}{9 \cdot \frac{4}{3}} = \frac{4\sqrt{3}}{3}\).
      <br>
      \(V = \frac{4 \cdot \sqrt{3}}{4} \cdot \frac{4\sqrt{3}}{3} = \sqrt{3} \cdot \frac{4\sqrt{3}}{3} = \frac{4 \cdot 3}{3} = 4\) cm\(^3\). Tačno!
    </p>
  </details>
</div>

<!-- KEY INSIGHT -->
<div class="insight-box">
  <h2>Ključni uvid</h2>
  <p style="margin-bottom: 14px;">U stacionarnoj tački, omotač valjka ima dvostruko veću površinu od zbira dveju baza:</p>
  <div class="math-block" style="display: inline-block;">
    \[ S_{\text{omotač}} = 2 \cdot S_{\text{baze}} \quad \Longrightarrow \quad S_{\min} = 3 \cdot S_{\text{baze}} = 6\pi R^2 = \boxed{8\pi} \]
  </div>
  <p style="margin-top: 12px; color: #94a3b8;">Ovo je opšta osobina optimizacije valjka sa fiksnom zapreminom — odnos 2:1 između omotača i baza u minimumu.</p>
</div>

<!-- FINAL ANSWER -->
<div class="final-answer">
  <h2>Konačan odgovor</h2>
  <div class="big-answer">\( S_{\min} = 8\pi \text{ cm}^2 \)</div>

  <div class="final-options">
    <div class="final-option">(A) \(2\sqrt[3]{4}\pi\)</div>
    <div class="final-option">(B) \(4\pi\)</div>
    <div class="final-option">(C) \(16\pi\)</div>
    <div class="final-option correct">(D) \(8\pi\)</div>
    <div class="final-option">(E) \(4\sqrt[3]{4}\pi\)</div>
  </div>

  <div class="verification">
    <strong>Verifikacija:</strong> Za \(R = \frac{2}{\sqrt{3}} \approx 1{,}155\) cm, \(a = 2\) cm, \(h = \frac{4\sqrt{3}}{3} \approx 2{,}309\) cm:
    <ul style="margin-left: 18px; margin-top: 6px;">
      <li>\(V = \frac{4 \cdot \sqrt{3}}{4} \cdot \frac{4\sqrt{3}}{3} = 4\) cm\(^3\) — slaže se sa zadatom zapreminom</li>
      <li>\(S = 2\pi \cdot \frac{4}{3} + 2\pi \cdot \frac{2}{\sqrt{3}} \cdot \frac{4\sqrt{3}}{3} = \frac{8\pi}{3} + \frac{16\pi}{3} = 8\pi \approx 25{,}13\) cm\(^2\)</li>
    </ul>
  </div>
</div>

<!-- COMMON PITFALLS -->
<div class="card">
  <h2>Česte greške</h2>
  <ul class="pitfall-box">
    <li>
      <strong>Pogrešan poluprečnik:</strong> Mnogi studenti koriste upisani poluprečnik (\(r = \frac{a}{2\sqrt{3}}\)) umesto obimnog (\(R = \frac{a}{\sqrt{3}}\)). Valjak je <em>opisan</em> oko prizme, pa mora da prolazi kroz temena trougla — dakle koristimo obimni poluprečnik.
    </li>
    <li>
      <strong>Zaboravljena površina baza:</strong> Ukupna površina valjka uključuje i dve kružne baze (\(2\pi R^2\)), ne samo omotač (\(2\pi Rh\)). Bez baza, minimum bi dao drugačiji rezultat.
    </li>
  </ul>
</div>

<!-- OPTIONAL CHALLENGE -->
<div class="card">
  <h2>Izazov za napredne</h2>
  <p>Šta bi bila minimalna površina valjka ako je umesto trostrane, u pitanju pravilna <em>četvorostrana</em> prizma (kocka u osnovi) iste zapremine 4 cm\(^3\)?</p>
  <details style="margin: 15px 0;">
    <summary>Nagoveštaj</summary>
    <p style="margin-top: 8px;">
      Za kvadrat stranice \(a\), obimni poluprečnik je \(R = \frac{a\sqrt{2}}{2}\). Izrazite \(h\) iz zapremine \(V = a^2 h = 4\),
      zamenite \(a = R\sqrt{2}\), i minimizujte \(S(R) = 2\pi R^2 + 2\pi Rh\) na isti način.
      Uporedite rezultat sa \(8\pi\) — da li je veći ili manji?
    </p>
  </details>
</div>

</div>

<script>
(() => {
  document.querySelectorAll('.step-container').forEach(step => {
    step.addEventListener('click', () => {
      document.querySelectorAll('.step-container').forEach(s => s.classList.remove('active'));
      step.classList.toggle('active');
    });
  });
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Minimalna površina valjka opisanog oko trostrane prizme",
  "subject": "math",
  "unit": "geometry",
  "topic_tags": ["stereometrija", "optimizacija", "valjak", "prizma", "izvod", "obimni poluprečnik"]
}
BRAINSPARK_META-->