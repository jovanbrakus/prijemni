<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Procentni rastvor - Mešanje rastvora</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM:
U K litara rastvora vode i soli ima 80% soli. Ako se dodavanjem 10 litara vode u taj rastvor
dobije rastvor u kome ima 60% soli, onda K iznosi:
A) 30   B) 35   C) 20   D) 12   E) 45

SOLUTION:
Step 1: Define variables
- K = initial volume of solution (liters)
- Initial concentration of salt = 80% = 0.80
- Amount of salt in initial solution = 0.80 * K

Step 2: After adding 10 liters of water
- New total volume = K + 10 liters
- Amount of salt stays the same = 0.80 * K (we only added water, not salt)
- New concentration = 60% = 0.60

Step 3: Set up equation
The amount of salt equals 60% of the new total volume:
0.80 * K = 0.60 * (K + 10)

Step 4: Solve
0.80K = 0.60K + 6
0.80K - 0.60K = 6
0.20K = 6
K = 6 / 0.20
K = 30

VERIFICATION:
- Initial solution: 30 liters, 80% salt => 0.80 * 30 = 24 liters of salt
- After adding 10 liters of water: total = 30 + 10 = 40 liters
- Percentage of salt: 24 / 40 = 0.60 = 60% ✓

ANSWER: A) 30
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 700;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 100px;
  text-align: center;
}

.given-item .label {
  font-size: 0.85rem;
  color: #94a3b8;
  margin-bottom: 4px;
}

.given-item .value {
  font-size: 1.1rem;
  color: #e2e8f0;
  font-weight: 600;
}

.answer-option {
  cursor: default;
}

.highlight {
  color: #60a5fa;
  font-weight: 600;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

/* Plan card */
.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card p {
  color: #e2e8f0;
  font-size: 1.05rem;
}

/* Theory */
details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  font-size: 1.1rem;
  color: #a78bfa;
  font-weight: 600;
  padding: 8px 0;
}

details summary:hover {
  color: #c4b5fd;
}

.theory-list {
  list-style: none;
  padding: 12px 0;
}

.theory-list li {
  padding: 8px 0;
  padding-left: 16px;
  border-left: 2px solid #334155;
  margin-bottom: 8px;
  color: #e2e8f0;
}

/* Canvas card */
.canvas-card {
  text-align: center;
}

.canvas-card canvas {
  border-radius: 10px;
  max-width: 100%;
  touch-action: none;
}

.canvas-hint {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-top: 10px;
}

/* Steps */
.step {
  display: flex;
  gap: 16px;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
  border-left: 3px solid transparent;
}

.step:hover, .step.active {
  background: rgba(96,165,250,0.05);
  border-left: 3px solid #4ade80;
}

.step-badge {
  width: 32px;
  height: 32px;
  min-width: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  color: #0f172a;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  margin-bottom: 8px;
}

.step-content p {
  margin-bottom: 8px;
  color: #e2e8f0;
}

.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 10px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 6px;
}

/* Check yourself */
.check-yourself {
  margin: 15px 0;
  background: rgba(167,139,250,0.08);
  border: 1px solid rgba(167,139,250,0.2);
  border-radius: 10px;
  padding: 14px 18px;
}

.check-yourself summary {
  color: #a78bfa;
  font-size: 0.95rem;
}

.check-yourself p {
  padding-top: 8px;
  color: #e2e8f0;
}

/* Key Insight */
.insight-card {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid rgba(167,139,250,0.3);
  text-align: center;
}

.insight-card .formula {
  font-size: 1.3rem;
  color: #4ade80;
  margin: 12px 0;
}

/* Final Answer */
.final-answer-card {
  border: 2px solid #4ade80;
  text-align: center;
}

.final-answer-card .answer-value {
  font-size: 2rem;
  color: #4ade80;
  font-weight: 700;
  margin: 16px 0;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-top: 16px;
}

.final-option {
  padding: 10px 22px;
  border-radius: 10px;
  background: rgba(51,65,85,0.5);
  border: 1px solid #334155;
  color: #94a3b8;
  font-size: 1.05rem;
}

.final-option.correct {
  background: rgba(52,211,153,0.15);
  border: 2px solid #4ade80;
  color: #4ade80;
  font-weight: 700;
}

.verification {
  margin-top: 16px;
  padding: 14px;
  background: rgba(52,211,153,0.08);
  border-radius: 10px;
  color: #94a3b8;
  font-size: 0.95rem;
  text-align: left;
}

/* Pitfalls */
.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 14px;
  margin-bottom: 8px;
  background: rgba(224,148,104,0.08);
  border-left: 3px solid #e09468;
  border-radius: 0 8px 8px 0;
  color: #e2e8f0;
}

.pitfall-list li strong {
  color: #e09468;
}

/* Challenge */
.challenge-card {
  border-left: 3px solid #f472b6;
}

/* Slider */
.slider-container {
  display: flex;
  align-items: center;
  gap: 14px;
  margin: 14px 0;
  flex-wrap: wrap;
}

.slider-container label {
  color: #94a3b8;
  font-size: 0.95rem;
  min-width: 80px;
}

.slider-container input[type="range"] {
  flex: 1;
  min-width: 150px;
  accent-color: #60a5fa;
}

.slider-value {
  color: #60a5fa;
  font-weight: 700;
  font-size: 1.05rem;
  min-width: 60px;
  text-align: center;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step { flex-direction: column; gap: 8px; }
  .given-grid { flex-direction: column; }
  .final-options { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Procentni rastvor - Mešanje rastvora</h1>
  <p class="subtitle">Algebra - Procentni račun i linearne jednačine</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>
      U <span class="highlight">\(K\)</span> litara rastvora vode i soli ima
      <span class="highlight-pink">80%</span> soli. Ako se dodavanjem
      <span class="highlight">10 litara</span> vode u taj rastvor dobije rastvor
      u kome ima <span class="highlight-pink">60%</span> soli, onda \(K\) iznosi:
    </p>

    <div class="given-grid" style="margin-top:12px; margin-bottom:6px;">
      <div class="given-item">
        <div class="label">Zapremina rastvora</div>
        <div class="value">\(K\) L</div>
      </div>
      <div class="given-item">
        <div class="label">Početni udeo soli</div>
        <div class="value">\(80\%\)</div>
      </div>
      <div class="given-item">
        <div class="label">Dodata voda</div>
        <div class="value">\(10\) L</div>
      </div>
      <div class="given-item">
        <div class="label">Novi udeo soli</div>
        <div class="value">\(60\%\)</div>
      </div>
    </div>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(30\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(35\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(20\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(12\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(45\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan rešavanja</h2>
    <p>
      Postavićemo jednačinu na osnovu činjenice da se količina soli ne menja kada dodamo čistu vodu.
      Izrazićemo količinu soli pre i posle dodavanja vode, izjednačićemo ih i rešićemo linearnu jednačinu po \(K\).
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Ključne formule i pojmovi</summary>
      <ul class="theory-list">
        <li>
          <strong>Procentni udeo:</strong> Ako rastvor ima \(p\%\) neke supstance, onda u \(V\) litara rastvora ima
          \(\displaystyle \frac{p}{100} \cdot V\) litara te supstance.
        </li>
        <li>
          <strong>Princip očuvanja mase:</strong> Kada se u rastvor doda čista voda (ili čist rastvarač),
          masa rastvorene supstance (soli) se ne menja - menja se samo ukupna zapremina i samim tim procenat.
        </li>
        <li>
          <strong>Linearna jednačina:</strong> Jednačina oblika \(ax + b = 0\) gde je \(a \neq 0\) ima jedinstveno rešenje \(\displaystyle x = -\frac{b}{a}\).
        </li>
      </ul>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card canvas-card">
    <h2>Vizuelni prikaz</h2>
    <canvas id="solutionCanvas" width="700" height="400"></canvas>
    <div class="slider-container">
      <label for="kSlider">Vrednost \(K\):</label>
      <input type="range" id="kSlider" min="5" max="60" value="30" step="1">
      <span class="slider-value" id="kValue">30</span>
    </div>
    <p class="canvas-hint">Pomerajte klizač da vidite kako se menja procenat soli pri različitim vrednostima \(K\)</p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <div class="step" id="step1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Definišemo promenljive</h3>
        <p>
          Neka je \(K\) zapremina početnog rastvora u litrima. Rastvor sadrži 80% soli, što znači da je količina soli:
        </p>
        <div class="math-block">
          \[ m_{\text{soli}} = 0{,}80 \cdot K \]
        </div>
        <p class="note">Preostalih 20% je voda, dakle \(0{,}20 \cdot K\) litara vode.</p>
      </div>
    </div>

    <div class="step" id="step2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Opisujemo promenu - dodajemo vodu</h3>
        <p>
          Dodajemo <span class="highlight">10 litara čiste vode</span> u rastvor. Nova ukupna zapremina rastvora je:
        </p>
        <div class="math-block">
          \[ V_{\text{novo}} = K + 10 \]
        </div>
        <p>
          Količina soli ostaje ista jer smo dodali samo vodu:
        </p>
        <div class="math-block">
          \[ m_{\text{soli}} = 0{,}80 \cdot K \quad \text{(nepromenjeno)} \]
        </div>
      </div>
    </div>

    <details class="check-yourself">
      <summary>Proveri sebe: Koliko litara soli ima u rastvoru nakon dodavanja vode ako je \(K = 30\)?</summary>
      <p>Količina soli se ne menja! Ostaje \(0{,}80 \cdot 30 = 24\) litara soli.</p>
    </details>

    <div class="step" id="step3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Postavljamo jednačinu</h3>
        <p>
          Novi rastvor ima <span class="highlight-pink">60%</span> soli. Dakle, količina soli jednaka je 60% nove zapremine:
        </p>
        <div class="math-block">
          \[ 0{,}80 \cdot K = 0{,}60 \cdot (K + 10) \]
        </div>
        <p class="note">Leva strana: količina soli (ostala ista). Desna strana: 60% od nove zapremine.</p>
      </div>
    </div>

    <div class="step" id="step4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Razvijamo desnu stranu</h3>
        <p>Raspisujemo proizvod na desnoj strani jednačine:</p>
        <div class="math-block">
          \[ 0{,}80 \cdot K = 0{,}60 \cdot K + 0{,}60 \cdot 10 \]
        </div>
        <div class="math-block">
          \[ 0{,}80K = 0{,}60K + 6 \]
        </div>
      </div>
    </div>

    <div class="step" id="step5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Grupišemo članove sa \(K\)</h3>
        <p>Prebacujemo \(0{,}60K\) na levu stranu:</p>
        <div class="math-block">
          \[ 0{,}80K - 0{,}60K = 6 \]
        </div>
        <div class="math-block">
          \[ 0{,}20K = 6 \]
        </div>
      </div>
    </div>

    <div class="step" id="step6">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Rešavamo po \(K\)</h3>
        <p>Delimo obe strane sa \(0{,}20\):</p>
        <div class="math-block">
          \[ K = \frac{6}{0{,}20} = \frac{6}{\dfrac{1}{5}} = 6 \cdot 5 = 30 \]
        </div>
      </div>
    </div>

    <details class="check-yourself">
      <summary>Proveri sebe: Da li se odgovor \(K = 30\) slaže sa jednom od ponuđenih opcija?</summary>
      <p>Da! \(K = 30\) odgovara opciji <strong>(A)</strong>.</p>
    </details>

    <div class="step" id="step7">
      <div class="step-badge">7</div>
      <div class="step-content">
        <h3>Provera rešenja</h3>
        <p>Proveravamo tako što unesemo \(K = 30\) nazad u zadatak:</p>
        <div class="math-block">
          \[ \text{So: } 0{,}80 \cdot 30 = 24 \text{ litara} \]
        </div>
        <div class="math-block">
          \[ \text{Posle dodavanja vode: } 30 + 10 = 40 \text{ litara ukupno} \]
        </div>
        <div class="math-block">
          \[ \text{Procenat soli: } \frac{24}{40} = 0{,}60 = 60\% \; \checkmark \]
        </div>
        <p class="note">Dobili smo tačno 60%, što potvrđuje naše rešenje.</p>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="card insight-card">
    <h2>Ključni uvid</h2>
    <p>Kada dodajemo čist rastvarač (vodu) u rastvor, količina rastvorene supstance se ne menja - menja se samo procenat jer se ukupna zapremina povećava.</p>
    <div class="formula">
      \[ \underbrace{0{,}80 \cdot K}_{\text{soli pre}} = \underbrace{0{,}60 \cdot (K + 10)}_{\text{soli posle}} \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer-card">
    <h2>Konačan odgovor</h2>
    <div class="answer-value">\(K = 30\)</div>

    <div class="final-options">
      <div class="final-option correct">(A) 30</div>
      <div class="final-option">(B) 35</div>
      <div class="final-option">(C) 20</div>
      <div class="final-option">(D) 12</div>
      <div class="final-option">(E) 45</div>
    </div>

    <div class="verification">
      <strong>Verifikacija:</strong> Početni rastvor ima 30 litara sa 80% soli, dakle 24 litara soli.
      Posle dodavanja 10 litara vode ukupna zapremina je 40 litara. Udeo soli: \(\frac{24}{40} = 60\%\).
      Tačno onako kako zadatak traži!
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Česte greške</h2>
    <ul class="pitfall-list">
      <li>
        <strong>Mešanje zapremine i mase soli:</strong> Neki učenici postave jednačinu tako da izjednače zapremine umesto količina soli. Zapamtite: količina soli ostaje nepromenjena - samo ukupna zapremina raste.
      </li>
      <li>
        <strong>Pogrešan razlomak:</strong> Neki učenici postave \(\frac{0{,}80K}{K}\) umesto \(\frac{0{,}80K}{K+10}\) za novi procenat. Imenilac mora biti nova ukupna zapremina \(K + 10\), ne stara \(K\).
      </li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Izazov za vežbu</h2>
    <p>Koliko litara čiste vode treba dodati u 50 litara rastvora koji sadrži 90% soli da bi se dobio rastvor sa 75% soli?</p>
    <details>
      <summary>Pomoć</summary>
      <p>Količina soli je \(0{,}90 \cdot 50 = 45\) litara. Neka je \(x\) zapremina dodate vode. Postavite jednačinu \(45 = 0{,}75 \cdot (50 + x)\) i rešite po \(x\).</p>
    </details>
  </div>

</div>

<script>
(() => {
  // Canvas drawing
  const canvas = document.getElementById('solutionCanvas');
  const ctx = canvas.getContext('2d');
  const slider = document.getElementById('kSlider');
  const kValueSpan = document.getElementById('kValue');

  function drawSolution(K) {
    const W = canvas.width;
    const H = canvas.height;
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Constants
    const maxBarHeight = 260;
    const barWidth = 100;
    const baseY = H - 60;
    const saltColor = '#60a5fa';
    const waterColor = '#334155';
    const newSaltColor = '#a78bfa';
    const newWaterColor = '#475569';

    // Calculate values
    const saltAmount = 0.80 * K;
    const waterAmount = 0.20 * K;
    const newTotal = K + 10;
    const newSaltPercent = (saltAmount / newTotal) * 100;

    // Scale factor for bar heights
    const maxVol = Math.max(K, newTotal, 50);
    const scale = maxBarHeight / maxVol;

    // --- BEFORE container ---
    const beforeX = 160;
    const totalHeightBefore = K * scale;
    const saltHeightBefore = saltAmount * scale;
    const waterHeightBefore = waterAmount * scale;

    // Title
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('PRE dodavanja vode', beforeX + barWidth / 2, 28);

    // Container outline
    const containerY = baseY - totalHeightBefore;
    ctx.strokeStyle = '#4b5563';
    ctx.lineWidth = 2;
    ctx.strokeRect(beforeX, containerY, barWidth, totalHeightBefore);

    // Salt portion (bottom)
    ctx.fillStyle = saltColor;
    ctx.fillRect(beforeX, baseY - saltHeightBefore, barWidth, saltHeightBefore);

    // Water portion (top)
    ctx.fillStyle = waterColor;
    ctx.fillRect(beforeX, containerY, barWidth, waterHeightBefore);

    // Labels
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('So: 80%', beforeX + barWidth / 2, baseY - saltHeightBefore / 2 + 5);
    if (waterHeightBefore > 18) {
      ctx.fillStyle = '#94a3b8';
      ctx.fillText('Voda: 20%', beforeX + barWidth / 2, containerY + waterHeightBefore / 2 + 5);
    }

    // Volume label below
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.fillText('K = ' + K + ' L', beforeX + barWidth / 2, baseY + 28);

    // Salt amount on side
    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText(saltAmount.toFixed(1).replace('.', ',') + ' L soli', beforeX - 10, baseY - saltHeightBefore / 2 + 5);

    // --- ARROW ---
    const arrowX1 = beforeX + barWidth + 30;
    const arrowX2 = arrowX1 + 80;
    const arrowY = baseY - maxBarHeight / 2;
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(arrowX1, arrowY);
    ctx.lineTo(arrowX2, arrowY);
    ctx.stroke();
    // Arrow head
    ctx.fillStyle = '#4ade80';
    ctx.beginPath();
    ctx.moveTo(arrowX2, arrowY);
    ctx.lineTo(arrowX2 - 10, arrowY - 6);
    ctx.lineTo(arrowX2 - 10, arrowY + 6);
    ctx.closePath();
    ctx.fill();
    // Arrow label
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('+10 L vode', (arrowX1 + arrowX2) / 2, arrowY - 12);

    // --- AFTER container ---
    const afterX = arrowX2 + 30;
    const totalHeightAfter = newTotal * scale;
    const saltHeightAfter = saltAmount * scale;
    const addedWaterHeight = 10 * scale;
    const origWaterHeight = waterAmount * scale;

    // Title
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('POSLE dodavanja vode', afterX + barWidth / 2, 28);

    // Container
    const containerY2 = baseY - totalHeightAfter;
    ctx.strokeStyle = '#4b5563';
    ctx.lineWidth = 2;
    ctx.strokeRect(afterX, containerY2, barWidth, totalHeightAfter);

    // Salt portion (bottom)
    ctx.fillStyle = newSaltColor;
    ctx.fillRect(afterX, baseY - saltHeightAfter, barWidth, saltHeightAfter);

    // Original water portion
    ctx.fillStyle = waterColor;
    ctx.fillRect(afterX, baseY - saltHeightAfter - origWaterHeight, barWidth, origWaterHeight);

    // Added water (top section)
    ctx.fillStyle = newWaterColor;
    ctx.fillRect(afterX, containerY2, barWidth, addedWaterHeight);

    // Dashed line separating old water and new water
    ctx.setLineDash([5, 5]);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(afterX, containerY2 + addedWaterHeight);
    ctx.lineTo(afterX + barWidth, containerY2 + addedWaterHeight);
    ctx.stroke();
    ctx.setLineDash([]);

    // Labels
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('So: ' + newSaltPercent.toFixed(1).replace('.', ',') + '%', afterX + barWidth / 2, baseY - saltHeightAfter / 2 + 5);
    if (addedWaterHeight > 14) {
      ctx.fillStyle = '#4ade80';
      ctx.font = '11px Segoe UI, system-ui, sans-serif';
      ctx.fillText('+10 L', afterX + barWidth / 2, containerY2 + addedWaterHeight / 2 + 4);
    }

    // Volume label below
    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText((K + 10) + ' L ukupno', afterX + barWidth / 2, baseY + 28);

    // Salt amount on side
    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText(saltAmount.toFixed(1).replace('.', ',') + ' L soli', afterX + barWidth + 12, baseY - saltHeightAfter / 2 + 5);

    // --- Result indicator ---
    const isCorrect = Math.abs(newSaltPercent - 60) < 0.1;
    const resultX = afterX + barWidth + 12;
    const resultY = baseY + 50;
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    if (isCorrect) {
      ctx.fillStyle = '#4ade80';
      ctx.fillText('Procenat soli = 60,0%  \u2714', resultX - 200, resultY - 8);
    } else {
      ctx.fillStyle = '#f472b6';
      ctx.fillText('Procenat soli = ' + newSaltPercent.toFixed(1).replace('.', ',') + '%  (treba 60%)', resultX - 200, resultY - 8);
    }
  }

  function onSliderChange() {
    const K = parseInt(slider.value);
    kValueSpan.textContent = K;
    drawSolution(K);
  }

  slider.addEventListener('input', onSliderChange);

  // Touch support
  slider.addEventListener('touchstart', function(e) { e.stopPropagation(); }, { passive: true });
  slider.addEventListener('touchmove', function(e) { e.stopPropagation(); }, { passive: true });

  // Initial draw
  drawSolution(30);

  // Step click interactivity
  const steps = document.querySelectorAll('.step');
  steps.forEach(step => {
    step.addEventListener('click', function() {
      steps.forEach(s => s.classList.remove('active'));
      this.classList.add('active');
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Procentni rastvor - Mešanje rastvora sa vodom i solju",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["procentni račun", "linearne jednačine", "rastvori", "mešanje"]
}
BRAINSPARK_META-->