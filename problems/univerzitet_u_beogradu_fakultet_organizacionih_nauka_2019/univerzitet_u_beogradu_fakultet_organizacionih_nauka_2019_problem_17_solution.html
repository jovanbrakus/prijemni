<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Maksimalna zapremina pravilne cetvorostrane piramide</title>
<script type="text/info" id="logic-scratchpad">
Problem: Maksimalna zapremina pravilne cetvorostrane piramide cija bocna ivica ima duzinu l = 3 cm.

Pravilna cetvorostrana piramida:
- Osnova je kvadrat sa stranicom a
- Sve 4 bocne ivice su jednake, duzine l = 3 cm
- Visina h ide od centra osnove do vrha

Geometrija:
- Centar kvadrata je na rastojanju a*sqrt(2)/2 od temena osnove (polovina dijagonale)
- Dijagonala kvadrata = a*sqrt(2), pa poludiagonala = a*sqrt(2)/2

Pitagorina teorema (bocna ivica, visina, poludiagonala):
  l^2 = h^2 + (a*sqrt(2)/2)^2
  9 = h^2 + a^2/2
  h^2 = 9 - a^2/2
  h = sqrt(9 - a^2/2)

Uslov: h > 0  =>  a^2/2 < 9  =>  a^2 < 18  =>  a < 3*sqrt(2)

Zapremina:
  V = (1/3) * a^2 * h = (1/3) * a^2 * sqrt(9 - a^2/2)

Maksimizacija: Uvedimo smenu t = a^2, t in (0, 18)
  V = (1/3) * t * sqrt(9 - t/2)

Lakse: Maksimizujemo V^2 (jer je V > 0, max V^2 daje max V):
  V^2 = (1/9) * t^2 * (9 - t/2)

Neka f(t) = t^2 * (9 - t/2) = 9*t^2 - t^3/2

f'(t) = 18*t - 3*t^2/2 = t*(18 - 3t/2)

f'(t) = 0:
  t = 0 (trivijalno, minimum) ili 18 - 3t/2 = 0 => t = 12

Provera drugog izvoda ili znaka:
  f''(t) = 18 - 3t
  f''(12) = 18 - 36 = -18 < 0 => lokalni maksimum

Dakle t = a^2 = 12  =>  a = 2*sqrt(3)

h = sqrt(9 - 12/2) = sqrt(9 - 6) = sqrt(3)

V_max = (1/3) * 12 * sqrt(3) = 4*sqrt(3) cm^3

Provera odgovora:
A) 3*sqrt(3) ≈ 5,196 -- NE
B) 12 -- NE
C) 6*sqrt(3) ≈ 10,392 -- NE
D) 4*sqrt(2) ≈ 5,657 -- NE
E) 4*sqrt(3) ≈ 6,928 -- DA, ovo je nas rezultat!

Tacan odgovor: E) 4*sqrt(3) cm^3

Verifikacija:
  a^2 = 12, a = 2*sqrt(3) ≈ 3,464 cm
  h = sqrt(3) ≈ 1,732 cm
  Bocna ivica: sqrt(h^2 + a^2/2) = sqrt(3 + 6) = sqrt(9) = 3 ✓
  V = (1/3)*12*sqrt(3) = 4*sqrt(3) ✓
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}

h1 {
  font-size: 2rem;
  font-weight: 700;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 28px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 22px 26px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.35rem;
  margin-bottom: 14px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.1rem;
  margin-bottom: 8px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 14px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.plan-card {
  border-left: 4px solid #a78bfa;
}

.step-container {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  padding: 16px;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
  border-left: 4px solid transparent;
}

.step-container:hover, .step-container.active {
  background: rgba(96,165,250,0.05);
  border-left: 4px solid #4ade80;
}

.step-badge {
  min-width: 32px;
  height: 32px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  color: #fff;
  flex-shrink: 0;
}

.step-content {
  flex: 1;
}

.step-content p {
  margin-bottom: 8px;
  color: #cbd5e1;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 6px;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 10px 0;
  user-select: none;
}

details summary:hover {
  color: #93bbfc;
}

.checkpoint {
  background: rgba(52,211,153,0.08);
  border: 1px solid rgba(52,211,153,0.2);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 15px 0;
}

.checkpoint summary {
  color: #34d399;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 14px;
  padding: 22px 26px;
  margin-bottom: 24px;
  text-align: center;
}

.insight-box .insight-label {
  color: #a78bfa;
  font-size: 0.9rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 10px;
}

.final-answer-box {
  background: rgba(52,211,153,0.08);
  border: 2px solid rgba(52,211,153,0.3);
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  text-align: center;
}

.final-answer-box h2 {
  color: #4ade80;
}

.final-answer-text {
  font-size: 1.6rem;
  font-weight: 700;
  color: #4ade80;
  margin: 14px 0;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-top: 16px;
}

.option-card {
  background: rgba(51,65,85,0.5);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 20px;
  text-align: center;
  min-width: 70px;
}

.option-card.correct {
  background: rgba(52,211,153,0.15);
  border-color: #34d399;
  box-shadow: 0 0 18px rgba(52,211,153,0.2);
}

.option-card .opt-label {
  font-size: 0.8rem;
  color: #94a3b8;
  margin-bottom: 2px;
}

.option-card.correct .opt-label {
  color: #4ade80;
}

.option-card .opt-value {
  font-size: 1.15rem;
  font-weight: 600;
}

.option-card.correct .opt-value {
  color: #4ade80;
}

.verification {
  background: rgba(96,165,250,0.07);
  border: 1px solid rgba(96,165,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
  margin-top: 16px;
  text-align: left;
}

.verification h3 {
  color: #60a5fa;
  font-size: 1rem;
  margin-bottom: 6px;
}

.pitfall-box {
  border-left: 4px solid #e09468;
}

.pitfall-box h2 {
  color: #e09468;
}

.pitfall-box li {
  margin-bottom: 8px;
  padding-left: 4px;
  color: #cbd5e1;
}

.pitfall-box ul {
  padding-left: 20px;
}

.challenge-box {
  border-left: 4px solid #f472b6;
}

.challenge-box h2 {
  color: #f472b6;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

.highlight-green {
  color: #4ade80;
  font-weight: 600;
}

.highlight-blue {
  color: #60a5fa;
  font-weight: 600;
}

canvas {
  display: block;
  margin: 0 auto;
  border-radius: 10px;
  touch-action: none;
  max-width: 100%;
}

.canvas-hint {
  text-align: center;
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

@media (max-width: 700px) {
  h1 { font-size: 1.5rem; }
  .card { padding: 16px 18px; }
  .given-grid { gap: 8px; }
  .given-item { min-width: 60px; padding: 10px 12px; }
  .step-container { padding: 12px; gap: 10px; }
}
</style>
</head>
<body>
<div class="container">

  <!-- TITLE -->
  <h1>Maksimalna zapremina pravilne cetvorostrane piramide</h1>
  <p class="subtitle">Stereometrija -- optimizacija zapremine primenom izvoda</p>

  <!-- PROBLEM STATEMENT -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Maksimalna zapremina pravilne cetvorostrane piramide cija <span class="highlight-pink">bocna ivica</span> ima duzinu <span class="highlight-blue">3 cm</span> jednaka je:</p>

    <div class="given-grid" style="margin-bottom: 18px;">
      <div class="given-item">
        <div class="label">Bocna ivica</div>
        <div class="value">\(l = 3 \text{ cm}\)</div>
      </div>
      <div class="given-item">
        <div class="label">Osnova</div>
        <div class="value">kvadrat</div>
      </div>
      <div class="given-item">
        <div class="label">Trazimo</div>
        <div class="value">\(V_{\max}\)</div>
      </div>
    </div>

    <p style="margin-top: 12px;">Ponudjeni odgovori:</p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(3\sqrt{3} \text{ cm}^3\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(12 \text{ cm}^3\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(6\sqrt{3} \text{ cm}^3\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(4\sqrt{2} \text{ cm}^3\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(4\sqrt{3} \text{ cm}^3\)</div>
      </div>
    </div>
  </div>

  <!-- PLAN -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>Izrazicemo visinu piramide preko stranice osnove \(a\) koristeci Pitagorinu teoremu, zatim napisati formulu za zapreminu kao funkciju jedne promenljive i naci njen maksimum pomocu <span class="highlight-pink">prvog izvoda</span>.</p>
  </div>

  <!-- THEORY REFRESHER -->
  <div class="card">
    <details>
      <summary>Kljucne formule i teoreme</summary>
      <ul style="padding-left: 20px; margin-top: 12px;">
        <li style="margin-bottom: 10px;">
          <strong>Zapremina piramide:</strong>
          \(V = \dfrac{1}{3} \cdot B \cdot h\), gde je \(B\) povrsina osnove, a \(h\) visina piramide.
        </li>
        <li style="margin-bottom: 10px;">
          <strong>Pravilna cetvorostrana piramida:</strong>
          Osnova je kvadrat stranice \(a\), pa je \(B = a^2\). Sve cetiri bocne ivice su jednake duzine \(l\).
        </li>
        <li style="margin-bottom: 10px;">
          <strong>Dijagonala kvadrata:</strong>
          \(d = a\sqrt{2}\), pa je rastojanje od centra kvadrata do temena \(= \dfrac{a\sqrt{2}}{2}\).
        </li>
        <li style="margin-bottom: 10px;">
          <strong>Potreban uslov za ekstremum:</strong>
          Ako je \(f'(x_0) = 0\) i \(f''(x_0) < 0\), tada funkcija \(f\) ima lokalni maksimum u tacki \(x_0\).
        </li>
      </ul>
      <div style="margin-top: 16px;">
        <canvas id="theoryCanvas" width="300" height="260"></canvas>
        <p class="canvas-hint">Presek pravilne cetvorostrane piramide -- visina, bocna ivica i poludiagonala</p>
      </div>
    </details>
  </div>

  <!-- VISUAL AID -->
  <div class="card">
    <h2>Vizuelni prikaz</h2>
    <p style="margin-bottom: 12px; color: #94a3b8;">Pomerajte klizac da vidite kako se menja zapremina piramide u zavisnosti od stranice osnove \(a\).</p>
    <canvas id="mainCanvas" width="700" height="420"></canvas>
    <div style="text-align: center; margin-top: 14px;">
      <label for="sliderA" style="color: #94a3b8; margin-right: 8px;">Stranica osnove \(a\):</label>
      <input type="range" id="sliderA" min="0.3" max="4.2" step="0.01" value="3.46" style="width: 260px; vertical-align: middle;">
      <span id="sliderVal" style="color: #60a5fa; font-weight: 600; margin-left: 8px;">3,46</span>
    </div>
    <p class="canvas-hint">Pomerajte klizac da istrazite kako se oblik piramide i njena zapremina menjaju</p>
  </div>

  <!-- STEP-BY-STEP SOLUTION -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container" role="button" tabindex="0">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Postavimo koordinatni sistem</h3>
        <p>Neka je \(a\) stranica osnove (kvadrata), a \(h\) visina piramide. Bocna ivica je \(l = 3\) cm.</p>
        <p>Centar kvadrata je na rastojanju od temena jednakom poludiagonali:</p>
        <div class="math-block">
          \[ r = \frac{a\sqrt{2}}{2} \]
        </div>
        <p class="note">Dijagonala kvadrata sa stranicom \(a\) iznosi \(a\sqrt{2}\), pa je poludiagonala \(\frac{a\sqrt{2}}{2}\).</p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container" role="button" tabindex="0">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Pitagorina teorema za bocnu ivicu</h3>
        <p>Bocna ivica, visina i poludiagonala formiraju pravougli trougao:</p>
        <div class="math-block">
          \[ l^2 = h^2 + r^2 \]
        </div>
        <p>Zamenjujemo \(l = 3\) i \(r = \dfrac{a\sqrt{2}}{2}\):</p>
        <div class="math-block">
          \[ 9 = h^2 + \frac{a^2 \cdot 2}{4} = h^2 + \frac{a^2}{2} \]
        </div>
        <p>Izrazavamo visinu:</p>
        <div class="math-block">
          \[ h = \sqrt{9 - \frac{a^2}{2}} \]
        </div>
        <p class="note">Uslov postojanja: \(a^2 < 18\), tj. \(a < 3\sqrt{2} \approx 4{,}24\) cm.</p>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Kolika je visina piramide ako je \(a = 2\)?</summary>
      <p style="margin-top: 10px;">
        \(h = \sqrt{9 - \frac{4}{2}} = \sqrt{9 - 2} = \sqrt{7} \approx 2{,}65\) cm.
      </p>
    </details>

    <!-- Step 3 -->
    <div class="step-container" role="button" tabindex="0">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Formula za zapreminu</h3>
        <p>Zapremina pravilne cetvorostrane piramide je:</p>
        <div class="math-block">
          \[ V = \frac{1}{3} \cdot a^2 \cdot h = \frac{1}{3} \cdot a^2 \cdot \sqrt{9 - \frac{a^2}{2}} \]
        </div>
        <p>Ovo je funkcija jedne promenljive \(a\), i trazimo njen <span class="highlight-pink">maksimum</span>.</p>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step-container" role="button" tabindex="0">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Smena \(t = a^2\) za lakse diferenciranje</h3>
        <p>Uvodimo smenu \(t = a^2\), gde \(t \in (0,\, 18)\). Tada:</p>
        <div class="math-block">
          \[ V(t) = \frac{1}{3} \cdot t \cdot \sqrt{9 - \frac{t}{2}} \]
        </div>
        <p>Posto je \(V > 0\), maksimum \(V\) je u istoj tacki kao maksimum \(V^2\):</p>
        <div class="math-block">
          \[ V^2 = \frac{1}{9} \cdot t^2 \cdot \left(9 - \frac{t}{2}\right) \]
        </div>
        <p>Oznacimo \(f(t) = t^2 \cdot \left(9 - \dfrac{t}{2}\right) = 9t^2 - \dfrac{t^3}{2}\).</p>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step-container" role="button" tabindex="0">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Nalazenje prvog izvoda</h3>
        <p>Diferenciramo \(f(t)\) po \(t\):</p>
        <div class="math-block">
          \[ f'(t) = 18t - \frac{3t^2}{2} \]
        </div>
        <p>Izlucujemo zajednicki faktor:</p>
        <div class="math-block">
          \[ f'(t) = t \left(18 - \frac{3t}{2}\right) \]
        </div>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step-container" role="button" tabindex="0">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Resavamo \(f'(t) = 0\)</h3>
        <p>Iz uslova \(f'(t) = 0\):</p>
        <div class="math-block">
          \[ t = 0 \quad \text{ili} \quad 18 - \frac{3t}{2} = 0 \]
        </div>
        <p>Iz drugog uslova:</p>
        <div class="math-block">
          \[ \frac{3t}{2} = 18 \implies t = 12 \]
        </div>
        <p>Posto \(t = 0\) daje degenerisanu piramidu, kandidat za maksimum je <span class="highlight-green">\(t = 12\)</span>.</p>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Da li je \(t = 12\) zaista maksimum? Izracunaj \(f''(12)\).</summary>
      <p style="margin-top: 10px;">
        \(f''(t) = 18 - 3t\), pa \(f''(12) = 18 - 36 = -18 < 0\). Posto je drugi izvod negativan, to je zaista <strong>maksimum</strong>.
      </p>
    </details>

    <!-- Step 7 -->
    <div class="step-container" role="button" tabindex="0">
      <div class="step-badge">7</div>
      <div class="step-content">
        <h3>Racunamo stranicu i visinu</h3>
        <p>Iz \(t = a^2 = 12\) dobijamo:</p>
        <div class="math-block">
          \[ a = \sqrt{12} = 2\sqrt{3} \approx 3{,}46 \text{ cm} \]
        </div>
        <p>Visina:</p>
        <div class="math-block">
          \[ h = \sqrt{9 - \frac{12}{2}} = \sqrt{9 - 6} = \sqrt{3} \approx 1{,}73 \text{ cm} \]
        </div>
      </div>
    </div>

    <!-- Step 8 -->
    <div class="step-container" role="button" tabindex="0">
      <div class="step-badge">8</div>
      <div class="step-content">
        <h3>Racunamo maksimalnu zapreminu</h3>
        <p>Zamenjujemo u formulu za zapreminu:</p>
        <div class="math-block">
          \[ V_{\max} = \frac{1}{3} \cdot a^2 \cdot h = \frac{1}{3} \cdot 12 \cdot \sqrt{3} \]
        </div>
        <div class="math-block">
          \[ V_{\max} = \frac{12\sqrt{3}}{3} = 4\sqrt{3} \text{ cm}^3 \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Da li bocna ivica zaista iznosi 3 cm za nase \(a\) i \(h\)?</summary>
      <p style="margin-top: 10px;">
        \(l = \sqrt{h^2 + \frac{a^2}{2}} = \sqrt{3 + 6} = \sqrt{9} = 3\) cm. Tacno!
      </p>
    </details>
  </div>

  <!-- KEY INSIGHT -->
  <div class="insight-box">
    <div class="insight-label">Kljucno zapazanje</div>
    <p style="color: #cbd5e1; margin-bottom: 12px;">Optimalna piramida nastaje kada je \(a^2 = 12\), sto znaci da je kvadrat povrsine osnove tacno <span class="highlight-blue">dve trecine</span> od kvadrata bocne ivice (\(a^2 = \frac{2}{3} \cdot l^2 \cdot 2 = \frac{4}{3} \cdot l^2\)). Visina tada iznosi tacno \(\frac{l}{\sqrt{3}}\).</p>
    <div class="math-block" style="background: rgba(167,139,250,0.1); border-color: rgba(167,139,250,0.25);">
      \[ V_{\max} = \frac{1}{3} \cdot 12 \cdot \sqrt{3} = \boxed{4\sqrt{3} \text{ cm}^3} \]
    </div>
  </div>

  <!-- FINAL ANSWER -->
  <div class="final-answer-box">
    <h2>Konacan odgovor</h2>
    <div class="final-answer-text">
      \( V_{\max} = 4\sqrt{3} \text{ cm}^3 \approx 6{,}93 \text{ cm}^3 \)
    </div>

    <div class="options-row">
      <div class="option-card">
        <div class="opt-label">(A)</div>
        <div class="opt-value">\(3\sqrt{3}\)</div>
      </div>
      <div class="option-card">
        <div class="opt-label">(B)</div>
        <div class="opt-value">\(12\)</div>
      </div>
      <div class="option-card">
        <div class="opt-label">(C)</div>
        <div class="opt-value">\(6\sqrt{3}\)</div>
      </div>
      <div class="option-card">
        <div class="opt-label">(D)</div>
        <div class="opt-value">\(4\sqrt{2}\)</div>
      </div>
      <div class="option-card correct">
        <div class="opt-label">(E)</div>
        <div class="opt-value">\(4\sqrt{3}\)</div>
      </div>
    </div>

    <div class="verification">
      <h3>Verifikacija</h3>
      <p style="color: #cbd5e1;">Za \(a = 2\sqrt{3}\) i \(h = \sqrt{3}\): bocna ivica je \(\sqrt{3 + 6} = 3\) cm -- tacno. Zapremina \(\frac{1}{3} \cdot 12 \cdot \sqrt{3} = 4\sqrt{3}\) cm\(^3\). Rezultat se poklapa sa odgovorom <span class="highlight-green">(E)</span>. Takodje, \(4\sqrt{3} \approx 6{,}93\), sto je razumna zapremina za piramidu sa ivicom od 3 cm.</p>
    </div>
  </div>

  <!-- COMMON PITFALLS -->
  <div class="card pitfall-box">
    <h2>Ceste greske</h2>
    <ul>
      <li><strong>Brkanje bocne ivice i apoteme:</strong> Bocna ivica ide od temena osnove do vrha piramide, dok apotema bocne strane ide od sredista stranice osnove do vrha. Ovde je dato \(l = 3\) za bocnu ivicu, pa rastojanje od centra osnove do temena iznosi \(\frac{a\sqrt{2}}{2}\), a ne \(\frac{a}{2}\).</li>
      <li><strong>Zaboravljanje smene za lakse diferenciranje:</strong> Direktno diferenciranje \(V(a) = \frac{1}{3} a^2 \sqrt{9 - \frac{a^2}{2}}\) je komplikovanije. Smena \(t = a^2\) i razmatranje \(V^2\) umesto \(V\) znatno pojednostavljuje racun.</li>
    </ul>
  </div>

  <!-- OPTIONAL CHALLENGE -->
  <div class="card challenge-box">
    <h2>Dodatni izazov</h2>
    <p>Kolika je maksimalna zapremina pravilne <em>trostrane</em> piramide (tetraedar sa jednakostranicnom osnovom) cija bocna ivica ima duzinu 3 cm?</p>
    <details>
      <summary>Nagoveštaj</summary>
      <p style="margin-top: 10px; color: #cbd5e1;">Rastojanje od tezista jednakostranicnog trougla stranice \(a\) do temena iznosi \(\frac{a\sqrt{3}}{3}\). Primeni istu tehniku: izrazi \(h\) iz Pitagorine teoreme, pa maksimizuj \(V = \frac{1}{3} \cdot \frac{a^2\sqrt{3}}{4} \cdot h\).</p>
    </details>
  </div>

</div>

<!-- SCRIPTS -->
<script>
(() => {
  // Theory canvas: cross-section of pyramid
  const tc = document.getElementById('theoryCanvas');
  if (tc) {
    const ctx = tc.getContext('2d');
    const W = tc.width, H = tc.height;

    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Draw right triangle: vertex at top-center, base-center at bottom-center, base-corner at bottom-right
    const topX = 150, topY = 30;
    const centerX = 150, centerY = 210;
    const cornerX = 250, cornerY = 210;

    // Triangle fill
    ctx.fillStyle = 'rgba(96,165,250,0.08)';
    ctx.beginPath();
    ctx.moveTo(topX, topY);
    ctx.lineTo(centerX, centerY);
    ctx.lineTo(cornerX, cornerY);
    ctx.closePath();
    ctx.fill();

    // Height (h) - dashed
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.moveTo(topX, topY);
    ctx.lineTo(centerX, centerY);
    ctx.stroke();
    ctx.setLineDash([]);

    // Half diagonal (r)
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(centerX, centerY);
    ctx.lineTo(cornerX, cornerY);
    ctx.stroke();

    // Lateral edge (l)
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(topX, topY);
    ctx.lineTo(cornerX, cornerY);
    ctx.stroke();

    // Right angle marker
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1.5;
    const s = 12;
    ctx.beginPath();
    ctx.moveTo(centerX + s, centerY);
    ctx.lineTo(centerX + s, centerY - s);
    ctx.lineTo(centerX, centerY - s);
    ctx.stroke();

    // Labels
    ctx.font = 'bold 14px Segoe UI, sans-serif';
    ctx.fillStyle = '#60a5fa';
    ctx.fillText('h', centerX - 20, (topY + centerY) / 2 + 5);

    ctx.fillStyle = '#a78bfa';
    ctx.fillText('a\u221A2/2', (centerX + cornerX) / 2 - 12, centerY + 20);

    ctx.fillStyle = '#f472b6';
    ctx.fillText('l = 3', (topX + cornerX) / 2 + 12, (topY + cornerY) / 2 - 5);

    // Points
    const drawPoint = (x, y, color) => {
      ctx.fillStyle = color;
      ctx.beginPath();
      ctx.arc(x, y, 4, 0, Math.PI * 2);
      ctx.fill();
    };
    drawPoint(topX, topY, '#f472b6');
    drawPoint(centerX, centerY, '#60a5fa');
    drawPoint(cornerX, cornerY, '#a78bfa');

    ctx.font = '12px Segoe UI, sans-serif';
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('vrh', topX - 30, topY + 5);
    ctx.fillText('centar', centerX - 42, centerY + 18);
    ctx.fillText('teme', cornerX + 6, cornerY + 18);
  }

  // Main canvas: 3D-ish pyramid view + volume graph
  const mc = document.getElementById('mainCanvas');
  const slider = document.getElementById('sliderA');
  const sliderVal = document.getElementById('sliderVal');

  if (mc && slider) {
    const ctx = mc.getContext('2d');
    const W = mc.width, H = mc.height;

    function draw(aVal) {
      ctx.clearRect(0, 0, W, H);
      ctx.fillStyle = '#0f172a';
      ctx.fillRect(0, 0, W, H);

      const l = 3;
      const a2 = aVal * aVal;
      const hSq = 9 - a2 / 2;
      const hVal = hSq > 0 ? Math.sqrt(hSq) : 0;
      const vol = hVal > 0 ? (1 / 3) * a2 * hVal : 0;

      // ===== LEFT SIDE: Pyramid front view =====
      const pyramidCX = 190, pyramidBaseY = 340, maxDrawH = 250;
      const scale = maxDrawH / 3.5;

      const drawH = hVal * scale;
      const drawA = aVal * scale * 0.6;

      // Base line
      ctx.strokeStyle = '#60a5fa';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(pyramidCX - drawA, pyramidBaseY);
      ctx.lineTo(pyramidCX + drawA, pyramidBaseY);
      ctx.stroke();

      // Lateral edges
      const apexY = pyramidBaseY - drawH;
      ctx.strokeStyle = '#f472b6';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(pyramidCX - drawA, pyramidBaseY);
      ctx.lineTo(pyramidCX, apexY);
      ctx.lineTo(pyramidCX + drawA, pyramidBaseY);
      ctx.stroke();

      // Height dashed line
      if (hVal > 0.05) {
        ctx.strokeStyle = 'rgba(96,165,250,0.5)';
        ctx.lineWidth = 1.5;
        ctx.setLineDash([5, 4]);
        ctx.beginPath();
        ctx.moveTo(pyramidCX, apexY);
        ctx.lineTo(pyramidCX, pyramidBaseY);
        ctx.stroke();
        ctx.setLineDash([]);
      }

      // Fill pyramid
      ctx.fillStyle = 'rgba(96,165,250,0.06)';
      ctx.beginPath();
      ctx.moveTo(pyramidCX - drawA, pyramidBaseY);
      ctx.lineTo(pyramidCX, apexY);
      ctx.lineTo(pyramidCX + drawA, pyramidBaseY);
      ctx.closePath();
      ctx.fill();

      // Labels
      ctx.font = 'bold 13px Segoe UI, sans-serif';
      ctx.fillStyle = '#60a5fa';
      ctx.textAlign = 'center';
      ctx.fillText('a = ' + aVal.toFixed(2).replace('.', ','), pyramidCX, pyramidBaseY + 22);

      if (hVal > 0.05) {
        ctx.fillStyle = '#94a3b8';
        ctx.textAlign = 'left';
        ctx.fillText('h = ' + hVal.toFixed(2).replace('.', ','), pyramidCX + 6, pyramidBaseY - drawH / 2);
      }

      ctx.fillStyle = '#e2e8f0';
      ctx.font = 'bold 15px Segoe UI, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('V = ' + vol.toFixed(2).replace('.', ',') + ' cm\u00B3', pyramidCX, 40);

      // ===== RIGHT SIDE: V(a) graph =====
      const gLeft = 400, gRight = 670, gTop = 50, gBot = 370;
      const gW = gRight - gLeft, gH = gBot - gTop;

      // Grid
      ctx.strokeStyle = '#1e293b';
      ctx.lineWidth = 1;
      for (let i = 0; i <= 5; i++) {
        const x = gLeft + (gW / 5) * i;
        ctx.beginPath(); ctx.moveTo(x, gTop); ctx.lineTo(x, gBot); ctx.stroke();
      }
      for (let i = 0; i <= 5; i++) {
        const y = gTop + (gH / 5) * i;
        ctx.beginPath(); ctx.moveTo(gLeft, y); ctx.lineTo(gRight, y); ctx.stroke();
      }

      // Axes
      ctx.strokeStyle = '#334155';
      ctx.lineWidth = 1.5;
      ctx.beginPath(); ctx.moveTo(gLeft, gBot); ctx.lineTo(gRight, gBot); ctx.stroke();
      ctx.beginPath(); ctx.moveTo(gLeft, gBot); ctx.lineTo(gLeft, gTop); ctx.stroke();

      // Labels on axes
      ctx.fillStyle = '#94a3b8';
      ctx.font = '11px Segoe UI, sans-serif';
      ctx.textAlign = 'center';
      const aMax = 4.24;
      for (let a = 0; a <= 4; a++) {
        const x = gLeft + (a / aMax) * gW;
        ctx.fillText(a.toString(), x, gBot + 16);
      }
      ctx.fillText('a', gRight + 10, gBot + 5);

      const vMax = 8;
      ctx.textAlign = 'right';
      for (let v = 0; v <= 8; v += 2) {
        const y = gBot - (v / vMax) * gH;
        ctx.fillText(v.toString(), gLeft - 8, y + 4);
      }
      ctx.fillText('V', gLeft + 5, gTop - 8);

      // Plot V(a)
      ctx.strokeStyle = '#60a5fa';
      ctx.lineWidth = 2.5;
      ctx.beginPath();
      let first = true;
      for (let px = 0; px <= gW; px++) {
        const aP = (px / gW) * aMax;
        const a2P = aP * aP;
        const hSqP = 9 - a2P / 2;
        if (hSqP <= 0) break;
        const hP = Math.sqrt(hSqP);
        const vP = (1 / 3) * a2P * hP;
        const x = gLeft + px;
        const y = gBot - (vP / vMax) * gH;
        if (first) { ctx.moveTo(x, y); first = false; }
        else ctx.lineTo(x, y);
      }
      ctx.stroke();

      // Mark maximum point
      const aOpt = Math.sqrt(12);
      const hOpt = Math.sqrt(3);
      const vOpt = (1 / 3) * 12 * hOpt;
      const mxX = gLeft + (aOpt / aMax) * gW;
      const mxY = gBot - (vOpt / vMax) * gH;

      // Glow
      const glow = ctx.createRadialGradient(mxX, mxY, 0, mxX, mxY, 18);
      glow.addColorStop(0, 'rgba(74,222,128,0.35)');
      glow.addColorStop(1, 'rgba(74,222,128,0)');
      ctx.fillStyle = glow;
      ctx.fillRect(mxX - 20, mxY - 20, 40, 40);

      ctx.fillStyle = '#4ade80';
      ctx.beginPath();
      ctx.arc(mxX, mxY, 5, 0, Math.PI * 2);
      ctx.fill();

      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 12px Segoe UI, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText('max: 4\u221A3 \u2248 6,93', mxX + 10, mxY - 8);
      ctx.fillStyle = '#94a3b8';
      ctx.fillText('a = 2\u221A3 \u2248 3,46', mxX + 10, mxY + 8);

      // Current point on graph
      if (hSq > 0) {
        const curX = gLeft + (aVal / aMax) * gW;
        const curY = gBot - (vol / vMax) * gH;

        // Dashed lines to axes
        ctx.strokeStyle = 'rgba(244,114,182,0.4)';
        ctx.lineWidth = 1;
        ctx.setLineDash([4, 3]);
        ctx.beginPath(); ctx.moveTo(curX, curY); ctx.lineTo(curX, gBot); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(curX, curY); ctx.lineTo(gLeft, curY); ctx.stroke();
        ctx.setLineDash([]);

        ctx.fillStyle = '#f472b6';
        ctx.beginPath();
        ctx.arc(curX, curY, 5, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    draw(parseFloat(slider.value));

    slider.addEventListener('input', function() {
      const val = parseFloat(this.value);
      sliderVal.textContent = val.toFixed(2).replace('.', ',');
      draw(val);
    });
  }

  // Step click handlers
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(step => {
    step.addEventListener('click', function() {
      steps.forEach(s => s.classList.remove('active'));
      this.classList.add('active');
    });
    step.addEventListener('keydown', function(e) {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        this.click();
      }
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Maksimalna zapremina pravilne cetvorostrane piramide",
  "subject": "math",
  "unit": "geometry",
  "topic_tags": ["stereometrija", "optimizacija", "piramida", "zapremina", "izvod"]
}
BRAINSPARK_META-->