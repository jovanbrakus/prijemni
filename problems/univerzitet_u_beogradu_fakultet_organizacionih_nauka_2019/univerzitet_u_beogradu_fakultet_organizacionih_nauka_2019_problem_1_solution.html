<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Procentualno povecanje proizvoda</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM:
Neka su a i b pozitivni realni brojevi.
Ako se povecanjem broja a za 50% i povecanjem broja b za p% njihov proizvod poveca za 80%, koliko iznosi p?

STEP-BY-STEP LOGIC:

1. Povecanje broja a za 50%:
   Novi a = a + 0.5a = 1.5a

2. Povecanje broja b za p%:
   Novi b = b + (p/100)b = (1 + p/100)b

3. Originalni proizvod: a * b
   Novi proizvod: 1.5a * (1 + p/100)b = 1.5(1 + p/100) * ab

4. Proizvod se povecava za 80%, znaci novi proizvod = 1.8 * ab

5. Jednacina:
   1.5(1 + p/100) * ab = 1.8 * ab

   Delimo obe strane sa ab (pozitivan jer su a, b > 0):
   1.5(1 + p/100) = 1.8

6. Resavamo:
   1 + p/100 = 1.8 / 1.5
   1 + p/100 = 1.2
   p/100 = 0.2
   p = 20

ANSWER: A) 20

Verification:
a se poveca za 50%: faktor 1.5
b se poveca za 20%: faktor 1.2
Novi proizvod: 1.5 * 1.2 * ab = 1.8 * ab
To je povecanje za 80%. TACNO!

Cross-check with other options:
B) 120 -> 1.5 * 2.2 = 3.3 -> povecanje za 230%. NE.
C) 30  -> 1.5 * 1.3 = 1.95 -> povecanje za 95%. NE.
D) 25  -> 1.5 * 1.25 = 1.875 -> povecanje za 87.5%. NE.
E) 40  -> 1.5 * 1.4 = 2.1 -> povecanje za 110%. NE.

Correct answer: A) 20
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  text-align: center;
}

.subtitle {
  color: #94a3b8;
  text-align: center;
  font-size: 1.05rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.35rem;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.1rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56,189,248,0.06);
  border: 1px solid rgba(56,189,248,0.12);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 100px;
  text-align: center;
  flex: 1;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
  font-weight: 600;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
}

.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 14px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.plan-card {
  border-left: 4px solid #a78bfa;
}

.theory-card details {
  margin: 15px 0;
}

.theory-card summary {
  cursor: pointer;
  font-size: 1.05rem;
  font-weight: 600;
  color: #a78bfa;
  padding: 8px 0;
  user-select: none;
}

.theory-card ul {
  list-style: none;
  padding: 12px 0;
}

.theory-card li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #e2e8f0;
}

.theory-card li:last-child {
  border-bottom: none;
}

.step {
  display: flex;
  gap: 16px;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 12px;
  border-left: 3px solid transparent;
  transition: border-color 0.2s ease, background 0.2s ease;
}

.step:hover {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}

.step-badge {
  width: 32px;
  height: 32px;
  min-width: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  margin-bottom: 8px;
  color: #e2e8f0;
  font-size: 1.05rem;
}

.step-content p {
  color: #cbd5e1;
  margin-bottom: 8px;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 6px;
}

.checkpoint {
  margin: 20px 0;
  background: rgba(167,139,250,0.06);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
}

.checkpoint summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 0.95rem;
  user-select: none;
}

.checkpoint .answer {
  padding-top: 10px;
  color: #4ade80;
  font-weight: 600;
}

.insight-card {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid rgba(96,165,250,0.25);
  text-align: center;
  padding: 28px;
}

.insight-card .big-formula {
  font-size: 1.4rem;
  margin: 16px 0;
  color: #4ade80;
}

.final-answer-card {
  border: 2px solid #4ade80;
  background: linear-gradient(135deg, rgba(52,211,153,0.08), rgba(74,222,128,0.04));
  text-align: center;
  padding: 28px;
}

.final-answer-card h2 {
  color: #4ade80;
  justify-content: center;
}

.final-answer-value {
  font-size: 1.8rem;
  color: #4ade80;
  font-weight: 800;
  margin: 16px 0;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 20px 0;
}

.option-card {
  padding: 10px 22px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: #1e293b;
  color: #94a3b8;
  font-size: 1rem;
  font-weight: 600;
  transition: all 0.2s ease;
}

.option-card.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.1);
  color: #4ade80;
  box-shadow: 0 0 20px rgba(74,222,128,0.15);
}

.verification-note {
  color: #94a3b8;
  font-size: 0.92rem;
  margin-top: 14px;
  padding-top: 14px;
  border-top: 1px solid #334155;
  text-align: left;
}

.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #cbd5e1;
}

.pitfall-list li:last-child {
  border-bottom: none;
}

.pitfall-label {
  color: #e09468;
  font-weight: 700;
  margin-right: 6px;
}

.challenge-card {
  border-left: 4px solid #f472b6;
}

.challenge-card details {
  margin: 15px 0;
}

.challenge-card summary {
  cursor: pointer;
  color: #f472b6;
  font-weight: 600;
  user-select: none;
}

canvas {
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  touch-action: none;
  width: 100%;
}

.canvas-hint {
  text-align: center;
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

.highlight-blue {
  color: #60a5fa;
  font-weight: 600;
}

.highlight-green {
  color: #4ade80;
  font-weight: 600;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step { padding: 12px; flex-direction: column; gap: 8px; }
  .given-grid { gap: 8px; }
  .given-item { min-width: 70px; padding: 10px 12px; }
  .final-answer-value { font-size: 1.4rem; }
  .options-row { gap: 8px; }
  .option-card { padding: 8px 14px; font-size: 0.9rem; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Procentualno povecanje proizvoda</h1>
  <p class="subtitle">Algebra &mdash; procentni racun i svojstva proizvoda dva broja</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>
      Neka su \(a\) i \(b\) pozitivni realni brojevi. Ako se povecanjem broja \(a\) za
      <span class="highlight-blue">50%</span> i povecanjem broja \(b\) za
      <span class="highlight-pink">\(p\%\)</span> njihov proizvod poveca za
      <span class="highlight-green">80%</span>, onda \(p\) iznosi:
    </p>

    <div class="given-grid">
      <div class="given-item">
        <div class="label">Povecanje \(a\)</div>
        <div class="value">50%</div>
      </div>
      <div class="given-item">
        <div class="label">Povecanje \(b\)</div>
        <div class="value">\(p\%\)</div>
      </div>
      <div class="given-item">
        <div class="label">Povecanje proizvoda</div>
        <div class="value">80%</div>
      </div>
    </div>

    <div class="given-grid" style="margin-top: 14px;">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(20\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(120\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(30\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(25\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(40\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>
      Zapisacemo nove vrednosti brojeva \(a\) i \(b\) posle procentualnog povecanja, formirati
      jednacinu iz uslova da je proizvod porastao za 80%, i iz nje izraziti nepoznato \(p\).
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card theory-card">
    <details>
      <summary>Kljucne formule i pojmovi</summary>
      <ul>
        <li>
          <strong>Povecanje za \(k\%\):</strong> Ako se broj \(x\) poveca za \(k\%\),
          nova vrednost je:
          \[ x_{\text{novi}} = x + \frac{k}{100} \cdot x = x \cdot \left(1 + \frac{k}{100}\right) \]
        </li>
        <li>
          <strong>Faktor povecanja:</strong> Povecanje za 50% daje faktor \(1 + 0{,}5 = 1{,}5\).
          Povecanje za 80% daje faktor \(1 + 0{,}8 = 1{,}8\).
        </li>
        <li>
          <strong>Proizvod faktora:</strong> Ako se \(a\) mnozi faktorom \(f_a\) i \(b\) faktorom \(f_b\),
          proizvod \(a \cdot b\) se mnozi faktorom \(f_a \cdot f_b\):
          \[ (f_a \cdot a)(f_b \cdot b) = (f_a \cdot f_b) \cdot ab \]
        </li>
      </ul>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <h2>Vizuelni prikaz</h2>
    <p style="color:#94a3b8; margin-bottom: 14px;">
      Pomerajte klizac da vidite kako promena procenta \(p\) utice na ukupno povecanje proizvoda.
    </p>
    <canvas id="diagramCanvas" width="800" height="440"></canvas>
    <div style="text-align:center; margin-top: 12px;">
      <label for="pSlider" style="color:#a78bfa; font-weight:600; font-size:0.95rem;">
        Vrednost p:
        <span id="pValue" style="color:#f472b6; font-weight:700;">20</span>%
      </label>
      <br>
      <input type="range" id="pSlider" min="0" max="100" value="20"
        style="width: 260px; margin-top: 6px; accent-color: #a78bfa;">
    </div>
    <p class="canvas-hint">Pomerajte klizac da istrazite razlicite vrednosti p</p>
  </div>

  <!-- Step-by-step Solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Zapisimo novu vrednost broja \(a\)</h3>
        <p>
          Broj \(a\) se povecava za 50%. To znaci da na originalnu vrednost dodajemo polovinu te vrednosti:
        </p>
        <div class="math-block">
          \[ a_{\text{novi}} = a + 0{,}5 \cdot a = 1{,}5 \cdot a \]
        </div>
        <p class="note">
          Faktor povecanja za \(a\) je \(1{,}5\) (ili \(\frac{3}{2}\)).
        </p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Zapisimo novu vrednost broja \(b\)</h3>
        <p>
          Broj \(b\) se povecava za \(p\%\). Po istom principu:
        </p>
        <div class="math-block">
          \[ b_{\text{novi}} = b + \frac{p}{100} \cdot b = \left(1 + \frac{p}{100}\right) \cdot b \]
        </div>
        <p class="note">
          Faktor povecanja za \(b\) je \(\left(1 + \frac{p}{100}\right)\).
        </p>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Izrazimo novi proizvod</h3>
        <p>
          Novi proizvod je:
        </p>
        <div class="math-block">
          \[ a_{\text{novi}} \cdot b_{\text{novi}} = 1{,}5 \cdot a \cdot \left(1 + \frac{p}{100}\right) \cdot b = 1{,}5 \cdot \left(1 + \frac{p}{100}\right) \cdot ab \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri se: Koliki je faktor kojim se mnozi originalni proizvod \(ab\) ako se poveca za 80%?</summary>
      <div class="answer">
        Faktor je \(1 + 0{,}8 = 1{,}8\). Novi proizvod je \(1{,}8 \cdot ab\).
      </div>
    </details>

    <!-- Step 4 -->
    <div class="step">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Postavimo jednacinu</h3>
        <p>
          Proizvod se povecao za 80%, sto znaci da je novi proizvod jednak \(1{,}8 \cdot ab\).
          Izjednacavamo sa izrazom iz prethodnog koraka:
        </p>
        <div class="math-block">
          \[ 1{,}5 \cdot \left(1 + \frac{p}{100}\right) \cdot ab = 1{,}8 \cdot ab \]
        </div>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Skratimo \(ab\) sa obe strane</h3>
        <p>
          Posto su \(a\) i \(b\) pozitivni realni brojevi, proizvod \(ab > 0\), pa mozemo podeliti obe strane sa \(ab\):
        </p>
        <div class="math-block">
          \[ 1{,}5 \cdot \left(1 + \frac{p}{100}\right) = 1{,}8 \]
        </div>
        <p class="note">
          Primetimo da rezultat ne zavisi od konkretnih vrednosti \(a\) i \(b\) &mdash; vazi za sve pozitivne realne brojeve!
        </p>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri se: Koliko je \(1{,}8 \div 1{,}5\)?</summary>
      <div class="answer">
        \(\dfrac{1{,}8}{1{,}5} = \dfrac{18}{15} = \dfrac{6}{5} = 1{,}2\)
      </div>
    </details>

    <!-- Step 6 -->
    <div class="step">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Resimo po \(p\)</h3>
        <p>
          Podelimo obe strane sa \(1{,}5\):
        </p>
        <div class="math-block">
          \[ 1 + \frac{p}{100} = \frac{1{,}8}{1{,}5} = \frac{18}{15} = \frac{6}{5} = 1{,}2 \]
        </div>
        <p>
          Oduzimamo 1 sa obe strane:
        </p>
        <div class="math-block">
          \[ \frac{p}{100} = 1{,}2 - 1 = 0{,}2 \]
        </div>
        <p>
          Mnozimo obe strane sa 100:
        </p>
        <div class="math-block">
          \[ p = 0{,}2 \cdot 100 = 20 \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details class="checkpoint">
      <summary>Proveri se: Ako se \(b\) poveca za 20%, a \(a\) za 50%, koliko je ukupno povecanje proizvoda?</summary>
      <div class="answer">
        Faktor za \(a\): \(1{,}5\). Faktor za \(b\): \(1{,}2\).
        Ukupan faktor: \(1{,}5 \cdot 1{,}2 = 1{,}8\), sto je povecanje za 80%. Tacno!
      </div>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="card insight-card">
    <h2 style="justify-content: center;">Kljucno zapazanje</h2>
    <p>
      Kada se jedan faktor poveca za \(x\%\), a drugi za \(y\%\), ukupan faktor promene proizvoda je
      <span class="highlight-blue">proizvod pojedinacnih faktora</span>, a ne njihov zbir.
      Zato 50% + 20% ne daje 70% povecanja, vec:
    </p>
    <div class="big-formula">
      \[ 1{,}5 \times 1{,}2 = 1{,}8 \quad \Rightarrow \quad \text{povecanje za } 80\% \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer-card">
    <h2>Konacan odgovor</h2>
    <div class="final-answer-value">
      \( p = 20 \)
    </div>
    <p style="color:#94a3b8; margin-bottom: 14px;">Tacan odgovor je <strong style="color:#4ade80;">A)</strong></p>
    <div class="options-row">
      <div class="option-card correct">(A) 20 &#10003;</div>
      <div class="option-card">(B) 120</div>
      <div class="option-card">(C) 30</div>
      <div class="option-card">(D) 25</div>
      <div class="option-card">(E) 40</div>
    </div>
    <p class="verification-note">
      <strong>Verifikacija:</strong>
      Ako se \(a\) poveca za 50% (faktor \(1{,}5\)) i \(b\) poveca za 20% (faktor \(1{,}2\)),
      novi proizvod je \(1{,}5 \cdot 1{,}2 \cdot ab = 1{,}8 \cdot ab\), sto je
      zaista povecanje za 80%. Odgovor A) 20 je tacan.
    </p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Ceste greske</h2>
    <ul class="pitfall-list">
      <li>
        <span class="pitfall-label">Greska 1:</span>
        Sabiranje procenata umesto mnozenja faktora. Ako se \(a\) poveca za 50% i \(b\) za \(p\%\),
        ukupno povecanje proizvoda <strong>nije</strong> \((50 + p)\%\). Procenti se ne sabiraju
        kod mnozenja &mdash; mnozi se faktorima!
      </li>
      <li>
        <span class="pitfall-label">Greska 2:</span>
        Brkanje povecanja broja i samog broja. Povecanje za 80% znaci da je novi proizvod
        \(1{,}8 \cdot ab\), a <strong>ne</strong> \(0{,}8 \cdot ab\) (to bi bilo smanjenje na 80%).
      </li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>
      Ako se broj \(a\) poveca za 60%, a broj \(b\) smanji za \(q\%\), pa se njihov proizvod
      poveca za samo 20%, koliko iznosi \(q\)?
    </p>
    <details>
      <summary>Nagovestaj</summary>
      <p style="padding-top: 10px; color: #cbd5e1;">
        Postavi jednacinu: \(1{,}6 \cdot \left(1 - \frac{q}{100}\right) = 1{,}2\).
        Resi po \(q\). Obrati paznju da se \(b\) <em>smanjuje</em>, pa je faktor
        \(\left(1 - \frac{q}{100}\right)\) manji od 1.
      </p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('diagramCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const slider = document.getElementById('pSlider');
  const pValueEl = document.getElementById('pValue');

  function drawDiagram(pVal) {
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    const W = rect.width;
    const H = 440;

    canvas.width = W * dpr;
    canvas.height = H * dpr;
    canvas.style.height = H + 'px';
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);

    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    var s = Math.min(W / 800, 1);
    var p = pVal;
    var factorA = 1.5;
    var factorB = 1 + p / 100;
    var totalFactor = factorA * factorB;
    var totalPercent = (totalFactor - 1) * 100;
    var isCorrect = Math.abs(p - 20) < 0.5;

    // Coordinate system for bar chart
    var chartLeft = 80 * s;
    var chartRight = W - 40 * s;
    var chartTop = 50 * s;
    var chartBottom = H - 100 * s;
    var chartW = chartRight - chartLeft;
    var chartH = chartBottom - chartTop;

    // Y-axis: from 0 to max factor (at least 3.0)
    var maxY = 3.0;

    function toCanvasY(val) {
      return chartBottom - (val / maxY) * chartH;
    }

    // Grid lines
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (var i = 0; i <= 6; i++) {
      var yVal = i * 0.5;
      var yPx = toCanvasY(yVal);
      ctx.beginPath();
      ctx.moveTo(chartLeft, yPx);
      ctx.lineTo(chartRight, yPx);
      ctx.stroke();

      ctx.fillStyle = '#64748b';
      ctx.font = (11 * s) + 'px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'right';
      ctx.fillText(yVal.toFixed(1).replace('.', ','), chartLeft - 8 * s, yPx + 4 * s);
    }

    // Y-axis label
    ctx.save();
    ctx.translate(18 * s, (chartTop + chartBottom) / 2);
    ctx.rotate(-Math.PI / 2);
    ctx.fillStyle = '#94a3b8';
    ctx.font = (12 * s) + 'px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Faktor', 0, 0);
    ctx.restore();

    // Axis
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(chartLeft, chartTop);
    ctx.lineTo(chartLeft, chartBottom);
    ctx.lineTo(chartRight, chartBottom);
    ctx.stroke();

    // Baseline at 1.0
    var baseY = toCanvasY(1.0);
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.moveTo(chartLeft, baseY);
    ctx.lineTo(chartRight, baseY);
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = '#64748b';
    ctx.font = (10 * s) + 'px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('originalna vrednost', chartRight - 120 * s, baseY - 6 * s);

    // Target line at 1.8
    var targetY = toCanvasY(1.8);
    ctx.strokeStyle = 'rgba(74,222,128,0.4)';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.moveTo(chartLeft, targetY);
    ctx.lineTo(chartRight, targetY);
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = '#4ade80';
    ctx.font = (10 * s) + 'px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('cilj: 1,8 (+80%)', chartRight - 110 * s, targetY - 6 * s);

    // Bars
    var numBars = 3;
    var barGap = 40 * s;
    var barW = Math.min(100 * s, (chartW - (numBars + 1) * barGap) / numBars);
    var totalBarsW = numBars * barW + (numBars - 1) * barGap;
    var barsStart = chartLeft + (chartW - totalBarsW) / 2;

    // Bar 1: Factor A = 1.5
    var b1x = barsStart;
    var b1h = (factorA / maxY) * chartH;
    var b1y = chartBottom - b1h;
    var grad1 = ctx.createLinearGradient(b1x, b1y, b1x, chartBottom);
    grad1.addColorStop(0, 'rgba(96,165,250,0.8)');
    grad1.addColorStop(1, 'rgba(96,165,250,0.3)');
    ctx.fillStyle = grad1;
    roundedRect(b1x, b1y, barW, b1h, 6 * s);
    ctx.fill();
    ctx.strokeStyle = 'rgba(96,165,250,0.6)';
    ctx.lineWidth = 1.5;
    roundedRect(b1x, b1y, barW, b1h, 6 * s);
    ctx.stroke();

    // Label
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold ' + (14 * s) + 'px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('1,5', b1x + barW / 2, b1y - 10 * s);
    ctx.fillStyle = '#94a3b8';
    ctx.font = (11 * s) + 'px Segoe UI, system-ui, sans-serif';
    ctx.fillText('Faktor a', b1x + barW / 2, chartBottom + 20 * s);
    ctx.fillText('(+50%)', b1x + barW / 2, chartBottom + 35 * s);

    // Bar 2: Factor B = 1 + p/100
    var b2x = barsStart + barW + barGap;
    var b2h = Math.max(0, (factorB / maxY) * chartH);
    var b2y = chartBottom - b2h;
    var grad2 = ctx.createLinearGradient(b2x, b2y, b2x, chartBottom);
    grad2.addColorStop(0, 'rgba(244,114,182,0.8)');
    grad2.addColorStop(1, 'rgba(244,114,182,0.3)');
    ctx.fillStyle = grad2;
    roundedRect(b2x, b2y, barW, b2h, 6 * s);
    ctx.fill();
    ctx.strokeStyle = 'rgba(244,114,182,0.6)';
    ctx.lineWidth = 1.5;
    roundedRect(b2x, b2y, barW, b2h, 6 * s);
    ctx.stroke();

    // Label
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold ' + (14 * s) + 'px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    var factorBStr = factorB.toFixed(2).replace('.', ',');
    ctx.fillText(factorBStr, b2x + barW / 2, b2y - 10 * s);
    ctx.fillStyle = '#94a3b8';
    ctx.font = (11 * s) + 'px Segoe UI, system-ui, sans-serif';
    ctx.fillText('Faktor b', b2x + barW / 2, chartBottom + 20 * s);
    ctx.fillText('(+' + p + '%)', b2x + barW / 2, chartBottom + 35 * s);

    // Bar 3: Total factor
    var b3x = barsStart + 2 * (barW + barGap);
    var clampedTotal = Math.min(totalFactor, maxY);
    var b3h = Math.max(0, (clampedTotal / maxY) * chartH);
    var b3y = chartBottom - b3h;
    var totalColor = isCorrect ? 'rgba(74,222,128,' : 'rgba(167,139,250,';
    var grad3 = ctx.createLinearGradient(b3x, b3y, b3x, chartBottom);
    grad3.addColorStop(0, totalColor + '0.8)');
    grad3.addColorStop(1, totalColor + '0.3)');
    ctx.fillStyle = grad3;
    roundedRect(b3x, b3y, barW, b3h, 6 * s);
    ctx.fill();
    ctx.strokeStyle = totalColor + '0.6)';
    ctx.lineWidth = isCorrect ? 2.5 : 1.5;
    roundedRect(b3x, b3y, barW, b3h, 6 * s);
    ctx.stroke();

    // Glow for correct answer
    if (isCorrect) {
      ctx.shadowColor = 'rgba(74,222,128,0.4)';
      ctx.shadowBlur = 15;
      roundedRect(b3x, b3y, barW, b3h, 6 * s);
      ctx.stroke();
      ctx.shadowBlur = 0;
    }

    // Label
    ctx.fillStyle = isCorrect ? '#4ade80' : '#a78bfa';
    ctx.font = 'bold ' + (14 * s) + 'px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    var totalStr = totalFactor.toFixed(2).replace('.', ',');
    var percentStr = totalPercent.toFixed(1).replace('.', ',');
    ctx.fillText(totalStr, b3x + barW / 2, b3y - 10 * s);
    ctx.fillStyle = '#94a3b8';
    ctx.font = (11 * s) + 'px Segoe UI, system-ui, sans-serif';
    ctx.fillText('Proizvod', b3x + barW / 2, chartBottom + 20 * s);
    ctx.fillStyle = isCorrect ? '#4ade80' : '#94a3b8';
    ctx.font = (isCorrect ? 'bold ' : '') + (11 * s) + 'px Segoe UI, system-ui, sans-serif';
    ctx.fillText('(+' + percentStr + '%)', b3x + barW / 2, chartBottom + 35 * s);

    // Multiplication signs between bars
    ctx.fillStyle = '#64748b';
    ctx.font = 'bold ' + (20 * s) + 'px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('\u00D7', b1x + barW + barGap / 2, chartBottom - chartH / 2);
    ctx.fillText('=', b2x + barW + barGap / 2, chartBottom - chartH / 2);

    // Title
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold ' + (15 * s) + 'px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    if (isCorrect) {
      ctx.fillStyle = '#4ade80';
      ctx.fillText('p = 20  \u2192  Proizvod se povecava tacno za 80%!', W / 2, 30 * s);
    } else {
      ctx.fillStyle = '#e2e8f0';
      ctx.fillText('p = ' + p + '  \u2192  Proizvod se povecava za ' + percentStr + '%', W / 2, 30 * s);
    }

    // Overflow indicator
    if (totalFactor > maxY) {
      ctx.fillStyle = '#e09468';
      ctx.font = (11 * s) + 'px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('(' + totalStr + ' prelazi skalu)', b3x + barW / 2, chartTop - 5 * s);
    }
  }

  function roundedRect(x, y, w, h, r) {
    ctx.beginPath();
    ctx.moveTo(x + r, y);
    ctx.lineTo(x + w - r, y);
    ctx.arcTo(x + w, y, x + w, y + r, r);
    ctx.lineTo(x + w, y + h - r);
    ctx.arcTo(x + w, y + h, x + w - r, y + h, r);
    ctx.lineTo(x + r, y + h);
    ctx.arcTo(x, y + h, x, y + h - r, r);
    ctx.lineTo(x, y + r);
    ctx.arcTo(x, y, x + r, y, r);
    ctx.closePath();
  }

  function update() {
    var p = parseInt(slider.value, 10);
    pValueEl.textContent = p;
    drawDiagram(p);
  }

  slider.addEventListener('input', update);

  // Touch support for slider is handled natively by the range input

  function init() {
    update();
  }

  init();
  window.addEventListener('resize', function() { update(); });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Procentualno povecanje proizvoda dva broja",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["procentni racun", "proizvod", "procentualno povecanje", "linearna jednacina"]
}
BRAINSPARK_META-->