<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stepenovanje kompleksnog broja - Rešenje</title>

<script type="text/info" id="logic-scratchpad">
Problem: z = ((2+4i)/(-1+3i))^2019, naći Re(z) + Im(z).

Step 1: Simplify the fraction (2+4i)/(-1+3i).
  Multiply numerator and denominator by the conjugate of the denominator: (-1-3i).
  Denominator: (-1+3i)(-1-3i) = (-1)^2 + 3^2 = 1 + 9 = 10
  Numerator: (2+4i)(-1-3i) = -2 - 6i - 4i - 12i^2 = -2 - 10i - 12(-1) = -2 - 10i + 12 = 10 - 10i
  Result: (10 - 10i)/10 = 1 - i

Step 2: Convert 1 - i to trigonometric (polar) form.
  |1 - i| = sqrt(1^2 + (-1)^2) = sqrt(2)
  arg(1 - i) = arctan(-1/1) = -pi/4 (fourth quadrant)
  So 1 - i = sqrt(2) * (cos(-pi/4) + i*sin(-pi/4))
  Or equivalently: 1 - i = sqrt(2) * e^(-i*pi/4)

Step 3: Raise to the 2019th power using De Moivre's theorem.
  z = (1 - i)^2019 = (sqrt(2))^2019 * (cos(-2019*pi/4) + i*sin(-2019*pi/4))

  Modulus: (sqrt(2))^2019 = 2^(2019/2)

  Angle: -2019*pi/4
  Reduce: 2019 = 4 * 504 + 3, so 2019/4 = 504 + 3/4
  -2019*pi/4 = -504*pi - 3*pi/4
  -504*pi = -252 * 2*pi (full rotations, effectively 0)
  Effective angle: -3*pi/4

Step 4: Compute Re(z) and Im(z).
  Re(z) = 2^(2019/2) * cos(-3*pi/4) = 2^(2019/2) * (-sqrt(2)/2)
         = -2^(2019/2) * 2^(1/2) / 2 = -2^(2019/2 + 1/2 - 1) = -2^(1009)

  Im(z) = 2^(2019/2) * sin(-3*pi/4) = 2^(2019/2) * (-sqrt(2)/2)
         = -2^(1009) (same calculation)

Step 5: Sum.
  Re(z) + Im(z) = -2^1009 + (-2^1009) = -2 * 2^1009 = -2^1010

Answer: D) -2^1010 ✓ (matches the key)
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
  min-height: 100vh;
}

.container {
  max-width: 900px;
  margin: 0 auto;
}

h1 {
  font-size: 2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 6px;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 28px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 22px 26px;
  margin-bottom: 22px;
}

.card-title {
  font-size: 1.15rem;
  font-weight: 700;
  color: #60a5fa;
  margin-bottom: 12px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  font-size: 0.85rem;
  font-weight: 700;
  flex-shrink: 0;
}

.badge-blue { background: rgba(96,165,250,0.18); color: #60a5fa; }
.badge-purple { background: rgba(167,139,250,0.18); color: #a78bfa; }
.badge-green { background: rgba(52,211,153,0.18); color: #34d399; }
.badge-pink { background: rgba(244,114,182,0.18); color: #f472b6; }

.problem-statement {
  border-left: 4px solid #a78bfa;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-top: 16px;
}

.given-item {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 16px;
  min-width: 80px;
  text-align: center;
}

.given-item .label {
  font-size: 0.8rem;
  color: #94a3b8;
  font-weight: 600;
  margin-bottom: 4px;
}

.given-item .value {
  font-size: 1rem;
  color: #e2e8f0;
  font-weight: 600;
}

.plan-card {
  border-left: 4px solid #60a5fa;
}

details {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 18px 24px;
  margin: 15px 0 22px;
}

details summary {
  cursor: pointer;
  font-weight: 700;
  color: #a78bfa;
  font-size: 1.05rem;
  list-style: none;
  display: flex;
  align-items: center;
  gap: 8px;
}

details summary::-webkit-details-marker { display: none; }

details summary::before {
  content: '\25B6';
  font-size: 0.75rem;
  transition: transform 0.2s;
}

details[open] summary::before {
  transform: rotate(90deg);
}

details .theory-content {
  margin-top: 14px;
  color: #cbd5e1;
  line-height: 1.8;
}

.step-card {
  position: relative;
  padding-left: 18px;
  cursor: pointer;
  transition: border-color 0.2s;
}

.step-card::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  border-radius: 2px;
  transition: width 0.2s;
}

.step-card:hover::before,
.step-card.active::before {
  width: 4px;
}

.step-card.step-blue::before { background: #60a5fa; }
.step-card.step-purple::before { background: #a78bfa; }
.step-card.step-green::before { background: #34d399; }
.step-card.step-pink::before { background: #f472b6; }

.step-card:hover {
  border-color: #475569;
}

.checkpoint {
  background: rgba(96,165,250,0.08);
  border: 1px dashed #60a5fa;
  border-radius: 10px;
  padding: 14px 18px;
  margin: 15px 0;
  color: #94a3b8;
  font-size: 0.95rem;
}

.checkpoint strong {
  color: #60a5fa;
}

.math-block {
  margin: 14px 0;
  overflow-x: auto;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 14px;
  padding: 22px 26px;
  margin-bottom: 22px;
}

.insight-box .card-title {
  color: #a78bfa;
}

.final-answer-card {
  background: linear-gradient(135deg, rgba(52,211,153,0.08), rgba(74,222,128,0.08));
  border: 2px solid #34d399;
  border-radius: 16px;
  padding: 28px 30px;
  margin-bottom: 22px;
  text-align: center;
}

.final-answer-card .label {
  color: #34d399;
  font-weight: 700;
  font-size: 1.1rem;
  margin-bottom: 10px;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.final-answer-card .answer {
  color: #4ade80;
  font-size: 1.45rem;
  font-weight: 700;
  line-height: 1.6;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 10px;
  margin-top: 16px;
}

.final-option {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 8px;
  padding: 8px 16px;
  font-size: 0.95rem;
  color: #94a3b8;
}

.final-option.correct {
  border-color: #34d399;
  color: #34d399;
  background: rgba(52,211,153,0.08);
  font-weight: 600;
}

.pitfalls-card {
  border-left: 4px solid #f472b6;
}

.pitfalls-card ul {
  margin-left: 18px;
  color: #cbd5e1;
}

.pitfalls-card li {
  margin-bottom: 8px;
}

.challenge-card {
  border: 1px dashed #a78bfa;
  background: rgba(167,139,250,0.05);
}

.highlight {
  color: #60a5fa;
  font-weight: 600;
}

.highlight-green {
  color: #34d399;
  font-weight: 600;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

.highlight-purple {
  color: #a78bfa;
  font-weight: 600;
}

.visual-container {
  display: flex;
  justify-content: center;
  margin: 10px 0;
}

canvas {
  border-radius: 12px;
  max-width: 100%;
  touch-action: none;
}

.drag-hint {
  color: #64748b;
  font-size: 0.85rem;
  text-align: center;
  margin-top: 8px;
}

.verification-note {
  color: #94a3b8;
  margin-top: 12px;
  font-size: 0.95rem;
}

@media (max-width: 700px) {
  h1 { font-size: 1.5rem; }
  .card, .problem-statement, details, .insight-box, .final-answer-card {
    padding: 16px 18px;
  }
  .given-grid {
    flex-direction: column;
  }
  .final-options {
    flex-direction: column;
    align-items: center;
  }
  body { padding: 12px; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Stepenovanje kompleksnog broja</h1>
  <p class="subtitle">Kompleksni brojevi, trigonometrijski oblik i De Moavrov teorem</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <div class="card-title"><span class="badge badge-purple">?</span> Zadatak</div>
    <p>Ako je dat kompleksan broj \( z = \left(\dfrac{2 + 4i}{-1 + 3i}\right)^{2019} \), gde je \(i\) imaginarna jedinica (\(i^2 = -1\)), onda je zbir \(\operatorname{Re}(z) + \operatorname{Im}(z)\) jednak:</p>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(0\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(-2^{1009}\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(2^{1009}\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(-2^{1010}\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(2^{1010}\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <div class="card-title"><span class="badge badge-blue">&#9881;</span> Plan rešavanja</div>
    <p>
      Prvo ćemo pojednostaviti razlomak \(\dfrac{2+4i}{-1+3i}\) množenjem konjugatom imenioca.
      Zatim ćemo rezultat prevesti u trigonometrijski oblik i primeniti <span class="highlight">De Moavrov teorem</span> za stepenovanje.
    </p>
  </div>

  <!-- Theory Refresher -->
  <details>
    <summary>Ključne formule i teoreme</summary>
    <div class="theory-content">
      <p><strong>Konjugat kompleksnog broja:</strong> Konjugat broja \(a + bi\) je \(\overline{a+bi} = a - bi\).
        Za deljenje kompleksnih brojeva koristimo: \(\dfrac{z_1}{z_2} = \dfrac{z_1 \cdot \overline{z_2}}{|z_2|^2}\).</p>

      <p style="margin-top: 12px;"><strong>Trigonometrijski oblik:</strong> Svaki kompleksni broj \(z = a + bi\) može se zapisati kao
        \( z = r(\cos\varphi + i\sin\varphi) \), gde je \(r = |z| = \sqrt{a^2 + b^2}\) modul, a \(\varphi = \arg(z)\) argument.</p>

      <p style="margin-top: 12px;"><strong>De Moavrov teorem:</strong>
        \[ z^n = r^n \bigl(\cos(n\varphi) + i\sin(n\varphi)\bigr) \]
        Ovo nam omogućava da stepenujemo kompleksni broj tako što stepenujemo modul i pomnožimo argument sa \(n\).</p>

      <p style="margin-top: 12px;"><strong>Perioda trigonometrijskih funkcija:</strong>
        \(\cos\) i \(\sin\) imaju period \(2\pi\), pa je \(\cos(\alpha + 2k\pi) = \cos\alpha\) za svako \(k \in \mathbb{Z}\).</p>
    </div>
  </details>

  <!-- Visual Aid -->
  <div class="card">
    <div class="card-title"><span class="badge badge-blue">&#128202;</span> Kompleksna ravan</div>
    <p style="color:#94a3b8; margin-bottom: 12px;">
      Prikaz broja \(1 - i\) i njegovog argumenta u kompleksnoj ravni. Prevuci tačku da istražiš ugao.
    </p>
    <div class="visual-container">
      <canvas id="complexCanvas" width="560" height="440"></canvas>
    </div>
    <p class="drag-hint">Prevuci tačku da promeniš kompleksni broj i vidiš kako se menja argument</p>
  </div>

  <!-- Step 1 -->
  <div class="card step-card step-blue">
    <div class="card-title"><span class="badge badge-blue">1</span> Pojednostavimo razlomak</div>
    <p>Pomnožimo brojilac i imenilac <span class="highlight">konjugatom imenioca</span>, tj. brojem \((-1 - 3i)\):</p>
    <div class="math-block">
      \[ \frac{2 + 4i}{-1 + 3i} = \frac{(2 + 4i)(-1 - 3i)}{(-1 + 3i)(-1 - 3i)} \]
    </div>
    <p>Imenilac (korišćenjem formule \((a+b)(a-b) = a^2 - b^2\)):</p>
    <div class="math-block">
      \[ (-1 + 3i)(-1 - 3i) = (-1)^2 - (3i)^2 = 1 - 9i^2 = 1 + 9 = 10 \]
    </div>
    <p>Brojilac (množimo svaki član sa svakim):</p>
    <div class="math-block">
      \[ (2 + 4i)(-1 - 3i) = -2 - 6i - 4i - 12i^2 \]
    </div>
    <div class="math-block">
      \[ = -2 - 10i - 12 \cdot(-1) = -2 - 10i + 12 = 10 - 10i \]
    </div>
    <p>Dakle:</p>
    <div class="math-block">
      \[ \frac{2 + 4i}{-1 + 3i} = \frac{10 - 10i}{10} = \boxed{1 - i} \]
    </div>
  </div>

  <!-- Checkpoint 1 -->
  <details style="margin: 15px 0;">
    <summary><strong style="color:#60a5fa;">&#10003; Proveri sebe:</strong> <span style="color:#94a3b8;">Koliko je \(|1 - i|\)?</span></summary>
    <div class="theory-content" style="margin-top: 10px;">
      <p>\(|1 - i| = \sqrt{1^2 + (-1)^2} = \sqrt{2}\). Ako si dobio \(\sqrt{2}\), na pravom si putu!</p>
    </div>
  </details>

  <!-- Step 2 -->
  <div class="card step-card step-purple">
    <div class="card-title"><span class="badge badge-purple">2</span> Trigonometrijski oblik broja \(1 - i\)</div>
    <p>Odredimo <span class="highlight-purple">modul</span> i <span class="highlight-purple">argument</span> broja \(1 - i\):</p>
    <div class="math-block">
      \[ r = |1 - i| = \sqrt{1^2 + (-1)^2} = \sqrt{2} \]
    </div>
    <p>Broj \(1 - i\) ima realni deo \(1 > 0\) i imaginarni deo \(-1 < 0\), pa se nalazi u <span class="highlight">IV kvadrantu</span>:</p>
    <div class="math-block">
      \[ \varphi = \arctan\!\left(\frac{-1}{1}\right) = -\frac{\pi}{4} \]
    </div>
    <p>Trigonometrijski oblik:</p>
    <div class="math-block">
      \[ 1 - i = \sqrt{2}\left(\cos\!\left(-\frac{\pi}{4}\right) + i\sin\!\left(-\frac{\pi}{4}\right)\right) \]
    </div>
  </div>

  <!-- Step 3 -->
  <div class="card step-card step-blue">
    <div class="card-title"><span class="badge badge-blue">3</span> Primenimo De Moavrov teorem</div>
    <p>Sada stepenujemo na \(2019\)-ti stepen:</p>
    <div class="math-block">
      \[ z = (1 - i)^{2019} = \left(\sqrt{2}\right)^{2019} \left(\cos\!\left(-\frac{2019\pi}{4}\right) + i\sin\!\left(-\frac{2019\pi}{4}\right)\right) \]
    </div>
    <p><span class="highlight">Modul:</span></p>
    <div class="math-block">
      \[ \left(\sqrt{2}\right)^{2019} = \left(2^{1/2}\right)^{2019} = 2^{2019/2} \]
    </div>
    <p><span class="highlight">Argument:</span> Svedimo ugao \(-\dfrac{2019\pi}{4}\) na interval \([0, 2\pi)\).</p>
    <p>Podelimo \(2019\) sa \(4\) da nađemo ostatak:</p>
    <div class="math-block">
      \[ 2019 = 4 \cdot 504 + 3 \]
    </div>
    <p>Dakle:</p>
    <div class="math-block">
      \[ -\frac{2019\pi}{4} = -\frac{(4 \cdot 504 + 3)\pi}{4} = -504\pi - \frac{3\pi}{4} \]
    </div>
    <p>Pošto je \(-504\pi = -252 \cdot 2\pi\) (celobrojni umnožak perioda), taj deo ne utiče na vrednost:</p>
    <div class="math-block">
      \[ \cos\!\left(-\frac{2019\pi}{4}\right) = \cos\!\left(-\frac{3\pi}{4}\right), \quad \sin\!\left(-\frac{2019\pi}{4}\right) = \sin\!\left(-\frac{3\pi}{4}\right) \]
    </div>
  </div>

  <!-- Checkpoint 2 -->
  <details style="margin: 15px 0;">
    <summary><strong style="color:#60a5fa;">&#10003; Proveri sebe:</strong> <span style="color:#94a3b8;">Koliko je \(\cos\!\left(-\frac{3\pi}{4}\right)\)?</span></summary>
    <div class="theory-content" style="margin-top: 10px;">
      <p>\(\cos\!\left(-\frac{3\pi}{4}\right) = \cos\!\left(\frac{3\pi}{4}\right) = -\frac{\sqrt{2}}{2}\).
        Podsetnik: kosinus je parna funkcija, a \(\frac{3\pi}{4}\) je u II kvadrantu gde je kosinus negativan.</p>
    </div>
  </details>

  <!-- Step 4 -->
  <div class="card step-card step-purple">
    <div class="card-title"><span class="badge badge-purple">4</span> Izračunamo \(\cos\) i \(\sin\) efektivnog ugla</div>
    <p>Ugao \(-\dfrac{3\pi}{4}\) (tj. \(-135°\)) se nalazi u <span class="highlight-pink">III kvadrantu</span>:</p>
    <div class="math-block">
      \[ \cos\!\left(-\frac{3\pi}{4}\right) = -\frac{\sqrt{2}}{2} \]
    </div>
    <div class="math-block">
      \[ \sin\!\left(-\frac{3\pi}{4}\right) = -\frac{\sqrt{2}}{2} \]
    </div>
    <p>Dakle:</p>
    <div class="math-block">
      \[ z = 2^{2019/2} \left(-\frac{\sqrt{2}}{2} - i\,\frac{\sqrt{2}}{2}\right) \]
    </div>
  </div>

  <!-- Step 5 -->
  <div class="card step-card step-green">
    <div class="card-title"><span class="badge badge-green">5</span> Izračunamo \(\operatorname{Re}(z)\) i \(\operatorname{Im}(z)\)</div>
    <p><span class="highlight">Realni deo:</span></p>
    <div class="math-block">
      \[ \operatorname{Re}(z) = 2^{2019/2} \cdot \left(-\frac{\sqrt{2}}{2}\right) = -2^{2019/2} \cdot \frac{2^{1/2}}{2} \]
    </div>
    <p>Sređujemo eksponent:</p>
    <div class="math-block">
      \[ -2^{2019/2} \cdot 2^{1/2} \cdot 2^{-1} = -2^{2019/2 + 1/2 - 1} = -2^{(2019+1-2)/2} = -2^{2018/2} = -2^{1009} \]
    </div>
    <p><span class="highlight">Imaginarni deo:</span> Analogno (isti koeficijent ispred \(i\)):</p>
    <div class="math-block">
      \[ \operatorname{Im}(z) = -2^{1009} \]
    </div>
  </div>

  <!-- Step 6 -->
  <div class="card step-card step-green">
    <div class="card-title"><span class="badge badge-green">6</span> Zbir \(\operatorname{Re}(z) + \operatorname{Im}(z)\)</div>
    <p>Saberimo realni i imaginarni deo:</p>
    <div class="math-block">
      \[ \operatorname{Re}(z) + \operatorname{Im}(z) = -2^{1009} + (-2^{1009}) = -2 \cdot 2^{1009} \]
    </div>
    <p>Korišćenjem pravila stepena \(a^m \cdot a^n = a^{m+n}\):</p>
    <div class="math-block">
      \[ -2 \cdot 2^{1009} = -2^1 \cdot 2^{1009} = \boxed{-2^{1010}} \]
    </div>
  </div>

  <!-- Checkpoint 3 -->
  <details style="margin: 15px 0;">
    <summary><strong style="color:#60a5fa;">&#10003; Proveri sebe:</strong> <span style="color:#94a3b8;">Zašto je odgovor negativan?</span></summary>
    <div class="theory-content" style="margin-top: 10px;">
      <p>Zato što je ugao \(-\frac{3\pi}{4}\) u III kvadrantu, gde su i kosinus i sinus negativni.
        To znači da su oba dela (realni i imaginarni) negativna, pa je i njihov zbir negativan.</p>
    </div>
  </details>

  <!-- Key Insight -->
  <div class="insight-box">
    <div class="card-title"><span class="badge badge-purple">&#128161;</span> Ključni uvid</div>
    <p>
      Ceo zadatak se svodi na jedno ključno zapažanje:
      razlomak \(\dfrac{2+4i}{-1+3i}\) se pojednostavljuje u <span class="highlight">elegantni oblik</span> \(1 - i\),
      čiji je modul tačno \(\sqrt{2}\) a argument \(-\dfrac{\pi}{4}\).
    </p>
    <p style="margin-top: 10px;">
      Ostatak pri deljenju \(2019 \div 4\) je \(3\), što daje efektivni ugao \(-\dfrac{3\pi}{4}\)
      u III kvadrantu &mdash; oba trigonometrijska člana su jednaka i negativna,
      pa se zbir svodi na <span class="highlight-green">udvostručavanje jednog člana</span>.
    </p>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-card">
    <div class="label">Konačan odgovor</div>
    <div class="answer">\(\operatorname{Re}(z) + \operatorname{Im}(z) = -2^{1010}\)</div>
    <div class="final-options">
      <span class="final-option">A) \(0\)</span>
      <span class="final-option">B) \(-2^{1009}\)</span>
      <span class="final-option">C) \(2^{1009}\)</span>
      <span class="final-option correct">D) \(-2^{1010}\)</span>
      <span class="final-option">E) \(2^{1010}\)</span>
    </div>
    <p class="verification-note">
      <strong>Provera:</strong> Odgovor \(-2^{1010}\) ima smisla jer je
      \(-2 \cdot 2^{1009} = -2^{1010}\), a negativan predznak potiče od toga
      što ugao \(-\frac{3\pi}{4}\) stavlja kompleksni broj u III kvadrant.
    </p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfalls-card">
    <div class="card-title"><span class="badge badge-pink">&#9888;</span> Česte greške</div>
    <ul>
      <li><strong>Pogrešna redukcija ugla:</strong> Ako se ostatak pri deljenju \(2019 \div 4\)
        pogrešno izračuna (npr. kao \(1\) umesto \(3\)), dobija se pogrešan ugao i samim tim pogrešan odgovor.</li>
      <li><strong>Zaboraviti da se \(\sqrt{2}/2\) pomnoži sa modulom:</strong> Pri izračunavanju \(\operatorname{Re}(z)\) i \(\operatorname{Im}(z)\),
        treba pažljivo srediti eksponente: \(2^{2019/2} \cdot 2^{1/2} \cdot 2^{-1} = 2^{1009}\), a ne \(2^{1010}\).</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <div class="card-title"><span class="badge badge-purple">&#127942;</span> Dodatni izazov</div>
    <p>Izračunaj \((1 + i)^{2020}\) i odredi \(\operatorname{Re}(z) \cdot \operatorname{Im}(z)\).</p>
    <details style="margin: 15px 0; background: transparent; border-color: #a78bfa; padding: 12px 16px;">
      <summary style="color: #a78bfa;">Nagoveštaj</summary>
      <div class="theory-content" style="margin-top: 10px;">
        <p>Broj \(1 + i\) ima modul \(\sqrt{2}\) i argument \(\frac{\pi}{4}\).
          Primeni De Moavrov teorem i reduciraj ugao \(\frac{2020\pi}{4} = 505\pi\).
          Razmisli: u kom je kvadrantu ugao \(505\pi\)?</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('complexCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  const originX = W / 2;
  const originY = H / 2;
  const scale = 80;

  let dragPoint = { x: 1, y: -1 };
  let isDragging = false;

  function toCanvas(x, y) {
    return { x: originX + x * scale, y: originY - y * scale };
  }

  function fromCanvas(cx, cy) {
    return { x: (cx - originX) / scale, y: -(cy - originY) / scale };
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Grid
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    const xRange = Math.ceil(W / (2 * scale)) + 1;
    const yRange = Math.ceil(H / (2 * scale)) + 1;
    for (let i = -xRange; i <= xRange; i++) {
      const p = toCanvas(i, 0);
      ctx.beginPath();
      ctx.moveTo(p.x, 0);
      ctx.lineTo(p.x, H);
      ctx.stroke();
    }
    for (let i = -yRange; i <= yRange; i++) {
      const p = toCanvas(0, i);
      ctx.beginPath();
      ctx.moveTo(0, p.y);
      ctx.lineTo(W, p.y);
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(0, originY);
    ctx.lineTo(W, originY);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(originX, 0);
    ctx.lineTo(originX, H);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#64748b';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    for (let i = -xRange; i <= xRange; i++) {
      if (i === 0) continue;
      const p = toCanvas(i, 0);
      ctx.fillText(String(i), p.x, originY + 18);
    }
    ctx.textAlign = 'right';
    for (let i = -yRange; i <= yRange; i++) {
      if (i === 0) continue;
      const p = toCanvas(0, i);
      ctx.fillText(String(i) + 'i', originX - 8, p.y + 4);
    }

    // Re and Im labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Re', W - 20, originY - 8);
    ctx.fillText('Im', originX + 16, 16);

    // Origin
    ctx.fillText('0', originX - 10, originY + 18);

    // Draw the vector from origin to point
    const px = dragPoint.x;
    const py = dragPoint.y;
    const cp = toCanvas(px, py);
    const o = toCanvas(0, 0);

    // Angle arc
    const r = Math.sqrt(px * px + py * py);
    const angle = Math.atan2(py, px);
    if (r > 0.1) {
      ctx.strokeStyle = 'rgba(167, 139, 250, 0.5)';
      ctx.lineWidth = 2;
      ctx.beginPath();
      const arcR = Math.min(40, r * scale * 0.4);
      if (angle >= 0) {
        ctx.arc(o.x, o.y, arcR, -angle, 0);
      } else {
        ctx.arc(o.x, o.y, arcR, 0, -angle, true);
      }
      ctx.stroke();

      // Angle label
      const angleDeg = (angle * 180 / Math.PI).toFixed(0);
      const labelAngle = angle / 2;
      const labelR = arcR + 16;
      ctx.fillStyle = '#a78bfa';
      ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(angleDeg + '\u00B0', o.x + labelR * Math.cos(-labelAngle), o.y + labelR * Math.sin(labelAngle));
    }

    // Dashed projections
    ctx.setLineDash([5, 4]);
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    // Horizontal projection
    ctx.beginPath();
    ctx.moveTo(cp.x, cp.y);
    ctx.lineTo(cp.x, originY);
    ctx.stroke();
    // Vertical projection
    ctx.beginPath();
    ctx.moveTo(cp.x, cp.y);
    ctx.lineTo(originX, cp.y);
    ctx.stroke();
    ctx.setLineDash([]);

    // Vector line
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(o.x, o.y);
    ctx.lineTo(cp.x, cp.y);
    ctx.stroke();

    // Arrowhead
    const aLen = 12;
    const aAngle = Math.atan2(o.y - cp.y, cp.x - o.x);
    ctx.fillStyle = '#60a5fa';
    ctx.beginPath();
    ctx.moveTo(cp.x, cp.y);
    ctx.lineTo(cp.x - aLen * Math.cos(-aAngle + 0.3), cp.y - aLen * Math.sin(-aAngle + 0.3));
    ctx.lineTo(cp.x - aLen * Math.cos(-aAngle - 0.3), cp.y - aLen * Math.sin(-aAngle - 0.3));
    ctx.closePath();
    ctx.fill();

    // Modulus label
    const midX = (o.x + cp.x) / 2;
    const midY = (o.y + cp.y) / 2;
    const rVal = r.toFixed(2).replace('.', ',');
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    const perpX = -(cp.y - o.y);
    const perpY = cp.x - o.x;
    const perpLen = Math.sqrt(perpX * perpX + perpY * perpY) || 1;
    ctx.fillText('r = ' + rVal, midX + perpX / perpLen * 18, midY + perpY / perpLen * 18);

    // Draggable point (glow)
    ctx.beginPath();
    const gradient = ctx.createRadialGradient(cp.x, cp.y, 0, cp.x, cp.y, 18);
    gradient.addColorStop(0, 'rgba(96, 165, 250, 0.4)');
    gradient.addColorStop(1, 'rgba(96, 165, 250, 0)');
    ctx.fillStyle = gradient;
    ctx.arc(cp.x, cp.y, 18, 0, 2 * Math.PI);
    ctx.fill();

    // Draggable point (solid)
    ctx.fillStyle = '#60a5fa';
    ctx.beginPath();
    ctx.arc(cp.x, cp.y, 7, 0, 2 * Math.PI);
    ctx.fill();
    ctx.strokeStyle = '#e2e8f0';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Point label
    const pxStr = px.toFixed(1).replace('.', ',');
    const pyStr = py.toFixed(1).replace('.', ',');
    const sign = py >= 0 ? ' + ' : ' - ';
    const absIm = Math.abs(py).toFixed(1).replace('.', ',');
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText(pxStr + sign + absIm + 'i', cp.x + 14, cp.y - 14);

    // Info box in top-left
    ctx.fillStyle = 'rgba(15, 23, 42, 0.85)';
    ctx.fillRect(8, 8, 200, 72);
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.strokeRect(8, 8, 200, 72);

    ctx.fillStyle = '#e2e8f0';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('z = ' + pxStr + sign + absIm + 'i', 16, 28);
    ctx.fillText('|z| = ' + rVal, 16, 46);
    ctx.fillText('arg(z) = ' + angleDeg + '\u00B0' + ' = ' + (angle / Math.PI).toFixed(2).replace('.', ',') + '\u03C0', 16, 64);
  }

  function getPointerPos(e) {
    const rect = canvas.getBoundingClientRect();
    const scaleX = W / rect.width;
    const scaleY = H / rect.height;
    let clientX, clientY;
    if (e.touches) {
      clientX = e.touches[0].clientX;
      clientY = e.touches[0].clientY;
    } else {
      clientX = e.clientX;
      clientY = e.clientY;
    }
    return {
      x: (clientX - rect.left) * scaleX,
      y: (clientY - rect.top) * scaleY
    };
  }

  function onPointerDown(e) {
    const pos = getPointerPos(e);
    const cp = toCanvas(dragPoint.x, dragPoint.y);
    const dx = pos.x - cp.x;
    const dy = pos.y - cp.y;
    if (dx * dx + dy * dy < 400) {
      isDragging = true;
      e.preventDefault();
    }
  }

  function onPointerMove(e) {
    if (!isDragging) return;
    e.preventDefault();
    const pos = getPointerPos(e);
    const mp = fromCanvas(pos.x, pos.y);
    // Snap to nearest 0.1
    dragPoint.x = Math.round(mp.x * 10) / 10;
    dragPoint.y = Math.round(mp.y * 10) / 10;
    draw();
  }

  function onPointerUp() {
    isDragging = false;
  }

  canvas.addEventListener('mousedown', onPointerDown);
  canvas.addEventListener('mousemove', onPointerMove);
  canvas.addEventListener('mouseup', onPointerUp);
  canvas.addEventListener('mouseleave', onPointerUp);
  canvas.addEventListener('touchstart', onPointerDown, { passive: false });
  canvas.addEventListener('touchmove', onPointerMove, { passive: false });
  canvas.addEventListener('touchend', onPointerUp);

  draw();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{"title":"Stepenovanje kompleksnog broja - De Moavrov teorem","subject":"math","unit":"algebra","topic_tags":["kompleksni brojevi","De Moavrov teorem","trigonometrijski oblik","stepenovanje","argument kompleksnog broja"]}
BRAINSPARK_META-->