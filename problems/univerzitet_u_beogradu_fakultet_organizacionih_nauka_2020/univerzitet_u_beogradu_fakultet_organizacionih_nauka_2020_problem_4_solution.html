<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stepen kompleksnog broja</title>
<script type="text/info" id="logic-scratchpad">
Problem: |z| + conjugate(z) = 3 + i*sqrt(3), find (z-1)^2020.

Let z = a + bi, where a, b are real.
|z| = sqrt(a^2 + b^2)
conjugate(z) = a - bi

Equation: sqrt(a^2 + b^2) + (a - bi) = 3 + i*sqrt(3)

Comparing real parts: sqrt(a^2 + b^2) + a = 3
Comparing imaginary parts: -b = sqrt(3), so b = -sqrt(3)

From real part equation:
sqrt(a^2 + 3) + a = 3
sqrt(a^2 + 3) = 3 - a  (requires a <= 3)
Squaring: a^2 + 3 = 9 - 6a + a^2
3 = 9 - 6a
6a = 6
a = 1

Check: sqrt(1 + 3) + 1 = 2 + 1 = 3. Correct!

So z = 1 - i*sqrt(3).

z - 1 = -i*sqrt(3)

(z - 1)^2020 = (-i*sqrt(3))^2020
= (-i)^2020 * (sqrt(3))^2020

(sqrt(3))^2020 = 3^1010

(-i)^1 = -i
(-i)^2 = -1
(-i)^3 = i
(-i)^4 = 1
Period = 4.
2020 / 4 = 505 remainder 0.
So (-i)^2020 = ((-i)^4)^505 = 1^505 = 1.

(z - 1)^2020 = 1 * 3^1010 = 3^1010.

Answer: (B) 3^1010.

Alternative approach using polar form:
z - 1 = -i*sqrt(3)
In polar form: |-i*sqrt(3)| = sqrt(3), argument = -pi/2 (or 3*pi/2).
So z - 1 = sqrt(3) * e^{-i*pi/2}

(z - 1)^2020 = (sqrt(3))^2020 * e^{-i*2020*pi/2}
= 3^1010 * e^{-i*1010*pi}
= 3^1010 * (e^{-i*pi})^1010
= 3^1010 * (-1)^1010
= 3^1010 * 1
= 3^1010

Confirmed: Answer is (B) 3^1010.
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(30, 41, 59, 0.8);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 100px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.plan-card {
  border-left: 4px solid #a78bfa;
}

.plan-card h2 {
  color: #a78bfa;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  font-size: 1.05rem;
  padding: 8px 0;
  user-select: none;
}

details summary:hover {
  color: #93c5fd;
}

details[open] summary {
  margin-bottom: 12px;
}

.theory-content ul {
  list-style: none;
  padding-left: 0;
}

.theory-content li {
  padding: 8px 12px;
  margin-bottom: 8px;
  background: rgba(96, 165, 250, 0.06);
  border-left: 3px solid #60a5fa;
  border-radius: 0 8px 8px 0;
}

.canvas-container {
  text-align: center;
  margin: 16px 0;
}

.canvas-container canvas {
  border-radius: 12px;
  border: 1px solid #334155;
  max-width: 100%;
  touch-action: none;
}

.canvas-hint {
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
  font-style: italic;
}

.step {
  display: flex;
  gap: 16px;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 12px;
  cursor: pointer;
  transition: all 0.2s;
  border-left: 3px solid transparent;
}

.step:hover, .step.active {
  background: rgba(96, 165, 250, 0.05);
  border-left-color: #4ade80;
}

.step-number {
  width: 32px;
  height: 32px;
  min-width: 32px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  color: #fff;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  color: #e2e8f0;
  font-size: 1.1rem;
  margin-bottom: 8px;
}

.step-content p {
  color: #cbd5e1;
  margin-bottom: 8px;
}

.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 10px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 6px;
}

.checkpoint {
  background: rgba(167, 139, 250, 0.08);
  border: 1px solid rgba(167, 139, 250, 0.2);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 15px 0;
}

.checkpoint summary {
  color: #a78bfa;
  font-size: 0.95rem;
}

.checkpoint .answer {
  color: #4ade80;
  font-weight: 600;
  margin-top: 8px;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  text-align: center;
}

.insight-box h2 {
  color: #a78bfa;
  margin-bottom: 12px;
}

.insight-formula {
  font-size: 1.4rem;
  color: #4ade80;
  margin: 12px 0;
}

.final-answer {
  border: 2px solid #4ade80;
  background: rgba(52, 211, 153, 0.08);
}

.final-answer h2 {
  color: #4ade80;
}

.answer-highlight {
  font-size: 1.6rem;
  color: #4ade80;
  text-align: center;
  margin: 16px 0;
  font-weight: 700;
}

.options-final {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin: 16px 0;
}

.option-final {
  padding: 10px 20px;
  border-radius: 10px;
  border: 1px solid #334155;
  background: #1e293b;
  color: #94a3b8;
  font-size: 1rem;
}

.option-final.correct {
  border-color: #4ade80;
  background: rgba(52, 211, 153, 0.15);
  color: #4ade80;
  font-weight: 700;
}

.verification {
  background: rgba(52, 211, 153, 0.06);
  border-left: 3px solid #4ade80;
  border-radius: 0 8px 8px 0;
  padding: 12px 16px;
  margin-top: 16px;
  color: #94a3b8;
  font-size: 0.95rem;
}

.pitfalls {
  border-left: 4px solid #f472b6;
}

.pitfalls h2 {
  color: #f472b6;
}

.pitfalls ul {
  list-style: none;
  padding: 0;
}

.pitfalls li {
  padding: 8px 12px;
  margin-bottom: 8px;
  background: rgba(244, 114, 182, 0.06);
  border-radius: 8px;
  color: #e2e8f0;
}

.pitfalls li::before {
  content: "\26A0\FE0F ";
}

.challenge {
  border-left: 4px solid #60a5fa;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step { flex-direction: column; gap: 10px; }
  .given-grid { flex-direction: column; }
  .options-final { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title & Subtitle -->
  <h1>Stepen kompleksnog broja</h1>
  <p class="subtitle">Kompleksni brojevi -- modul, konjugat i stepenovanje</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Ako je \( |z| + \bar{z} = 3 + i\sqrt{3} \), \( i^2 = -1 \), onda je \( (z - 1)^{2020} \) jednako:</p>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\( -3^{1010} \)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\( 3^{1010} \)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\( 3^{2020}i \)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\( 3^{2020} \)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\( -3^{1010}i \)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan rešavanja</h2>
    <p>Zapisaćemo kompleksni broj \( z = a + bi \) i izjednačiti realne i imaginarne delove jednačine. Time ćemo odrediti \( z \), a zatim izračunati \( (z - 1)^{2020} \) koristeći osobine stepena imaginarnog broja.</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Ključne formule i teoreme</summary>
      <div class="theory-content">
        <ul>
          <li><strong>Modul kompleksnog broja:</strong> Za \( z = a + bi \), modul je \( |z| = \sqrt{a^2 + b^2} \) -- realan i nenegativan broj.</li>
          <li><strong>Konjugat kompleksnog broja:</strong> Za \( z = a + bi \), konjugat je \( \bar{z} = a - bi \).</li>
          <li><strong>Stepenovanje imaginarne jedinice:</strong> \( i^1 = i,\; i^2 = -1,\; i^3 = -i,\; i^4 = 1 \) -- cikličan period 4.</li>
          <li><strong>Jednakost kompleksnih brojeva:</strong> \( a + bi = c + di \iff a = c \text{ i } b = d \) (izjednačavanje realnog i imaginarnog dela).</li>
          <li><strong>Polarna forma:</strong> \( z = r(\cos\varphi + i\sin\varphi) \), pa je \( z^n = r^n(\cos(n\varphi) + i\sin(n\varphi)) \) (De Moavrov obrazac).</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <h2>Vizuelni prikaz</h2>
    <div class="canvas-container">
      <canvas id="complexCanvas" width="600" height="500"></canvas>
      <p class="canvas-hint">Kompleksni broj \( z \) i razlika \( z - 1 \) u kompleksnoj ravni</p>
    </div>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step" tabindex="0">
      <div class="step-number">1</div>
      <div class="step-content">
        <h3>Zapisujemo \( z \) u algebarskom obliku</h3>
        <p>Neka je \( z = a + bi \), gde su \( a, b \in \mathbb{R} \). Tada su:</p>
        <div class="math-block">
          \[ |z| = \sqrt{a^2 + b^2}, \qquad \bar{z} = a - bi \]
        </div>
        <p class="note">Modul \( |z| \) je uvek realan broj, dok konjugat \( \bar{z} \) menja znak ispred imaginarnog dela.</p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step" tabindex="0">
      <div class="step-number">2</div>
      <div class="step-content">
        <h3>Zamenjujemo u datu jednačinu</h3>
        <p>Ubacujemo u jednačinu \( |z| + \bar{z} = 3 + i\sqrt{3} \):</p>
        <div class="math-block">
          \[ \sqrt{a^2 + b^2} + a - bi = 3 + i\sqrt{3} \]
        </div>
        <p>Leva strana ima realni deo \( \sqrt{a^2 + b^2} + a \) i imaginarni deo \( -b \).</p>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step" tabindex="0">
      <div class="step-number">3</div>
      <div class="step-content">
        <h3>Izjednačavamo realne i imaginarne delove</h3>
        <p>Dva kompleksna broja su jednaka ako i samo ako su im jednaki i realni i imaginarni delovi:</p>
        <div class="math-block">
          \[ \begin{cases} \sqrt{a^2 + b^2} + a = 3 & \text{(realni deo)} \\ -b = \sqrt{3} & \text{(imaginarni deo)} \end{cases} \]
        </div>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step" tabindex="0">
      <div class="step-number">4</div>
      <div class="step-content">
        <h3>Nalazimo \( b \)</h3>
        <p>Iz druge jednačine direktno dobijamo:</p>
        <div class="math-block">
          \[ -b = \sqrt{3} \implies b = -\sqrt{3} \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri se: Koliko je \( b^2 \)?</summary>
      <p class="answer">Odgovor: \( b^2 = (-\sqrt{3})^2 = 3 \)</p>
    </details>

    <!-- Step 5 -->
    <div class="step" tabindex="0">
      <div class="step-number">5</div>
      <div class="step-content">
        <h3>Nalazimo \( a \) iz prvog uslova</h3>
        <p>Zamenjujemo \( b^2 = 3 \) u prvu jednačinu:</p>
        <div class="math-block">
          \[ \sqrt{a^2 + 3} + a = 3 \]
        </div>
        <p>Izolujemo koren:</p>
        <div class="math-block">
          \[ \sqrt{a^2 + 3} = 3 - a \]
        </div>
        <p class="note">Uslov: desna strana mora biti nenegativna, tj. \( a \leq 3 \).</p>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step" tabindex="0">
      <div class="step-number">6</div>
      <div class="step-content">
        <h3>Kvadriramo obe strane</h3>
        <p>Kvadriramo jednačinu da bismo eliminisali koren:</p>
        <div class="math-block">
          \[ a^2 + 3 = (3 - a)^2 = 9 - 6a + a^2 \]
        </div>
        <p>Skraćujemo \( a^2 \) sa obe strane:</p>
        <div class="math-block">
          \[ 3 = 9 - 6a \]
        </div>
        <div class="math-block">
          \[ 6a = 6 \implies a = 1 \]
        </div>
      </div>
    </div>

    <!-- Step 7 -->
    <div class="step" tabindex="0">
      <div class="step-number">7</div>
      <div class="step-content">
        <h3>Provera rešenja</h3>
        <p>Za \( a = 1 \) proveravamo uslov \( \sqrt{a^2 + 3} + a = 3 \):</p>
        <div class="math-block">
          \[ \sqrt{1 + 3} + 1 = \sqrt{4} + 1 = 2 + 1 = 3 \; \checkmark \]
        </div>
        <p>Uslov \( a \leq 3 \) je ispunjen: \( 1 \leq 3 \; \checkmark \)</p>
        <p>Dakle, \( z = 1 - i\sqrt{3} \).</p>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri se: Koliko je \( |z| \)?</summary>
      <p class="answer">Odgovor: \( |z| = \sqrt{1 + 3} = \sqrt{4} = 2 \)</p>
    </details>

    <!-- Step 8 -->
    <div class="step" tabindex="0">
      <div class="step-number">8</div>
      <div class="step-content">
        <h3>Računamo \( z - 1 \)</h3>
        <p>Oduzimamo 1 od \( z \):</p>
        <div class="math-block">
          \[ z - 1 = (1 - i\sqrt{3}) - 1 = -i\sqrt{3} \]
        </div>
      </div>
    </div>

    <!-- Step 9 -->
    <div class="step" tabindex="0">
      <div class="step-number">9</div>
      <div class="step-content">
        <h3>Razbijamo stepen na faktore</h3>
        <p>Sada računamo \( (z - 1)^{2020} = (-i\sqrt{3})^{2020} \). Razdvajamo na dva faktora:</p>
        <div class="math-block">
          \[ (-i\sqrt{3})^{2020} = (-i)^{2020} \cdot (\sqrt{3})^{2020} \]
        </div>
      </div>
    </div>

    <!-- Step 10 -->
    <div class="step" tabindex="0">
      <div class="step-number">10</div>
      <div class="step-content">
        <h3>Računamo \( (\sqrt{3})^{2020} \)</h3>
        <p>Koristimo pravilo \( (\sqrt{3})^{2020} = (3^{1/2})^{2020} = 3^{2020/2} \):</p>
        <div class="math-block">
          \[ (\sqrt{3})^{2020} = 3^{1010} \]
        </div>
      </div>
    </div>

    <!-- Step 11 -->
    <div class="step" tabindex="0">
      <div class="step-number">11</div>
      <div class="step-content">
        <h3>Računamo \( (-i)^{2020} \)</h3>
        <p>Stepeni od \( -i \) se ciklično ponavljaju sa periodom 4:</p>
        <div class="math-block">
          \[ (-i)^1 = -i, \quad (-i)^2 = -1, \quad (-i)^3 = i, \quad (-i)^4 = 1 \]
        </div>
        <p>Delimo eksponent sa 4:</p>
        <div class="math-block">
          \[ 2020 = 4 \cdot 505 + 0 \]
        </div>
        <p>Ostatak je 0, pa:</p>
        <div class="math-block">
          \[ (-i)^{2020} = ((-i)^4)^{505} = 1^{505} = 1 \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details class="checkpoint">
      <summary>Proveri se: Koliko je \( (-i)^{2020} \cdot 3^{1010} \)?</summary>
      <p class="answer">Odgovor: \( 1 \cdot 3^{1010} = 3^{1010} \)</p>
    </details>

    <!-- Step 12 -->
    <div class="step" tabindex="0">
      <div class="step-number">12</div>
      <div class="step-content">
        <h3>Sastavljamo konačan rezultat</h3>
        <p>Množimo oba faktora:</p>
        <div class="math-block">
          \[ (z - 1)^{2020} = (-i)^{2020} \cdot (\sqrt{3})^{2020} = 1 \cdot 3^{1010} = 3^{1010} \]
        </div>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Ključni uvid</h2>
    <p>Razlika \( z - 1 = -i\sqrt{3} \) je čisto imaginarni broj. Njegov stepen \( (-i)^n \) se ciklično ponavlja sa periodom 4, a kako je \( 2020 = 4 \cdot 505 \), imaginarni deo potpuno nestaje:</p>
    <div class="insight-formula">
      \[ (z - 1)^{2020} = 3^{1010} \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer">
    <h2>Konačan odgovor</h2>
    <div class="answer-highlight">
      \( (z - 1)^{2020} = 3^{1010} \)
    </div>

    <div class="options-final">
      <div class="option-final">(A) \( -3^{1010} \)</div>
      <div class="option-final correct">(B) \( 3^{1010} \)</div>
      <div class="option-final">(C) \( 3^{2020}i \)</div>
      <div class="option-final">(D) \( 3^{2020} \)</div>
      <div class="option-final">(E) \( -3^{1010}i \)</div>
    </div>

    <div class="verification">
      <strong>Verifikacija:</strong> Alternativno, možemo koristiti polarni oblik. Broj \( z - 1 = -i\sqrt{3} \) ima modul \( \sqrt{3} \) i argument \( -\frac{\pi}{2} \). Po De Moavrovom obrascu: \( (z-1)^{2020} = (\sqrt{3})^{2020}(\cos(-1010\pi) + i\sin(-1010\pi)) = 3^{1010} \cdot (1 + 0i) = 3^{1010} \). Rezultat se poklapa.
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfalls">
    <h2>Česte greške</h2>
    <ul>
      <li><strong>Zaboraviti da je \( |z| \) realan:</strong> Modul kompleksnog broja je uvek realan broj. Imaginarni deo leve strane jednačine potiče isključivo od \( \bar{z} \), ne od \( |z| \). Ako se ovo previdi, pogrešno se izjednačavaju imaginarni delovi.</li>
      <li><strong>Pogrešan ciklus stepena \( (-i)^n \):</strong> Lako je pomešati cikluse za \( i^n \) i \( (-i)^n \). Uvek zapišite prvih četiri stepena i proverite ostatak pri deljenju eksponenta sa 4. Za \( 2020 \div 4 = 505 \) ostatak 0 znači da se vraćamo na \( (-i)^0 = 1 \), ne na \( (-i)^4 = 1 \) -- isti rezultat, ali greška u ostatku bi dala pogrešan odgovor.</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge">
    <h2>Dodatni izazov</h2>
    <p>Koliko bi iznosilo \( (z - 1)^{2021} \) za isto \( z \)?</p>
    <details>
      <summary>Nagovještaj</summary>
      <p style="color: #94a3b8; margin-top: 8px;">Primijetite da je \( (z-1)^{2021} = (z-1)^{2020} \cdot (z-1) \). Već znate oba faktora. Kako \( 2021 = 4 \cdot 505 + 1 \), razmislite koji stepen ciklusa \( (-i)^n \) odgovara ostatku 1.</p>
    </details>
  </div>

</div>

<script>
(() => {
  // Step click highlight
  const steps = document.querySelectorAll('.step');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.toggle('active');
    });
  });

  // Canvas visualization
  const canvas = document.getElementById('complexCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  // Coordinate system setup
  const originX = W * 0.45;
  const originY = H * 0.55;
  const scale = 80;

  function toCanvas(x, y) {
    return { x: originX + x * scale, y: originY - y * scale };
  }

  function drawArrow(fromX, fromY, toX, toY, color, lineWidth) {
    ctx.strokeStyle = color;
    ctx.lineWidth = lineWidth || 2;
    ctx.beginPath();
    ctx.moveTo(fromX, fromY);
    ctx.lineTo(toX, toY);
    ctx.stroke();

    const angle = Math.atan2(toY - fromY, toX - fromX);
    const headLen = 10;
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.moveTo(toX, toY);
    ctx.lineTo(toX - headLen * Math.cos(angle - 0.3), toY - headLen * Math.sin(angle - 0.3));
    ctx.lineTo(toX - headLen * Math.cos(angle + 0.3), toY - headLen * Math.sin(angle + 0.3));
    ctx.closePath();
    ctx.fill();
  }

  function drawPoint(x, y, color, label, offsetX, offsetY) {
    const p = toCanvas(x, y);
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.arc(p.x, p.y, 5, 0, 2 * Math.PI);
    ctx.fill();

    // Glow
    ctx.shadowColor = color;
    ctx.shadowBlur = 12;
    ctx.beginPath();
    ctx.arc(p.x, p.y, 5, 0, 2 * Math.PI);
    ctx.fill();
    ctx.shadowBlur = 0;

    if (label) {
      ctx.fillStyle = color;
      ctx.font = 'bold 14px Segoe UI, sans-serif';
      ctx.fillText(label, p.x + (offsetX || 8), p.y + (offsetY || -10));
    }
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Grid lines
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (let i = -4; i <= 5; i++) {
      const px = toCanvas(i, 0);
      ctx.beginPath();
      ctx.moveTo(px.x, 0);
      ctx.lineTo(px.x, H);
      ctx.stroke();
    }
    for (let j = -3; j <= 4; j++) {
      const py = toCanvas(0, j);
      ctx.beginPath();
      ctx.moveTo(0, py.y);
      ctx.lineTo(W, py.y);
      ctx.stroke();
    }

    // Axes
    drawArrow(20, originY, W - 20, originY, '#475569', 1.5);
    drawArrow(originX, H - 20, originX, 20, '#475569', 1.5);

    // Axis labels
    ctx.fillStyle = '#64748b';
    ctx.font = '13px Segoe UI, sans-serif';
    ctx.fillText('Re', W - 35, originY - 10);
    ctx.fillText('Im', originX + 10, 30);

    // Tick marks and numbers
    ctx.fillStyle = '#64748b';
    ctx.font = '11px Segoe UI, sans-serif';
    for (let i = -3; i <= 4; i++) {
      if (i === 0) continue;
      const px = toCanvas(i, 0);
      ctx.beginPath();
      ctx.moveTo(px.x, originY - 4);
      ctx.lineTo(px.x, originY + 4);
      ctx.strokeStyle = '#64748b';
      ctx.lineWidth = 1;
      ctx.stroke();
      ctx.fillText(i.toString(), px.x - 4, originY + 18);
    }
    for (let j = -2; j <= 3; j++) {
      if (j === 0) continue;
      const py = toCanvas(0, j);
      ctx.beginPath();
      ctx.moveTo(originX - 4, py.y);
      ctx.lineTo(originX + 4, py.y);
      ctx.strokeStyle = '#64748b';
      ctx.lineWidth = 1;
      ctx.stroke();
      ctx.fillText(j.toString() + 'i', originX + 10, py.y + 4);
    }

    // Origin label
    ctx.fillStyle = '#64748b';
    ctx.fillText('O', originX - 16, originY + 18);

    // Unit circle (dashed) for reference
    ctx.setLineDash([4, 4]);
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    const o = toCanvas(0, 0);
    ctx.beginPath();
    ctx.arc(o.x, o.y, 2 * scale, 0, 2 * Math.PI);
    ctx.stroke();
    ctx.setLineDash([]);

    // |z| = 2 label
    ctx.fillStyle = '#475569';
    ctx.font = '11px Segoe UI, sans-serif';
    const circLabel = toCanvas(1.5, 1.4);
    ctx.fillText('|z| = 2', circLabel.x, circLabel.y);

    // Vector from origin to z = (1, -sqrt(3))
    const z = toCanvas(1, -Math.sqrt(3));
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(o.x, o.y);
    ctx.lineTo(z.x, z.y);
    ctx.stroke();
    drawPoint(1, -Math.sqrt(3), '#60a5fa', 'z = 1 - i\u221A3', 10, 5);

    // Point at z=1 (reference)
    drawPoint(1, 0, '#94a3b8', '1', 8, -8);

    // Vector from (1,0) to z showing z-1
    const one = toCanvas(1, 0);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2.5;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.moveTo(one.x, one.y);
    ctx.lineTo(z.x, z.y);
    ctx.stroke();
    ctx.setLineDash([]);

    // Label for z - 1
    const midX = (one.x + z.x) / 2;
    const midY = (one.y + z.y) / 2;
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 13px Segoe UI, sans-serif';
    ctx.fillText('z \u2212 1 = \u2212i\u221A3', midX + 12, midY);

    // Show z-1 as a point on imaginary axis from point 1
    // Actually z-1 = -i*sqrt(3) is at (0, -sqrt(3)) from origin
    const zm1 = toCanvas(0, -Math.sqrt(3));
    drawPoint(0, -Math.sqrt(3), '#f472b6', '\u2212i\u221A3', -65, 5);

    // Dashed line from origin to (0, -sqrt(3))
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([4, 4]);
    ctx.beginPath();
    ctx.moveTo(o.x, o.y);
    ctx.lineTo(zm1.x, zm1.y);
    ctx.stroke();
    ctx.setLineDash([]);

    // Angle marker for -pi/2
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.arc(o.x, o.y, 25, Math.PI / 2, Math.PI * 2, true);
    ctx.stroke();
    ctx.fillStyle = '#a78bfa';
    ctx.font = '12px Segoe UI, sans-serif';
    ctx.fillText('\u2212\u03C0/2', o.x + 28, o.y + 22);

    // Legend
    const legendX = 20;
    const legendY = H - 80;
    ctx.fillStyle = '#1e293b';
    ctx.fillRect(legendX, legendY, 220, 65);
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.strokeRect(legendX, legendY, 220, 65);

    ctx.font = '12px Segoe UI, sans-serif';
    // z vector
    ctx.fillStyle = '#60a5fa';
    ctx.fillRect(legendX + 10, legendY + 12, 16, 3);
    ctx.fillText('z = 1 \u2212 i\u221A3', legendX + 34, legendY + 18);

    // z-1 vector
    ctx.fillStyle = '#4ade80';
    ctx.setLineDash([4, 3]);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(legendX + 10, legendY + 35);
    ctx.lineTo(legendX + 26, legendY + 35);
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillText('z \u2212 1 = \u2212i\u221A3', legendX + 34, legendY + 40);

    // Angle
    ctx.fillStyle = '#a78bfa';
    ctx.fillRect(legendX + 10, legendY + 52, 16, 3);
    ctx.fillText('arg(z\u22121) = \u2212\u03C0/2', legendX + 34, legendY + 58);
  }

  draw();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Stepen kompleksnog broja: (z-1)^2020 za |z| + konjugat(z) = 3 + i\u221a3",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["kompleksni brojevi", "modul kompleksnog broja", "konjugat", "stepenovanje", "imaginarna jedinica", "De Moavrov obrazac"]
}
BRAINSPARK_META-->