<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Opisane kruznice trouglova - Zbir poluprecnika</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
  Problem: In triangle ABC, point D is the foot of the altitude from vertex C
  to side AB. Given: |AD| = 2 cm, |CD| = 4 cm, |BD| = 8 cm.
  Find the sum of the circumradii of triangles ABC, ACD, and BCD.

  Step 1: Verify the triangle.
  D is the foot of the altitude from C to AB, so CD is perpendicular to AB.
  Angle CDA = 90 degrees, Angle CDB = 90 degrees.

  Step 2: Find the sides of triangle ABC.
  AB = AD + DB = 2 + 8 = 10 cm.
  In right triangle ACD: AC^2 = AD^2 + CD^2 = 4 + 16 = 20, so AC = 2*sqrt(5) cm.
  In right triangle BCD: BC^2 = BD^2 + CD^2 = 64 + 16 = 80, so BC = 4*sqrt(5) cm.

  Step 3: Verify using Pythagorean theorem on ABC.
  Check: AC^2 + BC^2 = 20 + 80 = 100 = 10^2 = AB^2.
  So triangle ABC is right-angled at C! (angle ACB = 90 degrees).

  Also check: CD^2 should equal AD * BD for an altitude in a right triangle.
  CD^2 = 16, AD * BD = 2 * 8 = 16. Confirmed!

  Step 4: Find circumradius of triangle ABC (R_ABC).
  For a right triangle, the circumradius equals half the hypotenuse.
  R_ABC = AB / 2 = 10 / 2 = 5 cm.

  Alternatively, using the sine rule: R = a / (2 * sin(A))
  For triangle ABC with right angle at C:
  R_ABC = AB / (2 * sin(C)) = 10 / (2 * sin(90)) = 10 / 2 = 5.

  Step 5: Find circumradius of triangle ACD (R_ACD).
  Triangle ACD is right-angled at D (since CD is the altitude, angle ADC = 90 degrees).
  For a right triangle, circumradius = hypotenuse / 2.
  Hypotenuse of ACD is AC = 2*sqrt(5).
  R_ACD = AC / 2 = 2*sqrt(5) / 2 = sqrt(5) cm.

  Step 6: Find circumradius of triangle BCD (R_BCD).
  Triangle BCD is right-angled at D (since CD is the altitude, angle BDC = 90 degrees).
  For a right triangle, circumradius = hypotenuse / 2.
  Hypotenuse of BCD is BC = 4*sqrt(5).
  R_BCD = BC / 2 = 4*sqrt(5) / 2 = 2*sqrt(5) cm.

  Step 7: Sum of circumradii.
  R_ABC + R_ACD + R_BCD = 5 + sqrt(5) + 2*sqrt(5) = 5 + 3*sqrt(5).

  Answer: (A) 5 + 3*sqrt(5) cm.

  Verification:
  - 5 + 3*sqrt(5) ≈ 5 + 3 * 2.236 = 5 + 6.708 = 11.708 cm.
  - All three sub-triangles are right-angled, which makes the circumradius calculation straightforward.
  - The key insight is recognizing that ABC is a right triangle at C (since AC^2 + BC^2 = AB^2),
    and both sub-triangles ACD and BCD are right-angled at D.
  - For any right triangle, the circumradius equals half the hypotenuse.
</script>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.card h3 {
  color: #a78bfa;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56, 189, 248, 0.06);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 100px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  min-width: 140px;
}

.step-container {
  display: flex;
  gap: 16px;
  align-items: flex-start;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 14px;
  cursor: pointer;
  transition: all 0.2s ease;
  border-left: 3px solid transparent;
}

.step-container:hover {
  background: rgba(96, 165, 250, 0.05);
  border-left-color: #4ade80;
}

.step-badge {
  min-width: 32px;
  height: 32px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  color: #0f172a;
  flex-shrink: 0;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  margin-bottom: 8px;
}

.math-block {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 10px 0;
  overflow-x: auto;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 8px;
  font-style: italic;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.15), rgba(167,139,250,0.15));
  border: 1px solid rgba(167, 139, 250, 0.3);
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  text-align: center;
}

.insight-box .formula {
  font-size: 1.4rem;
  margin: 16px 0;
  color: #4ade80;
}

.final-answer {
  background: linear-gradient(135deg, rgba(52, 211, 153, 0.12), rgba(74, 222, 128, 0.12));
  border: 1px solid rgba(52, 211, 153, 0.3);
  border-radius: 14px;
  padding: 28px;
  margin-bottom: 24px;
  text-align: center;
}

.final-answer .answer-value {
  font-size: 1.8rem;
  color: #4ade80;
  font-weight: 700;
  margin: 16px 0;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin-top: 18px;
}

.final-option {
  background: rgba(30, 41, 59, 0.8);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 20px;
  text-align: center;
  min-width: 130px;
}

.final-option.correct {
  border-color: #4ade80;
  background: rgba(52, 211, 153, 0.12);
}

.verification-note {
  background: rgba(56, 189, 248, 0.06);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 10px;
  padding: 16px;
  margin-top: 18px;
  text-align: left;
}

.verification-note h4 {
  color: #60a5fa;
  margin-bottom: 8px;
  font-size: 1rem;
}

.pitfall-box {
  background: rgba(224, 148, 104, 0.08);
  border: 1px solid rgba(224, 148, 104, 0.2);
  border-radius: 10px;
  padding: 16px;
  margin-bottom: 10px;
}

.pitfall-box strong {
  color: #e09468;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 10px 0;
  user-select: none;
}

details summary:hover {
  color: #a78bfa;
}

.checkpoint {
  background: rgba(167, 139, 250, 0.08);
  border: 1px solid rgba(167, 139, 250, 0.2);
  border-radius: 10px;
  padding: 16px;
  margin: 15px 0;
}

.checkpoint summary {
  color: #a78bfa;
}

.canvas-card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 20px;
  margin-bottom: 24px;
  text-align: center;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.canvas-card canvas {
  border-radius: 10px;
  max-width: 100%;
  touch-action: none;
}

.canvas-hint {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-top: 10px;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

.highlight-green {
  color: #4ade80;
  font-weight: 600;
}

.highlight-blue {
  color: #60a5fa;
  font-weight: 600;
}

.plan-text {
  color: #e2e8f0;
  font-size: 1.05rem;
  line-height: 1.8;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .container { padding: 10px; }
  .card { padding: 16px; }
  .given-grid { flex-direction: column; }
  .answer-option { min-width: unset; }
  .step-container { flex-direction: column; gap: 8px; }
  .final-options { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Opisane kruznice trouglova</h1>
  <p class="subtitle">Geometrija trougla -- visina, pravougli trouglovi i opisane kruznice</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Tekst zadatka</h2>
    <p>
      U trouglu \(ABC\), tacka \(D\) je podnozje normale iz temena \(C\) na stranicu \(AB\).
      Ako je <span class="highlight-pink">\(|AD| = 2\)</span> cm,
      <span class="highlight-pink">\(|CD| = 4\)</span> cm i
      <span class="highlight-pink">\(|BD| = 8\)</span> cm,
      tada je zbir duzina poluprecnika kruznica opisanih oko trouglova \(ABC\), \(ACD\) i \(BCD\) jednak (u cm):
    </p>

    <h3>Poznate velicine</h3>
    <div class="given-grid">
      <div class="given-item">
        <div class="label">\(|AD|\)</div>
        <div class="value">\(2\) cm</div>
      </div>
      <div class="given-item">
        <div class="label">\(|CD|\)</div>
        <div class="value">\(4\) cm</div>
      </div>
      <div class="given-item">
        <div class="label">\(|BD|\)</div>
        <div class="value">\(8\) cm</div>
      </div>
    </div>

    <h3 style="margin-top: 20px;">Ponudjeni odgovori</h3>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(5 + 3\sqrt{5}\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(1 + 5\sqrt{5}\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(3 + 4\sqrt{5}\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(9 + \sqrt{5}\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(7 + 2\sqrt{5}\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <h2>Plan resavanja</h2>
    <p class="plan-text">
      Iskoristicemo cinjenicu da je \(CD\) visina trougla \(ABC\), pa su trouglovi \(ACD\) i \(BCD\) pravougli u tacki \(D\).
      Izracunacemo stranice trougla \(ABC\) i proveriti da li je i on pravougao.
      Za pravougli trougao vazi da je poluprecnik opisane kruznice jednak polovini hipotenuze, sto nam pojednostavljuje racun.
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Kljucne formule i teoreme</summary>
      <div style="padding: 12px 0;">
        <ul style="list-style: none; padding: 0;">
          <li style="margin-bottom: 14px;">
            <strong style="color: #60a5fa;">Pitagorina teorema:</strong>
            U pravouglom trouglu sa katetama \(a\) i \(b\) i hipotenuzom \(c\):
            \[ a^2 + b^2 = c^2 \]
          </li>
          <li style="margin-bottom: 14px;">
            <strong style="color: #60a5fa;">Opisana kruznica pravouglog trougla:</strong>
            Poluprecnik opisane kruznice pravouglog trougla jednak je polovini hipotenuze:
            \[ R = \frac{c}{2} \]
            Ovo sledi iz cinjenice da je ugao nad precnikom kruznice jednak \(90°\).
          </li>
          <li style="margin-bottom: 14px;">
            <strong style="color: #60a5fa;">Visina pravouglog trougla na hipotenuzu:</strong>
            Ako je \(h\) visina iz temena pravog ugla na hipotenuzu, a \(p\) i \(q\) su projekcije kateta, tada:
            \[ h^2 = p \cdot q \]
          </li>
          <li style="margin-bottom: 14px;">
            <strong style="color: #60a5fa;">Sinusna teorema (opsti oblik):</strong>
            Za proizvoljni trougao sa opisanom kruznicom poluprecnika \(R\):
            \[ \frac{a}{\sin A} = \frac{b}{\sin B} = \frac{c}{\sin C} = 2R \]
          </li>
        </ul>
      </div>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="canvas-card">
    <h2 style="color: #60a5fa; margin-bottom: 16px;">Interaktivni dijagram</h2>
    <canvas id="mainCanvas" width="800" height="600"></canvas>
    <p class="canvas-hint">Prevucite tacku C gore-dole da vidite kako se opisane kruznice menjaju (proporcije se cuvaju).</p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Odredimo duzinu stranice \(AB\)</h3>
        <p>Tacka \(D\) lezi na stranici \(AB\), pa je:</p>
        <div class="math-block">
          \[ AB = AD + DB = 2 + 8 = 10 \text{ cm} \]
        </div>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Odredimo duzinu stranice \(AC\)</h3>
        <p>Trougao \(ACD\) je pravougao u tacki \(D\) (jer je \(CD \perp AB\)). Primenjujemo Pitagorinu teoremu:</p>
        <div class="math-block">
          \[ AC^2 = AD^2 + CD^2 = 2^2 + 4^2 = 4 + 16 = 20 \]
        </div>
        <div class="math-block">
          \[ AC = \sqrt{20} = 2\sqrt{5} \text{ cm} \]
        </div>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step-container">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Odredimo duzinu stranice \(BC\)</h3>
        <p>Trougao \(BCD\) je takodje pravougao u tacki \(D\). Primenjujemo Pitagorinu teoremu:</p>
        <div class="math-block">
          \[ BC^2 = BD^2 + CD^2 = 8^2 + 4^2 = 64 + 16 = 80 \]
        </div>
        <div class="math-block">
          \[ BC = \sqrt{80} = 4\sqrt{5} \text{ cm} \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Kakav je trougao \(ABC\)?</summary>
      <p style="padding: 10px 0;">
        Proverimo: \(AC^2 + BC^2 = 20 + 80 = 100 = 10^2 = AB^2\).
        Posto je zbir kvadrata dveju stranica jednak kvadratu trece, trougao \(ABC\) je
        <span class="highlight-green">pravougao u temenu \(C\)</span>!
      </p>
    </details>

    <!-- Step 4 -->
    <div class="step-container">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Proverimo da li je trougao \(ABC\) pravougao</h3>
        <p>Uporedimo \(AC^2 + BC^2\) sa \(AB^2\):</p>
        <div class="math-block">
          \[ AC^2 + BC^2 = 20 + 80 = 100 = 10^2 = AB^2 \]
        </div>
        <p>Jednakost vazi, sto znaci da je trougao \(ABC\) <span class="highlight-green">pravougao u temenu \(C\)</span>.</p>
        <p class="note">Ovo mozemo potvrditi i pomocu formule za visinu: \(CD^2 = AD \cdot BD\), tj. \(16 = 2 \cdot 8 = 16\). Tacno!</p>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step-container">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Poluprecnik opisane kruznice trougla \(ABC\)</h3>
        <p>Za pravougli trougao, poluprecnik opisane kruznice jednak je <span class="highlight-blue">polovini hipotenuze</span>.</p>
        <p>Hipotenuza trougla \(ABC\) je stranica \(AB = 10\) cm (naspram pravog ugla u \(C\)).</p>
        <div class="math-block">
          \[ R_{ABC} = \frac{AB}{2} = \frac{10}{2} = 5 \text{ cm} \]
        </div>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step-container">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Poluprecnik opisane kruznice trougla \(ACD\)</h3>
        <p>Trougao \(ACD\) je pravougao u tacki \(D\). Hipotenuza je \(AC = 2\sqrt{5}\) cm.</p>
        <div class="math-block">
          \[ R_{ACD} = \frac{AC}{2} = \frac{2\sqrt{5}}{2} = \sqrt{5} \text{ cm} \]
        </div>
      </div>
    </div>

    <!-- Step 7 -->
    <div class="step-container">
      <div class="step-badge">7</div>
      <div class="step-content">
        <h3>Poluprecnik opisane kruznice trougla \(BCD\)</h3>
        <p>Trougao \(BCD\) je pravougao u tacki \(D\). Hipotenuza je \(BC = 4\sqrt{5}\) cm.</p>
        <div class="math-block">
          \[ R_{BCD} = \frac{BC}{2} = \frac{4\sqrt{5}}{2} = 2\sqrt{5} \text{ cm} \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Koliki su poluprecnici pojedinacno?</summary>
      <p style="padding: 10px 0;">
        \(R_{ABC} = 5\) cm, \(R_{ACD} = \sqrt{5} \approx 2{,}24\) cm,
        \(R_{BCD} = 2\sqrt{5} \approx 4{,}47\) cm.
        Da li je logicno da je opisana kruznica veceg trougla (BCD) veca od opisane kruznice manjeg (ACD)? Da!
      </p>
    </details>

    <!-- Step 8 -->
    <div class="step-container">
      <div class="step-badge">8</div>
      <div class="step-content">
        <h3>Zbir poluprecnika</h3>
        <p>Sabiramo sva tri poluprecnika:</p>
        <div class="math-block">
          \[ R_{ABC} + R_{ACD} + R_{BCD} = 5 + \sqrt{5} + 2\sqrt{5} \]
        </div>
        <div class="math-block">
          \[ = 5 + 3\sqrt{5} \]
        </div>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2 style="color: #a78bfa; margin-bottom: 12px;">Kljucni uvid</h2>
    <p>Sva tri trougla (\(ABC\), \(ACD\) i \(BCD\)) su <span class="highlight-green">pravougla</span>,
       pa za svaki od njih vazi da je poluprecnik opisane kruznice jednak polovini hipotenuze.
       To drasticno pojednostavljuje racunanje!</p>
    <div class="formula">
      \[ R_{ABC} + R_{ACD} + R_{BCD} = \frac{AB}{2} + \frac{AC}{2} + \frac{BC}{2} = 5 + 3\sqrt{5} \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="final-answer">
    <h2 style="color: #4ade80; margin-bottom: 10px;">Konacan odgovor</h2>
    <div class="answer-value">\(5 + 3\sqrt{5}\) cm</div>

    <div class="final-options">
      <div class="final-option correct">
        <div style="color: #4ade80; font-weight: 700;">(A)</div>
        <div>\(5 + 3\sqrt{5}\)</div>
      </div>
      <div class="final-option">
        <div style="color: #94a3b8;">(B)</div>
        <div style="color: #94a3b8;">\(1 + 5\sqrt{5}\)</div>
      </div>
      <div class="final-option">
        <div style="color: #94a3b8;">(C)</div>
        <div style="color: #94a3b8;">\(3 + 4\sqrt{5}\)</div>
      </div>
      <div class="final-option">
        <div style="color: #94a3b8;">(D)</div>
        <div style="color: #94a3b8;">\(9 + \sqrt{5}\)</div>
      </div>
      <div class="final-option">
        <div style="color: #94a3b8;">(E)</div>
        <div style="color: #94a3b8;">\(7 + 2\sqrt{5}\)</div>
      </div>
    </div>

    <div class="verification-note">
      <h4>Verifikacija</h4>
      <p>
        Numericka provera: \(5 + 3\sqrt{5} \approx 5 + 3 \cdot 2{,}236 \approx 11{,}71\) cm.
        Ovo je razumna vrednost jer je veca od poluprecnika opisane kruznice samog trougla \(ABC\) (\(R_{ABC} = 5\) cm),
        ali manja od obima trougla. Takodje, potvrdili smo relaciju \(CD^2 = AD \cdot BD\)
        koja vazi za visinu pravouglog trougla, sto daje dodatnu sigurnost u korektnost konstrukcije.
      </p>
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Ceste greske</h2>
    <div class="pitfall-box" style="margin-bottom: 12px;">
      <strong>Greska 1:</strong> Koriscenje sinusne teoreme ili opste formule \(R = \frac{abc}{4P}\) umesto prepoznavanja da su svi trouglovi pravougli.
      Ovo nije pogresno, ali je mnogo komplikovanije i otvara prostor za racunske greske.
    </div>
    <div class="pitfall-box">
      <strong>Greska 2:</strong> Zaboraviti da je trougao \(ABC\) pravougao u \(C\). Mnogi ucenici izracunaju stranice
      ali ne provere da li je veliki trougao takodje pravougao, pa koriste slozenije formule za \(R_{ABC}\).
    </div>
  </div>

  <!-- Optional Challenge -->
  <div class="card">
    <h2>Dodatni izazov</h2>
    <p>Ako u pravouglom trouglu \(ABC\) (sa pravim uglom u \(C\)) vazi da je \(|AD| = p\) i \(|BD| = q\),
    dokazite da je zbir poluprecnika opisanih kruznica trouglova \(ABC\), \(ACD\) i \(BCD\) jednak:</p>
    <div class="math-block">
      \[ R_{ABC} + R_{ACD} + R_{BCD} = \frac{p + q + \sqrt{pq}(\sqrt{p} + \sqrt{q})}{2} \]
    </div>
    <details>
      <summary>Nagoveštaj</summary>
      <p style="padding: 10px 0;">
        Koristite \(CD = \sqrt{pq}\), \(AC = \sqrt{p(p+q)}\) i \(BC = \sqrt{q(p+q)}\).
        Svaki poluprecnik je polovina odgovarajuce hipotenuze. Rastavite na zajednicki faktor i pojednostavite.
      </p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('mainCanvas');
  const ctx = canvas.getContext('2d');

  // High DPI support
  const dpr = window.devicePixelRatio || 1;
  const cssW = canvas.width;
  const cssH = canvas.height;
  canvas.width = cssW * dpr;
  canvas.height = cssH * dpr;
  canvas.style.width = cssW + 'px';
  canvas.style.height = cssH + 'px';
  ctx.scale(dpr, dpr);

  // Problem data
  const AD = 2, CD_len = 4, BD = 8;
  const AB = AD + BD; // = 10

  // Scale factor so the triangle fills the canvas nicely
  const scale = 42;
  const originX = 100;
  const originY = cssH - 100;

  // Convert math coords to canvas coords (Y-up)
  function toCanvas(x, y) {
    return { x: originX + x * scale, y: originY - y * scale };
  }

  // Draggable C height factor
  let cHeightFactor = 1.0; // 1.0 means CD = 4 (original)
  let dragging = false;

  function getTrianglePoints() {
    const h = CD_len * cHeightFactor;
    const A = toCanvas(0, 0);
    const B = toCanvas(AB, 0);
    const D = toCanvas(AD, 0);
    const C = toCanvas(AD, h);
    return { A, B, C, D, h };
  }

  function circumcircle(p1, p2, p3) {
    const ax = p1.x, ay = p1.y;
    const bx = p2.x, by = p2.y;
    const cx = p3.x, cy = p3.y;
    const D2 = 2 * (ax * (by - cy) + bx * (cy - ay) + cx * (ay - by));
    if (Math.abs(D2) < 1e-10) return null;
    const ux = ((ax*ax + ay*ay) * (by - cy) + (bx*bx + by*by) * (cy - ay) + (cx*cx + cy*cy) * (ay - by)) / D2;
    const uy = ((ax*ax + ay*ay) * (cx - bx) + (bx*bx + by*by) * (ax - cx) + (cx*cx + cy*cy) * (bx - ax)) / D2;
    const r = Math.sqrt((ax - ux)**2 + (ay - uy)**2);
    return { cx: ux, cy: uy, r };
  }

  function dist(p1, p2) {
    return Math.sqrt((p1.x - p2.x)**2 + (p1.y - p2.y)**2);
  }

  function draw() {
    ctx.clearRect(0, 0, cssW, cssH);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, cssW, cssH);

    // Grid
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 0.5;
    for (let i = 0; i < cssW; i += scale) {
      ctx.beginPath();
      ctx.moveTo(i, 0);
      ctx.lineTo(i, cssH);
      ctx.stroke();
    }
    for (let j = 0; j < cssH; j += scale) {
      ctx.beginPath();
      ctx.moveTo(0, j);
      ctx.lineTo(cssW, j);
      ctx.stroke();
    }

    const { A, B, C, D, h } = getTrianglePoints();

    // Compute circumcircles
    const ccABC = circumcircle(A, B, C);
    const ccACD = circumcircle(A, C, D);
    const ccBCD = circumcircle(B, C, D);

    // Draw circumcircles
    const circles = [
      { cc: ccABC, color: 'rgba(96, 165, 250, 0.35)', dash: [8, 6], label: 'R_ABC', labelColor: '#60a5fa' },
      { cc: ccACD, color: 'rgba(244, 114, 182, 0.35)', dash: [6, 4], label: 'R_ACD', labelColor: '#f472b6' },
      { cc: ccBCD, color: 'rgba(52, 211, 153, 0.35)', dash: [6, 4], label: 'R_BCD', labelColor: '#34d399' }
    ];

    circles.forEach(({ cc, color, dash, label, labelColor }) => {
      if (!cc) return;
      ctx.beginPath();
      ctx.arc(cc.cx, cc.cy, cc.r, 0, Math.PI * 2);
      ctx.strokeStyle = color;
      ctx.lineWidth = 2;
      ctx.setLineDash(dash);
      ctx.stroke();
      ctx.setLineDash([]);

      // Center point
      ctx.beginPath();
      ctx.arc(cc.cx, cc.cy, 3, 0, Math.PI * 2);
      ctx.fillStyle = labelColor;
      ctx.fill();
    });

    // Draw altitude CD (dashed)
    ctx.beginPath();
    ctx.moveTo(D.x, D.y);
    ctx.lineTo(C.x, C.y);
    ctx.strokeStyle = 'rgba(167, 139, 250, 0.6)';
    ctx.lineWidth = 2;
    ctx.setLineDash([5, 5]);
    ctx.stroke();
    ctx.setLineDash([]);

    // Right angle marker at D
    const markerSize = 10;
    ctx.beginPath();
    ctx.moveTo(D.x + markerSize, D.y);
    ctx.lineTo(D.x + markerSize, D.y - markerSize);
    ctx.lineTo(D.x, D.y - markerSize);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1.5;
    ctx.stroke();

    // Right angle marker at C (angle ACB = 90)
    // Vectors CA and CB
    const CAx = A.x - C.x, CAy = A.y - C.y;
    const CBx = B.x - C.x, CBy = B.y - C.y;
    const lenCA = Math.sqrt(CAx*CAx + CAy*CAy);
    const lenCB = Math.sqrt(CBx*CBx + CBy*CBy);
    const uCAx = CAx / lenCA, uCAy = CAy / lenCA;
    const uCBx = CBx / lenCB, uCBy = CBy / lenCB;
    const rmk = 12;
    ctx.beginPath();
    ctx.moveTo(C.x + uCAx * rmk, C.y + uCAy * rmk);
    ctx.lineTo(C.x + uCAx * rmk + uCBx * rmk, C.y + uCAy * rmk + uCBy * rmk);
    ctx.lineTo(C.x + uCBx * rmk, C.y + uCBy * rmk);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1.5;
    ctx.stroke();

    // Draw triangle ABC
    ctx.beginPath();
    ctx.moveTo(A.x, A.y);
    ctx.lineTo(B.x, B.y);
    ctx.lineTo(C.x, C.y);
    ctx.closePath();
    ctx.strokeStyle = '#e2e8f0';
    ctx.lineWidth = 2.5;
    ctx.stroke();

    // Fill triangle with subtle color
    ctx.fillStyle = 'rgba(96, 165, 250, 0.05)';
    ctx.fill();

    // Draw points
    const points = [
      { p: A, label: 'A', color: '#f472b6', offsetX: -20, offsetY: 20 },
      { p: B, label: 'B', color: '#f472b6', offsetX: 10, offsetY: 20 },
      { p: C, label: 'C', color: '#4ade80', offsetX: -20, offsetY: -12 },
      { p: D, label: 'D', color: '#a78bfa', offsetX: -5, offsetY: 22 }
    ];

    points.forEach(({ p, label, color, offsetX, offsetY }) => {
      // Glow
      const grad = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, 12);
      grad.addColorStop(0, color + '80');
      grad.addColorStop(1, 'transparent');
      ctx.beginPath();
      ctx.arc(p.x, p.y, 12, 0, Math.PI * 2);
      ctx.fillStyle = grad;
      ctx.fill();

      // Point
      ctx.beginPath();
      ctx.arc(p.x, p.y, 5, 0, Math.PI * 2);
      ctx.fillStyle = color;
      ctx.fill();
      ctx.strokeStyle = '#0f172a';
      ctx.lineWidth = 1.5;
      ctx.stroke();

      // Label
      ctx.font = 'bold 16px "Segoe UI", system-ui, sans-serif';
      ctx.fillStyle = color;
      ctx.fillText(label, p.x + offsetX, p.y + offsetY);
    });

    // Segment labels
    ctx.font = '14px "Segoe UI", system-ui, sans-serif';

    // AD = 2
    const midAD = { x: (A.x + D.x) / 2, y: (A.y + D.y) / 2 };
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('2', midAD.x - 3, midAD.y + 20);

    // BD = 8
    const midBD = { x: (B.x + D.x) / 2, y: (B.y + D.y) / 2 };
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('8', midBD.x - 3, midBD.y + 20);

    // CD
    const midCD = { x: (C.x + D.x) / 2, y: (C.y + D.y) / 2 };
    ctx.fillStyle = '#a78bfa';
    ctx.fillText(cHeightFactor === 1.0 ? '4' : (CD_len * cHeightFactor).toFixed(1), midCD.x + 8, midCD.y);

    // Side labels with actual computed lengths
    const ac = dist(A, C) / scale;
    const bc = dist(B, C) / scale;

    // AC
    const midAC = { x: (A.x + C.x) / 2, y: (A.y + C.y) / 2 };
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 13px "Segoe UI", system-ui, sans-serif';
    ctx.fillText('AC=' + ac.toFixed(2), midAC.x - 45, midAC.y - 5);

    // BC
    const midBC = { x: (B.x + C.x) / 2, y: (B.y + C.y) / 2 };
    ctx.fillText('BC=' + bc.toFixed(2), midBC.x + 10, midBC.y - 5);

    // Legend
    ctx.font = '13px "Segoe UI", system-ui, sans-serif';
    const legendX = cssW - 220;
    let legendY = 30;

    ctx.fillStyle = '#94a3b8';
    ctx.fillText('Opisane kruznice:', legendX, legendY);
    legendY += 22;

    // R_ABC label
    ctx.fillStyle = 'rgba(96, 165, 250, 0.8)';
    ctx.beginPath();
    ctx.setLineDash([8, 6]);
    ctx.moveTo(legendX, legendY);
    ctx.lineTo(legendX + 30, legendY);
    ctx.strokeStyle = 'rgba(96, 165, 250, 0.6)';
    ctx.lineWidth = 2;
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = '#60a5fa';
    const rABC = ccABC ? (ccABC.r / scale).toFixed(2) : '?';
    ctx.fillText('R(ABC) = ' + rABC, legendX + 38, legendY + 4);
    legendY += 22;

    // R_ACD label
    ctx.beginPath();
    ctx.setLineDash([6, 4]);
    ctx.moveTo(legendX, legendY);
    ctx.lineTo(legendX + 30, legendY);
    ctx.strokeStyle = 'rgba(244, 114, 182, 0.6)';
    ctx.lineWidth = 2;
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = '#f472b6';
    const rACD = ccACD ? (ccACD.r / scale).toFixed(2) : '?';
    ctx.fillText('R(ACD) = ' + rACD, legendX + 38, legendY + 4);
    legendY += 22;

    // R_BCD label
    ctx.beginPath();
    ctx.setLineDash([6, 4]);
    ctx.moveTo(legendX, legendY);
    ctx.lineTo(legendX + 30, legendY);
    ctx.strokeStyle = 'rgba(52, 211, 153, 0.6)';
    ctx.lineWidth = 2;
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = '#34d399';
    const rBCD = ccBCD ? (ccBCD.r / scale).toFixed(2) : '?';
    ctx.fillText('R(BCD) = ' + rBCD, legendX + 38, legendY + 4);
    legendY += 26;

    // Sum
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 14px "Segoe UI", system-ui, sans-serif';
    const sumR = ccABC && ccACD && ccBCD ? ((ccABC.r + ccACD.r + ccBCD.r) / scale).toFixed(2) : '?';
    ctx.fillText('Zbir = ' + sumR, legendX, legendY + 4);
  }

  // Drag handling
  function getMousePos(e) {
    const rect = canvas.getBoundingClientRect();
    const scaleX = cssW / rect.width;
    const scaleY = cssH / rect.height;
    return {
      x: (e.clientX - rect.left) * scaleX,
      y: (e.clientY - rect.top) * scaleY
    };
  }

  function getTouchPos(e) {
    const rect = canvas.getBoundingClientRect();
    const scaleX = cssW / rect.width;
    const scaleY = cssH / rect.height;
    const touch = e.touches[0];
    return {
      x: (touch.clientX - rect.left) * scaleX,
      y: (touch.clientY - rect.top) * scaleY
    };
  }

  function isNearC(pos) {
    const { C } = getTrianglePoints();
    return Math.sqrt((pos.x - C.x)**2 + (pos.y - C.y)**2) < 20;
  }

  function updateCFromY(canvasY) {
    // D is at toCanvas(AD, 0) => D.y = originY
    // C is at toCanvas(AD, h) => C.y = originY - h * scale
    // So h = (originY - canvasY) / scale
    // cHeightFactor = h / CD_len
    const h = (originY - canvasY) / scale;
    cHeightFactor = Math.max(0.5, Math.min(3.0, h / CD_len));
    draw();
  }

  canvas.addEventListener('mousedown', (e) => {
    const pos = getMousePos(e);
    if (isNearC(pos)) {
      dragging = true;
    }
  });

  canvas.addEventListener('mousemove', (e) => {
    const pos = getMousePos(e);
    if (dragging) {
      updateCFromY(pos.y);
    } else {
      canvas.style.cursor = isNearC(pos) ? 'grab' : 'default';
    }
  });

  canvas.addEventListener('mouseup', () => { dragging = false; });
  canvas.addEventListener('mouseleave', () => { dragging = false; });

  canvas.addEventListener('touchstart', (e) => {
    e.preventDefault();
    const pos = getTouchPos(e);
    if (isNearC(pos)) {
      dragging = true;
    }
  });

  canvas.addEventListener('touchmove', (e) => {
    e.preventDefault();
    if (dragging) {
      const pos = getTouchPos(e);
      updateCFromY(pos.y);
    }
  });

  canvas.addEventListener('touchend', (e) => {
    e.preventDefault();
    dragging = false;
  });

  // Step click highlight
  document.querySelectorAll('.step-container').forEach(step => {
    step.addEventListener('click', function() {
      document.querySelectorAll('.step-container').forEach(s => {
        s.style.borderLeftColor = 'transparent';
        s.style.background = 'transparent';
      });
      this.style.borderLeftColor = '#4ade80';
      this.style.background = 'rgba(74, 222, 128, 0.05)';
    });
  });

  // Initial draw
  draw();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Zbir poluprecnika opisanih kruznica trouglova",
  "subject": "math",
  "unit": "geometry",
  "topic_tags": ["opisana kruznica", "pravougli trougao", "visina trougla", "Pitagorina teorema", "poluprecnik"]
}
BRAINSPARK_META-->