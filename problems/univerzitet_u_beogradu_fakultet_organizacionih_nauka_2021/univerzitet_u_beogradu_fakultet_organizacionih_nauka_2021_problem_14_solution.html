<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aritmetička i geometrijska progresija — odnos članova</title>
<script type="text/info" id="logic-scratchpad">
Problem: Arithmetic progression a_1, a_2, a_3, ... with mutually distinct terms.
a_1, a_6, a_10 are consecutive terms of some geometric progression.
Find a_2021 / a_1.

Step 1: Write general terms of the AP.
a_n = a_1 + (n-1)*d, where d ≠ 0 (since all terms are distinct).
a_1 = a_1
a_6 = a_1 + 5d
a_10 = a_1 + 9d

Step 2: Apply the GP condition.
If a_1, a_6, a_10 are consecutive terms of a GP, then:
(a_6)^2 = a_1 * a_10

Step 3: Expand and simplify.
(a_1 + 5d)^2 = a_1 * (a_1 + 9d)
a_1^2 + 10*a_1*d + 25*d^2 = a_1^2 + 9*a_1*d
10*a_1*d + 25*d^2 = 9*a_1*d
a_1*d + 25*d^2 = 0
d*(a_1 + 25*d) = 0

Step 4: Since d ≠ 0, we get:
a_1 + 25*d = 0
a_1 = -25*d

Step 5: Calculate a_2021.
a_2021 = a_1 + 2020*d = -25*d + 2020*d = 1995*d

Step 6: Calculate the ratio.
a_2021 / a_1 = 1995*d / (-25*d) = -1995/25

Simplify: 1995/25 = 399/5

So a_2021 / a_1 = -399/5

Answer: (D) -399/5

Verification: Let's check with a concrete example.
Let d = 1, then a_1 = -25.
a_1 = -25, a_6 = -25 + 5 = -20, a_10 = -25 + 9 = -16.
GP check: (-20)^2 = 400, (-25)*(-16) = 400. ✓
Ratio: q = a_6/a_1 = -20/-25 = 4/5. a_10/a_6 = -16/-20 = 4/5. ✓
a_2021 = -25 + 2020 = 1995.
a_2021/a_1 = 1995/(-25) = -399/5. ✓
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 10px;
}
h1 {
  font-size: 2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
}
.subtitle {
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 28px;
}
.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 22px 26px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}
.card h2 {
  color: #60a5fa;
  font-size: 1.3rem;
  margin-bottom: 14px;
}
.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}
.given-item {
  background: rgba(56,189,248,0.06);
  border: 1px solid rgba(56,189,248,0.13);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
}
.given-item .label {
  font-size: 0.82rem;
  color: #94a3b8;
  margin-bottom: 4px;
}
.given-item .value {
  font-size: 1.05rem;
  color: #e2e8f0;
  font-weight: 600;
}
.plan-card {
  border-left: 3px solid #a78bfa;
}
.plan-card h2 { color: #a78bfa; }
details {
  margin: 15px 0;
}
details summary {
  cursor: pointer;
  font-weight: 600;
  color: #60a5fa;
  padding: 8px 0;
  user-select: none;
}
details summary:hover { color: #93c5fd; }
.theory-list {
  list-style: none;
  padding: 10px 0;
}
.theory-list li {
  padding: 8px 0 8px 16px;
  border-left: 2px solid #334155;
  margin-bottom: 6px;
  color: #cbd5e1;
}
.theory-list li strong { color: #a78bfa; }
.canvas-card {
  text-align: center;
}
.canvas-card canvas {
  border-radius: 10px;
  border: 1px solid #334155;
  max-width: 100%;
  touch-action: none;
}
.canvas-hint {
  color: #64748b;
  font-size: 0.82rem;
  margin-top: 8px;
}
.step-container {
  display: flex;
  gap: 16px;
  margin-bottom: 18px;
  padding: 14px 18px;
  border-radius: 12px;
  border-left: 3px solid transparent;
  transition: border-color 0.2s, background 0.2s;
  cursor: pointer;
}
.step-container:hover, .step-container.active {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}
.step-badge {
  min-width: 32px;
  height: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  color: #0f172a;
  flex-shrink: 0;
  margin-top: 2px;
}
.step-content { flex: 1; }
.step-content h3 {
  color: #e2e8f0;
  font-size: 1.05rem;
  margin-bottom: 8px;
}
.step-content p {
  color: #cbd5e1;
  font-size: 0.95rem;
  margin-bottom: 8px;
}
.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 10px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}
.note {
  color: #94a3b8;
  font-size: 0.87rem;
  font-style: italic;
  margin-top: 6px;
}
.checkpoint {
  background: rgba(168,139,250,0.06);
  border: 1px solid rgba(168,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 15px 0;
}
.checkpoint summary {
  color: #a78bfa;
  font-size: 0.95rem;
}
.checkpoint .answer {
  padding: 10px 0 4px;
  color: #4ade80;
  font-weight: 600;
}
.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid rgba(96,165,250,0.25);
  border-radius: 14px;
  padding: 24px;
  text-align: center;
  margin-bottom: 24px;
}
.insight-box h2 { color: #a78bfa; margin-bottom: 12px; }
.insight-formula {
  font-size: 1.3rem;
  color: #e2e8f0;
  margin: 10px 0;
}
.final-answer-box {
  background: linear-gradient(135deg, rgba(52,211,153,0.12), rgba(74,222,128,0.08));
  border: 1px solid rgba(52,211,153,0.3);
  border-radius: 14px;
  padding: 28px;
  text-align: center;
  margin-bottom: 24px;
}
.final-answer-box h2 {
  color: #4ade80;
  margin-bottom: 14px;
}
.final-answer-value {
  font-size: 1.8rem;
  font-weight: 800;
  color: #4ade80;
  margin: 12px 0;
}
.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-top: 16px;
}
.option-card {
  padding: 10px 22px;
  border-radius: 10px;
  font-weight: 600;
  font-size: 1rem;
  background: rgba(148,163,184,0.08);
  border: 1px solid #334155;
  color: #94a3b8;
}
.option-card.correct {
  background: rgba(52,211,153,0.15);
  border-color: #34d399;
  color: #4ade80;
}
.verification {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 14px;
  font-style: italic;
}
.pitfalls-card {
  border-left: 3px solid #e09468;
}
.pitfalls-card h2 { color: #e09468; }
.pitfalls-card ul {
  list-style: none;
  padding: 0;
}
.pitfalls-card li {
  padding: 8px 0 8px 16px;
  border-left: 2px solid rgba(224,148,104,0.3);
  margin-bottom: 8px;
  color: #cbd5e1;
}
.challenge-card {
  border-left: 3px solid #f472b6;
}
.challenge-card h2 { color: #f472b6; }
@media (max-width: 700px) {
  h1 { font-size: 1.5rem; }
  .card { padding: 16px; }
  .step-container { flex-direction: column; gap: 8px; }
  .given-grid { gap: 8px; }
  .given-item { min-width: 60px; padding: 8px 12px; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Aritmetička i geometrijska progresija</h1>
  <p class="subtitle">Nizovi — veza između aritmetičke i geometrijske progresije</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Neka je \( a_1, a_2, a_3, \ldots \) aritmetička progresija sa međusobno različitim članovima.
      Ako su \( a_1 \), \( a_6 \) i \( a_{10} \) uzastopni članovi neke geometrijske progresije,
      tada je vrednost izraza \( \dfrac{a_{2021}}{a_1} \) jednaka:</p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(-\dfrac{401}{5}\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(-80\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(-\dfrac{403}{5}\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(-\dfrac{399}{5}\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(-81\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan rešavanja</h2>
    <p>Izrazićemo članove \( a_1 \), \( a_6 \) i \( a_{10} \) pomoću prvog člana i razlike aritmetičke progresije,
      a zatim primeniti uslov da oni čine geometrijsku progresiju (kvadrat srednjeg člana jednak je proizvodu krajnjih).
      Iz dobijene veze izračunavaćemo traženi količnik.</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>&#128208; Ključne formule i teoreme</summary>
      <ul class="theory-list">
        <li><strong>Opšti član aritmetičke progresije:</strong> \( a_n = a_1 + (n-1) \cdot d \), gde je \( d \) razlika progresije.</li>
        <li><strong>Uslov za geometrijsku progresiju:</strong> Tri broja \( b_1, b_2, b_3 \) su uzastopni članovi geometrijske progresije ako i samo ako važi \( b_2^2 = b_1 \cdot b_3 \).</li>
        <li><strong>Količnik geometrijske progresije:</strong> Za uzastopne članove GP važi \( q = \dfrac{b_2}{b_1} = \dfrac{b_3}{b_2} \).</li>
        <li><strong>Različiti članovi AP:</strong> Članovi aritmetičke progresije su međusobno različiti ako i samo ako je \( d \neq 0 \).</li>
      </ul>
    </details>
  </div>

  <!-- Canvas Diagram -->
  <div class="card canvas-card">
    <h2>Vizuelni prikaz</h2>
    <canvas id="diagram" width="700" height="420"></canvas>
    <p class="canvas-hint">Pomerajte klizač da menjate razliku d i vidite kako se menjaju članovi AP i GP uslov</p>
    <div style="margin-top:12px; display:flex; align-items:center; justify-content:center; gap:12px; flex-wrap:wrap;">
      <label for="d-slider" style="color:#94a3b8; font-size:0.92rem;">Razlika d:</label>
      <input type="range" id="d-slider" min="-5" max="5" step="0.1" value="1" style="width:240px; accent-color:#60a5fa;">
      <span id="d-value" style="color:#60a5fa; font-weight:700; font-size:1rem; min-width:70px;">d = 1,0</span>
    </div>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <div class="step-container" id="step1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Zapišimo članove AP</h3>
        <p>Neka je \( a_1 \) prvi član, a \( d \) razlika aritmetičke progresije (\( d \neq 0 \) jer su članovi međusobno različiti). Tada:</p>
        <div class="math-block">
          \[ a_1 = a_1 \]
        </div>
        <div class="math-block">
          \[ a_6 = a_1 + 5d \]
        </div>
        <div class="math-block">
          \[ a_{10} = a_1 + 9d \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Primenimo uslov geometrijske progresije</h3>
        <p>Pošto su \( a_1, a_6, a_{10} \) uzastopni članovi neke GP, važi:</p>
        <div class="math-block">
          \[ a_6^2 = a_1 \cdot a_{10} \]
        </div>
        <p>Ovo je ključni uslov — kvadrat srednjeg člana jednak je proizvodu krajnjih.</p>
      </div>
    </div>

    <div class="step-container" id="step3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Zamenimo izraze iz AP</h3>
        <p>Uvrstimo izraze iz koraka 1:</p>
        <div class="math-block">
          \[ (a_1 + 5d)^2 = a_1 \cdot (a_1 + 9d) \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Razvijemo obe strane</h3>
        <p>Leva strana (kvadrat binoma):</p>
        <div class="math-block">
          \[ a_1^2 + 10 a_1 d + 25 d^2 \]
        </div>
        <p>Desna strana:</p>
        <div class="math-block">
          \[ a_1^2 + 9 a_1 d \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Izjednačimo i uprostimo</h3>
        <p>Izjednačavamo levu i desnu stranu:</p>
        <div class="math-block">
          \[ a_1^2 + 10 a_1 d + 25 d^2 = a_1^2 + 9 a_1 d \]
        </div>
        <p>Skratimo \( a_1^2 \) sa obe strane:</p>
        <div class="math-block">
          \[ 10 a_1 d + 25 d^2 = 9 a_1 d \]
        </div>
        <p>Prebacimo sve na jednu stranu:</p>
        <div class="math-block">
          \[ a_1 d + 25 d^2 = 0 \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>&#9997; Proveri se — Šta dobijamo kad izlučimo \( d \)?</summary>
      <div class="answer">\( d(a_1 + 25d) = 0 \). Pošto je \( d \neq 0 \), mora biti \( a_1 + 25d = 0 \).</div>
    </details>

    <div class="step-container" id="step6">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Izlučimo zajednički faktor</h3>
        <p>Izlučimo \( d \) ispred zagrade:</p>
        <div class="math-block">
          \[ d \cdot (a_1 + 25d) = 0 \]
        </div>
        <p>Pošto su članovi progresije međusobno različiti, važi \( d \neq 0 \). Zato mora biti:</p>
        <div class="math-block">
          \[ a_1 + 25d = 0 \]
        </div>
        <p>Odavde dobijamo ključnu vezu:</p>
        <div class="math-block">
          \[ a_1 = -25d \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step7">
      <div class="step-badge">7</div>
      <div class="step-content">
        <h3>Izračunamo \( a_{2021} \)</h3>
        <p>Koristimo formulu za opšti član AP:</p>
        <div class="math-block">
          \[ a_{2021} = a_1 + 2020 \cdot d \]
        </div>
        <p>Zamenimo \( a_1 = -25d \):</p>
        <div class="math-block">
          \[ a_{2021} = -25d + 2020d = 1995d \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>&#9997; Proveri se — Koliko je \( -25 + 2020 \)?</summary>
      <div class="answer">\( -25 + 2020 = 1995 \). Dakle, \( a_{2021} = 1995d \).</div>
    </details>

    <div class="step-container" id="step8">
      <div class="step-badge">8</div>
      <div class="step-content">
        <h3>Izračunamo traženi količnik</h3>
        <p>Delimo \( a_{2021} \) sa \( a_1 \):</p>
        <div class="math-block">
          \[ \frac{a_{2021}}{a_1} = \frac{1995d}{-25d} \]
        </div>
        <p>Pošto je \( d \neq 0 \), možemo ga skratiti:</p>
        <div class="math-block">
          \[ \frac{a_{2021}}{a_1} = \frac{1995}{-25} = -\frac{1995}{25} \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step9">
      <div class="step-badge">9</div>
      <div class="step-content">
        <h3>Skratimo razlomak</h3>
        <p>Skraćujemo brojilac i imenilac sa \( 5 \):</p>
        <div class="math-block">
          \[ \frac{1995}{25} = \frac{1995 \div 5}{25 \div 5} = \frac{399}{5} \]
        </div>
        <p>Konačno:</p>
        <div class="math-block">
          \[ \frac{a_{2021}}{a_1} = -\frac{399}{5} \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>&#9997; Proveri se — Verifikacija sa konkretnim brojevima</summary>
      <div class="answer">Neka je \( d = 1 \). Tada \( a_1 = -25 \), \( a_6 = -20 \), \( a_{10} = -16 \).
        GP uslov: \( (-20)^2 = 400 = (-25) \cdot (-16) = 400 \). &#10003;
        Količnik: \( a_{2021} = -25 + 2020 = 1995 \), pa \( \frac{1995}{-25} = -\frac{399}{5} \). &#10003;</div>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Ključni uvid</h2>
    <p style="color:#cbd5e1; margin-bottom:10px;">Uslov geometrijske progresije \( a_6^2 = a_1 \cdot a_{10} \) daje vezu \( a_1 = -25d \), koja povezuje prvi član sa razlikom AP. Posle toga, u razlomku \( \frac{a_{2021}}{a_1} \) razlika \( d \) se skraćuje i rezultat ne zavisi od konkretne vrednosti \( d \):</p>
    <div class="insight-formula">
      \[ \frac{a_{2021}}{a_1} = \frac{1995d}{-25d} = \boxed{-\frac{399}{5}} \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <h2>Konačan odgovor</h2>
    <div class="final-answer-value">\( \dfrac{a_{2021}}{a_1} = -\dfrac{399}{5} \)</div>
    <div class="options-row">
      <div class="option-card">(A) \(-\dfrac{401}{5}\)</div>
      <div class="option-card">(B) \(-80\)</div>
      <div class="option-card">(C) \(-\dfrac{403}{5}\)</div>
      <div class="option-card correct">(D) \(-\dfrac{399}{5}\)</div>
      <div class="option-card">(E) \(-81\)</div>
    </div>
    <p class="verification">Verifikacija: Za \( d = 1 \) i \( a_1 = -25 \), članovi \( -25, -20, -16 \) zaista čine GP sa količnikom \( q = \frac{4}{5} \), a \( a_{2021} = 1995 \), pa je \( \frac{1995}{-25} = -\frac{399}{5} = -79{,}8 \). Rezultat je negativan i blizu \( -80 \), što se slaže sa ponuđenim odgovorima.</p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfalls-card">
    <h2>Česte greške</h2>
    <ul>
      <li><strong>Zaboraviti uslov \( d \neq 0 \):</strong> Ako bi \( d = 0 \), svi članovi AP bi bili jednaki, što je u suprotnosti sa uslovom da su članovi međusobno različiti. Zato odbacujemo rešenje \( d = 0 \) iz jednačine \( d(a_1 + 25d) = 0 \).</li>
      <li><strong>Pogrešna primena GP uslova:</strong> Uslov glasi \( a_6^2 = a_1 \cdot a_{10} \), a ne \( a_1 \cdot a_6 = a_{10} \) ili neka druga kombinacija. Srednji član se kvadrira, a krajnji se množe.</li>
      <li><strong>Greška u indeksima:</strong> Član \( a_6 \) ima indeks \( n = 6 \), pa je \( a_6 = a_1 + 5d \) (ne \( 6d \)). Slično, \( a_{10} = a_1 + 9d \) i \( a_{2021} = a_1 + 2020d \).</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Koliki je količnik \( q \) geometrijske progresije koju čine \( a_1, a_6, a_{10} \)?</p>
    <details>
      <summary>&#128161; Hint</summary>
      <p style="padding:8px 0; color:#cbd5e1;">Količnik GP je \( q = \frac{a_6}{a_1} = \frac{a_1 + 5d}{a_1} \). Pošto je \( a_1 = -25d \), to daje \( q = \frac{-25d + 5d}{-25d} = \frac{-20d}{-25d} = \frac{4}{5} \). Proverite da li važi i \( \frac{a_{10}}{a_6} = \frac{4}{5} \)!</p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('diagram');
  const ctx = canvas.getContext('2d');
  const slider = document.getElementById('d-slider');
  const dDisplay = document.getElementById('d-value');

  const W = canvas.width, H = canvas.height;

  function draw(d) {
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    const a1 = -25 * d;
    const a6 = a1 + 5 * d;
    const a10 = a1 + 9 * d;
    const a2021 = a1 + 2020 * d;

    const gpCheck = a6 * a6;
    const gpProd = a1 * a10;
    const isGP = Math.abs(d) > 0.01;

    // Section: AP members visualization
    // Draw a number line showing a_1, a_6, a_10
    const padLeft = 80;
    const padRight = 40;
    const lineY = 120;
    const lineW = W - padLeft - padRight;

    // Determine scale for the number line
    let vals = [a1, a6, a10];
    let minVal = Math.min(...vals);
    let maxVal = Math.max(...vals);
    let range = maxVal - minVal;
    if (range < 0.1) range = 10;
    let margin = range * 0.15;
    let scaleMin = minVal - margin;
    let scaleMax = maxVal + margin;
    let scaleRange = scaleMax - scaleMin;

    function toX(val) {
      return padLeft + ((val - scaleMin) / scaleRange) * lineW;
    }

    // Title
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Aritmetička progresija na brojevnoj pravoj', padLeft, 30);

    // Number line
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(padLeft - 10, lineY);
    ctx.lineTo(W - padRight + 10, lineY);
    ctx.stroke();

    // Arrow at end
    ctx.beginPath();
    ctx.moveTo(W - padRight + 10, lineY);
    ctx.lineTo(W - padRight, lineY - 5);
    ctx.lineTo(W - padRight, lineY + 5);
    ctx.closePath();
    ctx.fillStyle = '#475569';
    ctx.fill();

    // Tick marks and values
    let tickStep = range / 8;
    if (tickStep < 0.5) tickStep = 0.5;
    let niceTick = Math.pow(10, Math.floor(Math.log10(tickStep)));
    if (tickStep / niceTick >= 5) niceTick *= 5;
    else if (tickStep / niceTick >= 2) niceTick *= 2;

    ctx.fillStyle = '#64748b';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    let startTick = Math.ceil(scaleMin / niceTick) * niceTick;
    for (let t = startTick; t <= scaleMax; t += niceTick) {
      let tx = toX(t);
      ctx.strokeStyle = '#334155';
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.moveTo(tx, lineY - 4);
      ctx.lineTo(tx, lineY + 4);
      ctx.stroke();
      ctx.fillText(t.toFixed(niceTick < 1 ? 1 : 0).replace('.', ','), tx, lineY + 18);
    }

    // Draw AP members
    function drawPoint(val, label, color, yOff) {
      let px = toX(val);
      // Glow
      let grad = ctx.createRadialGradient(px, lineY, 0, px, lineY, 18);
      grad.addColorStop(0, color + '44');
      grad.addColorStop(1, 'transparent');
      ctx.fillStyle = grad;
      ctx.beginPath();
      ctx.arc(px, lineY, 18, 0, Math.PI * 2);
      ctx.fill();

      // Point
      ctx.beginPath();
      ctx.arc(px, lineY, 6, 0, Math.PI * 2);
      ctx.fillStyle = color;
      ctx.fill();

      // Label
      ctx.fillStyle = color;
      ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(label, px, lineY + yOff);

      // Value
      ctx.font = '11px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = '#cbd5e1';
      ctx.fillText(val.toFixed(1).replace('.', ','), px, lineY + yOff + 16);
    }

    if (Math.abs(d) > 0.01) {
      drawPoint(a1, 'a\u2081', '#60a5fa', -22);
      drawPoint(a6, 'a\u2086', '#a78bfa', -22);
      drawPoint(a10, 'a\u2081\u2080', '#f472b6', -22);

      // Draw d arrows between some members
      ctx.strokeStyle = '#4ade80';
      ctx.lineWidth = 1;
      ctx.setLineDash([4, 3]);
      let x1 = toX(a1);
      let x6 = toX(a6);
      ctx.beginPath();
      ctx.moveTo(x1, lineY + 44);
      ctx.lineTo(x6, lineY + 44);
      ctx.stroke();
      ctx.setLineDash([]);
      ctx.fillStyle = '#4ade80';
      ctx.font = '11px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('5d = ' + (5 * d).toFixed(1).replace('.', ','), (x1 + x6) / 2, lineY + 58);
    } else {
      ctx.fillStyle = '#94a3b8';
      ctx.font = '14px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('d = 0: svi članovi su jednaki (nije dozvoljen slučaj)', W / 2, lineY);
    }

    // GP condition section
    let secY = 200;
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Uslov geometrijske progresije:', padLeft, secY);

    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#cbd5e1';

    if (Math.abs(d) > 0.01) {
      ctx.textAlign = 'left';
      ctx.fillText('a\u2081 = ' + a1.toFixed(2).replace('.', ',') +
                   ',   a\u2086 = ' + a6.toFixed(2).replace('.', ',') +
                   ',   a\u2081\u2080 = ' + a10.toFixed(2).replace('.', ','), padLeft, secY + 24);

      ctx.fillText('(a\u2086)\u00B2 = ' + gpCheck.toFixed(2).replace('.', ','), padLeft, secY + 50);
      ctx.fillText('a\u2081 \u00B7 a\u2081\u2080 = ' + gpProd.toFixed(2).replace('.', ','), padLeft, secY + 72);

      let diff = Math.abs(gpCheck - gpProd);
      if (diff < 0.01) {
        ctx.fillStyle = '#4ade80';
        ctx.fillText('\u2713 Uslov ispunjen: (a\u2086)\u00B2 = a\u2081 \u00B7 a\u2081\u2080', padLeft, secY + 98);
      } else {
        ctx.fillStyle = '#f472b6';
        ctx.fillText('\u2717 Uslov NIJE ispunjen (razlika: ' + diff.toFixed(2).replace('.', ',') + ')', padLeft, secY + 98);
      }

      // Show the key relation a_1 = -25d
      ctx.fillStyle = '#94a3b8';
      ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
      ctx.fillText('Ključna veza:', padLeft, secY + 135);

      ctx.font = '13px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = '#60a5fa';
      ctx.fillText('a\u2081 = -25d = -25 \u00B7 ' + d.toFixed(1).replace('.', ',') + ' = ' + a1.toFixed(1).replace('.', ','), padLeft, secY + 158);

      // Result section
      ctx.fillStyle = '#94a3b8';
      ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
      ctx.fillText('Rezultat:', padLeft, secY + 195);

      let ratio = a2021 / a1;
      ctx.font = '13px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = '#cbd5e1';
      ctx.fillText('a\u2082\u2080\u2082\u2081 = a\u2081 + 2020d = ' + a1.toFixed(1).replace('.', ',') + ' + ' + (2020 * d).toFixed(1).replace('.', ',') + ' = ' + a2021.toFixed(1).replace('.', ','), padLeft, secY + 218);

      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
      ctx.fillText('a\u2082\u2080\u2082\u2081 / a\u2081 = ' + a2021.toFixed(1).replace('.', ',') + ' / ' + a1.toFixed(1).replace('.', ',') + ' = ' + ratio.toFixed(1).replace('.', ',') + ' = -399/5', padLeft, secY + 248);
    }

    // Legend
    ctx.fillStyle = 'rgba(15, 23, 42, 0.85)';
    ctx.fillRect(W - 200, 10, 190, 80);
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';

    ctx.fillStyle = '#60a5fa';
    ctx.fillRect(W - 190, 20, 12, 12);
    ctx.fillText('a\u2081 (prvi član)', W - 172, 31);

    ctx.fillStyle = '#a78bfa';
    ctx.fillRect(W - 190, 40, 12, 12);
    ctx.fillText('a\u2086 (šesti član)', W - 172, 51);

    ctx.fillStyle = '#f472b6';
    ctx.fillRect(W - 190, 60, 12, 12);
    ctx.fillText('a\u2081\u2080 (deseti član)', W - 172, 71);
  }

  function updateSlider() {
    const d = parseFloat(slider.value);
    dDisplay.textContent = 'd = ' + d.toFixed(1).replace('.', ',');
    draw(d);
  }

  slider.addEventListener('input', updateSlider);

  // Step click highlighting
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(function(step) {
    step.addEventListener('click', function() {
      steps.forEach(function(s) { s.classList.remove('active'); });
      step.classList.add('active');
    });
  });

  // Initial draw
  draw(parseFloat(slider.value));
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Odnos članova aritmetičke progresije uz uslov geometrijske progresije",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["aritmetička progresija", "geometrijska progresija", "nizovi", "odnos članova", "uslov GP"]
}
BRAINSPARK_META-->