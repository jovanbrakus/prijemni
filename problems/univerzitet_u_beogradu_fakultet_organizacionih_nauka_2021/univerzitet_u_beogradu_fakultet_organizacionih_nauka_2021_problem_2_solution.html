<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kompozicija i inverzna funkcija - Rešenje</title>

<script type="text/info" id="logic-scratchpad">
Problem:
  f(x+2) = 2x - 1
  g(f(x) - 2) = 2x + 1
  g^(-1) is the inverse of g
  Find g^(-1)(f(0))

Step 1: Find f(x) explicitly.
  f(x+2) = 2x - 1
  Let t = x + 2, so x = t - 2.
  f(t) = 2(t - 2) - 1 = 2t - 4 - 1 = 2t - 5
  Therefore: f(x) = 2x - 5

Step 2: Find f(0).
  f(0) = 2(0) - 5 = -5

Step 3: Find g(x) explicitly.
  g(f(x) - 2) = 2x + 1
  We know f(x) = 2x - 5, so:
  f(x) - 2 = (2x - 5) - 2 = 2x - 7
  Let u = 2x - 7, then x = (u + 7) / 2
  g(u) = 2 * (u + 7)/2 + 1 = (u + 7) + 1 = u + 8
  Therefore: g(x) = x + 8

Step 4: Find g^(-1)(x).
  If y = g(x) = x + 8, then x = y - 8.
  Therefore: g^(-1)(x) = x - 8

Step 5: Compute g^(-1)(f(0)).
  g^(-1)(f(0)) = g^(-1)(-5) = -5 - 8 = -13

Answer: (D) -13 ✓

Verification:
  g(-13) should equal f(0) = -5
  g(-13) = -13 + 8 = -5 ✓ Correct!
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
  min-height: 100vh;
}

.container {
  max-width: 900px;
  margin: 0 auto;
}

h1 {
  font-size: 2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 6px;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 28px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 22px 26px;
  margin-bottom: 22px;
}

.card-title {
  font-size: 1.15rem;
  font-weight: 700;
  color: #60a5fa;
  margin-bottom: 12px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  font-size: 0.85rem;
  font-weight: 700;
  flex-shrink: 0;
}

.badge-blue { background: rgba(96,165,250,0.18); color: #60a5fa; }
.badge-purple { background: rgba(167,139,250,0.18); color: #a78bfa; }
.badge-green { background: rgba(52,211,153,0.18); color: #34d399; }
.badge-pink { background: rgba(244,114,182,0.18); color: #f472b6; }

.problem-statement {
  border-left: 4px solid #a78bfa;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-top: 16px;
}

.given-item {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 16px;
  min-width: 80px;
  text-align: center;
}

.given-item .label {
  font-size: 0.8rem;
  color: #94a3b8;
  font-weight: 600;
  margin-bottom: 4px;
}

.given-item .value {
  font-size: 1rem;
  color: #e2e8f0;
  font-weight: 600;
}

.plan-card {
  border-left: 4px solid #60a5fa;
}

details {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 18px 24px;
  margin: 15px 0 22px;
}

details summary {
  cursor: pointer;
  font-weight: 700;
  color: #a78bfa;
  font-size: 1.05rem;
  list-style: none;
  display: flex;
  align-items: center;
  gap: 8px;
}

details summary::-webkit-details-marker { display: none; }

details summary::before {
  content: '\25B6';
  font-size: 0.75rem;
  transition: transform 0.2s;
}

details[open] summary::before {
  transform: rotate(90deg);
}

details .theory-content {
  margin-top: 14px;
  color: #cbd5e1;
  line-height: 1.8;
}

.step-card {
  position: relative;
  padding-left: 18px;
  cursor: pointer;
  transition: border-color 0.2s;
}

.step-card:hover {
  border-color: #4ade80;
}

.step-card::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  border-radius: 2px;
  transition: background 0.2s;
}

.step-card.active::before {
  background: #4ade80 !important;
}

.step-card.step-blue::before { background: #60a5fa; }
.step-card.step-purple::before { background: #a78bfa; }
.step-card.step-green::before { background: #34d399; }
.step-card.step-pink::before { background: #f472b6; }

.checkpoint {
  background: rgba(96,165,250,0.08);
  border: 1px dashed #60a5fa;
  border-radius: 10px;
  padding: 14px 18px;
  margin: 15px 0;
  color: #94a3b8;
  font-size: 0.95rem;
}

.checkpoint strong {
  color: #60a5fa;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 14px;
  padding: 22px 26px;
  margin-bottom: 22px;
}

.insight-box .card-title {
  color: #a78bfa;
}

.final-answer-card {
  background: linear-gradient(135deg, rgba(52,211,153,0.08), rgba(74,222,128,0.08));
  border: 2px solid #34d399;
  border-radius: 16px;
  padding: 28px 30px;
  margin-bottom: 22px;
  text-align: center;
}

.final-answer-card .label {
  color: #34d399;
  font-weight: 700;
  font-size: 1.1rem;
  margin-bottom: 10px;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.final-answer-card .answer {
  color: #4ade80;
  font-size: 1.45rem;
  font-weight: 700;
  line-height: 1.6;
}

.final-answer-options {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 10px;
  margin-top: 16px;
}

.final-option {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 8px 18px;
  font-size: 0.95rem;
  color: #94a3b8;
}

.final-option.correct {
  border-color: #34d399;
  color: #34d399;
  background: rgba(52,211,153,0.08);
  font-weight: 700;
}

.pitfalls-card {
  border-left: 4px solid #f472b6;
}

.pitfalls-card ul {
  margin-left: 18px;
  color: #cbd5e1;
}

.pitfalls-card li {
  margin-bottom: 8px;
}

.challenge-card {
  border: 1px dashed #a78bfa;
  background: rgba(167,139,250,0.05);
}

.highlight {
  color: #60a5fa;
  font-weight: 600;
}

.highlight-green {
  color: #34d399;
  font-weight: 600;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

.highlight-purple {
  color: #a78bfa;
  font-weight: 600;
}

.math-block {
  margin: 14px 0;
  overflow-x: auto;
}

.visual-container {
  display: flex;
  justify-content: center;
  margin: 10px 0;
}

canvas {
  border-radius: 12px;
  max-width: 100%;
  touch-action: none;
}

.drag-hint {
  color: #64748b;
  font-size: 0.85rem;
  text-align: center;
  margin-top: 8px;
}

.func-table {
  width: 100%;
  border-collapse: collapse;
  margin: 12px 0;
}

.func-table th, .func-table td {
  border: 1px solid #334155;
  padding: 8px 14px;
  text-align: center;
}

.func-table th {
  background: rgba(96,165,250,0.12);
  color: #60a5fa;
  font-weight: 700;
}

.func-table td {
  background: #0f172a;
  color: #e2e8f0;
}

.verification-note {
  color: #94a3b8;
  margin-top: 12px;
  font-size: 0.95rem;
}

@media (max-width: 700px) {
  h1 { font-size: 1.5rem; }
  .card, .problem-statement, details, .insight-box, .final-answer-card {
    padding: 16px 18px;
  }
  .given-grid {
    justify-content: center;
  }
  .final-answer-options {
    flex-direction: column;
    align-items: center;
  }
  body { padding: 12px; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Kompozicija i inverzna funkcija</h1>
  <p class="subtitle">Odredjivanje eksplicitnog oblika funkcija iz kompozicije i primena inverzne funkcije</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <div class="card-title"><span class="badge badge-purple">?</span> Zadatak</div>
    <p>
      Ako je \( f(x+2) = 2x - 1 \), \( g(f(x) - 2) = 2x + 1 \) i \( g^{-1} \) inverzna funkcija funkciji \( g \),
      onda je vrednost izraza \( g^{-1}(f(0)) \) jednaka:
    </p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(-10\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(-3\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(-8\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(-13\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(-5\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <div class="card-title"><span class="badge badge-blue">&#9881;</span> Plan rešavanja</div>
    <p>
      Iz datih relacija prvo ćemo odrediti eksplicitne oblike funkcija \(f(x)\) i \(g(x)\) pomoću smene promenljive.
      Zatim ćemo naći inverznu funkciju \(g^{-1}(x)\) i izračunati traženu vrednost \(g^{-1}(f(0))\).
    </p>
  </div>

  <!-- Theory Refresher -->
  <details>
    <summary>Ključne formule i teoreme</summary>
    <div class="theory-content">
      <p><strong>Smena promenljive u funkcionalnoj jednačini:</strong> Ako je dato \(f(x + a) = \text{izraz}(x)\),
        uvodimo smenu \(t = x + a\), pa \(x = t - a\), čime dobijamo \(f(t)\) u eksplicitnom obliku.</p>
      <p style="margin-top:10px;"><strong>Kompozicija funkcija:</strong> Ako je \(g(h(x)) = \text{izraz}(x)\),
        smenom \(u = h(x)\) možemo odrediti \(g(u)\) ako umemo da izrazimo \(x\) preko \(u\).</p>
      <p style="margin-top:10px;"><strong>Inverzna funkcija:</strong> Ako je \(y = g(x)\), onda je
        \(g^{-1}(y) = x\). Tj. \(g^{-1}\) „poništava" dejstvo funkcije \(g\):
        \[ g^{-1}(g(x)) = x \quad \text{i} \quad g(g^{-1}(x)) = x \]
      </p>
      <p style="margin-top:10px;"><strong>Nalaženje inverzne funkcije:</strong> Iz \(y = g(x)\) izrazimo \(x\) kao funkciju od \(y\), pa zamenimo oznake.</p>
    </div>
  </details>

  <!-- Visual Aid -->
  <div class="card">
    <div class="card-title"><span class="badge badge-blue">&#128202;</span> Vizuelni prikaz</div>
    <p style="color:#94a3b8; margin-bottom: 12px;">
      Grafici funkcija \(f(x)\), \(g(x)\) i \(g^{-1}(x)\) sa označenim ključnim tačkama za rešavanje zadatka.
    </p>
    <div class="visual-container">
      <canvas id="graphCanvas" width="620" height="440"></canvas>
    </div>
    <p class="drag-hint">Grafici: plava = f(x), ljubičasta = g(x), zelena = g<sup>-1</sup>(x)</p>
  </div>

  <!-- Step-by-Step Solution -->

  <!-- Step 1 -->
  <div class="card step-card step-blue">
    <div class="card-title"><span class="badge badge-blue">1</span> Odredimo \(f(x)\)</div>
    <p>Dato je:</p>
    <div class="math-block">
      \[ f(x + 2) = 2x - 1 \]
    </div>
    <p>Uvodimo <span class="highlight">smenu</span> \(t = x + 2\), odakle je \(x = t - 2\). Zamenom:</p>
    <div class="math-block">
      \[ f(t) = 2(t - 2) - 1 \]
    </div>
    <p>Raspisujemo:</p>
    <div class="math-block">
      \[ f(t) = 2t - 4 - 1 = 2t - 5 \]
    </div>
    <p>Vraćamo oznaku \(x\) umesto \(t\):</p>
    <div class="math-block">
      \[ \boxed{f(x) = 2x - 5} \]
    </div>
  </div>

  <!-- Step 2 -->
  <div class="card step-card step-purple">
    <div class="card-title"><span class="badge badge-purple">2</span> Izračunajmo \(f(0)\)</div>
    <p>Sada lako nalazimo vrednost funkcije \(f\) u tački \(x = 0\):</p>
    <div class="math-block">
      \[ f(0) = 2 \cdot 0 - 5 = -5 \]
    </div>
    <p>Dakle, <span class="highlight-purple">\(f(0) = -5\)</span>. Ovu vrednost ćemo koristiti na kraju.</p>
  </div>

  <!-- Checkpoint 1 -->
  <details style="margin: 15px 0;">
    <summary><strong>Proveri sebe:</strong> Koliko je \(f(3)\)?</summary>
    <div class="theory-content">
      <p>\(f(3) = 2 \cdot 3 - 5 = 1\). Možemo proveriti i iz originalne relacije:
        \(f(3) = f(1 + 2) = 2 \cdot 1 - 1 = 1\). Tačno!</p>
    </div>
  </details>

  <!-- Step 3 -->
  <div class="card step-card step-blue">
    <div class="card-title"><span class="badge badge-blue">3</span> Odredimo \(g(x)\)</div>
    <p>Dato je:</p>
    <div class="math-block">
      \[ g(f(x) - 2) = 2x + 1 \]
    </div>
    <p>Prvo izračunamo šta je argument funkcije \(g\). Znamo da je \(f(x) = 2x - 5\), pa:</p>
    <div class="math-block">
      \[ f(x) - 2 = (2x - 5) - 2 = 2x - 7 \]
    </div>
    <p>Uvodimo <span class="highlight">smenu</span> \(u = 2x - 7\), odakle je \(x = \dfrac{u + 7}{2}\). Zamenom u desnu stranu:</p>
    <div class="math-block">
      \[ g(u) = 2 \cdot \frac{u + 7}{2} + 1 \]
    </div>
    <p>Sređujemo:</p>
    <div class="math-block">
      \[ g(u) = (u + 7) + 1 = u + 8 \]
    </div>
    <p>Vraćamo oznaku \(x\):</p>
    <div class="math-block">
      \[ \boxed{g(x) = x + 8} \]
    </div>
  </div>

  <!-- Step 4 -->
  <div class="card step-card step-pink">
    <div class="card-title"><span class="badge badge-pink">4</span> Odredimo inverznu funkciju \(g^{-1}(x)\)</div>
    <p>Polazimo od \(y = g(x) = x + 8\). Da bismo našli inverznu funkciju, izrazimo \(x\) preko \(y\):</p>
    <div class="math-block">
      \[ y = x + 8 \]
    </div>
    <div class="math-block">
      \[ x = y - 8 \]
    </div>
    <p>Zamenimo oznake (\(x \leftrightarrow y\)):</p>
    <div class="math-block">
      \[ \boxed{g^{-1}(x) = x - 8} \]
    </div>
  </div>

  <!-- Checkpoint 2 -->
  <details style="margin: 15px 0;">
    <summary><strong>Proveri sebe:</strong> Da li važi \(g(g^{-1}(5)) = 5\)?</summary>
    <div class="theory-content">
      <p>\(g^{-1}(5) = 5 - 8 = -3\). Sada: \(g(-3) = -3 + 8 = 5\). Tačno, inverzna funkcija „poništava" dejstvo funkcije \(g\).</p>
    </div>
  </details>

  <!-- Step 5 -->
  <div class="card step-card step-green">
    <div class="card-title"><span class="badge badge-green">5</span> Izračunajmo \(g^{-1}(f(0))\)</div>
    <p>Iz koraka 2 znamo da je \(f(0) = -5\). Sada primenjujemo inverznu funkciju \(g^{-1}\):</p>
    <div class="math-block">
      \[ g^{-1}(f(0)) = g^{-1}(-5) \]
    </div>
    <p>Zamenom u formulu iz koraka 4:</p>
    <div class="math-block">
      \[ g^{-1}(-5) = -5 - 8 = -13 \]
    </div>
    <p>Dakle:</p>
    <div class="math-block">
      \[ \boxed{g^{-1}(f(0)) = -13} \]
    </div>
  </div>

  <!-- Checkpoint 3 -->
  <details style="margin: 15px 0;">
    <summary><strong>Proveri sebe:</strong> Ako je \(g^{-1}(f(0)) = -13\), da li važi \(g(-13) = f(0)\)?</summary>
    <div class="theory-content">
      <p>\(g(-13) = -13 + 8 = -5\) i \(f(0) = -5\). Da, \(g(-13) = f(0) = -5\). Ovo potvrđuje naš rezultat!</p>
    </div>
  </details>

  <!-- Key Insight -->
  <div class="insight-box">
    <div class="card-title"><span class="badge badge-purple">&#128161;</span> Ključni uvid</div>
    <p>
      Ceo zadatak se svodi na <span class="highlight">smenu promenljive</span>: iz funkcionalne jednačine oblika
      \(f(\text{nešto}) = \text{izraz}\) izvlačimo eksplicitni oblik funkcije tako što „nešto" proglasimo
      novom promenljivom. Kada jednom imamo \(f(x) = 2x - 5\) i \(g(x) = x + 8\), ostatak je rutinski račun.
    </p>
    <div class="math-block" style="text-align: center; margin-top: 12px;">
      \[ g^{-1}(f(0)) = g^{-1}(-5) = -5 - 8 = \color{#4ade80}{-13} \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-card">
    <div class="label">Konačan odgovor</div>
    <div class="answer">\(g^{-1}(f(0)) = -13\)</div>
    <div class="final-answer-options">
      <span class="final-option">(A) \(-10\)</span>
      <span class="final-option">(B) \(-3\)</span>
      <span class="final-option">(C) \(-8\)</span>
      <span class="final-option correct">(D) \(-13\)</span>
      <span class="final-option">(E) \(-5\)</span>
    </div>
    <p class="verification-note">
      <strong>Verifikacija:</strong> \(g(-13) = -13 + 8 = -5 = f(0)\). Inverzna funkcija daje tačan rezultat.
    </p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfalls-card">
    <div class="card-title"><span class="badge badge-pink">&#9888;</span> Česte greške</div>
    <ul>
      <li><strong>Pogrešna smena za \(f(x)\):</strong> Česta greška je da se \(f(x+2) = 2x - 1\) zameni sa
        \(f(x) = 2x - 1\) (tj. da se zaboravi da argument nije \(x\) nego \(x + 2\)). Rezultat bi bio
        \(f(0) = -1\) umesto tačnog \(f(0) = -5\).</li>
      <li><strong>Zaboraviti inverznu funkciju:</strong> Neki učenici izračunaju \(g(f(0))\) umesto \(g^{-1}(f(0))\).
        To bi dalo \(g(-5) = -5 + 8 = 3\), što nije među ponuđenim odgovorima.</li>
      <li><strong>Odgovor (E) kao zamka:</strong> Vrednost \(-5\) je \(f(0)\), ne \(g^{-1}(f(0))\). Ko ne završi
        račun do kraja, može pogrešno izabrati ovaj odgovor.</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <div class="card-title"><span class="badge badge-purple">&#127942;</span> Dodatni izazov</div>
    <p>Koristeći iste funkcije \(f(x) = 2x - 5\) i \(g(x) = x + 8\), odredi vrednost izraza \(f^{-1}(g(0))\).</p>
    <details style="margin: 15px 0 0; background: transparent; border: none; padding: 0;">
      <summary style="color: #a78bfa; font-size: 0.95rem;">Prikaži nagoveštaj</summary>
      <div class="theory-content" style="margin-top: 8px;">
        <p>Prvo nađi \(f^{-1}(x)\) iz \(y = 2x - 5\), tj. \(x = \frac{y+5}{2}\). Zatim izračunaj \(g(0) = 8\) i primeni
          \(f^{-1}(8) = \frac{8 + 5}{2} = 6{,}5\).</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('graphCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  const xMin = -16, xMax = 6;
  const yMin = -16, yMax = 16;

  function toCanvasX(x) { return (x - xMin) / (xMax - xMin) * W; }
  function toCanvasY(y) { return H - (y - yMin) / (yMax - yMin) * H; }

  // Background
  ctx.fillStyle = '#0f172a';
  ctx.fillRect(0, 0, W, H);

  // Grid
  ctx.strokeStyle = '#1e293b';
  ctx.lineWidth = 1;
  for (let x = Math.ceil(xMin); x <= xMax; x += 2) {
    ctx.beginPath();
    ctx.moveTo(toCanvasX(x), 0);
    ctx.lineTo(toCanvasX(x), H);
    ctx.stroke();
  }
  for (let y = Math.ceil(yMin); y <= yMax; y += 2) {
    ctx.beginPath();
    ctx.moveTo(0, toCanvasY(y));
    ctx.lineTo(W, toCanvasY(y));
    ctx.stroke();
  }

  // Axes
  ctx.strokeStyle = '#475569';
  ctx.lineWidth = 1.5;
  ctx.beginPath();
  ctx.moveTo(0, toCanvasY(0));
  ctx.lineTo(W, toCanvasY(0));
  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(toCanvasX(0), 0);
  ctx.lineTo(toCanvasX(0), H);
  ctx.stroke();

  // Axis labels
  ctx.fillStyle = '#64748b';
  ctx.font = '11px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'center';
  for (let x = Math.ceil(xMin); x <= xMax; x += 2) {
    if (x === 0) continue;
    ctx.fillText(x, toCanvasX(x), toCanvasY(0) + 14);
  }
  ctx.textAlign = 'left';
  for (let y = Math.ceil(yMin); y <= yMax; y += 4) {
    if (y === 0) continue;
    ctx.fillText(y, toCanvasX(0) + 5, toCanvasY(y) + 4);
  }

  // Draw functions
  function drawLine(fn, color, dashPattern) {
    ctx.strokeStyle = color;
    ctx.lineWidth = 2.5;
    if (dashPattern) ctx.setLineDash(dashPattern);
    else ctx.setLineDash([]);
    ctx.beginPath();
    let first = true;
    const step = (xMax - xMin) / 600;
    for (let x = xMin; x <= xMax; x += step) {
      const y = fn(x);
      if (y < yMin - 2 || y > yMax + 2) {
        first = true;
        continue;
      }
      const cx = toCanvasX(x);
      const cy = toCanvasY(y);
      if (first) {
        ctx.moveTo(cx, cy);
        first = false;
      } else {
        ctx.lineTo(cx, cy);
      }
    }
    ctx.stroke();
    ctx.setLineDash([]);
  }

  // f(x) = 2x - 5
  drawLine(function(x) { return 2 * x - 5; }, '#60a5fa', null);

  // g(x) = x + 8
  drawLine(function(x) { return x + 8; }, '#a78bfa', null);

  // g^(-1)(x) = x - 8
  drawLine(function(x) { return x - 8; }, '#34d399', [6, 4]);

  // y = x line (for symmetry of g and g^(-1))
  ctx.strokeStyle = 'rgba(148,163,184,0.25)';
  ctx.lineWidth = 1;
  ctx.setLineDash([3, 3]);
  ctx.beginPath();
  ctx.moveTo(toCanvasX(xMin), toCanvasY(xMin));
  ctx.lineTo(toCanvasX(xMax), toCanvasY(xMax));
  ctx.stroke();
  ctx.setLineDash([]);

  // Mark key points
  function drawPoint(x, y, color, labelText, offsetX, offsetY) {
    const cx = toCanvasX(x);
    const cy = toCanvasY(y);

    // Glow
    const grad = ctx.createRadialGradient(cx, cy, 0, cx, cy, 14);
    grad.addColorStop(0, color + '66');
    grad.addColorStop(1, 'transparent');
    ctx.fillStyle = grad;
    ctx.beginPath();
    ctx.arc(cx, cy, 14, 0, 2 * Math.PI);
    ctx.fill();

    // Point
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.arc(cx, cy, 5, 0, 2 * Math.PI);
    ctx.fill();

    // Outline
    ctx.strokeStyle = '#0f172a';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.arc(cx, cy, 5, 0, 2 * Math.PI);
    ctx.stroke();

    // Label
    if (labelText) {
      ctx.fillStyle = color;
      ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText(labelText, cx + (offsetX || 8), cy + (offsetY || -8));
    }
  }

  // f(0) = -5: point on f
  drawPoint(0, -5, '#60a5fa', 'f(0) = -5', 8, -8);

  // g^(-1)(-5) = -13: point on g^(-1)
  drawPoint(-5, -13, '#34d399', 'g\u207B\u00B9(-5) = -13', 8, 16);

  // g(-13) = -5: point on g (verification)
  drawPoint(-13, -5, '#a78bfa', 'g(-13) = -5', 8, -8);

  // Arrow from f(0) to g^(-1)(f(0))
  ctx.strokeStyle = '#f472b6';
  ctx.lineWidth = 1.5;
  ctx.setLineDash([4, 3]);

  // Horizontal arrow from (0, -5) to (-5, -5)
  ctx.beginPath();
  ctx.moveTo(toCanvasX(0), toCanvasY(-5));
  ctx.lineTo(toCanvasX(-5), toCanvasY(-5));
  ctx.stroke();

  // Vertical arrow from (-5, -5) to (-5, -13)
  ctx.beginPath();
  ctx.moveTo(toCanvasX(-5), toCanvasY(-5));
  ctx.lineTo(toCanvasX(-5), toCanvasY(-13));
  ctx.stroke();
  ctx.setLineDash([]);

  // Arrowhead at (-5, -13)
  const ax = toCanvasX(-5);
  const ay = toCanvasY(-13);
  ctx.fillStyle = '#f472b6';
  ctx.beginPath();
  ctx.moveTo(ax, ay);
  ctx.lineTo(ax - 4, ay - 10);
  ctx.lineTo(ax + 4, ay - 10);
  ctx.closePath();
  ctx.fill();

  // Legend
  const legendX = W - 190;
  const legendY = 20;
  ctx.fillStyle = 'rgba(15,23,42,0.85)';
  ctx.fillRect(legendX - 10, legendY - 6, 195, 92);
  ctx.strokeStyle = '#334155';
  ctx.lineWidth = 1;
  ctx.strokeRect(legendX - 10, legendY - 6, 195, 92);

  ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'left';

  // f(x) legend
  ctx.fillStyle = '#60a5fa';
  ctx.beginPath();
  ctx.moveTo(legendX, legendY + 8);
  ctx.lineTo(legendX + 20, legendY + 8);
  ctx.strokeStyle = '#60a5fa';
  ctx.lineWidth = 2.5;
  ctx.stroke();
  ctx.fillText('f(x) = 2x - 5', legendX + 26, legendY + 12);

  // g(x) legend
  ctx.fillStyle = '#a78bfa';
  ctx.beginPath();
  ctx.moveTo(legendX, legendY + 30);
  ctx.lineTo(legendX + 20, legendY + 30);
  ctx.strokeStyle = '#a78bfa';
  ctx.lineWidth = 2.5;
  ctx.stroke();
  ctx.fillText('g(x) = x + 8', legendX + 26, legendY + 34);

  // g^(-1)(x) legend
  ctx.setLineDash([6, 4]);
  ctx.beginPath();
  ctx.moveTo(legendX, legendY + 52);
  ctx.lineTo(legendX + 20, legendY + 52);
  ctx.strokeStyle = '#34d399';
  ctx.lineWidth = 2.5;
  ctx.stroke();
  ctx.setLineDash([]);
  ctx.fillStyle = '#34d399';
  ctx.fillText('g\u207B\u00B9(x) = x - 8', legendX + 26, legendY + 56);

  // y=x legend
  ctx.setLineDash([3, 3]);
  ctx.beginPath();
  ctx.moveTo(legendX, legendY + 74);
  ctx.lineTo(legendX + 20, legendY + 74);
  ctx.strokeStyle = 'rgba(148,163,184,0.5)';
  ctx.lineWidth = 1;
  ctx.stroke();
  ctx.setLineDash([]);
  ctx.fillStyle = '#94a3b8';
  ctx.font = '11px Segoe UI, system-ui, sans-serif';
  ctx.fillText('y = x (osa simetrije)', legendX + 26, legendY + 78);

  // Axis labels
  ctx.fillStyle = '#64748b';
  ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'center';
  ctx.fillText('x', W - 12, toCanvasY(0) - 8);
  ctx.fillText('y', toCanvasX(0) + 14, 14);
})();
</script>

<script>
(() => {
  // Step card click highlight
  const stepCards = document.querySelectorAll('.step-card');
  stepCards.forEach(function(card) {
    card.addEventListener('click', function() {
      stepCards.forEach(function(c) { c.classList.remove('active'); });
      card.classList.add('active');
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{"title":"Kompozicija i inverzna funkcija","subject":"math","unit":"algebra","topic_tags":["kompozicija funkcija","inverzna funkcija","smena promenljive","linearne funkcije"]}
BRAINSPARK_META-->