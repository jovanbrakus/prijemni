<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pojednostavljivanje racionalnog algebarskog izraza</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
Problem: Za |a| != |b|, izraz
  ( (a^2+b^2)/(a^2+ab+b^2) : (a^4-b^4)/(a^3-b^3) )^(-2) : (a^2-b^2)
je identicki jednak izrazu:

Options:
(A) 2/(a-b)
(B) a+b
(C) (a+b)/(a-b)
(D) (a-b)/(a+b)
(E) 2/(a+b)

Step 1: Inner division (the ":" is division):
(a^2+b^2)/(a^2+ab+b^2) : (a^4-b^4)/(a^3-b^3)
= (a^2+b^2)/(a^2+ab+b^2) * (a^3-b^3)/(a^4-b^4)

Step 2: Factor the polynomials:
  a^3 - b^3 = (a-b)(a^2+ab+b^2)        [difference of cubes]
  a^4 - b^4 = (a^2-b^2)(a^2+b^2)        [difference of squares]
             = (a-b)(a+b)(a^2+b^2)

Step 3: Substitute factored forms:
= (a^2+b^2)/(a^2+ab+b^2) * (a-b)(a^2+ab+b^2) / ((a-b)(a+b)(a^2+b^2))

Cancel common factors:
  - (a^2+b^2) cancels top and bottom
  - (a^2+ab+b^2) cancels top and bottom
  - (a-b) cancels top and bottom

Result of inner division = 1/(a+b)

Step 4: Raise to power -2:
(1/(a+b))^(-2) = (a+b)^2

Step 5: Divide by (a^2-b^2):
(a+b)^2 : (a^2-b^2)
= (a+b)^2 / (a^2-b^2)
= (a+b)^2 / ((a-b)(a+b))
= (a+b) / (a-b)

Answer: (C) (a+b)/(a-b)

Verification with specific values:
Let a = 3, b = 1 (|a| != |b| satisfied)
  Inner fraction: (9+1)/(9+3+1) : (81-1)/(27-1) = 10/13 : 80/26 = 10/13 * 26/80 = 260/1040 = 1/4
  1/4 = 1/(a+b) = 1/(3+1) = 1/4 CHECK
  (1/4)^(-2) = 16
  16 / (9-1) = 16/8 = 2
  (a+b)/(a-b) = 4/2 = 2 CHECK

Condition |a| != |b| ensures a != b, a != -b, so (a-b) != 0 and (a+b) != 0,
and also a^2 != b^2, so a^4 != b^4.
</script>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 900px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.1rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 6px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px 28px;
  margin-bottom: 24px;
}

.card-title {
  font-size: 1.2rem;
  font-weight: 700;
  color: #60a5fa;
  margin-bottom: 14px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.3rem;
}

.problem-text {
  font-size: 1.1rem;
  line-height: 1.8;
  background: #172033;
  border-left: 4px solid #60a5fa;
  padding: 18px 22px;
  border-radius: 0 10px 10px 0;
  margin-bottom: 16px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 18px;
  text-align: center;
  min-width: 80px;
}

.given-item .label {
  font-size: 0.85rem;
  color: #94a3b8;
  margin-bottom: 2px;
}

.given-item .value {
  font-size: 1.05rem;
  color: #e2e8f0;
}

.plan-text {
  color: #a78bfa;
  font-size: 1.05rem;
  font-style: italic;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  padding: 10px 0;
  user-select: none;
  list-style: none;
  display: flex;
  align-items: center;
  gap: 8px;
}

details summary::before {
  content: '>';
  display: inline-block;
  transition: transform 0.2s;
  font-family: monospace;
  font-size: 1.1rem;
}

details[open] summary::before {
  transform: rotate(90deg);
}

details .inner {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid #334155;
}

.step {
  border-left: 3px solid #334155;
  padding: 14px 0 14px 22px;
  margin-left: 12px;
  position: relative;
  margin-bottom: 4px;
  cursor: pointer;
  transition: border-color 0.2s;
}

.step:hover, .step.active {
  border-left-color: #4ade80;
}

.step::before {
  content: '';
  position: absolute;
  left: -7px;
  top: 18px;
  width: 12px;
  height: 12px;
  background: #60a5fa;
  border-radius: 50%;
  border: 2px solid #0f172a;
}

.step:last-of-type {
  border-left-color: transparent;
}

.step-label {
  font-weight: 700;
  color: #f472b6;
  font-size: 1.05rem;
  margin-bottom: 6px;
}

.step-math {
  background: rgba(167, 139, 250, 0.1);
  border: 1px solid rgba(167, 139, 250, 0.25);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 10px 0;
  text-align: center;
  font-size: 1.05rem;
}

.checkpoint {
  background: rgba(167, 139, 250, 0.08);
  border: 1px dashed #a78bfa;
  border-radius: 10px;
  padding: 12px 18px;
  margin: 15px 0;
  font-size: 0.95rem;
}

.checkpoint details {
  margin: 0;
}

.checkpoint details summary {
  color: #34d399;
  padding: 4px 0;
  font-size: 0.95rem;
}

.checkpoint .inner {
  border-top-color: rgba(52, 211, 153, 0.3);
}

.insight-box {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.12), rgba(167, 139, 250, 0.12));
  border: 1px solid rgba(167, 139, 250, 0.35);
  border-radius: 14px;
  padding: 24px 28px;
  margin-bottom: 24px;
}

.insight-box .card-title {
  color: #a78bfa;
}

.insight-formula {
  text-align: center;
  font-size: 1.3rem;
  color: #4ade80;
  font-weight: 700;
  margin: 16px 0;
}

.final-answer-box {
  background: linear-gradient(135deg, rgba(52, 211, 153, 0.1), rgba(74, 222, 128, 0.06));
  border: 2px solid #34d399;
  border-radius: 14px;
  padding: 28px;
  text-align: center;
  margin-bottom: 24px;
}

.final-answer-box .answer-label {
  font-size: 0.9rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: #34d399;
  font-weight: 700;
  margin-bottom: 12px;
}

.final-answer-box .answer-value {
  color: #4ade80;
  font-size: 1.8rem;
  font-weight: 800;
}

.final-answer-box .answer-detail {
  color: #94a3b8;
  font-size: 1rem;
  margin-top: 12px;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin-top: 18px;
}

.final-option {
  background: rgba(51, 65, 85, 0.5);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 8px 18px;
  font-size: 1rem;
  color: #94a3b8;
}

.final-option.correct {
  background: rgba(52, 211, 153, 0.15);
  border-color: #34d399;
  color: #4ade80;
  font-weight: 700;
}

.pitfall {
  background: rgba(244, 114, 182, 0.08);
  border-left: 4px solid #f472b6;
  border-radius: 0 10px 10px 0;
  padding: 14px 20px;
  margin-bottom: 12px;
}

.pitfall strong {
  color: #f472b6;
}

.challenge-box {
  background: rgba(244, 114, 182, 0.06);
  border: 1px solid rgba(244, 114, 182, 0.25);
  border-radius: 14px;
  padding: 22px 26px;
}

.challenge-box .card-title {
  color: #f472b6;
}

canvas {
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  max-width: 100%;
  touch-action: none;
}

.canvas-caption {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 10px;
  text-align: center;
}

.verification-note {
  background: rgba(52, 211, 153, 0.06);
  border: 1px solid rgba(52, 211, 153, 0.2);
  border-radius: 10px;
  padding: 14px 18px;
  margin-top: 14px;
  font-size: 0.95rem;
  color: #94a3b8;
}

.muted { color: #94a3b8; }
.blue { color: #60a5fa; }
.green { color: #34d399; }
.purple { color: #a78bfa; }
.pink { color: #f472b6; }

@media (max-width: 700px) {
  h1 { font-size: 1.5rem; }
  .container { padding: 10px; }
  .card { padding: 18px 16px; }
  .given-grid { flex-direction: column; }
  .final-options { flex-direction: column; align-items: center; }
  .step { padding-left: 16px; }
  .final-answer-box .answer-value { font-size: 1.4rem; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Pojednostavljivanje racionalnog izraza</h1>
  <p class="subtitle">Algebra — faktorizacija polinoma, razlika kvadrata, razlika i zbir kubova, operacije sa razlomcima</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <div class="card-title"><span class="icon">&#x1F4CB;</span> Postavka zadatka</div>
    <div class="problem-text">
      Za \( |a| \neq |b| \), izraz
      \[ \left(\frac{a^2 + b^2}{a^2 + ab + b^2} : \frac{a^4 - b^4}{a^3 - b^3}\right)^{-2} : (a^2 - b^2) \]
      identicki je jednak izrazu:
    </div>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(\dfrac{2}{a-b}\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(a+b\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(\dfrac{a+b}{a-b}\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(\dfrac{a-b}{a+b}\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(\dfrac{2}{a+b}\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <div class="card-title"><span class="icon">&#x1F3AF;</span> Plan resavanja</div>
    <p class="plan-text">
      Koristicemo faktorizaciju polinoma (razlika kvadrata, razlika kubova, razlika cetvrtih stepeni) da bismo rastavili sve cinioce. Zatim cemo skratiti zajednicke faktore, primeniti negativan eksponent i podeliti sa poslednjim clanom.
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <div class="card-title"><span class="icon">&#x1F4D0;</span> Teorijska podloga</div>
    <details>
      <summary>Kljucne formule i teoreme</summary>
      <div class="inner">
        <ul style="margin: 12px 0 12px 20px; color: #94a3b8;">
          <li><strong style="color:#60a5fa;">Razlika kvadrata:</strong> \( a^2 - b^2 = (a-b)(a+b) \)</li>
          <li style="margin-top:6px;"><strong style="color:#60a5fa;">Razlika kubova:</strong> \( a^3 - b^3 = (a-b)(a^2 + ab + b^2) \)</li>
          <li style="margin-top:6px;"><strong style="color:#60a5fa;">Razlika cetvrtih stepeni:</strong> \( a^4 - b^4 = (a^2 - b^2)(a^2 + b^2) = (a-b)(a+b)(a^2+b^2) \)</li>
          <li style="margin-top:6px;"><strong style="color:#60a5fa;">Deljenje razlomaka:</strong> \( \dfrac{P}{Q} : \dfrac{R}{S} = \dfrac{P}{Q} \cdot \dfrac{S}{R} \)</li>
          <li style="margin-top:6px;"><strong style="color:#60a5fa;">Negativan eksponent:</strong> \( \left(\dfrac{P}{Q}\right)^{-n} = \left(\dfrac{Q}{P}\right)^{n} \)</li>
        </ul>
        <p class="muted">Uslov \( |a| \neq |b| \) garantuje da je \( a \neq b \), \( a \neq -b \), pa su svi imenilaci razliciti od nule.</p>
      </div>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <div class="card-title"><span class="icon">&#x1F4CA;</span> Vizuelni prikaz pojednostavljivanja</div>
    <p class="muted" style="margin-bottom:14px;">Dijagram prikazuje strukturu izraza i kako se faktori skracuju u svakom koraku. Koristite dugmad ispod za navigaciju kroz faze pojednostavljivanja.</p>
    <canvas id="diagram" width="800" height="460"></canvas>
    <div style="display:flex; gap:10px; justify-content:center; margin-top:14px; flex-wrap:wrap;">
      <button id="btn-step0" style="background:#60a5fa; color:#0f172a; border:none; border-radius:8px; padding:8px 16px; font-weight:700; cursor:pointer; font-size:0.9rem;">Polazni izraz</button>
      <button id="btn-step1" style="background:#334155; color:#94a3b8; border:1px solid #475569; border-radius:8px; padding:8px 16px; font-weight:600; cursor:pointer; font-size:0.9rem;">Faktorizacija</button>
      <button id="btn-step2" style="background:#334155; color:#94a3b8; border:1px solid #475569; border-radius:8px; padding:8px 16px; font-weight:600; cursor:pointer; font-size:0.9rem;">Skracivanje</button>
      <button id="btn-step3" style="background:#334155; color:#94a3b8; border:1px solid #475569; border-radius:8px; padding:8px 16px; font-weight:600; cursor:pointer; font-size:0.9rem;">Rezultat</button>
    </div>
    <p class="canvas-caption">Kliknite na dugmad da biste videli svaku fazu transformacije</p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <div class="card-title"><span class="icon">&#x270F;&#xFE0F;</span> Resenje korak po korak</div>

    <!-- Step 1 -->
    <div class="step">
      <div class="step-label">Korak 1: Zapisimo izraz i identifikujmo strukturu</div>
      <p>Polazni izraz ima oblik \(\big(\text{deljenje}\big)^{-2} : (a^2 - b^2)\). Prvo resavamo unutrasnje deljenje u zagradi:</p>
      <div class="step-math">
        \[ \frac{a^2 + b^2}{a^2 + ab + b^2} : \frac{a^4 - b^4}{a^3 - b^3} \]
      </div>
      <p>Deljenje razlomaka pretvaramo u mnozenje sa reciprocnom vrednoscu:</p>
      <div class="step-math">
        \[ = \frac{a^2 + b^2}{a^2 + ab + b^2} \cdot \frac{a^3 - b^3}{a^4 - b^4} \]
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step">
      <div class="step-label">Korak 2: Faktorizujemo \( a^3 - b^3 \)</div>
      <p>Primenimo formulu za razliku kubova:</p>
      <div class="step-math">
        \[ a^3 - b^3 = (a - b)(a^2 + ab + b^2) \]
      </div>
      <p class="muted">Ovo je jedan od kljucnih identiteta koji nam omogucava skracivanje sa imeniocem prvog razlomka.</p>
    </div>

    <!-- Step 3 -->
    <div class="step">
      <div class="step-label">Korak 3: Faktorizujemo \( a^4 - b^4 \)</div>
      <p>Primenimo formulu za razliku kvadrata dva puta:</p>
      <div class="step-math">
        \[ a^4 - b^4 = (a^2)^2 - (b^2)^2 = (a^2 - b^2)(a^2 + b^2) \]
      </div>
      <p>Dalje rastavljamo \( a^2 - b^2 \):</p>
      <div class="step-math">
        \[ a^4 - b^4 = (a - b)(a + b)(a^2 + b^2) \]
      </div>

      <div class="checkpoint">
        <details>
          <summary>Proveri sebe: Koliko faktora ima \( a^4 - b^4 \) posle potpune faktorizacije?</summary>
          <div class="inner">
            <p>Tri faktora: \( (a-b) \), \( (a+b) \) i \( (a^2+b^2) \). Faktor \( a^2 + b^2 \) se ne moze dalje razloziti nad realnim brojevima (jer je uvek pozitivan za \( a, b \) koja nisu oba nula).</p>
          </div>
        </details>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step">
      <div class="step-label">Korak 4: Uvrstimo faktorizovane oblike i skratimo</div>
      <p>Zamenjujemo u izraz iz Koraka 1:</p>
      <div class="step-math">
        \[ \frac{a^2 + b^2}{a^2 + ab + b^2} \cdot \frac{(a-b)(a^2 + ab + b^2)}{(a-b)(a+b)(a^2+b^2)} \]
      </div>
      <p>Sada skracujemo zajednicke faktore u brojiocu i imeniocu:</p>
      <div class="step-math">
        \[ \frac{\cancel{(a^2 + b^2)}}{\cancel{(a^2 + ab + b^2)}} \cdot \frac{\cancel{(a-b)} \cdot \cancel{(a^2 + ab + b^2)}}{\cancel{(a-b)} \cdot (a+b) \cdot \cancel{(a^2+b^2)}} = \frac{1}{a+b} \]
      </div>
      <p class="muted">Skratili smo tri para zajednickih faktora: \( (a^2+b^2) \), \( (a^2+ab+b^2) \) i \( (a-b) \).</p>
    </div>

    <!-- Step 5 -->
    <div class="step">
      <div class="step-label">Korak 5: Primenimo eksponent \( -2 \)</div>
      <p>Unutrasnji razlomak je \( \dfrac{1}{a+b} \). Sada ga stepenujemo sa \( -2 \):</p>
      <div class="step-math">
        \[ \left(\frac{1}{a+b}\right)^{-2} = (a+b)^2 \]
      </div>
      <p class="muted">Negativan eksponent obrce razlomak: \( \left(\frac{1}{a+b}\right)^{-2} = \left(\frac{a+b}{1}\right)^{2} = (a+b)^2 \).</p>

      <div class="checkpoint">
        <details>
          <summary>Proveri sebe: Sta je \( (1/x)^{-2} \) za \( x = 3 \)?</summary>
          <div class="inner">
            <p>\( (1/3)^{-2} = 3^2 = 9 \). Dakle, negativan eksponent obrce osnovu, a zatim stepenuje.</p>
          </div>
        </details>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step">
      <div class="step-label">Korak 6: Podelimo sa \( (a^2 - b^2) \)</div>
      <p>Preostaje nam da izracunamo:</p>
      <div class="step-math">
        \[ (a+b)^2 : (a^2 - b^2) = \frac{(a+b)^2}{a^2 - b^2} \]
      </div>
      <p>Faktorizujemo imenilac:</p>
      <div class="step-math">
        \[ = \frac{(a+b)^2}{(a-b)(a+b)} \]
      </div>
      <p>Skratimo jedan faktor \( (a+b) \):</p>
      <div class="step-math">
        \[ = \frac{a+b}{a-b} \]
      </div>

      <div class="checkpoint">
        <details>
          <summary>Verifikacija: Proverimo za \( a = 3 \), \( b = 1 \)</summary>
          <div class="inner">
            <p>Unutrasnje deljenje: \( \frac{9+1}{9+3+1} : \frac{81-1}{27-1} = \frac{10}{13} : \frac{80}{26} = \frac{10}{13} \cdot \frac{26}{80} = \frac{260}{1040} = \frac{1}{4} \)</p>
            <p style="margin-top:4px;">Stepenovanje: \( (1/4)^{-2} = 16 \)</p>
            <p style="margin-top:4px;">Konacno deljenje: \( 16 : (9-1) = 16/8 = 2 \)</p>
            <p style="margin-top:6px;">Ocekivano: \( \frac{a+b}{a-b} = \frac{3+1}{3-1} = \frac{4}{2} = 2 \;\checkmark \)</p>
          </div>
        </details>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <div class="card-title"><span class="icon">&#x1F4A1;</span> Kljucni uvid</div>
    <p>Kljuc ovog zadatka lezi u prepoznavanju da se <strong>svi faktori u unutrasnjem deljenju skrate</strong>, ostavljajuci samo \( \frac{1}{a+b} \). Formule za razliku kubova i razliku cetvrtih stepeni su tu specijalno odabrane da se medusobno poniste sa ostalim ciniocima.</p>
    <div class="insight-formula">
      \[ \left(\frac{a^2+b^2}{a^2+ab+b^2} \cdot \frac{(a-b)(a^2+ab+b^2)}{(a-b)(a+b)(a^2+b^2)}\right)^{-2} : (a^2-b^2) = \frac{a+b}{a-b} \]
    </div>
    <p class="muted">Nastavni savet: u ovakvim zadacima, <strong style="color:#e2e8f0;">uvek prvo faktorizujte sve polinome</strong> pre nego sto pocnete da racunate. Skracivanje je mnogo lakse kad su svi cinioci vidljivi.</p>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <div class="answer-label">Konacan odgovor</div>
    <div class="answer-value">\( \dfrac{a+b}{a-b} \)</div>
    <div class="final-options">
      <div class="final-option">A) \(\frac{2}{a-b}\)</div>
      <div class="final-option">B) \(a+b\)</div>
      <div class="final-option correct">C) \(\frac{a+b}{a-b}\)</div>
      <div class="final-option">D) \(\frac{a-b}{a+b}\)</div>
      <div class="final-option">E) \(\frac{2}{a+b}\)</div>
    </div>
    <div class="verification-note">
      <strong style="color:#34d399;">Provera:</strong> Za \( a = 3, b = 1 \): polazni izraz daje \( 2 \), a \( \frac{a+b}{a-b} = \frac{4}{2} = 2 \;\checkmark \). Za \( a = 5, b = 2 \): polazni izraz daje \( \frac{7}{3} \), a \( \frac{a+b}{a-b} = \frac{7}{3} \;\checkmark \)
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <div class="card-title"><span class="icon">&#x26A0;&#xFE0F;</span> Ceste greske</div>
    <div class="pitfall">
      <strong>Zaboravljanje negativnog eksponenta:</strong>
      Mnogi studenti izracunaju unutrasnje deljenje ispravno (\( \frac{1}{a+b} \)), ali zatim pogreše eksponent \( -2 \) i dobiju \( \frac{1}{(a+b)^2} \) umesto \( (a+b)^2 \). Negativan eksponent <em>obrce</em> razlomak pre stepenovanja!
    </div>
    <div class="pitfall">
      <strong>Pogresna faktorizacija \( a^4 - b^4 \):</strong>
      Cesta greska je faktorizovati \( a^4 - b^4 \) samo kao \( (a^2-b^2)(a^2+b^2) \) i ne nastaviti dalje. Za potpuno skracivanje potrebno je i \( a^2 - b^2 = (a-b)(a+b) \), cime dobijamo sva tri faktora.
    </div>
  </div>

  <!-- Optional Challenge -->
  <div class="card">
    <div class="challenge-box">
      <div class="card-title"><span class="icon">&#x1F3C6;</span> Dodatni izazov</div>
      <p>Sta bi bio rezultat da je eksponent bio \( -1 \) umesto \( -2 \), tj. da racunamo:</p>
      <p style="text-align:center; margin:10px 0;">\[ \left(\frac{a^2 + b^2}{a^2 + ab + b^2} : \frac{a^4 - b^4}{a^3 - b^3}\right)^{-1} : (a^2 - b^2) \]</p>
      <details>
        <summary>Pogledaj nagovestaj</summary>
        <div class="inner">
          <p>Unutrasnje deljenje i dalje daje \( \frac{1}{a+b} \). Sa eksponentom \( -1 \) dobijamo \( (a+b) \). Zatim delimo sa \( (a^2 - b^2) = (a-b)(a+b) \):</p>
          <p>\( \frac{a+b}{(a-b)(a+b)} = \frac{1}{a-b} \)</p>
          <p class="muted" style="margin-top:6px;">Nijedan od ponudjenih odgovora ne bi odgovarao! To ilustruje koliko je vazan tacan eksponent.</p>
        </div>
      </details>
    </div>
  </div>

</div>

<script>
(() => {
  // Step click highlighting
  const steps = document.querySelectorAll('.step');
  steps.forEach(function(step) {
    step.addEventListener('click', function() {
      steps.forEach(function(s) { s.classList.remove('active'); });
      step.classList.add('active');
    });
  });

  // Canvas visualization
  const canvas = document.getElementById('diagram');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  let currentStep = 0;

  const buttons = [
    document.getElementById('btn-step0'),
    document.getElementById('btn-step1'),
    document.getElementById('btn-step2'),
    document.getElementById('btn-step3')
  ];

  function updateButtons() {
    buttons.forEach(function(btn, i) {
      if (i === currentStep) {
        btn.style.background = '#60a5fa';
        btn.style.color = '#0f172a';
        btn.style.border = 'none';
      } else {
        btn.style.background = '#334155';
        btn.style.color = '#94a3b8';
        btn.style.border = '1px solid #475569';
      }
    });
  }

  function roundRect(x, y, w, h, r) {
    ctx.beginPath();
    ctx.moveTo(x + r, y);
    ctx.lineTo(x + w - r, y);
    ctx.quadraticCurveTo(x + w, y, x + w, y + r);
    ctx.lineTo(x + w, y + h - r);
    ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
    ctx.lineTo(x + r, y + h);
    ctx.quadraticCurveTo(x, y + h, x, y + h - r);
    ctx.lineTo(x, y + r);
    ctx.quadraticCurveTo(x, y, x + r, y);
    ctx.closePath();
  }

  function drawBox(x, y, w, h, fillColor, borderColor, text, textColor, fontSize) {
    roundRect(x, y, w, h, 8);
    ctx.fillStyle = fillColor;
    ctx.fill();
    ctx.strokeStyle = borderColor;
    ctx.lineWidth = 1.5;
    ctx.stroke();

    ctx.fillStyle = textColor || '#e2e8f0';
    ctx.font = (fontSize || 14) + 'px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';

    var lines = text.split('\n');
    var lineH = (fontSize || 14) * 1.4;
    var startY = y + h / 2 - (lines.length - 1) * lineH / 2;
    for (var i = 0; i < lines.length; i++) {
      ctx.fillText(lines[i], x + w / 2, startY + i * lineH);
    }
  }

  function drawArrow(x1, y1, x2, y2, color) {
    ctx.strokeStyle = color || '#475569';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.stroke();

    var angle = Math.atan2(y2 - y1, x2 - x1);
    var headLen = 10;
    ctx.beginPath();
    ctx.moveTo(x2, y2);
    ctx.lineTo(x2 - headLen * Math.cos(angle - 0.4), y2 - headLen * Math.sin(angle - 0.4));
    ctx.lineTo(x2 - headLen * Math.cos(angle + 0.4), y2 - headLen * Math.sin(angle + 0.4));
    ctx.closePath();
    ctx.fillStyle = color || '#475569';
    ctx.fill();
  }

  function drawCancelLine(x, y, w, h, color) {
    ctx.strokeStyle = color || '#f472b6';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(x - 4, y + h + 2);
    ctx.lineTo(x + w + 4, y - 2);
    ctx.stroke();
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Title
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';

    if (currentStep === 0) {
      ctx.fillText('Polazni izraz', W / 2, 15);

      // Main expression structure
      drawBox(60, 60, 300, 50, 'rgba(96,165,250,0.1)', '#60a5fa', '(a\u00B2+b\u00B2) / (a\u00B2+ab+b\u00B2)', '#60a5fa', 15);
      ctx.fillStyle = '#e2e8f0';
      ctx.font = 'bold 20px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText(':', 390, 85);

      drawBox(420, 60, 300, 50, 'rgba(167,139,250,0.1)', '#a78bfa', '(a\u2074\u2212b\u2074) / (a\u00B3\u2212b\u00B3)', '#a78bfa', 15);

      // Exponent
      ctx.fillStyle = '#f472b6';
      ctx.font = 'bold 18px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText('(\u2026)\u207B\u00B2', 335, 140);

      drawArrow(W / 2, 155, W / 2, 185, '#475569');

      ctx.fillStyle = '#e2e8f0';
      ctx.font = 'bold 18px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(':', W / 2, 200);

      drawBox(280, 220, 240, 45, 'rgba(52,211,153,0.1)', '#34d399', 'a\u00B2 \u2212 b\u00B2', '#34d399', 16);

      // Explanation
      ctx.fillStyle = '#94a3b8';
      ctx.font = '13px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('Struktura: (deljenje u zagradi)\u207B\u00B2 : (razlika kvadrata)', W / 2, 300);
      ctx.fillText('Prvo resavamo unutrasnje deljenje, zatim stepenujemo, pa delimo.', W / 2, 320);

      // Note about condition
      drawBox(200, 360, 400, 50, 'rgba(244,114,182,0.06)', 'rgba(244,114,182,0.3)', '|a| \u2260 |b| \u21D2 a\u2260b, a\u2260\u2212b \u21D2 svi imeniloci \u2260 0', '#f472b6', 13);

    } else if (currentStep === 1) {
      ctx.fillText('Faktorizacija svih polinoma', W / 2, 12);

      // a^3 - b^3
      drawBox(40, 50, 180, 40, 'rgba(167,139,250,0.1)', '#a78bfa', 'a\u00B3 \u2212 b\u00B3', '#a78bfa', 14);
      drawArrow(220, 70, 260, 70, '#a78bfa');
      drawBox(265, 50, 200, 40, 'rgba(167,139,250,0.15)', '#a78bfa', '(a\u2212b)(a\u00B2+ab+b\u00B2)', '#e2e8f0', 13);

      ctx.fillStyle = '#94a3b8';
      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText('razlika kubova', 490, 74);

      // a^4 - b^4
      drawBox(40, 120, 180, 40, 'rgba(96,165,250,0.1)', '#60a5fa', 'a\u2074 \u2212 b\u2074', '#60a5fa', 14);
      drawArrow(220, 140, 260, 140, '#60a5fa');
      drawBox(265, 120, 260, 40, 'rgba(96,165,250,0.15)', '#60a5fa', '(a\u2212b)(a+b)(a\u00B2+b\u00B2)', '#e2e8f0', 13);

      ctx.fillStyle = '#94a3b8';
      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText('dvostruka razlika kvadrata', 548, 144);

      // a^2 - b^2
      drawBox(40, 190, 180, 40, 'rgba(52,211,153,0.1)', '#34d399', 'a\u00B2 \u2212 b\u00B2', '#34d399', 14);
      drawArrow(220, 210, 260, 210, '#34d399');
      drawBox(265, 190, 200, 40, 'rgba(52,211,153,0.15)', '#34d399', '(a\u2212b)(a+b)', '#e2e8f0', 13);

      ctx.fillStyle = '#94a3b8';
      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText('razlika kvadrata', 490, 214);

      // Full factored expression
      drawArrow(W / 2, 250, W / 2, 280, '#475569');

      ctx.fillStyle = '#e2e8f0';
      ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('Posle faktorizacije, unutrasnje deljenje postaje:', W / 2, 298);

      // Numerator line
      drawBox(80, 320, 160, 36, 'rgba(96,165,250,0.12)', '#334155', '(a\u00B2+b\u00B2)', '#60a5fa', 14);
      ctx.fillStyle = '#94a3b8';
      ctx.font = '18px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('\u00D7', 265, 338);
      drawBox(290, 320, 160, 36, 'rgba(167,139,250,0.12)', '#334155', '(a\u2212b)', '#a78bfa', 14);
      ctx.fillStyle = '#94a3b8';
      ctx.font = '18px Segoe UI, system-ui, sans-serif';
      ctx.fillText('\u00D7', 475, 338);
      drawBox(500, 320, 200, 36, 'rgba(167,139,250,0.12)', '#334155', '(a\u00B2+ab+b\u00B2)', '#a78bfa', 14);

      // Divider line
      ctx.strokeStyle = '#e2e8f0';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(80, 370);
      ctx.lineTo(700, 370);
      ctx.stroke();

      // Denominator line
      drawBox(40, 384, 200, 36, 'rgba(96,165,250,0.12)', '#334155', '(a\u00B2+ab+b\u00B2)', '#60a5fa', 14);
      ctx.fillStyle = '#94a3b8';
      ctx.font = '18px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('\u00D7', 265, 402);
      drawBox(290, 384, 130, 36, 'rgba(96,165,250,0.12)', '#334155', '(a\u2212b)', '#60a5fa', 14);
      ctx.fillStyle = '#94a3b8';
      ctx.font = '18px Segoe UI, system-ui, sans-serif';
      ctx.fillText('\u00D7', 445, 402);
      drawBox(470, 384, 130, 36, 'rgba(96,165,250,0.12)', '#334155', '(a+b)', '#60a5fa', 14);
      ctx.fillStyle = '#94a3b8';
      ctx.font = '18px Segoe UI, system-ui, sans-serif';
      ctx.fillText('\u00D7', 625, 402);
      drawBox(650, 384, 130, 36, 'rgba(96,165,250,0.12)', '#334155', '(a\u00B2+b\u00B2)', '#60a5fa', 14);

    } else if (currentStep === 2) {
      ctx.fillText('Skracivanje zajednickih faktora', W / 2, 12);

      // Numerator
      drawBox(80, 55, 160, 36, 'rgba(96,165,250,0.12)', '#334155', '(a\u00B2+b\u00B2)', '#60a5fa', 14);
      ctx.fillStyle = '#94a3b8';
      ctx.font = '18px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('\u00D7', 265, 73);
      drawBox(290, 55, 160, 36, 'rgba(167,139,250,0.12)', '#334155', '(a\u2212b)', '#a78bfa', 14);
      ctx.fillStyle = '#94a3b8';
      ctx.font = '18px Segoe UI, system-ui, sans-serif';
      ctx.fillText('\u00D7', 475, 73);
      drawBox(500, 55, 200, 36, 'rgba(167,139,250,0.12)', '#334155', '(a\u00B2+ab+b\u00B2)', '#a78bfa', 14);

      // Divider
      ctx.strokeStyle = '#e2e8f0';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(80, 105);
      ctx.lineTo(700, 105);
      ctx.stroke();

      // Denominator
      drawBox(40, 118, 200, 36, 'rgba(96,165,250,0.12)', '#334155', '(a\u00B2+ab+b\u00B2)', '#60a5fa', 14);
      ctx.fillStyle = '#94a3b8';
      ctx.font = '18px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('\u00D7', 265, 136);
      drawBox(290, 118, 130, 36, 'rgba(96,165,250,0.12)', '#334155', '(a\u2212b)', '#60a5fa', 14);
      ctx.fillStyle = '#94a3b8';
      ctx.font = '18px Segoe UI, system-ui, sans-serif';
      ctx.fillText('\u00D7', 445, 136);
      drawBox(470, 118, 130, 36, 'rgba(96,165,250,0.12)', '#334155', '(a+b)', '#60a5fa', 14);
      ctx.fillStyle = '#94a3b8';
      ctx.font = '18px Segoe UI, system-ui, sans-serif';
      ctx.fillText('\u00D7', 625, 136);
      drawBox(650, 118, 130, 36, 'rgba(96,165,250,0.12)', '#334155', '(a\u00B2+b\u00B2)', '#60a5fa', 14);

      // Cancel lines
      drawCancelLine(80, 55, 160, 36, '#f472b6');     // (a^2+b^2) num
      drawCancelLine(650, 118, 130, 36, '#f472b6');    // (a^2+b^2) den

      drawCancelLine(290, 55, 160, 36, '#34d399');     // (a-b) num
      drawCancelLine(290, 118, 130, 36, '#34d399');    // (a-b) den

      drawCancelLine(500, 55, 200, 36, '#60a5fa');     // (a^2+ab+b^2) num
      drawCancelLine(40, 118, 200, 36, '#60a5fa');     // (a^2+ab+b^2) den

      // Arrow to result
      drawArrow(W / 2, 175, W / 2, 210, '#4ade80');

      // Result
      drawBox(300, 220, 200, 50, 'rgba(74,222,128,0.15)', '#4ade80', '1 / (a+b)', '#4ade80', 18);

      // Legend
      ctx.fillStyle = '#94a3b8';
      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';

      ctx.strokeStyle = '#f472b6';
      ctx.lineWidth = 2.5;
      ctx.beginPath(); ctx.moveTo(100, 310); ctx.lineTo(140, 310); ctx.stroke();
      ctx.fillStyle = '#f472b6';
      ctx.fillText('skracen (a\u00B2+b\u00B2)', 150, 314);

      ctx.strokeStyle = '#34d399';
      ctx.beginPath(); ctx.moveTo(100, 335); ctx.lineTo(140, 335); ctx.stroke();
      ctx.fillStyle = '#34d399';
      ctx.fillText('skracen (a\u2212b)', 150, 339);

      ctx.strokeStyle = '#60a5fa';
      ctx.beginPath(); ctx.moveTo(100, 360); ctx.lineTo(140, 360); ctx.stroke();
      ctx.fillStyle = '#60a5fa';
      ctx.fillText('skracen (a\u00B2+ab+b\u00B2)', 150, 364);

      // Next steps preview
      drawArrow(W / 2, 290, W / 2, 395, '#475569');

      ctx.fillStyle = '#e2e8f0';
      ctx.font = '13px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('Sledece: stepenovanje sa \u22122 i deljenje sa (a\u00B2\u2212b\u00B2)', W / 2, 420);

    } else if (currentStep === 3) {
      ctx.fillText('Zavrsna transformacija', W / 2, 12);

      // Step A: inner result
      drawBox(300, 50, 200, 44, 'rgba(167,139,250,0.12)', '#a78bfa', '1 / (a+b)', '#a78bfa', 16);

      ctx.fillStyle = '#f472b6';
      ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('stepenujemo sa \u22122', W / 2, 118);

      drawArrow(W / 2, 126, W / 2, 148, '#f472b6');

      // Step B: after exponent
      drawBox(300, 155, 200, 44, 'rgba(96,165,250,0.12)', '#60a5fa', '(a+b)\u00B2', '#60a5fa', 18);

      ctx.fillStyle = '#94a3b8';
      ctx.font = '13px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText('[1/(a+b)]\u207B\u00B2 = (a+b)\u00B2', 520, 180);

      ctx.fillStyle = '#e2e8f0';
      ctx.font = 'bold 22px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(':', W / 2, 228);

      drawBox(300, 244, 200, 44, 'rgba(52,211,153,0.12)', '#34d399', '(a\u2212b)(a+b)', '#34d399', 16);

      ctx.fillStyle = '#94a3b8';
      ctx.font = '13px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText('a\u00B2\u2212b\u00B2 = (a\u2212b)(a+b)', 520, 270);

      drawArrow(W / 2, 302, W / 2, 334, '#4ade80');

      // Fraction visualization
      ctx.fillStyle = '#e2e8f0';
      ctx.font = '13px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('skracujemo jedan faktor (a+b)', W / 2, 352);

      // Final result big
      drawBox(240, 370, 320, 70, 'rgba(74,222,128,0.15)', '#4ade80', '(a+b) / (a\u2212b)', '#4ade80', 26);

      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('Odgovor: (C)', W / 2, 456);
    }
  }

  draw();

  buttons.forEach(function(btn, i) {
    if (!btn) return;
    btn.addEventListener('click', function() {
      currentStep = i;
      updateButtons();
      draw();
    });
  });

  // Responsive
  var resizeTimeout;
  window.addEventListener('resize', function() {
    clearTimeout(resizeTimeout);
    resizeTimeout = setTimeout(function() {
      var container = canvas.parentElement;
      var maxW = container.clientWidth - 56;
      if (maxW < 800) {
        canvas.style.width = maxW + 'px';
        canvas.style.height = (maxW * 460 / 800) + 'px';
      }
    }, 100);
  });

  var containerEl = canvas.parentElement;
  var maxW = containerEl.clientWidth - 56;
  if (maxW < 800) {
    canvas.style.width = maxW + 'px';
    canvas.style.height = (maxW * 460 / 800) + 'px';
  }
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Pojednostavljivanje racionalnog algebarskog izraza sa stepenima",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["faktorizacija polinoma", "razlika kvadrata", "razlika kubova", "racionalni izrazi", "negativan eksponent"]
}
BRAINSPARK_META-->