<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stepenovanje kompleksnog broja</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
  Problem: z = (5 - (3+7i)/(1+i))^2022, i^2 = -1. Find z + conjugate(z).

  Step 1: Simplify (3+7i)/(1+i)
    Multiply numerator and denominator by conjugate of denominator: (1-i)
    Numerator: (3+7i)(1-i) = 3*1 + 3*(-i) + 7i*1 + 7i*(-i)
             = 3 - 3i + 7i - 7i^2
             = 3 + 4i - 7*(-1)
             = 3 + 4i + 7
             = 10 + 4i
    Denominator: (1+i)(1-i) = 1^2 - i^2 = 1 - (-1) = 2
    Result: (10+4i)/2 = 5 + 2i

  Step 2: Compute the base of the exponent
    5 - (5+2i) = 5 - 5 - 2i = -2i

  Step 3: Compute z = (-2i)^2022
    z = (-2i)^2022 = (-2)^2022 * i^2022

    (-2)^2022: Since 2022 is even, (-2)^2022 = 2^2022

    i^2022: Divide 2022 by 4: 2022 = 4*505 + 2
    So i^2022 = i^2 = -1

    Therefore: z = 2^2022 * (-1) = -2^2022

  Step 4: Compute z + conjugate(z)
    Since z = -2^2022 is a real number, conjugate(z) = z = -2^2022
    z + conjugate(z) = -2^2022 + (-2^2022) = -2 * 2^2022 = -2^(2022+1) = -2^2023

  Answer: A) -2^2023

  Verification:
    - z is real because (-2i)^2022 evaluates to a real number
    - For any real z: z + conj(z) = 2z = 2*(-2^2022) = -2^2023
    - This matches answer option A.

  Alternative check using polar form:
    -2i has modulus 2 and argument -pi/2 (i.e., 3pi/2)
    (-2i)^2022 = 2^2022 * (cos(2022*(-pi/2)) + i*sin(2022*(-pi/2)))
    2022*(-pi/2) = -1011*pi
    -1011*pi: Since 1011 is odd, -1011*pi = -pi (mod 2pi), so angle = pi
    cos(pi) = -1, sin(pi) = 0
    z = 2^2022 * (-1 + 0i) = -2^2022 (real, confirmed)
    z + conj(z) = 2*(-2^2022) = -2^2023 ‚úì
</script>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
}

.card-title {
  font-size: 1.3rem;
  color: #60a5fa;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.4rem;
}

.problem-text {
  font-size: 1.15rem;
  line-height: 1.8;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 18px;
}

.given-item {
  background: rgba(51, 65, 85, 0.6);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 20px;
  text-align: center;
  min-width: 90px;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.05rem;
  font-weight: 600;
}

.highlight-box {
  background: rgba(96, 165, 250, 0.1);
  border: 1px solid rgba(96, 165, 250, 0.3);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 16px 0;
  font-family: 'Courier New', monospace;
  font-size: 1.1rem;
  text-align: center;
}

.plan-text {
  color: #a78bfa;
  font-size: 1.05rem;
  font-style: italic;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 8px 0;
  user-select: none;
}

details summary:hover {
  color: #93bbfc;
}

details .detail-content {
  padding: 12px 16px;
  background: rgba(30, 41, 59, 0.7);
  border-left: 3px solid #60a5fa;
  border-radius: 0 8px 8px 0;
  margin-top: 8px;
}

.step {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  align-items: flex-start;
  padding: 8px;
  border-left: 3px solid transparent;
  border-radius: 8px;
  transition: all 0.2s ease;
  cursor: pointer;
}

.step:hover {
  background: rgba(96, 165, 250, 0.04);
  border-left-color: #4ade80;
}

.step-badge {
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  font-weight: 700;
  font-size: 0.85rem;
  min-width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-title {
  font-weight: 600;
  color: #f472b6;
  margin-bottom: 6px;
  font-size: 1.05rem;
}

.step-math {
  background: rgba(167, 139, 250, 0.1);
  border: 1px solid rgba(167, 139, 250, 0.25);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 10px 0;
  text-align: center;
  font-size: 1.05rem;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.12), rgba(167, 139, 250, 0.12));
  border: 1px solid rgba(167, 139, 250, 0.35);
  border-radius: 16px;
  padding: 24px 28px;
  margin-bottom: 24px;
}

.insight-box .card-title {
  color: #a78bfa;
}

.final-answer-box {
  background: rgba(52, 211, 153, 0.08);
  border: 2px solid #34d399;
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin-bottom: 24px;
}

.final-answer-box .answer-label {
  color: #94a3b8;
  font-size: 1rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 12px;
}

.final-answer-box .answer-value {
  color: #4ade80;
  font-size: 2rem;
  font-weight: 700;
}

.final-answer-box .final-option {
  color: #34d399;
  font-size: 1.2rem;
  margin-top: 8px;
}

.final-options-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-top: 18px;
}

.final-opt {
  background: rgba(51, 65, 85, 0.6);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 20px;
  font-size: 1rem;
  transition: all 0.3s ease;
}

.final-opt.correct {
  background: rgba(52, 211, 153, 0.15);
  border-color: #34d399;
  color: #34d399;
  font-weight: 600;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 16px;
  padding-top: 12px;
  border-top: 1px solid #334155;
}

.pitfall {
  display: flex;
  gap: 12px;
  align-items: flex-start;
  margin-bottom: 12px;
}

.pitfall-icon {
  color: #f472b6;
  font-weight: 700;
  font-size: 1.2rem;
  flex-shrink: 0;
}

.challenge-box {
  background: rgba(244, 114, 182, 0.08);
  border: 1px solid rgba(244, 114, 182, 0.3);
  border-radius: 16px;
  padding: 24px 28px;
}

.challenge-box .card-title {
  color: #f472b6;
}

canvas {
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  max-width: 100%;
  touch-action: none;
}

.canvas-wrapper {
  text-align: center;
}

.canvas-caption {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 10px;
  text-align: center;
}

.checkpoint details summary {
  color: #34d399;
  font-size: 0.95rem;
}

.checkpoint details .detail-content {
  border-left-color: #34d399;
}

@media (max-width: 700px) {
  h1 {
    font-size: 1.6rem;
  }
  .card {
    padding: 18px;
  }
  .given-grid {
    flex-direction: column;
  }
  .final-options-grid {
    flex-direction: column;
    align-items: center;
  }
  .step {
    flex-direction: column;
    gap: 8px;
  }
  .step-badge {
    align-self: flex-start;
  }
  .final-answer-box .answer-value {
    font-size: 1.5rem;
  }
}
</style>
</head>
<body>
<div class="container">

  <!-- Naslov -->
  <h1>Stepenovanje kompleksnog broja</h1>
  <p class="subtitle">Kompleksni brojevi -- racionalizacija, stepenovanje i konjugovanje</p>

  <!-- Tekst zadatka -->
  <div class="card problem-statement">
    <div class="card-title"><span class="icon">üìã</span> Tekst zadatka</div>
    <div class="problem-text">
      <p>Ako je \( z = \left(5 - \dfrac{3 + 7i}{1 + i}\right)^{2022} \), \( i^2 = -1 \), onda je \( z + \overline{z} \) jednako:</p>
      <div class="given-grid">
        <div class="given-item answer-option" data-option="A">
          <div class="label">(A)</div>
          <div class="value">\( -2^{2023} \)</div>
        </div>
        <div class="given-item answer-option" data-option="B">
          <div class="label">(B)</div>
          <div class="value">\( 2^{2023} \)</div>
        </div>
        <div class="given-item answer-option" data-option="C">
          <div class="label">(C)</div>
          <div class="value">\( -2^{2022} \)</div>
        </div>
        <div class="given-item answer-option" data-option="D">
          <div class="label">(D)</div>
          <div class="value">\( 2^{2022} \)</div>
        </div>
        <div class="given-item answer-option" data-option="E">
          <div class="label">(E)</div>
          <div class="value">\( -2^{2021} \)</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <div class="card-title"><span class="icon">üéØ</span> Plan resavanja</div>
    <p class="plan-text">
      Prvo cemo racionalizovati razlomak \( \frac{3+7i}{1+i} \) mnozenjem sa konjugovanim imeniocem, zatim pojednostaviti osnovu stepena, izracunati \( z \) koristeci svojstva stepena imaginarne jedinice, i na kraju primeniti osobinu konjugovanja.
    </p>
  </div>

  <!-- Podsetnik iz teorije -->
  <div class="card">
    <div class="card-title"><span class="icon">üìö</span> Podsetnik iz teorije</div>
    <details>
      <summary>Kljucne formule i teoreme (klikni da otvoris)</summary>
      <div class="detail-content">
        <p><strong>Racionalizacija razlomka kompleksnih brojeva:</strong></p>
        <div class="step-math">
          \[ \frac{a + bi}{c + di} = \frac{(a + bi)(c - di)}{(c + di)(c - di)} = \frac{(a + bi)(c - di)}{c^2 + d^2} \]
        </div>
        <p style="margin-top: 12px;"><strong>Ciklicnost stepena imaginarne jedinice:</strong></p>
        <div class="step-math">
          \[ i^0 = 1, \quad i^1 = i, \quad i^2 = -1, \quad i^3 = -i, \quad i^4 = 1, \quad \ldots \]
        </div>
        <p style="margin-top: 8px;">Stepen \( i^n \) zavisi samo od ostatka pri deljenju \( n \) sa 4.</p>
        <p style="margin-top: 12px;"><strong>Konjugovani kompleksni broj:</strong></p>
        <div class="step-math">
          \[ \text{Ako je } z = a + bi, \text{ onda je } \overline{z} = a - bi \]
        </div>
        <p style="margin-top: 8px;">Vazna posledica: \( z + \overline{z} = 2a = 2 \cdot \text{Re}(z) \). Ako je \( z \) realan broj, onda \( z + \overline{z} = 2z \).</p>
      </div>
    </details>
  </div>

  <!-- Vizuelni prikaz -->
  <div class="card">
    <div class="card-title"><span class="icon">üìä</span> Vizuelni prikaz</div>
    <div class="canvas-wrapper">
      <canvas id="diagram" width="700" height="420"></canvas>
    </div>
    <p class="canvas-caption">Kompleksna ravan: prikaz racionalizacije i stepenovanja broja \( -2i \)</p>
  </div>

  <!-- Resenje korak po korak -->
  <div class="card">
    <div class="card-title"><span class="icon">üî¢</span> Resenje korak po korak</div>

    <!-- Korak 1 -->
    <div class="step">
      <div class="step-badge">1</div>
      <div class="step-content">
        <div class="step-title">Racionalizujemo razlomak \( \frac{3 + 7i}{1 + i} \)</div>
        <p>Da bismo uklonili imaginarnu jedinicu iz imenioca, mnozimo i brojilac i imenilac konjugovanim kompleksom imenioca, tj. sa \( 1 - i \):</p>
        <div class="step-math">
          \[ \frac{3 + 7i}{1 + i} = \frac{(3 + 7i)(1 - i)}{(1 + i)(1 - i)} \]
        </div>
      </div>
    </div>

    <!-- Korak 2 -->
    <div class="step">
      <div class="step-badge">2</div>
      <div class="step-content">
        <div class="step-title">Racunamo imenilac</div>
        <p>Koristimo formulu za razliku kvadrata \( (1+i)(1-i) = 1^2 - i^2 \):</p>
        <div class="step-math">
          \[ (1 + i)(1 - i) = 1 - i^2 = 1 - (-1) = 2 \]
        </div>
      </div>
    </div>

    <!-- Korak 3 -->
    <div class="step">
      <div class="step-badge">3</div>
      <div class="step-content">
        <div class="step-title">Racunamo brojilac</div>
        <p>Mnozimo \( (3 + 7i)(1 - i) \) koristeci distributivnost:</p>
        <div class="step-math">
          \[ (3 + 7i)(1 - i) = 3 \cdot 1 + 3 \cdot (-i) + 7i \cdot 1 + 7i \cdot (-i) \]
        </div>
        <div class="step-math">
          \[ = 3 - 3i + 7i - 7i^2 \]
        </div>
        <p>Posto je \( i^2 = -1 \), imamo \( -7i^2 = -7 \cdot (-1) = 7 \):</p>
        <div class="step-math">
          \[ = 3 + 7 + (-3i + 7i) = 10 + 4i \]
        </div>

        <div class="checkpoint">
          <details>
            <summary>Proveri sebe: Koliko je \( (3+7i)(1-i) \)?</summary>
            <div class="detail-content">
              Realni deo: \( 3 \cdot 1 + 7 \cdot 1 = 10 \) (jer \( -7i^2 = +7 \)). Imaginarni deo: \( -3 + 7 = 4 \). Dakle, rezultat je \( 10 + 4i \).
            </div>
          </details>
        </div>
      </div>
    </div>

    <!-- Korak 4 -->
    <div class="step">
      <div class="step-badge">4</div>
      <div class="step-content">
        <div class="step-title">Dobijamo vrednost razlomka</div>
        <p>Sada delimo brojilac sa imeniocem:</p>
        <div class="step-math">
          \[ \frac{3 + 7i}{1 + i} = \frac{10 + 4i}{2} = 5 + 2i \]
        </div>
      </div>
    </div>

    <!-- Korak 5 -->
    <div class="step">
      <div class="step-badge">5</div>
      <div class="step-content">
        <div class="step-title">Racunamo osnovu stepena</div>
        <p>Uvrstimo dobijenu vrednost u izraz za \( z \):</p>
        <div class="step-math">
          \[ 5 - \frac{3 + 7i}{1 + i} = 5 - (5 + 2i) = 5 - 5 - 2i = -2i \]
        </div>
        <p>Osnova stepena je cisto imaginaran broj \( -2i \).</p>

        <div class="checkpoint">
          <details>
            <summary>Proveri sebe: Zasto je rezultat bas cisto imaginaran?</summary>
            <div class="detail-content">
              Zato sto se realni deo razlomka \( \frac{3+7i}{1+i} = 5 + 2i \) tacno poklopio sa brojem 5 od kojeg oduzimamo. Realni delovi se poniste: \( 5 - 5 = 0 \), pa ostaje samo imaginarni deo \( -2i \).
            </div>
          </details>
        </div>
      </div>
    </div>

    <!-- Korak 6 -->
    <div class="step">
      <div class="step-badge">6</div>
      <div class="step-content">
        <div class="step-title">Stepenujemo: \( z = (-2i)^{2022} \)</div>
        <p>Razdvojimo osnovu na realni faktor i imaginarnu jedinicu:</p>
        <div class="step-math">
          \[ (-2i)^{2022} = (-2)^{2022} \cdot i^{2022} \]
        </div>
        <p>Posto je eksponent 2022 paran broj:</p>
        <div class="step-math">
          \[ (-2)^{2022} = 2^{2022} \]
        </div>
      </div>
    </div>

    <!-- Korak 7 -->
    <div class="step">
      <div class="step-badge">7</div>
      <div class="step-content">
        <div class="step-title">Odredjujemo \( i^{2022} \) pomocu ciklicnosti</div>
        <p>Stepeni od \( i \) se ponavljaju sa periodom 4. Delimo eksponent sa 4:</p>
        <div class="step-math">
          \[ 2022 = 4 \cdot 505 + 2 \]
        </div>
        <p>Ostatak je 2, pa:</p>
        <div class="step-math">
          \[ i^{2022} = i^2 = -1 \]
        </div>
      </div>
    </div>

    <!-- Korak 8 -->
    <div class="step">
      <div class="step-badge">8</div>
      <div class="step-content">
        <div class="step-title">Nalazimo vrednost \( z \)</div>
        <p>Spajamo rezultate iz prethodna dva koraka:</p>
        <div class="step-math">
          \[ z = 2^{2022} \cdot (-1) = -2^{2022} \]
        </div>
        <p>Broj \( z \) je <strong>realan</strong> (nema imaginarni deo).</p>

        <div class="checkpoint">
          <details>
            <summary>Proveri sebe: Da li je \( z \) zaista realan broj?</summary>
            <div class="detail-content">
              Da! Posto je \( i^{2022} = -1 \) (realan broj), a i \( 2^{2022} \) je realan, proizvod je takodje realan: \( z = -2^{2022} \in \mathbb{R} \). Imaginarni deo je nula.
            </div>
          </details>
        </div>
      </div>
    </div>

    <!-- Korak 9 -->
    <div class="step">
      <div class="step-badge">9</div>
      <div class="step-content">
        <div class="step-title">Racunamo \( z + \overline{z} \)</div>
        <p>Za svaki kompleksni broj vazi \( z + \overline{z} = 2 \cdot \text{Re}(z) \). Posto je \( z = -2^{2022} \) realan broj, njegov konjugovani je jednak njemu samom: \( \overline{z} = z \).</p>
        <div class="step-math">
          \[ z + \overline{z} = -2^{2022} + (-2^{2022}) = 2 \cdot (-2^{2022}) \]
        </div>
        <div class="step-math">
          \[ = -2 \cdot 2^{2022} = -2^{1} \cdot 2^{2022} = -2^{2023} \]
        </div>
      </div>
    </div>
  </div>

  <!-- Kljucni uvid -->
  <div class="insight-box">
    <div class="card-title"><span class="icon">üí°</span> Kljucni uvid</div>
    <p>Ceo zadatak se svodi na jednu elegantnu cinjenicu: nakon racionalizacije, osnova stepena postaje \( -2i \), sto je cisto imaginaran broj. Stepenovanje \( (-2i)^{2022} \) daje <strong>realan</strong> broj jer \( i^{2022} = i^2 = -1 \). A za svaki realan \( z \) vazi \( z + \overline{z} = 2z \), sto nam odmah daje konacni rezultat. Trik je u prepoznavanju ciklicnosti stepena imaginarne jedinice!</p>
  </div>

  <!-- Konacan odgovor -->
  <div class="final-answer-box">
    <div class="answer-label">Konacan odgovor</div>
    <div class="answer-value">\( z + \overline{z} = -2^{2023} \)</div>
    <div class="final-option">Tacan odgovor je A) \( -2^{2023} \)</div>
    <div class="final-options-grid">
      <div class="final-opt correct">A) \( -2^{2023} \)</div>
      <div class="final-opt">B) \( 2^{2023} \)</div>
      <div class="final-opt">C) \( -2^{2022} \)</div>
      <div class="final-opt">D) \( 2^{2022} \)</div>
      <div class="final-opt">E) \( -2^{2021} \)</div>
    </div>
    <div class="verification-note">
      <strong>Provera:</strong> Posto je \( z = -2^{2022} \) realan, \( z + \overline{z} = 2z = 2 \cdot (-2^{2022}) = -2^{2023} \). Rezultat je negativan sto ima smisla jer je \( z \) negativan realan broj.
    </div>
  </div>

  <!-- Ceste greske -->
  <div class="card">
    <div class="card-title"><span class="icon">‚ö†Ô∏è</span> Ceste greske</div>
    <div class="pitfall">
      <span class="pitfall-icon">‚úó</span>
      <p><strong>Greska pri racionalizaciji:</strong> Mnogi ucenici pogresno izmno≈æe brojilac i imenilac, zaboravljajuci da \( i^2 = -1 \) menja predznak. Na primer, \( 7i \cdot (-i) = -7i^2 = +7 \), a ne \( -7 \).</p>
    </div>
    <div class="pitfall">
      <span class="pitfall-icon">‚úó</span>
      <p><strong>Pogresno odredjivanje \( i^{2022} \):</strong> Ako se pogresno izracuna ostatak pri deljenju 2022 sa 4 (npr. dobije se 0 umesto 2), rezultat ce biti \( z = +2^{2022} \) umesto \( -2^{2022} \), sto dovodi do pogresnog odgovora \( 2^{2023} \) (opcija B).</p>
    </div>
  </div>

  <!-- Dodatni izazov -->
  <div class="challenge-box">
    <div class="card-title"><span class="icon">üèÜ</span> Dodatni izazov</div>
    <p>Ako umesto eksponenta 2022 imamo 2023, koliko bi iznosilo \( z + \overline{z} \) u tom slucaju?</p>
    <details>
      <summary>Pogledaj nagove≈°taj</summary>
      <div class="detail-content">
        <p>Razmisli: \( i^{2023} = i^3 = -i \), pa bi \( (-2i)^{2023} = (-2)^{2023} \cdot i^{2023} \). Posto je 2023 neparan, \( (-2)^{2023} = -2^{2023} \). Dakle \( z = -2^{2023} \cdot (-i) = 2^{2023} \cdot i \), sto je cisto imaginaran broj. Sta onda vazi za \( z + \overline{z} \)?</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('diagram');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  const originX = W / 2;
  const originY = H / 2;
  const scale = 55;

  function toCanvas(x, y) {
    return { x: originX + x * scale, y: originY - y * scale };
  }

  function drawArrow(fromX, fromY, toX, toY, color, lineWidth) {
    const headLen = 10;
    const dx = toX - fromX;
    const dy = toY - fromY;
    const angle = Math.atan2(dy, dx);

    ctx.strokeStyle = color;
    ctx.lineWidth = lineWidth || 2;
    ctx.beginPath();
    ctx.moveTo(fromX, fromY);
    ctx.lineTo(toX, toY);
    ctx.stroke();

    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.moveTo(toX, toY);
    ctx.lineTo(toX - headLen * Math.cos(angle - Math.PI / 6), toY - headLen * Math.sin(angle - Math.PI / 6));
    ctx.lineTo(toX - headLen * Math.cos(angle + Math.PI / 6), toY - headLen * Math.sin(angle + Math.PI / 6));
    ctx.closePath();
    ctx.fill();
  }

  function drawPoint(x, y, color, label, labelOffsetX, labelOffsetY) {
    const p = toCanvas(x, y);
    ctx.beginPath();
    ctx.arc(p.x, p.y, 6, 0, Math.PI * 2);
    ctx.fillStyle = color;
    ctx.fill();
    ctx.strokeStyle = '#0f172a';
    ctx.lineWidth = 2;
    ctx.stroke();

    ctx.fillStyle = color;
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText(label, p.x + (labelOffsetX || 0), p.y + (labelOffsetY || -14));
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Grid
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (let gx = -6; gx <= 6; gx++) {
      const p = toCanvas(gx, 0);
      ctx.beginPath();
      ctx.moveTo(p.x, 0);
      ctx.lineTo(p.x, H);
      ctx.stroke();
    }
    for (let gy = -3; gy <= 3; gy++) {
      const p = toCanvas(0, gy);
      ctx.beginPath();
      ctx.moveTo(0, p.y);
      ctx.lineTo(W, p.y);
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(0, originY);
    ctx.lineTo(W, originY);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(originX, 0);
    ctx.lineTo(originX, H);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Re', W - 20, originY - 10);
    ctx.fillText('Im', originX + 18, 18);

    // Axis tick labels
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    for (let t = -5; t <= 5; t++) {
      if (t === 0) continue;
      const p = toCanvas(t, 0);
      ctx.fillText(String(t), p.x, originY + 18);
    }
    for (let t = -3; t <= 3; t++) {
      if (t === 0) continue;
      const p = toCanvas(0, t);
      ctx.textAlign = 'right';
      ctx.fillText(t + 'i', originX - 10, p.y + 4);
    }
    ctx.textAlign = 'center';
    ctx.fillText('0', originX - 10, originY + 18);

    // Point: (3+7i)/(1+i) = 5+2i
    drawPoint(5, 2, '#60a5fa', '5 + 2i', 0, -14);

    // Point: 5 on real axis
    drawPoint(5, 0, '#94a3b8', '5', 14, -10);

    // Dashed line from 5 to 5+2i (the fraction value)
    const p5 = toCanvas(5, 0);
    const p52i = toCanvas(5, 2);
    ctx.strokeStyle = 'rgba(96, 165, 250, 0.4)';
    ctx.lineWidth = 1;
    ctx.setLineDash([4, 4]);
    ctx.beginPath();
    ctx.moveTo(p5.x, p5.y);
    ctx.lineTo(p52i.x, p52i.y);
    ctx.stroke();
    ctx.setLineDash([]);

    // Arrow from 5+2i to origin representing subtraction: 5 - (5+2i) = -2i
    const pOrigin = toCanvas(0, 0);
    const pMinus2i = toCanvas(0, -2);

    // Draw vector from 5 to -2i (the subtraction 5 - (5+2i))
    ctx.strokeStyle = 'rgba(167, 139, 250, 0.5)';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.moveTo(p52i.x, p52i.y);
    ctx.lineTo(pMinus2i.x, pMinus2i.y);
    ctx.stroke();
    ctx.setLineDash([]);

    // Label the subtraction arrow
    ctx.fillStyle = '#a78bfa';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('5 - (5+2i)', toCanvas(2.5, 0.2).x, toCanvas(2.5, 0.2).y);

    // Point: -2i (the base)
    drawPoint(0, -2, '#f472b6', '-2i', -28, 4);

    // Circle of radius 2 centered at origin (|‚àí2i| = 2)
    ctx.strokeStyle = 'rgba(244, 114, 182, 0.25)';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([3, 5]);
    ctx.beginPath();
    ctx.arc(originX, originY, 2 * scale, 0, Math.PI * 2);
    ctx.stroke();
    ctx.setLineDash([]);

    // Label |z| = 2
    ctx.fillStyle = '#f472b6';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('|-2i| = 2', toCanvas(1.5, -1.7).x, toCanvas(1.5, -1.7).y);

    // Arrow from origin to -2i
    drawArrow(originX, originY, pMinus2i.x, pMinus2i.y, '#f472b6', 2.5);

    // Show the cycle: i^0=1, i^1=i, i^2=-1, i^3=-i
    const cyclePoints = [
      { x: 1, y: 0, label: 'i\u2070 = 1' },
      { x: 0, y: 1, label: 'i\u00B9 = i' },
      { x: -1, y: 0, label: 'i\u00B2 = -1' },
      { x: 0, y: -1, label: 'i\u00B3 = -i' }
    ];

    // Small circle for unit circle
    ctx.strokeStyle = 'rgba(52, 211, 153, 0.2)';
    ctx.lineWidth = 1;
    ctx.setLineDash([2, 4]);
    ctx.beginPath();
    ctx.arc(originX, originY, scale, 0, Math.PI * 2);
    ctx.stroke();
    ctx.setLineDash([]);

    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    cyclePoints.forEach(function(pt) {
      var pp = toCanvas(pt.x, pt.y);
      ctx.beginPath();
      ctx.arc(pp.x, pp.y, 3, 0, Math.PI * 2);
      ctx.fillStyle = '#34d399';
      ctx.fill();

      ctx.fillStyle = 'rgba(52, 211, 153, 0.7)';
      ctx.textAlign = pt.x >= 0 ? 'left' : 'right';
      var ox = pt.x >= 0 ? 8 : -8;
      var oy = pt.y >= 0 ? -8 : 14;
      ctx.fillText(pt.label, pp.x + ox, pp.y + oy);
    });

    // Result annotation
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('(-2i)\u00B2\u2070\u00B2\u00B2 = 2\u00B2\u2070\u00B2\u00B2 \u00B7 i\u00B2\u2070\u00B2\u00B2 = 2\u00B2\u2070\u00B2\u00B2 \u00B7 (-1) = -2\u00B2\u2070\u00B2\u00B2', W / 2, H - 22);

    // Second line annotation
    ctx.fillStyle = '#34d399';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.fillText('z + z\u0305 = 2 \u00B7 (-2\u00B2\u2070\u00B2\u00B2) = -2\u00B2\u2070\u00B2\u00B3', W / 2, H - 4);
  }

  draw();

  let resizeTimeout;
  window.addEventListener('resize', function() {
    clearTimeout(resizeTimeout);
    resizeTimeout = setTimeout(draw, 100);
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Stepenovanje kompleksnog broja i konjugovanje",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["kompleksni brojevi", "stepenovanje", "imaginarna jedinica", "konjugovani kompleksni broj", "racionalizacija"]
}
BRAINSPARK_META-->