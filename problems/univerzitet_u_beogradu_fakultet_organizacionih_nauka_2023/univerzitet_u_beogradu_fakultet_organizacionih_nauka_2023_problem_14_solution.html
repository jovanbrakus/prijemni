<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tangenta kružnice — zbir parametara</title>
<script type="text/info" id="logic-scratchpad">
Problem: Find the sum of all values of real parameter p for which y = 2x + p is tangent to
x^2 + 2x + y^2 - 4y = 10.

Step 1: Rewrite circle in standard form.
x^2 + 2x + y^2 - 4y = 10
(x^2 + 2x + 1) - 1 + (y^2 - 4y + 4) - 4 = 10
(x + 1)^2 + (y - 2)^2 = 15

Center C(-1, 2), radius r = sqrt(15).

Step 2: Line y = 2x + p => 2x - y + p = 0
General form: Ax + By + C = 0 where A=2, B=-1, C=p.

Step 3: Tangent condition: distance from center to line = radius.
d(C, l) = |2*(-1) + (-1)*2 + p| / sqrt(4 + 1)
         = |-2 - 2 + p| / sqrt(5)
         = |p - 4| / sqrt(5)

Set equal to sqrt(15):
|p - 4| / sqrt(5) = sqrt(15)
|p - 4| = sqrt(15) * sqrt(5) = sqrt(75) = 5*sqrt(3)

p - 4 = 5*sqrt(3)  =>  p1 = 4 + 5*sqrt(3)
p - 4 = -5*sqrt(3) =>  p2 = 4 - 5*sqrt(3)

Step 4: Sum = p1 + p2 = (4 + 5*sqrt(3)) + (4 - 5*sqrt(3)) = 8

Answer: A) 8

Verification by Vieta's formulas:
Squaring |p - 4|^2 = 75 gives (p-4)^2 = 75, i.e. p^2 - 8p + 16 = 75,
so p^2 - 8p - 59 = 0. By Vieta's: p1 + p2 = 8. Confirmed.
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 10px;
}
h1 {
  font-size: 2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
}
.subtitle {
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 28px;
}
.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 22px 26px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}
.card h2 {
  color: #60a5fa;
  font-size: 1.3rem;
  margin-bottom: 14px;
}
.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}
.given-item {
  background: rgba(56,189,248,0.06);
  border: 1px solid rgba(56,189,248,0.13);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
}
.given-item .label {
  font-size: 0.82rem;
  color: #94a3b8;
  margin-bottom: 4px;
}
.given-item .value {
  font-size: 1.05rem;
  color: #e2e8f0;
  font-weight: 600;
}
.plan-card {
  border-left: 3px solid #a78bfa;
}
.plan-card h2 { color: #a78bfa; }
details {
  margin: 15px 0;
}
details summary {
  cursor: pointer;
  font-weight: 600;
  color: #60a5fa;
  padding: 8px 0;
  user-select: none;
}
details summary:hover { color: #93c5fd; }
.theory-list {
  list-style: none;
  padding: 10px 0;
}
.theory-list li {
  padding: 8px 0 8px 16px;
  border-left: 2px solid #334155;
  margin-bottom: 6px;
  color: #cbd5e1;
}
.theory-list li strong { color: #a78bfa; }
.canvas-card {
  text-align: center;
}
.canvas-card canvas {
  border-radius: 10px;
  border: 1px solid #334155;
  max-width: 100%;
  touch-action: none;
}
.canvas-hint {
  color: #64748b;
  font-size: 0.82rem;
  margin-top: 8px;
}
.step-container {
  display: flex;
  gap: 16px;
  margin-bottom: 18px;
  padding: 14px 18px;
  border-radius: 12px;
  border-left: 3px solid transparent;
  transition: border-color 0.2s, background 0.2s;
  cursor: pointer;
}
.step-container:hover, .step-container.active {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}
.step-badge {
  min-width: 32px;
  height: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  color: #0f172a;
  flex-shrink: 0;
  margin-top: 2px;
}
.step-content { flex: 1; }
.step-content h3 {
  color: #e2e8f0;
  font-size: 1.05rem;
  margin-bottom: 8px;
}
.step-content p {
  color: #cbd5e1;
  font-size: 0.95rem;
  margin-bottom: 8px;
}
.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 10px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}
.note {
  color: #94a3b8;
  font-size: 0.87rem;
  font-style: italic;
  margin-top: 6px;
}
.checkpoint {
  background: rgba(168,139,250,0.06);
  border: 1px solid rgba(168,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 15px 0;
}
.checkpoint summary {
  color: #a78bfa;
  font-size: 0.95rem;
}
.checkpoint .answer {
  padding: 10px 0 4px;
  color: #4ade80;
  font-weight: 600;
}
.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid rgba(96,165,250,0.25);
  border-radius: 14px;
  padding: 24px;
  text-align: center;
  margin-bottom: 24px;
}
.insight-box h2 { color: #a78bfa; margin-bottom: 12px; }
.insight-formula {
  font-size: 1.3rem;
  color: #e2e8f0;
  margin: 10px 0;
}
.final-answer-box {
  background: linear-gradient(135deg, rgba(52,211,153,0.12), rgba(74,222,128,0.08));
  border: 1px solid rgba(52,211,153,0.3);
  border-radius: 14px;
  padding: 28px;
  text-align: center;
  margin-bottom: 24px;
}
.final-answer-box h2 {
  color: #4ade80;
  margin-bottom: 14px;
}
.final-answer-value {
  font-size: 1.8rem;
  font-weight: 800;
  color: #4ade80;
  margin: 12px 0;
}
.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-top: 16px;
}
.option-card {
  padding: 10px 22px;
  border-radius: 10px;
  font-weight: 600;
  font-size: 1rem;
  background: rgba(148,163,184,0.08);
  border: 1px solid #334155;
  color: #94a3b8;
}
.option-card.correct {
  background: rgba(52,211,153,0.15);
  border-color: #34d399;
  color: #4ade80;
}
.verification {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 14px;
  font-style: italic;
}
.pitfalls-card {
  border-left: 3px solid #e09468;
}
.pitfalls-card h2 { color: #e09468; }
.pitfalls-card ul {
  list-style: none;
  padding: 0;
}
.pitfalls-card li {
  padding: 8px 0 8px 16px;
  border-left: 2px solid rgba(224,148,104,0.3);
  margin-bottom: 8px;
  color: #cbd5e1;
}
.challenge-card {
  border-left: 3px solid #f472b6;
}
.challenge-card h2 { color: #f472b6; }
@media (max-width: 700px) {
  h1 { font-size: 1.5rem; }
  .card { padding: 16px; }
  .step-container { flex-direction: column; gap: 8px; }
  .given-grid { gap: 8px; }
  .given-item { min-width: 60px; padding: 8px 12px; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Tangenta kružnice — zbir parametara</h1>
  <p class="subtitle">Analitička geometrija — uslov tangentnosti prave i kružnice</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Zbir svih vrednosti realnog parametra \( p \) za koje je prava \( y = 2x + p \) tangenta kružnice
      \( x^2 + 2x + y^2 - 4y = 10 \) jednak je:</p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(8\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(10\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(9\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(12\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(6\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan rešavanja</h2>
    <p>Najpre ćemo jednačinu kružnice svesti na kanonski oblik da odredimo centar i poluprečnik. Zatim ćemo
      iskoristiti uslov tangentnosti — rastojanje od centra kružnice do prave jednako je poluprečniku —
      i iz dobijene jednačine izračunati zbir svih vrednosti parametra \( p \).</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>&#128208; Ključne formule i teoreme</summary>
      <ul class="theory-list">
        <li><strong>Kanonski oblik kružnice:</strong> \( (x - a)^2 + (y - b)^2 = r^2 \), gde je \( C(a, b) \) centar, a \( r \) poluprečnik.</li>
        <li><strong>Dopunjavanje do punog kvadrata:</strong> \( x^2 + 2px = (x + p)^2 - p^2 \).</li>
        <li><strong>Rastojanje tačke od prave:</strong> Za pravu \( Ax + By + C = 0 \) i tačku \( T(x_0, y_0) \):
          \[ d = \frac{|Ax_0 + By_0 + C|}{\sqrt{A^2 + B^2}} \]</li>
        <li><strong>Uslov tangentnosti:</strong> Prava je tangenta kružnice ako i samo ako je rastojanje centra kružnice od prave jednako poluprečniku, tj. \( d(C, l) = r \).</li>
        <li><strong>Vijetove formule:</strong> Ako su \( p_1, p_2 \) koreni jednačine \( p^2 + bp + c = 0 \), tada \( p_1 + p_2 = -b \).</li>
      </ul>
    </details>
  </div>

  <!-- Canvas Diagram -->
  <div class="card canvas-card">
    <h2>Vizuelni prikaz</h2>
    <canvas id="diagram" width="700" height="560"></canvas>
    <p class="canvas-hint">Pomerajte klizač da menjate vrednost parametra p i vidite kada prava postaje tangenta</p>
    <div style="margin-top:12px; display:flex; align-items:center; justify-content:center; gap:12px; flex-wrap:wrap;">
      <label for="p-slider" style="color:#94a3b8; font-size:0.92rem;">Parametar p:</label>
      <input type="range" id="p-slider" min="-10" max="18" step="0.1" value="4" style="width:240px; accent-color:#60a5fa;">
      <span id="p-value" style="color:#60a5fa; font-weight:700; font-size:1rem; min-width:60px;">p = 4,0</span>
    </div>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <div class="step-container" id="step1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Svedimo kružnicu na kanonski oblik</h3>
        <p>Polazna jednačina kružnice je:</p>
        <div class="math-block">
          \[ x^2 + 2x + y^2 - 4y = 10 \]
        </div>
        <p>Dopunimo do punog kvadrata po \( x \) i po \( y \) odvojeno.</p>
      </div>
    </div>

    <div class="step-container" id="step2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Dopunjavanje po \( x \)</h3>
        <p>Za članove sa \( x \):</p>
        <div class="math-block">
          \[ x^2 + 2x = (x + 1)^2 - 1 \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Dopunjavanje po \( y \)</h3>
        <p>Za članove sa \( y \):</p>
        <div class="math-block">
          \[ y^2 - 4y = (y - 2)^2 - 4 \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Formiramo kanonski oblik</h3>
        <p>Zamenom u polaznu jednačinu:</p>
        <div class="math-block">
          \[ (x + 1)^2 - 1 + (y - 2)^2 - 4 = 10 \]
        </div>
        <p>Prebacimo konstante na desnu stranu:</p>
        <div class="math-block">
          \[ (x + 1)^2 + (y - 2)^2 = 15 \]
        </div>
        <p>Centar kružnice je \( C(-1,\, 2) \), a poluprečnik je \( r = \sqrt{15} \).</p>
      </div>
    </div>

    <details class="checkpoint">
      <summary>&#9997; Proveri se — Koji je poluprečnik kružnice?</summary>
      <div class="answer">\( r = \sqrt{15} \approx 3{,}87 \)</div>
    </details>

    <div class="step-container" id="step5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Zapišimo pravu u opštem obliku</h3>
        <p>Prava \( y = 2x + p \) se može zapisati kao:</p>
        <div class="math-block">
          \[ 2x - y + p = 0 \]
        </div>
        <p>Koeficijenti su: \( A = 2 \), \( B = -1 \), \( C = p \).</p>
      </div>
    </div>

    <div class="step-container" id="step6">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Izračunamo rastojanje centra od prave</h3>
        <p>Koristimo formulu za rastojanje tačke \( C(-1, 2) \) od prave \( 2x - y + p = 0 \):</p>
        <div class="math-block">
          \[ d = \frac{|2 \cdot (-1) + (-1) \cdot 2 + p|}{\sqrt{2^2 + (-1)^2}} \]
        </div>
        <p>Izračunamo brojilac:</p>
        <div class="math-block">
          \[ |{-2 - 2 + p}| = |p - 4| \]
        </div>
        <p>Izračunamo imenilac:</p>
        <div class="math-block">
          \[ \sqrt{4 + 1} = \sqrt{5} \]
        </div>
        <p>Dakle:</p>
        <div class="math-block">
          \[ d = \frac{|p - 4|}{\sqrt{5}} \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step7">
      <div class="step-badge">7</div>
      <div class="step-content">
        <h3>Primenimo uslov tangentnosti</h3>
        <p>Prava je tangenta kružnice kada je rastojanje centra od prave jednako poluprečniku:</p>
        <div class="math-block">
          \[ \frac{|p - 4|}{\sqrt{5}} = \sqrt{15} \]
        </div>
        <p>Pomnožimo obe strane sa \( \sqrt{5} \):</p>
        <div class="math-block">
          \[ |p - 4| = \sqrt{15} \cdot \sqrt{5} = \sqrt{75} = 5\sqrt{3} \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>&#9997; Proveri se — Koliko je \( \sqrt{75} \)?</summary>
      <div class="answer">\( \sqrt{75} = \sqrt{25 \cdot 3} = 5\sqrt{3} \approx 8{,}66 \)</div>
    </details>

    <div class="step-container" id="step8">
      <div class="step-badge">8</div>
      <div class="step-content">
        <h3>Rešimo jednačinu sa apsolutnom vrednošću</h3>
        <p>Jednačina \( |p - 4| = 5\sqrt{3} \) daje dva slučaja:</p>
        <div class="math-block">
          \[ p - 4 = 5\sqrt{3} \quad \Rightarrow \quad p_1 = 4 + 5\sqrt{3} \]
        </div>
        <div class="math-block">
          \[ p - 4 = -5\sqrt{3} \quad \Rightarrow \quad p_2 = 4 - 5\sqrt{3} \]
        </div>
        <p class="note">Postoje tačno dve tangente kružnici sa zadatim koeficijentom pravca — to je geometrijski očekivano.</p>
      </div>
    </div>

    <div class="step-container" id="step9">
      <div class="step-badge">9</div>
      <div class="step-content">
        <h3>Izračunamo zbir vrednosti parametra</h3>
        <p>Saberemo obe vrednosti:</p>
        <div class="math-block">
          \[ p_1 + p_2 = (4 + 5\sqrt{3}) + (4 - 5\sqrt{3}) = 4 + 4 = 8 \]
        </div>
        <p>Članovi \( \pm 5\sqrt{3} \) se poništavaju, ostaje samo \( 8 \).</p>
      </div>
    </div>

    <details class="checkpoint">
      <summary>&#9997; Proveri se — Zašto se iracionalni delovi poništavaju?</summary>
      <div class="answer">Zato što su rešenja simetrična u odnosu na vrednost \( p = 4 \): jedno je za \( 5\sqrt{3} \) veće, a drugo za \( 5\sqrt{3} \) manje. Ovo je posledica apsolutne vrednosti — uvek daje par simetričnih rešenja. Po Vijetovim formulama, zbir korena jednačine \( p^2 - 8p - 59 = 0 \) je upravo \( 8 \).</div>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Ključni uvid</h2>
    <p style="color:#cbd5e1; margin-bottom:10px;">Nema potrebe računati pojedinačne vrednosti \( p_1 \) i \( p_2 \)! Čim dobijemo jednačinu \( |p - 4| = 5\sqrt{3} \), znamo da su rešenja oblika \( 4 \pm 5\sqrt{3} \), pa je njihov zbir:</p>
    <div class="insight-formula">
      \[ p_1 + p_2 = (4 + 5\sqrt{3}) + (4 - 5\sqrt{3}) = \boxed{8} \]
    </div>
    <p style="color:#94a3b8; font-size:0.9rem;">Alternativno, kvadriranjem dolazimo do \( p^2 - 8p - 59 = 0 \), gde po Vijetovim formulama \( p_1 + p_2 = 8 \).</p>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <h2>Konačan odgovor</h2>
    <div class="final-answer-value">\( p_1 + p_2 = 8 \)</div>
    <div class="options-row">
      <div class="option-card correct">(A) 8</div>
      <div class="option-card">(B) 10</div>
      <div class="option-card">(C) 9</div>
      <div class="option-card">(D) 12</div>
      <div class="option-card">(E) 6</div>
    </div>
    <p class="verification">Verifikacija: Kvadriranjem dobijamo \( p^2 - 8p - 59 = 0 \). Po Vijetovim formulama, zbir korena je \( -(-8)/1 = 8 \). Geometrijski, dve tangente sa istim nagibom su uvek simetrične u odnosu na centar, pa se iracionalni delovi uvek poništavaju.</p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfalls-card">
    <h2>Česte greške</h2>
    <ul>
      <li><strong>Pogrešan predznak pri dopunjavanju do punog kvadrata:</strong> Kod \( y^2 - 4y \) treba oduzeti \( 4 \), ne dodati. Formula glasi \( (y - 2)^2 - 4 \), a česta greška je zaboraviti minus ispred \( 4 \), što daje pogrešan poluprečnik.</li>
      <li><strong>Računanje pojedinačnih vrednosti umesto zbira:</strong> Zadatak traži zbir, pa nema potrebe izračunavati \( p_1 \) i \( p_2 \) pojedinačno. Čim vidite oblik \( |p - 4| = k \), zbir je \( 2 \cdot 4 = 8 \). Alternativno, koristite Vijetove formule.</li>
      <li><strong>Greška u formuli za rastojanje:</strong> Prava \( y = 2x + p \) se mora zapisati kao \( 2x - y + p = 0 \) (sa \( B = -1 \)), ne kao \( 2x + y + p = 0 \). Predznak uz \( y \) je negativan!</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Za koje vrednosti parametra \( p \) prava \( y = 2x + p \) seče kružnicu \( (x+1)^2 + (y-2)^2 = 15 \) u tačno dve tačke?</p>
    <details>
      <summary>&#128161; Hint</summary>
      <p style="padding:8px 0; color:#cbd5e1;">Prava seče kružnicu u dve tačke kada je rastojanje centra od prave strogo manje od poluprečnika, tj. \( d < r \). To daje \( |p - 4| < 5\sqrt{3} \), odnosno \( 4 - 5\sqrt{3} < p < 4 + 5\sqrt{3} \).</p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('diagram');
  const ctx = canvas.getContext('2d');
  const slider = document.getElementById('p-slider');
  const pDisplay = document.getElementById('p-value');

  // Circle params: center (-1, 2), radius sqrt(15)
  const cx = -1, cy = 2, r = Math.sqrt(15);

  // Tangent p values
  const p1 = 4 + 5 * Math.sqrt(3); // ~12.66
  const p2 = 4 - 5 * Math.sqrt(3); // ~-4.66

  // Canvas coordinate system
  const W = canvas.width, H = canvas.height;
  const scale = 28;
  const originX = W / 2 - 1 * scale;
  const originY = H / 2 + 1 * scale;

  function toCanvas(x, y) {
    return { x: originX + x * scale, y: originY - y * scale };
  }

  function draw(p) {
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Grid
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (let gx = -15; gx <= 15; gx++) {
      const pt = toCanvas(gx, 0);
      ctx.beginPath();
      ctx.moveTo(pt.x, 0);
      ctx.lineTo(pt.x, H);
      ctx.stroke();
    }
    for (let gy = -10; gy <= 15; gy++) {
      const pt = toCanvas(0, gy);
      ctx.beginPath();
      ctx.moveTo(0, pt.y);
      ctx.lineTo(W, pt.y);
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    const axO = toCanvas(0, 0);
    ctx.beginPath();
    ctx.moveTo(0, axO.y);
    ctx.lineTo(W, axO.y);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(axO.x, 0);
    ctx.lineTo(axO.x, H);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#64748b';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('x', W - 18, axO.y - 8);
    ctx.fillText('y', axO.x + 8, 16);

    // Tick marks
    ctx.fillStyle = '#64748b';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    for (let gx = -8; gx <= 10; gx++) {
      if (gx === 0) continue;
      const pt = toCanvas(gx, 0);
      ctx.beginPath();
      ctx.moveTo(pt.x, axO.y - 3);
      ctx.lineTo(pt.x, axO.y + 3);
      ctx.strokeStyle = '#475569';
      ctx.lineWidth = 1;
      ctx.stroke();
      if (gx % 2 === 0) {
        ctx.fillText(gx.toString(), pt.x, axO.y + 16);
      }
    }
    ctx.textAlign = 'right';
    for (let gy = -6; gy <= 12; gy++) {
      if (gy === 0) continue;
      const pt = toCanvas(0, gy);
      ctx.beginPath();
      ctx.moveTo(axO.x - 3, pt.y);
      ctx.lineTo(axO.x + 3, pt.y);
      ctx.strokeStyle = '#475569';
      ctx.lineWidth = 1;
      ctx.stroke();
      if (gy % 2 === 0) {
        ctx.fillText(gy.toString(), axO.x - 8, pt.y + 4);
      }
    }

    // Draw circle
    const cc = toCanvas(cx, cy);
    ctx.beginPath();
    ctx.arc(cc.x, cc.y, r * scale, 0, Math.PI * 2);
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.stroke();

    // Circle fill
    ctx.beginPath();
    ctx.arc(cc.x, cc.y, r * scale, 0, Math.PI * 2);
    ctx.fillStyle = 'rgba(96, 165, 250, 0.06)';
    ctx.fill();

    // Center point
    ctx.beginPath();
    ctx.arc(cc.x, cc.y, 5, 0, Math.PI * 2);
    ctx.fillStyle = '#60a5fa';
    ctx.fill();

    // Center label
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('C(-1, 2)', cc.x + 10, cc.y - 10);

    // Radius dashed line
    const rEnd = toCanvas(cx + r, cy);
    ctx.setLineDash([5, 5]);
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(cc.x, cc.y);
    ctx.lineTo(rEnd.x, rEnd.y);
    ctx.stroke();
    ctx.setLineDash([]);

    // Radius label
    const rMid = toCanvas(cx + r / 2, cy + 0.5);
    ctx.fillStyle = '#60a5fa';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('r = \u221A15', rMid.x, rMid.y - 4);

    // Draw line y = 2x + p
    const xMin = -12, xMax = 12;
    const lyMin = 2 * xMin + p;
    const lyMax = 2 * xMax + p;
    const lStart = toCanvas(xMin, lyMin);
    const lEnd = toCanvas(xMax, lyMax);

    // Check tangent condition
    const dist = Math.abs(p - 4) / Math.sqrt(5);
    const isTangent = Math.abs(dist - r) < 0.15;
    const isSecant = dist < r;

    let lineColor = '#f472b6';
    if (isTangent) lineColor = '#4ade80';
    else if (isSecant) lineColor = '#fbbf24';

    ctx.beginPath();
    ctx.moveTo(lStart.x, lStart.y);
    ctx.lineTo(lEnd.x, lEnd.y);
    ctx.strokeStyle = lineColor;
    ctx.lineWidth = 2;
    ctx.stroke();

    // Distance line from center to line (perpendicular)
    // Foot of perpendicular from C(-1,2) to line 2x - y + p = 0
    // foot = C - ((AC + BC + p) / (A^2+B^2)) * (A, B) = C - ((2*cx - cy + p)/5) * (2, -1)
    const t = (2 * cx - cy + p) / 5;
    const footX = cx - 2 * t;
    const footY = cy + t;
    const foot = toCanvas(footX, footY);

    ctx.setLineDash([4, 4]);
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(cc.x, cc.y);
    ctx.lineTo(foot.x, foot.y);
    ctx.stroke();
    ctx.setLineDash([]);

    // Foot point
    ctx.beginPath();
    ctx.arc(foot.x, foot.y, 3, 0, Math.PI * 2);
    ctx.fillStyle = '#a78bfa';
    ctx.fill();

    // Distance label
    const dMidX = (cc.x + foot.x) / 2;
    const dMidY = (cc.y + foot.y) / 2;
    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('d = ' + dist.toFixed(2).replace('.', ','), dMidX + 8, dMidY - 4);

    // Line label
    ctx.fillStyle = lineColor;
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    const labelPt = toCanvas(3, 2 * 3 + p);
    const labelY = Math.max(20, Math.min(H - 20, labelPt.y));
    ctx.fillText('y = 2x + ' + p.toFixed(1).replace('.', ','), labelPt.x + 8, labelY);

    // Status
    let statusText = '';
    let statusColor = '';
    if (isTangent) {
      statusText = 'TANGENTA! d = r = \u221A15';
      statusColor = '#4ade80';
    } else if (isSecant) {
      statusText = 'Sečica (d < r)';
      statusColor = '#fbbf24';
    } else {
      statusText = 'Nema preseka (d > r)';
      statusColor = '#f472b6';
    }

    ctx.fillStyle = 'rgba(15, 23, 42, 0.85)';
    ctx.fillRect(10, 10, 260, 32);
    ctx.fillStyle = statusColor;
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText(statusText, 18, 31);

    // Draw tangent p values markers on the side
    ctx.fillStyle = '#34d399';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText('p\u2081 \u2248 ' + p1.toFixed(2).replace('.', ','), W - 14, H - 40);
    ctx.fillText('p\u2082 \u2248 ' + p2.toFixed(2).replace('.', ','), W - 14, H - 22);

    // Legend
    ctx.fillStyle = 'rgba(15, 23, 42, 0.85)';
    ctx.fillRect(10, H - 72, 185, 62);
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';

    ctx.fillStyle = '#60a5fa';
    ctx.fillRect(18, H - 62, 12, 12);
    ctx.fillText('Kružnica', 36, H - 52);

    ctx.fillStyle = '#4ade80';
    ctx.fillRect(18, H - 45, 12, 12);
    ctx.fillText('Tangenta', 36, H - 35);

    ctx.fillStyle = '#a78bfa';
    ctx.fillRect(18, H - 28, 12, 12);
    ctx.fillText('Rastojanje d', 36, H - 18);
  }

  function updateSlider() {
    const p = parseFloat(slider.value);
    pDisplay.textContent = 'p = ' + p.toFixed(1).replace('.', ',');
    draw(p);
  }

  slider.addEventListener('input', updateSlider);

  // Step click highlighting
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(function(step) {
    step.addEventListener('click', function() {
      steps.forEach(function(s) { s.classList.remove('active'); });
      step.classList.add('active');
    });
  });

  // Initial draw
  draw(parseFloat(slider.value));
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Zbir parametara tangente kružnice",
  "subject": "math",
  "unit": "geometry",
  "topic_tags": ["analitička geometrija", "kružnica", "tangenta", "rastojanje tačke od prave", "parametar", "Vijetove formule"]
}
BRAINSPARK_META-->