<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Logaritamska jednacina sa smenom</title>

<script type="text/info" id="logic-scratchpad">
Problem: Sva realna resenja jednacine
log_{x-1}(x+1) + 4*log_{x+1}(x-1) = 4
pripadaju intervalu:
A) (6, 8]; B) (2, 4]; C) (1, 2]; D) (4, 6]; E) (8, 10]

Korak 1: Domen
Za log_{x-1}(x+1):
  - baza: x - 1 > 0 i x - 1 ≠ 1 => x > 1 i x ≠ 2
  - argument: x + 1 > 0 => x > -1
Za log_{x+1}(x-1):
  - baza: x + 1 > 0 i x + 1 ≠ 1 => x > -1 i x ≠ 0
  - argument: x - 1 > 0 => x > 1
Presek: x > 1 i x ≠ 2

Korak 2: Smena
Neka t = log_{x-1}(x+1).
Tada log_{x+1}(x-1) = 1/t (reciprocna vrednost logaritma pri zameni baze i argumenta).
Uslov: t ≠ 0.

Korak 3: Jednacina po t
t + 4/t = 4
Mnozimo sa t (t ≠ 0):
t^2 + 4 = 4t
t^2 - 4t + 4 = 0
(t - 2)^2 = 0
t = 2

Korak 4: Vracanje smene
log_{x-1}(x+1) = 2
Po definiciji logaritma: (x-1)^2 = x+1
x^2 - 2x + 1 = x + 1
x^2 - 3x = 0
x(x - 3) = 0
x = 0 ili x = 3

Korak 5: Provera domena
x = 0: Ne zadovoljava domen (x > 1). ODBACUJEMO.
x = 3: x > 1 i x ≠ 2. PRIHVATAMO.

Korak 6: Verifikacija x = 3
log_{3-1}(3+1) + 4*log_{3+1}(3-1) = log_2(4) + 4*log_4(2) = 2 + 4*(1/2) = 2 + 2 = 4. OK!

Korak 7: Odredjivanje intervala
x = 3 pripada intervalu (2, 4].

ODGOVOR: (B) (2, 4]
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
}

h1 {
  font-size: 2rem;
  font-weight: 700;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  text-align: center;
}

.subtitle {
  text-align: center;
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.card-title {
  font-size: 1.25rem;
  font-weight: 600;
  color: #60a5fa;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.3rem;
}

.problem-statement {
  border-left: 4px solid #a78bfa;
}

.problem-statement .problem-text {
  font-size: 1.1rem;
  line-height: 1.9;
  margin-bottom: 20px;
}

.math-highlight {
  background: rgba(56, 189, 248, 0.08);
  padding: 2px 8px;
  border-radius: 6px;
  display: inline-block;
}

.given-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96, 165, 250, 0.06);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 12px 16px;
  text-align: center;
  font-size: 1.05rem;
  transition: border-color 0.2s;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
}

.given-item.answer-option {
  cursor: default;
}

.given-item.answer-option.correct {
  border-color: #4ade80;
  background: rgba(74, 222, 128, 0.08);
}

.plan-text {
  color: #94a3b8;
  font-size: 1.05rem;
  line-height: 1.8;
}

details {
  background: rgba(96, 165, 250, 0.04);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 14px 18px;
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  user-select: none;
}

details summary:hover {
  color: #c4b5fd;
}

details[open] summary {
  margin-bottom: 10px;
}

.step {
  margin-bottom: 24px;
  padding-left: 0;
}

.step-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.step-badge {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.95rem;
  color: #0f172a;
  flex-shrink: 0;
}

.step-title {
  font-size: 1.15rem;
  font-weight: 600;
  color: #e2e8f0;
}

.step-content {
  margin-left: 48px;
  color: #cbd5e1;
  line-height: 1.9;
}

.step-content .math-highlight {
  margin: 8px 0;
  display: block;
  padding: 10px 16px;
}

.key-insight {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.12), rgba(167, 139, 250, 0.12));
  border: 1px solid rgba(167, 139, 250, 0.3);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.key-insight .card-title {
  color: #a78bfa;
}

.final-answer-box {
  text-align: center;
  padding: 30px;
}

.final-answer-value {
  font-size: 2.2rem;
  font-weight: 700;
  color: #4ade80;
  margin: 16px 0;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 12px;
  margin-top: 20px;
}

.final-option {
  padding: 10px 22px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: #1e293b;
  color: #94a3b8;
  font-size: 1.05rem;
  transition: all 0.2s;
}

.final-option.correct-option {
  border-color: #4ade80;
  background: rgba(74, 222, 128, 0.1);
  color: #4ade80;
  font-weight: 700;
}

.verification-note {
  color: #94a3b8;
  margin-top: 16px;
  font-size: 0.95rem;
}

.pitfall-item {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  margin-bottom: 12px;
  color: #f472b6;
}

.pitfall-icon {
  flex-shrink: 0;
  margin-top: 4px;
}

.pitfall-text {
  color: #cbd5e1;
}

.challenge-text {
  color: #94a3b8;
  font-size: 1.05rem;
  line-height: 1.8;
}

canvas {
  display: block;
  margin: 0 auto;
  width: 100%;
  max-width: 700px;
  border-radius: 12px;
  touch-action: none;
}

.canvas-caption {
  text-align: center;
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 8px;
}

@media (max-width: 700px) {
  h1 { font-size: 1.4rem; }
  .card { padding: 16px; }
  .given-grid { grid-template-columns: 1fr 1fr; }
  .step-content { margin-left: 0; margin-top: 8px; }
  .final-answer-value { font-size: 1.7rem; }
  .final-options { gap: 8px; }
  .final-option { padding: 8px 14px; font-size: 0.95rem; }
}
</style>
</head>
<body>

<div class="container">

  <!-- NASLOV -->
  <h1>Logaritamska jednacina sa smenom</h1>
  <p class="subtitle">Resavanje logaritamske jednacine sa promenljivim bazama metodom smene i odredjivanje intervala resenja</p>

  <!-- TEKST ZADATKA -->
  <div class="card problem-statement">
    <div class="card-title"><span class="icon">&#128220;</span> Tekst zadatka</div>
    <div class="problem-text">
      Sva realna resenja jednacine
      <span class="math-highlight">
        \(\log_{x-1}(x+1) + 4\log_{x+1}(x-1) = 4\)
      </span>
      pripadaju intervalu:
    </div>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\((6,\; 8]\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\((2,\; 4]\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\((1,\; 2]\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\((4,\; 6]\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\((8,\; 10]\)</div>
      </div>
    </div>
  </div>

  <!-- PLAN -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128204;</span> Plan resavanja</div>
    <p class="plan-text">
      Najpre cemo odrediti <strong>domen</strong> jednacine (uslovi za baze i argumente logaritama).
      Zatim cemo iskoristiti cinjenicu da su \(\log_{x-1}(x+1)\) i \(\log_{x+1}(x-1)\) <strong>reciprocne vrednosti</strong>,
      te uvesti smenu \(t = \log_{x-1}(x+1)\) da bismo jednacinu sveli na kvadratnu po \(t\).
      Na kraju, vracanjem smene nalazimo \(x\) i proveravamo kom intervalu pripada.
    </p>
  </div>

  <!-- TEORIJA -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128218;</span> Podsetnik iz teorije</div>
    <details>
      <summary>Definicija i domen logaritma</summary>
      <p style="margin-top: 8px;">
        Logaritam \(\log_a b\) je definisan kada je:
        \[a > 0, \quad a \neq 1, \quad b > 0\]
        U nasem slucaju baze su \(x - 1\) i \(x + 1\), a argumenti su \(x + 1\) i \(x - 1\).
      </p>
    </details>
    <details>
      <summary>Veza reciprocnih logaritama</summary>
      <p style="margin-top: 8px;">
        Za sve dozvoljene vrednosti vazi:
        \[\log_a b = \frac{1}{\log_b a}\]
        Ovo direktno sledi iz formule za promenu baze: \(\log_a b = \frac{\ln b}{\ln a}\), pa je
        \(\log_b a = \frac{\ln a}{\ln b} = \frac{1}{\log_a b}\).
      </p>
    </details>
    <details>
      <summary>Definicija logaritma i eksponencijalni oblik</summary>
      <p style="margin-top: 8px;">
        Po definiciji:
        \[\log_a b = c \iff a^c = b\]
        Dakle, \(\log_{x-1}(x+1) = 2\) znaci \((x-1)^2 = x+1\).
      </p>
    </details>
    <details>
      <summary>Potpun kvadrat</summary>
      <p style="margin-top: 8px;">
        Izraz \(t^2 - 2kt + k^2 = (t - k)^2\) je potpun kvadrat i jednak je nuli samo za \(t = k\).
        U nasem zadatku: \(t^2 - 4t + 4 = (t - 2)^2 = 0 \implies t = 2\).
      </p>
    </details>
  </div>

  <!-- VIZUELNI PRIKAZ -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127912;</span> Graficki prikaz</div>
    <canvas id="diagram-canvas" width="700" height="450"></canvas>
    <p class="canvas-caption">Grafik funkcija \(f(x) = \log_{x-1}(x+1) + 4\log_{x+1}(x-1)\) (plavo) i konstante \(y = 4\) (zeleno). Presecna tacka (roze) je resenje.</p>
  </div>

  <!-- KORAK PO KORAK -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128736;</span> Resenje korak po korak</div>

    <!-- Korak 1 -->
    <div class="step">
      <div class="step-header">
        <div class="step-badge">1</div>
        <div class="step-title">Odredjivanje domena</div>
      </div>
      <div class="step-content">
        <p>Logaritam \(\log_a b\) zahteva: \(a > 0\), \(a \neq 1\), \(b > 0\). Primenimo to na obe strane:</p>
        <p><strong>Za \(\log_{x-1}(x+1)\):</strong></p>
        <div class="math-highlight">
          \[\text{baza: } x - 1 > 0 \;\land\; x - 1 \neq 1 \implies x > 1 \;\land\; x \neq 2\]
        </div>
        <div class="math-highlight">
          \[\text{argument: } x + 1 > 0 \implies x > -1\]
        </div>
        <p><strong>Za \(\log_{x+1}(x-1)\):</strong></p>
        <div class="math-highlight">
          \[\text{baza: } x + 1 > 0 \;\land\; x + 1 \neq 1 \implies x > -1 \;\land\; x \neq 0\]
        </div>
        <div class="math-highlight">
          \[\text{argument: } x - 1 > 0 \implies x > 1\]
        </div>
        <p>Presek svih uslova:</p>
        <div class="math-highlight">
          \[x > 1 \;\land\; x \neq 2\]
        </div>
        <p>Dakle, domen je \((1,\; 2) \cup (2,\; +\infty)\).</p>
      </div>
    </div>

    <!-- Korak 2 -->
    <div class="step">
      <div class="step-header">
        <div class="step-badge">2</div>
        <div class="step-title">Uvodjenje smene</div>
      </div>
      <div class="step-content">
        <p>Primetimo da su logaritmi u jednacini medjusobno reciprocni:</p>
        <div class="math-highlight">
          \[\log_{x+1}(x-1) = \frac{1}{\log_{x-1}(x+1)}\]
        </div>
        <p>Uvedimo smenu \(t = \log_{x-1}(x+1)\), pri cemu mora biti \(t \neq 0\) (jer se \(x + 1 \neq 1\) za \(x > 1\), pa je \(\log_{x-1}(x+1) \neq 0\) &mdash; to bi zahtevalo \(x + 1 = 1\), tj. \(x = 0\), sto nije u domenu).</p>
        <p>Jednacina postaje:</p>
        <div class="math-highlight">
          \[t + \frac{4}{t} = 4\]
        </div>

        <details>
          <summary>&#9989; Proveri sebe: Zasto je log_{x+1}(x-1) = 1/t?</summary>
          <p style="margin-top: 8px;">
            Koristimo formulu za promenu baze: \(\log_a b = \frac{\ln b}{\ln a}\).
            Tada \(\log_{x-1}(x+1) = \frac{\ln(x+1)}{\ln(x-1)}\) i
            \(\log_{x+1}(x-1) = \frac{\ln(x-1)}{\ln(x+1)}\).
            Jasno je da je drugi izraz reciprocna vrednost prvog.
          </p>
        </details>
      </div>
    </div>

    <!-- Korak 3 -->
    <div class="step">
      <div class="step-header">
        <div class="step-badge">3</div>
        <div class="step-title">Resavanje jednacine po \(t\)</div>
      </div>
      <div class="step-content">
        <p>Pomnozimo obe strane sa \(t\) (pri cemu je \(t \neq 0\)):</p>
        <div class="math-highlight">
          \[t^2 + 4 = 4t\]
        </div>
        <p>Preuredimo:</p>
        <div class="math-highlight">
          \[t^2 - 4t + 4 = 0\]
        </div>
        <p>Prepoznajemo potpun kvadrat:</p>
        <div class="math-highlight">
          \[(t - 2)^2 = 0 \implies t = 2\]
        </div>
        <p>Jednacina ima jedinstveno resenje \(t = 2\). Posto je \(t \neq 0\), ovo resenje je validno.</p>
      </div>
    </div>

    <!-- Korak 4 -->
    <div class="step">
      <div class="step-header">
        <div class="step-badge">4</div>
        <div class="step-title">Vracanje smene</div>
      </div>
      <div class="step-content">
        <p>Iz \(t = 2\) dobijamo:</p>
        <div class="math-highlight">
          \[\log_{x-1}(x+1) = 2\]
        </div>
        <p>Po definiciji logaritma (\(\log_a b = c \iff a^c = b\)):</p>
        <div class="math-highlight">
          \[(x - 1)^2 = x + 1\]
        </div>
        <p>Razvijemo levu stranu:</p>
        <div class="math-highlight">
          \[x^2 - 2x + 1 = x + 1\]
        </div>
        <p>Preuredimo:</p>
        <div class="math-highlight">
          \[x^2 - 3x = 0\]
        </div>
        <p>Faktorizujemo:</p>
        <div class="math-highlight">
          \[x(x - 3) = 0\]
        </div>
        <p>Resenja su:</p>
        <div class="math-highlight">
          \[x_1 = 0 \qquad \text{ili} \qquad x_2 = 3\]
        </div>
      </div>
    </div>

    <!-- Korak 5 -->
    <div class="step">
      <div class="step-header">
        <div class="step-badge">5</div>
        <div class="step-title">Provera domena</div>
      </div>
      <div class="step-content">
        <p>Domen zahteva: \(x > 1\) i \(x \neq 2\).</p>
        <p><strong>\(x = 0\):</strong> Ne zadovoljava uslov \(x > 1\). <span style="color: #f472b6;">Odbacujemo.</span></p>
        <p><strong>\(x = 3\):</strong> Vazi \(3 > 1\) i \(3 \neq 2\). <span style="color: #4ade80;">Prihvatamo.</span></p>
        <p>Jedino resenje jednacine je \(x = 3\).</p>

        <details>
          <summary>&#9989; Proveri sebe: Verifikacija za x = 3</summary>
          <p style="margin-top: 8px;">
            \[\log_{3-1}(3+1) + 4\log_{3+1}(3-1) = \log_2 4 + 4\log_4 2\]
            \[= 2 + 4 \cdot \frac{1}{2} = 2 + 2 = 4 \;\checkmark\]
          </p>
        </details>
      </div>
    </div>

    <!-- Korak 6 -->
    <div class="step">
      <div class="step-header">
        <div class="step-badge">6</div>
        <div class="step-title">Odredjivanje intervala</div>
      </div>
      <div class="step-content">
        <p>Jedino resenje je \(x = 3\). Proveravamo kom od ponudjenih intervala pripada:</p>
        <div class="math-highlight">
          \[3 \in (2,\; 4]\]
        </div>
        <p>Zaista, \(2 < 3 \leq 4\), pa resenje pripada intervalu \((2,\; 4]\).</p>
      </div>
    </div>
  </div>

  <!-- KLJUCNI UVID -->
  <div class="key-insight">
    <div class="card-title"><span class="icon">&#128161;</span> Kljucni uvid</div>
    <p>
      Kljuc zadatka je prepoznati da su \(\log_{x-1}(x+1)\) i \(\log_{x+1}(x-1)\) <strong>reciprocne vrednosti</strong>.
      Smenom \(t = \log_{x-1}(x+1)\) jednacina \(t + \frac{4}{t} = 4\) se svodi na potpun kvadrat \((t-2)^2 = 0\),
      dajuci jedinstven \(t = 2\). Vracanje smene vodi na kvadratnu jednacinu po \(x\), ali samo jedno od dva
      algebarska resenja pripada domenu &mdash; obavezno je proveriti uslove za baze i argumente logaritama.
    </p>
  </div>

  <!-- KONACAN ODGOVOR -->
  <div class="card final-answer-box">
    <div class="card-title" style="justify-content: center;"><span class="icon">&#127919;</span> Konacan odgovor</div>
    <p style="color: #94a3b8; margin-bottom: 8px;">Jedino resenje jednacine je \(x = 3\), koje pripada intervalu:</p>
    <div class="final-answer-value">\((2,\; 4]\)</div>
    <div class="final-options">
      <div class="final-option">(A) \((6,\; 8]\)</div>
      <div class="final-option correct-option">(B) \((2,\; 4]\)</div>
      <div class="final-option">(C) \((1,\; 2]\)</div>
      <div class="final-option">(D) \((4,\; 6]\)</div>
      <div class="final-option">(E) \((8,\; 10]\)</div>
    </div>
    <p class="verification-note">
      <strong>Verifikacija:</strong>
      Za \(x = 3\): \(\log_2 4 + 4\log_4 2 = 2 + 4 \cdot \frac{1}{2} = 2 + 2 = 4\) &#10004;
    </p>
  </div>

  <!-- CESTE GRESKE -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9888;&#65039;</span> Ceste greske</div>
    <div class="pitfall-item">
      <span class="pitfall-icon">&#10060;</span>
      <div>
        <strong style="color: #f472b6;">Zaboraviti da se proveri domen:</strong>
        <span class="pitfall-text">
          Algebarsko resenje \(x = 0\) zadovoljava jednacinu \(x^2 - 3x = 0\), ali ne pripada domenu
          jer logaritam zahteva \(x > 1\). Bez provere domena, moglo bi se pogresno zakljuciti da jednacina
          ima dva resenja.
        </span>
      </div>
    </div>
    <div class="pitfall-item">
      <span class="pitfall-icon">&#10060;</span>
      <div>
        <strong style="color: #f472b6;">Ne prepoznati reciprocnu vezu logaritama:</strong>
        <span class="pitfall-text">
          Ako se ne uoci da je \(\log_{x+1}(x-1) = \frac{1}{\log_{x-1}(x+1)}\), jednacina
          deluje znatno slozenije. Bez ove veze, tesko je primeniti smenu koja vodi na jednostavnu
          kvadratnu jednacinu.
        </span>
      </div>
    </div>
    <div class="pitfall-item">
      <span class="pitfall-icon">&#10060;</span>
      <div>
        <strong style="color: #f472b6;">Pogresno tumacenje definicije logaritma:</strong>
        <span class="pitfall-text">
          Iz \(\log_{x-1}(x+1) = 2\) sledi \((x-1)^2 = x + 1\), a ne \(2^{x-1} = x+1\) ili nesto slicno.
          Baza logaritma se dize na stepen koji je jednak vrednosti logaritma, i rezultat je argument.
        </span>
      </div>
    </div>
    <div class="pitfall-item">
      <span class="pitfall-icon">&#10060;</span>
      <div>
        <strong style="color: #f472b6;">Izostaviti uslov \(x \neq 2\) iz domena:</strong>
        <span class="pitfall-text">
          Baza logaritma ne sme biti \(1\). Posto je \(x - 1 = 1\) za \(x = 2\), ova vrednost mora biti
          iskljucena iz domena, cak i ako zadovoljava \(x > 1\).
        </span>
      </div>
    </div>
  </div>

  <!-- DODATNI IZAZOV -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127947;</span> Dodatni izazov</div>
    <p class="challenge-text">
      Resiti jednacinu: \(\log_{x-2}(x+2) + 6\log_{x+2}(x-2) = 5\).
      Odrediti zbir svih realnih resenja.
    </p>
    <details>
      <summary>Nagovestaj</summary>
      <p style="margin-top: 8px;">
        Isti pristup: \(t = \log_{x-2}(x+2)\), pa \(t + \frac{6}{t} = 5\), tj. \(t^2 - 5t + 6 = 0\),
        tj. \((t-2)(t-3) = 0\). Za \(t = 2\): \((x-2)^2 = x+2\), odakle \(x^2 - 5x + 2 = 0\).
        Za \(t = 3\): \((x-2)^3 = x+2\). Resenja koja pripadaju domenu \(x > 2, x \neq 3\) daju
        konacni zbir.
      </p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('diagram-canvas');
  const ctx = canvas.getContext('2d');

  function draw() {
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    canvas.width = rect.width * dpr;
    canvas.height = rect.height * dpr;
    ctx.scale(dpr, dpr);
    const W = rect.width;
    const H = rect.height;

    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Coordinate system setup
    const padLeft = 60;
    const padRight = 30;
    const padTop = 40;
    const padBottom = 60;
    const plotW = W - padLeft - padRight;
    const plotH = H - padTop - padBottom;

    // x range: 1 to 7, y range: -2 to 10
    const xMin = 1.01;
    const xMax = 7;
    const yMin = -2;
    const yMax = 10;

    var toCanvasX = function(x) { return padLeft + (x - xMin) / (xMax - xMin) * plotW; };
    var toCanvasY = function(y) { return padTop + (yMax - y) / (yMax - yMin) * plotH; };

    // Grid lines
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (var gx = Math.ceil(xMin); gx <= Math.floor(xMax); gx++) {
      ctx.beginPath();
      ctx.moveTo(toCanvasX(gx), padTop);
      ctx.lineTo(toCanvasX(gx), padTop + plotH);
      ctx.stroke();
    }
    for (var gy = Math.ceil(yMin); gy <= Math.floor(yMax); gy += 2) {
      ctx.beginPath();
      ctx.moveTo(padLeft, toCanvasY(gy));
      ctx.lineTo(padLeft + plotW, toCanvasY(gy));
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    // y = 0 axis
    if (yMin <= 0 && yMax >= 0) {
      ctx.beginPath();
      ctx.moveTo(padLeft, toCanvasY(0));
      ctx.lineTo(padLeft + plotW, toCanvasY(0));
      ctx.stroke();
    }

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    for (var lx = Math.ceil(xMin); lx <= Math.floor(xMax); lx++) {
      ctx.fillText(String(lx), toCanvasX(lx), toCanvasY(0) + 8);
    }
    ctx.textAlign = 'right';
    ctx.textBaseline = 'middle';
    for (var ly = Math.ceil(yMin); ly <= Math.floor(yMax); ly += 2) {
      if (ly === 0) continue;
      ctx.fillText(String(ly), padLeft - 8, toCanvasY(ly));
    }

    // Axis names
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    ctx.fillText('x', padLeft + plotW - 5, toCanvasY(0) + 20);
    ctx.textBaseline = 'bottom';
    ctx.fillText('y', padLeft + 18, padTop + 5);

    // Vertical asymptote at x = 2 (dashed)
    ctx.strokeStyle = '#ef4444';
    ctx.lineWidth = 1;
    ctx.setLineDash([5, 5]);
    ctx.beginPath();
    ctx.moveTo(toCanvasX(2), padTop);
    ctx.lineTo(toCanvasX(2), padTop + plotH);
    ctx.stroke();
    ctx.setLineDash([]);

    // Label for asymptote
    ctx.fillStyle = '#ef4444';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    ctx.fillText('x = 2', toCanvasX(2), padTop + plotH + 8);

    // f(x) = log_{x-1}(x+1) + 4*log_{x+1}(x-1)
    function fVal(x) {
      if (x <= 1 || x === 2) return null;
      var base1 = x - 1;
      var arg1 = x + 1;
      var base2 = x + 1;
      var arg2 = x - 1;
      if (base1 <= 0 || base1 === 1 || arg1 <= 0) return null;
      if (base2 <= 0 || base2 === 1 || arg2 <= 0) return null;
      var log1 = Math.log(arg1) / Math.log(base1);
      var log2 = Math.log(arg2) / Math.log(base2);
      return log1 + 4 * log2;
    }

    // Plot f(x) on (1, 2)
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    var started = false;
    for (var px = 1.02; px < 2; px += 0.005) {
      var val = fVal(px);
      if (val === null || val > yMax + 2 || val < yMin - 2) { started = false; continue; }
      var cx = toCanvasX(px);
      var cy = toCanvasY(val);
      if (!started) { ctx.moveTo(cx, cy); started = true; }
      else { ctx.lineTo(cx, cy); }
    }
    ctx.stroke();

    // Plot f(x) on (2, xMax)
    ctx.beginPath();
    started = false;
    for (var px2 = 2.005; px2 <= xMax; px2 += 0.005) {
      var val2 = fVal(px2);
      if (val2 === null || val2 > yMax + 2 || val2 < yMin - 2) { started = false; continue; }
      var cx2 = toCanvasX(px2);
      var cy2 = toCanvasY(val2);
      if (!started) { ctx.moveTo(cx2, cy2); started = true; }
      else { ctx.lineTo(cx2, cy2); }
    }
    ctx.stroke();

    // Plot y = 4 (green)
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(padLeft, toCanvasY(4));
    ctx.lineTo(padLeft + plotW, toCanvasY(4));
    ctx.stroke();

    // Label y = 4
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.textBaseline = 'bottom';
    ctx.fillText('y = 4', padLeft + plotW - 40, toCanvasY(4) - 6);

    // Mark solution x = 3
    var sx = 3;
    var sy = 4;

    // Glow
    ctx.fillStyle = 'rgba(244, 114, 182, 0.2)';
    ctx.beginPath();
    ctx.arc(toCanvasX(sx), toCanvasY(sy), 14, 0, 2 * Math.PI);
    ctx.fill();

    // Point
    ctx.fillStyle = '#f472b6';
    ctx.beginPath();
    ctx.arc(toCanvasX(sx), toCanvasY(sy), 6, 0, 2 * Math.PI);
    ctx.fill();

    // Label
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textBaseline = 'bottom';
    ctx.textAlign = 'left';
    ctx.fillText('x = 3', toCanvasX(sx) + 14, toCanvasY(sy) - 10);

    // Legend
    var legX = padLeft + 12;
    var legY = padTop + 16;
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textBaseline = 'middle';

    ctx.fillStyle = '#60a5fa';
    ctx.fillRect(legX, legY, 20, 3);
    ctx.textAlign = 'left';
    ctx.fillText('f(x) = log(x+1)/log(x\u22121) + 4/...', legX + 28, legY + 2);

    ctx.fillStyle = '#4ade80';
    ctx.fillRect(legX, legY + 20, 20, 3);
    ctx.fillText('y = 4', legX + 28, legY + 22);

    ctx.fillStyle = '#f472b6';
    ctx.beginPath();
    ctx.arc(legX + 10, legY + 45, 5, 0, 2 * Math.PI);
    ctx.fill();
    ctx.fillText('resenje: x = 3', legX + 28, legY + 46);

    ctx.fillStyle = '#ef4444';
    ctx.setLineDash([5, 5]);
    ctx.beginPath();
    ctx.moveTo(legX, legY + 65);
    ctx.lineTo(legX + 20, legY + 65);
    ctx.strokeStyle = '#ef4444';
    ctx.lineWidth = 1;
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillText('asimptota x = 2', legX + 28, legY + 66);
  }

  draw();
  window.addEventListener('resize', draw);
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Logaritamska jednacina sa promenljivim bazama",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["logaritamske jednacine", "smena promenljive", "reciprocni logaritmi", "domen funkcije", "kvadratna jednacina"]
}
BRAINSPARK_META-->