<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Površina trougla BED</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM:
- Trougao ABC sa pravim uglom kod A.
- Tačke D na AB i E na BC.
- AC = AE = 4 cm.
- DE = DB = 3 cm.
- Naći površinu trougla BED.

SOLUTION STEPS:
1. U trouglu ACE, pošto je AC=AE=4, trougao je jednakokraki.
   Označićemo ugao kod C sa γ. Tada je i ugao AEC = γ.
2. U trouglu ABC, pošto je pravougli kod A, zbir oštrih uglova je 90 stepeni:
   ∠B + ∠C = 90° => β + γ = 90°.
3. U trouglu BDE, pošto je DE=DB=3, trougao je jednakokraki.
   Ugao DEB je jednak uglu DBE, koji je zapravo β. Dakle ∠DEB = β.
4. Tačka E se nalazi na duži BC, što znači da je ∠CEB ravan ugao (180°).
   ∠AEC + ∠AED + ∠DEB = 180°
   γ + ∠AED + β = 180°
   Pošto je β + γ = 90°, dobijamo:
   90° + ∠AED = 180° => ∠AED = 90°.
5. Trougao ADE je pravougli sa katetama AE=4 i DE=3.
   Hipotenuza AD² = 4² + 3² = 16 + 9 = 25 => AD = 5 cm.
6. Visina trougla ADE na hipotenuzu AD (rastojanje od E do prave AB):
   h = (AE * DE) / AD = (4 * 3) / 5 = 12 / 5 = 2,4 cm.
7. Površina trougla BED:
   Osnovica je BD = 3 cm.
   Visina iz temena E na pravu koja sadrži osnovicu BD je ista ona visina h koju smo izračunali (jer su A, D i B kolinearne).
   P = (BD * h) / 2 = (3 * 2,4) / 2 = 3 * 1,2 = 3,6 cm².

RESULT: 3,6 cm². Match with Option A.
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  text-align: center;
}

.subtitle {
  color: #94a3b8;
  text-align: center;
  font-size: 1.05rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.35rem;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.1rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56,189,248,0.06);
  border: 1px solid rgba(56,189,248,0.12);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 100px;
  text-align: center;
  flex: 1;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
  font-weight: 600;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  transition: border-color 0.2s ease, background 0.2s ease;
  cursor: default;
}

.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 14px 0;
  overflow-x: auto;
}

.plan-card {
  border-left: 4px solid #a78bfa;
}

.theory-card details {
  margin: 15px 0;
}

.theory-card summary {
  cursor: pointer;
  font-size: 1.05rem;
  font-weight: 600;
  color: #a78bfa;
  padding: 8px 0;
  user-select: none;
}

.theory-card ul {
  list-style: none;
  padding: 12px 0;
}

.theory-card li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #e2e8f0;
}

.theory-card li:last-child {
  border-bottom: none;
}

.step {
  display: flex;
  gap: 16px;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 12px;
  border-left: 3px solid transparent;
  transition: border-color 0.2s ease, background 0.2s ease;
  cursor: pointer;
}

.step:hover, .step.active {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}

.step-badge {
  width: 32px;
  height: 32px;
  min-width: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  margin-bottom: 8px;
  color: #e2e8f0;
  font-size: 1.05rem;
}

.step-content p {
  color: #cbd5e1;
  margin-bottom: 8px;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 6px;
}

.checkpoint {
  margin: 20px 0;
  background: rgba(167,139,250,0.06);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
}

.checkpoint summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 0.95rem;
  user-select: none;
}

.checkpoint .answer {
  padding-top: 10px;
  color: #4ade80;
  font-weight: 600;
}

.insight-card {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid rgba(96,165,250,0.25);
  text-align: center;
  padding: 28px;
}

.insight-card .big-formula {
  font-size: 1.4rem;
  margin: 16px 0;
  color: #4ade80;
}

.final-answer-card {
  border: 2px solid #4ade80;
  background: linear-gradient(135deg, rgba(52,211,153,0.08), rgba(74,222,128,0.04));
  text-align: center;
  padding: 28px;
}

.final-answer-card h2 {
  color: #4ade80;
  justify-content: center;
}

.final-answer-value {
  font-size: 1.8rem;
  color: #4ade80;
  font-weight: 800;
  margin: 16px 0;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 20px 0;
}

.option-card {
  padding: 10px 22px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: #1e293b;
  color: #94a3b8;
  font-size: 1rem;
  font-weight: 600;
  transition: all 0.2s ease;
}

.option-card.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.1);
  color: #4ade80;
  box-shadow: 0 0 20px rgba(74,222,128,0.15);
}

.verification-note {
  color: #94a3b8;
  font-size: 0.92rem;
  margin-top: 14px;
  padding-top: 14px;
  border-top: 1px solid #334155;
  text-align: left;
}

.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #cbd5e1;
}

.pitfall-list li:last-child {
  border-bottom: none;
}

.pitfall-label {
  color: #e09468;
  font-weight: 700;
  margin-right: 6px;
}

.challenge-card {
  border-left: 4px solid #f472b6;
}

.challenge-card details {
  margin: 15px 0;
}

.challenge-card summary {
  cursor: pointer;
  color: #f472b6;
  font-weight: 600;
  user-select: none;
}

canvas {
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  touch-action: none;
  max-width: 100%;
}

.canvas-hint {
  text-align: center;
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

.highlight-blue {
  color: #60a5fa;
  font-weight: 600;
}

.highlight-green {
  color: #4ade80;
  font-weight: 600;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step { padding: 12px; flex-direction: column; gap: 8px; }
  .given-grid { gap: 8px; }
  .given-item { min-width: 70px; padding: 10px 12px; }
  .final-answer-value { font-size: 1.4rem; }
  .options-row { gap: 8px; }
  .option-card { padding: 8px 14px; font-size: 0.9rem; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Povrsina trougla u pravouglom trouglu sa jednakim duzima</h1>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>
      Dat je pravougli trougao \( ABC \) sa pravim uglom kod temena \( A \). Na duzima \( AB \) i \( BC \), redom su date tacke \( D \) i \( E \) tako da vazi \( |AC| = |AE| = 4 \text{ cm} \) i \( |DE| = |DB| = 3 \text{ cm} \). Povrsina trougla \( BED \) jednaka je:
    </p>

    <div class="given-grid">
      <div class="given-item">
        <div class="label">Pravi ugao</div>
        <div class="value">kod \( A \)</div>
      </div>
      <div class="given-item">
        <div class="label">\( |AC| = |AE| \)</div>
        <div class="value">\( 4 \text{ cm} \)</div>
      </div>
      <div class="given-item">
        <div class="label">\( |DE| = |DB| \)</div>
        <div class="value">\( 3 \text{ cm} \)</div>
      </div>
    </div>

    <div class="given-grid" style="margin-top: 14px;">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\( 3{,}6 \text{ cm}^2 \)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\( 4{,}2 \text{ cm}^2 \)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\( 2{,}8 \text{ cm}^2 \)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\( 3{,}2 \text{ cm}^2 \)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\( 4 \text{ cm}^2 \)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>
      Iskoristicemo osobine jednakokrakih trouglova \( ACE \) i \( BDE \) da dokazemo da je ugao \( \angle AED \) prav. Zatim cemo izracunati visinu iz temena \( E \) i primeniti je na trougao \( BED \).
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card theory-card">
    <details>
      <summary>Kljucne formule i teoreme (klikni da otvoris)</summary>
      <ul>
        <li>
          <strong>Pitagorina teorema:</strong>
          U pravouglom trouglu vazi \( a^2 + b^2 = c^2 \).
        </li>
        <li>
          <strong>Povrsina trougla:</strong>
          \[ P = \frac{a \cdot h_a}{2} \]
        </li>
        <li>
          <strong>Visina na hipotenuzu:</strong>
          Kod pravouglog trougla sa katetama \( a \) i \( b \) i hipotenuzom \( c \):
          \[ h = \frac{a \cdot b}{c} \]
        </li>
        <li>
          <strong>Jednakokraki trougao:</strong>
          Uglovi na osnovici su jednaki.
        </li>
      </ul>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <h2>Dijagram</h2>
    <p style="color:#94a3b8; margin-bottom: 14px;">
      Dijagram prikazuje konstrukciju sa oznacenim uglovima i visinom \( h \).
    </p>
    <canvas id="geometryCanvas" width="800" height="450"></canvas>
    <p class="canvas-hint">Pravougli trougao ABC sa tackama D i E</p>
  </div>

  <!-- Step-by-step Solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step" id="step1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Analiza uglova i jednakokrakih trouglova</h3>
        <p>
          Posmatrajmo trougao \( ACE \). Posto je \( |AC| = |AE| = 4 \text{ cm} \), on je jednakokraki, pa su uglovi na osnovici jednaki:
        </p>
        <div class="math-block">
          \[ \angle ACE = \angle AEC = \gamma \]
        </div>
        <p>
          Slicno, trougao \( BDE \) ima \( |DE| = |DB| = 3 \text{ cm} \), pa je on takodje jednakokraki:
        </p>
        <div class="math-block">
          \[ \angle DEB = \angle DBE = \beta \]
        </div>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step" id="step2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Dokaz da je \( \angle AED = 90° \)</h3>
        <p>
          U velikom pravouglom trouglu \( ABC \), zbir ostrih uglova je \( 90° \):
        </p>
        <div class="math-block">
          \[ \beta + \gamma = 90° \]
        </div>
        <p>
          Posto tacka \( E \) lezi na duzi \( BC \), uglovi kod temena \( E \) cine ravan ugao od \( 180° \):
        </p>
        <div class="math-block">
          \[ \angle AEC + \angle AED + \angle DEB = 180° \]
        </div>
        <p>Zamenom dobijamo:</p>
        <div class="math-block">
          \[ \gamma + \angle AED + \beta = 180° \quad \Longrightarrow \quad 90° + \angle AED = 180° \]
        </div>
        <p>Dakle, dobijamo kljucni podatak:</p>
        <div class="math-block" style="border-color: rgba(167,139,250,0.4); background: rgba(167,139,250,0.08);">
          \[ \angle AED = 90° \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri se: Ako je \( \angle AED = 90° \), kakav je trougao \( ADE \)?</summary>
      <div class="answer">
        Pravougli sa hipotenuzom \( AD \) i katetama \( AE = 4 \) i \( DE = 3 \).
      </div>
    </details>

    <!-- Step 3 -->
    <div class="step" id="step3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Izracunavanje hipotenuze \( AD \)</h3>
        <p>
          Primenom Pitagorine teoreme na pravougli trougao \( ADE \):
        </p>
        <div class="math-block">
          \[ AD^2 = AE^2 + DE^2 = 4^2 + 3^2 = 16 + 9 = 25 \]
        </div>
        <div class="math-block">
          \[ AD = \sqrt{25} = 5 \text{ cm} \]
        </div>
        <p class="note">
          Prepoznajemo Pitagorinu trojku \( (3,\, 4,\, 5) \).
        </p>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step" id="step4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Visina iz temena \( E \) na pravu \( AB \)</h3>
        <p>
          Visina \( h \) koja odgovara hipotenuzi \( AD \) u pravouglom trouglu \( ADE \) je zapravo rastojanje tacke \( E \) od prave na kojoj leze tacke \( A \), \( D \) i \( B \). Racunamo je preko kateta:
        </p>
        <div class="math-block">
          \[ h = \frac{AE \cdot DE}{AD} = \frac{4 \cdot 3}{5} = \frac{12}{5} = 2{,}4 \text{ cm} \]
        </div>
        <p class="note">
          Ova visina je ujedno i visina trougla \( BED \) na osnovicu \( BD \), jer tacke \( A \), \( D \) i \( B \) su kolinearne (sve leze na duzi \( AB \)).
        </p>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step" id="step5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Konacna povrsina trougla \( BED \)</h3>
        <p>
          Za trougao \( BED \), osnovica je \( BD = 3 \text{ cm} \). Visina koja odgovara ovoj osnovici je upravo izracunato rastojanje \( h = 2{,}4 \text{ cm} \):
        </p>
        <div class="math-block">
          \[ P_{BED} = \frac{BD \cdot h}{2} = \frac{3 \cdot 2{,}4}{2} = \frac{7{,}2}{2} \]
        </div>
        <div class="math-block" style="border-color: rgba(74,222,128,0.4); background: rgba(74,222,128,0.08);">
          \[ P_{BED} = 3{,}6 \text{ cm}^2 \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri se: Kolika je duzina \( AB \)?</summary>
      <div class="answer">
        \( AB = AD + DB = 5 + 3 = 8 \text{ cm} \)
      </div>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="card insight-card">
    <h2 style="justify-content: center;">Kljucno zapazanje</h2>
    <p>
      Uslov \( |AC| = |AE| = 4 \) znaci da je trougao \( ACE \) <span class="highlight-blue">jednakokraki</span> sa uglovima \( \gamma \) na osnovici, a uslov \( |DE| = |DB| = 3 \) znaci da je trougao \( DEB \) takodje <span class="highlight-pink">jednakokraki</span> sa uglovima \( \beta \) na osnovici. Posto je \( \beta + \gamma = 90° \), direktno sledi da je \( \angle AED = 90° \), cime se trougao \( ADE \) svodi na poznatu Pitagorinu trojku \( (3,\, 4,\, 5) \).
    </p>
    <div class="big-formula">
      \[ P_{BED} = \frac{BD \cdot h}{2} = \frac{3 \cdot \frac{12}{5}}{2} = \frac{18}{5} = 3{,}6 \text{ cm}^2 \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer-card">
    <h2>Konacan odgovor</h2>
    <div class="final-answer-value">
      \( P_{BED} = 3{,}6 \text{ cm}^2 \)
    </div>
    <p style="color:#94a3b8; margin-bottom: 14px;">Tacan odgovor je <strong style="color:#4ade80;">A)</strong></p>
    <div class="options-row">
      <div class="option-card correct" data-option="A">(A) \( 3{,}6 \text{ cm}^2 \) &#10003;</div>
      <div class="option-card" data-option="B">(B) \( 4{,}2 \text{ cm}^2 \)</div>
      <div class="option-card" data-option="C">(C) \( 2{,}8 \text{ cm}^2 \)</div>
      <div class="option-card" data-option="D">(D) \( 3{,}2 \text{ cm}^2 \)</div>
      <div class="option-card" data-option="E">(E) \( 4 \text{ cm}^2 \)</div>
    </div>
    <p class="verification-note">
      <strong>Verifikacija:</strong> Koordinate: \( A(0,0) \), \( B(8,0) \), \( C(0,4) \), \( D(5,0) \), \( E\bigl(\frac{16}{5}, \frac{12}{5}\bigr) \).
      Provera duzina: \( |AC| = 4 \), \( |AE| = 4 \), \( |DB| = 3 \), \( |DE| = 3 \) &mdash; svi uslovi su zadovoljeni.
    </p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Ceste greske</h2>
    <ul class="pitfall-list">
      <li>
        <span class="pitfall-label">Greska 1:</span>
        Pretpostavka da je \( E \) srediste hipotenuze \( BC \). To nije dato u zadatku i ne mora biti tacno.
      </li>
      <li>
        <span class="pitfall-label">Greska 2:</span>
        Mesanje visina: Visina trougla \( BED \) nije stranica \( DE \), jer \( DE \) nije normalno na \( AB \).
      </li>
      <li>
        <span class="pitfall-label">Greska 3:</span>
        Pretpostavka da je trougao \( BED \) pravougli &mdash; to sto je trougao \( ABC \) pravougli ne znaci da je i \( BED \) pravougli.
      </li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>
      Kolika je ukupna povrsina velikog trougla \( ABC \)?
    </p>
    <details>
      <summary>Nagovestaj</summary>
      <p style="padding-top: 10px; color: #cbd5e1;">
        Primetite da je \( AB = AD + DB = 5 + 3 = 8 \text{ cm} \). Posto imamo katete \( AC = 4 \) i \( AB = 8 \), povrsina je:
        \[ P_{ABC} = \frac{AC \cdot AB}{2} = \frac{4 \cdot 8}{2} = 16 \text{ cm}^2 \]
        Udeo: \( \dfrac{P_{BED}}{P_{ABC}} = \dfrac{3{,}6}{16} = \dfrac{18}{80} = \dfrac{9}{40} = 22{,}5\% \).
      </p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('geometryCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');

  const draw = () => {
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    const W = rect.width;
    const H = 450;

    canvas.width = W * dpr;
    canvas.height = H * dpr;
    canvas.style.height = H + 'px';
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);

    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    const s = Math.min(W / 700, 1);

    /* Math coordinates: A=(0,0), B=(8,0), C=(0,4), D=(5,0), E=(16/5, 12/5) */
    const scale = Math.min((W - 160 * s) / 9, (H - 160 * s) / 5);
    const ox = 100 * s;
    const oy = H - 80 * s;

    function toC(mx, my) {
      return { x: ox + mx * scale, y: oy - my * scale };
    }

    /* Grid */
    ctx.strokeStyle = 'rgba(148, 163, 184, 0.06)';
    ctx.lineWidth = 1;
    for (let i = 0; i <= 9; i++) {
      const p = toC(i, 0), q = toC(i, 5);
      ctx.beginPath(); ctx.moveTo(p.x, p.y); ctx.lineTo(q.x, q.y); ctx.stroke();
    }
    for (let j = 0; j <= 5; j++) {
      const p = toC(0, j), q = toC(9, j);
      ctx.beginPath(); ctx.moveTo(p.x, p.y); ctx.lineTo(q.x, q.y); ctx.stroke();
    }

    const cA = toC(0, 0);
    const cB = toC(8, 0);
    const cC = toC(0, 4);
    const cD = toC(5, 0);
    const cE = toC(16/5, 12/5);
    /* Foot of perpendicular from E to AB */
    const cEf = toC(16/5, 0);

    /* Triangle ABC fill */
    ctx.fillStyle = 'rgba(96, 165, 250, 0.04)';
    ctx.beginPath();
    ctx.moveTo(cA.x, cA.y); ctx.lineTo(cB.x, cB.y); ctx.lineTo(cC.x, cC.y);
    ctx.closePath(); ctx.fill();

    /* Triangle BED fill */
    ctx.fillStyle = 'rgba(74, 222, 128, 0.12)';
    ctx.beginPath();
    ctx.moveTo(cB.x, cB.y); ctx.lineTo(cE.x, cE.y); ctx.lineTo(cD.x, cD.y);
    ctx.closePath(); ctx.fill();

    /* Triangle ABC edges */
    ctx.strokeStyle = '#e2e8f0';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(cA.x, cA.y); ctx.lineTo(cB.x, cB.y); ctx.lineTo(cC.x, cC.y);
    ctx.closePath(); ctx.stroke();

    /* Dashed AE */
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([5, 4]);
    ctx.beginPath(); ctx.moveTo(cA.x, cA.y); ctx.lineTo(cE.x, cE.y); ctx.stroke();
    ctx.setLineDash([]);

    /* Dashed DE */
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2;
    ctx.setLineDash([5, 4]);
    ctx.beginPath(); ctx.moveTo(cD.x, cD.y); ctx.lineTo(cE.x, cE.y); ctx.stroke();
    ctx.setLineDash([]);

    /* Height h from E to AB */
    ctx.strokeStyle = '#34d399';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([3, 3]);
    ctx.beginPath(); ctx.moveTo(cE.x, cE.y); ctx.lineTo(cEf.x, cEf.y); ctx.stroke();
    ctx.setLineDash([]);

    /* Triangle BED edges */
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(cB.x, cB.y); ctx.lineTo(cE.x, cE.y); ctx.lineTo(cD.x, cD.y);
    ctx.closePath(); ctx.stroke();

    /* Right angle marker at A */
    const raSize = 14 * s;
    ctx.strokeStyle = '#94a3b8';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(cA.x + raSize, cA.y);
    ctx.lineTo(cA.x + raSize, cA.y - raSize);
    ctx.lineTo(cA.x, cA.y - raSize);
    ctx.stroke();

    /* Right angle marker at E (between AE and DE) */
    /* AE direction from E toward A: (0-16/5, 0-12/5) normalized = (-4/5, -3/5) * scale */
    /* DE direction from E toward D: (5-16/5, 0-12/5) normalized = (3/5, -4/5) * scale */
    const raE = 12 * s;
    const ux1 = -4/5, uy1 = -3/5; /* unit vec E->A */
    const ux2 = 3/5, uy2 = -4/5;  /* unit vec E->D */
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(cE.x + ux1 * raE * scale / scale, cE.y - uy1 * raE);
    /* Need to use canvas coords: ux affects x, uy affects y (but y is flipped) */
    const re1x = cE.x + ux1 * raE;
    const re1y = cE.y + uy1 * raE; /* y is flipped in canvas */
    const re2x = cE.x + ux2 * raE;
    const re2y = cE.y + uy2 * raE;
    const re3x = cE.x + (ux1 + ux2) * raE;
    const re3y = cE.y + (uy1 + uy2) * raE;
    ctx.beginPath();
    ctx.moveTo(re1x, re1y);
    ctx.lineTo(re3x, re3y);
    ctx.lineTo(re2x, re2y);
    ctx.stroke();

    /* Right angle marker at foot of h */
    ctx.strokeStyle = '#34d399';
    ctx.lineWidth = 1.5;
    const hRa = 10 * s;
    ctx.beginPath();
    ctx.moveTo(cEf.x + hRa, cEf.y);
    ctx.lineTo(cEf.x + hRa, cEf.y - hRa);
    ctx.lineTo(cEf.x, cEf.y - hRa);
    ctx.stroke();

    /* Draw points */
    function drawPoint(cx, cy, color, label, offX, offY) {
      ctx.fillStyle = color;
      ctx.beginPath();
      ctx.arc(cx, cy, 5 * s, 0, 2 * Math.PI);
      ctx.fill();
      ctx.strokeStyle = 'rgba(255,255,255,0.3)';
      ctx.lineWidth = 1;
      ctx.stroke();
      ctx.fillStyle = color;
      ctx.font = 'bold ' + (16 * s) + 'px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(label, cx + offX * s, cy + offY * s);
    }

    drawPoint(cA.x, cA.y, '#e2e8f0', 'A', -16, 20);
    drawPoint(cB.x, cB.y, '#e2e8f0', 'B', 16, 20);
    drawPoint(cC.x, cC.y, '#e2e8f0', 'C', -16, -10);
    drawPoint(cD.x, cD.y, '#f472b6', 'D', 0, 22);
    drawPoint(cE.x, cE.y, '#4ade80', 'E', 16, -8);

    /* Length labels */
    ctx.font = (13 * s) + 'px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';

    /* |AC| = 4 */
    ctx.fillStyle = '#60a5fa';
    const acMid = toC(-0.6, 2);
    ctx.fillText('4', acMid.x, acMid.y);

    /* |AE| = 4 */
    ctx.fillStyle = '#60a5fa';
    const aeMid = toC(16/10 - 0.5, 12/10 + 0.3);
    ctx.fillText('4', aeMid.x, aeMid.y);

    /* |DE| = 3 */
    ctx.fillStyle = '#f472b6';
    const deMidX = (5 + 16/5) / 2;
    const deMidY = (0 + 12/5) / 2;
    const deMid = toC(deMidX + 0.4, deMidY + 0.3);
    ctx.fillText('3', deMid.x, deMid.y);

    /* |DB| = 3 */
    ctx.fillStyle = '#f472b6';
    const dbMid = toC(6.5, -0.4);
    ctx.fillText('3', dbMid.x, dbMid.y);

    /* h = 2,4 */
    ctx.fillStyle = '#34d399';
    const hMid = toC(16/5 + 0.6, 12/10);
    ctx.fillText('h = 2,4', hMid.x, hMid.y);

    /* Angle labels */
    ctx.font = 'italic ' + (13 * s) + 'px Segoe UI, system-ui, sans-serif';

    /* gamma at C */
    ctx.fillStyle = '#a78bfa';
    const gammaPos = toC(0.6, 3.4);
    ctx.fillText('\u03B3', gammaPos.x, gammaPos.y);

    /* beta at B */
    ctx.fillStyle = '#a78bfa';
    const betaPos = toC(7.2, 0.5);
    ctx.fillText('\u03B2', betaPos.x, betaPos.y);

    /* 90 at E */
    ctx.fillStyle = '#a78bfa';
    ctx.font = (11 * s) + 'px Segoe UI, system-ui, sans-serif';
    const rightAngleLabel = toC(16/5 - 1.0, 12/5 + 0.4);
    ctx.fillText('90\u00B0', rightAngleLabel.x, rightAngleLabel.y);
  };

  draw();
  window.addEventListener('resize', draw);

  /* Step click highlighting */
  var steps = document.querySelectorAll('.step');
  steps.forEach(function(step) {
    step.addEventListener('click', function() {
      steps.forEach(function(s) { s.classList.remove('active'); });
      step.classList.add('active');
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Povrsina trougla u pravouglom trouglu sa jednakim duzima",
  "subject": "math",
  "unit": "geometrija",
  "topic_tags": ["pravougli trougao", "jednakokraki trougao", "Pitagorina teorema", "povrsina trougla", "visina na hipotenuzu"]
}
BRAINSPARK_META-->
