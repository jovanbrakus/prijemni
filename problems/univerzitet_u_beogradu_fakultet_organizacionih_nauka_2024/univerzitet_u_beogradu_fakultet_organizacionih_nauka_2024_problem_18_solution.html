<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Broj razlicitih trouglova na mrezi 4x4</title>
<script>MathJax={tex:{inlineMath:[['\\(','\\)'],['$','$']],displayMath:[['\\[','\\]']]},svg:{fontCache:'global'}};</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<script type="text/info" id="logic-scratchpad">
  PROBLEM:
  Temena trougla A_k(x_k, y_k), k in {1,2,3}, imaju celobrojne koordinate iz skupa {1,2,3,4}.
  Koliko ima razlicitih trouglova?

  RESENJE:

  Korak 1: Ukupan broj tacaka na mrezi 4x4.
  Tacke: (x, y) gde x, y in {1, 2, 3, 4}.
  Ukupno tacaka: 4 * 4 = 16.

  Korak 2: Ukupan broj nacina da se izaberu 3 tacke od 16.
  C(16, 3) = 16! / (3! * 13!) = (16 * 15 * 14) / (3 * 2 * 1) = 3360 / 6 = 560.

  Korak 3: Oduzimamo kolinearne trojke (tri tacke na istoj pravoj ne cine trougao).

  3a) Horizontalne prave (y = const):
  Za svaku vrednost y in {1,2,3,4} imamo 4 tacke na horizontalnoj pravoj.
  Broj trojki na jednoj horizontali: C(4,3) = 4.
  Ukupno horizontalnih kolinearnih trojki: 4 * 4 = 16.

  3b) Vertikalne prave (x = const):
  Analogno: 4 vertikale, svaka sa 4 tacke.
  Ukupno vertikalnih kolinearnih trojki: 4 * 4 = 16.

  3c) Dijagonale sa nagibom +1 (y = x + c):
  - c = 0: y = x => (1,1),(2,2),(3,3),(4,4) -- 4 tacke => C(4,3) = 4 trojke
  - c = 1: y = x+1 => (1,2),(2,3),(3,4) -- 3 tacke => C(3,3) = 1 trojka
  - c = -1: y = x-1 => (2,1),(3,2),(4,3) -- 3 tacke => C(3,3) = 1 trojka
  - c = 2: y = x+2 => (1,3),(2,4) -- 2 tacke => 0 trojki
  - c = -2: y = x-2 => (3,1),(4,2) -- 2 tacke => 0 trojki
  Ukupno za nagib +1: 4 + 1 + 1 = 6.

  3d) Dijagonale sa nagibom -1 (y = -x + c):
  - c = 5: y = -x+5 => (1,4),(2,3),(3,2),(4,1) -- 4 tacke => C(4,3) = 4 trojke
  - c = 4: y = -x+4 => (1,3),(2,2),(3,1) -- 3 tacke => C(3,3) = 1 trojka
  - c = 6: y = -x+6 => (2,4),(3,3),(4,2) -- 3 tacke => C(3,3) = 1 trojka
  - c = 3: y = -x+3 => (1,2),(2,1) -- 2 tacke => 0 trojki
  - c = 7: y = -x+7 => (3,4),(4,3) -- 2 tacke => 0 trojki
  Ukupno za nagib -1: 4 + 1 + 1 = 6.

  3e) Ostali nagibi -- sistematicka provera:
  Za nagib p/q (u nesvodljivom obliku), da bismo imali bar 3 kolinearne tacke
  na mrezi {1,...,4}^2, potrebno je da na toj pravoj postoje bar 3 tacke sa
  celobrojnim koordinatama iz tog skupa.

  Nagib 1/2: y = x/2 + c. Za x in {1,2,3,4}, y je celobrojno samo kad je x paran.
  Dakle najvise 2 tacke (x=2 i x=4) => 0 trojki.

  Nagib 2: y = 2x + c. Za x=1: y=2+c, x=2: y=4+c, x=3: y=6+c.
  Ako c=0: (1,2),(2,4) -- samo 2 tacke u opsegu.
  Ako c=-1: (1,1),(2,3),(3,5) -- y=5 van opsega. Samo 2 tacke.
  Za bilo koje c: najvise 2 tacke u {1,..,4}^2 => 0 trojki.

  Nagib 1/3: y = x/3 + c. Celobrojno y samo za x deljivo sa 3, tj. x=3.
  Najvise 1-2 tacke => 0 trojki.

  Nagib 3: y = 3x + c. Za x=1: y=3+c, x=2: y=6+c (van opsega za c>=0).
  Najvise 1-2 tacke => 0 trojki.

  Nagib 2/3, 3/2: Slicno, ne mogu imati 3 tacke u mrezi 4x4.

  ZAKLJUCAK: Jedine kolinearne trojke dolaze od horizontala, vertikala i dijagonala
  sa nagibom +/-1.

  Korak 4: Ukupno kolinearnih trojki.
  16 + 16 + 6 + 6 = 44.

  Korak 5: Broj razlicitih trouglova.
  560 - 44 = 516.

  ODGOVOR: 516
  Tacan odgovor je (E).

  VERIFIKACIJA:
  - C(16,3) = 560: 16*15*14/6 = 3360/6 = 560. OK.
  - Horizontale: 4 reda * C(4,3) = 4*4 = 16. OK.
  - Vertikale: isto 16. OK.
  - Dijagonale nagib +1: glavna (4 tacke, 4 trojke) + dve sporedne (po 3 tacke, po 1 trojka) = 6. OK.
  - Dijagonale nagib -1: isto 6. OK.
  - Ukupno kolinearnih: 16+16+6+6 = 44. OK.
  - 560 - 44 = 516. OK.
</script>
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
body{background:#0f172a;color:#e2e8f0;font-family:'Segoe UI',system-ui,-apple-system,sans-serif;line-height:1.7;padding:20px;max-width:860px;margin:0 auto}
h1{font-size:1.8rem;font-weight:800;background:linear-gradient(135deg,#60a5fa,#a78bfa,#34d399);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-align:center;margin-bottom:4px}
.subtitle{text-align:center;color:#94a3b8;font-size:1rem;margin-bottom:28px}
.card{background:#1e293b;border:1px solid #334155;border-radius:14px;padding:24px;margin-bottom:20px}
.card-title{font-size:1.15rem;font-weight:700;margin-bottom:14px;display:flex;align-items:center;gap:8px}
.card-title .icon{font-size:1.3rem}
.problem-statement{border-left:4px solid #a78bfa}
.problem-statement .problem-text{font-size:1.05rem;margin-bottom:18px;line-height:1.9}
.given-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:10px;margin-top:12px}
.given-item{background:#0f172a;border:1px solid #334155;border-radius:10px;padding:10px 14px;text-align:center;font-size:1rem;cursor:default;transition:border-color 0.2s,background 0.2s}
.given-item .label{font-size:0.85rem;color:#94a3b8;font-weight:600;margin-bottom:4px}
.given-item .value{font-size:1rem;color:#e2e8f0}
.given-item[data-option].correct{border-color:#34d399;background:rgba(52,211,153,0.1)}
.given-item[data-option]:hover{border-color:#60a5fa}
.plan-card{border-left:4px solid #60a5fa}
.plan-list{list-style:none;counter-reset:plan}
.plan-list li{counter-increment:plan;padding:6px 0;padding-left:32px;position:relative}
.plan-list li::before{content:counter(plan);position:absolute;left:0;top:6px;background:#60a5fa;color:#0f172a;width:22px;height:22px;border-radius:50%;font-size:0.78rem;font-weight:700;display:flex;align-items:center;justify-content:center}
details{margin:15px 0}
details summary{cursor:pointer;color:#60a5fa;font-weight:600;padding:6px 0;user-select:none}
details summary:hover{color:#93bbfc}
details[open] summary{margin-bottom:10px}
.theory-content p{margin-bottom:10px;color:#cbd5e1}
.theory-content .formula-box{background:#0f172a;border:1px solid #334155;border-radius:10px;padding:14px 18px;margin:12px 0;text-align:center}
.canvas-wrap{display:flex;justify-content:center;padding:10px 0}
canvas{border-radius:10px;max-width:100%;touch-action:none}
.step{margin-bottom:18px;padding:8px 12px;border-radius:8px;transition:border-left 0.2s,background 0.2s;cursor:pointer;border-left:3px solid transparent}
.step:hover,.step.active{border-left:3px solid #4ade80;background:rgba(74,222,128,0.04)}
.step:last-child{margin-bottom:0}
.step-badge{display:inline-block;background:#a78bfa;color:#0f172a;font-size:0.75rem;font-weight:700;padding:3px 10px;border-radius:6px;margin-bottom:8px}
.step-content{padding-left:4px;color:#cbd5e1}
.step-content p{margin-bottom:8px}
.math-block{background:rgba(56,189,248,0.08);border:1px solid rgba(56,189,248,0.15);border-radius:10px;padding:14px 18px;margin:10px 0;text-align:center;font-family:'Courier New',monospace}
.checkpoint{background:rgba(96,165,250,0.1);border:1px solid rgba(96,165,250,0.3);border-radius:10px;padding:12px 16px;margin:15px 0;color:#93bbfc;font-weight:600}
.checkpoint summary{color:#60a5fa;font-weight:600}
.checkpoint-answer{color:#4ade80;font-weight:600;margin-top:6px}
.insight-card{border-left:4px solid #a78bfa;background:linear-gradient(135deg,#1e293b,#1e2940)}
.insight-text{color:#c4b5fd;font-size:1.02rem}
.final-answer-card{border:2px solid #34d399;background:linear-gradient(135deg,#1e293b,#162a2a)}
.final-answer-value{font-size:1.5rem;text-align:center;color:#4ade80;font-weight:700;margin:12px 0}
.final-answer-label{text-align:center;color:#34d399;font-size:0.95rem;font-weight:600}
.final-options{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:10px;margin-top:16px}
.final-option{background:#0f172a;border:1px solid #334155;border-radius:10px;padding:10px;text-align:center;font-size:1rem;transition:all 0.2s}
.final-option.correct-option{border-color:#34d399;background:rgba(52,211,153,0.12);color:#4ade80;font-weight:700}
.verification{margin-top:16px;padding:12px 16px;background:rgba(52,211,153,0.06);border:1px solid rgba(52,211,153,0.2);border-radius:10px;color:#86efac;font-size:0.92rem}
.pitfall{display:flex;gap:10px;padding:10px 0;border-bottom:1px solid #334155}
.pitfall:last-child{border-bottom:none}
.pitfall-icon{color:#f87171;font-size:1.1rem;flex-shrink:0;margin-top:2px}
.pitfall-text{color:#cbd5e1}
.challenge-card{border-left:4px solid #34d399}
.challenge-text{color:#86efac;font-style:italic}
.drag-hint{text-align:center;color:#64748b;font-size:0.82rem;margin-top:6px}
.table-block{overflow-x:auto;margin:10px 0}
.table-block table{border-collapse:collapse;margin:0 auto;font-size:0.92rem}
.table-block th,.table-block td{border:1px solid #334155;padding:6px 12px;text-align:center;color:#cbd5e1}
.table-block th{background:#0f172a;color:#60a5fa;font-weight:600}
.table-block tr:nth-child(even){background:rgba(30,41,59,0.5)}
@media(max-width:700px){
  body{padding:12px}
  h1{font-size:1.4rem}
  .given-grid{grid-template-columns:repeat(auto-fit,minmax(100px,1fr))}
  .final-options{grid-template-columns:repeat(auto-fit,minmax(100px,1fr))}
}
</style>
</head>
<body>

<h1>Broj razlicitih trouglova na mrezi 4x4</h1>
<p class="subtitle">Kombinatorika | Prebrojavanje, kolinearnost, mreze tacaka</p>

<!-- Iskaz zadatka -->
<div class="card problem-statement">
  <div class="card-title"><span class="icon">&#128220;</span> Postavka zadatka</div>
  <div class="problem-text">
    Broj razlicitih trouglova cija temena \(A_k(x_k, y_k)\), \(k \in \{1, 2, 3\}\), imaju celobrojne koordinate iz skupa \(\{1, 2, 3, 4\}\) jednak je:
  </div>
  <div class="given-grid">
    <div class="given-item answer-option" data-option="A">
      <div class="label">(A)</div>
      <div class="value">\(524\)</div>
    </div>
    <div class="given-item answer-option" data-option="B">
      <div class="label">(B)</div>
      <div class="value">\(540\)</div>
    </div>
    <div class="given-item answer-option" data-option="C">
      <div class="label">(C)</div>
      <div class="value">\(532\)</div>
    </div>
    <div class="given-item answer-option" data-option="D">
      <div class="label">(D)</div>
      <div class="value">\(510\)</div>
    </div>
    <div class="given-item answer-option" data-option="E">
      <div class="label">(E)</div>
      <div class="value">\(516\)</div>
    </div>
  </div>
</div>

<!-- Plan resavanja -->
<div class="card plan-card">
  <div class="card-title"><span class="icon">&#128204;</span> Plan resavanja</div>
  <ol class="plan-list">
    <li>Prebrojati ukupan broj tacaka na mrezi \(4 \times 4\)</li>
    <li>Izracunati broj nacina da se izaberu 3 tacke: \(\binom{16}{3}\)</li>
    <li>Pronaci sve kolinearne trojke (horizontale, vertikale, dijagonale)</li>
    <li>Sistematski proveriti da nema kolinearnih trojki za ostale nagibe</li>
    <li>Oduzeti kolinearne trojke od ukupnog broja izbora</li>
  </ol>
</div>

<!-- Teorija -->
<div class="card">
  <div class="card-title"><span class="icon">&#128218;</span> Teorijska osnova</div>
  <details>
    <summary>&#128208; Kljucne formule i pojmovi (klikni da otvoris)</summary>
    <div class="theory-content">
      <p><strong>Kombinacije:</strong> Broj nacina da se od \(n\) objekata izabere \(k\), bez obzira na redosled:</p>
      <div class="formula-box">
        \[\binom{n}{k} = \frac{n!}{k!(n-k)!}\]
      </div>
      <p><strong>Kolinearnost:</strong> Tri tacke \(A(x_1,y_1)\), \(B(x_2,y_2)\), \(C(x_3,y_3)\) su kolinearne (leze na istoj pravoj) ako i samo ako je:</p>
      <div class="formula-box">
        \[\begin{vmatrix} x_1 & y_1 & 1 \\ x_2 & y_2 & 1 \\ x_3 & y_3 & 1 \end{vmatrix} = 0\]
      </div>
      <p><strong>Trougao:</strong> Tri tacke odredjuju trougao ako i samo ako nisu kolinearne. Dakle, broj trouglova = ukupan broj trojki tacaka minus broj kolinearnih trojki.</p>
      <p><strong>Princip komplementarnog brojavanja:</strong> Ponekad je lakse prebrojati ono sto ne zelimo (kolinearne trojke) i oduzeti od ukupnog broja.</p>
    </div>
  </details>
</div>

<!-- Vizuelni prikaz -->
<div class="card">
  <div class="card-title"><span class="icon">&#128202;</span> Vizuelni prikaz</div>
  <div class="canvas-wrap">
    <canvas id="vizCanvas" width="760" height="520"></canvas>
  </div>
  <p class="drag-hint">Kliknite na tacke mreze da vidite koje prave prolaze kroz njih. Kolinearne trojke su oznacene bojama.</p>
</div>

<!-- Koraci resenja -->
<div class="card">
  <div class="card-title"><span class="icon">&#128736;</span> Resenje korak po korak</div>

  <div class="step" id="step1">
    <div class="step-badge">KORAK 1</div>
    <div class="step-content">
      <p><strong>Prebrojavanje tacaka na mrezi</strong></p>
      <p>Svako teme trougla ima koordinate \((x, y)\) gde \(x, y \in \{1, 2, 3, 4\}\). Dakle, imamo mrezu dimenzija \(4 \times 4\):</p>
      <div class="math-block">
        \[\text{Ukupan broj tacaka} = 4 \times 4 = 16\]
      </div>
    </div>
  </div>

  <div class="step" id="step2">
    <div class="step-badge">KORAK 2</div>
    <div class="step-content">
      <p><strong>Ukupan broj nacina da se izaberu 3 tacke</strong></p>
      <p>Biramo 3 tacke od 16 bez obzira na redosled:</p>
      <div class="math-block">
        \[\binom{16}{3} = \frac{16 \cdot 15 \cdot 14}{3 \cdot 2 \cdot 1} = \frac{3360}{6} = 560\]
      </div>
      <p>Svaka trojka tacaka koje nisu kolinearne odredjuje tacno jedan trougao.</p>
    </div>
  </div>

  <details class="checkpoint">
    <summary>Proveri se: Koliko ima ukupno tacaka i trojki?</summary>
    <div class="checkpoint-answer">
      Tacaka: \(4 \times 4 = 16\). Trojki: \(\binom{16}{3} = 560\).
    </div>
  </details>

  <div class="step" id="step3">
    <div class="step-badge">KORAK 3</div>
    <div class="step-content">
      <p><strong>Kolinearne trojke na horizontalama</strong></p>
      <p>Na mrezi imamo 4 horizontalne prave (za svaku vrednost \(y \in \{1,2,3,4\}\)). Na svakoj horizontali leze tacno 4 tacke.</p>
      <p>Broj kolinearnih trojki na jednoj horizontali:</p>
      <div class="math-block">
        \[\binom{4}{3} = 4\]
      </div>
      <p>Za sve 4 horizontale:</p>
      <div class="math-block">
        \[\text{Horizontale: } 4 \times 4 = 16 \text{ trojki}\]
      </div>
    </div>
  </div>

  <div class="step" id="step4">
    <div class="step-badge">KORAK 4</div>
    <div class="step-content">
      <p><strong>Kolinearne trojke na vertikalama</strong></p>
      <p>Analogno, imamo 4 vertikalne prave (za svaku vrednost \(x \in \{1,2,3,4\}\)). Na svakoj vertikali leze tacno 4 tacke.</p>
      <div class="math-block">
        \[\text{Vertikale: } 4 \times \binom{4}{3} = 4 \times 4 = 16 \text{ trojki}\]
      </div>
    </div>
  </div>

  <details class="checkpoint">
    <summary>Proveri se: Zasto su horizontale i vertikale simetricne?</summary>
    <div class="checkpoint-answer">
      Mreza je simetricna u odnosu na zamenu uloga koordinata \(x\) i \(y\). Svaka horizontala \(y = c\) ima 4 tacke, i svaka vertikala \(x = c\) ima 4 tacke. Stoga oba slucaja daju isti broj trojki: \(4 \times 4 = 16\).
    </div>
  </details>

  <div class="step" id="step5">
    <div class="step-badge">KORAK 5</div>
    <div class="step-content">
      <p><strong>Kolinearne trojke na dijagonalama nagiba \(+1\)</strong></p>
      <p>Dijagonale oblika \(y = x + c\) koje sadrze bar 3 tacke mreze:</p>
      <div class="table-block">
        <table>
          <tr><th>Jednacina</th><th>Tacke na mrezi</th><th>Broj tacaka</th><th>\(\binom{n}{3}\)</th></tr>
          <tr><td>\(y = x\)</td><td>\((1,1),\,(2,2),\,(3,3),\,(4,4)\)</td><td>4</td><td>4</td></tr>
          <tr><td>\(y = x + 1\)</td><td>\((1,2),\,(2,3),\,(3,4)\)</td><td>3</td><td>1</td></tr>
          <tr><td>\(y = x - 1\)</td><td>\((2,1),\,(3,2),\,(4,3)\)</td><td>3</td><td>1</td></tr>
        </table>
      </div>
      <p>Dijagonale sa 2 ili manje tacaka ne doprinose kolinearnim trojkama.</p>
      <div class="math-block">
        \[\text{Dijagonale nagiba } +1: \quad 4 + 1 + 1 = 6 \text{ trojki}\]
      </div>
    </div>
  </div>

  <div class="step" id="step6">
    <div class="step-badge">KORAK 6</div>
    <div class="step-content">
      <p><strong>Kolinearne trojke na dijagonalama nagiba \(-1\)</strong></p>
      <p>Dijagonale oblika \(y = -x + c\) koje sadrze bar 3 tacke mreze:</p>
      <div class="table-block">
        <table>
          <tr><th>Jednacina</th><th>Tacke na mrezi</th><th>Broj tacaka</th><th>\(\binom{n}{3}\)</th></tr>
          <tr><td>\(y = -x + 5\)</td><td>\((1,4),\,(2,3),\,(3,2),\,(4,1)\)</td><td>4</td><td>4</td></tr>
          <tr><td>\(y = -x + 4\)</td><td>\((1,3),\,(2,2),\,(3,1)\)</td><td>3</td><td>1</td></tr>
          <tr><td>\(y = -x + 6\)</td><td>\((2,4),\,(3,3),\,(4,2)\)</td><td>3</td><td>1</td></tr>
        </table>
      </div>
      <div class="math-block">
        \[\text{Dijagonale nagiba } -1: \quad 4 + 1 + 1 = 6 \text{ trojki}\]
      </div>
    </div>
  </div>

  <div class="step" id="step7">
    <div class="step-badge">KORAK 7</div>
    <div class="step-content">
      <p><strong>Provera ostalih nagiba</strong></p>
      <p>Treba proveriti da nijedna prava drugog nagiba ne sadrzi 3 ili vise tacaka mreze. Razmatramo najcesce nagibe:</p>
      <p><strong>Nagib \(\pm\frac{1}{2}\):</strong> Za \(y = \frac{x}{2} + c\), celobrojno \(y\) dobijamo samo za parne \(x\). U mrezi su to \(x = 2\) i \(x = 4\), dakle najvise 2 tacke. Slicno za nagib \(-\frac{1}{2}\).</p>
      <p><strong>Nagib \(\pm 2\):</strong> Za \(y = 2x + c\), vec za \(x = 1\) i \(x = 2\) razlika u \(y\) je 2. Npr. za \(c = -1\): tacke \((1, 1)\) i \((2, 3)\), ali \((3, 5)\) je van mreze. Najvise 2 tacke.</p>
      <p><strong>Nagib \(\pm 3, \pm\frac{1}{3}, \pm\frac{2}{3}, \pm\frac{3}{2}\):</strong> Analognom analizom, nijedan od ovih nagiba ne moze dati 3 tacke u mrezi \(\{1,2,3,4\}^2\).</p>
      <div class="math-block">
        \[\text{Ostali nagibi: } 0 \text{ trojki}\]
      </div>
    </div>
  </div>

  <details class="checkpoint">
    <summary>Proveri se: Zasto nagib \(\frac{1}{2}\) ne moze dati 3 tacke?</summary>
    <div class="checkpoint-answer">
      <p>Na pravoj nagiba \(\frac{1}{2}\), da bi \(y\) bio ceo broj, \(x\) mora biti paran. U skupu \(\{1,2,3,4\}\) samo su \(x=2\) i \(x=4\) parni, dakle na takvoj pravoj mogu lezati najvise 2 tacke mreze -- nedovoljno za trojku.</p>
    </div>
  </details>

  <div class="step" id="step8">
    <div class="step-badge">KORAK 8</div>
    <div class="step-content">
      <p><strong>Sumiranje kolinearnih trojki</strong></p>
      <div class="table-block">
        <table>
          <tr><th>Tip prave</th><th>Broj trojki</th></tr>
          <tr><td>Horizontale</td><td>16</td></tr>
          <tr><td>Vertikale</td><td>16</td></tr>
          <tr><td>Dijagonale nagiba \(+1\)</td><td>6</td></tr>
          <tr><td>Dijagonale nagiba \(-1\)</td><td>6</td></tr>
          <tr><td>Ostali nagibi</td><td>0</td></tr>
          <tr><td><strong>Ukupno</strong></td><td><strong>44</strong></td></tr>
        </table>
      </div>
      <div class="math-block">
        \[\text{Ukupno kolinearnih trojki} = 16 + 16 + 6 + 6 = 44\]
      </div>
    </div>
  </div>

  <div class="step" id="step9">
    <div class="step-badge">KORAK 9</div>
    <div class="step-content">
      <p><strong>Konacan rezultat</strong></p>
      <p>Broj razlicitih trouglova = ukupan broj trojki - kolinearne trojke:</p>
      <div class="math-block">
        \[\text{Broj trouglova} = \binom{16}{3} - 44 = 560 - 44 = \boxed{516}\]
      </div>
    </div>
  </div>

  <details class="checkpoint">
    <summary>Proveri se: Proveri racun korak po korak</summary>
    <div class="checkpoint-answer">
      <p>\(\binom{16}{3} = \frac{16 \cdot 15 \cdot 14}{6} = \frac{3360}{6} = 560\)</p>
      <p>Kolinearne: \(16 + 16 + 6 + 6 = 44\)</p>
      <p>Trouglovi: \(560 - 44 = 516\)</p>
    </div>
  </details>
</div>

<!-- Kljucni uvid -->
<div class="card insight-card">
  <div class="card-title"><span class="icon">&#128161;</span> Kljucni uvid</div>
  <p class="insight-text">
    Kljuc resenja je <strong>komplementarno brojanje</strong>: umesto da direktno brojimo trouglove, biramo sve moguce trojke tacaka (\(\binom{16}{3} = 560\)) i oduzimamo kolinearne trojke (44). Sistematicna klasifikacija pravih po nagibu -- horizontale, vertikale, dijagonale nagiba \(\pm 1\) -- pokriva sve mogucnosti na mrezi \(4 \times 4\), jer prave drugih nagiba nemaju dovoljno celobrojnih tacaka u malom opsegu \(\{1,2,3,4\}\).
  </p>
</div>

<!-- Konacan odgovor -->
<div class="card final-answer-card">
  <div class="card-title"><span class="icon">&#9989;</span> Konacan odgovor</div>
  <div class="final-answer-label">Broj razlicitih trouglova na mrezi \(4 \times 4\) jednak je:</div>
  <div class="final-answer-value">\(560 - 44 = 516\)</div>
  <div class="final-answer-label" style="margin-top:12px">Tacan odgovor je (E)</div>
  <div class="final-options">
    <div class="final-option" data-option="A">(A) \(524\)</div>
    <div class="final-option" data-option="B">(B) \(540\)</div>
    <div class="final-option" data-option="C">(C) \(532\)</div>
    <div class="final-option" data-option="D">(D) \(510\)</div>
    <div class="final-option correct-option" data-option="E">(E) \(516\)</div>
  </div>
  <div class="verification">
    <strong>&#128269; Verifikacija:</strong>
    <ul style="margin-top:8px;padding-left:20px;">
      <li>Tacke mreze: \(4 \times 4 = 16\)</li>
      <li>Trojki ukupno: \(\binom{16}{3} = 560\)</li>
      <li>Horizontale: \(4 \times \binom{4}{3} = 16\) kolinearnih trojki</li>
      <li>Vertikale: \(4 \times \binom{4}{3} = 16\) kolinearnih trojki</li>
      <li>Dijagonale nagiba \(+1\): 3 dijagonale sa \(\geq 3\) tacke daju \(4 + 1 + 1 = 6\) trojki</li>
      <li>Dijagonale nagiba \(-1\): analogno \(4 + 1 + 1 = 6\) trojki</li>
      <li>Ostali nagibi: 0 trojki (nema pravih sa \(\geq 3\) tacke)</li>
      <li>Ukupno kolinearnih: \(16 + 16 + 6 + 6 = 44\)</li>
      <li>Trouglovi: \(560 - 44 = 516\)</li>
    </ul>
  </div>
</div>

<!-- Zamke -->
<div class="card">
  <div class="card-title"><span class="icon">&#9888;</span> Ceste greske</div>
  <div class="pitfall">
    <span class="pitfall-icon">&#10060;</span>
    <span class="pitfall-text">
      <strong>Zaboraviti dijagonale.</strong> Mnogi prebroje samo horizontalne i vertikalne kolinearne trojke (\(16 + 16 = 32\)) i dobiju \(560 - 32 = 528\), sto nije medju ponudjenim odgovorima. Neophodno je ukljuciti i dijagonale oba nagiba.
    </span>
  </div>
  <div class="pitfall">
    <span class="pitfall-icon">&#10060;</span>
    <span class="pitfall-text">
      <strong>Propustiti sporedne dijagonale.</strong> Osim glavnih dijagonala sa 4 tacke, postoje i dijagonale sa 3 tacke (paralelne glavnima). Na mrezi \(4 \times 4\) to su po dve dijagonale za svaki nagib, svaka sa po jednom kolinearnom trojkom.
    </span>
  </div>
  <div class="pitfall">
    <span class="pitfall-icon">&#10060;</span>
    <span class="pitfall-text">
      <strong>Dodati nepostojece kolinearne trojke.</strong> Na mrezi \(4 \times 4\), prave nagiba \(\frac{1}{2}\), \(2\), \(\frac{1}{3}\), \(3\) itd. nemaju 3 celobrojne tacke u opsegu \(\{1,2,3,4\}\). Pogresno dodavanje ovih trojki daje manji rezultat od tacnog.
    </span>
  </div>
  <div class="pitfall">
    <span class="pitfall-icon">&#10060;</span>
    <span class="pitfall-text">
      <strong>Pogresno racunanje \(\binom{16}{3}\).</strong> Cesta greska je koristiti \(\frac{16 \cdot 15 \cdot 14}{3}\) (deljenje sa 3 umesto sa \(3! = 6\)), sto daje 1120 umesto 560.
    </span>
  </div>
</div>

<!-- Izazov -->
<div class="card challenge-card">
  <div class="card-title"><span class="icon">&#127942;</span> Dodatni izazov</div>
  <p class="challenge-text">
    Koliko razlicitih trouglova ima na mrezi \(5 \times 5\) (temena sa celobrojnim koordinatama iz skupa \(\{1, 2, 3, 4, 5\}\))?
  </p>
  <details>
    <summary>&#128161; Nagovestaj</summary>
    <div class="theory-content">
      <p>Na mrezi \(5 \times 5\) imamo 25 tacaka i \(\binom{25}{3} = 2300\) trojki. Sada treba pazljivije prebrojati kolinearne trojke: horizontala i vertikala svaka ima po 5 tacaka, pa je \(\binom{5}{3} = 10\) trojki po pravoj. Dijagonale imaju razlicite duzine (2, 3, 4, 5 tacaka). Ali paznja: na mrezi \(5 \times 5\) vec postoje prave nagiba \(\frac{1}{2}\) sa 3 tacke, npr. \((1,1), (3,2), (5,3)\)! Koliko takvih pravih ima?</p>
    </div>
  </details>
</div>

<script>
(() => {
  const canvas = document.getElementById('vizCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width, H = canvas.height;

  var BG = '#1e293b';
  var GRID_LINE = '#334155';
  var DOT_COLOR = '#e2e8f0';
  var BLUE = '#60a5fa';
  var PURPLE = '#a78bfa';
  var GREEN = '#4ade80';
  var PINK = '#f472b6';
  var YELLOW = '#fbbf24';
  var MUTED = '#94a3b8';
  var DARK = '#0f172a';

  var gridSize = 4;
  var margin = 80;
  var cellSize = Math.min((W - 2 * margin) / (gridSize - 1), (H - 2 * margin - 60) / (gridSize - 1));
  var offsetX = (W - cellSize * (gridSize - 1)) / 2;
  var offsetY = 50 + (H - 60 - cellSize * (gridSize - 1)) / 2;

  var selectedPoint = null;
  var hoveredPoint = null;

  /* Sve kolinearne trojke grupisane po tipu */
  var collinearGroups = [];

  /* Horizontale */
  for (var row = 1; row <= 4; row++) {
    var pts = [];
    for (var col = 1; col <= 4; col++) pts.push([col, row]);
    var triples = getCombinations3(pts);
    for (var t = 0; t < triples.length; t++) {
      collinearGroups.push({type: 'horizontal', color: BLUE, pts: triples[t]});
    }
  }

  /* Vertikale */
  for (var col = 1; col <= 4; col++) {
    var pts = [];
    for (var row = 1; row <= 4; row++) pts.push([col, row]);
    var triples = getCombinations3(pts);
    for (var t = 0; t < triples.length; t++) {
      collinearGroups.push({type: 'vertical', color: PURPLE, pts: triples[t]});
    }
  }

  /* Dijagonale nagiba +1 */
  var diag1Lines = [
    [[1,1],[2,2],[3,3],[4,4]],
    [[1,2],[2,3],[3,4]],
    [[2,1],[3,2],[4,3]]
  ];
  for (var d = 0; d < diag1Lines.length; d++) {
    var triples = getCombinations3(diag1Lines[d]);
    for (var t = 0; t < triples.length; t++) {
      collinearGroups.push({type: 'diag+1', color: GREEN, pts: triples[t]});
    }
  }

  /* Dijagonale nagiba -1 */
  var diagN1Lines = [
    [[1,4],[2,3],[3,2],[4,1]],
    [[1,3],[2,2],[3,1]],
    [[2,4],[3,3],[4,2]]
  ];
  for (var d = 0; d < diagN1Lines.length; d++) {
    var triples = getCombinations3(diagN1Lines[d]);
    for (var t = 0; t < triples.length; t++) {
      collinearGroups.push({type: 'diag-1', color: PINK, pts: triples[t]});
    }
  }

  function getCombinations3(arr) {
    var result = [];
    for (var i = 0; i < arr.length; i++) {
      for (var j = i + 1; j < arr.length; j++) {
        for (var k = j + 1; k < arr.length; k++) {
          result.push([arr[i], arr[j], arr[k]]);
        }
      }
    }
    return result;
  }

  function gridToCanvas(gx, gy) {
    return [
      offsetX + (gx - 1) * cellSize,
      offsetY + (gridSize - gy) * cellSize
    ];
  }

  function canvasToGrid(cx, cy) {
    var gx = Math.round((cx - offsetX) / cellSize) + 1;
    var gy = gridSize - Math.round((cy - offsetY) / cellSize);
    if (gx >= 1 && gx <= 4 && gy >= 1 && gy <= 4) return [gx, gy];
    return null;
  }

  function pointsMatch(a, b) {
    return a[0] === b[0] && a[1] === b[1];
  }

  function tripleContainsPoint(triple, pt) {
    for (var i = 0; i < triple.length; i++) {
      if (pointsMatch(triple[i], pt)) return true;
    }
    return false;
  }

  function draw() {
    ctx.fillStyle = BG;
    ctx.fillRect(0, 0, W, H);

    /* Naslov */
    ctx.fillStyle = MUTED;
    ctx.font = 'bold 13px sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    ctx.fillText('Mreza 4\u00D74: 16 tacaka, 560 trojki, 44 kolinearne, 516 trouglova', W / 2, 10);

    /* Grid linije */
    ctx.strokeStyle = GRID_LINE;
    ctx.lineWidth = 0.5;
    for (var i = 1; i <= gridSize; i++) {
      var p1 = gridToCanvas(1, i);
      var p2 = gridToCanvas(gridSize, i);
      ctx.beginPath();
      ctx.moveTo(p1[0], p1[1]);
      ctx.lineTo(p2[0], p2[1]);
      ctx.stroke();

      p1 = gridToCanvas(i, 1);
      p2 = gridToCanvas(i, gridSize);
      ctx.beginPath();
      ctx.moveTo(p1[0], p1[1]);
      ctx.lineTo(p2[0], p2[1]);
      ctx.stroke();
    }

    /* Ako imamo selektovanu tacku, crtamo kolinearne trojke */
    var highlightedTriples = [];
    if (selectedPoint) {
      for (var g = 0; g < collinearGroups.length; g++) {
        if (tripleContainsPoint(collinearGroups[g].pts, selectedPoint)) {
          highlightedTriples.push(collinearGroups[g]);
        }
      }

      /* Nacrtaj linije kolinearnih trojki */
      for (var h = 0; h < highlightedTriples.length; h++) {
        var grp = highlightedTriples[h];
        ctx.strokeStyle = grp.color;
        ctx.lineWidth = 2.5;
        ctx.globalAlpha = 0.6;
        var c0 = gridToCanvas(grp.pts[0][0], grp.pts[0][1]);
        var c2 = gridToCanvas(grp.pts[2][0], grp.pts[2][1]);
        ctx.beginPath();
        ctx.moveTo(c0[0], c0[1]);
        ctx.lineTo(c2[0], c2[1]);
        ctx.stroke();
        ctx.globalAlpha = 1;
      }
    }

    /* Ose labele */
    ctx.fillStyle = MUTED;
    ctx.font = '12px sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    for (var i = 1; i <= gridSize; i++) {
      var p = gridToCanvas(i, 1);
      ctx.fillText(String(i), p[0], offsetY + (gridSize - 1) * cellSize + 16);
    }
    ctx.textAlign = 'right';
    ctx.textBaseline = 'middle';
    for (var i = 1; i <= gridSize; i++) {
      var p = gridToCanvas(1, i);
      ctx.fillText(String(i), offsetX - 16, p[1]);
    }
    ctx.textAlign = 'center';
    ctx.fillText('x', W / 2, offsetY + (gridSize - 1) * cellSize + 34);
    ctx.save();
    ctx.translate(offsetX - 38, offsetY + (gridSize - 1) * cellSize / 2);
    ctx.rotate(-Math.PI / 2);
    ctx.fillText('y', 0, 0);
    ctx.restore();

    /* Tacke mreze */
    for (var x = 1; x <= gridSize; x++) {
      for (var y = 1; y <= gridSize; y++) {
        var cp = gridToCanvas(x, y);
        var isSelected = selectedPoint && pointsMatch(selectedPoint, [x, y]);
        var isHovered = hoveredPoint && pointsMatch(hoveredPoint, [x, y]);

        /* Proveri da li je tacka u nekoj istaknutoj trojci */
        var inHighlighted = false;
        var highlightColor = DOT_COLOR;
        for (var h = 0; h < highlightedTriples.length; h++) {
          if (tripleContainsPoint(highlightedTriples[h].pts, [x, y])) {
            inHighlighted = true;
            highlightColor = highlightedTriples[h].color;
            break;
          }
        }

        var radius = isSelected ? 8 : (isHovered ? 7 : (inHighlighted ? 6 : 5));

        if (isSelected) {
          ctx.fillStyle = YELLOW;
          ctx.shadowColor = YELLOW;
          ctx.shadowBlur = 12;
        } else if (inHighlighted) {
          ctx.fillStyle = highlightColor;
          ctx.shadowColor = highlightColor;
          ctx.shadowBlur = 8;
        } else {
          ctx.fillStyle = DOT_COLOR;
          ctx.shadowBlur = 0;
        }

        ctx.beginPath();
        ctx.arc(cp[0], cp[1], radius, 0, Math.PI * 2);
        ctx.fill();
        ctx.shadowBlur = 0;
      }
    }

    /* Info panel dole */
    var infoY = offsetY + (gridSize - 1) * cellSize + 56;

    ctx.fillStyle = DARK;
    ctx.strokeStyle = GRID_LINE;
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.roundRect(40, infoY, W - 80, 120, 10);
    ctx.fill();
    ctx.stroke();

    if (selectedPoint) {
      ctx.fillStyle = YELLOW;
      ctx.font = 'bold 13px sans-serif';
      ctx.textAlign = 'left';
      ctx.textBaseline = 'top';
      ctx.fillText('Tacka (' + selectedPoint[0] + ', ' + selectedPoint[1] + '): ' + highlightedTriples.length + ' kolinearnih trojki prolazi kroz nju', 60, infoY + 12);

      /* Prebrojimo po tipu */
      var countH = 0, countV = 0, countD1 = 0, countDN1 = 0;
      for (var h = 0; h < highlightedTriples.length; h++) {
        if (highlightedTriples[h].type === 'horizontal') countH++;
        else if (highlightedTriples[h].type === 'vertical') countV++;
        else if (highlightedTriples[h].type === 'diag+1') countD1++;
        else if (highlightedTriples[h].type === 'diag-1') countDN1++;
      }

      ctx.font = '12px sans-serif';
      var ty = infoY + 34;
      if (countH > 0) { ctx.fillStyle = BLUE; ctx.fillText('Horizontala: ' + countH + ' trojki', 60, ty); ty += 18; }
      if (countV > 0) { ctx.fillStyle = PURPLE; ctx.fillText('Vertikala: ' + countV + ' trojki', 60, ty); ty += 18; }
      if (countD1 > 0) { ctx.fillStyle = GREEN; ctx.fillText('Dijagonala (+1): ' + countD1 + ' trojki', 60, ty); ty += 18; }
      if (countDN1 > 0) { ctx.fillStyle = PINK; ctx.fillText('Dijagonala (-1): ' + countDN1 + ' trojki', 60, ty); ty += 18; }
    } else {
      ctx.fillStyle = MUTED;
      ctx.font = '13px sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'top';
      ctx.fillText('Kliknite na tacku mreze da vidite kolinearne trojke', W / 2, infoY + 14);

      ctx.font = '12px sans-serif';
      var legY = infoY + 40;
      var legX = 60;
      var items = [
        {color: BLUE, text: 'Horizontale: 16 trojki'},
        {color: PURPLE, text: 'Vertikale: 16 trojki'},
        {color: GREEN, text: 'Dijagonale (+1): 6 trojki'},
        {color: PINK, text: 'Dijagonale (-1): 6 trojki'}
      ];
      ctx.textAlign = 'left';
      for (var i = 0; i < items.length; i++) {
        var ix = legX + (i % 2) * 310;
        var iy = legY + Math.floor(i / 2) * 22;
        ctx.fillStyle = items[i].color;
        ctx.fillRect(ix, iy + 2, 14, 10);
        ctx.fillStyle = '#cbd5e1';
        ctx.fillText(items[i].text, ix + 20, iy);
      }

      ctx.fillStyle = YELLOW;
      ctx.font = 'bold 12px sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('Ukupno kolinearnih: 44  |  Trouglova: 560 \u2212 44 = 516', W / 2, legY + 52);
    }
  }

  function getMousePos(e) {
    var rect = canvas.getBoundingClientRect();
    var scaleX = canvas.width / rect.width;
    var scaleY = canvas.height / rect.height;
    return [
      (e.clientX - rect.left) * scaleX,
      (e.clientY - rect.top) * scaleY
    ];
  }

  canvas.addEventListener('mousemove', function(e) {
    var pos = getMousePos(e);
    hoveredPoint = canvasToGrid(pos[0], pos[1]);

    /* Proveri da li je dovoljno blizu tacke */
    if (hoveredPoint) {
      var cp = gridToCanvas(hoveredPoint[0], hoveredPoint[1]);
      var dx = pos[0] - cp[0], dy = pos[1] - cp[1];
      if (dx * dx + dy * dy > 400) hoveredPoint = null;
    }

    canvas.style.cursor = hoveredPoint ? 'pointer' : 'default';
    draw();
  });

  canvas.addEventListener('click', function(e) {
    var pos = getMousePos(e);
    var gp = canvasToGrid(pos[0], pos[1]);

    if (gp) {
      var cp = gridToCanvas(gp[0], gp[1]);
      var dx = pos[0] - cp[0], dy = pos[1] - cp[1];
      if (dx * dx + dy * dy <= 400) {
        if (selectedPoint && pointsMatch(selectedPoint, gp)) {
          selectedPoint = null;
        } else {
          selectedPoint = gp;
        }
      } else {
        selectedPoint = null;
      }
    } else {
      selectedPoint = null;
    }
    draw();
  });

  canvas.addEventListener('mouseleave', function() {
    hoveredPoint = null;
    draw();
  });

  canvas.addEventListener('touchstart', function(e) {
    e.preventDefault();
    if (e.touches.length > 0) {
      var touch = e.touches[0];
      var rect = canvas.getBoundingClientRect();
      var scaleX = canvas.width / rect.width;
      var scaleY = canvas.height / rect.height;
      var pos = [(touch.clientX - rect.left) * scaleX, (touch.clientY - rect.top) * scaleY];
      var gp = canvasToGrid(pos[0], pos[1]);
      if (gp) {
        var cp = gridToCanvas(gp[0], gp[1]);
        var dx = pos[0] - cp[0], dy = pos[1] - cp[1];
        if (dx * dx + dy * dy <= 600) {
          if (selectedPoint && pointsMatch(selectedPoint, gp)) {
            selectedPoint = null;
          } else {
            selectedPoint = gp;
          }
        } else {
          selectedPoint = null;
        }
      } else {
        selectedPoint = null;
      }
      draw();
    }
  });

  /* Klik na odgovore */
  document.addEventListener('DOMContentLoaded', function() {
    var options = document.querySelectorAll('.answer-option');
    options.forEach(function(opt) {
      opt.addEventListener('click', function() {
        options.forEach(function(o) { o.classList.remove('correct'); o.style.borderColor = ''; });
        if (opt.getAttribute('data-option') === 'E') {
          opt.classList.add('correct');
        } else {
          opt.style.borderColor = '#f87171';
          setTimeout(function() { opt.style.borderColor = ''; }, 1200);
        }
      });
    });

    var steps = document.querySelectorAll('.step');
    steps.forEach(function(step) {
      step.addEventListener('click', function() {
        steps.forEach(function(s) { s.classList.remove('active'); });
        step.classList.add('active');
      });
    });
  });

  draw();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{"title":"Broj razlicitih trouglova na mrezi 4x4","subject":"math","unit":"combinatorics","topic_tags":["kombinatorika","prebrojavanje","kolinearnost","mreze tacaka","komplementarno brojanje","binomni koeficijenti"]}
BRAINSPARK_META-->