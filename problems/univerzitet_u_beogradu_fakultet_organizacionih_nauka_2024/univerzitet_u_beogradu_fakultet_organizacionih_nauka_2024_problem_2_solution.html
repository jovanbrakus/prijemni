<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Izracunavanje vrednosti izraza sa stepenima i korenima</title>
<script type="text/info" id="logic-scratchpad">
PROBLEM:
Compute: (36.5 + ((1/25)^(-1/2) - 3/2))^(1/2) · (∛27 + 2³ - 1)^(-1/2)

Looking at the PDF carefully, the expression is:
  (36.5 + ((1/25)^(-1/2) - 3/2))^(1/2) · (∛27 + 2³ - 1)^(-1/2)

The entire first group including 36.5 is under the exponent 1/2.

STEP-BY-STEP:

1. Compute (1/25)^(-1/2):
   Negative exponent flips the base: (1/25)^(-1/2) = 25^(1/2) = √25 = 5

2. Compute the inner parenthesis: 5 - 3/2 = 10/2 - 3/2 = 7/2

3. Add 36.5: Note that 36.5 = 73/2
   36.5 + 7/2 = 73/2 + 7/2 = 80/2 = 40

4. Apply exponent 1/2: 40^(1/2) = √40 = √(4·10) = 2√10

5. Compute ∛27: = 3
6. Compute 2³: = 8
7. Sum: 3 + 8 - 1 = 10

8. Apply exponent -1/2: 10^(-1/2) = 1/√10

9. Multiply:
   2√10 · (1/√10) = 2√10/√10 = 2

ANSWER: D) 2

VERIFICATION:
  First factor: (36.5 + 5 - 1.5)^0.5 = (40)^0.5 = 6.3246 = 2√10
  Second factor: (3 + 8 - 1)^(-0.5) = 10^(-0.5) = 0.31623 = 1/√10
  Product: 6.3246 × 0.31623 ≈ 2.0000 ✓

Also note: 36.5 = 36,5 in Serbian notation (decimal comma).
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  text-align: center;
}

.subtitle {
  color: #94a3b8;
  text-align: center;
  font-size: 1.05rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.35rem;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.1rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56,189,248,0.06);
  border: 1px solid rgba(56,189,248,0.12);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 100px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
  font-weight: 600;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  transition: border-color 0.2s ease, background 0.2s ease;
  cursor: default;
}

.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 14px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.plan-card {
  border-left: 4px solid #a78bfa;
}

.theory-card details {
  margin: 15px 0;
}

.theory-card summary {
  cursor: pointer;
  font-size: 1.05rem;
  font-weight: 600;
  color: #a78bfa;
  padding: 8px 0;
  user-select: none;
}

.theory-card ul {
  list-style: none;
  padding: 12px 0;
}

.theory-card li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #e2e8f0;
}

.theory-card li:last-child {
  border-bottom: none;
}

/* Step styling */
.step {
  display: flex;
  gap: 16px;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 12px;
  border-left: 3px solid transparent;
  transition: border-color 0.2s ease, background 0.2s ease;
  cursor: pointer;
}

.step:hover, .step.active {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}

.step-badge {
  width: 32px;
  height: 32px;
  min-width: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  margin-bottom: 8px;
  color: #e2e8f0;
  font-size: 1.05rem;
}

.step-content p {
  color: #cbd5e1;
  margin-bottom: 8px;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 6px;
}

/* Check yourself */
.checkpoint {
  margin: 20px 0;
  background: rgba(167,139,250,0.06);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
}

.checkpoint summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 0.95rem;
  user-select: none;
}

.checkpoint .answer {
  padding-top: 10px;
  color: #4ade80;
  font-weight: 600;
}

/* Key Insight */
.insight-card {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid rgba(96,165,250,0.25);
  text-align: center;
  padding: 28px;
}

.insight-card .big-formula {
  font-size: 1.4rem;
  margin: 16px 0;
  color: #4ade80;
}

/* Final Answer */
.final-answer-card {
  border: 2px solid #4ade80;
  background: linear-gradient(135deg, rgba(52,211,153,0.08), rgba(74,222,128,0.04));
  text-align: center;
  padding: 28px;
}

.final-answer-card h2 {
  color: #4ade80;
  justify-content: center;
}

.final-answer-value {
  font-size: 1.8rem;
  color: #4ade80;
  font-weight: 800;
  margin: 16px 0;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 20px 0;
}

.option-card {
  padding: 10px 22px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: #1e293b;
  color: #94a3b8;
  font-size: 1rem;
  font-weight: 600;
  transition: all 0.2s ease;
}

.option-card.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.1);
  color: #4ade80;
  box-shadow: 0 0 20px rgba(74,222,128,0.15);
}

.verification-note {
  color: #94a3b8;
  font-size: 0.92rem;
  margin-top: 14px;
  padding-top: 14px;
  border-top: 1px solid #334155;
  text-align: left;
}

/* Pitfalls */
.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #cbd5e1;
}

.pitfall-list li:last-child {
  border-bottom: none;
}

.pitfall-label {
  color: #e09468;
  font-weight: 700;
  margin-right: 6px;
}

/* Challenge */
.challenge-card {
  border-left: 4px solid #f472b6;
}

.challenge-card details {
  margin: 15px 0;
}

.challenge-card summary {
  cursor: pointer;
  color: #f472b6;
  font-weight: 600;
  user-select: none;
}

/* Canvas */
canvas {
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  touch-action: none;
  max-width: 100%;
}

.canvas-hint {
  text-align: center;
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

.highlight-blue {
  color: #60a5fa;
  font-weight: 600;
}

.highlight-green {
  color: #4ade80;
  font-weight: 600;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step { padding: 12px; }
  .given-grid { gap: 8px; }
  .given-item { min-width: 70px; padding: 10px 12px; }
  .final-answer-value { font-size: 1.4rem; }
  .options-row { gap: 8px; }
  .option-card { padding: 8px 14px; font-size: 0.9rem; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Izracunavanje vrednosti izraza sa stepenima i korenima</h1>
  <p class="subtitle">Algebra &mdash; stepeni, koreni, racionalni eksponenti</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>
      Vrednost izraza:
    </p>
    <div class="math-block">
      \[ \left(36{,}5 + \left(\left(\frac{1}{25}\right)^{-\frac{1}{2}} - \frac{3}{2}\right)\right)^{\!\frac{1}{2}} \cdot \left(\sqrt[3]{27} + 2^3 - 1\right)^{-\frac{1}{2}} \]
    </div>
    <p>jednaka je:</p>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(2\sqrt{10}\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(20\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(10\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(2\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(1\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>
      Racunamo izraz u dva dela (dva faktora). U prvom faktoru primenjujemo pravilo za negativan
      racionalan eksponent da bismo izracunali \(\left(\frac{1}{25}\right)^{-1/2}\), zatim
      sabiramo sa \(36{,}5\) i vadimo kvadratni koren. U drugom faktoru izracunavamo kubni koren
      i stepen, pa primenimo negativan eksponent. Na kraju pomnozimo oba faktora.
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card theory-card">
    <details>
      <summary>Kljucne formule i teoreme</summary>
      <ul>
        <li>
          <strong>Negativan eksponent:</strong>
          \( a^{-n} = \dfrac{1}{a^n} \), pa \(\left(\dfrac{1}{25}\right)^{-1/2} = 25^{1/2} = \sqrt{25}\)
        </li>
        <li>
          <strong>Racionalan eksponent:</strong>
          \( a^{1/n} = \sqrt[n]{a} \), posebno \( a^{1/2} = \sqrt{a} \) i \( a^{1/3} = \sqrt[3]{a} \)
        </li>
        <li>
          <strong>Negativan racionalan eksponent:</strong>
          \( a^{-1/2} = \dfrac{1}{\sqrt{a}} \)
        </li>
        <li>
          <strong>Mnozenje korena:</strong>
          \( \sqrt{a} \cdot \dfrac{1}{\sqrt{b}} = \sqrt{\dfrac{a}{b}} \)
        </li>
      </ul>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <h2>Vizuelni prikaz racunanja</h2>
    <p style="color:#94a3b8; margin-bottom: 14px;">
      Dijagram prikazuje tok izracunavanja oba faktora i njihov proizvod.
    </p>
    <canvas id="calcCanvas" width="700" height="420"></canvas>
    <p class="canvas-hint">Interaktivni dijagram toka racunanja</p>
  </div>

  <!-- Step-by-step Solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step" tabindex="0">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Izracunamo \(\left(\dfrac{1}{25}\right)^{-\frac{1}{2}}\)</h3>
        <p>
          Primenimo pravilo za <span class="highlight-blue">negativan eksponent</span>: negativan eksponent
          "okrece" razlomak, a zatim vadimo koren:
        </p>
        <div class="math-block">
          \[ \left(\frac{1}{25}\right)^{-\frac{1}{2}} = 25^{\frac{1}{2}} = \sqrt{25} = 5 \]
        </div>
        <p class="note">
          Alternativno: \(\left(\frac{1}{25}\right)^{-1/2} = \left(\frac{1}{5^2}\right)^{-1/2} = \left(5^{-2}\right)^{-1/2} = 5^{(-2) \cdot (-1/2)} = 5^1 = 5\).
        </p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step" tabindex="0">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Izracunamo unutrasnju zagradu prvog faktora</h3>
        <p>
          Oduzimamo \(\frac{3}{2}\) od rezultata:
        </p>
        <div class="math-block">
          \[ \left(\frac{1}{25}\right)^{-\frac{1}{2}} - \frac{3}{2} = 5 - \frac{3}{2} = \frac{10}{2} - \frac{3}{2} = \frac{7}{2} \]
        </div>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step" tabindex="0">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Sabiramo sa \(36{,}5\)</h3>
        <p>
          Primetimo da je \(36{,}5 = \frac{73}{2}\):
        </p>
        <div class="math-block">
          \[ 36{,}5 + \frac{7}{2} = \frac{73}{2} + \frac{7}{2} = \frac{80}{2} = 40 \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri se: Koliko iznosi sadrzaj velike zagrade prvog faktora?</summary>
      <div class="answer">
        Sadrzaj velike zagrade je \(36{,}5 + 3{,}5 = 40\). Ovo je lep, okrugao broj, sto je dobar znak!
      </div>
    </details>

    <!-- Step 4 -->
    <div class="step" tabindex="0">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Primenimo eksponent \(\frac{1}{2}\) &mdash; prvi faktor</h3>
        <p>
          Vadimo <span class="highlight-blue">kvadratni koren</span> iz 40:
        </p>
        <div class="math-block">
          \[ 40^{\frac{1}{2}} = \sqrt{40} = \sqrt{4 \cdot 10} = 2\sqrt{10} \]
        </div>
        <p class="note">
          Prvi faktor iznosi \(2\sqrt{10}\).
        </p>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step" tabindex="0">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Izracunamo sadrzaj zagrade drugog faktora</h3>
        <p>
          Racunamo svaki sabirak pojedinacno:
        </p>
        <div class="math-block">
          \[ \sqrt[3]{27} + 2^3 - 1 = 3 + 8 - 1 = 10 \]
        </div>
        <p>
          Posto je \(27 = 3^3\), kubni koren je \(3\). Stepen \(2^3 = 8\).
        </p>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri se: Sta znaci eksponent \(-\frac{1}{2}\)?</summary>
      <div class="answer">
        Eksponent \(-\frac{1}{2}\) znaci: prvo izvaditi kvadratni koren (eksponent \(\frac{1}{2}\)),
        a zatim uzeti reciprocnu vrednost (negativan eksponent).
        Dakle \(10^{-1/2} = \frac{1}{\sqrt{10}}\).
      </div>
    </details>

    <!-- Step 6 -->
    <div class="step" tabindex="0">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Primenimo eksponent \(-\frac{1}{2}\) &mdash; drugi faktor</h3>
        <p>
          Primenimo <span class="highlight-pink">negativan racionalan eksponent</span>:
        </p>
        <div class="math-block">
          \[ 10^{-\frac{1}{2}} = \frac{1}{\sqrt{10}} = \frac{1}{\sqrt{10}} \]
        </div>
        <p class="note">
          Drugi faktor iznosi \(\frac{1}{\sqrt{10}}\).
        </p>
      </div>
    </div>

    <!-- Step 7 -->
    <div class="step" tabindex="0">
      <div class="step-badge">7</div>
      <div class="step-content">
        <h3>Pomnozimo oba faktora</h3>
        <p>
          Sada mnozimo prvi i drugi faktor:
        </p>
        <div class="math-block">
          \[ 2\sqrt{10} \cdot \frac{1}{\sqrt{10}} = \frac{2\sqrt{10}}{\sqrt{10}} = 2 \]
        </div>
        <p>
          Koreni \(\sqrt{10}\) se <span class="highlight-green">skracuju</span>, i ostaje samo \(2\).
        </p>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details class="checkpoint">
      <summary>Proveri se: Numericka verifikacija kalkulatorom</summary>
      <div class="answer">
        <p>
          Prvi faktor: \(\sqrt{40} \approx 6{,}3246\)
        </p>
        <p>
          Drugi faktor: \(\frac{1}{\sqrt{10}} \approx 0{,}31623\)
        </p>
        <p>
          Proizvod: \(6{,}3246 \times 0{,}31623 \approx 2{,}0000\). Tacno!
        </p>
      </div>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="card insight-card">
    <h2 style="justify-content: center;">Kljucno zapazanje</h2>
    <p>
      Ovaj zadatak je zapravo elegantan: oba faktora sadrze \(\sqrt{10}\), ali u "suprotnim
      smerovima" &mdash; prvi faktor daje \(2\sqrt{10}\), a drugi \(\frac{1}{\sqrt{10}}\).
      Kada ih pomnozimo, koreni se skrate i ostaje samo koeficijent \(2\).
    </p>
    <div class="big-formula">
      \[ 2\sqrt{10} \cdot \frac{1}{\sqrt{10}} = 2 \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer-card">
    <h2>Konacan odgovor</h2>
    <div class="final-answer-value">
      \( 2 \)
    </div>
    <div class="options-row">
      <div class="option-card">(A) \(2\sqrt{10}\)</div>
      <div class="option-card">(B) \(20\)</div>
      <div class="option-card">(C) \(10\)</div>
      <div class="option-card correct">(D) \(2\)</div>
      <div class="option-card">(E) \(1\)</div>
    </div>
    <p class="verification-note">
      <strong>Verifikacija:</strong> Racunamo svaki faktor zasebno.
      Prvi: \(\sqrt{36{,}5 + 3{,}5} = \sqrt{40} = 2\sqrt{10}\).
      Drugi: \((3+8-1)^{-1/2} = 10^{-1/2} = \frac{1}{\sqrt{10}}\).
      Proizvod: \(2\sqrt{10} \cdot \frac{1}{\sqrt{10}} = 2\).
      Rezultat se poklapa sa opcijom <strong>(D)</strong>.
    </p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Ceste greske</h2>
    <ul class="pitfall-list">
      <li>
        <span class="pitfall-label">Greska 1:</span>
        Pogresno tumacenje \(\left(\frac{1}{25}\right)^{-1/2}\). Negativan eksponent znaci reciprocnu
        vrednost, pa se \(\frac{1}{25}\) pretvara u \(25\), a tek onda se vadi koren.
        Cesta greska je da se prvo vadi koren iz \(\frac{1}{25}\) (dobije se \(\frac{1}{5}\)),
        pa tek onda uzme reciprocna vrednost &mdash; sto ipak daje isti rezultat \(5\), ali
        ako se pogresno primeni redosled, moze se dobiti \(\frac{1}{5}\).
      </li>
      <li>
        <span class="pitfall-label">Greska 2:</span>
        Zaboraviti da je \(36{,}5\) unutar velike zagrade koja se stepuje na \(\frac{1}{2}\).
        Ako se \(36{,}5\) protumaci kao sabirak koji stoji van korena, dobija se sasvim drugaciji
        (i netacan) rezultat.
      </li>
      <li>
        <span class="pitfall-label">Greska 3:</span>
        Zaustavljanje na prvom faktoru. Ako se izracuna samo \(\sqrt{40} = 2\sqrt{10}\) i odmah
        oznaci (A), zaboravlja se mnozenje sa drugim faktorom. Odgovor (A) je "zamka" za ucenike
        koji previde drugi deo izraza.
      </li>
      <li>
        <span class="pitfall-label">Greska 4:</span>
        Pogresno racunanje \(\sqrt[3]{27} + 2^3 - 1\). Neki ucenici protumace \(2^3 - 1\) kao \(2^2 = 4\)
        (primena eksponenta na razliku), umesto da odvojeno izracunaju \(2^3 = 8\) i oduzmu \(1\).
      </li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>
      Izracunajte vrednost slicnog izraza:
    </p>
    <div class="math-block">
      \[ \left(12{,}5 + \left(\left(\frac{1}{9}\right)^{-\frac{1}{2}} - \frac{1}{2}\right)\right)^{\!\frac{1}{2}} \cdot \left(\sqrt[3]{64} + 3^2 - 9\right)^{-\frac{1}{2}} \]
    </div>
    <details>
      <summary>Nagovestaj</summary>
      <p style="padding-top: 10px; color: #cbd5e1;">
        Primenite isti postupak: \(\left(\frac{1}{9}\right)^{-1/2} = \sqrt{9} = 3\).
        Unutrasnja zagrada: \(3 - \frac{1}{2} = \frac{5}{2}\).
        Sabiranje: \(12{,}5 + 2{,}5 = 15\), pa \(\sqrt{15}\).
        Za drugi faktor: \(\sqrt[3]{64} = 4\), pa \(4 + 9 - 9 = 4\), i \(4^{-1/2} = \frac{1}{2}\).
        Konacno: \(\sqrt{15} \cdot \frac{1}{2} = \frac{\sqrt{15}}{2}\).
      </p>
    </details>
  </div>

</div>

<script>
(() => {
  // Calculation flow diagram canvas
  const canvas = document.getElementById('calcCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = 700;
  const H = 420;

  // Animation state
  let highlightStep = -1;
  let animFrame = 0;

  function drawRoundedRect(x, y, w, h, r, fillColor, strokeColor, lineWidth) {
    ctx.beginPath();
    ctx.moveTo(x + r, y);
    ctx.lineTo(x + w - r, y);
    ctx.arcTo(x + w, y, x + w, y + r, r);
    ctx.lineTo(x + w, y + h - r);
    ctx.arcTo(x + w, y + h, x + w - r, y + h, r);
    ctx.lineTo(x + r, y + h);
    ctx.arcTo(x, y + h, x, y + h - r, r);
    ctx.lineTo(x, y + r);
    ctx.arcTo(x, y, x + r, y, r);
    ctx.closePath();
    if (fillColor) {
      ctx.fillStyle = fillColor;
      ctx.fill();
    }
    if (strokeColor) {
      ctx.strokeStyle = strokeColor;
      ctx.lineWidth = lineWidth || 1.5;
      ctx.stroke();
    }
  }

  function drawArrow(x1, y1, x2, y2, color) {
    ctx.strokeStyle = color;
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.stroke();

    var angle = Math.atan2(y2 - y1, x2 - x1);
    var arrowLen = 8;
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.moveTo(x2, y2);
    ctx.lineTo(x2 - arrowLen * Math.cos(angle - 0.4), y2 - arrowLen * Math.sin(angle - 0.4));
    ctx.lineTo(x2 - arrowLen * Math.cos(angle + 0.4), y2 - arrowLen * Math.sin(angle + 0.4));
    ctx.closePath();
    ctx.fill();
  }

  function drawBox(x, y, w, h, label, value, color, isHighlight) {
    var fill = isHighlight ? color.replace('0.1', '0.25') : color;
    var stroke = isHighlight ? '#e2e8f0' : color.replace('0.1', '0.4');
    drawRoundedRect(x, y, w, h, 8, fill, stroke, isHighlight ? 2.5 : 1.5);

    ctx.fillStyle = '#94a3b8';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText(label, x + w / 2, y + 18);

    ctx.fillStyle = isHighlight ? '#fff' : '#e2e8f0';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.fillText(value, x + w / 2, y + h - 12);
  }

  function draw() {
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Title
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Tok izracunavanja', W / 2, 25);

    // --- FIRST FACTOR (left branch) ---
    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('PRVI FAKTOR', 190, 50);

    // Row 1: (1/25)^(-1/2)
    drawBox(20, 60, 150, 45, '(1/25)^(-1/2)', '= 5', 'rgba(96,165,250,0.1)', highlightStep === 0);
    drawBox(200, 60, 100, 45, '3/2', '= 1,5', 'rgba(96,165,250,0.1)', highlightStep === 0);

    // Arrow down
    drawArrow(95, 105, 170, 130, '#334155');
    drawArrow(250, 105, 200, 130, '#334155');

    // Row 2: subtraction
    drawBox(110, 130, 150, 45, '5 - 3/2', '= 7/2 = 3,5', 'rgba(96,165,250,0.1)', highlightStep === 1);

    // Arrow down
    drawArrow(185, 175, 185, 195, '#334155');

    // Row 3: add 36.5
    drawBox(20, 195, 100, 45, '36,5', '= 73/2', 'rgba(96,165,250,0.1)', highlightStep === 2);
    drawArrow(70, 240, 140, 265, '#334155');
    drawArrow(185, 240, 170, 265, '#334155');

    // Row 4: sum = 40
    drawBox(90, 265, 150, 45, '36,5 + 3,5', '= 40', 'rgba(167,139,250,0.1)', highlightStep === 2);

    // Arrow down
    drawArrow(165, 310, 165, 330, '#334155');

    // Row 5: sqrt(40)
    drawBox(80, 330, 170, 45, '\u221A40 = \u221A(4\u00B710)', '= 2\u221A10', 'rgba(52,211,153,0.1)', highlightStep === 3);

    // --- SECOND FACTOR (right branch) ---
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('DRUGI FAKTOR', 530, 50);

    // Row 1: individual terms
    drawBox(390, 60, 90, 45, '\u221B27', '= 3', 'rgba(244,114,182,0.1)', highlightStep === 4);
    drawBox(500, 60, 80, 45, '2\u00B3', '= 8', 'rgba(244,114,182,0.1)', highlightStep === 4);
    drawBox(600, 60, 70, 45, '-1', '-1', 'rgba(244,114,182,0.1)', highlightStep === 4);

    // Arrows down
    drawArrow(435, 105, 490, 130, '#334155');
    drawArrow(540, 105, 510, 130, '#334155');
    drawArrow(635, 105, 540, 130, '#334155');

    // Row 2: sum = 10
    drawBox(430, 130, 150, 45, '3 + 8 - 1', '= 10', 'rgba(244,114,182,0.1)', highlightStep === 4);

    // Arrow down
    drawArrow(505, 175, 505, 330, '#334155');

    // Row 5: 10^(-1/2)
    drawBox(430, 330, 150, 45, '10^(-1/2)', '= 1/\u221A10', 'rgba(52,211,153,0.1)', highlightStep === 5);

    // --- MULTIPLICATION ---
    drawArrow(250, 352, 310, 392, '#4ade80');
    drawArrow(430, 352, 370, 392, '#4ade80');

    // Multiply symbol
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 22px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('\u00D7', 340, 358);

    // Final result
    drawRoundedRect(280, 380, 160, 36, 8, 'rgba(74,222,128,0.15)', '#4ade80', 2.5);
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 18px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('= 2', 360, 405);

    // Annotation for cancellation
    ctx.fillStyle = '#94a3b8';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('2\u221A10 \u00B7 1/\u221A10 = 2  (\u221A10 se skrati)', 360, 370);
  }

  // Click to highlight steps
  var boxes = [
    {x: 20, y: 60, w: 300, h: 45, step: 0},
    {x: 110, y: 130, w: 150, h: 45, step: 1},
    {x: 20, y: 195, w: 220, h: 115, step: 2},
    {x: 80, y: 330, w: 170, h: 45, step: 3},
    {x: 390, y: 60, w: 280, h: 115, step: 4},
    {x: 430, y: 330, w: 150, h: 45, step: 5}
  ];

  function getPos(e) {
    var rect = canvas.getBoundingClientRect();
    var scaleX = W / rect.width;
    var scaleY = H / rect.height;
    if (e.touches) {
      return {
        x: (e.touches[0].clientX - rect.left) * scaleX,
        y: (e.touches[0].clientY - rect.top) * scaleY
      };
    }
    return {
      x: (e.clientX - rect.left) * scaleX,
      y: (e.clientY - rect.top) * scaleY
    };
  }

  canvas.addEventListener('click', function(e) {
    var pos = getPos(e);
    var hit = -1;
    for (var i = 0; i < boxes.length; i++) {
      var b = boxes[i];
      if (pos.x >= b.x && pos.x <= b.x + b.w && pos.y >= b.y && pos.y <= b.y + b.h) {
        hit = b.step;
        break;
      }
    }
    highlightStep = (highlightStep === hit) ? -1 : hit;
    draw();
  });

  canvas.addEventListener('touchstart', function(e) {
    e.preventDefault();
    var pos = getPos(e);
    var hit = -1;
    for (var i = 0; i < boxes.length; i++) {
      var b = boxes[i];
      if (pos.x >= b.x && pos.x <= b.x + b.w && pos.y >= b.y && pos.y <= b.y + b.h) {
        hit = b.step;
        break;
      }
    }
    highlightStep = (highlightStep === hit) ? -1 : hit;
    draw();
  });

  // Step click interactivity
  document.querySelectorAll('.step').forEach(function(step) {
    step.addEventListener('click', function() {
      document.querySelectorAll('.step').forEach(function(s) { s.classList.remove('active'); });
      step.classList.toggle('active');
    });
  });

  draw();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Izracunavanje vrednosti izraza sa stepenima i korenima",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["stepeni", "koreni", "racionalni eksponenti", "negativan eksponent", "kvadratni koren", "kubni koren", "izracunavanje izraza"]
}
BRAINSPARK_META-->