<!DOCTYPE html>
<html lang="sr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Zbir koeficijenata polinoma ‚Äì Re≈°enje</title>

  <script type="text/info" id="logic-scratchpad">
    PROBLEM:
    P(x) = (x^3 + 3x^2 - x - 2)^2024
    Naƒái zbir svih koeficijenata.

    KLJUƒåNA IDEJA:
    Zbir svih koeficijenata polinoma P(x) jednak je P(1).
    Dokaz: Ako je P(x) = a_n*x^n + ... + a_1*x + a_0,
           tada P(1) = a_n + ... + a_1 + a_0 = zbir koeficijenata.

    IZRAƒåUNAVANJE:
    Unutra≈°nji polinom q(x) = x^3 + 3x^2 - x - 2
    q(1) = 1^3 + 3*1^2 - 1 - 2
         = 1 + 3 - 1 - 2
         = 1

    Dakle:
    P(1) = (q(1))^2024 = 1^2024 = 1

    ODGOVOR: A) 1

    PROVERA:
    - x=0 daje slobodni ƒçlan: (0 + 0 - 0 - 2)^2024 = (-2)^2024 = 2^2024 > 0 ‚úì
    - Zbir koeficijenata treba biti 1, ≈°to je razumno.
  </script>

  <script>
    MathJax = {
      tex: {
        inlineMath: [['\\(', '\\)'], ['$', '$']],
        displayMath: [['\\[', '\\]']]
      },
      svg: { fontCache: 'global' }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      background: #0f172a;
      color: #e2e8f0;
      font-family: 'Segoe UI', system-ui, sans-serif;
      font-size: 16px;
      line-height: 1.7;
      padding: 24px 16px 60px;
    }

    .container {
      max-width: 820px;
      margin: 0 auto;
    }

    h1 {
      font-size: 1.6rem;
      font-weight: 700;
      color: #60a5fa;
      margin-bottom: 8px;
      text-align: center;
    }

    .subtitle {
      text-align: center;
      color: #94a3b8;
      font-size: 0.9rem;
      margin-bottom: 32px;
    }

    .card {
      background: #1e293b;
      border: 1px solid #334155;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
    }

    .card h2 {
      font-size: 1.1rem;
      font-weight: 600;
      color: #a78bfa;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .card h2 .icon {
      font-size: 1.2rem;
    }

    .problem-statement .problem-text {
      font-size: 1.05rem;
      color: #e2e8f0;
      margin-bottom: 20px;
    }

    /* Answer options grid */
    .given-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 10px;
      margin-top: 16px;
    }

    .option-btn {
      background: #0f172a;
      border: 2px solid #334155;
      border-radius: 8px;
      padding: 10px 12px;
      color: #e2e8f0;
      cursor: pointer;
      font-size: 0.95rem;
      text-align: center;
      transition: border-color 0.2s, background 0.2s, transform 0.1s;
    }

    .option-btn:hover {
      border-color: #60a5fa;
      background: #1e3a5f;
      transform: translateY(-1px);
    }

    .option-btn.selected {
      border-color: #60a5fa;
      background: #1e3a5f;
    }

    .option-btn.correct {
      border-color: #4ade80;
      background: #052e16;
      color: #4ade80;
    }

    .option-btn.wrong {
      border-color: #f87171;
      background: #2d0a0a;
      color: #f87171;
    }

    .check-btn {
      margin-top: 14px;
      padding: 10px 24px;
      background: #60a5fa;
      border: none;
      border-radius: 8px;
      color: #0f172a;
      font-weight: 700;
      font-size: 0.95rem;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
    }

    .check-btn:hover {
      background: #93c5fd;
      transform: translateY(-1px);
    }

    .feedback {
      margin-top: 12px;
      font-weight: 600;
      font-size: 0.95rem;
      min-height: 1.5em;
    }

    /* Plan steps */
    .plan-steps {
      list-style: none;
      counter-reset: plan;
    }

    .plan-steps li {
      counter-increment: plan;
      display: flex;
      align-items: flex-start;
      gap: 12px;
      margin-bottom: 12px;
    }

    .plan-steps li::before {
      content: counter(plan);
      background: #a78bfa;
      color: #0f172a;
      font-weight: 700;
      font-size: 0.8rem;
      min-width: 24px;
      height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 2px;
      flex-shrink: 0;
    }

    /* Theory details */
    details {
      background: #0f172a;
      border: 1px solid #334155;
      border-radius: 8px;
      padding: 12px 16px;
      margin-top: 8px;
    }

    summary {
      cursor: pointer;
      color: #60a5fa;
      font-weight: 600;
      list-style: none;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    summary::-webkit-details-marker { display: none; }

    summary::before {
      content: '‚ñ∂';
      font-size: 0.75rem;
      transition: transform 0.2s;
    }

    details[open] summary::before {
      transform: rotate(90deg);
    }

    .theory-body {
      margin-top: 12px;
      color: #cbd5e1;
      font-size: 0.95rem;
    }

    .theory-body p { margin-bottom: 10px; }

    /* Canvas */
    .canvas-wrap {
      width: 100%;
      overflow: hidden;
      border-radius: 8px;
    }

    canvas {
      display: block;
      width: 100%;
      height: auto;
      border-radius: 8px;
      background: #0f172a;
      touch-action: none;
    }

    /* Steps */
    .step {
      border-left: 3px solid #334155;
      padding-left: 16px;
      margin-bottom: 20px;
      position: relative;
    }

    .step-badge {
      display: inline-block;
      background: #1e293b;
      border: 1px solid #334155;
      color: #94a3b8;
      font-size: 0.75rem;
      font-weight: 600;
      padding: 2px 8px;
      border-radius: 4px;
      margin-bottom: 8px;
    }

    .step h3 {
      font-size: 1rem;
      font-weight: 600;
      color: #e2e8f0;
      margin-bottom: 8px;
    }

    .step p, .step ul { color: #cbd5e1; font-size: 0.95rem; margin-bottom: 8px; }

    .checkpoint {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: #052e16;
      border: 1px solid #4ade80;
      border-radius: 6px;
      padding: 4px 10px;
      color: #4ade80;
      font-size: 0.85rem;
      font-weight: 600;
      margin-top: 4px;
    }

    /* Key insight */
    .key-insight {
      background: linear-gradient(135deg, #1e1b4b 0%, #1e293b 100%);
      border: 1px solid #a78bfa;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 24px;
    }

    .key-insight h2 {
      color: #a78bfa;
      font-size: 1.1rem;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .key-insight p { color: #c4b5fd; font-size: 0.95rem; }

    /* Final answer */
    .final-answer {
      background: linear-gradient(135deg, #052e16 0%, #1e293b 100%);
      border: 2px solid #4ade80;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
      text-align: center;
    }

    .final-answer h2 {
      color: #4ade80;
      font-size: 1.2rem;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .final-answer .answer-box {
      font-size: 1.5rem;
      font-weight: 700;
      color: #4ade80;
      background: #0f172a;
      border-radius: 8px;
      padding: 12px 24px;
      display: inline-block;
      margin-top: 8px;
    }

    /* Pitfalls */
    .pitfall-item {
      display: flex;
      gap: 12px;
      align-items: flex-start;
      margin-bottom: 12px;
    }

    .pitfall-icon {
      font-size: 1.2rem;
      flex-shrink: 0;
      margin-top: 1px;
    }

    .pitfall-text { color: #cbd5e1; font-size: 0.95rem; }
    .pitfall-text strong { color: #f472b6; }

    /* Challenge */
    .challenge-box {
      background: #0f172a;
      border: 1px dashed #a78bfa;
      border-radius: 8px;
      padding: 16px;
      color: #c4b5fd;
      font-size: 0.95rem;
    }

    .challenge-toggle {
      margin-top: 12px;
      background: none;
      border: 1px solid #a78bfa;
      border-radius: 6px;
      color: #a78bfa;
      padding: 6px 14px;
      cursor: pointer;
      font-size: 0.85rem;
      transition: background 0.2s;
    }

    .challenge-toggle:hover { background: #1e1b4b; }

    .challenge-answer {
      margin-top: 12px;
      color: #4ade80;
      display: none;
    }

    .challenge-answer.visible { display: block; }

    /* Formula highlight */
    .formula-highlight {
      background: #0f172a;
      border: 1px solid #60a5fa;
      border-radius: 8px;
      padding: 12px 16px;
      margin: 10px 0;
      text-align: center;
      font-size: 1.05rem;
    }

    /* Responsive */
    @media (max-width: 700px) {
      h1 { font-size: 1.3rem; }
      .given-grid { grid-template-columns: repeat(2, 1fr); }
      .card { padding: 16px; }
    }
  </style>
</head>
<body>
<div class="container">

  <h1>Zbir koeficijenata polinoma</h1>
  <p class="subtitle">FON Beograd ‚Äì Probni prijemni 2024 (prvi) ¬∑ Zadatak 14</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2><span class="icon">üìã</span> Tekst zadatka</h2>
    <div class="problem-text">
      Zbir svih koeficijenata polinoma
      \[P(x) = \left(x^3 + 3x^2 - x - 2\right)^{2024}\]
      jednak je:
    </div>

    <div class="given-grid">
      <button class="option-btn" data-option="A" onclick="selectOption(this)">A) \(1\)</button>
      <button class="option-btn" data-option="B" onclick="selectOption(this)">B) \(-2^{2024}\)</button>
      <button class="option-btn" data-option="C" onclick="selectOption(this)">C) \(-1\)</button>
      <button class="option-btn" data-option="D" onclick="selectOption(this)">D) \(0\)</button>
      <button class="option-btn" data-option="E" onclick="selectOption(this)">E) \(2^{2024}\)</button>
    </div>

    <button class="check-btn" onclick="checkAnswer()">Proveri odgovor</button>
    <div class="feedback" id="feedback"></div>
  </div>

  <!-- Plan -->
  <div class="card">
    <h2><span class="icon">üó∫Ô∏è</span> Plan re≈°avanja</h2>
    <ol class="plan-steps">
      <li>Prisetiti se kljuƒçne osobine polinoma: <strong>zbir koeficijenata = P(1)</strong>.</li>
      <li>Izraƒçunati vrednost unutra≈°njeg polinoma \(q(x) = x^3 + 3x^2 - x - 2\) za \(x = 1\).</li>
      <li>Podiƒái dobijenu vrednost na stepen \(2024\).</li>
    </ol>
  </div>

  <!-- Theory -->
  <div class="card">
    <h2><span class="icon">üìñ</span> Teorija</h2>
    <details>
      <summary>Zbir koeficijenata polinoma</summary>
      <div class="theory-body">
        <p>
          Neka je \(P(x) = a_n x^n + a_{n-1} x^{n-1} + \cdots + a_1 x + a_0\) polinom.
        </p>
        <p>
          <strong>Zbir svih koeficijenata</strong> je \(a_n + a_{n-1} + \cdots + a_1 + a_0\).
        </p>
        <p>
          Supstitucijom \(x = 1\) dobijamo:
          \[P(1) = a_n \cdot 1^n + a_{n-1} \cdot 1^{n-1} + \cdots + a_1 \cdot 1 + a_0 = a_n + a_{n-1} + \cdots + a_1 + a_0\]
        </p>
        <p>
          Dakle, <strong>zbir koeficijenata polinoma \(P(x)\) jednak je \(P(1)\)</strong>.
        </p>
        <p>
          Ova osobina va≈æi za svaki polinom i veoma je korisna jer elimini≈°e potrebu da se polinom razvija.
        </p>
      </div>
    </details>

    <details style="margin-top: 10px;">
      <summary>Kompozicija polinoma i supstitucija</summary>
      <div class="theory-body">
        <p>
          Ako je \(P(x) = [q(x)]^n\) gde je \(q(x)\) polinom, tada va≈æi:
          \[P(1) = [q(1)]^n\]
        </p>
        <p>
          Ovo sledi direktno iz definicije ‚Äì \(P(1)\) se dobija uvr≈°tavanjem \(x = 1\) u ceo izraz.
        </p>
      </div>
    </details>
  </div>

  <!-- Canvas Diagram -->
  <div class="card">
    <h2><span class="icon">üé®</span> Vizuelni prikaz</h2>
    <div class="canvas-wrap">
      <canvas id="diagram" width="780" height="340"></canvas>
    </div>
  </div>

  <!-- Step-by-Step -->
  <div class="card">
    <h2><span class="icon">üî¢</span> Korak po korak</h2>

    <div class="step">
      <span class="step-badge">Korak 1</span>
      <h3>Identifikujemo ≈°ta tra≈æimo</h3>
      <p>
        Tra≈æi se zbir svih koeficijenata polinoma \(P(x) = \left(x^3 + 3x^2 - x - 2\right)^{2024}\).
      </p>
      <p>
        Polinom \(P(x)\) ima veoma visok stepen (\(3 \cdot 2024 = 6072\)), pa bi razvijanje bilo
        praktiƒçno nemoguƒáe. Koristimo <strong>trik sa supstitucijom \(x = 1\)</strong>.
      </p>
    </div>

    <div class="step">
      <span class="step-badge">Korak 2</span>
      <h3>Primenjujemo kljuƒçnu osobinu</h3>
      <p>
        Zbir svih koeficijenata polinoma \(P(x)\) jednak je vrednosti polinoma u taƒçki \(x = 1\):
      </p>
      <div class="formula-highlight">
        \[\text{Zbir koeficijenata} = P(1)\]
      </div>
      <p>
        Dakle, potrebno je izraƒçunati:
        \[P(1) = \left(1^3 + 3 \cdot 1^2 - 1 - 2\right)^{2024}\]
      </p>
      <span class="checkpoint">‚úì Elimini≈°emo potrebu za razvijanjem polinoma</span>
    </div>

    <div class="step">
      <span class="step-badge">Korak 3</span>
      <h3>Izraƒçunavamo unutra≈°nji polinom za \(x = 1\)</h3>
      <p>
        Neka je \(q(x) = x^3 + 3x^2 - x - 2\). Raƒçunamo \(q(1)\):
      </p>
      <div class="formula-highlight">
        \[q(1) = 1^3 + 3 \cdot 1^2 - 1 - 2 = 1 + 3 - 1 - 2 = \mathbf{1}\]
      </div>
      <p>Sabiranje ide redom:</p>
      <ul style="list-style: disc; padding-left: 20px;">
        <li>\(1^3 = 1\)</li>
        <li>\(3 \cdot 1^2 = 3 \cdot 1 = 3\)</li>
        <li>\(-1\)</li>
        <li>\(-2\)</li>
        <li>Ukupno: \(1 + 3 - 1 - 2 = 4 - 3 = 1\)</li>
      </ul>
      <span class="checkpoint">‚úì q(1) = 1</span>
    </div>

    <div class="step">
      <span class="step-badge">Korak 4</span>
      <h3>Konaƒçni rezultat</h3>
      <p>
        Sada mo≈æemo izraƒçunati \(P(1)\):
      </p>
      <div class="formula-highlight">
        \[P(1) = \left(q(1)\right)^{2024} = 1^{2024} = \mathbf{1}\]
      </div>
      <p>
        Bez obzira na stepen, \(1\) podignuto na bilo koji stepen ostaje \(1\).
      </p>
      <span class="checkpoint">‚úì Zbir koeficijenata = 1</span>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="key-insight">
    <h2><span class="icon">üí°</span> Kljuƒçna ideja</h2>
    <p>
      Supstitucija \(x = 1\) u polinom daje zbir svih njegovih koeficijenata jer svaka stepenovanje
      \(x^k\) postaje \(1^k = 1\), pa ostaje samo suma koeficijenata. Ova tehnika je
      najefikasniji naƒçin da se izbegne razvijanje komplikovanih polinomnih izraza.
    </p>
  </div>

  <!-- Final Answer -->
  <div class="final-answer">
    <h2><span>‚úÖ</span> Konaƒçan odgovor</h2>
    <p style="color: #86efac; margin-bottom: 8px;">Zbir svih koeficijenata polinoma \(P(x)\) jednak je:</p>
    <div class="answer-box">\(P(1) = 1^{2024} = 1\)</div>
    <p style="margin-top: 16px; color: #4ade80; font-weight: 700; font-size: 1.1rem;">Odgovor: A) 1</p>
  </div>

  <!-- Pitfalls -->
  <div class="card">
    <h2><span class="icon">‚ö†Ô∏è</span> ƒåeste gre≈°ke</h2>

    <div class="pitfall-item">
      <span class="pitfall-icon">üî¥</span>
      <div class="pitfall-text">
        <strong>Pogre≈°na supstitucija:</strong> Neki uƒçenici poku≈°avaju da razviju polinom
        \(\left(x^3 + 3x^2 - x - 2\right)^{2024}\) direktno ‚Äì to je nemoguƒáe uraditi ruƒçno.
        Uvek koristiti osobinu \(P(1) =\) zbir koeficijenata.
      </div>
    </div>

    <div class="pitfall-item">
      <span class="pitfall-icon">üî¥</span>
      <div class="pitfall-text">
        <strong>Zabuna sa slobodnim ƒçlanom:</strong> Slobodni ƒçlan (\(x = 0\)) daje
        \((-2)^{2024} = 2^{2024}\), ≈°to je ponuƒëeni odgovor E) ‚Äì ali to nije zbir koeficijenata!
        Zbir koeficijenata se dobija uvr≈°tavanjem \(x = 1\), ne \(x = 0\).
      </div>
    </div>

    <div class="pitfall-item">
      <span class="pitfall-icon">üî¥</span>
      <div class="pitfall-text">
        <strong>Gre≈°ka u sabiranje:</strong> Treba pa≈æljivo sabirati \(1 + 3 - 1 - 2\):
        nije \(1 + 3 = 4\), pa \(4 - 1 - 2 = 1\) (taƒçno); paziti na znakove.
      </div>
    </div>
  </div>

  <!-- Challenge -->
  <div class="card">
    <h2><span class="icon">üèÜ</span> Izazovni zadatak</h2>
    <div class="challenge-box">
      <p>
        Neka je \(Q(x) = \left(x^3 + 3x^2 - x - 2\right)^{2024}\).
        Koliki je zbir koeficijenata polinoma \(Q(x)\) uz parne stepene (tj. koeficijenti uz
        \(x^0, x^2, x^4, \ldots\))?
      </p>
      <p style="margin-top: 8px; color: #94a3b8; font-size: 0.9rem;">
        <em>Hint: Razmatraj \(\frac{Q(1) + Q(-1)}{2}\).</em>
      </p>
      <button class="challenge-toggle" onclick="toggleChallenge()">Prika≈æi re≈°enje</button>
      <div class="challenge-answer" id="challengeAnswer">
        <p>
          Koristimo formulu:
          \[\frac{Q(1) + Q(-1)}{2} = \text{zbir koeficijenata uz parne stepene}\]
        </p>
        <p>
          \(Q(1) = 1^{2024} = 1\)
        </p>
        <p>
          \(Q(-1) = \left((-1)^3 + 3(-1)^2 - (-1) - 2\right)^{2024} = (-1 + 3 + 1 - 2)^{2024} = 1^{2024} = 1\)
        </p>
        <p>
          Dakle, zbir koeficijenata uz parne stepene = \(\dfrac{1 + 1}{2} = \mathbf{1}\).
        </p>
        <p style="margin-top: 6px; color: #94a3b8; font-size: 0.9rem;">
          (Ovo znaƒçi i da je zbir koeficijenata uz neparne stepene \(1 - 1 = 0\).)
        </p>
      </div>
    </div>
  </div>

</div><!-- end container -->

<script>
(function () {
  'use strict';

  // --- Answer checking ---
  let selectedOption = null;
  const CORRECT = 'A';

  window.selectOption = function (btn) {
    document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
    btn.classList.add('selected');
    selectedOption = btn.dataset.option;
    document.getElementById('feedback').textContent = '';
    document.querySelectorAll('.option-btn').forEach(b => {
      b.classList.remove('correct', 'wrong');
    });
  };

  window.checkAnswer = function () {
    if (!selectedOption) {
      document.getElementById('feedback').textContent = 'Molim te izaberi odgovor.';
      document.getElementById('feedback').style.color = '#94a3b8';
      return;
    }
    document.querySelectorAll('.option-btn').forEach(btn => {
      if (btn.dataset.option === CORRECT) btn.classList.add('correct');
      else if (btn.dataset.option === selectedOption && selectedOption !== CORRECT) btn.classList.add('wrong');
    });
    const fb = document.getElementById('feedback');
    if (selectedOption === CORRECT) {
      fb.textContent = 'Taƒçno! P(1) = 1^{2024} = 1';
      fb.style.color = '#4ade80';
    } else {
      fb.textContent = 'Nije taƒçno. Zbir koeficijenata je P(1) = 1. Poku≈°aj ponovo!';
      fb.style.color = '#f87171';
    }
  };

  // --- Challenge toggle ---
  window.toggleChallenge = function () {
    const el = document.getElementById('challengeAnswer');
    const btn = document.querySelector('.challenge-toggle');
    el.classList.toggle('visible');
    btn.textContent = el.classList.contains('visible') ? 'Sakrij re≈°enje' : 'Prika≈æi re≈°enje';
    if (el.classList.contains('visible') && window.MathJax) {
      MathJax.typesetPromise([el]).catch(() => {});
    }
  };

  // --- Canvas diagram ---
  function drawDiagram() {
    const canvas = document.getElementById('diagram');
    if (!canvas) return;

    const dpr = window.devicePixelRatio || 1;
    const W = canvas.parentElement.clientWidth || 780;
    const H = Math.round(W * 340 / 780);

    canvas.width = W * dpr;
    canvas.height = H * dpr;
    canvas.style.width = W + 'px';
    canvas.style.height = H + 'px';

    const ctx = canvas.getContext('2d');
    ctx.scale(dpr, dpr);

    const w = W, h = H;
    ctx.clearRect(0, 0, w, h);

    // Background
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, w, h);

    const cx = w / 2;
    const scale = w / 780;

    // Helper: rounded rect
    function roundRect(x, y, rw, rh, r, fill, stroke) {
      ctx.beginPath();
      ctx.moveTo(x + r, y);
      ctx.lineTo(x + rw - r, y);
      ctx.quadraticCurveTo(x + rw, y, x + rw, y + r);
      ctx.lineTo(x + rw, y + rh - r);
      ctx.quadraticCurveTo(x + rw, y + rh, x + rw - r, y + rh);
      ctx.lineTo(x + r, y + rh);
      ctx.quadraticCurveTo(x, y + rh, x, y + rh - r);
      ctx.lineTo(x, y + r);
      ctx.quadraticCurveTo(x, y, x + r, y);
      ctx.closePath();
      if (fill) { ctx.fillStyle = fill; ctx.fill(); }
      if (stroke) { ctx.strokeStyle = stroke; ctx.lineWidth = 1.5 * scale; ctx.stroke(); }
    }

    // Arrow
    function arrow(x1, y1, x2, y2, color) {
      ctx.strokeStyle = color;
      ctx.lineWidth = 2 * scale;
      ctx.beginPath();
      ctx.moveTo(x1, y1);
      ctx.lineTo(x2, y2);
      ctx.stroke();
      const angle = Math.atan2(y2 - y1, x2 - x1);
      const hs = 8 * scale;
      ctx.fillStyle = color;
      ctx.beginPath();
      ctx.moveTo(x2, y2);
      ctx.lineTo(x2 - hs * Math.cos(angle - 0.4), y2 - hs * Math.sin(angle - 0.4));
      ctx.lineTo(x2 - hs * Math.cos(angle + 0.4), y2 - hs * Math.sin(angle + 0.4));
      ctx.closePath();
      ctx.fill();
    }

    // --- Title line ---
    ctx.fillStyle = '#94a3b8';
    ctx.font = `${11 * scale}px 'Segoe UI', sans-serif`;
    ctx.textAlign = 'center';
    ctx.fillText('Vizuelizacija: Zbir koeficijenata = P(1)', cx, 22 * scale);

    // === Box 1: P(x) ===
    const b1x = 20 * scale, b1y = 44 * scale, b1w = 220 * scale, b1h = 60 * scale;
    roundRect(b1x, b1y, b1w, b1h, 10 * scale, '#1e293b', '#60a5fa');
    ctx.fillStyle = '#60a5fa';
    ctx.font = `bold ${12 * scale}px 'Segoe UI', sans-serif`;
    ctx.textAlign = 'center';
    ctx.fillText('Polinom', b1x + b1w / 2, b1y + 20 * scale);
    ctx.fillStyle = '#e2e8f0';
    ctx.font = `${11 * scale}px 'Segoe UI', sans-serif`;
    ctx.fillText('P(x) = (x¬≥+3x¬≤‚àíx‚àí2)¬≤‚Å∞¬≤‚Å¥', b1x + b1w / 2, b1y + 40 * scale);

    // === Box 2: Osobina ===
    const b2x = 280 * scale, b2y = 44 * scale, b2w = 220 * scale, b2h = 60 * scale;
    roundRect(b2x, b2y, b2w, b2h, 10 * scale, '#1e293b', '#a78bfa');
    ctx.fillStyle = '#a78bfa';
    ctx.font = `bold ${12 * scale}px 'Segoe UI', sans-serif`;
    ctx.textAlign = 'center';
    ctx.fillText('Osobina', b2x + b2w / 2, b2y + 20 * scale);
    ctx.fillStyle = '#e2e8f0';
    ctx.font = `${11 * scale}px 'Segoe UI', sans-serif`;
    ctx.fillText('Zbir koef. = P(1)', b2x + b2w / 2, b2y + 40 * scale);

    // === Box 3: q(1) ===
    const b3x = 540 * scale, b3y = 44 * scale, b3w = 220 * scale, b3h = 60 * scale;
    roundRect(b3x, b3y, b3w, b3h, 10 * scale, '#1e293b', '#f472b6');
    ctx.fillStyle = '#f472b6';
    ctx.font = `bold ${12 * scale}px 'Segoe UI', sans-serif`;
    ctx.textAlign = 'center';
    ctx.fillText('Izraƒçunamo q(1)', b3x + b3w / 2, b3y + 20 * scale);
    ctx.fillStyle = '#e2e8f0';
    ctx.font = `${11 * scale}px 'Segoe UI', sans-serif`;
    ctx.fillText('1+3‚àí1‚àí2 = 1', b3x + b3w / 2, b3y + 40 * scale);

    // Arrows row 1
    arrow(b1x + b1w, b1y + b1h / 2, b2x - 4 * scale, b2y + b2h / 2, '#60a5fa');
    arrow(b2x + b2w, b2y + b2h / 2, b3x - 4 * scale, b3y + b3h / 2, '#a78bfa');

    // --- Second row ---
    // Box 4: P(1) =
    const b4x = 280 * scale, b4y = 160 * scale, b4w = 220 * scale, b4h = 60 * scale;
    roundRect(b4x, b4y, b4w, b4h, 10 * scale, '#1e293b', '#34d399');
    ctx.fillStyle = '#34d399';
    ctx.font = `bold ${12 * scale}px 'Segoe UI', sans-serif`;
    ctx.textAlign = 'center';
    ctx.fillText('P(1) = [q(1)]¬≤‚Å∞¬≤‚Å¥', b4x + b4w / 2, b4y + 20 * scale);
    ctx.fillStyle = '#e2e8f0';
    ctx.font = `${11 * scale}px 'Segoe UI', sans-serif`;
    ctx.fillText('= 1¬≤‚Å∞¬≤‚Å¥', b4x + b4w / 2, b4y + 40 * scale);

    // Box 5: Final
    const b5x = 540 * scale, b5y = 160 * scale, b5w = 220 * scale, b5h = 60 * scale;
    roundRect(b5x, b5y, b5w, b5h, 10 * scale, '#052e16', '#4ade80');
    ctx.fillStyle = '#4ade80';
    ctx.font = `bold ${13 * scale}px 'Segoe UI', sans-serif`;
    ctx.textAlign = 'center';
    ctx.fillText('Zbir koef. = 1', b5x + b5w / 2, b5y + 22 * scale);
    ctx.fillStyle = '#86efac';
    ctx.font = `${11 * scale}px 'Segoe UI', sans-serif`;
    ctx.fillText('Odgovor: A)', b5x + b5w / 2, b5y + 43 * scale);

    // Arrows row 2
    // From b3 down to b4 level
    arrow(b3x + b3w / 2, b3y + b3h, b4x + b4w, b4y + b4h / 2, '#f472b6');
    arrow(b4x + b4w, b4y + b4h / 2, b5x - 4 * scale, b5y + b5h / 2, '#34d399');

    // Down arrow from b2 to b4
    arrow(b2x + b2w / 2, b2y + b2h, b4x + b4w / 2, b4y - 4 * scale, '#a78bfa');

    // --- Number line at bottom ---
    const nlY = 275 * scale;
    const nlX1 = 60 * scale, nlX2 = 720 * scale;
    const nlMid = cx;

    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1.5 * scale;
    ctx.beginPath();
    ctx.moveTo(nlX1, nlY);
    ctx.lineTo(nlX2, nlY);
    ctx.stroke();

    // Tick marks and labels
    const points = [
      { val: -2, label: '‚àí2' },
      { val: -1, label: '‚àí1' },
      { val: 0, label: '0' },
      { val: 1, label: '1', highlight: true },
      { val: 2, label: '2' },
    ];

    const unit = (nlX2 - nlX1) / 4.5;

    points.forEach(pt => {
      const px = nlMid + pt.val * unit * 0.9;
      const tickH = pt.highlight ? 12 * scale : 7 * scale;

      ctx.strokeStyle = pt.highlight ? '#4ade80' : '#475569';
      ctx.lineWidth = pt.highlight ? 2.5 * scale : 1.5 * scale;
      ctx.beginPath();
      ctx.moveTo(px, nlY - tickH);
      ctx.lineTo(px, nlY + tickH);
      ctx.stroke();

      ctx.fillStyle = pt.highlight ? '#4ade80' : '#94a3b8';
      ctx.font = pt.highlight ? `bold ${13 * scale}px 'Segoe UI', sans-serif` : `${11 * scale}px 'Segoe UI', sans-serif`;
      ctx.textAlign = 'center';
      ctx.fillText(pt.label, px, nlY + 26 * scale);

      if (pt.highlight) {
        // Draw dot
        ctx.beginPath();
        ctx.arc(px, nlY, 6 * scale, 0, Math.PI * 2);
        ctx.fillStyle = '#4ade80';
        ctx.fill();

        // Label above
        ctx.fillStyle = '#4ade80';
        ctx.font = `bold ${10 * scale}px 'Segoe UI', sans-serif`;
        ctx.fillText('q(1) = 1', px, nlY - 20 * scale);
      }
    });

    // Number line label
    ctx.fillStyle = '#94a3b8';
    ctx.font = `${10 * scale}px 'Segoe UI', sans-serif`;
    ctx.textAlign = 'left';
    ctx.fillText('Brojevna osa: vrednost q(x) za x = 1', nlX1, nlY + 42 * scale);
  }

  // Draw on load and resize
  window.addEventListener('load', drawDiagram);
  window.addEventListener('resize', drawDiagram);

  // Also redraw when MathJax finishes (layout may shift)
  if (window.MathJax) {
    MathJax.startup && MathJax.startup.promise && MathJax.startup.promise.then(drawDiagram);
  }
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{"title":"Zbir koeficijenata polinoma P(x) = (x¬≥+3x¬≤-x-2)^2024","subject":"math","unit":"algebra","topic_tags":["polinomi","koeficijenti_polinoma","supstitucija","stepenovanje"]}
BRAINSPARK_META-->
