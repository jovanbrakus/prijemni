<!DOCTYPE html>
<html lang="sr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pravilna trostrana prizma — raspodela zapremine ravni PQR</title>

  <script type="text/info" id="logic-scratchpad">
    Zadato: Pravilna trostrana prizma sa osnovama ABC i A1B1C1, visina h.
    Tačke P, Q, R leže na ivicama AA1, BB1, CC1 redom.

    Uslovi:
      |PA1| = 2|AP|  =>  AA1 = AP + PA1 = AP + 2*AP = 3*AP  =>  AP = h/3
      |QB1| = 2|BQ|  =>  BB1 = BQ + QB1 = BQ + 2*BQ = 3*BQ  =>  BQ = h/3
      Neka je |CR| = t * h  (0 <= t <= 1), tražimo t.

    Trougao PQR deli prizmu na dva dela jednakih zapremina.
    Svaki deo = V_prizme / 2 = S*h / 2, gde je S površina baze.

    Donji deo (ispod ravni PQR) je truncated triangular prism (zasečena prizma)
    sa temenim tačkama A, B, C (na visini 0) i P, Q, R (na visinama h/3, h/3, t*h).

    Formula za zapreminu zasečene trostrane prizme sa osnovom površine S
    i bočnim visinama h1, h2, h3 (visine iznad svake temene tačke gornjeg lica):
      V = S/3 * (h1 + h2 + h3)

    Ovde: h1 = AP = h/3, h2 = BQ = h/3, h3 = CR = t*h

    V_donji = S/3 * (h/3 + h/3 + t*h) = S*h/3 * (2/3 + t)

    Uslov: V_donji = V_prizme / 2 = S*h / 2

    S*h/3 * (2/3 + t) = S*h/2

    (2/3 + t) / 3 = 1/2

    2/3 + t = 3/2

    t = 3/2 - 2/3 = 9/6 - 4/6 = 5/6

    Dakle |CR| = 5h/6  i  |RC1| = h - 5h/6 = h/6

    Odnos |CR| : |RC1| = (5h/6) : (h/6) = 5 : 1

    Odgovor: B) 5:1
  </script>

  <script>
    MathJax = {
      tex: {
        inlineMath: [['\\(', '\\)'], ['$', '$']],
        displayMath: [['\\[', '\\]']]
      },
      svg: { fontCache: 'global' }
    };
  </script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
  </script>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: #0f172a;
      color: #e2e8f0;
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      line-height: 1.7;
      padding: 24px 20px 60px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    h1 {
      font-size: 2rem;
      font-weight: 800;
      background: linear-gradient(135deg, #60a5fa, #a78bfa);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 8px;
    }

    .subtitle {
      color: #94a3b8;
      font-size: 1rem;
      margin-bottom: 32px;
    }

    .card {
      background: #1e293b;
      border: 1px solid #334155;
      border-radius: 14px;
      padding: 22px 26px;
      margin-bottom: 22px;
    }

    .card-title {
      font-size: 1.05rem;
      font-weight: 700;
      color: #60a5fa;
      margin-bottom: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .card-title .icon {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.85rem;
      font-weight: 700;
      flex-shrink: 0;
    }

    .problem-statement .card-title .icon { background: #1d4ed8; color: #93c5fd; }

    .problem-text {
      font-size: 1.05rem;
      color: #e2e8f0;
      margin-bottom: 18px;
    }

    .given-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 14px;
    }

    .given-item.answer-option {
      background: #0f172a;
      border: 1px solid #475569;
      border-radius: 8px;
      padding: 8px 16px;
      font-size: 0.95rem;
      color: #cbd5e1;
      cursor: default;
      transition: border-color 0.2s;
    }

    .plan-card .card-title .icon { background: #0e7490; color: #67e8f9; }

    .plan-text {
      color: #94a3b8;
      font-style: italic;
    }

    details {
      border: 1px solid #334155;
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 10px;
    }

    summary {
      background: #1e293b;
      padding: 12px 18px;
      cursor: pointer;
      font-weight: 600;
      color: #a78bfa;
      list-style: none;
      display: flex;
      align-items: center;
      gap: 8px;
      user-select: none;
    }

    summary::-webkit-details-marker { display: none; }

    summary::before {
      content: '\25B6';
      font-size: 0.7rem;
      transition: transform 0.2s;
    }

    details[open] summary::before {
      transform: rotate(90deg);
    }

    .details-body {
      background: #0f172a;
      padding: 16px 20px;
      border-top: 1px solid #334155;
    }

    .formula-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 12px;
      margin-top: 8px;
    }

    .formula-box {
      background: #1e293b;
      border-left: 3px solid #60a5fa;
      border-radius: 8px;
      padding: 12px 16px;
      color: #93c5fd;
      font-size: 0.95rem;
    }

    .formula-box .formula-label {
      color: #94a3b8;
      font-size: 0.82rem;
      margin-bottom: 4px;
    }

    canvas {
      display: block;
      width: 100%;
      border-radius: 10px;
      touch-action: none;
      cursor: default;
    }

    .canvas-controls {
      display: flex;
      gap: 10px;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    .btn {
      background: #1e293b;
      border: 1px solid #475569;
      border-radius: 8px;
      color: #e2e8f0;
      padding: 7px 16px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: background 0.15s, border-color 0.15s;
    }

    .btn:hover { background: #334155; border-color: #60a5fa; }
    .btn.active { background: #1d4ed8; border-color: #60a5fa; color: #fff; }

    .canvas-hint {
      color: #64748b;
      font-size: 0.82rem;
      margin-top: 8px;
    }

    .steps-container { display: flex; flex-direction: column; gap: 20px; }

    .step {
      display: flex;
      gap: 18px;
      align-items: flex-start;
    }

    .step-badge {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: linear-gradient(135deg, #1d4ed8, #7c3aed);
      color: #fff;
      font-weight: 800;
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      margin-top: 2px;
    }

    .step-content { flex: 1; }

    .step-title {
      font-weight: 700;
      font-size: 1rem;
      color: #c4b5fd;
      margin-bottom: 6px;
    }

    .step-text {
      color: #cbd5e1;
      margin-bottom: 10px;
    }

    .math-block {
      background: #0f172a;
      border: 1px solid #334155;
      border-radius: 8px;
      padding: 14px 18px;
      margin: 10px 0;
      overflow-x: auto;
    }

    .math-block.highlight {
      border-left: 3px solid #60a5fa;
    }

    .checkpoint {
      margin-top: 10px;
    }

    .checkpoint summary {
      color: #34d399;
      font-size: 0.9rem;
    }

    .checkpoint .details-body {
      font-size: 0.9rem;
      color: #94a3b8;
    }

    .key-insight {
      background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
      border: 1px solid #4f46e5;
      border-radius: 14px;
      padding: 20px 26px;
      margin-bottom: 22px;
    }

    .key-insight .insight-title {
      font-size: 1rem;
      font-weight: 700;
      color: #a78bfa;
      margin-bottom: 10px;
    }

    .key-insight p { color: #cbd5e1; }

    .final-answer-card {
      background: #1e293b;
      border: 1px solid #334155;
      border-radius: 14px;
      padding: 22px 26px;
      margin-bottom: 22px;
      text-align: center;
    }

    .final-answer-card .answer-label {
      color: #94a3b8;
      margin-bottom: 10px;
      font-size: 0.95rem;
    }

    .final-answer-value {
      font-size: 2.5rem;
      font-weight: 900;
      color: #34d399;
      margin-bottom: 18px;
      letter-spacing: 1px;
    }

    .options-row {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
    }

    .opt-pill {
      padding: 8px 20px;
      border-radius: 9px;
      font-size: 0.95rem;
      font-weight: 600;
      border: 1.5px solid #475569;
      color: #94a3b8;
      background: #0f172a;
    }

    .opt-pill.correct {
      border-color: #34d399;
      color: #34d399;
      background: rgba(52,211,153,0.08);
    }

    .pitfall-item {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      margin-bottom: 10px;
      color: #fca5a5;
      font-size: 0.97rem;
    }

    .pitfall-icon {
      background: #7f1d1d;
      color: #fca5a5;
      border-radius: 50%;
      width: 22px;
      height: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 0.85rem;
      flex-shrink: 0;
      margin-top: 2px;
    }

    .challenge-card {
      background: #1e293b;
      border: 1px dashed #475569;
      border-radius: 12px;
      padding: 18px 22px;
    }

    .challenge-title {
      color: #f472b6;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .challenge-text { color: #cbd5e1; }

    .slider-row {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-top: 10px;
    }

    .slider-row label { color: #94a3b8; font-size: 0.9rem; white-space: nowrap; }

    input[type=range] {
      flex: 1;
      accent-color: #60a5fa;
    }

    .slider-val {
      color: #60a5fa;
      font-weight: 700;
      font-size: 0.9rem;
      width: 48px;
      text-align: right;
    }

    @media (max-width: 700px) {
      h1 { font-size: 1.45rem; }
      .step { flex-direction: column; gap: 8px; }
      .final-answer-value { font-size: 1.9rem; }
    }
  </style>
</head>
<body>
<div class="container">

  <!-- Naslov -->
  <h1>Pravilna trostrana prizma — raspodela zapremine</h1>
  <p class="subtitle">Ravan kroz tačke P, Q, R deli prizmu na dva jednaka dela</p>

  <!-- Tekst zadatka -->
  <div class="card problem-statement">
    <div class="card-title">
      <span class="icon">Z</span>
      Tekst zadatka
    </div>
    <p class="problem-text">
      Data je pravilna trostrana prizma sa osnovama \(ABC\) i \(A_1B_1C_1\).
      Na ivicama \(AA_1\), \(BB_1\) i \(CC_1\) se, redom, nalaze tačke \(P\), \(Q\) i \(R\) takve
      da je \(|PA_1| = 2|AP|\), \(|QB_1| = 2|BQ|\) i trougao \(PQR\) deli datu prizmu na dva dela
      jednakih zapremina. Odnos \(|CR| : |RC_1|\) jednak je:
    </p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">(A) \(4:3\)</div>
      <div class="given-item answer-option" data-option="B">(B) \(5:1\)</div>
      <div class="given-item answer-option" data-option="C">(C) \(3:2\)</div>
      <div class="given-item answer-option" data-option="D">(D) \(16:9\)</div>
      <div class="given-item answer-option" data-option="E">(E) \(4:1\)</div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <div class="card-title">
      <span class="icon" style="background:#065f46;color:#6ee7b7;">P</span>
      Plan rešavanja
    </div>
    <p class="plan-text">
      Iz uslova za tačke P i Q odredimo njihove visine od baze.
      Zatim primenimo formulu za zapreminu zasečene trostrane prizme (sa tri različite bočne visine)
      i nametnemo uslov da je ta zapremina jednaka polovini zapremine cele prizme.
      Iz te jednačine direktno dobijamo \(|CR|\).
    </p>
  </div>

  <!-- Teorijsko podsecanje -->
  <details style="margin-bottom:22px;">
    <summary>Teorijsko podsecanje — kljucne formule</summary>
    <div class="details-body">
      <div class="formula-grid">
        <div class="formula-box">
          <div class="formula-label">Zapremina prave trostrane prizme</div>
          \[V = S \cdot h\]
          \(S\) — povrsina osnove, \(h\) — visina prizme
        </div>
        <div class="formula-box">
          <div class="formula-label">Zapremina zasecene trostrane prizme</div>
          Ako gornja osnova nije paralelna donjoj, vec su visine nad temenim tackama
          \(h_1, h_2, h_3\):
          \[V = \frac{S}{3}(h_1 + h_2 + h_3)\]
        </div>
        <div class="formula-box">
          <div class="formula-label">Raspodela duzine ivice</div>
          Ako \(|PA_1| = 2|AP|\) i \(|AP| + |PA_1| = h\), tada
          \(|AP| = \dfrac{h}{3}\)
        </div>
      </div>
    </div>
  </details>

  <!-- Dijagram (Canvas) -->
  <div class="card" style="padding:18px 22px;">
    <div class="card-title">
      <span class="icon" style="background:#4c1d95;color:#c4b5fd;">D</span>
      Dijagram prizme
    </div>
    <canvas id="prismCanvas" width="720" height="400"></canvas>
    <div class="slider-row">
      <label>Polozaj R (t):</label>
      <input type="range" id="sliderT" min="0" max="100" value="83" step="1" />
      <span class="slider-val" id="sliderTVal">5/6</span>
    </div>
    <p class="canvas-hint">Pomeri klizac da vides kako se menja polozaj tacke R na ivici CC1. Na tacnoj vrednosti t = 5/6 ≈ 0,833 prizma se deli na dve jednake zapremine.</p>
  </div>

  <!-- Korak po korak -->
  <div class="card">
    <div class="card-title">
      <span class="icon" style="background:#7c3aed;color:#ddd6fe;">K</span>
      Resenje korak po korak
    </div>
    <div class="steps-container">

      <!-- Korak 1 -->
      <div class="step">
        <div class="step-badge">1</div>
        <div class="step-content">
          <div class="step-title">Odredjivanje polozaja tacke P</div>
          <p class="step-text">
            Uslov \(|PA_1| = 2|AP|\) znaci da P deli ivicu \(AA_1\) u odnosu \(AP : PA_1 = 1 : 2\).
            Kako je \(|AP| + |PA_1| = h\) (visina prizme), sledi:
          </p>
          <div class="math-block highlight">
            \[|AP| + 2|AP| = h \implies 3|AP| = h \implies |AP| = \frac{h}{3}\]
          </div>
          <p class="step-text">Dakle tacka P lezi na visini \(\dfrac{h}{3}\) od donje osnove.</p>
        </div>
      </div>

      <!-- Korak 2 -->
      <div class="step">
        <div class="step-badge">2</div>
        <div class="step-content">
          <div class="step-title">Odredjivanje polozaja tacke Q</div>
          <p class="step-text">
            Analogno, uslov \(|QB_1| = 2|BQ|\) daje isti odnos za ivicu \(BB_1\):
          </p>
          <div class="math-block highlight">
            \[|BQ| = \frac{h}{3}\]
          </div>
          <p class="step-text">Tacka Q lezi takodze na visini \(\dfrac{h}{3}\) od donje osnove.</p>
        </div>
      </div>

      <!-- Korak 3 -->
      <div class="step">
        <div class="step-badge">3</div>
        <div class="step-content">
          <div class="step-title">Uvodjenje nepoznate za tacku R</div>
          <p class="step-text">
            Neka je \(|CR| = x\), pa je \(|RC_1| = h - x\).
            Ravan \(PQR\) sece prizmu na donji deo
            (sa temenim tackama \(A, B, C, P, Q, R\)) i gornji deo.
          </p>
          <div class="math-block">
            \[h_1 = |AP| = \frac{h}{3}, \quad h_2 = |BQ| = \frac{h}{3}, \quad h_3 = |CR| = x\]
          </div>
        </div>
      </div>

      <!-- Korak 4 -->
      <div class="step">
        <div class="step-badge">4</div>
        <div class="step-content">
          <div class="step-title">Formula za zapreminu zasecene prizme</div>
          <p class="step-text">
            Donji deo (od osnove \(ABC\) do ravni \(PQR\)) je zasecena trostrana prizma.
            Visine nad temenima su \(h_1, h_2, h_3\) (visine tacaka \(P, Q, R\) od osnove).
            Formula za njenu zapreminu je:
          </p>
          <div class="math-block highlight">
            \[V_{\text{donji}} = \frac{S}{3}\,(h_1 + h_2 + h_3) = \frac{S}{3}\!\left(\frac{h}{3} + \frac{h}{3} + x\right)\]
          </div>
          <details class="checkpoint">
            <summary>Zasto vazi ova formula?</summary>
            <div class="details-body">
              Zasecena trostrana prizma moze se razloziti na tri tetraedra sa zajednickom osnovom
              trokutom \(ABC\) i jednim od temena \(P\), \(Q\), \(R\). Svaki tetraedar ima zapreminu
              \(\frac{S}{3} h_i\). Sabiranje daje \(\frac{S}{3}(h_1+h_2+h_3)\).
            </div>
          </details>
        </div>
      </div>

      <!-- Korak 5 -->
      <div class="step">
        <div class="step-badge">5</div>
        <div class="step-content">
          <div class="step-title">Postavljanje jednacine za jednake zapremine</div>
          <p class="step-text">
            Uslov je da ravan \(PQR\) deli prizmu na dva <em>jednaka</em> dela, dakle:
          </p>
          <div class="math-block highlight">
            \[V_{\text{donji}} = \frac{V_{\text{prizma}}}{2} = \frac{S \cdot h}{2}\]
          </div>
          <p class="step-text">Uvrstavamo formulu za zasecenu prizmu:</p>
          <div class="math-block">
            \[\frac{S}{3}\!\left(\frac{h}{3} + \frac{h}{3} + x\right) = \frac{S \cdot h}{2}\]
          </div>
        </div>
      </div>

      <!-- Korak 6 -->
      <div class="step">
        <div class="step-badge">6</div>
        <div class="step-content">
          <div class="step-title">Resavanje jednacine</div>
          <p class="step-text">Delimo obe strane sa \(S\) (povrsina osnove, \(S \neq 0\)):</p>
          <div class="math-block">
            \[\frac{1}{3}\!\left(\frac{2h}{3} + x\right) = \frac{h}{2}\]
          </div>
          <p class="step-text">Mnozimo obe strane sa 3:</p>
          <div class="math-block">
            \[\frac{2h}{3} + x = \frac{3h}{2}\]
          </div>
          <p class="step-text">Resavamo po \(x\):</p>
          <div class="math-block highlight">
            \[x = \frac{3h}{2} - \frac{2h}{3} = \frac{9h}{6} - \frac{4h}{6} = \frac{5h}{6}\]
          </div>
        </div>
      </div>

      <!-- Korak 7 -->
      <div class="step">
        <div class="step-badge">7</div>
        <div class="step-content">
          <div class="step-title">Odredjivanje odnosa |CR| : |RC1|</div>
          <p class="step-text">
            Nasli smo \(|CR| = \dfrac{5h}{6}\), pa je:
          </p>
          <div class="math-block">
            \[|RC_1| = h - \frac{5h}{6} = \frac{h}{6}\]
          </div>
          <div class="math-block highlight">
            \[|CR| : |RC_1| = \frac{5h}{6} : \frac{h}{6} = 5 : 1\]
          </div>
          <details class="checkpoint">
            <summary>Provera: zbir zapremina</summary>
            <div class="details-body">
              \(V_{\text{donji}} = \dfrac{S}{3}\!\left(\dfrac{h}{3}+\dfrac{h}{3}+\dfrac{5h}{6}\right)
              = \dfrac{S}{3} \cdot \dfrac{2h+2h+5h}{6} \cdot \dfrac{1}{1}
              = \dfrac{S}{3} \cdot \dfrac{9h}{6}
              = \dfrac{S}{3} \cdot \dfrac{3h}{2}
              = \dfrac{Sh}{2}\) — tacno polovina zapremine! ✓
            </div>
          </details>
        </div>
      </div>

    </div>
  </div>

  <!-- Kljucna ideja -->
  <div class="key-insight">
    <div class="insight-title">Kljucna ideja</div>
    <p>
      Zasecena trostrana prizma (sa gornjom ravni koja nije paralelna bazi) ima zapreminu
      \(\dfrac{S}{3}(h_1+h_2+h_3)\). Ova formula je analogna formuli za volumen trostrane prizme,
      samo sto se umesto jedne visine koristi aritmeticka sredina tri visine:
      \(V = S \cdot \dfrac{h_1+h_2+h_3}{3}\).
      Bitno je znati ovu formulu jer direktno vodi do linearne jednacine po nepoznatoj \(x = |CR|\).
    </p>
  </div>

  <!-- Konacni odgovor -->
  <div class="final-answer-card">
    <div class="answer-label">Konacni odgovor</div>
    <div class="final-answer-value">\(|CR| : |RC_1| = 5 : 1\)</div>
    <div class="options-row">
      <div class="opt-pill">(A) 4:3</div>
      <div class="opt-pill correct">(B) 5:1</div>
      <div class="opt-pill">(C) 3:2</div>
      <div class="opt-pill">(D) 16:9</div>
      <div class="opt-pill">(E) 4:1</div>
    </div>
  </div>

  <!-- Ceste greske -->
  <div class="card">
    <div class="card-title">
      <span class="icon" style="background:#7f1d1d;color:#fca5a5;">!</span>
      Ceste greske
    </div>
    <div class="pitfalls">
      <div class="pitfall-item">
        <span class="pitfall-icon">!</span>
        <span>
          Pogresno tumacenje uslova \(|PA_1| = 2|AP|\): neki ucenici zakljuce da je
          \(|AP| = 2h/3\) umesto \(h/3\). Uvek proveri: \(|AP| + |PA_1| = h\),
          pa iz \(|PA_1| = 2|AP|\) sledi \(3|AP| = h\).
        </span>
      </div>
      <div class="pitfall-item">
        <span class="pitfall-icon">!</span>
        <span>
          Zaboravljanje formule za zasecenu prizmu. Neke resenja pokusavaju da korististe
          formulu za pravu prizmu ili integraciju — ali formula \(\frac{S}{3}(h_1+h_2+h_3)\)
          je direktna i elegantna.
        </span>
      </div>
      <div class="pitfall-item">
        <span class="pitfall-icon">!</span>
        <span>
          Mesanje \(|CR|\) i \(|RC_1|\) pri pisanju odnosa. Pitanje trazi
          \(|CR|:|RC_1|\), a tacka R je bliza \(C_1\) (lezi na \(\frac{5}{6}\) visine od C),
          pa je \(|RC_1| = h/6\) manji deo.
        </span>
      </div>
    </div>
  </div>

  <!-- Izazovni zadatak -->
  <div class="challenge-card">
    <div class="challenge-title">Izazovni zadatak</div>
    <p class="challenge-text">
      Sta bi bio odgovor kada bi uslov bio \(|PA_1| = k \cdot |AP|\) i \(|QB_1| = k \cdot |BQ|\)
      za произvoljan \(k > 0\)? Izraziti \(|CR| : |RC_1|\) u funkciji od \(k\).
      <br><br>
      <em>Uput:</em> Isti postupak daje \(|AP| = |BQ| = \dfrac{h}{k+1}\), pa iz jednacine
      \(\dfrac{2h}{k+1} + x = \dfrac{3h}{2}\) sledi
      \(x = h\!\left(\dfrac{3}{2} - \dfrac{2}{k+1}\right)\).
      Za \(k=2\): \(x = h(3/2 - 2/3) = 5h/6\) — sto se slaze sa nasim odgovorom.
    </p>
  </div>

</div>

<script>
(function() {
  // ---- Dijagram ----
  var canvas = document.getElementById('prismCanvas');
  var ctx = canvas.getContext('2d');
  var slider = document.getElementById('sliderT');
  var sliderVal = document.getElementById('sliderTVal');

  function drawPrism(t) {
    var W = canvas.width, H = canvas.height;
    ctx.clearRect(0, 0, W, H);

    // Perspektivna projekcija trostrane prizme
    // Osnova ABC (donja), A1B1C1 (gornja)
    // Definisemo koordinate temena u 2D (izometricna projekcija)

    var cx = W / 2, cy = H / 2 + 40;
    var a = 130;   // poluprecnik osnove
    var hP = 240;  // visina prizme u pikselima

    // Temena donje osnove (A, B, C)
    var A  = {x: cx,       y: cy + hP/2};
    var B  = {x: cx - a,   y: cy + hP/2 + a * 0.5};
    var C  = {x: cx + a,   y: cy + hP/2 + a * 0.5};

    // Temena gornje osnove (A1, B1, C1) - pomerena nagore i malo ulevo (pseudo-3D)
    var dz = 60; // horizontalni pomeraj zbog perspektive
    var A1 = {x: cx - dz,     y: cy - hP/2};
    var B1 = {x: cx - a - dz, y: cy - hP/2 + a * 0.5};
    var C1 = {x: cx + a - dz, y: cy - hP/2 + a * 0.5};

    // Boje
    var colEdge    = '#475569';
    var colEdgeFwd = '#94a3b8';
    var colFace    = 'rgba(96,165,250,0.07)';
    var colFaceP   = 'rgba(167,139,250,0.13)';
    var colPt      = '#f472b6';
    var colPtQ     = '#60a5fa';
    var colPtR     = '#34d399';
    var colPlane   = 'rgba(52,211,153,0.15)';
    var colPlaneLine = '#34d399';

    function lerp(a, b, t) { return {x: a.x + (b.x - a.x)*t, y: a.y + (b.y - a.y)*t}; }

    var tP = 1/3;  // AP/h
    var tQ = 1/3;  // BQ/h
    var tR = t;    // CR/h

    var P = lerp(A, A1, tP);
    var Q = lerp(B, B1, tQ);
    var R = lerp(C, C1, tR);

    // -- Lica prizme (pozadinska) --
    ctx.save();

    // Zadnje lice A-B-B1-A1 (vidljivo)
    ctx.beginPath();
    ctx.moveTo(A.x, A.y); ctx.lineTo(B.x, B.y);
    ctx.lineTo(B1.x, B1.y); ctx.lineTo(A1.x, A1.y);
    ctx.closePath();
    ctx.fillStyle = colFace;
    ctx.fill();

    // Bočno lice A-C-C1-A1
    ctx.beginPath();
    ctx.moveTo(A.x, A.y); ctx.lineTo(C.x, C.y);
    ctx.lineTo(C1.x, C1.y); ctx.lineTo(A1.x, A1.y);
    ctx.closePath();
    ctx.fillStyle = colFace;
    ctx.fill();

    // Bočno lice B-C-C1-B1
    ctx.beginPath();
    ctx.moveTo(B.x, B.y); ctx.lineTo(C.x, C.y);
    ctx.lineTo(C1.x, C1.y); ctx.lineTo(B1.x, B1.y);
    ctx.closePath();
    ctx.fillStyle = 'rgba(96,165,250,0.04)';
    ctx.fill();

    // Ravan PQR (obojeni poligon)
    ctx.beginPath();
    ctx.moveTo(P.x, P.y); ctx.lineTo(Q.x, Q.y); ctx.lineTo(R.x, R.y);
    ctx.closePath();
    ctx.fillStyle = colPlane;
    ctx.fill();
    ctx.strokeStyle = colPlaneLine;
    ctx.lineWidth = 2;
    ctx.setLineDash([5,4]);
    ctx.stroke();
    ctx.setLineDash([]);

    // -- Ivice prizme --
    function edge(p1, p2, dashed, col) {
      ctx.beginPath();
      ctx.moveTo(p1.x, p1.y);
      ctx.lineTo(p2.x, p2.y);
      ctx.strokeStyle = col || colEdge;
      ctx.lineWidth = dashed ? 1 : 1.5;
      if (dashed) ctx.setLineDash([4,5]); else ctx.setLineDash([]);
      ctx.stroke();
      ctx.setLineDash([]);
    }

    // Donja osnova
    edge(A, B, false, colEdgeFwd);
    edge(A, C, false, colEdgeFwd);
    edge(B, C, true, colEdge);

    // Gornja osnova
    edge(A1, B1, false, colEdgeFwd);
    edge(A1, C1, false, colEdgeFwd);
    edge(B1, C1, true, colEdge);

    // Bočne ivice
    edge(A, A1, false, colEdgeFwd);
    edge(B, B1, false, colEdgeFwd);
    edge(C, C1, false, colEdgeFwd);

    // -- Oznake temena --
    function label(pt, txt, col, offX, offY) {
      ctx.font = 'bold 13px Segoe UI, sans-serif';
      ctx.fillStyle = col || '#e2e8f0';
      ctx.fillText(txt, pt.x + (offX||0), pt.y + (offY||0));
    }

    label(A,  'A',  '#94a3b8',  6, 14);
    label(B,  'B',  '#94a3b8', -18, 14);
    label(C,  'C',  '#94a3b8',  6, 14);
    label(A1, 'A₁', '#94a3b8',  4, -8);
    label(B1, 'B₁', '#94a3b8', -20, -8);
    label(C1, 'C₁', '#94a3b8',  5, -8);

    // -- Tačke P, Q, R --
    function dot(pt, col, r) {
      ctx.beginPath();
      ctx.arc(pt.x, pt.y, r||5, 0, 2*Math.PI);
      ctx.fillStyle = col;
      ctx.fill();
    }

    dot(P, colPt,  6);
    dot(Q, colPtQ, 6);
    dot(R, colPtR, 6);

    label(P, 'P', colPt,  -18, -4);
    label(Q, 'Q', colPtQ,  8,  -4);
    label(R, 'R', colPtR,  8,  -4);

    // -- Legenda zapremine --
    var tStr = t.toFixed(3);
    var v_lower = (2/3 + t) / 3; // V_donji / (S*h)
    var v_upper = 1 - v_lower;
    var pctL = (v_lower * 100).toFixed(1);
    var pctU = (v_upper * 100).toFixed(1);

    ctx.font = '13px Segoe UI, sans-serif';
    ctx.fillStyle = '#60a5fa';
    ctx.fillText('Donji deo: ' + pctL + '%', 14, 28);
    ctx.fillStyle = '#a78bfa';
    ctx.fillText('Gornji deo: ' + pctU + '%', 14, 48);

    if (Math.abs(t - 5/6) < 0.01) {
      ctx.fillStyle = '#34d399';
      ctx.font = 'bold 13px Segoe UI, sans-serif';
      ctx.fillText('Tacna vrednost! (t = 5/6)', 14, 72);
    }

    ctx.restore();
  }

  function getT() { return parseFloat(slider.value) / 100; }

  function updateSliderLabel(t) {
    if (Math.abs(t - 5/6) < 0.008) {
      sliderVal.textContent = '5/6';
    } else if (Math.abs(t - 1/3) < 0.008) {
      sliderVal.textContent = '1/3';
    } else {
      sliderVal.textContent = t.toFixed(2);
    }
  }

  function redraw() {
    var t = getT();
    updateSliderLabel(t);
    drawPrism(t);
  }

  slider.addEventListener('input', redraw);
  redraw();

  // Responsive canvas resize
  function resizeCanvas() {
    var rect = canvas.parentElement.getBoundingClientRect();
    var dpr = window.devicePixelRatio || 1;
    var displayW = Math.min(rect.width - 44, 720);
    canvas.style.width = displayW + 'px';
    canvas.style.height = (displayW * 400 / 720) + 'px';
  }

  window.addEventListener('resize', function() { resizeCanvas(); redraw(); });
  resizeCanvas();
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{"title":"Pravilna trostrana prizma — raspodela zapremine ravni PQR","subject":"math","unit":"geometry","topic_tags":["prizma","zapremina","prostorna_geometrija","zasecena_prizma","stereometrija"]}
BRAINSPARK_META-->
