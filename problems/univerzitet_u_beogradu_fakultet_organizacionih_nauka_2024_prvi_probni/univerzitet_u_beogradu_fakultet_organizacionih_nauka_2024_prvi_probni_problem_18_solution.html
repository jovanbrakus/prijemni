<!DOCTYPE html>
<html lang="sr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Permutacije slova reči SRBIJA</title>

  <script type="text/info" id="logic-scratchpad">
    Reč: SRBIJA
    Slova: S, R, B, I, J, A  (ukupno 6 različitih slova)

    Samoglasnici (vowels): I, A  → 2 samoglasnika
    Suglasnici (consonants): S, R, B, J  → 4 suglasnika

    Uslov: između dva samoglasnika se nalazi BAR JEDAN suglasnik.
    To znači: dva samoglasnika NE SMU stajati jedan do drugog (ne smeju biti susedni).

    Metoda komplementa:
    Ukupno permutacija = 6! = 720

    Permutacije gde su oba samoglasnika SUSEDNA (nije dozvoljen ni jedan suglasnik između njih):
    - Tretiramo {I, A} kao jedan blok → 5 elemenata: [IA], S, R, B, J
    - Raspoređivanje 5 elemenata: 5! = 120
    - Redosled unutar bloka: I,A ili A,I → 2! = 2
    - Ukupno susednih: 5! × 2! = 120 × 2 = 240

    Traženi broj = Ukupno - Susedni = 720 - 240 = 480

    Provera direktnim računanjem:
    - Biramo 2 pozicije od 6 za samoglasnike, ali ne susedne:
      C(6,2) = 15 ukupno parova pozicija
      Susedni parovi: (1,2),(2,3),(3,4),(4,5),(5,6) = 5
      Nesusedni parovi: 15 - 5 = 10
    - Raspoređujemo 2 samoglasnika na 2 izabrane pozicije: 2! = 2
    - Raspoređujemo 4 suglasnika na preostalih 4 pozicija: 4! = 24
    - Ukupno: 10 × 2 × 24 = 480 ✓

    Odgovor: B) 480
  </script>

  <script>
    MathJax = {
      tex: {
        inlineMath: [['\\(', '\\)'], ['$', '$']],
        displayMath: [['\\[', '\\]']]
      },
      svg: { fontCache: 'global' }
    };
  </script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
  </script>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: #0f172a;
      color: #e2e8f0;
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      line-height: 1.7;
      padding: 24px 20px 60px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    h1 {
      font-size: 2rem;
      font-weight: 800;
      background: linear-gradient(135deg, #60a5fa, #a78bfa);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 8px;
    }

    .subtitle {
      color: #94a3b8;
      font-size: 1rem;
      margin-bottom: 32px;
    }

    .card {
      background: #1e293b;
      border: 1px solid #334155;
      border-radius: 14px;
      padding: 22px 26px;
      margin-bottom: 22px;
    }

    .card-title {
      font-size: 1.05rem;
      font-weight: 700;
      color: #60a5fa;
      margin-bottom: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .card-title .icon {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.85rem;
      font-weight: 700;
      flex-shrink: 0;
    }

    .problem-statement .card-title .icon { background: #1d4ed8; color: #93c5fd; }

    .problem-text {
      font-size: 1.05rem;
      color: #e2e8f0;
      margin-bottom: 18px;
    }

    .given-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 14px;
    }

    .given-item.answer-option {
      background: #0f172a;
      border: 1px solid #475569;
      border-radius: 8px;
      padding: 8px 16px;
      font-size: 0.95rem;
      color: #cbd5e1;
      cursor: default;
      transition: border-color 0.2s, background 0.2s;
    }

    .given-item.answer-option.correct {
      border-color: #34d399;
      background: #064e3b;
      color: #6ee7b7;
      font-weight: 700;
    }

    .plan-card .card-title .icon { background: #0e7490; color: #67e8f9; }

    .plan-text {
      color: #94a3b8;
      font-style: italic;
    }

    details {
      border: 1px solid #334155;
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 10px;
    }

    summary {
      background: #1e293b;
      padding: 12px 18px;
      cursor: pointer;
      font-weight: 600;
      color: #a78bfa;
      list-style: none;
      display: flex;
      align-items: center;
      gap: 8px;
      user-select: none;
    }

    summary::-webkit-details-marker { display: none; }

    summary::before {
      content: '▶';
      font-size: 0.7rem;
      transition: transform 0.2s;
    }

    details[open] summary::before {
      transform: rotate(90deg);
    }

    .details-body {
      background: #0f172a;
      padding: 16px 20px;
      border-top: 1px solid #334155;
    }

    .formula-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 12px;
      margin-top: 8px;
    }

    .formula-box {
      background: #1e293b;
      border-left: 3px solid #60a5fa;
      border-radius: 8px;
      padding: 12px 16px;
      color: #93c5fd;
      font-size: 0.95rem;
    }

    .formula-box .formula-label {
      color: #94a3b8;
      font-size: 0.82rem;
      margin-bottom: 4px;
    }

    canvas {
      display: block;
      width: 100%;
      border-radius: 10px;
      touch-action: none;
    }

    .canvas-controls {
      display: flex;
      gap: 10px;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    .btn {
      background: #1e293b;
      border: 1px solid #475569;
      border-radius: 8px;
      color: #e2e8f0;
      padding: 7px 16px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: background 0.15s, border-color 0.15s;
    }

    .btn:hover { background: #334155; border-color: #60a5fa; }
    .btn.active { background: #1d4ed8; border-color: #60a5fa; color: #fff; }

    .canvas-hint {
      color: #64748b;
      font-size: 0.82rem;
      margin-top: 8px;
    }

    .steps-container { display: flex; flex-direction: column; gap: 20px; }

    .step {
      display: flex;
      gap: 18px;
      align-items: flex-start;
    }

    .step-badge {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: linear-gradient(135deg, #1d4ed8, #7c3aed);
      color: #fff;
      font-weight: 800;
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      margin-top: 2px;
    }

    .step-content { flex: 1; }

    .step-title {
      font-weight: 700;
      font-size: 1rem;
      color: #c4b5fd;
      margin-bottom: 6px;
    }

    .step-body {
      color: #cbd5e1;
      font-size: 0.97rem;
    }

    .checkpoint {
      background: #0f172a;
      border: 1px solid #1d4ed8;
      border-radius: 8px;
      padding: 10px 14px;
      margin-top: 10px;
      color: #93c5fd;
      font-size: 0.93rem;
    }

    .insight-card {
      background: linear-gradient(135deg, #1e1b4b, #1e293b);
      border: 1px solid #4338ca;
      border-radius: 14px;
      padding: 22px 26px;
      margin-bottom: 22px;
    }

    .insight-card .card-title { color: #a78bfa; }
    .insight-card .card-title .icon { background: #4338ca; color: #c4b5fd; }

    .final-answer-card {
      background: linear-gradient(135deg, #064e3b, #1e293b);
      border: 2px solid #34d399;
      border-radius: 14px;
      padding: 22px 26px;
      margin-bottom: 22px;
      text-align: center;
    }

    .final-answer-card .card-title {
      color: #34d399;
      justify-content: center;
    }

    .final-answer-card .card-title .icon { background: #065f46; color: #6ee7b7; }

    .final-value {
      font-size: 2.4rem;
      font-weight: 900;
      color: #4ade80;
      margin: 12px 0 6px;
    }

    .final-label {
      color: #6ee7b7;
      font-size: 1rem;
    }

    .pitfall-card {
      background: #1e293b;
      border: 1px solid #7f1d1d;
      border-radius: 14px;
      padding: 22px 26px;
      margin-bottom: 22px;
    }

    .pitfall-card .card-title { color: #f87171; }
    .pitfall-card .card-title .icon { background: #7f1d1d; color: #fca5a5; }

    .pitfall-item {
      display: flex;
      gap: 10px;
      align-items: flex-start;
      margin-bottom: 10px;
      color: #fca5a5;
      font-size: 0.95rem;
    }

    .pitfall-item::before {
      content: '!';
      background: #7f1d1d;
      color: #fca5a5;
      border-radius: 50%;
      width: 22px;
      height: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 0.8rem;
      flex-shrink: 0;
      margin-top: 2px;
    }

    .challenge-card {
      background: #1e293b;
      border: 1px solid #d97706;
      border-radius: 14px;
      padding: 22px 26px;
      margin-bottom: 22px;
    }

    .challenge-card .card-title { color: #fbbf24; }
    .challenge-card .card-title .icon { background: #78350f; color: #fcd34d; }

    .letter-display {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin: 14px 0;
    }

    .letter-box {
      width: 48px;
      height: 48px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.4rem;
      font-weight: 800;
      border: 2px solid;
    }

    .letter-box.vowel {
      background: #172554;
      border-color: #60a5fa;
      color: #93c5fd;
    }

    .letter-box.consonant {
      background: #2d1657;
      border-color: #a78bfa;
      color: #c4b5fd;
    }

    .complement-visual {
      display: flex;
      gap: 18px;
      flex-wrap: wrap;
      margin: 14px 0;
      align-items: stretch;
    }

    .cv-box {
      background: #0f172a;
      border: 1px solid #334155;
      border-radius: 10px;
      padding: 14px 18px;
      flex: 1;
      min-width: 180px;
      text-align: center;
    }

    .cv-box .cv-label {
      color: #94a3b8;
      font-size: 0.82rem;
      margin-bottom: 6px;
    }

    .cv-box .cv-value {
      font-size: 1.5rem;
      font-weight: 800;
    }

    .cv-box.total .cv-value { color: #60a5fa; }
    .cv-box.minus { display: flex; align-items: center; justify-content: center; font-size: 2rem; color: #94a3b8; flex: 0; min-width: 30px; background: none; border: none; padding: 0; }
    .cv-box.equals { display: flex; align-items: center; justify-content: center; font-size: 2rem; color: #94a3b8; flex: 0; min-width: 30px; background: none; border: none; padding: 0; }
    .cv-box.bad .cv-value { color: #f87171; }
    .cv-box.result .cv-value { color: #4ade80; }

    @media (max-width: 700px) {
      h1 { font-size: 1.4rem; }
      .card { padding: 16px 14px; }
      .step { gap: 12px; }
      .final-value { font-size: 1.8rem; }
      .letter-box { width: 38px; height: 38px; font-size: 1.1rem; }
    }
  </style>
</head>
<body>
<div class="container">

  <h1>Permutacije slova reči SRBIJA</h1>
  <p class="subtitle">Kombinatorika — prebrojavanje uz uslov</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <div class="card-title">
      <span class="icon">P</span>
      Tekst zadatka
    </div>
    <div class="problem-text">
      Broj svih permutacija slova reči SRBIJA kod kojih se između dva samoglasnika
      nalazi bar jedan suglasnik, jednak je:
    </div>
    <div class="given-grid">
      <span class="given-item answer-option" data-option="A">A) \(420\)</span>
      <span class="given-item answer-option" data-option="B">B) \(480\)</span>
      <span class="given-item answer-option" data-option="C">C) \(440\)</span>
      <span class="given-item answer-option" data-option="D">D) \(520\)</span>
      <span class="given-item answer-option" data-option="E">E) \(46\)</span>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <div class="card-title">
      <span class="icon" style="background:#0e7490;color:#67e8f9;">→</span>
      Plan rešavanja
    </div>
    <p class="plan-text">
      Najpre identifikujemo samoglasnike i suglasnike u reči SRBIJA. Uslov "bar jedan suglasnik između dva samoglasnika" ekvivalentan je uslovu da samoglasnici nisu susedni. Koristimo <strong>metodu komplementa</strong>: od ukupnog broja permutacija oduzimamo permutacije u kojima su oba samoglasnika susedna.
    </p>
  </div>

  <!-- Theory -->
  <details>
    <summary>Teorija: Permutacije i metoda komplementa</summary>
    <div class="details-body">
      <div class="formula-grid">
        <div class="formula-box">
          <div class="formula-label">Permutacije n različitih elemenata</div>
          \[ P_n = n! \]
        </div>
        <div class="formula-box">
          <div class="formula-label">Metoda komplementa</div>
          \[ |A| = |U| - |\overline{A}| \]
        </div>
        <div class="formula-box">
          <div class="formula-label">Blok-metoda (susedni elementi)</div>
          <div>Tretiramo \(k\) susednih elemenata kao jedan blok. Dobijamo \(n-k+1\) elemenata, a unutar bloka \(k!\) rasporeda.</div>
        </div>
        <div class="formula-box">
          <div class="formula-label">Kombinacije bez ponavljanja</div>
          \[ \binom{n}{k} = \frac{n!}{k!\,(n-k)!} \]
        </div>
      </div>
    </div>
  </details>

  <!-- Canvas Diagram -->
  <div class="card">
    <div class="card-title">
      <span class="icon" style="background:#065f46;color:#6ee7b7;">D</span>
      Vizuelni prikaz
    </div>
    <canvas id="mainCanvas" height="320"></canvas>
    <div class="canvas-controls">
      <button class="btn active" id="btnKomplement" onclick="showView('komplement')">Metoda komplementa</button>
      <button class="btn" id="btnPozicije" onclick="showView('pozicije')">Nesusedne pozicije</button>
    </div>
    <div class="canvas-hint">Kliknite dugmad za prikaz različitih perspektiva rešavanja.</div>
  </div>

  <!-- Steps -->
  <div class="card">
    <div class="card-title">
      <span class="icon" style="background:#5b21b6;color:#ddd6fe;">K</span>
      Korak po korak
    </div>
    <div class="steps-container">

      <div class="step">
        <div class="step-badge">1</div>
        <div class="step-content">
          <div class="step-title">Analiza reči SRBIJA</div>
          <div class="step-body">
            <p>Reč SRBIJA ima <strong>6 različitih slova</strong>:</p>
            <div class="letter-display">
              <div class="letter-box consonant">S</div>
              <div class="letter-box consonant">R</div>
              <div class="letter-box consonant">B</div>
              <div class="letter-box vowel">I</div>
              <div class="letter-box consonant">J</div>
              <div class="letter-box vowel">A</div>
            </div>
            <p>
              Samoglasnici (plavi): \(I,\, A\) — ukupno \(2\)<br>
              Suglasnici (ljubičasti): \(S,\, R,\, B,\, J\) — ukupno \(4\)
            </p>
            <div class="checkpoint">
              Sva slova su RAZLIČITA, pa koristimo formulu \(P_n = n!\).
            </div>
          </div>
        </div>
      </div>

      <div class="step">
        <div class="step-badge">2</div>
        <div class="step-content">
          <div class="step-title">Ukupan broj permutacija</div>
          <div class="step-body">
            <p>Permutacije 6 različitih slova:</p>
            \[ P_6 = 6! = 720 \]
          </div>
        </div>
      </div>

      <div class="step">
        <div class="step-badge">3</div>
        <div class="step-content">
          <div class="step-title">Reformulacija uslova</div>
          <div class="step-body">
            <p>
              Uslov "između dva samoglasnika se nalazi <strong>bar jedan suglasnik</strong>" znači
              da samoglasnici <strong>I</strong> i <strong>A</strong> ne smeju stajati
              jedan do drugog (ne smeju biti susedni u nizu).
            </p>
            <p style="margin-top:8px;">Primenjujemo metodu komplementa:</p>
            \[
              N_{\text{traženo}} = N_{\text{ukupno}} - N_{\text{susedni samoglasnici}}
            \]
          </div>
        </div>
      </div>

      <div class="step">
        <div class="step-badge">4</div>
        <div class="step-content">
          <div class="step-title">Broj permutacija sa susednim samoglasnicima</div>
          <div class="step-body">
            <p>
              Kada su I i A susedni, tretiramo ih kao <strong>jedan blok</strong> \([IA]\).
              Tada raspoređujemo 5 elemenata: \([IA],\, S,\, R,\, B,\, J\).
            </p>
            \[ P_5 = 5! = 120 \]
            <p style="margin-top:8px;">
              Unutar bloka, I i A mogu biti raspoređeni na \(2! = 2\) načina:
              \([IA]\) ili \([AI]\).
            </p>
            \[
              N_{\text{susedni}} = 5! \cdot 2! = 120 \cdot 2 = 240
            \]
            <div class="checkpoint">
              Blok-metoda: \(n\) objekata od kojih \(k\) moraju biti susedni daje
              \((n-k+1)!\cdot k!\) permutacija.
            </div>
          </div>
        </div>
      </div>

      <div class="step">
        <div class="step-badge">5</div>
        <div class="step-content">
          <div class="step-title">Konačan rezultat</div>
          <div class="step-body">
            <p>Primenjujemo metodu komplementa:</p>
            \[
              N_{\text{traženo}} = 720 - 240 = \boxed{480}
            \]
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- Complement Visual -->
  <div class="card">
    <div class="card-title">
      <span class="icon" style="background:#1d4ed8;color:#93c5fd;">R</span>
      Pregled računanja
    </div>
    <div class="complement-visual">
      <div class="cv-box total">
        <div class="cv-label">Ukupno permutacija</div>
        <div class="cv-value">\(6!\)</div>
        <div style="color:#94a3b8;font-size:0.9rem;margin-top:4px;">\(= 720\)</div>
      </div>
      <div class="cv-box minus">−</div>
      <div class="cv-box bad">
        <div class="cv-label">Susedni samoglasnici</div>
        <div class="cv-value">\(5! \cdot 2!\)</div>
        <div style="color:#94a3b8;font-size:0.9rem;margin-top:4px;">\(= 240\)</div>
      </div>
      <div class="cv-box equals">=</div>
      <div class="cv-box result">
        <div class="cv-label">Traženi raspored</div>
        <div class="cv-value">\(480\)</div>
        <div style="color:#94a3b8;font-size:0.9rem;margin-top:4px;">odgovor B)</div>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-card">
    <div class="card-title">
      <span class="icon">!</span>
      Ključna ideja
    </div>
    <p>
      Uslov "bar jedan suglasnik između dva samoglasnika" i uslov "samoglasnici nisu susedni"
      su <strong>ekvivalentni</strong> kada ima samo 2 samoglasnika.
      Metoda komplementa nam omogućava da izbegnemo direktno prebrojavanje složenih konfiguracija —
      umesto toga, računamo lakšu "zabranjenu" situaciju i oduzimamo je od ukupnog broja.
    </p>
    <p style="margin-top:10px;">
      <strong>Provera direktnim putem:</strong> Biramo 2 od 6 pozicija za samoglasnike,
      ali tako da ne budu susedne. Parovi susednih pozicija su:
      \((1,2),(2,3),(3,4),(4,5),(5,6)\) — ukupno 5. Svih parova pozicija ima \(\binom{6}{2}=15\).
      Dakle, nesusednih parova ima \(15-5=10\). Raspoređujemo samoglasnike na 2 izabrane pozicije
      na \(2!=2\) načina, a suglasnike na preostalih 4 pozicija na \(4!=24\) načina:
      \[
        10 \times 2 \times 24 = 480 \checkmark
      \]
    </p>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-card">
    <div class="card-title">
      <span class="icon">✓</span>
      Tačan odgovor
    </div>
    <div class="final-value">480</div>
    <div class="final-label">Odgovor B) \(\;480\)</div>
  </div>

  <!-- Pitfalls -->
  <div class="pitfall-card">
    <div class="card-title">
      <span class="icon" style="background:#7f1d1d;color:#fca5a5;">!</span>
      Česte greške
    </div>
    <div class="pitfall-item">
      Zanemarivanje oba rasporeda unutar bloka: pri blok-metodi uvek množiti sa \(k!\) za unutrašnje rasporede.
      Ovde \(2! = 2\), jer je \([IA]\) različito od \([AI]\).
    </div>
    <div class="pitfall-item">
      Pogrešno tumačenje uslova: "bar jedan suglasnik između samoglasnika" ne znači da svi suglasnici
      moraju biti između njih — dovoljno je da samoglasnici nisu direktno susedni.
    </div>
    <div class="pitfall-item">
      Zaboravljanje da se radi o reči sa svim RAZLIČITIM slovima, pa direktno
      primenjujemo \(n!\) bez korekcija za ponavljanja.
    </div>
  </div>

  <!-- Challenge -->
  <div class="challenge-card">
    <div class="card-title">
      <span class="icon" style="background:#78350f;color:#fcd34d;">*</span>
      Izazovni zadatak
    </div>
    <p style="color:#fde68a;">
      Koliko ima permutacija slova reči <strong>MATEMATIKA</strong> u kojima su
      svi samoglasnici zajedno (formiraju jedan blok)?
    </p>
    <p style="color:#94a3b8; margin-top:10px; font-size:0.9rem;">
      Napomena: MATEMATIKA ima slova M, A, T, E, M, A, T, I, K, A — pri rešavanju
      voditi računa o ponavljanjima. Odgovor: \(\dfrac{7!}{2!\,2!} \cdot \dfrac{5!}{3!} = \dfrac{5040}{4} \cdot 20 = 25200\).
    </p>
  </div>

</div><!-- end container -->

<script>
(function() {
  // Mark correct answer
  document.querySelectorAll('.answer-option').forEach(function(el) {
    if (el.getAttribute('data-option') === 'B') {
      el.classList.add('correct');
    }
  });

  var canvas = document.getElementById('mainCanvas');
  var ctx = canvas.getContext('2d');
  var currentView = 'komplement';

  function resize() {
    var dpr = window.devicePixelRatio || 1;
    var w = canvas.parentElement.clientWidth - 52;
    canvas.style.width = w + 'px';
    canvas.style.height = '320px';
    canvas.width = w * dpr;
    canvas.height = 320 * dpr;
    ctx.scale(dpr, dpr);
    draw();
  }

  function showView(v) {
    currentView = v;
    document.getElementById('btnKomplement').classList.toggle('active', v === 'komplement');
    document.getElementById('btnPozicije').classList.toggle('active', v === 'pozicije');
    draw();
  }
  window.showView = showView;

  function draw() {
    var w = canvas.clientWidth;
    var h = 320;
    ctx.clearRect(0, 0, w, h);

    // Background
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, w, h);

    if (currentView === 'komplement') {
      drawKomplement(w, h);
    } else {
      drawPozicije(w, h);
    }
  }

  function roundRect(ctx, x, y, w, h, r, fill, stroke) {
    ctx.beginPath();
    ctx.moveTo(x + r, y);
    ctx.lineTo(x + w - r, y);
    ctx.quadraticCurveTo(x + w, y, x + w, y + r);
    ctx.lineTo(x + w, y + h - r);
    ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
    ctx.lineTo(x + r, y + h);
    ctx.quadraticCurveTo(x, y + h, x, y + h - r);
    ctx.lineTo(x, y + r);
    ctx.quadraticCurveTo(x, y, x + r, y);
    ctx.closePath();
    if (fill) { ctx.fillStyle = fill; ctx.fill(); }
    if (stroke) { ctx.strokeStyle = stroke; ctx.lineWidth = 2; ctx.stroke(); }
  }

  function drawKomplement(w, h) {
    var pad = 20;
    var bw = Math.min((w - pad * 4) / 3, 200);
    var bh = 100;
    var by = h / 2 - bh / 2 - 10;

    // Title
    ctx.fillStyle = '#94a3b8';
    ctx.font = '14px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Metoda komplementa', w / 2, 28);

    // Total box
    var x1 = pad;
    roundRect(ctx, x1, by, bw, bh, 10, '#172554', '#60a5fa');
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 13px Segoe UI';
    ctx.textAlign = 'center';
    ctx.fillText('Sve permutacije', x1 + bw / 2, by + 22);
    ctx.fillStyle = '#93c5fd';
    ctx.font = 'bold 26px Segoe UI';
    ctx.fillText('6! = 720', x1 + bw / 2, by + 56);
    ctx.fillStyle = '#64748b';
    ctx.font = '11px Segoe UI';
    ctx.fillText('bez ograničenja', x1 + bw / 2, by + 80);

    // Minus sign
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 36px Segoe UI';
    ctx.textAlign = 'center';
    ctx.fillText('−', x1 + bw + pad, by + bh / 2 + 12);

    // Bad box
    var x2 = x1 + bw + pad * 2;
    roundRect(ctx, x2, by, bw, bh, 10, '#450a0a', '#f87171');
    ctx.fillStyle = '#f87171';
    ctx.font = 'bold 13px Segoe UI';
    ctx.textAlign = 'center';
    ctx.fillText('Susedni samoglasnici', x2 + bw / 2, by + 22);
    ctx.fillStyle = '#fca5a5';
    ctx.font = 'bold 26px Segoe UI';
    ctx.fillText('5!·2! = 240', x2 + bw / 2, by + 56);
    ctx.fillStyle = '#64748b';
    ctx.font = '11px Segoe UI';
    ctx.fillText('[IA] blok', x2 + bw / 2, by + 80);

    // Equals sign
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 36px Segoe UI';
    ctx.textAlign = 'center';
    ctx.fillText('=', x2 + bw + pad, by + bh / 2 + 12);

    // Result box
    var x3 = x2 + bw + pad * 2;
    var rw = w - x3 - pad;
    if (rw < 80) rw = 80;
    roundRect(ctx, x3, by, rw, bh, 10, '#064e3b', '#34d399');
    ctx.fillStyle = '#34d399';
    ctx.font = 'bold 13px Segoe UI';
    ctx.textAlign = 'center';
    ctx.fillText('Rešenje', x3 + rw / 2, by + 22);
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 30px Segoe UI';
    ctx.fillText('480', x3 + rw / 2, by + 58);
    ctx.fillStyle = '#6ee7b7';
    ctx.font = '11px Segoe UI';
    ctx.fillText('odgovor B)', x3 + rw / 2, by + 80);

    // Explanation below
    ctx.fillStyle = '#64748b';
    ctx.font = '12px Segoe UI';
    ctx.textAlign = 'center';
    ctx.fillText('Blok [IA] → 5 elemenata (5!) × 2 rasporeda unutar bloka (2!)', w / 2, by + bh + 40);
  }

  function drawPozicije(w, h) {
    var pad = 24;
    var cellW = Math.min(54, (w - pad * 2) / 6 - 6);
    var cellH = 50;
    var startX = (w - (cellW * 6 + 5 * 8)) / 2;
    var startY = 50;

    ctx.fillStyle = '#94a3b8';
    ctx.font = '14px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('6 pozicija za slova — nesusedni parovi za samoglasnike', w / 2, 28);

    // Draw 6 position boxes
    var positions = [1, 2, 3, 4, 5, 6];
    var gap = 8;
    for (var i = 0; i < 6; i++) {
      var bx = startX + i * (cellW + gap);
      roundRect(ctx, bx, startY, cellW, cellH, 8, '#1e293b', '#475569');
      ctx.fillStyle = '#94a3b8';
      ctx.font = '11px Segoe UI';
      ctx.textAlign = 'center';
      ctx.fillText('poz. ' + positions[i], bx + cellW / 2, startY + 16);
      ctx.fillStyle = '#e2e8f0';
      ctx.font = 'bold 16px Segoe UI';
      ctx.fillText(positions[i], bx + cellW / 2, startY + 37);
    }

    // Show adjacent pairs (bad)
    ctx.fillStyle = '#f87171';
    ctx.font = 'bold 12px Segoe UI';
    ctx.textAlign = 'center';
    ctx.fillText('Susedni parovi (zabranjeno): (1,2), (2,3), (3,4), (4,5), (5,6) → 5 parova', w / 2, startY + 75);

    // Show some non-adjacent example arrangements
    var examples = [
      [1, 3], [1, 4], [1, 5], [1, 6],
      [2, 4], [2, 5], [2, 6],
      [3, 5], [3, 6],
      [4, 6]
    ];

    ctx.fillStyle = '#34d399';
    ctx.font = 'bold 12px Segoe UI';
    ctx.textAlign = 'center';
    ctx.fillText('Nesusedni parovi (dozvoljeno) → ukupno 10 parova:', w / 2, startY + 100);

    var exPerRow = Math.floor((w - pad * 2) / 60);
    for (var j = 0; j < examples.length; j++) {
      var ex = examples[j];
      var row = Math.floor(j / exPerRow);
      var col = j % exPerRow;
      var ex_x = pad + col * 60 + 30;
      var ex_y = startY + 122 + row * 24;

      // Draw mini 6 cells
      var miniW = 8;
      var miniGap = 2;
      var totalMini = 6 * miniW + 5 * miniGap;
      var mx = ex_x - totalMini / 2;
      for (var k = 0; k < 6; k++) {
        var isVowel = (k + 1 === ex[0] || k + 1 === ex[1]);
        ctx.fillStyle = isVowel ? '#1d4ed8' : '#334155';
        ctx.fillRect(mx + k * (miniW + miniGap), ex_y, miniW, 14);
      }
    }

    // Calculation
    var calcY = startY + 200;
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI';
    ctx.textAlign = 'center';
    ctx.fillText('Ukupno: C(6,2) − 5 = 15 − 5 = 10 nesusednih parova', w / 2, calcY);
    ctx.fillStyle = '#a78bfa';
    ctx.font = '13px Segoe UI';
    ctx.fillText('10 × 2! × 4! = 10 × 2 × 24 = 480', w / 2, calcY + 22);
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 15px Segoe UI';
    ctx.fillText('Traženi broj permutacija = 480', w / 2, calcY + 46);
  }

  window.addEventListener('resize', resize);
  resize();
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{"title":"Permutacije slova reči SRBIJA — bar jedan suglasnik između samoglasnika","subject":"math","unit":"combinatorics","topic_tags":["permutacije","kombinatorika","metoda_komplementa","prebrojavanje"]}
BRAINSPARK_META-->
