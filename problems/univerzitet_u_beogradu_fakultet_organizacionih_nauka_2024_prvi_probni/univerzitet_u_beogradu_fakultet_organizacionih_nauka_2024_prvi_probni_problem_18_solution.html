<!DOCTYPE html>
<html lang="sr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Permutacije slova reci SRBIJA — uslov za samoglasnike</title>

  <script type="text/info" id="logic-scratchpad">
    Rec: SRBIJA
    Slova: S, R, B, I, J, A  (ukupno 6 razlicitih slova)

    Samoglasnici: I, A  (2 samoglasnika)
    Suglasnici: S, R, B, J  (4 suglasnika)

    Uslov: izmedju dva samoglasnika se nalazi BAR JEDAN suglasnik.
    To znaci: dva samoglasnika NE SMEJU stajati jedan do drugog (ne smeju biti susedni).

    Metoda komplementa:
    Ukupno permutacija = 6! = 720

    Permutacije gde su oba samoglasnika SUSEDNA:
    - Tretiramo {I, A} kao jedan blok -> 5 elemenata: [IA], S, R, B, J
    - Rasporedivanje 5 elemenata: 5! = 120
    - Redosled unutar bloka: I,A ili A,I -> 2! = 2
    - Ukupno susednih: 5! * 2! = 120 * 2 = 240

    Trazeni broj = Ukupno - Susedni = 720 - 240 = 480

    Provera direktnim racunanjem:
    - Rasporedimo 4 suglasnika: 4! = 24 nacina
    - Suglasnici kreiraju 5 mogucih mesta za samoglasnike: _ S _ R _ B _ J _
    - Od 5 mesta biramo 2 za samoglasnike: C(5,2) = 10
    - Samoglasnici se mogu rasporediti na ta 2 mesta na 2! = 2 nacina
    - Ukupno: 4! * C(5,2) * 2! = 24 * 10 * 2 = 480

    Odgovor: B) 480
  </script>

  <script>
    MathJax = {
      tex: {
        inlineMath: [['\\(', '\\)'], ['$', '$']],
        displayMath: [['\\[', '\\]']]
      },
      svg: { fontCache: 'global' }
    };
  </script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
  </script>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: #0f172a;
      color: #e2e8f0;
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      line-height: 1.7;
      padding: 24px 20px 60px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    h1 {
      font-size: 2rem;
      font-weight: 800;
      background: linear-gradient(135deg, #60a5fa, #a78bfa);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 8px;
    }

    .subtitle {
      color: #94a3b8;
      font-size: 1rem;
      margin-bottom: 32px;
    }

    .card {
      background: #1e293b;
      border: 1px solid #334155;
      border-radius: 14px;
      padding: 22px 26px;
      margin-bottom: 22px;
    }

    .card-title {
      font-size: 1.05rem;
      font-weight: 700;
      color: #60a5fa;
      margin-bottom: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .card-title .icon {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.85rem;
      font-weight: 700;
      flex-shrink: 0;
    }

    .problem-statement .card-title .icon { background: #1d4ed8; color: #93c5fd; }

    .problem-text {
      font-size: 1.05rem;
      color: #e2e8f0;
      margin-bottom: 18px;
    }

    .given-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 14px;
    }

    .given-item.answer-option {
      background: #0f172a;
      border: 1px solid #475569;
      border-radius: 8px;
      padding: 8px 16px;
      font-size: 0.95rem;
      color: #cbd5e1;
      cursor: default;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .given-item.answer-option .label {
      font-weight: 600;
    }

    .plan-card .card-title .icon { background: #0e7490; color: #67e8f9; }

    .plan-text {
      color: #94a3b8;
      font-style: italic;
    }

    details {
      border: 1px solid #334155;
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 10px;
    }

    summary {
      background: #1e293b;
      padding: 12px 18px;
      cursor: pointer;
      font-weight: 600;
      color: #a78bfa;
      list-style: none;
      display: flex;
      align-items: center;
      gap: 8px;
      user-select: none;
    }

    summary::-webkit-details-marker { display: none; }

    summary::before {
      content: '\25B6';
      font-size: 0.7rem;
      transition: transform 0.2s;
    }

    details[open] summary::before {
      transform: rotate(90deg);
    }

    .details-body {
      background: #0f172a;
      padding: 16px 20px;
      border-top: 1px solid #334155;
    }

    .formula-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 12px;
      margin-top: 8px;
    }

    .formula-box {
      background: #1e293b;
      border-left: 3px solid #60a5fa;
      border-radius: 8px;
      padding: 12px 16px;
      color: #93c5fd;
      font-size: 0.95rem;
    }

    .formula-box .formula-label {
      color: #94a3b8;
      font-size: 0.82rem;
      margin-bottom: 4px;
    }

    canvas {
      display: block;
      width: 100%;
      border-radius: 10px;
      touch-action: none;
      cursor: default;
    }

    .canvas-controls {
      display: flex;
      gap: 10px;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    .btn {
      background: #1e293b;
      border: 1px solid #475569;
      border-radius: 8px;
      color: #e2e8f0;
      padding: 7px 16px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: background 0.15s, border-color 0.15s;
    }

    .btn:hover { background: #334155; border-color: #60a5fa; }
    .btn.active { background: #1d4ed8; border-color: #60a5fa; color: #fff; }

    .canvas-hint {
      color: #64748b;
      font-size: 0.82rem;
      margin-top: 8px;
    }

    .steps-container { display: flex; flex-direction: column; gap: 20px; }

    .step {
      display: flex;
      gap: 18px;
      align-items: flex-start;
    }

    .step-badge {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: linear-gradient(135deg, #1d4ed8, #7c3aed);
      color: #fff;
      font-weight: 800;
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      margin-top: 2px;
    }

    .step-content { flex: 1; }

    .step-title {
      font-weight: 700;
      font-size: 1rem;
      color: #c4b5fd;
      margin-bottom: 6px;
    }

    .step-text {
      color: #cbd5e1;
      margin-bottom: 10px;
    }

    .math-block {
      background: #0f172a;
      border: 1px solid #334155;
      border-radius: 8px;
      padding: 14px 18px;
      margin: 10px 0;
      overflow-x: auto;
    }

    .math-block.highlight {
      border-left: 3px solid #60a5fa;
    }

    .checkpoint {
      margin-top: 10px;
    }

    .checkpoint summary {
      color: #34d399;
      font-size: 0.9rem;
    }

    .checkpoint .details-body {
      font-size: 0.9rem;
      color: #94a3b8;
    }

    .key-insight {
      background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
      border: 1px solid #4f46e5;
      border-radius: 14px;
      padding: 20px 26px;
      margin-bottom: 22px;
    }

    .key-insight .insight-title {
      font-size: 1rem;
      font-weight: 700;
      color: #a78bfa;
      margin-bottom: 10px;
    }

    .key-insight p { color: #cbd5e1; }

    .final-answer-card {
      background: #1e293b;
      border: 1px solid #334155;
      border-radius: 14px;
      padding: 22px 26px;
      margin-bottom: 22px;
      text-align: center;
    }

    .final-answer-card .answer-label {
      color: #94a3b8;
      margin-bottom: 10px;
      font-size: 0.95rem;
    }

    .final-answer-value {
      font-size: 2.5rem;
      font-weight: 900;
      color: #34d399;
      margin-bottom: 18px;
      letter-spacing: 1px;
    }

    .options-row {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
    }

    .opt-pill {
      padding: 8px 20px;
      border-radius: 9px;
      font-size: 0.95rem;
      font-weight: 600;
      border: 1.5px solid #475569;
      color: #94a3b8;
      background: #0f172a;
    }

    .opt-pill.correct {
      border-color: #34d399;
      color: #34d399;
      background: rgba(52,211,153,0.08);
    }

    .pitfall-item {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      margin-bottom: 10px;
      color: #fca5a5;
      font-size: 0.97rem;
    }

    .pitfall-icon {
      background: #7f1d1d;
      color: #fca5a5;
      border-radius: 50%;
      width: 22px;
      height: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 0.85rem;
      flex-shrink: 0;
      margin-top: 2px;
    }

    .challenge-card {
      background: #1e293b;
      border: 1px dashed #475569;
      border-radius: 12px;
      padding: 18px 22px;
    }

    .challenge-title {
      color: #f472b6;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .challenge-text { color: #cbd5e1; }

    .letter-display {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin: 14px 0;
    }

    .letter-box {
      width: 48px;
      height: 48px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.4rem;
      font-weight: 800;
      border: 2px solid;
    }

    .letter-box.vowel {
      background: rgba(244,114,182,0.18);
      border-color: #f472b6;
      color: #f472b6;
    }

    .letter-box.consonant {
      background: rgba(96,165,250,0.15);
      border-color: #60a5fa;
      color: #60a5fa;
    }

    .complement-visual {
      display: flex;
      gap: 18px;
      flex-wrap: wrap;
      margin: 14px 0;
      align-items: stretch;
    }

    .cv-box {
      background: #0f172a;
      border: 1px solid #334155;
      border-radius: 10px;
      padding: 14px 18px;
      flex: 1;
      min-width: 140px;
      text-align: center;
    }

    .cv-box .cv-label {
      color: #94a3b8;
      font-size: 0.82rem;
      margin-bottom: 6px;
    }

    .cv-box .cv-value {
      font-size: 1.5rem;
      font-weight: 800;
    }

    .cv-box.total .cv-value { color: #60a5fa; }
    .cv-box.minus { display: flex; align-items: center; justify-content: center; font-size: 2rem; color: #94a3b8; flex: 0; min-width: 30px; background: none; border: none; padding: 0; }
    .cv-box.equals { display: flex; align-items: center; justify-content: center; font-size: 2rem; color: #94a3b8; flex: 0; min-width: 30px; background: none; border: none; padding: 0; }
    .cv-box.bad .cv-value { color: #f87171; }
    .cv-box.result .cv-value { color: #4ade80; }

    @media (max-width: 700px) {
      h1 { font-size: 1.45rem; }
      .step { flex-direction: column; gap: 8px; }
      .final-answer-value { font-size: 1.9rem; }
      .letter-box { width: 38px; height: 38px; font-size: 1.1rem; }
    }
  </style>
</head>
<body>
<div class="container">

  <h1>Permutacije slova reci SRBIJA</h1>
  <p class="subtitle">Kombinatorika — prebrojavanje uz uslov razdvojenosti samoglasnika</p>

  <!-- Tekst zadatka -->
  <div class="card problem-statement">
    <div class="card-title">
      <span class="icon">Z</span>
      Tekst zadatka
    </div>
    <p class="problem-text">
      Broj svih permutacija slova reci SRBIJA kod kojih se izmedju dva samoglasnika
      nalazi bar jedan suglasnik, jednak je:
    </p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A"><div class="label">(A)</div><div class="value">\(420\)</div></div>
      <div class="given-item answer-option" data-option="B"><div class="label">(B)</div><div class="value">\(480\)</div></div>
      <div class="given-item answer-option" data-option="C"><div class="label">(C)</div><div class="value">\(440\)</div></div>
      <div class="given-item answer-option" data-option="D"><div class="label">(D)</div><div class="value">\(520\)</div></div>
      <div class="given-item answer-option" data-option="E"><div class="label">(E)</div><div class="value">\(46\)</div></div>
    </div>
  </div>

  <!-- Analiza slova -->
  <div class="card">
    <div class="card-title">
      <span class="icon" style="background:#4c1d95;color:#c4b5fd;">S</span>
      Analiza slova reci SRBIJA
    </div>
    <div class="letter-display">
      <div class="letter-box consonant">S</div>
      <div class="letter-box consonant">R</div>
      <div class="letter-box consonant">B</div>
      <div class="letter-box vowel">I</div>
      <div class="letter-box consonant">J</div>
      <div class="letter-box vowel">A</div>
    </div>
    <p style="color:#94a3b8; font-size:0.93rem;">
      Suglasnici (plavo): S, R, B, J — ukupno 4 &nbsp;|&nbsp;
      Samoglasnici (roze): I, A — ukupno 2 &nbsp;|&nbsp;
      Sva slova su razlicita (6 ukupno)
    </p>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <div class="card-title">
      <span class="icon" style="background:#065f46;color:#6ee7b7;">P</span>
      Plan resavanja
    </div>
    <p class="plan-text">
      Uslov "bar jedan suglasnik izmedju dva samoglasnika" je ekvivalentan uslovu da
      samoglasnici I i A nisu susedni. Koristimo metodu komplementa: od ukupnog broja permutacija
      oduzimamo one u kojima su samoglasnici susedni (koristeci metod bloka).
    </p>
  </div>

  <!-- Teorija -->
  <details style="margin-bottom:22px;">
    <summary>Teorijsko podsecanje — kljucne formule</summary>
    <div class="details-body">
      <div class="formula-grid">
        <div class="formula-box">
          <div class="formula-label">Permutacije n razlicitih elemenata</div>
          \[P_n = n!\]
        </div>
        <div class="formula-box">
          <div class="formula-label">Metoda komplementa</div>
          \[|A| = |U| - |\overline{A}|\]
          Broj povoljnih = Ukupno &minus; Broj nepovoljnih
        </div>
        <div class="formula-box">
          <div class="formula-label">Metod bloka (lepljenja)</div>
          Ako dva elementa moraju biti susedna, posmatrajmo ih kao jedan blok.
          Tada imamo \((n-1)!\) rasporeda, puta \(2!\) rasporeda unutar bloka.
        </div>
      </div>
    </div>
  </details>

  <!-- Vizualizacija (Canvas) -->
  <div class="card" style="padding:18px 22px;">
    <div class="card-title">
      <span class="icon" style="background:#4c1d95;color:#c4b5fd;">D</span>
      Vizualizacija rasporeda
    </div>
    <canvas id="vizCanvas" width="720" height="380"></canvas>
    <div class="canvas-controls">
      <button class="btn active" id="btnAll">Svi rasporedi</button>
      <button class="btn" id="btnBad">Nepovoljni (susedni)</button>
      <button class="btn" id="btnGood">Povoljni (rezultat)</button>
    </div>
    <p class="canvas-hint">Izaberite prikaz da vidite vizuelni opis razlicitih scenarija rasporedivanja slova.</p>
  </div>

  <!-- Korak po korak -->
  <div class="card">
    <div class="card-title">
      <span class="icon" style="background:#7c3aed;color:#ddd6fe;">K</span>
      Resenje korak po korak
    </div>
    <div class="steps-container">

      <!-- Korak 1 -->
      <div class="step">
        <div class="step-badge">1</div>
        <div class="step-content">
          <div class="step-title">Identifikacija slova</div>
          <p class="step-text">
            Rec SRBIJA ima 6 slova, sva razlicita:
          </p>
          <div class="math-block">
            \[\text{Suglasnici: } S, R, B, J \quad (4 \text{ slova})\]
            \[\text{Samoglasnici: } I, A \quad (2 \text{ slova})\]
          </div>
        </div>
      </div>

      <!-- Korak 2 -->
      <div class="step">
        <div class="step-badge">2</div>
        <div class="step-content">
          <div class="step-title">Ukupan broj permutacija</div>
          <p class="step-text">
            Posto su sva slova razlicita, ukupan broj permutacija 6 slova je:
          </p>
          <div class="math-block highlight">
            \[P_6 = 6! = 1 \cdot 2 \cdot 3 \cdot 4 \cdot 5 \cdot 6 = 720\]
          </div>
        </div>
      </div>

      <!-- Korak 3 -->
      <div class="step">
        <div class="step-badge">3</div>
        <div class="step-content">
          <div class="step-title">Preformulacija uslova</div>
          <p class="step-text">
            Uslov glasi: izmedju dva samoglasnika (I i A) mora da se nalazi <strong>bar jedan suglasnik</strong>.
            To znaci da samoglasnici <strong>ne smeju biti susedni</strong> (ne smeju stajati jedan pored drugog u permutaciji).
          </p>
          <p class="step-text">
            Koristimo metod komplementa: oduzimamo od ukupnog broja permutacija one kod kojih su I i A susedni.
          </p>
          <div class="math-block">
            \[\text{Povoljni} = \text{Ukupno} - \text{Nepovoljni (I i A susedni)}\]
          </div>
        </div>
      </div>

      <!-- Korak 4 -->
      <div class="step">
        <div class="step-badge">4</div>
        <div class="step-content">
          <div class="step-title">Broj nepovoljnih permutacija (metod bloka)</div>
          <p class="step-text">
            Posmatrajmo I i A kao jedan <em>blok</em> (zalepljene zajedno).
            Sada umesto 6 pojedinacnih slova imamo <strong>5 objekata</strong> za rasporedivanje:
          </p>
          <div class="math-block">
            \[\underbrace{[I,A]}_{\text{blok}},\; S,\; R,\; B,\; J \quad \longrightarrow \quad 5 \text{ objekata}\]
          </div>
          <p class="step-text">
            Ovih 5 objekata mozemo rasporediti na:
          </p>
          <div class="math-block highlight">
            \[5! = 120 \text{ nacina}\]
          </div>
          <p class="step-text">
            Unutar bloka, slova I i A mogu da zamene mesta (IA ili AI):
          </p>
          <div class="math-block highlight">
            \[2! = 2 \text{ nacina}\]
          </div>
          <p class="step-text">
            Ukupan broj nepovoljnih permutacija:
          </p>
          <div class="math-block highlight">
            \[N_{\text{nepovoljni}} = 5! \cdot 2! = 120 \cdot 2 = 240\]
          </div>
        </div>
      </div>

      <!-- Korak 5 -->
      <div class="step">
        <div class="step-badge">5</div>
        <div class="step-content">
          <div class="step-title">Konacni racun</div>
          <p class="step-text">
            Primenjujemo metod komplementa:
          </p>
          <div class="math-block highlight">
            \[N_{\text{povoljni}} = 6! - 5! \cdot 2! = 720 - 240 = \boxed{480}\]
          </div>
          <details class="checkpoint">
            <summary>Provera: alternativni pristup (direktno racunanje)</summary>
            <div class="details-body">
              Mozemo i direktno da racunamo. Rasporedimo najpre 4 suglasnika u niz:
              \[4! = 24 \text{ nacina}\]
              Suglasnici kreiraju 5 mogucih mesta za samoglasnike (pre prvog, izmedju svakog para, posle poslednjeg):
              \[\_ \; \square \; \_ \; \square \; \_ \; \square \; \_ \; \square \; \_\]
              Od 5 mesta biramo 2 za samoglasnike:
              \[\binom{5}{2} = 10\]
              Samoglasnici se mogu rasporediti na ta 2 mesta na \(2! = 2\) nacina.
              <br><br>
              Ukupno: \(4! \cdot \binom{5}{2} \cdot 2! = 24 \cdot 10 \cdot 2 = 480\).
              <br>
              Rezultat se poklapa sa metodom komplementa.
            </div>
          </details>
        </div>
      </div>

    </div>
  </div>

  <!-- Pregled racunanja -->
  <div class="card">
    <div class="card-title">
      <span class="icon" style="background:#1d4ed8;color:#93c5fd;">R</span>
      Pregled racunanja
    </div>
    <div class="complement-visual">
      <div class="cv-box total">
        <div class="cv-label">Ukupno permutacija</div>
        <div class="cv-value">\(6!\)</div>
        <div style="color:#94a3b8;font-size:0.9rem;margin-top:4px;">\(= 720\)</div>
      </div>
      <div class="cv-box minus">&minus;</div>
      <div class="cv-box bad">
        <div class="cv-label">Susedni samoglasnici</div>
        <div class="cv-value">\(5! \cdot 2!\)</div>
        <div style="color:#94a3b8;font-size:0.9rem;margin-top:4px;">\(= 240\)</div>
      </div>
      <div class="cv-box equals">=</div>
      <div class="cv-box result">
        <div class="cv-label">Trazeni raspored</div>
        <div class="cv-value">\(480\)</div>
        <div style="color:#94a3b8;font-size:0.9rem;margin-top:4px;">odgovor B)</div>
      </div>
    </div>
  </div>

  <!-- Kljucna ideja -->
  <div class="key-insight">
    <div class="insight-title">Kljucna ideja</div>
    <p>
      Uslov "bar jedan suglasnik izmedju dva samoglasnika" i uslov "samoglasnici nisu susedni"
      su <strong>ekvivalentni</strong> kada ima samo 2 samoglasnika.
      Metoda komplementa nam omogucava da izbegnemo direktno prebrojavanje slozenih konfiguracija —
      umesto toga, racunamo laksu "zabranjenu" situaciju i oduzimamo je od ukupnog broja.
    </p>
    <p style="margin-top:10px;">
      Alternativno, direktan pristup (rasporediti suglasnike pa samoglasnike staviti u praznine)
      takodje daje isti rezultat i moze biti intuitivniji za neke ucenike.
    </p>
  </div>

  <!-- Konacni odgovor -->
  <div class="final-answer-card">
    <div class="answer-label">Konacni odgovor</div>
    <div class="final-answer-value">\(480\)</div>
    <div class="options-row">
      <div class="opt-pill">(A) 420</div>
      <div class="opt-pill correct">(B) 480</div>
      <div class="opt-pill">(C) 440</div>
      <div class="opt-pill">(D) 520</div>
      <div class="opt-pill">(E) 46</div>
    </div>
  </div>

  <!-- Ceste greske -->
  <div class="card">
    <div class="card-title">
      <span class="icon" style="background:#7f1d1d;color:#fca5a5;">!</span>
      Ceste greske
    </div>
    <div class="pitfalls">
      <div class="pitfall-item">
        <span class="pitfall-icon">!</span>
        <span>
          Zaboravljanje da unutar bloka samoglasnici mogu da zamene mesta.
          Bez faktora \(2!\) za unutrasnji raspored bloka, dobijamo samo 120 umesto 240 nepovoljnih,
          sto daje pogresan rezultat \(720 - 120 = 600\).
        </span>
      </div>
      <div class="pitfall-item">
        <span class="pitfall-icon">!</span>
        <span>
          Pogresno tumacenje uslova: "izmedju dva samoglasnika bar jedan suglasnik" se odnosi
          iskljucivo na dva samoglasnika I i A (jedina dva samoglasnika u reci). Uslov je
          ekvivalentan tome da I i A nisu susedni.
        </span>
      </div>
      <div class="pitfall-item">
        <span class="pitfall-icon">!</span>
        <span>
          Pokusaj primene formule za permutacije sa ponavljanjem. Sva slova u reci SRBIJA su razlicita,
          pa nema potrebe za deljenjem brojem ponavljanja.
        </span>
      </div>
    </div>
  </div>

  <!-- Izazovni zadatak -->
  <div class="challenge-card">
    <div class="challenge-title">Izazovni zadatak</div>
    <p class="challenge-text">
      Koliko permutacija slova reci MATEMATIKA ima svojstvo da nijedna dva samoglasnika
      nisu susedna?
      <br><br>
      <em>Uput:</em> MATEMATIKA ima 10 slova sa ponavljanjima: M(2), A(3), T(2), E(1), I(1), K(1).
      Samoglasnici su A(3), E(1), I(1) — ukupno 5 samoglasnika.
      Suglasnici su M(2), T(2), K(1) — ukupno 5 suglasnika.
      Rasporedi suglasnike, pa samoglasnike ubaci u praznine izmedju njih.
    </p>
  </div>

</div>

<script>
(function() {
  var canvas = document.getElementById('vizCanvas');
  var ctx = canvas.getContext('2d');
  var dpr = window.devicePixelRatio || 1;
  var mode = 'all';

  var btnAll = document.getElementById('btnAll');
  var btnBad = document.getElementById('btnBad');
  var btnGood = document.getElementById('btnGood');

  function setMode(m) {
    mode = m;
    btnAll.className = 'btn' + (m === 'all' ? ' active' : '');
    btnBad.className = 'btn' + (m === 'bad' ? ' active' : '');
    btnGood.className = 'btn' + (m === 'good' ? ' active' : '');
    draw();
  }

  btnAll.addEventListener('click', function() { setMode('all'); });
  btnBad.addEventListener('click', function() { setMode('bad'); });
  btnGood.addEventListener('click', function() { setMode('good'); });

  // Touch support for buttons
  btnAll.addEventListener('touchend', function(e) { e.preventDefault(); setMode('all'); });
  btnBad.addEventListener('touchend', function(e) { e.preventDefault(); setMode('bad'); });
  btnGood.addEventListener('touchend', function(e) { e.preventDefault(); setMode('good'); });

  // Touch support for canvas
  canvas.addEventListener('touchstart', function(e) { e.preventDefault(); }, { passive: false });
  canvas.addEventListener('touchmove', function(e) { e.preventDefault(); }, { passive: false });

  function resizeCanvas() {
    var rect = canvas.parentElement.getBoundingClientRect();
    var displayW = Math.min(rect.width - 44, 720);
    var displayH = displayW * 380 / 720;
    canvas.style.width = displayW + 'px';
    canvas.style.height = displayH + 'px';
    canvas.width = displayW * dpr;
    canvas.height = displayH * dpr;
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
  }

  function roundRect(x, y, w, h, r, fill, stroke) {
    ctx.beginPath();
    ctx.moveTo(x + r, y);
    ctx.lineTo(x + w - r, y);
    ctx.arcTo(x + w, y, x + w, y + r, r);
    ctx.lineTo(x + w, y + h - r);
    ctx.arcTo(x + w, y + h, x + w - r, y + h, r);
    ctx.lineTo(x + r, y + h);
    ctx.arcTo(x, y + h, x, y + h - r, r);
    ctx.lineTo(x, y + r);
    ctx.arcTo(x, y, x + r, y, r);
    ctx.closePath();
    if (fill) { ctx.fillStyle = fill; ctx.fill(); }
    if (stroke) { ctx.strokeStyle = stroke; ctx.lineWidth = 2; ctx.stroke(); }
  }

  function drawLetterBox(x, y, letter, isVowel, w, h, alpha) {
    ctx.save();
    ctx.globalAlpha = alpha || 1;
    var fill = isVowel ? 'rgba(244,114,182,0.18)' : 'rgba(96,165,250,0.15)';
    var stroke = isVowel ? '#f472b6' : '#60a5fa';
    roundRect(x, y, w, h, 6, fill, stroke);
    ctx.fillStyle = isVowel ? '#f472b6' : '#60a5fa';
    ctx.font = 'bold ' + Math.round(h * 0.5) + 'px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText(letter, x + w / 2, y + h / 2);
    ctx.restore();
  }

  function isVowelLetter(l) { return l === 'I' || l === 'A'; }

  function drawPermutation(perm, x0, y, bw, bh, alpha) {
    var gap = 5;
    for (var j = 0; j < perm.length; j++) {
      drawLetterBox(x0 + j * (bw + gap), y, perm[j], isVowelLetter(perm[j]), bw, bh, alpha);
    }
  }

  function draw() {
    var W = canvas.width / dpr;
    var H = canvas.height / dpr;
    ctx.clearRect(0, 0, W, H);

    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    var boxW = Math.min(42, W / 12);
    var boxH = boxW * 1.1;

    if (mode === 'all') {
      drawAllMode(W, H, boxW, boxH);
    } else if (mode === 'bad') {
      drawBadMode(W, H, boxW, boxH);
    } else {
      drawGoodMode(W, H, boxW, boxH);
    }
  }

  function drawAllMode(W, H, boxW, boxH) {
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 15px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Ukupan broj permutacija: 6! = 720', W / 2, 28);

    // Original word
    var gap = 5;
    var totalW = 6 * (boxW + gap) - gap;
    var startX = (W - totalW) / 2;
    var y1 = 48;
    var original = ['S', 'R', 'B', 'I', 'J', 'A'];
    drawPermutation(original, startX, y1, boxW, boxH, 1);

    // Example permutations
    var examples = [
      ['S','R','B','I','J','A'],
      ['I','S','R','A','B','J'],
      ['B','J','S','R','I','A'],
      ['A','R','S','B','J','I'],
      ['J','I','B','A','S','R'],
      ['R','A','J','S','I','B']
    ];

    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Primeri permutacija:', 20, y1 + boxH + 34);

    var smallW = Math.min(32, W / 16);
    var smallH = smallW * 1.1;
    var smallGap = 4;
    var smallTotalW = 6 * (smallW + smallGap) - smallGap;
    var sx = (W - smallTotalW) / 2;

    for (var e = 0; e < examples.length; e++) {
      var ey = y1 + boxH + 48 + e * (smallH + 10);
      drawPermutation(examples[e], sx, ey, smallW, smallH, 0.85);
    }

    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 14px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('... i jos 714 drugih permutacija', W / 2, H - 14);
  }

  function drawBadMode(W, H, boxW, boxH) {
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 15px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Nepovoljne permutacije: samoglasnici susedni', W / 2, 28);

    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Posmatrajmo I i A kao jedan blok:', W / 2, 52);

    // Block illustration
    var gap = 5;
    var blockAreaW = 2 * boxW + gap;
    var totalW = blockAreaW + 20 + 4 * (boxW + gap) - gap;
    var bStartX = (W - totalW) / 2;
    var by = 68;

    // Dashed border around block
    ctx.save();
    ctx.strokeStyle = '#fbbf24';
    ctx.lineWidth = 2;
    ctx.setLineDash([4, 3]);
    roundRect(bStartX - 5, by - 5, blockAreaW + 10, boxH + 10, 8, null, '#fbbf24');
    ctx.setLineDash([]);
    ctx.restore();

    drawLetterBox(bStartX, by, 'I', true, boxW, boxH, 1);
    drawLetterBox(bStartX + boxW + gap, by, 'A', true, boxW, boxH, 1);

    // Other letters
    var otherStart = bStartX + blockAreaW + 20;
    var others = ['S', 'R', 'B', 'J'];
    for (var i = 0; i < 4; i++) {
      drawLetterBox(otherStart + i * (boxW + gap), by, others[i], false, boxW, boxH, 0.7);
    }

    // Block label
    ctx.fillStyle = '#fbbf24';
    ctx.font = 'bold 12px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('blok', bStartX + blockAreaW / 2, by + boxH + 18);

    // Calculation
    var calcY = by + boxH + 40;
    ctx.fillStyle = '#e2e8f0';
    ctx.font = '14px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('5 objekata (blok + 4 suglasnika) se rasporedju na:', W / 2, calcY);

    ctx.fillStyle = '#fca5a5';
    ctx.font = 'bold 18px Segoe UI, sans-serif';
    ctx.fillText('5! = 120 nacina', W / 2, calcY + 28);

    ctx.fillStyle = '#e2e8f0';
    ctx.font = '14px Segoe UI, sans-serif';
    ctx.fillText('Unutar bloka, I i A mogu da zamene mesta:', W / 2, calcY + 56);

    ctx.fillStyle = '#fca5a5';
    ctx.font = 'bold 18px Segoe UI, sans-serif';
    ctx.fillText('2! = 2 nacina', W / 2, calcY + 84);

    // Examples of bad permutations
    var badEx = [
      ['S','I','A','R','B','J'],
      ['R','A','I','B','J','S'],
      ['B','J','I','A','S','R']
    ];

    var smallW = Math.min(30, W / 16);
    var smallH = smallW * 1.1;
    var smallGap = 4;
    var ey0 = calcY + 110;

    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Primeri:', 20, ey0 - 4);

    var smallTotalW = 6 * (smallW + smallGap) - smallGap;
    var sx = (W - smallTotalW) / 2;

    for (var e = 0; e < badEx.length; e++) {
      var ey = ey0 + e * (smallH + 10);
      drawPermutation(badEx[e], sx, ey, smallW, smallH, 0.85);

      // Highlight adjacent vowels with red border
      for (var j = 0; j < 5; j++) {
        if (isVowelLetter(badEx[e][j]) && isVowelLetter(badEx[e][j + 1])) {
          ctx.save();
          ctx.strokeStyle = '#ef4444';
          ctx.lineWidth = 2;
          ctx.setLineDash([3, 2]);
          var bx1 = sx + j * (smallW + smallGap) - 3;
          roundRect(bx1, ey - 3, 2 * smallW + smallGap + 6, smallH + 6, 6, null, '#ef4444');
          ctx.setLineDash([]);
          ctx.restore();
        }
      }
    }

    ctx.fillStyle = '#fca5a5';
    ctx.font = 'bold 16px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Ukupno nepovoljnih: 5! \u00D7 2! = 240', W / 2, H - 14);
  }

  function drawGoodMode(W, H, boxW, boxH) {
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 15px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Povoljne permutacije: bar jedan suglasnik izmedju I i A', W / 2, 28);

    // Visual equation
    var eqY = 68;
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 24px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('720', W / 2 - 110, eqY);

    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 24px Segoe UI, sans-serif';
    ctx.fillText('\u2212', W / 2 - 50, eqY);

    ctx.fillStyle = '#fca5a5';
    ctx.font = 'bold 24px Segoe UI, sans-serif';
    ctx.fillText('240', W / 2, eqY);

    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 24px Segoe UI, sans-serif';
    ctx.fillText('=', W / 2 + 60, eqY);

    ctx.fillStyle = '#34d399';
    ctx.font = 'bold 30px Segoe UI, sans-serif';
    ctx.fillText('480', W / 2 + 130, eqY + 2);

    // Labels
    ctx.font = '11px Segoe UI, sans-serif';
    ctx.fillStyle = '#60a5fa';
    ctx.fillText('Ukupno (6!)', W / 2 - 110, eqY + 22);
    ctx.fillStyle = '#fca5a5';
    ctx.fillText('Susedni (5!\u00D72!)', W / 2, eqY + 22);
    ctx.fillStyle = '#34d399';
    ctx.fillText('Rezultat', W / 2 + 130, eqY + 22);

    // Show good examples
    var goodEx = [
      ['S','I','R','B','A','J'],
      ['I','B','J','S','R','A'],
      ['A','S','R','I','B','J'],
      ['R','A','J','S','I','B'],
      ['J','I','S','A','R','B']
    ];

    var smallW = Math.min(32, W / 16);
    var smallH = smallW * 1.1;
    var smallGap = 4;
    var ey0 = eqY + 50;

    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Primeri povoljnih permutacija:', 20, ey0 - 4);

    var smallTotalW = 6 * (smallW + smallGap) - smallGap;
    var sx = (W - smallTotalW) / 2;

    for (var e = 0; e < goodEx.length; e++) {
      var ey = ey0 + 8 + e * (smallH + 10);
      drawPermutation(goodEx[e], sx, ey, smallW, smallH, 0.9);

      // Check mark
      ctx.fillStyle = '#34d399';
      ctx.font = 'bold 16px Segoe UI, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText('\u2713', sx + smallTotalW + 10, ey + smallH / 2 + 5);
    }

    // Pie chart
    var pieX = W - 85;
    var pieY = H - 75;
    var pieR = 50;

    // Good portion (480/720 = 2/3)
    var goodAngle = 2 * Math.PI * (480 / 720);
    ctx.beginPath();
    ctx.moveTo(pieX, pieY);
    ctx.arc(pieX, pieY, pieR, -Math.PI / 2, -Math.PI / 2 + goodAngle);
    ctx.closePath();
    ctx.fillStyle = 'rgba(52,211,153,0.3)';
    ctx.fill();
    ctx.strokeStyle = '#34d399';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Bad portion
    ctx.beginPath();
    ctx.moveTo(pieX, pieY);
    ctx.arc(pieX, pieY, pieR, -Math.PI / 2 + goodAngle, -Math.PI / 2 + 2 * Math.PI);
    ctx.closePath();
    ctx.fillStyle = 'rgba(252,165,165,0.2)';
    ctx.fill();
    ctx.strokeStyle = '#fca5a5';
    ctx.lineWidth = 2;
    ctx.stroke();

    ctx.fillStyle = '#34d399';
    ctx.font = 'bold 11px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('480', pieX - 12, pieY - 8);
    ctx.fillText('(66,7%)', pieX - 12, pieY + 6);

    ctx.fillStyle = '#fca5a5';
    ctx.fillText('240', pieX + 28, pieY + 28);
  }

  window.addEventListener('resize', function() { resizeCanvas(); draw(); });
  resizeCanvas();
  draw();
})();
</script>

</body>
</html>
