<!DOCTYPE html>
<html lang="sr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kompozicija funkcije i supstitucija</title>

  <script type="text/info" id="logic-scratchpad">
    Zadato: f(sqrt((x-2)/(x+2))) = 2/x, x u (-inf, -2) U [2, +inf)

    Cilj: naci 2*f(2) + f(3)

    Korak 1: Naci f(2)
    Treba nam vrednost x takva da sqrt((x-2)/(x+2)) = 2
    Kvadriramo: (x-2)/(x+2) = 4
    x - 2 = 4(x + 2)
    x - 2 = 4x + 8
    -3x = 10
    x = -10/3

    Provera: -10/3 ≈ -3.33 < -2, dakle x = -10/3 ∈ (-inf, -2) ✓

    f(2) = 2/(-10/3) = 2 * (-3/10) = -6/10 = -3/5

    Korak 2: Naci f(3)
    Treba nam vrednost x takva da sqrt((x-2)/(x+2)) = 3
    Kvadriramo: (x-2)/(x+2) = 9
    x - 2 = 9(x + 2)
    x - 2 = 9x + 18
    -8x = 20
    x = -20/8 = -5/2

    Provera: -5/2 = -2.5 < -2, dakle x = -5/2 ∈ (-inf, -2) ✓

    f(3) = 2/(-5/2) = 2 * (-2/5) = -4/5

    Korak 3: Izracunati izraz
    2*f(2) + f(3) = 2*(-3/5) + (-4/5)
                  = -6/5 - 4/5
                  = -10/5
                  = -2

    Odgovor: A) -2
  </script>

  <script>
    MathJax = {
      tex: {
        inlineMath: [['\\(', '\\)'], ['$', '$']],
        displayMath: [['\\[', '\\]']]
      },
      svg: { fontCache: 'global' }
    };
  </script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
  </script>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: #0f172a;
      color: #e2e8f0;
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      line-height: 1.7;
      padding: 24px 20px 60px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    h1 {
      font-size: 2rem;
      font-weight: 800;
      background: linear-gradient(135deg, #60a5fa, #a78bfa);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 8px;
    }

    .subtitle {
      color: #94a3b8;
      font-size: 1rem;
      margin-bottom: 32px;
    }

    .card {
      background: #1e293b;
      border: 1px solid #334155;
      border-radius: 14px;
      padding: 22px 26px;
      margin-bottom: 22px;
    }

    .card-title {
      font-size: 1.05rem;
      font-weight: 700;
      color: #60a5fa;
      margin-bottom: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .card-title .icon {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.85rem;
      font-weight: 700;
      flex-shrink: 0;
    }

    .problem-statement .card-title .icon { background: #1d4ed8; color: #93c5fd; }

    .problem-text {
      font-size: 1.05rem;
      color: #e2e8f0;
      margin-bottom: 18px;
    }

    .given-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 14px;
    }

    .given-item.answer-option {
      background: #0f172a;
      border: 1px solid #475569;
      border-radius: 8px;
      padding: 8px 16px;
      font-size: 0.95rem;
      color: #cbd5e1;
      cursor: default;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .given-item.answer-option .label {
      font-weight: 700;
      color: #94a3b8;
    }

    .given-item.answer-option .value {
      color: #cbd5e1;
    }

    .plan-card .card-title .icon { background: #0e7490; color: #67e8f9; }

    .plan-text {
      color: #94a3b8;
      font-style: italic;
    }

    details {
      border: 1px solid #334155;
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 10px;
    }

    summary {
      background: #1e293b;
      padding: 12px 18px;
      cursor: pointer;
      font-weight: 600;
      color: #a78bfa;
      list-style: none;
      display: flex;
      align-items: center;
      gap: 8px;
      user-select: none;
    }

    summary::-webkit-details-marker { display: none; }

    summary::before {
      content: '\25B6';
      font-size: 0.7rem;
      transition: transform 0.2s;
    }

    details[open] summary::before {
      transform: rotate(90deg);
    }

    .details-body {
      background: #0f172a;
      padding: 16px 20px;
      border-top: 1px solid #334155;
    }

    .formula-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 12px;
      margin-top: 8px;
    }

    .formula-box {
      background: #1e293b;
      border-left: 3px solid #60a5fa;
      border-radius: 8px;
      padding: 12px 16px;
      font-family: 'Courier New', monospace;
      color: #93c5fd;
      font-size: 0.95rem;
    }

    .formula-box .formula-label {
      color: #94a3b8;
      font-family: 'Segoe UI', sans-serif;
      font-size: 0.82rem;
      margin-bottom: 4px;
    }

    canvas {
      display: block;
      width: 100%;
      border-radius: 10px;
      touch-action: none;
      cursor: crosshair;
    }

    .canvas-controls {
      display: flex;
      gap: 10px;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    .btn {
      background: #1e293b;
      border: 1px solid #475569;
      border-radius: 8px;
      color: #e2e8f0;
      padding: 7px 16px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: background 0.15s, border-color 0.15s;
    }

    .btn:hover { background: #334155; border-color: #60a5fa; }
    .btn.active { background: #1d4ed8; border-color: #60a5fa; color: #fff; }

    .canvas-hint {
      color: #64748b;
      font-size: 0.82rem;
      margin-top: 8px;
    }

    .steps-container { display: flex; flex-direction: column; gap: 20px; }

    .step {
      display: flex;
      gap: 18px;
      align-items: flex-start;
    }

    .step-badge {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: linear-gradient(135deg, #1d4ed8, #7c3aed);
      color: #fff;
      font-weight: 800;
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      margin-top: 2px;
    }

    .step-content { flex: 1; }

    .step-title {
      font-weight: 700;
      font-size: 1rem;
      color: #c4b5fd;
      margin-bottom: 6px;
    }

    .step-text {
      color: #cbd5e1;
      margin-bottom: 10px;
    }

    .math-block {
      background: #0f172a;
      border: 1px solid #334155;
      border-radius: 8px;
      padding: 14px 18px;
      margin: 10px 0;
      overflow-x: auto;
    }

    .math-block.highlight {
      border-left: 3px solid #60a5fa;
    }

    .checkpoint {
      margin-top: 10px;
    }

    .checkpoint summary {
      color: #34d399;
      font-size: 0.9rem;
    }

    .checkpoint .details-body {
      font-size: 0.9rem;
      color: #94a3b8;
    }

    .key-insight {
      background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
      border: 1px solid #4f46e5;
      border-radius: 14px;
      padding: 20px 26px;
      margin-bottom: 22px;
    }

    .key-insight .insight-title {
      font-size: 1rem;
      font-weight: 700;
      color: #a78bfa;
      margin-bottom: 10px;
    }

    .key-insight p { color: #cbd5e1; }

    .final-answer-card {
      background: #1e293b;
      border: 1px solid #334155;
      border-radius: 14px;
      padding: 22px 26px;
      margin-bottom: 22px;
      text-align: center;
    }

    .final-answer-card .answer-label {
      color: #94a3b8;
      margin-bottom: 10px;
      font-size: 0.95rem;
    }

    .final-answer-value {
      font-size: 2.5rem;
      font-weight: 900;
      color: #34d399;
      margin-bottom: 18px;
      letter-spacing: 1px;
    }

    .options-row {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
    }

    .opt-pill {
      padding: 8px 20px;
      border-radius: 9px;
      font-size: 0.95rem;
      font-weight: 600;
      border: 1.5px solid #475569;
      color: #94a3b8;
      background: #0f172a;
    }

    .opt-pill.correct {
      border-color: #34d399;
      color: #34d399;
      background: rgba(52,211,153,0.08);
    }

    .pitfall-item {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      margin-bottom: 10px;
      color: #fca5a5;
      font-size: 0.97rem;
    }

    .pitfall-icon {
      background: #7f1d1d;
      color: #fca5a5;
      border-radius: 50%;
      width: 22px;
      height: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 0.85rem;
      flex-shrink: 0;
      margin-top: 2px;
    }

    .challenge-card {
      background: #1e293b;
      border: 1px dashed #475569;
      border-radius: 12px;
      padding: 18px 22px;
    }

    .challenge-title {
      color: #f472b6;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .challenge-text { color: #cbd5e1; }

    @media (max-width: 700px) {
      h1 { font-size: 1.45rem; }
      .step { flex-direction: column; gap: 8px; }
      .final-answer-value { font-size: 1.9rem; }
    }
  </style>
</head>
<body>
<div class="container">

  <!-- Naslov -->
  <h1>Kompozicija funkcije i supstitucija</h1>
  <p class="subtitle">Pronalazenje vrednosti funkcije posrednom supstitucijom</p>

  <!-- Tekst zadatka -->
  <div class="card problem-statement">
    <div class="card-title">
      <span class="icon">Z</span>
      Tekst zadatka
    </div>
    <p class="problem-text">
      Ako je \(\displaystyle f\!\left(\sqrt{\dfrac{x-2}{x+2}}\right) = \dfrac{2}{x}\),&nbsp;
      \(x \in (-\infty,\,-2) \cup [2,\,+\infty)\), onda je vrednost izraza
      \(2 \cdot f(2) + f(3)\) jednaka:
    </p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(-2\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(0\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(1\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(-3\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(-4\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <div class="card-title">
      <span class="icon" style="background:#065f46;color:#6ee7b7;">P</span>
      Plan resavanja
    </div>
    <p class="plan-text">
      Za svaku potrebnu vrednost argumenta (2 i 3) pronalazimo odgovarajuce \(x\)
      iz date relacije, zatim direktno izracunavamo \(f(2)\) i \(f(3)\) koristeci
      formulu \(\frac{2}{x}\).
    </p>
  </div>

  <!-- Teorijsko podsecanje -->
  <details>
    <summary>Teorijsko podsecanje -- korisne formule</summary>
    <div class="details-body">
      <div class="formula-grid">
        <div class="formula-box">
          <div class="formula-label">Supstitucija argumenta funkcije</div>
          Ako je \(f(g(x)) = h(x)\), a trazimo \(f(t_0)\), pronadjemo \(x_0\) takvo da \(g(x_0) = t_0\), pa je \(f(t_0) = h(x_0)\).
        </div>
        <div class="formula-box">
          <div class="formula-label">Kvadriranje jednacine s korenom</div>
          \(\sqrt{A} = B \;\Rightarrow\; A = B^2\) (uz uslov \(B \ge 0\))
        </div>
        <div class="formula-box">
          <div class="formula-label">Linearna jednacina s razlomkom</div>
          \(\dfrac{x-a}{x+b} = k \;\Rightarrow\; x - a = k(x+b)\)
        </div>
      </div>
    </div>
  </details>

  <!-- Vizuelni prikaz -->
  <div class="card" style="margin-top:22px;">
    <div class="card-title">
      <span class="icon" style="background:#4c1d95;color:#c4b5fd;">V</span>
      Interaktivni dijagram -- supstitucija
    </div>
    <canvas id="mainCanvas" height="340"></canvas>
    <div class="canvas-controls">
      <button class="btn active" id="btnF2">Pronadji f(2)</button>
      <button class="btn" id="btnF3">Pronadji f(3)</button>
    </div>
    <p class="canvas-hint">Kliknite dugmad da vidite supstituciju za svaki slucaj.</p>
  </div>

  <!-- Resenje korak po korak -->
  <div class="card">
    <div class="card-title">
      <span class="icon" style="background:#1d4ed8;color:#93c5fd;">R</span>
      Resenje korak po korak
    </div>

    <div class="steps-container">

      <!-- Korak 1 -->
      <div class="step">
        <div class="step-badge">1</div>
        <div class="step-content">
          <div class="step-title">Pronalazimo \(f(2)\) -- trazimo \(x\) tako da argument bude 2</div>
          <p class="step-text">
            Potrebno je da unutrasnji izraz bude jednak 2:
          </p>
          <div class="math-block highlight">
            \[
              \sqrt{\dfrac{x-2}{x+2}} = 2
            \]
          </div>
          <p class="step-text">Kvadriramo obe strane (dozvoljena operacija jer je desna strana pozitivna):</p>
          <div class="math-block">
            \[
              \dfrac{x-2}{x+2} = 4
            \]
          </div>
          <p class="step-text">Mnozimo sa \((x+2)\) (napomenimo da \(x \ne -2\)):</p>
          <div class="math-block">
            \[
              x - 2 = 4(x + 2) = 4x + 8
            \]
            \[
              x - 4x = 8 + 2 \quad\Rightarrow\quad -3x = 10 \quad\Rightarrow\quad x = -\dfrac{10}{3}
            \]
          </div>
          <p class="step-text">
            Proveravamo domen: \(-\dfrac{10}{3} \approx -3{,}33 &lt; -2\), dakle \(x = -\dfrac{10}{3} \in (-\infty, -2)\). Uslov je zadovoljen.
          </p>
          <div class="math-block highlight">
            \[
              f(2) = \dfrac{2}{x} = \dfrac{2}{-\tfrac{10}{3}} = 2 \cdot \left(-\dfrac{3}{10}\right) = -\dfrac{6}{10} = -\dfrac{3}{5}
            \]
          </div>

          <details class="checkpoint">
            <summary>Proveri se -- Zasto mozemo da kvadriramo?</summary>
            <div class="details-body">
              Kvadratni koren je uvek nenegativan, a desna strana je \(2 &gt; 0\), pa je kvadriranje ekvivalentna operacija ovde. Ne uvodimo lazna resenja.
            </div>
          </details>
        </div>
      </div>

      <!-- Korak 2 -->
      <div class="step">
        <div class="step-badge">2</div>
        <div class="step-content">
          <div class="step-title">Pronalazimo \(f(3)\) -- trazimo \(x\) tako da argument bude 3</div>
          <p class="step-text">
            Postavljamo:
          </p>
          <div class="math-block highlight">
            \[
              \sqrt{\dfrac{x-2}{x+2}} = 3
            \]
          </div>
          <p class="step-text">Kvadriramo:</p>
          <div class="math-block">
            \[
              \dfrac{x-2}{x+2} = 9
            \]
          </div>
          <p class="step-text">Resavamo linearnu jednacinu:</p>
          <div class="math-block">
            \[
              x - 2 = 9(x + 2) = 9x + 18
            \]
            \[
              x - 9x = 18 + 2 \quad\Rightarrow\quad -8x = 20 \quad\Rightarrow\quad x = -\dfrac{20}{8} = -\dfrac{5}{2}
            \]
          </div>
          <p class="step-text">
            Proveravamo domen: \(-\dfrac{5}{2} = -2{,}5 &lt; -2\), dakle \(x = -\dfrac{5}{2} \in (-\infty, -2)\). Uslov je zadovoljen.
          </p>
          <div class="math-block highlight">
            \[
              f(3) = \dfrac{2}{x} = \dfrac{2}{-\tfrac{5}{2}} = 2 \cdot \left(-\dfrac{2}{5}\right) = -\dfrac{4}{5}
            \]
          </div>

          <details class="checkpoint">
            <summary>Proveri se -- Koliko iznosi \(-\frac{5}{2}\) u decimalnom zapisu?</summary>
            <div class="details-body">
              \(-\dfrac{5}{2} = -2{,}5\). Posto je \(-2{,}5 &lt; -2\), tacka pripada skupu \((-\infty, -2)\).
            </div>
          </details>
        </div>
      </div>

      <!-- Korak 3 -->
      <div class="step">
        <div class="step-badge">3</div>
        <div class="step-content">
          <div class="step-title">Izracunavamo trazeni izraz</div>
          <p class="step-text">
            Sada uvrstavanje pronadjenih vrednosti:
          </p>
          <div class="math-block highlight">
            \[
              2 \cdot f(2) + f(3) = 2 \cdot \left(-\dfrac{3}{5}\right) + \left(-\dfrac{4}{5}\right)
              = -\dfrac{6}{5} - \dfrac{4}{5} = -\dfrac{10}{5} = \boxed{-2}
            \]
          </div>

          <details class="checkpoint">
            <summary>Proveri se -- Sabiranje razlomaka s istim imeniocem</summary>
            <div class="details-body">
              \(-\dfrac{6}{5} - \dfrac{4}{5} = \dfrac{-6 - 4}{5} = \dfrac{-10}{5} = -2\). Oba razlomka vec imaju imenilac 5, pa ih direktno sabiramo.
            </div>
          </details>
        </div>
      </div>

    </div>
  </div>

  <!-- Kljucni uvid -->
  <div class="key-insight">
    <div class="insight-title">Kljucni uvid</div>
    <p>
      Kada je funkcija data u obliku \(f(g(x)) = h(x)\), vrednost \(f\) u nekoj tacki nalazimo
      <strong>inverznom supstitucijom</strong>: pronadjemo \(x_0\) za koji je \(g(x_0) = t_0\),
      a zatim odgovor citamo direktno kao \(h(x_0)\). Nema potrebe da eksplicitno izolujemo formulu za \(f\).
    </p>
  </div>

  <!-- Konacan odgovor -->
  <div class="final-answer-card">
    <div class="answer-label">Vrednost izraza \(2 \cdot f(2) + f(3)\) je:</div>
    <div class="final-answer-value">\(-2\)</div>
    <div class="options-row">
      <div class="opt-pill correct">(A) \(-2\)</div>
      <div class="opt-pill">(B) \(0\)</div>
      <div class="opt-pill">(C) \(1\)</div>
      <div class="opt-pill">(D) \(-3\)</div>
      <div class="opt-pill">(E) \(-4\)</div>
    </div>
  </div>

  <!-- Ceste greske -->
  <div class="card">
    <div class="card-title">
      <span class="icon" style="background:#7f1d1d;color:#fca5a5;">!</span>
      Ceste greske
    </div>
    <div class="pitfalls">
      <div class="pitfall-item">
        <span class="pitfall-icon">!</span>
        <span>Ne proveravati da li pronadjeno \(x\) pripada domenu -- ako \(x \notin (-\infty,-2)\cup[2,+\infty)\), supstitucija nije ispravna.</span>
      </div>
      <div class="pitfall-item">
        <span class="pitfall-icon">!</span>
        <span>Zaboraviti na negativan predznak pri deljenju razlomaka:
        \(\dfrac{2}{-\frac{10}{3}} = 2 \cdot \left(-\dfrac{3}{10}\right) = -\dfrac{3}{5}\), ne \(+\dfrac{3}{5}\).</span>
      </div>
    </div>
  </div>

  <!-- Bonus izazov -->
  <div class="challenge-card">
    <div class="challenge-title">Bonus izazov</div>
    <p class="challenge-text">
      Ako je \(\displaystyle g\!\left(\sqrt{\dfrac{x+1}{x-1}}\right) = \dfrac{3}{x}\),
      \(x \in (-\infty, -1) \cup (1, +\infty)\), izracunajte \(g(\sqrt{2}) + g(2)\).
    </p>
    <details style="margin-top:12px;">
      <summary>Hint</summary>
      <div class="details-body">
        Za \(g(\sqrt{2})\): postavite \(\sqrt{\frac{x+1}{x-1}} = \sqrt{2}\) pa \(\frac{x+1}{x-1}=2\), odakle \(x=3\), pa \(g(\sqrt{2})=\frac{3}{3}=1\).<br>
        Za \(g(2)\): postavite \(\frac{x+1}{x-1}=4\), odakle \(x=\frac{5}{3}\), pa \(g(2)=\frac{3}{\frac{5}{3}}=\frac{9}{5}\).<br>
        Ukupno: \(g(\sqrt{2}) + g(2) = 1 + \frac{9}{5} = \frac{14}{5}\).
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('mainCanvas');
  const ctx = canvas.getContext('2d');

  let activeMode = 'f2';

  const btnF2 = document.getElementById('btnF2');
  const btnF3 = document.getElementById('btnF3');

  function setMode(m) {
    activeMode = m;
    btnF2.classList.toggle('active', m === 'f2');
    btnF3.classList.toggle('active', m === 'f3');
    draw();
  }

  btnF2.addEventListener('click', function() { setMode('f2'); });
  btnF3.addEventListener('click', function() { setMode('f3'); });

  function resize() {
    var rect = canvas.parentElement.getBoundingClientRect();
    var dpr = window.devicePixelRatio || 1;
    canvas.width = rect.width * dpr;
    canvas.height = 340 * dpr;
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    draw();
  }

  function roundRect(x, y, w, h, r) {
    ctx.beginPath();
    ctx.moveTo(x + r, y);
    ctx.lineTo(x + w - r, y);
    ctx.quadraticCurveTo(x + w, y, x + w, y + r);
    ctx.lineTo(x + w, y + h - r);
    ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
    ctx.lineTo(x + r, y + h);
    ctx.quadraticCurveTo(x, y + h, x, y + h - r);
    ctx.lineTo(x, y + r);
    ctx.quadraticCurveTo(x, y, x + r, y);
    ctx.closePath();
  }

  function drawArrow(x1, y1, x2, y2, color) {
    ctx.strokeStyle = color;
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y1);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(x2 - 7, y1 - 5);
    ctx.lineTo(x2, y1);
    ctx.lineTo(x2 - 7, y1 + 5);
    ctx.stroke();
  }

  function drawBox(x, y, w, h, title, lines, color) {
    roundRect(x, y, w, h, 10);
    ctx.strokeStyle = color;
    ctx.lineWidth = 1.5;
    ctx.stroke();

    ctx.shadowColor = color;
    ctx.shadowBlur = 8;
    roundRect(x, y, w, h, 10);
    ctx.stroke();
    ctx.shadowBlur = 0;

    ctx.fillStyle = color;
    ctx.font = 'bold 13px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText(title, x + w / 2, y + 24);

    ctx.font = '12.5px Courier New, monospace';
    ctx.fillStyle = '#e2e8f0';
    for (var i = 0; i < lines.length; i++) {
      ctx.fillText(lines[i], x + w / 2, y + 52 + i * 24);
    }
  }

  function draw() {
    var dpr = window.devicePixelRatio || 1;
    var W = canvas.width / dpr;
    var H = canvas.height / dpr;

    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    var isF2 = activeMode === 'f2';
    var targetVal = isF2 ? 2 : 3;
    var xSol = isF2 ? -10 / 3 : -5 / 2;
    var fVal = isF2 ? -3 / 5 : -4 / 5;
    var accentColor = isF2 ? '#60a5fa' : '#a78bfa';

    var pad = 24;
    var boxW = (W - pad * 4) / 3;
    var boxH = 200;
    var boxY = (H - boxH) / 2;

    var b1x = pad;
    drawBox(b1x, boxY, boxW, boxH, 'Jednacina', [
      '\u221A((x\u22122)/(x+2)) = ' + targetVal,
      '',
      '(x\u22122)/(x+2) = ' + (targetVal * targetVal),
      '',
      'x\u22122 = ' + (targetVal * targetVal) + '(x+2)'
    ], '#60a5fa');

    var arrowY = H / 2;
    drawArrow(b1x + boxW + 4, arrowY, b1x + boxW + pad - 4, arrowY, accentColor);

    var b2x = pad * 2 + boxW;
    var xFrac = isF2 ? '\u221210/3' : '\u22125/2';
    var xApprox = isF2 ? '\u22123,33' : '\u22122,5';
    drawBox(b2x, boxY, boxW, boxH, 'Resenje', [
      'x = ' + xFrac,
      '',
      'x \u2248 ' + xApprox,
      '',
      '\u2208 (\u2212\u221E, \u22122) \u2713'
    ], '#a78bfa');

    drawArrow(b2x + boxW + 4, arrowY, b2x + boxW + pad - 4, arrowY, accentColor);

    var b3x = pad * 3 + boxW * 2;
    var fFrac = isF2 ? '\u22123/5' : '\u22124/5';
    var fDec = isF2 ? '\u22120,6' : '\u22120,8';
    drawBox(b3x, boxY, boxW, boxH, 'Vrednost', [
      'f(' + targetVal + ') = 2/x',
      '',
      'f(' + targetVal + ') = 2/(' + xFrac + ')',
      '',
      'f(' + targetVal + ') = ' + fFrac + ' = ' + fDec
    ], '#34d399');

    ctx.fillStyle = '#64748b';
    ctx.font = '11px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Supstitucija: pronalazimo x za koji argument funkcije iznosi ' + targetVal, W / 2, H - 14);
  }

  window.addEventListener('resize', resize);
  resize();
})();
</script>

</body>
</html>

<!--BRAINSPARK_META
{
  "title": "Kompozicija funkcije i supstitucija -- vrednost izraza 2f(2)+f(3)",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["funkcije", "supstitucija", "kompozicija", "razlomci", "kvadratni_koren"]
}
BRAINSPARK_META-->