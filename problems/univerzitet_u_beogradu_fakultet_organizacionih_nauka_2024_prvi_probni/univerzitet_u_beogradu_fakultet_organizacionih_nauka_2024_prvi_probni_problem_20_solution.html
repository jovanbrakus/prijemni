<!DOCTYPE html>
<html lang="sr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Opisana kružnica trougla CDE</title>

  <script type="text/info" id="logic-scratchpad">
    Zadato: Trougao ABC sa stranicama |BC| = 11 cm, |AC| = 9 cm, |AB| = 10 cm.
    D je na AB takva da je CD visina trougla ABC (CD ⊥ AB).
    E je na AB takva da je CE težišna duž (E = središte AB).

    Cilj: Naci površinu opisane kružnice trougla CDE.

    Korak 1: Postavimo koordinatni sistem.
    Neka je A = (0, 0), B = (10, 0).
    E = središte AB = (5, 0).

    Korak 2: Naci koordinate C.
    |AC| = 9, dakle C = (cx, cy) sa cx² + cy² = 81.
    |BC| = 11, dakle (cx - 10)² + cy² = 121.

    Oduzimamo: (cx - 10)² - cx² = 121 - 81 = 40
    cx² - 20cx + 100 - cx² = 40
    -20cx = -60
    cx = 3

    cy² = 81 - 9 = 72, cy = 6√2  (uzimamo pozitivno)

    C = (3, 6√2)

    Korak 3: Naci D (nožište visine iz C na AB).
    AB leži na x-osi, pa je nožište visine D = (cx, 0) = (3, 0).
    Provjera: CD ⊥ AB (vertikalna linija ⊥ horizontalnoj x-osi) ✓

    Korak 4: Kljucna opservacija — ugao u D.
    Tacke:
      C = (3, 6√2)
      D = (3, 0)
      E = (5, 0)

    Vektor DC = (0, 6√2), vektor DE = (2, 0).
    Skalani proizvod: 0·2 + 6√2·0 = 0
    Ugao CDE = 90°! Pravi ugao je u tacki D.

    Korak 5: Poluprecnik opisane kružnice trougla sa pravim uglom.
    Hypotenusa (naspram pravog ugla) = CE, a precnik opisane kružnice = CE.

    |CE| = √((5-3)² + (0 - 6√2)²) = √(4 + 72) = √76 = 2√19

    Poluprecnik R = √19 cm.

    Korak 6: Površina opisane kružnice.
    P = π·R² = π·19 = 19π cm²

    Odgovor: C) 19π cm²
  </script>

  <script>
    MathJax = {
      tex: {
        inlineMath: [['\\(', '\\)'], ['$', '$']],
        displayMath: [['\\[', '\\]']]
      },
      svg: { fontCache: 'global' }
    };
  </script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
  </script>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: #0f172a;
      color: #e2e8f0;
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      line-height: 1.7;
      padding: 24px 20px 60px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    h1 {
      font-size: 2rem;
      font-weight: 800;
      background: linear-gradient(135deg, #60a5fa, #a78bfa);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 8px;
    }

    .subtitle {
      color: #94a3b8;
      font-size: 1rem;
      margin-bottom: 32px;
    }

    .card {
      background: #1e293b;
      border: 1px solid #334155;
      border-radius: 14px;
      padding: 22px 26px;
      margin-bottom: 22px;
    }

    .card-title {
      font-size: 1.05rem;
      font-weight: 700;
      color: #60a5fa;
      margin-bottom: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .card-title .icon {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.85rem;
      font-weight: 700;
      flex-shrink: 0;
    }

    .problem-statement .card-title .icon { background: #1d4ed8; color: #93c5fd; }

    .problem-text {
      font-size: 1.05rem;
      color: #e2e8f0;
      margin-bottom: 18px;
    }

    .given-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 14px;
    }

    .given-item.answer-option {
      background: #0f172a;
      border: 1px solid #475569;
      border-radius: 8px;
      padding: 8px 16px;
      font-size: 0.95rem;
      color: #cbd5e1;
      cursor: default;
      transition: border-color 0.2s;
    }

    .plan-card .card-title .icon { background: #0e7490; color: #67e8f9; }

    .plan-text {
      color: #94a3b8;
      font-style: italic;
    }

    details {
      border: 1px solid #334155;
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 10px;
    }

    summary {
      background: #1e293b;
      padding: 12px 18px;
      cursor: pointer;
      font-weight: 600;
      color: #a78bfa;
      list-style: none;
      display: flex;
      align-items: center;
      gap: 8px;
      user-select: none;
    }

    summary::-webkit-details-marker { display: none; }

    summary::before {
      content: '\25B6';
      font-size: 0.7rem;
      transition: transform 0.2s;
    }

    details[open] summary::before {
      transform: rotate(90deg);
    }

    .details-body {
      background: #0f172a;
      padding: 16px 20px;
      border-top: 1px solid #334155;
    }

    .formula-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 12px;
      margin-top: 8px;
    }

    .formula-box {
      background: #1e293b;
      border-left: 3px solid #60a5fa;
      border-radius: 8px;
      padding: 12px 16px;
      color: #93c5fd;
      font-size: 0.95rem;
    }

    .formula-box .formula-label {
      color: #94a3b8;
      font-size: 0.82rem;
      margin-bottom: 4px;
    }

    canvas {
      display: block;
      width: 100%;
      border-radius: 10px;
      touch-action: none;
      cursor: crosshair;
    }

    .canvas-controls {
      display: flex;
      gap: 10px;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    .btn {
      background: #1e293b;
      border: 1px solid #475569;
      border-radius: 8px;
      color: #e2e8f0;
      padding: 7px 16px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: background 0.15s, border-color 0.15s;
    }

    .btn:hover { background: #334155; border-color: #60a5fa; }
    .btn.active { background: #1d4ed8; border-color: #60a5fa; color: #fff; }

    .canvas-hint {
      color: #64748b;
      font-size: 0.82rem;
      margin-top: 8px;
    }

    .steps-container { display: flex; flex-direction: column; gap: 20px; }

    .step {
      display: flex;
      gap: 18px;
      align-items: flex-start;
    }

    .step-badge {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: linear-gradient(135deg, #1d4ed8, #7c3aed);
      color: #fff;
      font-weight: 800;
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      margin-top: 2px;
    }

    .step-content { flex: 1; }

    .step-title {
      font-weight: 700;
      font-size: 1rem;
      color: #c4b5fd;
      margin-bottom: 6px;
    }

    .step-text {
      color: #cbd5e1;
      margin-bottom: 10px;
    }

    .math-block {
      background: #0f172a;
      border: 1px solid #334155;
      border-radius: 8px;
      padding: 14px 18px;
      margin: 10px 0;
      overflow-x: auto;
    }

    .math-block.highlight {
      border-left: 3px solid #60a5fa;
    }

    .checkpoint {
      margin-top: 10px;
    }

    .checkpoint summary {
      color: #34d399;
      font-size: 0.9rem;
    }

    .checkpoint .details-body {
      font-size: 0.9rem;
      color: #94a3b8;
    }

    .key-insight {
      background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
      border: 1px solid #4f46e5;
      border-radius: 14px;
      padding: 20px 26px;
      margin-bottom: 22px;
    }

    .key-insight .insight-title {
      font-size: 1rem;
      font-weight: 700;
      color: #a78bfa;
      margin-bottom: 10px;
    }

    .key-insight p { color: #cbd5e1; }

    .final-answer-card {
      background: #1e293b;
      border: 1px solid #334155;
      border-radius: 14px;
      padding: 22px 26px;
      margin-bottom: 22px;
      text-align: center;
    }

    .final-answer-card .answer-label {
      color: #94a3b8;
      margin-bottom: 10px;
      font-size: 0.95rem;
    }

    .final-answer-value {
      font-size: 2.5rem;
      font-weight: 900;
      color: #34d399;
      margin-bottom: 18px;
      letter-spacing: 1px;
    }

    .options-row {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
    }

    .opt-pill {
      padding: 8px 20px;
      border-radius: 9px;
      font-size: 0.95rem;
      font-weight: 600;
      border: 1.5px solid #475569;
      color: #94a3b8;
      background: #0f172a;
    }

    .opt-pill.correct {
      border-color: #34d399;
      color: #34d399;
      background: rgba(52,211,153,0.08);
    }

    .pitfall-item {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      margin-bottom: 10px;
      color: #fca5a5;
      font-size: 0.97rem;
    }

    .pitfall-item::before {
      content: '!';
      background: #7f1d1d;
      color: #fca5a5;
      border-radius: 50%;
      width: 22px;
      height: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 0.85rem;
      flex-shrink: 0;
      margin-top: 2px;
    }

    .challenge-card {
      background: #1e293b;
      border: 1px dashed #475569;
      border-radius: 12px;
      padding: 18px 22px;
    }

    .challenge-title {
      color: #f472b6;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .challenge-text { color: #cbd5e1; }

    @media (max-width: 700px) {
      h1 { font-size: 1.45rem; }
      .step { flex-direction: column; gap: 8px; }
      .final-answer-value { font-size: 1.9rem; }
    }
  </style>
</head>
<body>
<div class="container">

  <!-- Naslov -->
  <h1>Opisana kružnica trougla CDE</h1>
  <p class="subtitle">Visina, težišna duž i Talesova teorema o opisanoj kružnici</p>

  <!-- Tekst zadatka -->
  <div class="card problem-statement">
    <div class="card-title">
      <span class="icon">Z</span>
      Tekst zadatka
    </div>
    <p class="problem-text">
      U trouglu \(ABC\) čije su stranice \(|BC| = 11\) cm, \(|AC| = 9\) cm i \(|AB| = 10\) cm,
      date su tačke \(D\) i \(E\) na stranici \(AB\) takve da je \(CD\) visina,
      a \(CE\) težišna duž trougla \(ABC\). Površina kruga opisanog oko trougla \(CDE\) jednaka je:
    </p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">(A) \(20\pi\) cm²</div>
      <div class="given-item answer-option" data-option="B">(B) \(23\pi\) cm²</div>
      <div class="given-item answer-option" data-option="C">(C) \(19\pi\) cm²</div>
      <div class="given-item answer-option" data-option="D">(D) \(\dfrac{69}{4}\pi\) cm²</div>
      <div class="given-item answer-option" data-option="E">(E) \(18\pi\) cm²</div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <div class="card-title">
      <span class="icon" style="background:#065f46;color:#6ee7b7;">P</span>
      Plan rešavanja
    </div>
    <p class="plan-text">
      Postavljamo koordinatni sistem sa \(A\) u koordinatnom početku i \(B\) na \(x\)-osi.
      Nalazimo koordinate tačke \(C\), zatim tačke \(D\) (nožište visine) i \(E\) (središte \(AB\)).
      Uočavamo da je ugao \(\angle CDE = 90°\), pa je \(CE\) prečnik opisane kružnice trougla \(CDE\)
      (Talesova teorema). Na kraju izračunavamo površinu te kružnice.
    </p>
  </div>

  <!-- Teorijsko podsecanje -->
  <details>
    <summary>Teorijsko podsećanje — korisne formule i teoreme</summary>
    <div class="details-body">
      <div class="formula-grid">
        <div class="formula-box">
          <div class="formula-label">Nožište visine iz temena C na stranicu AB</div>
          Duž \(AD\) (projekcija \(CA\) na \(AB\)):
          \[ AD = \frac{|AB|^2 + |AC|^2 - |BC|^2}{2 \cdot |AB|} \]
        </div>
        <div class="formula-box">
          <div class="formula-label">Središte stranice (težišna duž)</div>
          Tačka \(E\) je središte \(AB\):
          \[ AE = \frac{|AB|}{2} \]
        </div>
        <div class="formula-box">
          <div class="formula-label">Talesova teorema (Talesov teorem o opisanoj kružnici)</div>
          Ako je \(\angle CDE = 90°\), onda je \(CE\) prečnik opisane kružnice trougla \(CDE\), a poluprecnik \(R = \frac{|CE|}{2}\).
        </div>
        <div class="formula-box">
          <div class="formula-label">Površina kružnice</div>
          \[ P = \pi R^2 \]
        </div>
      </div>
    </div>
  </details>

  <!-- Dijagram -->
  <div class="card" style="margin-top:10px;">
    <div class="card-title">
      <span class="icon" style="background:#4c1d95;color:#c4b5fd;">D</span>
      Vizualni prikaz
    </div>
    <canvas id="geomCanvas" width="700" height="420"></canvas>
    <div class="canvas-controls">
      <button class="btn active" id="btnTriangle" onclick="setView('triangle')">Trougao ABC</button>
      <button class="btn" id="btnCDE" onclick="setView('cde')">Trougao CDE i opisana kružnica</button>
    </div>
    <p class="canvas-hint">Kliknite na dugmad da biste promenili prikaz.</p>
  </div>

  <!-- Korak po korak -->
  <div class="card">
    <div class="card-title">
      <span class="icon" style="background:#7c3aed;color:#ddd6fe;">K</span>
      Rešenje korak po korak
    </div>
    <div class="steps-container">

      <!-- Korak 1 -->
      <div class="step">
        <div class="step-badge">1</div>
        <div class="step-content">
          <div class="step-title">Postavljamo koordinatni sistem</div>
          <div class="step-text">
            Smestimo tačku \(A\) u koordinatni početak, a \(B\) na pozitivnu \(x\)-osu:
          </div>
          <div class="math-block highlight">
            \[ A = (0,\, 0), \quad B = (10,\, 0) \]
          </div>
          <div class="step-text">
            Tačka \(E\) je središte \(AB\) (jer \(CE\) je težišna duž), pa je:
          </div>
          <div class="math-block">
            \[ E = \left(\frac{0 + 10}{2},\, 0\right) = (5,\, 0) \]
          </div>
        </div>
      </div>

      <!-- Korak 2 -->
      <div class="step">
        <div class="step-badge">2</div>
        <div class="step-content">
          <div class="step-title">Nalazimo koordinate tačke C</div>
          <div class="step-text">
            Neka je \(C = (c_x,\, c_y)\). Iz datih dužina stranica postavljamo sistem jednačina:
          </div>
          <div class="math-block">
            \[
              |AC|^2 = c_x^2 + c_y^2 = 81
            \]
            \[
              |BC|^2 = (c_x - 10)^2 + c_y^2 = 121
            \]
          </div>
          <div class="step-text">
            Oduzimamo prvu od druge jednačine:
          </div>
          <div class="math-block">
            \[
              (c_x - 10)^2 - c_x^2 = 121 - 81
            \]
            \[
              c_x^2 - 20c_x + 100 - c_x^2 = 40
            \]
            \[
              -20c_x = -60 \implies c_x = 3
            \]
          </div>
          <div class="step-text">
            Iz prve jednačine nalazimo \(c_y\):
          </div>
          <div class="math-block">
            \[
              c_y^2 = 81 - c_x^2 = 81 - 9 = 72 \implies c_y = 6\sqrt{2}
            \]
          </div>
          <div class="math-block highlight">
            \[ C = \left(3,\, 6\sqrt{2}\right) \]
          </div>
          <details class="checkpoint">
            <summary>Provera dužina stranica</summary>
            <div class="details-body">
              \(|AC| = \sqrt{3^2 + (6\sqrt{2})^2} = \sqrt{9 + 72} = \sqrt{81} = 9\) ✓<br>
              \(|BC| = \sqrt{(3-10)^2 + (6\sqrt{2})^2} = \sqrt{49 + 72} = \sqrt{121} = 11\) ✓<br>
              \(|AB| = 10\) ✓
            </div>
          </details>
        </div>
      </div>

      <!-- Korak 3 -->
      <div class="step">
        <div class="step-badge">3</div>
        <div class="step-content">
          <div class="step-title">Nalazimo tačku D — nožište visine iz C na AB</div>
          <div class="step-text">
            Pošto stranica \(AB\) leži na \(x\)-osi, visina iz \(C\) na \(AB\) je vertikalna linija
            \(x = c_x = 3\). Nožište te visine je:
          </div>
          <div class="math-block highlight">
            \[ D = (3,\, 0) \]
          </div>
          <div class="step-text">
            Možemo to potvrditi i formulom:
          </div>
          <div class="math-block">
            \[
              AD = \frac{|AB|^2 + |AC|^2 - |BC|^2}{2 \cdot |AB|}
                 = \frac{100 + 81 - 121}{20}
                 = \frac{60}{20} = 3
            \]
          </div>
          <div class="step-text">
            Dakle \(D\) se nalazi na rastojanju 3 cm od \(A\) duž \(AB\), što daje \(D = (3, 0)\). ✓
          </div>
        </div>
      </div>

      <!-- Korak 4 -->
      <div class="step">
        <div class="step-badge">4</div>
        <div class="step-content">
          <div class="step-title">Uočavamo pravi ugao u trouglu CDE</div>
          <div class="step-text">
            Imamo tri tačke:
          </div>
          <div class="math-block">
            \[
              C = (3,\, 6\sqrt{2}), \quad D = (3,\, 0), \quad E = (5,\, 0)
            \]
          </div>
          <div class="step-text">
            Vektori iz \(D\):
          </div>
          <div class="math-block">
            \[
              \overrightarrow{DC} = (3 - 3,\; 6\sqrt{2} - 0) = (0,\; 6\sqrt{2})
            \]
            \[
              \overrightarrow{DE} = (5 - 3,\; 0 - 0) = (2,\; 0)
            \]
          </div>
          <div class="step-text">
            Skalarni proizvod:
          </div>
          <div class="math-block highlight">
            \[
              \overrightarrow{DC} \cdot \overrightarrow{DE} = 0 \cdot 2 + 6\sqrt{2} \cdot 0 = 0
            \]
          </div>
          <div class="step-text">
            Pošto je skalarni proizvod nula, vektori su <strong style="color:#4ade80;">upravni</strong>,
            tj. \(\angle CDE = 90°\). Ovo je očigledno i geometrijski:
            \(CD\) je vertikalni segment (leži na pravoj \(x = 3\)), a \(DE\) je horizontalni segment
            (leži na \(x\)-osi).
          </div>
        </div>
      </div>

      <!-- Korak 5 -->
      <div class="step">
        <div class="step-badge">5</div>
        <div class="step-content">
          <div class="step-title">Primenjujemo Talesovu teoremu</div>
          <div class="step-text">
            Pošto je ugao \(\angle CDE = 90°\), stranica \(CE\) (nasuprotna pravom uglu) je
            <strong style="color:#60a5fa;">prečnik opisane kružnice</strong> trougla \(CDE\).
          </div>
          <div class="math-block">
            \[
              |CE| = \sqrt{(5 - 3)^2 + (0 - 6\sqrt{2})^2}
                   = \sqrt{4 + 72}
                   = \sqrt{76}
                   = 2\sqrt{19} \text{ cm}
            \]
          </div>
          <div class="step-text">
            Poluprecnik opisane kružnice:
          </div>
          <div class="math-block highlight">
            \[
              R = \frac{|CE|}{2} = \frac{2\sqrt{19}}{2} = \sqrt{19} \text{ cm}
            \]
          </div>
        </div>
      </div>

      <!-- Korak 6 -->
      <div class="step">
        <div class="step-badge">6</div>
        <div class="step-content">
          <div class="step-title">Izračunavamo površinu opisane kružnice</div>
          <div class="math-block highlight">
            \[
              P = \pi R^2 = \pi \cdot (\sqrt{19})^2 = 19\pi \text{ cm}^2
            \]
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- Ključni uvid -->
  <div class="key-insight">
    <div class="insight-title">Ključni uvid</div>
    <p>
      Visina \(CD\) je <em>vertikalni</em> segment (\(C\) i \(D\) imaju istu \(x\)-koordinatu),
      dok je \(DE\) <em>horizontalni</em> segment (obe tačke leže na \(x\)-osi).
      Zbog toga je ugao \(\angle CDE\) uvek pravi, bez obzira na dimenzije trougla.
      Primenom Talesove teoreme, hypotenusa \(CE\) postaje prečnik opisane kružnice trougla \(CDE\),
      što drastično pojednostavljuje zadatak.
    </p>
  </div>

  <!-- Konačan odgovor -->
  <div class="final-answer-card">
    <div class="answer-label">Površina opisane kružnice trougla CDE</div>
    <div class="final-answer-value">\(19\pi\) cm²</div>
    <div class="options-row">
      <div class="opt-pill">(A) \(20\pi\) cm²</div>
      <div class="opt-pill">(B) \(23\pi\) cm²</div>
      <div class="opt-pill correct">(C) \(19\pi\) cm²</div>
      <div class="opt-pill">(D) \(\frac{69}{4}\pi\) cm²</div>
      <div class="opt-pill">(E) \(18\pi\) cm²</div>
    </div>
  </div>

  <!-- Česte greške -->
  <div class="card">
    <div class="card-title">
      <span class="icon" style="background:#7f1d1d;color:#fca5a5;">!</span>
      Česte greške
    </div>
    <div class="pitfalls">
      <div class="pitfall-item">
        Zaboraviti da se površina kružnice računa kao \(\pi R^2\), a ne \(\pi d^2\)
        (gde je \(d\) prečnik). Ovde je \(R = \sqrt{19}\), ne \(2\sqrt{19}\).
      </div>
      <div class="pitfall-item">
        Ne prepoznati da je \(\angle CDE = 90°\) i pokušavati da se poluprecnik nađe opštom
        formulom \(R = \frac{abc}{4P}\). Primetiti pravi ugao ušteduje mnogo računanja.
      </div>
      <div class="pitfall-item">
        Zameniti položaje tačaka \(D\) i \(E\): \(D\) je nožište visine (na udaljenosti \(AD = 3\)),
        a \(E\) je središte \(AB\) (na udaljenosti \(AE = 5\)).
      </div>
      <div class="pitfall-item">
        Izračunati \(|CE|^2 = 76\) i pogrešno zaključiti da je to \(R^2\). Uočiti da
        \(|CE|\) jeste prečnik, pa je \(R = |CE|/2\), a \(R^2 = 76/4 = 19\).
      </div>
    </div>
  </div>

  <!-- Izazov -->
  <div class="challenge-card">
    <div class="challenge-title">Izazov za razmišljanje</div>
    <p class="challenge-text">
      Da li bi ugao \(\angle CDE\) bio pravi i za trougao čija je stranica \(|BC| \ne 11\) cm
      (sve dok je \(AD \ne AE\), tj. \(AD \ne 5\))? Kada bi tačke \(D\) i \(E\)
      splele u istu tačku, i šta bi se tada desilo sa opisanom kružnicom trougla \(CDE\)?
    </p>
  </div>

</div>

<script>
(function() {
  'use strict';

  // Koordinate tačaka (u "matematičkim" jedinicama)
  const pts = {
    A: { x: 0,  y: 0 },
    B: { x: 10, y: 0 },
    C: { x: 3,  y: 6 * Math.sqrt(2) },
    D: { x: 3,  y: 0 },
    E: { x: 5,  y: 0 }
  };

  // Centar i poluprecnik opisane kružnice trougla CDE
  // Pravi ugao u D => CE je prečnik => centar = središte CE
  const circleCenter = {
    x: (pts.C.x + pts.E.x) / 2,
    y: (pts.C.y + pts.E.y) / 2
  };
  const circleR = Math.sqrt(
    Math.pow(pts.C.x - pts.E.x, 2) + Math.pow(pts.C.y - pts.E.y, 2)
  ) / 2;

  const canvas = document.getElementById('geomCanvas');
  const ctx = canvas.getContext('2d');

  let currentView = 'triangle';

  function setView(v) {
    currentView = v;
    document.getElementById('btnTriangle').classList.toggle('active', v === 'triangle');
    document.getElementById('btnCDE').classList.toggle('active', v === 'cde');
    draw();
  }

  window.setView = setView;

  function getTransform() {
    const W = canvas.width;
    const H = canvas.height;
    const pad = 60;

    // Bounding box svih tačaka + krug
    const allX = [pts.A.x, pts.B.x, pts.C.x, circleCenter.x - circleR, circleCenter.x + circleR];
    const allY = [pts.A.y, pts.B.y, pts.C.y, circleCenter.y - circleR, circleCenter.y + circleR];

    const minX = Math.min(...allX);
    const maxX = Math.max(...allX);
    const minY = Math.min(...allY);
    const maxY = Math.max(...allY);

    const scaleX = (W - 2 * pad) / (maxX - minX);
    const scaleY = (H - 2 * pad) / (maxY - minY);
    const scale = Math.min(scaleX, scaleY);

    const cx = (minX + maxX) / 2;
    const cy = (minY + maxY) / 2;

    return {
      toCanvas: function(px, py) {
        return {
          x: W / 2 + (px - cx) * scale,
          y: H / 2 - (py - cy) * scale
        };
      },
      scale: scale
    };
  }

  function drawPoint(t, px, py, label, color, labelOffset) {
    const p = t.toCanvas(px, py);
    ctx.beginPath();
    ctx.arc(p.x, p.y, 5, 0, Math.PI * 2);
    ctx.fillStyle = color;
    ctx.fill();

    ctx.fillStyle = color;
    ctx.font = 'bold 14px Segoe UI, sans-serif';
    const off = labelOffset || { x: 0, y: -14 };
    ctx.fillText(label, p.x + off.x, p.y + off.y);
  }

  function drawLine(t, x1, y1, x2, y2, color, width, dash) {
    const p1 = t.toCanvas(x1, y1);
    const p2 = t.toCanvas(x2, y2);
    ctx.beginPath();
    ctx.moveTo(p1.x, p1.y);
    ctx.lineTo(p2.x, p2.y);
    ctx.strokeStyle = color;
    ctx.lineWidth = width || 1.5;
    ctx.setLineDash(dash || []);
    ctx.stroke();
    ctx.setLineDash([]);
  }

  function drawRightAngle(t, vertex, pt1, pt2, size) {
    const v = t.toCanvas(vertex.x, vertex.y);
    const p1 = t.toCanvas(pt1.x, pt1.y);
    const p2 = t.toCanvas(pt2.x, pt2.y);

    function unit(ax, ay, bx, by) {
      const dx = bx - ax, dy = by - ay;
      const len = Math.sqrt(dx * dx + dy * dy);
      return { x: dx / len, y: dy / len };
    }

    const u1 = unit(v.x, v.y, p1.x, p1.y);
    const u2 = unit(v.x, v.y, p2.x, p2.y);
    const s = size || 12;

    ctx.beginPath();
    ctx.moveTo(v.x + u1.x * s, v.y + u1.y * s);
    ctx.lineTo(v.x + u1.x * s + u2.x * s, v.y + u1.y * s + u2.y * s);
    ctx.lineTo(v.x + u2.x * s, v.y + u2.y * s);
    ctx.strokeStyle = '#34d399';
    ctx.lineWidth = 1.5;
    ctx.stroke();
  }

  function drawDimension(t, x1, y1, x2, y2, label, color) {
    const p1 = t.toCanvas(x1, y1);
    const p2 = t.toCanvas(x2, y2);
    const mx = (p1.x + p2.x) / 2;
    const my = (p1.y + p2.y) / 2;
    ctx.fillStyle = color || '#94a3b8';
    ctx.font = '12px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText(label, mx, my - 8);
    ctx.textAlign = 'left';
  }

  function draw() {
    canvas.width = canvas.offsetWidth * window.devicePixelRatio;
    canvas.height = Math.round(canvas.width * 0.6);

    ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
    const W = canvas.offsetWidth;
    const H = canvas.offsetHeight || Math.round(W * 0.6);
    canvas.height = H * window.devicePixelRatio;
    ctx.scale(window.devicePixelRatio, window.devicePixelRatio);

    // Re-get after resize
    const cw = canvas.width / window.devicePixelRatio;
    const ch = canvas.height / window.devicePixelRatio;

    ctx.clearRect(0, 0, cw, ch);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, cw, ch);

    const pad = 70;
    const minX = -0.5, maxX = 10.5;
    const minY = -1,   maxY = 9.5;

    const scaleX = (cw - 2 * pad) / (maxX - minX);
    const scaleY = (ch - 2 * pad) / (maxY - minY);
    const scale = Math.min(scaleX, scaleY);

    const cxM = (minX + maxX) / 2;
    const cyM = (minY + maxY) / 2;

    const t = {
      toCanvas: function(px, py) {
        return {
          x: cw / 2 + (px - cxM) * scale,
          y: ch / 2 - (py - cyM) * scale
        };
      },
      scale: scale
    };

    if (currentView === 'triangle') {
      // Crtamo trougao ABC
      const A = t.toCanvas(pts.A.x, pts.A.y);
      const B = t.toCanvas(pts.B.x, pts.B.y);
      const C = t.toCanvas(pts.C.x, pts.C.y);
      const D = t.toCanvas(pts.D.x, pts.D.y);
      const E = t.toCanvas(pts.E.x, pts.E.y);

      // Trougao
      ctx.beginPath();
      ctx.moveTo(A.x, A.y);
      ctx.lineTo(B.x, B.y);
      ctx.lineTo(C.x, C.y);
      ctx.closePath();
      ctx.strokeStyle = '#60a5fa';
      ctx.lineWidth = 2;
      ctx.stroke();
      ctx.fillStyle = 'rgba(96,165,250,0.06)';
      ctx.fill();

      // Visina CD (isprekidano)
      ctx.beginPath();
      ctx.moveTo(C.x, C.y);
      ctx.lineTo(D.x, D.y);
      ctx.strokeStyle = '#f472b6';
      ctx.lineWidth = 1.8;
      ctx.setLineDash([5, 4]);
      ctx.stroke();
      ctx.setLineDash([]);

      // Težišna duž CE
      ctx.beginPath();
      ctx.moveTo(C.x, C.y);
      ctx.lineTo(E.x, E.y);
      ctx.strokeStyle = '#34d399';
      ctx.lineWidth = 1.8;
      ctx.setLineDash([7, 4]);
      ctx.stroke();
      ctx.setLineDash([]);

      // Pravi ugao u D
      const sqS = 10;
      ctx.beginPath();
      ctx.moveTo(D.x + sqS, D.y);
      ctx.lineTo(D.x + sqS, D.y - sqS);
      ctx.lineTo(D.x, D.y - sqS);
      ctx.strokeStyle = '#f472b6';
      ctx.lineWidth = 1.5;
      ctx.stroke();

      // Tačke
      function pt(px, py, label, color, ox, oy) {
        const p = t.toCanvas(px, py);
        ctx.beginPath();
        ctx.arc(p.x, p.y, 5, 0, Math.PI * 2);
        ctx.fillStyle = color;
        ctx.fill();
        ctx.fillStyle = color;
        ctx.font = 'bold 15px Segoe UI, sans-serif';
        ctx.fillText(label, p.x + (ox || 0), p.y + (oy || 0));
      }

      pt(pts.A.x, pts.A.y, 'A', '#e2e8f0', -20, 5);
      pt(pts.B.x, pts.B.y, 'B', '#e2e8f0', 8, 5);
      pt(pts.C.x, pts.C.y, 'C', '#e2e8f0', 8, -6);
      pt(pts.D.x, pts.D.y, 'D', '#f472b6', -6, 18);
      pt(pts.E.x, pts.E.y, 'E', '#34d399', 4, 18);

      // Oznake dužina
      ctx.fillStyle = '#60a5fa';
      ctx.font = '13px Segoe UI, sans-serif';
      ctx.textAlign = 'center';

      // BC
      const bcMid = t.toCanvas((pts.B.x + pts.C.x)/2, (pts.B.y + pts.C.y)/2);
      ctx.fillStyle = '#60a5fa';
      ctx.fillText('11 cm', bcMid.x + 22, bcMid.y);

      // AC
      const acMid = t.toCanvas((pts.A.x + pts.C.x)/2, (pts.A.y + pts.C.y)/2);
      ctx.fillText('9 cm', acMid.x - 28, acMid.y);

      // AB
      const abMid = t.toCanvas((pts.A.x + pts.B.x)/2, 0);
      ctx.fillStyle = '#94a3b8';
      ctx.fillText('10 cm', abMid.x, abMid.y + 22);

      // AD = 3
      const adMid = t.toCanvas(1.5, 0);
      ctx.fillStyle = '#f472b6';
      ctx.font = '11px Segoe UI';
      ctx.fillText('AD=3', adMid.x, adMid.y + 36);

      // DE = 2
      const deMid = t.toCanvas(4, 0);
      ctx.fillStyle = '#a78bfa';
      ctx.fillText('DE=2', deMid.x, deMid.y + 36);

      // AE = 5
      const aeMid = t.toCanvas(2.5, 0);
      ctx.fillStyle = '#34d399';
      ctx.font = '11px Segoe UI';
      ctx.fillText('AE=5', aeMid.x, aeMid.y + 50);

      ctx.textAlign = 'left';

      // Legenda
      ctx.font = '12px Segoe UI';
      ctx.fillStyle = '#f472b6';
      ctx.fillText('--- CD: visina', 14, 20);
      ctx.fillStyle = '#34d399';
      ctx.fillText('--- CE: težišna duž', 14, 38);

    } else {
      // Prikaz trougla CDE i opisane kružnice

      const C = t.toCanvas(pts.C.x, pts.C.y);
      const D = t.toCanvas(pts.D.x, pts.D.y);
      const E = t.toCanvas(pts.E.x, pts.E.y);
      const O = t.toCanvas(circleCenter.x, circleCenter.y);
      const Rcanvas = circleR * t.scale;

      // Opisana kružnica
      ctx.beginPath();
      ctx.arc(O.x, O.y, Rcanvas, 0, Math.PI * 2);
      ctx.strokeStyle = '#a78bfa';
      ctx.lineWidth = 1.8;
      ctx.setLineDash([6, 4]);
      ctx.stroke();
      ctx.setLineDash([]);
      ctx.fillStyle = 'rgba(167,139,250,0.05)';
      ctx.fill();

      // Prečnik CE
      ctx.beginPath();
      ctx.moveTo(C.x, C.y);
      ctx.lineTo(E.x, E.y);
      ctx.strokeStyle = '#a78bfa';
      ctx.lineWidth = 2;
      ctx.setLineDash([5, 3]);
      ctx.stroke();
      ctx.setLineDash([]);

      // Trougao CDE
      ctx.beginPath();
      ctx.moveTo(C.x, C.y);
      ctx.lineTo(D.x, D.y);
      ctx.lineTo(E.x, E.y);
      ctx.closePath();
      ctx.strokeStyle = '#4ade80';
      ctx.lineWidth = 2.5;
      ctx.stroke();
      ctx.fillStyle = 'rgba(74,222,128,0.08)';
      ctx.fill();

      // Pravi ugao u D
      const sqS = 12;
      ctx.beginPath();
      ctx.moveTo(D.x + sqS, D.y);
      ctx.lineTo(D.x + sqS, D.y - sqS);
      ctx.lineTo(D.x, D.y - sqS);
      ctx.strokeStyle = '#34d399';
      ctx.lineWidth = 1.8;
      ctx.stroke();

      // Centar kružnice
      ctx.beginPath();
      ctx.arc(O.x, O.y, 4, 0, Math.PI * 2);
      ctx.fillStyle = '#a78bfa';
      ctx.fill();

      // Poluprecnik
      ctx.beginPath();
      ctx.moveTo(O.x, O.y);
      ctx.lineTo(C.x, C.y);
      ctx.strokeStyle = '#a78bfa';
      ctx.lineWidth = 1;
      ctx.setLineDash([3, 3]);
      ctx.stroke();
      ctx.setLineDash([]);

      // Tačke
      function pt2(px, py, label, color, ox, oy) {
        const p = t.toCanvas(px, py);
        ctx.beginPath();
        ctx.arc(p.x, p.y, 5, 0, Math.PI * 2);
        ctx.fillStyle = color;
        ctx.fill();
        ctx.fillStyle = color;
        ctx.font = 'bold 15px Segoe UI, sans-serif';
        ctx.fillText(label, p.x + (ox || 0), p.y + (oy || 0));
      }

      pt2(pts.C.x, pts.C.y, 'C', '#4ade80', 8, -8);
      pt2(pts.D.x, pts.D.y, 'D', '#4ade80', -20, 5);
      pt2(pts.E.x, pts.E.y, 'E', '#4ade80', 8, 18);
      pt2(circleCenter.x, circleCenter.y, 'O', '#a78bfa', 8, -8);

      // Oznake
      ctx.textAlign = 'center';
      ctx.font = '13px Segoe UI, sans-serif';

      // CD
      const cdMid = t.toCanvas(pts.C.x, pts.C.y / 2);
      ctx.fillStyle = '#4ade80';
      ctx.fillText('CD = 6√2', cdMid.x - 38, cdMid.y);

      // DE
      const deMid = t.toCanvas(4, 0);
      ctx.fillText('DE = 2', deMid.x, deMid.y + 22);

      // CE (prečnik)
      const ceMid = t.toCanvas(circleCenter.x, circleCenter.y);
      ctx.fillStyle = '#a78bfa';
      ctx.font = '12px Segoe UI';
      ctx.fillText('CE = 2√19 (prečnik)', ceMid.x + 55, ceMid.y - 20);

      // R
      const rMid = t.toCanvas((circleCenter.x + pts.C.x) / 2, (circleCenter.y + pts.C.y) / 2);
      ctx.fillStyle = '#c4b5fd';
      ctx.font = '12px Segoe UI';
      ctx.fillText('R = √19', rMid.x - 40, rMid.y - 8);

      ctx.textAlign = 'left';

      // Pravi ugao oznaka
      ctx.fillStyle = '#34d399';
      ctx.font = '12px Segoe UI';
      ctx.fillText('90°', D.x + 14, D.y - 16);
    }
  }

  // Inicijalizacija
  function resizeAndDraw() {
    canvas.width = canvas.offsetWidth;
    canvas.height = Math.round(canvas.offsetWidth * 0.6);
    draw();
  }

  window.addEventListener('resize', resizeAndDraw);
  resizeAndDraw();
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{"title":"Opisana kružnica trougla CDE","subject":"math","unit":"geometry","topic_tags":["trougao","visina","težišna_duž","opisana_kružnica","Talesova_teorema","koordinatna_geometrija"]}
BRAINSPARK_META-->
