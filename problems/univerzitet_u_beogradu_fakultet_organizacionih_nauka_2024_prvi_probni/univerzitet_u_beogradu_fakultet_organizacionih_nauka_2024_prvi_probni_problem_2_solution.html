<!DOCTYPE html>
<html lang="sr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Stepenovanje i korenovanje — vrednost izraza</title>

  <script type="text/info" id="logic-scratchpad">
    Zadato: sqrt( (1/3)^(-2) * sqrt(4^3) * (0,5)^(-1) + 5^2 )

    Cilj: Izracunati vrednost izraza

    Korak 1: (1/3)^(-2)
    Po pravilu a^(-n) = 1/a^n, odnosno (a/b)^(-n) = (b/a)^n:
    (1/3)^(-2) = 3^2 = 9

    Korak 2: sqrt(4^3)
    4^3 = 64
    sqrt(64) = 8

    Korak 3: (0,5)^(-1)
    0,5 = 1/2
    (1/2)^(-1) = 2

    Korak 4: 5^2 = 25

    Korak 5: Proizvod pod korenom (bez 5^2):
    9 * 8 * 2 = 144

    Korak 6: Pod korenom ukupno:
    144 + 25 = 169

    Korak 7: sqrt(169) = 13

    Odgovor: C) 13
  </script>

  <script>
    MathJax = {
      tex: {
        inlineMath: [['\\(', '\\)'], ['$', '$']],
        displayMath: [['\\[', '\\]']]
      },
      svg: { fontCache: 'global' }
    };
  </script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
  </script>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: #0f172a;
      color: #e2e8f0;
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      line-height: 1.7;
      padding: 24px 20px 60px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    h1 {
      font-size: 2rem;
      font-weight: 800;
      background: linear-gradient(135deg, #60a5fa, #a78bfa);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 8px;
    }

    .subtitle {
      color: #94a3b8;
      font-size: 1rem;
      margin-bottom: 32px;
    }

    .card {
      background: #1e293b;
      border: 1px solid #334155;
      border-radius: 14px;
      padding: 22px 26px;
      margin-bottom: 22px;
    }

    .card-title {
      font-size: 1.05rem;
      font-weight: 700;
      color: #60a5fa;
      margin-bottom: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .card-title .icon {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.85rem;
      font-weight: 700;
      flex-shrink: 0;
    }

    .problem-statement .card-title .icon { background: #1d4ed8; color: #93c5fd; }

    .problem-text {
      font-size: 1.05rem;
      color: #e2e8f0;
      margin-bottom: 18px;
    }

    .given-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 14px;
    }

    .given-item.answer-option {
      background: #0f172a;
      border: 1px solid #475569;
      border-radius: 8px;
      padding: 8px 16px;
      font-size: 0.95rem;
      color: #cbd5e1;
      cursor: default;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .plan-card .card-title .icon { background: #0e7490; color: #67e8f9; }

    .plan-text {
      color: #94a3b8;
      font-style: italic;
    }

    details {
      border: 1px solid #334155;
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 10px;
    }

    summary {
      background: #1e293b;
      padding: 12px 18px;
      cursor: pointer;
      font-weight: 600;
      color: #a78bfa;
      list-style: none;
      display: flex;
      align-items: center;
      gap: 8px;
      user-select: none;
    }

    summary::-webkit-details-marker { display: none; }

    summary::before {
      content: '\25B6';
      font-size: 0.7rem;
      transition: transform 0.2s;
    }

    details[open] summary::before {
      transform: rotate(90deg);
    }

    .details-body {
      background: #0f172a;
      padding: 16px 20px;
      border-top: 1px solid #334155;
    }

    .formula-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 12px;
      margin-top: 8px;
    }

    .formula-box {
      background: #1e293b;
      border-left: 3px solid #60a5fa;
      border-radius: 8px;
      padding: 12px 16px;
      font-family: 'Courier New', monospace;
      color: #93c5fd;
      font-size: 0.95rem;
    }

    .formula-box .formula-label {
      color: #94a3b8;
      font-family: 'Segoe UI', sans-serif;
      font-size: 0.82rem;
      margin-bottom: 4px;
    }

    canvas {
      display: block;
      width: 100%;
      border-radius: 10px;
      touch-action: none;
      cursor: crosshair;
    }

    .canvas-controls {
      display: flex;
      gap: 10px;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    .btn {
      background: #1e293b;
      border: 1px solid #475569;
      border-radius: 8px;
      color: #e2e8f0;
      padding: 7px 16px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: background 0.15s, border-color 0.15s;
    }

    .btn:hover { background: #334155; border-color: #60a5fa; }
    .btn.active { background: #1d4ed8; border-color: #60a5fa; color: #fff; }

    .canvas-hint {
      color: #64748b;
      font-size: 0.82rem;
      margin-top: 8px;
    }

    .steps-container { display: flex; flex-direction: column; gap: 20px; }

    .step {
      display: flex;
      gap: 18px;
      align-items: flex-start;
    }

    .step-badge {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: linear-gradient(135deg, #1d4ed8, #7c3aed);
      color: #fff;
      font-weight: 800;
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      margin-top: 2px;
    }

    .step-content { flex: 1; }

    .step-title {
      font-weight: 700;
      font-size: 1rem;
      color: #c4b5fd;
      margin-bottom: 6px;
    }

    .step-text {
      color: #cbd5e1;
      margin-bottom: 10px;
    }

    .math-block {
      background: #0f172a;
      border: 1px solid #334155;
      border-radius: 8px;
      padding: 14px 18px;
      margin: 10px 0;
      overflow-x: auto;
    }

    .math-block.highlight {
      border-left: 3px solid #60a5fa;
    }

    .checkpoint {
      margin-top: 10px;
    }

    .checkpoint summary {
      color: #34d399;
      font-size: 0.9rem;
    }

    .checkpoint .details-body {
      font-size: 0.9rem;
      color: #94a3b8;
    }

    .key-insight {
      background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
      border: 1px solid #4f46e5;
      border-radius: 14px;
      padding: 20px 26px;
      margin-bottom: 22px;
    }

    .key-insight .insight-title {
      font-size: 1rem;
      font-weight: 700;
      color: #a78bfa;
      margin-bottom: 10px;
    }

    .key-insight p { color: #cbd5e1; }

    .final-answer-card {
      background: #1e293b;
      border: 1px solid #334155;
      border-radius: 14px;
      padding: 22px 26px;
      margin-bottom: 22px;
      text-align: center;
    }

    .final-answer-card .answer-label {
      color: #94a3b8;
      margin-bottom: 10px;
      font-size: 0.95rem;
    }

    .final-answer-value {
      font-size: 2.5rem;
      font-weight: 900;
      color: #34d399;
      margin-bottom: 18px;
      letter-spacing: 1px;
    }

    .options-row {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
    }

    .opt-pill {
      padding: 8px 20px;
      border-radius: 9px;
      font-size: 0.95rem;
      font-weight: 600;
      border: 1.5px solid #475569;
      color: #94a3b8;
      background: #0f172a;
    }

    .opt-pill.correct {
      border-color: #34d399;
      color: #34d399;
      background: rgba(52,211,153,0.08);
    }

    .pitfall-item {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      margin-bottom: 10px;
      color: #fca5a5;
      font-size: 0.97rem;
    }

    .pitfall-item::before {
      content: '!';
      background: #7f1d1d;
      color: #fca5a5;
      border-radius: 50%;
      width: 22px;
      height: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 0.85rem;
      flex-shrink: 0;
      margin-top: 2px;
    }

    .challenge-card {
      background: #1e293b;
      border: 1px dashed #475569;
      border-radius: 12px;
      padding: 18px 22px;
    }

    .challenge-title {
      color: #f472b6;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .challenge-text { color: #cbd5e1; }

    @media (max-width: 700px) {
      h1 { font-size: 1.45rem; }
      .step { flex-direction: column; gap: 8px; }
      .final-answer-value { font-size: 1.9rem; }
    }
  </style>
</head>
<body>
<div class="container">

  <!-- Naslov -->
  <h1>Stepenovanje i korenovanje</h1>
  <p class="subtitle">Izracunavanje vrednosti izraza sa negativnim eksponentima i korenima</p>

  <!-- Tekst zadatka -->
  <div class="card problem-statement">
    <div class="card-title">
      <span class="icon">Z</span>
      Tekst zadatka
    </div>
    <p class="problem-text">
      Vrednost izraza
      \(\displaystyle \sqrt{\left(\frac{1}{3}\right)^{-2} \cdot \sqrt{4^3} \cdot (0{,}5)^{-1} + 5^2}\)
      jednaka je:
    </p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A"><div class="label">(A)</div><div class="value">\(14\)</div></div>
      <div class="given-item answer-option" data-option="B"><div class="label">(B)</div><div class="value">\(10\)</div></div>
      <div class="given-item answer-option" data-option="C"><div class="label">(C)</div><div class="value">\(13\)</div></div>
      <div class="given-item answer-option" data-option="D"><div class="label">(D)</div><div class="value">\(12\)</div></div>
      <div class="given-item answer-option" data-option="E"><div class="label">(E)</div><div class="value">\(11\)</div></div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <div class="card-title">
      <span class="icon" style="background:#065f46;color:#6ee7b7;">P</span>
      Plan resavanja
    </div>
    <p class="plan-text">
      Izracunavamo svaki cinilac pojedinacno koristeci pravila za negativne eksponente
      i korene, zatim ih mnozimo, dodajemo \(5^2\), i na kraju vadimo kvadratni koren
      celokupnog izraza.
    </p>
  </div>

  <!-- Teorijsko podsecanje -->
  <details>
    <summary>Teorijsko podsecanje — korisne formule</summary>
    <div class="details-body">
      <div class="formula-grid">
        <div class="formula-box">
          <div class="formula-label">Negativan eksponent</div>
          \(a^{-n} = \dfrac{1}{a^n}\), tj. \(\left(\dfrac{a}{b}\right)^{-n} = \left(\dfrac{b}{a}\right)^n\)
        </div>
        <div class="formula-box">
          <div class="formula-label">Koren stepena</div>
          \(\sqrt{a^n} = a^{n/2}\)
        </div>
        <div class="formula-box">
          <div class="formula-label">Kvadratni koren</div>
          \(\sqrt{a \cdot b} = \sqrt{a}\cdot\sqrt{b}\), \(\sqrt{a^2} = |a| = a\) za \(a \ge 0\)
        </div>
        <div class="formula-box">
          <div class="formula-label">Savrseni kvadrati</div>
          \(12^2 = 144\), \(13^2 = 169\), \(14^2 = 196\)
        </div>
      </div>
    </div>
  </details>

  <!-- Vizuelni prikaz -->
  <div class="card" style="margin-top:22px;">
    <div class="card-title">
      <span class="icon" style="background:#4c1d95;color:#c4b5fd;">V</span>
      Vizuelni dijagram — struktura izraza
    </div>
    <canvas id="mainCanvas" height="380"></canvas>
    <div class="canvas-controls">
      <button class="btn active" id="btnTree">Stablo izraza</button>
      <button class="btn" id="btnCalc">Tok izracunavanja</button>
    </div>
    <p class="canvas-hint">Kliknite na dugmad da vidite razlicite prikaze.</p>
  </div>

  <!-- Resenje korak po korak -->
  <div class="card">
    <div class="card-title">
      <span class="icon" style="background:#1d4ed8;color:#93c5fd;">R</span>
      Resenje korak po korak
    </div>

    <div class="steps-container">

      <!-- Korak 1 -->
      <div class="step">
        <div class="step-badge">1</div>
        <div class="step-content">
          <div class="step-title">Izracunavamo \(\left(\dfrac{1}{3}\right)^{-2}\)</div>
          <p class="step-text">
            Primenjujemo pravilo za negativan eksponent: obrcemo razlomak i menjamo znak eksponenta.
          </p>
          <div class="math-block highlight">
            \[
              \left(\frac{1}{3}\right)^{-2} = \left(\frac{3}{1}\right)^{2} = 3^2 = 9
            \]
          </div>

          <details class="checkpoint">
            <summary>Proveri se — Zasto obrcemo razlomak?</summary>
            <div class="details-body">
              Po definiciji: \(a^{-n} = \dfrac{1}{a^n}\). Kada je osnova razlomak \(\dfrac{1}{3}\),
              onda \(\left(\dfrac{1}{3}\right)^{-2} = \dfrac{1}{\left(\frac{1}{3}\right)^2} = \dfrac{1}{\frac{1}{9}} = 9\).
              Krace: obrcemo razlomak i stepenujemo pozitivnim eksponentom.
            </div>
          </details>
        </div>
      </div>

      <!-- Korak 2 -->
      <div class="step">
        <div class="step-badge">2</div>
        <div class="step-content">
          <div class="step-title">Izracunavamo \(\sqrt{4^3}\)</div>
          <p class="step-text">
            Prvo stepenujemo, pa vadimo koren:
          </p>
          <div class="math-block highlight">
            \[
              4^3 = 4 \cdot 4 \cdot 4 = 64
            \]
            \[
              \sqrt{4^3} = \sqrt{64} = 8
            \]
          </div>
          <p class="step-text">
            Alternativno: \(\sqrt{4^3} = 4^{3/2} = (4^{1/2})^3 = 2^3 = 8\).
          </p>

          <details class="checkpoint">
            <summary>Proveri se — Provera pomocu drugog pristupa</summary>
            <div class="details-body">
              \(\sqrt{4^3} = \sqrt{(2^2)^3} = \sqrt{2^6} = 2^3 = 8\) — isti rezultat.
            </div>
          </details>
        </div>
      </div>

      <!-- Korak 3 -->
      <div class="step">
        <div class="step-badge">3</div>
        <div class="step-content">
          <div class="step-title">Izracunavamo \((0{,}5)^{-1}\)</div>
          <p class="step-text">
            Zapisujemo \(0{,}5\) kao razlomak i primenjujemo negativan eksponent:
          </p>
          <div class="math-block highlight">
            \[
              (0{,}5)^{-1} = \left(\frac{1}{2}\right)^{-1} = \frac{1}{\frac{1}{2}} = 2
            \]
          </div>

          <details class="checkpoint">
            <summary>Proveri se — Sta znaci eksponent \(-1\)?</summary>
            <div class="details-body">
              Eksponent \(-1\) daje reciprocnu vrednost: \(a^{-1} = \dfrac{1}{a}\).
              Dakle \(\left(\dfrac{1}{2}\right)^{-1} = \dfrac{1}{\frac{1}{2}} = 2\).
            </div>
          </details>
        </div>
      </div>

      <!-- Korak 4 -->
      <div class="step">
        <div class="step-badge">4</div>
        <div class="step-content">
          <div class="step-title">Izracunavamo \(5^2\)</div>
          <div class="math-block">
            \[
              5^2 = 25
            \]
          </div>
        </div>
      </div>

      <!-- Korak 5 -->
      <div class="step">
        <div class="step-badge">5</div>
        <div class="step-content">
          <div class="step-title">Mnozimo cinioce i sabiramo</div>
          <p class="step-text">
            Sada zamenjujemo izracunate vrednosti u izraz pod korenom:
          </p>
          <div class="math-block highlight">
            \[
              \left(\frac{1}{3}\right)^{-2} \cdot \sqrt{4^3} \cdot (0{,}5)^{-1} + 5^2
              = 9 \cdot 8 \cdot 2 + 25
            \]
          </div>
          <p class="step-text">
            Izracunavamo proizvod korak po korak:
          </p>
          <div class="math-block">
            \[
              9 \cdot 8 = 72
            \]
            \[
              72 \cdot 2 = 144
            \]
            \[
              144 + 25 = 169
            \]
          </div>

          <details class="checkpoint">
            <summary>Proveri se — Redosled operacija</summary>
            <div class="details-body">
              Mnozenje ima prioritet nad sabiranjem, pa prvo racunamo \(9 \cdot 8 \cdot 2 = 144\),
              pa tek onda dodajemo \(25\). Rezultat pod korenom je \(169\).
            </div>
          </details>
        </div>
      </div>

      <!-- Korak 6 -->
      <div class="step">
        <div class="step-badge">6</div>
        <div class="step-content">
          <div class="step-title">Vadimo kvadratni koren</div>
          <p class="step-text">
            Konacno:
          </p>
          <div class="math-block highlight">
            \[
              \sqrt{169} = \boxed{13}
            \]
          </div>

          <details class="checkpoint">
            <summary>Proveri se — Da li je 169 savrseni kvadrat?</summary>
            <div class="details-body">
              Da: \(13^2 = 13 \cdot 13 = 169\), dakle \(\sqrt{169} = 13\).
            </div>
          </details>
        </div>
      </div>

    </div>
  </div>

  <!-- Kljucni uvid -->
  <div class="key-insight">
    <div class="insight-title">Kljucni uvid</div>
    <p>
      Kljuc za brzo resavanje ovog zadatka je sistematicna primena pravila za negativne eksponente:
      <strong>\(\left(\frac{a}{b}\right)^{-n} = \left(\frac{b}{a}\right)^{n}\)</strong>.
      Svaki cinilac se pojedinacno svodi na celobrojan rezultat (9, 8, 2), sto cini dalji racun
      jednostavnim. Takodje, prepoznavanje da je \(144 + 25 = 169 = 13^2\) savrseni kvadrat
      omogucava tacno izracunavanje bez kalkulatora.
    </p>
  </div>

  <!-- Konacan odgovor -->
  <div class="final-answer-card">
    <div class="answer-label">Vrednost izraza je:</div>
    <div class="final-answer-value">\(13\)</div>
    <div class="options-row">
      <div class="opt-pill">(A) \(14\)</div>
      <div class="opt-pill">(B) \(10\)</div>
      <div class="opt-pill correct">(C) \(13\)</div>
      <div class="opt-pill">(D) \(12\)</div>
      <div class="opt-pill">(E) \(11\)</div>
    </div>
  </div>

  <!-- Ceste greske -->
  <div class="card">
    <div class="card-title">
      <span class="icon" style="background:#7f1d1d;color:#fca5a5;">!</span>
      Ceste greske
    </div>
    <div class="pitfalls">
      <div class="pitfall-item">
        Pogresan znak eksponenta: \(\left(\frac{1}{3}\right)^{-2} \ne \left(\frac{1}{3}\right)^{2} = \frac{1}{9}\).
        Negativan eksponent <strong>obrce</strong> razlomak, ne zadrzava ga.
      </div>
      <div class="pitfall-item">
        Brkanje \(\sqrt{4^3}\) sa \(4 \cdot \sqrt{3}\) — tacna vrednost je \(\sqrt{64} = 8\),
        a greska nastaje ako se pogresno izracuna \(4^3\).
      </div>
      <div class="pitfall-item">
        Zaboraviti prioritet operacija: sabiranje \(+\,25\) se radi <strong>posle</strong> mnozenja,
        ne pre. Greska: \(9 \cdot 8 \cdot (2 + 25)\) daje pogresno.
      </div>
      <div class="pitfall-item">
        Korenovati svaki sabirak posebno: \(\sqrt{144 + 25} \ne \sqrt{144} + \sqrt{25} = 12 + 5 = 17\).
        Koren zbira nije zbir korena!
      </div>
    </div>
  </div>

  <!-- Bonus izazov -->
  <div class="challenge-card">
    <div class="challenge-title">Bonus izazov</div>
    <p class="challenge-text">
      Izracunaj vrednost izraza:
      \(\displaystyle \sqrt{\left(\frac{1}{5}\right)^{-2} \cdot \sqrt{9^3} \cdot (0{,}25)^{-1} + 3^2}\)
    </p>
    <details style="margin-top:12px;">
      <summary>Hint</summary>
      <div class="details-body">
        \(\left(\frac{1}{5}\right)^{-2} = 25\), \(\sqrt{9^3} = \sqrt{729} = 27\), \((0{,}25)^{-1} = 4\).<br>
        Pod korenom: \(25 \cdot 27 \cdot 4 + 9 = 2700 + 9 = 2709\).<br>
        \(\sqrt{2709} \approx 52{,}05\) — ovaj put rezultat nije ceo broj. Razmisli zasto!
      </div>
    </details>
  </div>

</div><!-- end container -->

<script>
(() => {
  var canvas = document.getElementById('mainCanvas');
  var ctx = canvas.getContext('2d');

  var activeMode = 'tree';

  var btnTree = document.getElementById('btnTree');
  var btnCalc = document.getElementById('btnCalc');

  function setMode(m) {
    activeMode = m;
    btnTree.classList.toggle('active', m === 'tree');
    btnCalc.classList.toggle('active', m === 'calc');
    draw();
  }

  btnTree.addEventListener('click', function() { setMode('tree'); });
  btnCalc.addEventListener('click', function() { setMode('calc'); });

  function resize() {
    var rect = canvas.parentElement.getBoundingClientRect();
    var dpr = window.devicePixelRatio || 1;
    canvas.width = rect.width * dpr;
    canvas.height = 380 * dpr;
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    draw();
  }

  function rrect(x, y, w, h, r) {
    ctx.beginPath();
    ctx.moveTo(x + r, y);
    ctx.lineTo(x + w - r, y);
    ctx.quadraticCurveTo(x + w, y, x + w, y + r);
    ctx.lineTo(x + w, y + h - r);
    ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
    ctx.lineTo(x + r, y + h);
    ctx.quadraticCurveTo(x, y + h, x, y + h - r);
    ctx.lineTo(x, y + r);
    ctx.quadraticCurveTo(x, y, x + r, y);
    ctx.closePath();
  }

  function drawNode(cx, cy, text, color, value) {
    ctx.font = 'bold 12px Segoe UI, sans-serif';
    var w = Math.max(ctx.measureText(text).width + 28, 64);
    var h = 32;
    ctx.strokeStyle = color;
    ctx.lineWidth = 1.5;
    rrect(cx - w / 2, cy - h / 2, w, h, 8);
    ctx.stroke();
    ctx.fillStyle = color;
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText(text, cx, cy);
    if (value !== undefined) {
      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 11px Courier New, monospace';
      ctx.fillText('= ' + value, cx, cy + h / 2 + 14);
    }
  }

  function drawLine(x1, y1, x2, y2, color) {
    ctx.strokeStyle = color || '#475569';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.stroke();
  }

  function drawArrow(x1, y1, x2, y2, color) {
    ctx.strokeStyle = color || '#475569';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(x2 - 5, y2 - 6);
    ctx.lineTo(x2, y2);
    ctx.lineTo(x2 + 5, y2 - 6);
    ctx.stroke();
  }

  function drawTree() {
    var W = canvas.width / (window.devicePixelRatio || 1);
    var H = canvas.height / (window.devicePixelRatio || 1);

    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    ctx.font = 'bold 12px Segoe UI, sans-serif';

    var cxRoot = W / 2;
    var yRoot = 36;

    drawNode(cxRoot, yRoot, '\u221A(...)', '#34d399', '13');

    var yL1 = yRoot + 70;
    drawLine(cxRoot, yRoot + 16, cxRoot, yL1 - 16, '#475569');
    drawNode(cxRoot, yL1, '... + ...', '#60a5fa', '169');

    var yL2 = yL1 + 70;
    var cxProd = W * 0.35;
    var cxPow = W * 0.7;
    drawLine(cxRoot, yL1 + 16, cxProd, yL2 - 16, '#475569');
    drawLine(cxRoot, yL1 + 16, cxPow, yL2 - 16, '#475569');
    drawNode(cxProd, yL2, '... \u00D7 ... \u00D7 ...', '#60a5fa', '144');
    drawNode(cxPow, yL2, '5\u00B2', '#a78bfa', '25');

    var yL3 = yL2 + 70;
    var cxF1 = W * 0.15;
    var cxF2 = W * 0.35;
    var cxF3 = W * 0.55;
    drawLine(cxProd, yL2 + 16, cxF1, yL3 - 16, '#475569');
    drawLine(cxProd, yL2 + 16, cxF2, yL3 - 16, '#475569');
    drawLine(cxProd, yL2 + 16, cxF3, yL3 - 16, '#475569');
    drawNode(cxF1, yL3, '(1/3)\u207B\u00B2', '#f472b6', '9');
    drawNode(cxF2, yL3, '\u221A(4\u00B3)', '#f472b6', '8');
    drawNode(cxF3, yL3, '(0,5)\u207B\u00B9', '#f472b6', '2');

    ctx.fillStyle = '#64748b';
    ctx.font = '11px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'alphabetic';
    ctx.fillText('Stablo izraza: svaki list se izracuna, pa se kombinuju ka korenu', W / 2, H - 14);
  }

  function drawCalcFlow() {
    var W = canvas.width / (window.devicePixelRatio || 1);
    var H = canvas.height / (window.devicePixelRatio || 1);

    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    ctx.font = 'bold 12px Segoe UI, sans-serif';

    var steps = [
      { text: '(1/3)\u207B\u00B2 = 9', color: '#60a5fa' },
      { text: '\u221A(4\u00B3) = 8', color: '#60a5fa' },
      { text: '(0,5)\u207B\u00B9 = 2', color: '#60a5fa' },
      { text: '9 \u00D7 8 \u00D7 2 = 144', color: '#a78bfa' },
      { text: '144 + 25 = 169', color: '#a78bfa' },
      { text: '\u221A169 = 13', color: '#34d399' }
    ];

    var pad = 20;
    var totalH = H - 80;
    var stepH = totalH / steps.length;
    var boxW = Math.min(W - 2 * pad, 300);
    var startX = (W - boxW) / 2;

    for (var i = 0; i < steps.length; i++) {
      var cy = 40 + i * stepH + stepH / 2;
      var s = steps[i];

      if (i > 0) {
        var prevY = 40 + (i - 1) * stepH + stepH / 2 + 18;
        drawArrow(W / 2, prevY, W / 2, cy - 18, '#475569');
      }

      ctx.strokeStyle = s.color;
      ctx.lineWidth = 1.5;
      rrect(startX, cy - 16, boxW, 32, 8);
      ctx.stroke();

      ctx.fillStyle = '#0f172a';
      ctx.beginPath();
      ctx.arc(startX + 18, cy, 12, 0, Math.PI * 2);
      ctx.fill();
      ctx.fillStyle = s.color;
      ctx.strokeStyle = s.color;
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.arc(startX + 18, cy, 12, 0, Math.PI * 2);
      ctx.stroke();
      ctx.font = 'bold 11px Segoe UI, sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText(String(i + 1), startX + 18, cy);

      ctx.fillStyle = '#e2e8f0';
      ctx.font = '13px Courier New, monospace';
      ctx.textAlign = 'center';
      ctx.fillText(s.text, W / 2 + 10, cy + 1);
    }

    ctx.fillStyle = '#64748b';
    ctx.font = '11px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'alphabetic';
    ctx.fillText('Tok izracunavanja: od pojedinacnih delova ka konacnom rezultatu', W / 2, H - 14);
  }

  function draw() {
    if (activeMode === 'tree') {
      drawTree();
    } else {
      drawCalcFlow();
    }
  }

  window.addEventListener('resize', resize);

  canvas.addEventListener('touchstart', function(e) {
    e.preventDefault();
  }, { passive: false });

  resize();
})();
</script>

</body>
</html>

<!--BRAINSPARK_META
{"title":"Stepenovanje i korenovanje — vrednost izraza sa negativnim eksponentima","subject":"math","unit":"algebra","topic_tags":["stepenovanje","korenovanje","negativan_eksponent","kvadratni_koren","aritmetika"]}
BRAINSPARK_META-->