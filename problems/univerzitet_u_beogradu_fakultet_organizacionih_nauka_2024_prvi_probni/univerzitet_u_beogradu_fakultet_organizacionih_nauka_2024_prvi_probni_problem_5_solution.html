<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kompleksni brojevi — stepeni imaginarnog broja</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM:
Ako je z = (i^25 + i^6 + i^2024) / (i^9 + i^6), i^2 = -1, onda je Re(z) + Im(z) jednako:
A) 4;  B) -2;  C) 2;  D) 0;  E) -1

STEP-BY-STEP LOGIC:

Stepen imaginarnog broja i se ponavlja sa periodom 4:
  i^1 = i
  i^2 = -1
  i^3 = -i
  i^4 = 1
  i^5 = i   ... itd.

Za stepenovanje koristimo: i^n = i^(n mod 4)

BROJILAC: i^25 + i^6 + i^2024
  i^25:   25 mod 4 = 1  =>  i^25 = i
  i^6:    6  mod 4 = 2  =>  i^6  = -1
  i^2024: 2024 mod 4 = 0 (jer 2024 = 4*506) => i^2024 = 1

  Brojilac = i + (-1) + 1 = i

IMENILAC: i^9 + i^6
  i^9:  9  mod 4 = 1  =>  i^9  = i
  i^6:  6  mod 4 = 2  =>  i^6  = -1

  Imenilac = i + (-1) = i - 1 = -1 + i

Dakle: z = i / (-1 + i)

Mnozimo brojilac i imenilac konjugatom imenica (-1 - i):
  z = i * (-1 - i) / [(-1 + i)(-1 - i)]
    = (-i - i^2) / ((-1)^2 - i^2)
    = (-i - (-1)) / (1 - (-1))
    = (-i + 1) / 2
    = 1/2 - (1/2)i

Dakle: Re(z) = 1/2,  Im(z) = -1/2

Re(z) + Im(z) = 1/2 + (-1/2) = 0

TACAN ODGOVOR: D) 0

Provera vise vrednosti:
A) 4    — netacno
B) -2   — netacno
C) 2    — netacno
D) 0    — TACNO
E) -1   — netacno
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  text-align: center;
}

.subtitle {
  color: #94a3b8;
  text-align: center;
  font-size: 1.05rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.35rem;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.1rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56,189,248,0.06);
  border: 1px solid rgba(56,189,248,0.12);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 100px;
  text-align: center;
  flex: 1;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
  font-weight: 600;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.05rem;
  font-weight: 600;
}

.answer-option {
  transition: border-color 0.2s ease, background 0.2s ease;
  cursor: default;
}

.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 14px 0;
  overflow-x: auto;
}

.plan-card {
  border-left: 4px solid #a78bfa;
}

.theory-card details {
  margin: 15px 0;
}

.theory-card summary {
  cursor: pointer;
  font-size: 1.05rem;
  font-weight: 600;
  color: #a78bfa;
  padding: 8px 0;
  user-select: none;
}

.theory-card ul {
  list-style: none;
  padding: 12px 0;
}

.theory-card li {
  padding: 10px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #e2e8f0;
}

.theory-card li:last-child {
  border-bottom: none;
}

.step {
  display: flex;
  gap: 16px;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 12px;
  border-left: 3px solid transparent;
  transition: border-color 0.2s ease, background 0.2s ease;
}

.step:hover {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}

.step-badge {
  width: 32px;
  height: 32px;
  min-width: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  margin-bottom: 8px;
  color: #e2e8f0;
  font-size: 1.05rem;
}

.step-content p {
  color: #cbd5e1;
  margin-bottom: 8px;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 6px;
}

.checkpoint {
  margin: 20px 0;
  background: rgba(167,139,250,0.06);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
}

.checkpoint summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 0.95rem;
  user-select: none;
}

.checkpoint .answer {
  padding-top: 10px;
  color: #4ade80;
  font-weight: 600;
}

.insight-card {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid rgba(96,165,250,0.25);
  text-align: center;
  padding: 28px;
}

.insight-card .big-formula {
  font-size: 1.4rem;
  margin: 16px 0;
  color: #4ade80;
}

.final-answer-card {
  border: 2px solid #4ade80;
  background: linear-gradient(135deg, rgba(52,211,153,0.08), rgba(74,222,128,0.04));
  text-align: center;
  padding: 28px;
}

.final-answer-card h2 {
  color: #4ade80;
  justify-content: center;
}

.final-answer-value {
  font-size: 1.8rem;
  color: #4ade80;
  font-weight: 800;
  margin: 16px 0;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 20px 0;
}

.option-card {
  padding: 10px 22px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: #1e293b;
  color: #94a3b8;
  font-size: 1rem;
  font-weight: 600;
  transition: all 0.2s ease;
}

.option-card.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.1);
  color: #4ade80;
  box-shadow: 0 0 20px rgba(74,222,128,0.15);
}

.verification-note {
  color: #94a3b8;
  font-size: 0.92rem;
  margin-top: 14px;
  padding-top: 14px;
  border-top: 1px solid #334155;
  text-align: left;
}

.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #cbd5e1;
}

.pitfall-list li:last-child {
  border-bottom: none;
}

.pitfall-label {
  color: #e09468;
  font-weight: 700;
  margin-right: 6px;
}

.challenge-card {
  border-left: 4px solid #f472b6;
}

.challenge-card details {
  margin: 15px 0;
}

.challenge-card summary {
  cursor: pointer;
  color: #f472b6;
  font-weight: 600;
  user-select: none;
}

canvas {
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  touch-action: none;
  width: 100%;
}

.canvas-hint {
  text-align: center;
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

.highlight-blue {
  color: #60a5fa;
  font-weight: 600;
}

.highlight-green {
  color: #4ade80;
  font-weight: 600;
}

.highlight-purple {
  color: #a78bfa;
  font-weight: 600;
}

.power-table {
  width: 100%;
  border-collapse: collapse;
  margin: 14px 0;
  font-size: 0.95rem;
}

.power-table th {
  background: rgba(96,165,250,0.12);
  color: #60a5fa;
  padding: 8px 14px;
  text-align: center;
  border: 1px solid #334155;
}

.power-table td {
  padding: 8px 14px;
  text-align: center;
  border: 1px solid #2d3a4a;
  color: #e2e8f0;
}

.power-table tr:nth-child(even) td {
  background: rgba(255,255,255,0.02);
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step { padding: 12px; flex-direction: column; gap: 8px; }
  .given-grid { gap: 8px; }
  .given-item { min-width: 70px; padding: 10px 12px; }
  .final-answer-value { font-size: 1.4rem; }
  .options-row { gap: 8px; }
  .option-card { padding: 8px 14px; font-size: 0.9rem; }
  .power-table { font-size: 0.82rem; }
  .power-table td, .power-table th { padding: 6px 8px; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Kompleksni brojevi — stepeni imaginarnog broja</h1>
  <p class="subtitle">Algebra &mdash; kompleksni brojevi, peridicnost stepena broja \(i\)</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>
      Ako je
      \[
        z = \frac{i^{25} + i^{6} + i^{2024}}{i^{9} + i^{6}}, \quad i^2 = -1,
      \]
      onda je \(\operatorname{Re} z + \operatorname{Im} z\) jednako:
    </p>

    <div class="given-grid" style="margin-top: 14px;">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(4\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(-2\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(2\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(0\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(-1\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>
      Koristicemo <span class="highlight-blue">periodicnost stepena broja \(i\)</span> (period 4)
      da bismo svaki stepen sveli na jedan od cetiri vrednosti: \(i,\,-1,\,-i,\,1\).
      Potom cemo odrediti razlomak i podeliti ga mnozeci sa <span class="highlight-purple">konjugatom imenica</span>,
      cime cemo dobiti kompleksni broj u obliku \(a + bi\).
      Na kraju citamo \(\operatorname{Re} z\) i \(\operatorname{Im} z\) i sabiramo ih.
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card theory-card">
    <details>
      <summary>Kljucne formule i teoreme</summary>
      <ul>
        <li>
          <strong>Periodicnost stepena \(i\):</strong>
          \[
            i^1 = i,\quad i^2 = -1,\quad i^3 = -i,\quad i^4 = 1,\quad i^{n+4} = i^n
          \]
          Dakle, \(i^n\) zavisi samo od ostatka pri deljenju eksponenta sa \(4\).
        </li>
        <li>
          <strong>Racunanje ostatka:</strong>
          \(i^n = i^{n \bmod 4}\), gde se \(n \bmod 4 = 0\) interpretira kao \(i^0 = 1\).
        </li>
        <li>
          <strong>Mnozenje razlomka konjugatom (racionalizacija):</strong>
          Da bismo podelili sa \(a + bi\), mnozimo i brojilac i imenilac sa \(a - bi\):
          \[
            \frac{p + qi}{a + bi} = \frac{(p+qi)(a-bi)}{a^2 + b^2}
          \]
        </li>
        <li>
          <strong>Realni i imaginarni deo:</strong>
          Za \(z = a + bi\), \(\operatorname{Re} z = a\) i \(\operatorname{Im} z = b\).
        </li>
      </ul>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <h2>Vizuelni prikaz — krug stepena broja \(i\)</h2>
    <p style="color:#94a3b8; margin-bottom: 14px;">
      Dijagram prikazuje kako se stepen \(i^n\) krece po kompleksnoj ravni u ciklusima od 4 koraka.
    </p>
    <canvas id="complexCanvas" width="700" height="380"></canvas>
    <p class="canvas-hint">Krug stepena broja i — vrednosti se ponavljaju na svakih 4 koraka</p>
  </div>

  <!-- Step-by-step Solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Svodimo svaki stepen na ostatak pri deljenju sa 4</h3>
        <p>
          Koristimo pravilo: \(i^n = i^{n \bmod 4}\). Pogledajmo tablicu:
        </p>
        <table class="power-table">
          <thead>
            <tr>
              <th>Stepen</th>
              <th>Eksponent</th>
              <th>\(n \bmod 4\)</th>
              <th>Vrednost</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>\(i^{25}\)</td>
              <td>\(25 = 4 \cdot 6 + 1\)</td>
              <td>\(1\)</td>
              <td>\(i\)</td>
            </tr>
            <tr>
              <td>\(i^{6}\)</td>
              <td>\(6 = 4 \cdot 1 + 2\)</td>
              <td>\(2\)</td>
              <td>\(-1\)</td>
            </tr>
            <tr>
              <td>\(i^{2024}\)</td>
              <td>\(2024 = 4 \cdot 506 + 0\)</td>
              <td>\(0\)</td>
              <td>\(1\)</td>
            </tr>
            <tr>
              <td>\(i^{9}\)</td>
              <td>\(9 = 4 \cdot 2 + 1\)</td>
              <td>\(1\)</td>
              <td>\(i\)</td>
            </tr>
          </tbody>
        </table>
        <p class="note">
          Napomena: ostatak \(0\) odgovara \(i^4 = 1\), jer \(2024\) je deljivo sa \(4\)
          bez ostatka.
        </p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Izracunajmo brojilac</h3>
        <p>Zamenjujemo naidjene vrednosti:</p>
        <div class="math-block">
          \[
            i^{25} + i^{6} + i^{2024}
            = i + (-1) + 1
            = i
          \]
        </div>
        <p>
          Kljucno zapazanje: \(-1\) i \(+1\) se poniste, ostaje samo <span class="highlight-blue">\(i\)</span>.
        </p>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Izracunajmo imenilac</h3>
        <div class="math-block">
          \[
            i^{9} + i^{6}
            = i + (-1)
            = -1 + i
          \]
        </div>
        <p>
          Imenilac je kompleksni broj <span class="highlight-purple">\(-1 + i\)</span>.
        </p>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri se: Sta smo dobili za brojilac i imenilac?</summary>
      <div class="answer">
        Brojilac \(= i\), imenilac \(= -1 + i\). Dakle: \(z = \dfrac{i}{-1 + i}\).
      </div>
    </details>

    <!-- Step 4 -->
    <div class="step">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Racionalizujemo imenilac — mnozimo konjugatom</h3>
        <p>
          Konjugat od \(-1 + i\) je \(-1 - i\). Mnozimo i brojilac i imenilac njime:
        </p>
        <div class="math-block">
          \[
            z = \frac{i}{-1 + i}
            = \frac{i \cdot (-1 - i)}{(-1 + i)(-1 - i)}
          \]
        </div>
        <p><strong>Imenilac:</strong> koristimo razliku kvadrata \((a+b)(a-b) = a^2 - b^2\):</p>
        <div class="math-block">
          \[
            (-1)^2 - i^2 = 1 - (-1) = 2
          \]
        </div>
        <p><strong>Brojilac:</strong> raspakujemo mnozenje:</p>
        <div class="math-block">
          \[
            i \cdot (-1 - i) = -i - i^2 = -i - (-1) = -i + 1 = 1 - i
          \]
        </div>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Zapisujemo \(z\) u standardnom obliku \(a + bi\)</h3>
        <div class="math-block">
          \[
            z = \frac{1 - i}{2} = \frac{1}{2} - \frac{1}{2} \, i
          \]
        </div>
        <p>
          Dakle: \(\operatorname{Re} z = \dfrac{1}{2}\) i \(\operatorname{Im} z = -\dfrac{1}{2}\).
        </p>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Racunamo \(\operatorname{Re} z + \operatorname{Im} z\)</h3>
        <div class="math-block">
          \[
            \operatorname{Re} z + \operatorname{Im} z
            = \frac{1}{2} + \left(-\frac{1}{2}\right)
            = 0
          \]
        </div>
        <p>
          Realni i imaginarni deo su suprotni po znaku i iste apsolutne vrednosti, pa im je zbir <span class="highlight-green">\(0\)</span>.
        </p>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri se: Koji je odgovor?</summary>
      <div class="answer">
        \(\operatorname{Re} z + \operatorname{Im} z = 0\) &mdash; odgovor je <strong>(D)</strong>.
      </div>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="card insight-card">
    <h2 style="justify-content: center;">Kljucno zapazanje</h2>
    <p>
      Posle svodenja stepena na ostatke, <span class="highlight-blue">dve od tri vrednosti u brojilacu su se ponistile</span> (\(-1\) i \(+1\)),
      ostavivsi samo \(i\). Ovaj tip uprosciavanja je karakteristican za zadatke sa stepenima broja \(i\):
      uvek je vredno proveriti da li se clanovi parovima ponisravaju.
    </p>
    <div class="big-formula">
      \[
        i^{n} = i^{\,n \bmod 4}, \quad
        z = \frac{1}{2} - \frac{1}{2}\,i, \quad
        \operatorname{Re} z + \operatorname{Im} z = 0
      \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer-card">
    <h2>Konacan odgovor</h2>
    <div class="final-answer-value">
      \(\operatorname{Re} z + \operatorname{Im} z = 0\)
    </div>
    <p style="color:#94a3b8; margin-bottom: 14px;">Tacan odgovor je <strong style="color:#4ade80;">D)</strong></p>
    <div class="options-row">
      <div class="option-card">(A) \(4\)</div>
      <div class="option-card">(B) \(-2\)</div>
      <div class="option-card">(C) \(2\)</div>
      <div class="option-card correct">(D) \(0\) &#10003;</div>
      <div class="option-card">(E) \(-1\)</div>
    </div>
    <p class="verification-note">
      <strong>Verifikacija:</strong>
      Brojilac: \(i^{25} + i^6 + i^{2024} = i + (-1) + 1 = i\).
      Imenilac: \(i^9 + i^6 = i + (-1) = -1 + i\).
      Razlomak: \(\dfrac{i}{-1+i} = \dfrac{i(-1-i)}{(-1)^2-i^2} = \dfrac{1-i}{2} = \dfrac{1}{2} - \dfrac{1}{2}i\).
      Suma: \(\dfrac{1}{2} + \left(-\dfrac{1}{2}\right) = 0\).
    </p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Ceste greske</h2>
    <ul class="pitfall-list">
      <li>
        <span class="pitfall-label">Greska 1:</span>
        Pogresno racunanje \(i^{2024}\): neki ucenici pogresno uzmu \(2024 \bmod 4 = 2\) pa pisu \(i^{2024} = -1\).
        Proverite: \(2024 = 4 \cdot 506\), ostatak je tacno \(0\), pa \(i^{2024} = i^0 = 1\).
      </li>
      <li>
        <span class="pitfall-label">Greska 2:</span>
        Zaboraviti da je \(\operatorname{Im} z\) <em>koeficijent</em> uz \(i\), a ne ceo imaginarni deo sa slovom.
        Ovde \(\operatorname{Im} z = -\tfrac{1}{2}\), a ne \(-\tfrac{1}{2}i\).
      </li>
      <li>
        <span class="pitfall-label">Greska 3:</span>
        Pri racionalizaciji, mnoziti samo brojilac konjugatom i zaboraviti da treba i imenilac &mdash;
        sto menja vrednost razlomka. Uvek mnoziti obe strane razlomka istim izrazom.
      </li>
    </ul>
  </div>

  <!-- Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>
      Izracunajte \(\operatorname{Re} w + \operatorname{Im} w\) ako je:
      \[
        w = \frac{i^{101} + i^{202} + i^{303}}{i^{404} - i^{505}}
      \]
    </p>
    <details>
      <summary>Nagovestaj</summary>
      <p style="padding-top: 10px; color: #cbd5e1;">
        Koristite isti pristup: \(101 \bmod 4 = 1\), \(202 \bmod 4 = 2\), \(303 \bmod 4 = 3\), \(404 \bmod 4 = 0\), \(505 \bmod 4 = 1\).
        Dakle: \(i^{101} = i\), \(i^{202} = -1\), \(i^{303} = -i\), \(i^{404} = 1\), \(i^{505} = i\).
        Brojilac: \(i - 1 - i = -1\). Imenilac: \(1 - i\).
        Razlomak: \(\dfrac{-1}{1-i} = \dfrac{-1(1+i)}{2} = -\dfrac{1}{2} - \dfrac{1}{2}i\).
        Suma: \(-\dfrac{1}{2} + \left(-\dfrac{1}{2}\right) = -1\).
      </p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('complexCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');

  function draw() {
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    const W = rect.width;
    const H = 380;

    canvas.width = W * dpr;
    canvas.height = H * dpr;
    canvas.style.height = H + 'px';
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    const s = Math.min(W / 700, 1);
    const cx = W / 2;
    const cy = H / 2;
    const R = 110 * s;  // radius of the circle

    // --- Grid lines (axes) ---
    ctx.strokeStyle = '#1e3a5f';
    ctx.lineWidth = 1;

    // x-axis
    ctx.beginPath();
    ctx.moveTo(40 * s, cy);
    ctx.lineTo(W - 40 * s, cy);
    ctx.stroke();

    // y-axis
    ctx.beginPath();
    ctx.moveTo(cx, 20 * s);
    ctx.lineTo(cx, H - 20 * s);
    ctx.stroke();

    // --- Main circle ---
    ctx.beginPath();
    ctx.arc(cx, cy, R, 0, 2 * Math.PI);
    ctx.strokeStyle = 'rgba(96,165,250,0.18)';
    ctx.lineWidth = 1.5;
    ctx.stroke();

    // Axis labels
    ctx.font = (13 * s) + 'px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#475569';
    ctx.textAlign = 'center';
    ctx.fillText('Re', W - 28 * s, cy - 6 * s);
    ctx.fillText('Im', cx + 12 * s, 18 * s);

    // Four points and their labels
    const pts = [
      { angle: 0,        label: 'i\u00B9 = i',     value: 'i',   color: '#60a5fa', angle_deg: 90  },
      { angle: Math.PI/2, label: 'i\u00B2 = \u22121', value: '\u22121', color: '#a78bfa', angle_deg: 180 },
      { angle: Math.PI,  label: 'i\u00B3 = \u2212i', value: '\u2212i',  color: '#f472b6', angle_deg: 270 },
      { angle: 3*Math.PI/2, label: 'i\u2074 = 1',  value: '1',   color: '#4ade80', angle_deg: 0   },
    ];

    // Draw in complex plane convention: i is at top (angle -PI/2 in screen coords)
    // Point positions: i -> top, -1 -> left, -i -> bottom, 1 -> right
    const pointsPos = [
      { x: cx,      y: cy - R, label: 'i\u00B9 \u2192 i',       color: '#60a5fa' },
      { x: cx - R,  y: cy,     label: 'i\u00B2 \u2192 \u22121', color: '#a78bfa' },
      { x: cx,      y: cy + R, label: 'i\u00B3 \u2192 \u2212i', color: '#f472b6' },
      { x: cx + R,  y: cy,     label: 'i\u2074 \u2192 1',       color: '#4ade80' },
    ];

    // Draw curved arrows between points
    function drawArc(x1, y1, x2, y2, color) {
      const mx = (x1 + x2) / 2;
      const my = (y1 + y2) / 2;
      // Control point towards circle center, slightly outside
      const ctrlX = cx + (mx - cx) * 1.35;
      const ctrlY = cy + (my - cy) * 1.35;

      ctx.beginPath();
      ctx.moveTo(x1, y1);
      ctx.quadraticCurveTo(ctrlX, ctrlY, x2, y2);
      ctx.strokeStyle = color;
      ctx.lineWidth = 1.8 * s;
      ctx.setLineDash([5 * s, 3 * s]);
      ctx.stroke();
      ctx.setLineDash([]);

      // Arrow head at x2,y2
      const dx = x2 - ctrlX;
      const dy = y2 - ctrlY;
      const ang = Math.atan2(dy, dx);
      const headLen = 9 * s;
      ctx.beginPath();
      ctx.moveTo(x2, y2);
      ctx.lineTo(x2 - headLen * Math.cos(ang - 0.4), y2 - headLen * Math.sin(ang - 0.4));
      ctx.moveTo(x2, y2);
      ctx.lineTo(x2 - headLen * Math.cos(ang + 0.4), y2 - headLen * Math.sin(ang + 0.4));
      ctx.strokeStyle = color;
      ctx.lineWidth = 1.8 * s;
      ctx.setLineDash([]);
      ctx.stroke();
    }

    const arcColors = ['#60a5fa', '#a78bfa', '#f472b6', '#4ade80'];
    for (let i = 0; i < 4; i++) {
      const from = pointsPos[i];
      const to = pointsPos[(i + 1) % 4];
      drawArc(from.x, from.y, to.x, to.y, arcColors[i]);
    }

    // Draw dot and label for each point
    const dotR = 8 * s;
    const labelOffsets = [
      { dx: 0,         dy: -22 * s },
      { dx: -62 * s,   dy: 0       },
      { dx: 0,         dy: 22 * s  },
      { dx: 62 * s,    dy: 0       },
    ];

    for (let idx = 0; idx < 4; idx++) {
      const p = pointsPos[idx];
      // Glow
      const grad = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, dotR * 2.5);
      grad.addColorStop(0, p.color + 'aa');
      grad.addColorStop(1, p.color + '00');
      ctx.beginPath();
      ctx.arc(p.x, p.y, dotR * 2.5, 0, 2 * Math.PI);
      ctx.fillStyle = grad;
      ctx.fill();

      // Dot
      ctx.beginPath();
      ctx.arc(p.x, p.y, dotR, 0, 2 * Math.PI);
      ctx.fillStyle = p.color;
      ctx.fill();

      // Label
      const off = labelOffsets[idx];
      ctx.font = 'bold ' + (14 * s) + 'px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = p.color;
      ctx.textAlign = 'center';
      ctx.fillText(p.label, p.x + off.dx, p.y + off.dy);
    }

    // --- Right side: computation boxes ---
    const bx = cx + R + 45 * s;
    const bW = (W - bx - 20 * s);
    const bH = 44 * s;
    const bGap = 12 * s;

    const computations = [
      { label: 'Brojilac', steps: ['i\u00B2\u2075 = i', 'i\u2076 = \u22121', 'i\u00B2\u2070\u00B2\u2074 = 1', 'Zbir = i'], color: '#60a5fa' },
      { label: 'Imenilac', steps: ['i\u2079 = i', 'i\u2076 = \u22121', 'Zbir = \u22121+i'], color: '#a78bfa' },
      { label: 'Rezultat', steps: ['z = i/(\u22121+i)', 'z = \u00BD \u2212 \u00BDi', 'Re+Im = 0'], color: '#4ade80' },
    ];

    let yOff = 28 * s;
    for (const comp of computations) {
      // Section title
      ctx.font = 'bold ' + (12 * s) + 'px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = comp.color;
      ctx.textAlign = 'left';
      ctx.fillText(comp.label + ':', bx, yOff);
      yOff += 18 * s;

      for (const step of comp.steps) {
        // Box
        const isLast = step === comp.steps[comp.steps.length - 1];
        ctx.beginPath();
        ctx.roundRect ? ctx.roundRect(bx, yOff, bW, bH, 6 * s) : ctx.rect(bx, yOff, bW, bH);
        ctx.fillStyle = isLast ? comp.color + '22' : 'rgba(255,255,255,0.03)';
        ctx.fill();
        ctx.strokeStyle = isLast ? comp.color + '88' : '#2d3a4a';
        ctx.lineWidth = 1.2;
        ctx.stroke();

        ctx.font = (isLast ? 'bold ' : '') + (12 * s) + 'px Segoe UI, system-ui, sans-serif';
        ctx.fillStyle = isLast ? comp.color : '#cbd5e1';
        ctx.textAlign = 'center';
        ctx.fillText(step, bx + bW / 2, yOff + bH / 2 + 4 * s);
        yOff += bH + bGap;
      }
      yOff += 6 * s;
    }

    // --- Title at top ---
    ctx.font = (13 * s) + 'px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#64748b';
    ctx.textAlign = 'center';
    ctx.fillText('Krug stepena broja i u kompleksnoj ravni', cx / 2, 14 * s);
  }

  draw();
  window.addEventListener('resize', draw);
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Kompleksni brojevi — stepeni imaginarnog broja i suma Re+Im",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["kompleksni brojevi", "stepen imaginarnog broja", "periodicnost", "racionalizacija", "realni i imaginarni deo"]
}
BRAINSPARK_META-->
