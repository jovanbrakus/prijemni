<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FON 2024 – Zadatak 5</title>
<script>
MathJax = { tex: { inlineMath: [['\\(', '\\)'], ['$', '$']], displayMath: [['\\[', '\\]']] }, svg: { fontCache: 'global' } };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

<script type="text/info" id="logic-scratchpad">
PROBLEM:
Ako je z = (i^25 + i^6 + i^2024) / (i^9 + i^6), i^2 = -1, onda je Re(z) + Im(z) jednako:
A) 4;  B) -2;  C) 2;  D) 0;  E) -1

STEP-BY-STEP LOGIC:

Stepen imaginarnog broja i se ponavlja sa periodom 4:
  i^1 = i
  i^2 = -1
  i^3 = -i
  i^4 = 1
Za stepenovanje koristimo: i^n = i^(n mod 4)

BROJILAC: i^25 + i^6 + i^2024
  i^25:   25 mod 4 = 1  =>  i^25 = i
  i^6:    6  mod 4 = 2  =>  i^6  = -1
  i^2024: 2024 mod 4 = 0 (jer 2024 = 4*506) => i^2024 = 1

  Brojilac = i + (-1) + 1 = i

IMENILAC: i^9 + i^6
  i^9:  9  mod 4 = 1  =>  i^9  = i
  i^6:  6  mod 4 = 2  =>  i^6  = -1

  Imenilac = i + (-1) = i - 1 = -1 + i

Dakle: z = i / (-1 + i)

Mnozimo brojilac i imenilac konjugatom imenioca (-1 - i):
  z = i * (-1 - i) / [(-1 + i)(-1 - i)]
    = (-i - i^2) / ((-1)^2 - i^2)
    = (-i - (-1)) / (1 - (-1))
    = (-i + 1) / 2
    = 1/2 - (1/2)i

Dakle: Re(z) = 1/2,  Im(z) = -1/2

Re(z) + Im(z) = 1/2 + (-1/2) = 0

TACAN ODGOVOR: D) 0
</script>

<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    background: #0f172a;
    color: #e2e8f0;
    font-family: 'Segoe UI', system-ui, sans-serif;
    font-size: 16px;
    line-height: 1.7;
    padding: 24px 16px 60px;
  }
  a { color: #60a5fa; }

  .page-title {
    text-align: center;
    font-size: 1.8rem;
    font-weight: 800;
    background: linear-gradient(90deg, #60a5fa, #a78bfa, #f472b6);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 8px;
  }
  .page-subtitle {
    text-align: center;
    color: #94a3b8;
    font-size: 0.95rem;
    margin-bottom: 32px;
  }

  .card {
    background: #1e293b;
    border: 1px solid #334155;
    border-radius: 14px;
    padding: 24px 28px;
    margin-bottom: 24px;
    max-width: 820px;
    margin-left: auto;
    margin-right: auto;
  }
  .card-title {
    font-size: 1.1rem;
    font-weight: 700;
    color: #60a5fa;
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .card-title .icon { font-size: 1.2rem; }

  /* Problem statement */
  .problem-statement .problem-text {
    font-size: 1.08rem;
    margin-bottom: 20px;
    color: #e2e8f0;
  }
  .given-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
    gap: 10px;
    margin-top: 16px;
  }
  .given-item {
    background: #0f172a;
    border: 2px solid #334155;
    border-radius: 10px;
    padding: 12px 16px;
    text-align: center;
  }
  .given-item .label {
    color: #94a3b8;
    font-size: 0.85rem;
    font-weight: 600;
    margin-bottom: 4px;
  }
  .given-item .value {
    color: #e2e8f0;
    font-size: 1.05rem;
    font-weight: 600;
  }

  /* Plan */
  .plan-steps { list-style: none; counter-reset: plan; }
  .plan-steps li {
    counter-increment: plan;
    display: flex;
    align-items: flex-start;
    gap: 12px;
    margin-bottom: 10px;
    color: #cbd5e1;
  }
  .plan-steps li::before {
    content: counter(plan);
    background: #60a5fa;
    color: #0f172a;
    font-weight: 700;
    border-radius: 50%;
    min-width: 26px;
    height: 26px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.85rem;
    flex-shrink: 0;
    margin-top: 2px;
  }

  /* Theory */
  details { border: 1px solid #334155; border-radius: 10px; margin-bottom: 0; }
  details summary {
    padding: 14px 18px;
    cursor: pointer;
    font-weight: 600;
    color: #a78bfa;
    list-style: none;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  details summary::-webkit-details-marker { display: none; }
  details summary::before { content: '\25B6'; font-size: 0.75rem; transition: transform 0.2s; }
  details[open] summary::before { transform: rotate(90deg); }
  .theory-body { padding: 0 18px 18px; color: #cbd5e1; }
  .formula-box {
    background: #0f172a;
    border-left: 3px solid #a78bfa;
    border-radius: 6px;
    padding: 12px 16px;
    margin: 10px 0;
    font-size: 1rem;
  }

  /* Power table */
  .power-table {
    width: 100%;
    border-collapse: collapse;
    margin: 14px 0;
    font-size: 0.95rem;
  }
  .power-table th {
    background: rgba(96,165,250,0.12);
    color: #60a5fa;
    padding: 8px 14px;
    text-align: center;
    border: 1px solid #334155;
    font-weight: 600;
  }
  .power-table td {
    padding: 8px 14px;
    text-align: center;
    border: 1px solid #2d3a4a;
    color: #e2e8f0;
  }
  .power-table tr:nth-child(even) td {
    background: rgba(255,255,255,0.02);
  }

  /* Canvas */
  .canvas-wrap {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
  }
  canvas {
    border-radius: 10px;
    border: 1px solid #334155;
    background: #0f172a;
    max-width: 100%;
    touch-action: none;
  }
  .canvas-caption {
    color: #94a3b8;
    font-size: 0.88rem;
    text-align: center;
  }

  /* Steps */
  .step {
    border-left: 3px solid #334155;
    padding: 0 0 20px 20px;
    margin-bottom: 0;
    position: relative;
  }
  .step:last-child { padding-bottom: 0; }
  .step-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: #1e3a5f;
    border: 1px solid #60a5fa;
    border-radius: 20px;
    padding: 3px 12px;
    font-size: 0.82rem;
    font-weight: 700;
    color: #60a5fa;
    margin-bottom: 10px;
  }
  .step-body { color: #cbd5e1; }
  .step-math {
    background: #0f172a;
    border-radius: 8px;
    padding: 12px 18px;
    margin: 10px 0;
    overflow-x: auto;
  }
  .checkpoint {
    background: #0d3d2e;
    border: 1px solid #34d399;
    border-radius: 8px;
    padding: 10px 14px;
    margin-top: 12px;
    color: #4ade80;
    font-size: 0.92rem;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  /* Key Insight */
  .insight-box {
    background: linear-gradient(135deg, #1e1b4b 0%, #1e293b 100%);
    border: 1px solid #a78bfa;
    border-radius: 12px;
    padding: 18px 22px;
    color: #e2e8f0;
  }
  .insight-box strong { color: #a78bfa; }

  /* Final answer */
  .final-answer {
    background: #0d3d2e;
    border: 2px solid #34d399;
    border-radius: 14px;
    padding: 24px 28px;
    text-align: center;
  }
  .final-answer .fa-label {
    color: #94a3b8;
    font-size: 0.9rem;
    margin-bottom: 8px;
  }
  .final-answer .fa-expr {
    font-size: 1.6rem;
    color: #4ade80;
    font-weight: 700;
    margin-bottom: 8px;
  }
  .final-answer .fa-option {
    font-size: 1.1rem;
    color: #34d399;
  }
  .final-answer .verification-note {
    color: #94a3b8;
    font-size: 0.88rem;
    margin-top: 16px;
    padding-top: 14px;
    border-top: 1px solid rgba(52,211,153,0.25);
    text-align: left;
  }

  /* Pitfalls */
  .pitfall {
    display: flex;
    gap: 12px;
    align-items: flex-start;
    margin-bottom: 14px;
    color: #cbd5e1;
  }
  .pitfall:last-child { margin-bottom: 0; }
  .pitfall-icon { font-size: 1.2rem; flex-shrink: 0; margin-top: 2px; }

  /* Challenge */
  .challenge-box {
    background: #1a1035;
    border: 1px dashed #a78bfa;
    border-radius: 12px;
    padding: 18px 22px;
    color: #c4b5fd;
  }

  @media (max-width: 700px) {
    .card { padding: 18px 16px; }
    .page-title { font-size: 1.4rem; }
    .given-grid { grid-template-columns: repeat(3, 1fr); }
    .final-answer .fa-expr { font-size: 1.3rem; }
    .power-table { font-size: 0.82rem; }
    .power-table td, .power-table th { padding: 6px 8px; }
  }
</style>
</head>
<body>

<h1 class="page-title">FON Beograd &mdash; Prijemni 2024 (1. probni)</h1>
<p class="page-subtitle">Zadatak 5 &mdash; Kompleksni brojevi, stepeni imaginarnog broja</p>

<!-- POSTAVKA -->
<div class="card problem-statement">
  <div class="card-title"><span class="icon">&#128203;</span> Postavka zadatka</div>
  <div class="problem-text">
    Ako je
    \[
      z = \frac{i^{25} + i^{6} + i^{2024}}{i^{9} + i^{6}}, \quad i^2 = -1,
    \]
    onda je \(\operatorname{Re}\,z + \operatorname{Im}\,z\) jednako:
  </div>
  <div class="given-grid">
    <div class="given-item answer-option" data-option="A">
      <div class="label">(A)</div>
      <div class="value">\(4\)</div>
    </div>
    <div class="given-item answer-option" data-option="B">
      <div class="label">(B)</div>
      <div class="value">\(-2\)</div>
    </div>
    <div class="given-item answer-option" data-option="C">
      <div class="label">(C)</div>
      <div class="value">\(2\)</div>
    </div>
    <div class="given-item answer-option" data-option="D">
      <div class="label">(D)</div>
      <div class="value">\(0\)</div>
    </div>
    <div class="given-item answer-option" data-option="E">
      <div class="label">(E)</div>
      <div class="value">\(-1\)</div>
    </div>
  </div>
</div>

<!-- PLAN -->
<div class="card">
  <div class="card-title"><span class="icon">&#128506;</span> Plan rešavanja</div>
  <ol class="plan-steps">
    <li>Iskoristiti <em>periodičnost stepena broja \(i\)</em> (period 4) da svedemo svaki stepen na jednu od četiri vrednosti: \(1,\, i,\, {-1},\, {-i}\).</li>
    <li>Izračunati brojilac i imenilac posebno.</li>
    <li>Racionalizovati razlomak množenjem konjugatom imenioca.</li>
    <li>Očitati \(\operatorname{Re}\,z\) i \(\operatorname{Im}\,z\) i sabrati ih.</li>
  </ol>
</div>

<!-- TEORIJA -->
<div class="card">
  <div class="card-title"><span class="icon">&#128214;</span> Teorijsko osveženje</div>
  <details>
    <summary>Periodičnost stepena broja \(i\) i racionalizacija</summary>
    <div class="theory-body">
      <p><strong>Ciklus stepena imaginarne jedinice:</strong></p>
      <div class="formula-box">
        \[
          i^1 = i, \quad i^2 = -1, \quad i^3 = -i, \quad i^4 = 1, \quad i^{n+4} = i^n
        \]
      </div>
      <p>Dakle, \(i^n = i^{n \bmod 4}\), gde ostatak \(0\) odgovara vrednosti \(i^4 = 1\).</p>

      <p style="margin-top:14px"><strong>Racionalizacija imenioca:</strong></p>
      <div class="formula-box">
        \[
          \frac{p + qi}{a + bi} = \frac{(p+qi)(a-bi)}{a^2 + b^2}
        \]
      </div>
      <p style="margin-top:10px">Množimo i brojilac i imenilac <em>konjugatom imenioca</em>, čime imenilac postaje realan broj.</p>
    </div>
  </details>
</div>

<!-- VIZUELNI PRIKAZ -->
<div class="card">
  <div class="card-title"><span class="icon">&#127912;</span> Vizuelni prikaz &mdash; krug stepena broja \(i\)</div>
  <div class="canvas-wrap">
    <canvas id="complexCanvas" width="720" height="400"></canvas>
    <p class="canvas-caption">Stepeni broja \(i\) se kreću po jediničnom krugu u kompleksnoj ravni sa periodom 4</p>
  </div>
</div>

<!-- REŠENJE KORAK PO KORAK -->
<div class="card">
  <div class="card-title"><span class="icon">&#128290;</span> Rešenje korak po korak</div>

  <div class="step">
    <div class="step-badge">Korak 1 &mdash; Svodimo stepene na ostatke po modulu 4</div>
    <div class="step-body">
      <p>Za svaki stepen računamo ostatak pri deljenju eksponenta sa \(4\):</p>
      <table class="power-table">
        <thead>
          <tr>
            <th>Stepen</th>
            <th>Eksponent</th>
            <th>\(n \bmod 4\)</th>
            <th>Vrednost</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>\(i^{25}\)</td>
            <td>\(25 = 4 \cdot 6 + 1\)</td>
            <td>\(1\)</td>
            <td>\(i\)</td>
          </tr>
          <tr>
            <td>\(i^{6}\)</td>
            <td>\(6 = 4 \cdot 1 + 2\)</td>
            <td>\(2\)</td>
            <td>\(-1\)</td>
          </tr>
          <tr>
            <td>\(i^{2024}\)</td>
            <td>\(2024 = 4 \cdot 506 + 0\)</td>
            <td>\(0\)</td>
            <td>\(1\)</td>
          </tr>
          <tr>
            <td>\(i^{9}\)</td>
            <td>\(9 = 4 \cdot 2 + 1\)</td>
            <td>\(1\)</td>
            <td>\(i\)</td>
          </tr>
        </tbody>
      </table>
      <div class="checkpoint">&#10004; Svi stepeni svedeni na jednu od četiri vrednosti ciklusa.</div>
    </div>
  </div>

  <div class="step">
    <div class="step-badge">Korak 2 &mdash; Izračunavamo brojilac</div>
    <div class="step-body">
      <p>Zamenjujemo nađene vrednosti:</p>
      <div class="step-math">
        \[
          i^{25} + i^{6} + i^{2024}
          = i + (-1) + 1
          = i + 0 = i
        \]
      </div>
      <p>Članovi \(-1\) i \(+1\) se poništavaju, pa je brojilac jednak \(i\).</p>
      <div class="checkpoint">&#10004; Brojilac = \(i\)</div>
    </div>
  </div>

  <div class="step">
    <div class="step-badge">Korak 3 &mdash; Izračunavamo imenilac</div>
    <div class="step-body">
      <div class="step-math">
        \[
          i^{9} + i^{6}
          = i + (-1)
          = -1 + i
        \]
      </div>
      <div class="checkpoint">&#10004; Imenilac = \(-1 + i\)</div>
    </div>
  </div>

  <div class="step">
    <div class="step-badge">Korak 4 &mdash; Formiramo razlomak i racionalizujemo</div>
    <div class="step-body">
      <p>Imamo:</p>
      <div class="step-math">
        \[
          z = \frac{i}{-1 + i}
        \]
      </div>
      <p>Množimo i brojilac i imenilac konjugatom imenioca \(\overline{-1+i} = -1 - i\):</p>
      <div class="step-math">
        \[
          z = \frac{i \cdot (-1 - i)}{(-1 + i)(-1 - i)}
        \]
      </div>
      <p><strong>Imenilac:</strong> primenjujemo razliku kvadrata \((a+b)(a-b) = a^2 - b^2\):</p>
      <div class="step-math">
        \[
          (-1 + i)(-1 - i) = (-1)^2 - i^2 = 1 - (-1) = 2
        \]
      </div>
      <p><strong>Brojilac:</strong> raspisujemo množenje:</p>
      <div class="step-math">
        \[
          i \cdot (-1 - i) = -i - i^2 = -i - (-1) = -i + 1 = 1 - i
        \]
      </div>
      <div class="checkpoint">&#10004; Imenilac racionalizovan: \(z = \dfrac{1 - i}{2}\)</div>
    </div>
  </div>

  <div class="step">
    <div class="step-badge">Korak 5 &mdash; Zapisujemo u standardnom obliku i čitamo delove</div>
    <div class="step-body">
      <div class="step-math">
        \[
          z = \frac{1 - i}{2} = \frac{1}{2} - \frac{1}{2}\,i
        \]
      </div>
      <p>Očitavamo:</p>
      <div class="step-math">
        \[
          \operatorname{Re}\,z = \frac{1}{2}, \qquad \operatorname{Im}\,z = -\frac{1}{2}
        \]
      </div>
    </div>
  </div>

  <div class="step">
    <div class="step-badge">Korak 6 &mdash; Konačan račun</div>
    <div class="step-body">
      <div class="step-math">
        \[
          \operatorname{Re}\,z + \operatorname{Im}\,z
          = \frac{1}{2} + \left(-\frac{1}{2}\right)
          = 0
        \]
      </div>
      <div class="checkpoint">&#10004; Rezultat je \(0\) &mdash; odgovor D.</div>
    </div>
  </div>
</div>

<!-- KLJUČNA NAPOMENA -->
<div class="card">
  <div class="card-title"><span class="icon">&#128161;</span> Ključna napomena</div>
  <div class="insight-box">
    <strong>Dva uprostišća olakšavaju zadatak.</strong><br>
    Prvo, u brojiocu se članovi \(-1\) i \(+1\) poništavaju, pa ostaje samo \(i\).
    Drugo, nakon racionalizacije, realni i imaginarni deo su jednaki po apsolutnoj vrednosti
    ali suprotnog znaka (\(\tfrac{1}{2}\) i \(-\tfrac{1}{2}\)), pa im je zbir tačno \(0\).
    U ovakvim zadacima uvek proverite da li se članovi poništavaju pre nego što krenete
    sa komplikovanijim računom.
  </div>
</div>

<!-- KONAČNI ODGOVOR -->
<div class="card">
  <div class="card-title"><span class="icon">&#127937;</span> Konačni odgovor</div>
  <div class="final-answer">
    <div class="fa-label">Tačan odgovor je:</div>
    <div class="fa-expr">\(\operatorname{Re}\,z + \operatorname{Im}\,z = 0\)</div>
    <div class="fa-option">Odgovor D</div>
    <div class="verification-note">
      <strong>Verifikacija:</strong>
      Brojilac: \(i^{25} + i^{6} + i^{2024} = i + (-1) + 1 = i\).
      Imenilac: \(i^{9} + i^{6} = i + (-1) = -1 + i\).
      Razlomak: \(\dfrac{i}{-1+i} = \dfrac{i(-1-i)}{(-1)^2 - i^2} = \dfrac{1-i}{2} = \dfrac{1}{2} - \dfrac{1}{2}\,i\).
      Zbir: \(\dfrac{1}{2} + \bigl(-\dfrac{1}{2}\bigr) = 0\).
    </div>
  </div>
</div>

<!-- ČESTE GREŠKE -->
<div class="card">
  <div class="card-title"><span class="icon">&#9888;&#65039;</span> Česte greške</div>
  <div class="pitfall">
    <span class="pitfall-icon">&#128308;</span>
    <div><strong>Pogrešan ostatak za \(i^{2024}\).</strong> Neki učenici pogrešno izračunaju \(2024 \bmod 4 = 2\) pa pišu \(i^{2024} = -1\). Ispravno: \(2024 = 4 \cdot 506\), ostatak je \(0\), dakle \(i^{2024} = 1\).</div>
  </div>
  <div class="pitfall">
    <span class="pitfall-icon">&#128308;</span>
    <div><strong>Brkanje \(\operatorname{Im}\,z\) i imaginarnog dela.</strong> \(\operatorname{Im}\,z\) je <em>koeficijent</em> uz \(i\), tj. realan broj. Ovde je \(\operatorname{Im}\,z = -\tfrac{1}{2}\), a ne \(-\tfrac{1}{2}\,i\).</div>
  </div>
  <div class="pitfall">
    <span class="pitfall-icon">&#128308;</span>
    <div><strong>Zaboravljanje konjugata u imeniocu.</strong> Pri racionalizaciji treba pomnožiti i brojilac i imenilac konjugatom. Ako se pomnoži samo brojilac, razlomak menja vrednost.</div>
  </div>
</div>

<!-- IZAZOV -->
<div class="card">
  <div class="card-title"><span class="icon">&#128640;</span> Dodatni izazov</div>
  <div class="challenge-box">
    <p>Izračunajte \(\operatorname{Re}\,w + \operatorname{Im}\,w\) ako je:</p>
    <p style="margin-top:10px; text-align:center">
      \[
        w = \frac{i^{101} + i^{202} + i^{303}}{i^{404} - i^{505}}
      \]
    </p>
    <p style="margin-top:10px; color: #a78bfa; font-size: 0.93rem;"><em>Uputstvo: primenite isti postupak &mdash; svedite svaki stepen na ostatak po modulu 4, uprositite brojilac i imenilac, racionalizujte.</em></p>
  </div>
</div>

<script>
(function () {
  'use strict';

  var canvas = document.getElementById('complexCanvas');
  if (!canvas) return;
  var ctx = canvas.getContext('2d');

  function draw() {
    var dpr = window.devicePixelRatio || 1;
    var rect = canvas.getBoundingClientRect();
    var W = rect.width;
    var H = 400;

    canvas.width = W * dpr;
    canvas.height = H * dpr;
    canvas.style.height = H + 'px';
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    ctx.clearRect(0, 0, W, H);

    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    var s = Math.min(W / 720, 1);
    var cx = W * 0.35;
    var cy = H / 2;
    var R = 110 * s;

    /* Axes */
    ctx.strokeStyle = '#1e3a5f';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(cx - R - 50 * s, cy);
    ctx.lineTo(cx + R + 50 * s, cy);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(cx, cy - R - 50 * s);
    ctx.lineTo(cx, cy + R + 50 * s);
    ctx.stroke();

    /* Axis labels */
    ctx.font = (13 * s) + 'px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#475569';
    ctx.textAlign = 'center';
    ctx.fillText('Re', cx + R + 42 * s, cy - 8 * s);
    ctx.fillText('Im', cx + 14 * s, cy - R - 36 * s);

    /* Unit circle */
    ctx.beginPath();
    ctx.arc(cx, cy, R, 0, 2 * Math.PI);
    ctx.strokeStyle = 'rgba(96,165,250,0.18)';
    ctx.lineWidth = 1.5;
    ctx.stroke();

    /* Points: i -> top, -1 -> left, -i -> bottom, 1 -> right */
    var pointsPos = [
      { x: cx,      y: cy - R, label: 'i\u00B9 = i',     color: '#60a5fa', mod: 1 },
      { x: cx - R,  y: cy,     label: 'i\u00B2 = \u22121', color: '#a78bfa', mod: 2 },
      { x: cx,      y: cy + R, label: 'i\u00B3 = \u2212i', color: '#f472b6', mod: 3 },
      { x: cx + R,  y: cy,     label: 'i\u2074 = 1',     color: '#4ade80', mod: 0 }
    ];

    /* Draw arcs between consecutive points */
    function drawArc(x1, y1, x2, y2, color) {
      var mx = (x1 + x2) / 2;
      var my = (y1 + y2) / 2;
      var ctrlX = cx + (mx - cx) * 1.35;
      var ctrlY = cy + (my - cy) * 1.35;

      ctx.beginPath();
      ctx.moveTo(x1, y1);
      ctx.quadraticCurveTo(ctrlX, ctrlY, x2, y2);
      ctx.strokeStyle = color;
      ctx.lineWidth = 1.8 * s;
      ctx.setLineDash([5 * s, 3 * s]);
      ctx.stroke();
      ctx.setLineDash([]);

      var dx = x2 - ctrlX;
      var dy = y2 - ctrlY;
      var ang = Math.atan2(dy, dx);
      var headLen = 9 * s;
      ctx.beginPath();
      ctx.moveTo(x2, y2);
      ctx.lineTo(x2 - headLen * Math.cos(ang - 0.4), y2 - headLen * Math.sin(ang - 0.4));
      ctx.moveTo(x2, y2);
      ctx.lineTo(x2 - headLen * Math.cos(ang + 0.4), y2 - headLen * Math.sin(ang + 0.4));
      ctx.strokeStyle = color;
      ctx.lineWidth = 1.8 * s;
      ctx.stroke();
    }

    var arcColors = ['#60a5fa', '#a78bfa', '#f472b6', '#4ade80'];
    for (var k = 0; k < 4; k++) {
      var from = pointsPos[k];
      var to = pointsPos[(k + 1) % 4];
      drawArc(from.x, from.y, to.x, to.y, arcColors[k]);
    }

    /* Draw dots with glow */
    var labelOffsets = [
      { dx: 0,         dy: -24 * s },
      { dx: -14 * s,   dy: -18 * s },
      { dx: 0,         dy: 24 * s  },
      { dx: 14 * s,    dy: -18 * s }
    ];

    for (var idx = 0; idx < 4; idx++) {
      var p = pointsPos[idx];
      var dotR = 8 * s;

      var grad = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, dotR * 2.5);
      grad.addColorStop(0, p.color + 'aa');
      grad.addColorStop(1, p.color + '00');
      ctx.beginPath();
      ctx.arc(p.x, p.y, dotR * 2.5, 0, 2 * Math.PI);
      ctx.fillStyle = grad;
      ctx.fill();

      ctx.beginPath();
      ctx.arc(p.x, p.y, dotR, 0, 2 * Math.PI);
      ctx.fillStyle = p.color;
      ctx.fill();

      var off = labelOffsets[idx];
      ctx.font = 'bold ' + (14 * s) + 'px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = p.color;
      ctx.textAlign = 'center';
      ctx.fillText(p.label, p.x + off.dx, p.y + off.dy);
    }

    /* Right side: computation summary */
    var bx = cx + R + 80 * s;
    var bW = W - bx - 20 * s;
    if (bW < 100 * s) return;
    var bH = 38 * s;
    var bGap = 8 * s;

    var computations = [
      { label: 'Brojilac', steps: ['i\u00B2\u2075 = i', 'i\u2076 = \u22121', 'i\u00B2\u2070\u00B2\u2074 = 1', 'Zbir = i'], color: '#60a5fa' },
      { label: 'Imenilac', steps: ['i\u2079 = i', 'i\u2076 = \u22121', 'Zbir = \u22121 + i'], color: '#a78bfa' },
      { label: 'Rezultat', steps: ['z = i/(\u22121+i)', 'z = \u00BD \u2212 \u00BDi', 'Re + Im = 0'], color: '#4ade80' }
    ];

    var yOff = 24 * s;
    for (var c = 0; c < computations.length; c++) {
      var comp = computations[c];
      ctx.font = 'bold ' + (12 * s) + 'px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = comp.color;
      ctx.textAlign = 'left';
      ctx.fillText(comp.label + ':', bx, yOff);
      yOff += 16 * s;

      for (var j = 0; j < comp.steps.length; j++) {
        var step = comp.steps[j];
        var isLast = (j === comp.steps.length - 1);

        ctx.beginPath();
        if (ctx.roundRect) {
          ctx.roundRect(bx, yOff, bW, bH, 6 * s);
        } else {
          ctx.rect(bx, yOff, bW, bH);
        }
        ctx.fillStyle = isLast ? comp.color + '22' : 'rgba(255,255,255,0.03)';
        ctx.fill();
        ctx.strokeStyle = isLast ? comp.color + '88' : '#2d3a4a';
        ctx.lineWidth = 1.2;
        ctx.stroke();

        ctx.font = (isLast ? 'bold ' : '') + (12 * s) + 'px Segoe UI, system-ui, sans-serif';
        ctx.fillStyle = isLast ? comp.color : '#cbd5e1';
        ctx.textAlign = 'center';
        ctx.fillText(step, bx + bW / 2, yOff + bH / 2 + 4 * s);
        yOff += bH + bGap;
      }
      yOff += 6 * s;
    }
  }

  /* Touch support */
  canvas.addEventListener('touchstart', function (e) { e.preventDefault(); }, { passive: false });
  canvas.addEventListener('touchmove', function (e) { e.preventDefault(); }, { passive: false });

  draw();
  window.addEventListener('resize', draw);
})();
</script>

</body>
</html>