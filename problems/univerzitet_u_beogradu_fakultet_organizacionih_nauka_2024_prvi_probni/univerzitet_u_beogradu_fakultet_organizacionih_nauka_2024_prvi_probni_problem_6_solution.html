<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Logaritamska jednacina — proizvod resenja</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM:
Proizvod svih realnih resenja jednacine x^(log_4 x) = 256 jednak je:
A) 4;  B) 256;  C) 1;  D) 64;  E) 16

STEP-BY-STEP LOGIC:

Uslov: x > 0 (jer log_4 x mora biti definisan).

Logaritmujemo obe strane jednacine sa osnovom 4:
  log_4(x^(log_4 x)) = log_4(256)

Leva strana: log_4 x * log_4 x = (log_4 x)^2
Desna strana: log_4(256) = log_4(4^4) = 4

Dakle: (log_4 x)^2 = 4

Odavde: log_4 x = 2  ili  log_4 x = -2

Slucaj 1: log_4 x = 2  =>  x = 4^2 = 16
Slucaj 2: log_4 x = -2  =>  x = 4^(-2) = 1/16

Provera:
  x = 16:  16^(log_4 16) = 16^2 = 256  OK
  x = 1/16: (1/16)^(log_4(1/16)) = (1/16)^(-2) = 16^2 = 256  OK

Proizvod svih resenja: 16 * (1/16) = 1

TACAN ODGOVOR: C) 1

Alternativni pristup (elegantni):
  Smena t = log_4 x, pa x = 4^t.
  (4^t)^t = 256 = 4^4
  4^(t^2) = 4^4
  t^2 = 4, t = +/-2
  x1 * x2 = 4^(t1) * 4^(t2) = 4^(t1+t2) = 4^(2+(-2)) = 4^0 = 1.

Provera opcija:
A) 4    — netacno
B) 256  — netacno
C) 1    — TACNO
D) 64   — netacno
E) 16   — netacno
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  text-align: center;
}

.subtitle {
  color: #94a3b8;
  text-align: center;
  font-size: 1.05rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.35rem;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.1rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56,189,248,0.06);
  border: 1px solid rgba(56,189,248,0.12);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 100px;
  text-align: center;
  flex: 1;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
  font-weight: 600;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.05rem;
  font-weight: 600;
}

.answer-option {
  transition: border-color 0.2s ease, background 0.2s ease;
  cursor: default;
}

.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 14px 0;
  overflow-x: auto;
}

.plan-card {
  border-left: 4px solid #a78bfa;
}

.theory-card details {
  margin: 15px 0;
}

.theory-card summary {
  cursor: pointer;
  font-size: 1.05rem;
  font-weight: 600;
  color: #a78bfa;
  padding: 8px 0;
  user-select: none;
}

.theory-card ul {
  list-style: none;
  padding: 12px 0;
}

.theory-card li {
  padding: 10px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #e2e8f0;
}

.theory-card li:last-child {
  border-bottom: none;
}

.step {
  display: flex;
  gap: 16px;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 12px;
  border-left: 3px solid transparent;
  transition: border-color 0.2s ease, background 0.2s ease;
}

.step:hover {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}

.step-badge {
  width: 32px;
  height: 32px;
  min-width: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  margin-bottom: 8px;
  color: #e2e8f0;
  font-size: 1.05rem;
}

.step-content p {
  color: #cbd5e1;
  margin-bottom: 8px;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 6px;
}

.checkpoint {
  margin: 20px 0;
  background: rgba(167,139,250,0.06);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
}

.checkpoint summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 0.95rem;
  user-select: none;
}

.checkpoint .answer {
  padding-top: 10px;
  color: #4ade80;
  font-weight: 600;
}

.insight-card {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid rgba(96,165,250,0.25);
  text-align: center;
  padding: 28px;
}

.insight-card .big-formula {
  font-size: 1.4rem;
  margin: 16px 0;
  color: #4ade80;
}

.final-answer-card {
  border: 2px solid #4ade80;
  background: linear-gradient(135deg, rgba(52,211,153,0.08), rgba(74,222,128,0.04));
  text-align: center;
  padding: 28px;
}

.final-answer-card h2 {
  color: #4ade80;
  justify-content: center;
}

.final-answer-value {
  font-size: 1.8rem;
  color: #4ade80;
  font-weight: 800;
  margin: 16px 0;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 20px 0;
}

.option-card {
  padding: 10px 22px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: #1e293b;
  color: #94a3b8;
  font-size: 1rem;
  font-weight: 600;
  transition: all 0.2s ease;
}

.option-card.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.1);
  color: #4ade80;
  box-shadow: 0 0 20px rgba(74,222,128,0.15);
}

.verification-note {
  color: #94a3b8;
  font-size: 0.92rem;
  margin-top: 14px;
  padding-top: 14px;
  border-top: 1px solid #334155;
  text-align: left;
}

.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #cbd5e1;
}

.pitfall-list li:last-child {
  border-bottom: none;
}

.pitfall-label {
  color: #e09468;
  font-weight: 700;
  margin-right: 6px;
}

.challenge-card {
  border-left: 4px solid #f472b6;
}

.challenge-card details {
  margin: 15px 0;
}

.challenge-card summary {
  cursor: pointer;
  color: #f472b6;
  font-weight: 600;
  user-select: none;
}

canvas {
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  touch-action: none;
  width: 100%;
}

.canvas-hint {
  text-align: center;
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

.highlight-blue {
  color: #60a5fa;
  font-weight: 600;
}

.highlight-green {
  color: #4ade80;
  font-weight: 600;
}

.highlight-purple {
  color: #a78bfa;
  font-weight: 600;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step { padding: 12px; flex-direction: column; gap: 8px; }
  .given-grid { gap: 8px; }
  .given-item { min-width: 70px; padding: 10px 12px; }
  .final-answer-value { font-size: 1.4rem; }
  .options-row { gap: 8px; }
  .option-card { padding: 8px 14px; font-size: 0.9rem; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Logaritamska jednacina &mdash; proizvod resenja</h1>
  <p class="subtitle">Algebra &mdash; logaritmi, eksponencijalne jednacine, smena</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>
      Proizvod svih realnih resenja jednacine
      \[
        x^{\,\log_4 x} = 256
      \]
      jednak je:
    </p>

    <div class="given-grid" style="margin-top: 14px;">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(4\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(256\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(1\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(64\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(16\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>
      Uvedemo smenu <span class="highlight-blue">\(t = \log_4 x\)</span>, cime \(x = 4^t\).
      Zamenom u jednacinu dobijamo <span class="highlight-purple">\(4^{t^2} = 4^4\)</span>,
      sto se svodi na kvadratnu jednacinu po \(t\).
      Iz obe vrednosti \(t\) odredjujemo odgovarajuce \(x\),
      a zatim racunamo <span class="highlight-green">proizvod svih resenja</span>.
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card theory-card">
    <details>
      <summary>Kljucne formule i teoreme</summary>
      <ul>
        <li>
          <strong>Definicija logaritma:</strong>
          \[
            \log_a b = c \iff a^c = b, \quad a > 0,\; a \neq 1,\; b > 0
          \]
        </li>
        <li>
          <strong>Logaritam stepena:</strong>
          \[
            \log_a\!\left(b^c\right) = c \cdot \log_a b
          \]
        </li>
        <li>
          <strong>Jednakost stepena iste osnove:</strong>
          Ako je \(a^m = a^n\) za \(a > 0,\; a \neq 1\), onda je \(m = n\).
        </li>
        <li>
          <strong>Korisne vrednosti:</strong>
          \(256 = 4^4\), jer \(4^1 = 4,\; 4^2 = 16,\; 4^3 = 64,\; 4^4 = 256\).
        </li>
        <li>
          <strong>Negativni eksponent:</strong>
          \(a^{-n} = \dfrac{1}{a^n}\), pa \(4^{-2} = \dfrac{1}{16}\).
        </li>
      </ul>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <h2>Vizuelni prikaz &mdash; grafik jednacine</h2>
    <p style="color:#94a3b8; margin-bottom: 14px;">
      Dijagram prikazuje funkciju \(f(x) = x^{\log_4 x}\) i horizontalnu pravu \(y = 256\).
      Preseci odredjuju resenja jednacine.
    </p>
    <canvas id="logCanvas" width="700" height="400"></canvas>
    <p class="canvas-hint">Funkcija f(x) = x^(log_4 x) i prava y = 256 sa presecima u x = 1/16 i x = 16</p>
  </div>

  <!-- Step-by-step Solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Domen jednacine</h3>
        <p>
          Da bi logaritam \(\log_4 x\) bio definisan, mora biti \(x > 0\).
          Takodje, posto je \(x\) osnova stepena, uslov \(x > 0\) je dovoljan.
        </p>
        <p class="note">
          Napomena: za \(x = 1\) imamo \(\log_4 1 = 0\), pa \(1^0 = 1 \neq 256\),
          dakle \(x = 1\) svakako nije resenje.
        </p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Smena \(t = \log_4 x\)</h3>
        <p>
          Neka je \(t = \log_4 x\). Tada je \(x = 4^t\). Zamenjujemo u polaznu jednacinu:
        </p>
        <div class="math-block">
          \[
            \left(4^t\right)^t = 256
          \]
        </div>
        <p>
          Koristimo pravilo stepenovanja \((a^m)^n = a^{m \cdot n}\):
        </p>
        <div class="math-block">
          \[
            4^{t^2} = 256
          \]
        </div>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Svodjenje na istu osnovu</h3>
        <p>
          Zapisujemo desnu stranu kao stepen cetvorke: \(256 = 4^4\).
          Jednacina postaje:
        </p>
        <div class="math-block">
          \[
            4^{t^2} = 4^4
          \]
        </div>
        <p>
          Posto su osnove jednake (\(4 > 0\), \(4 \neq 1\)),
          izjednacavamo eksponente:
        </p>
        <div class="math-block">
          \[
            t^2 = 4
          \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri se: Kakvu jednacinu smo dobili?</summary>
      <div class="answer">
        Kvadratnu jednacinu po \(t = \log_4 x\): \(\;t^2 = 4\), sa resenjima \(t = \pm 2\).
      </div>
    </details>

    <!-- Step 4 -->
    <div class="step">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Resavanje po \(t\) i vracanje na \(x\)</h3>
        <p>
          Iz \(t^2 = 4\) dobijamo dva resenja:
        </p>
        <div class="math-block">
          \[
            t_1 = 2 \quad \Longrightarrow \quad x_1 = 4^2 = 16
          \]
          \[
            t_2 = -2 \quad \Longrightarrow \quad x_2 = 4^{-2} = \frac{1}{16}
          \]
        </div>
        <p>
          Oba resenja su pozitivna, dakle pripadaju domenu.
        </p>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Provera resenja</h3>
        <p><strong>Za \(x_1 = 16\):</strong></p>
        <div class="math-block">
          \[
            16^{\,\log_4 16} = 16^{\,2} = 256 \;\;\checkmark
          \]
        </div>
        <p><strong>Za \(x_2 = \dfrac{1}{16}\):</strong></p>
        <div class="math-block">
          \[
            \left(\frac{1}{16}\right)^{\!\log_4 \frac{1}{16}}
            = \left(\frac{1}{16}\right)^{-2}
            = 16^2
            = 256 \;\;\checkmark
          \]
        </div>
        <p class="note">
          Napomena: \(\log_4 \frac{1}{16} = \log_4 4^{-2} = -2\), pa eksponent je \(-2\),
          a reciprocna vrednost na negativan stepen vraca pozitivan rezultat.
        </p>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Racunamo proizvod svih resenja</h3>
        <div class="math-block">
          \[
            x_1 \cdot x_2 = 16 \cdot \frac{1}{16} = 1
          \]
        </div>
        <p>
          Proizvod resenja je <span class="highlight-green">\(1\)</span>.
        </p>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri se: Koji je konacan odgovor?</summary>
      <div class="answer">
        Proizvod svih realnih resenja je \(1\) &mdash; odgovor je <strong>(C)</strong>.
      </div>
    </details>
  </div>

  <!-- Alternative approach -->
  <div class="card">
    <h2>Elegantni pristup &mdash; bez nalazenja resenja</h2>
    <p>
      Mozemo izracunati proizvod bez eksplicitnog nalazenja resenja.
      Smenom \(t = \log_4 x\) dobili smo \(t^2 = 4\), sa korenima \(t_1 = 2\) i \(t_2 = -2\).
    </p>
    <p>
      Resenja su \(x_k = 4^{t_k}\), pa je njihov proizvod:
    </p>
    <div class="math-block">
      \[
        x_1 \cdot x_2 = 4^{t_1} \cdot 4^{t_2} = 4^{\,t_1 + t_2}
      \]
    </div>
    <p>
      Zbir korena jednacine \(t^2 - 4 = 0\) po Vjetovim formulama je \(t_1 + t_2 = 0\)
      (jer nema linearnog clana), pa:
    </p>
    <div class="math-block">
      \[
        x_1 \cdot x_2 = 4^{\,0} = 1
      \]
    </div>
    <p class="note">
      Ovaj pristup je opsti: za jednacinu \(x^{\log_a x} = c\), gde je smena \(t = \log_a x\)
      daje \(t^2 = \log_a c\), koreni su simetricni oko nule, pa je proizvod resenja uvek \(1\).
    </p>
  </div>

  <!-- Key Insight -->
  <div class="card insight-card">
    <h2 style="justify-content: center;">Kljucno zapazanje</h2>
    <p>
      Smenom \(t = \log_4 x\) jednacina postaje <span class="highlight-blue">\(4^{t^2} = 4^4\)</span>,
      sto daje \(t^2 = 4\).
      Koreni \(t = 2\) i \(t = -2\) su <span class="highlight-purple">suprotnog znaka</span>,
      pa su odgovarajuca resenja \(x = 16\) i \(x = \frac{1}{16}\) medjusobno reciprocna.
      Proizvod reciprocnih brojeva je uvek \(1\).
    </p>
    <div class="big-formula">
      \[
        x_1 \cdot x_2 = 4^{2} \cdot 4^{-2} = 4^{\,0} = 1
      \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer-card">
    <h2>Konacan odgovor</h2>
    <div class="final-answer-value">
      \(x_1 \cdot x_2 = 16 \cdot \dfrac{1}{16} = 1\)
    </div>
    <p style="color:#94a3b8; margin-bottom: 14px;">Tacan odgovor je <strong style="color:#4ade80;">C)</strong></p>
    <div class="options-row">
      <div class="option-card">(A) \(4\)</div>
      <div class="option-card">(B) \(256\)</div>
      <div class="option-card correct">(C) \(1\) &#10003;</div>
      <div class="option-card">(D) \(64\)</div>
      <div class="option-card">(E) \(16\)</div>
    </div>
    <p class="verification-note">
      <strong>Verifikacija:</strong>
      Smena \(t = \log_4 x\), \(x = 4^t\). Jednacina: \(4^{t^2} = 4^4 \Rightarrow t^2 = 4 \Rightarrow t = \pm 2\).
      Resenja: \(x_1 = 4^2 = 16\), \(x_2 = 4^{-2} = \frac{1}{16}\).
      Provera: \(16^2 = 256\) i \(\left(\frac{1}{16}\right)^{-2} = 256\).
      Proizvod: \(16 \cdot \frac{1}{16} = 1\).
    </p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Ceste greske</h2>
    <ul class="pitfall-list">
      <li>
        <span class="pitfall-label">Greska 1:</span>
        Zaboraviti drugo resenje. Jednacina \(t^2 = 4\) ima <em>dva</em> korena: \(t = 2\) i \(t = -2\).
        Ako uzmemo samo \(t = 2\), dobijamo \(x = 16\) i pogresno biramo odgovor (E).
      </li>
      <li>
        <span class="pitfall-label">Greska 2:</span>
        Pogresna primena pravila stepenovanja. Izraz \((4^t)^t\) jednak je \(4^{t^2}\), a ne \(4^{2t}\).
        Eksponenti se <em>mnoze</em>, ne sabiraju.
      </li>
      <li>
        <span class="pitfall-label">Greska 3:</span>
        Mesanje proizvoda i zbira resenja. Zadatak trazi <em>proizvod</em>, ne zbir.
        Zbir resenja je \(16 + \frac{1}{16} = \frac{257}{16}\), sto nije medju ponudjenim odgovorima.
      </li>
      <li>
        <span class="pitfall-label">Greska 4:</span>
        Odbacivanje resenja \(x = \frac{1}{16}\) jer &bdquo;izgleda neobicno&rdquo;.
        Logaritam je definisan za sve pozitivne brojeve, pa je \(\frac{1}{16}\) potpuno validno resenje.
      </li>
    </ul>
  </div>

  <!-- Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>
      Odredite proizvod svih realnih resenja jednacine:
      \[
        x^{\,\log_9 x} = 729
      \]
    </p>
    <details>
      <summary>Nagovestaj</summary>
      <p style="padding-top: 10px; color: #cbd5e1;">
        Primenite isti postupak. Smena \(t = \log_9 x\), \(x = 9^t\):
        \((9^t)^t = 729 = 9^3\), dakle \(t^2 = 3\), pa \(t = \pm\sqrt{3}\).
        Resenja: \(x_{1,2} = 9^{\pm\sqrt{3}}\).
        Proizvod: \(9^{\sqrt{3}} \cdot 9^{-\sqrt{3}} = 9^0 = 1\).
      </p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('logCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');

  function draw() {
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    const W = rect.width;
    const H = 400;

    canvas.width = W * dpr;
    canvas.height = H * dpr;
    canvas.style.height = H + 'px';
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    const s = Math.min(W / 700, 1);

    // Plot area
    const padL = 65 * s;
    const padR = 30 * s;
    const padT = 40 * s;
    const padB = 50 * s;
    const plotW = W - padL - padR;
    const plotH = H - padT - padB;

    // Log scale for x: 0.02 to 40, linear y: 0 to 420
    const xMin = 0.02, xMax = 40;
    const yMin = 0, yMax = 420;

    function toSX(x) {
      return padL + (Math.log(x) - Math.log(xMin)) / (Math.log(xMax) - Math.log(xMin)) * plotW;
    }
    function toSY(y) {
      return padT + plotH - (y - yMin) / (yMax - yMin) * plotH;
    }

    // Horizontal grid
    ctx.lineWidth = 0.8;
    var yTicks = [0, 64, 128, 192, 256, 320, 400];
    for (var yi = 0; yi < yTicks.length; yi++) {
      var yt = yTicks[yi];
      var sy = toSY(yt);
      if (sy < padT || sy > padT + plotH) continue;
      ctx.beginPath();
      ctx.moveTo(padL, sy);
      ctx.lineTo(padL + plotW, sy);
      ctx.strokeStyle = yt === 256 ? 'rgba(74,222,128,0.3)' : '#1e3a5f';
      ctx.lineWidth = yt === 256 ? 1.5 : 0.8;
      ctx.stroke();
    }

    // Vertical grid at special x values
    var xGridVals = [1/16, 0.25, 1, 4, 16];
    for (var xi = 0; xi < xGridVals.length; xi++) {
      var xv = xGridVals[xi];
      var sx = toSX(xv);
      if (sx < padL || sx > padL + plotW) continue;
      ctx.beginPath();
      ctx.moveTo(sx, padT);
      ctx.lineTo(sx, padT + plotH);
      ctx.strokeStyle = (xv === 16 || xv === 1/16) ? 'rgba(96,165,250,0.3)' : '#1e3a5f';
      ctx.lineWidth = (xv === 16 || xv === 1/16) ? 1.5 : 0.8;
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(padL, padT + plotH);
    ctx.lineTo(padL + plotW, padT + plotH);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(padL, padT);
    ctx.lineTo(padL, padT + plotH);
    ctx.stroke();

    // Y-axis labels
    ctx.font = (11 * s) + 'px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    for (var yi2 = 0; yi2 < yTicks.length; yi2++) {
      var yt2 = yTicks[yi2];
      var sy2 = toSY(yt2);
      if (sy2 < padT - 5 || sy2 > padT + plotH + 5) continue;
      ctx.fillStyle = yt2 === 256 ? '#4ade80' : '#64748b';
      ctx.fillText(yt2.toString(), padL - 8 * s, sy2 + 4 * s);
    }

    // X-axis labels
    ctx.textAlign = 'center';
    var xLabels = [{v: 1/16, t: '1/16'}, {v: 0.25, t: '1/4'}, {v: 1, t: '1'}, {v: 4, t: '4'}, {v: 16, t: '16'}];
    for (var xl = 0; xl < xLabels.length; xl++) {
      var item = xLabels[xl];
      var sxl = toSX(item.v);
      if (sxl < padL - 5 || sxl > padL + plotW + 5) continue;
      ctx.fillStyle = (item.v === 16 || item.v === 1/16) ? '#60a5fa' : '#64748b';
      ctx.fillText(item.t, sxl, padT + plotH + 18 * s);
    }

    // Axis name labels
    ctx.font = (13 * s) + 'px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#64748b';
    ctx.textAlign = 'center';
    ctx.fillText('x', padL + plotW / 2, padT + plotH + 40 * s);
    ctx.save();
    ctx.translate(16 * s, padT + plotH / 2);
    ctx.rotate(-Math.PI / 2);
    ctx.fillText('y', 0, 0);
    ctx.restore();

    // Plot f(x) = x^(log_4(x))
    ctx.beginPath();
    var started = false;
    var numPts = Math.max(400, Math.floor(plotW));
    for (var p = 0; p <= numPts; p++) {
      var lx = Math.log(xMin) + (p / numPts) * (Math.log(xMax) - Math.log(xMin));
      var xVal = Math.exp(lx);
      var log4x = Math.log(xVal) / Math.log(4);
      var yVal = Math.pow(xVal, log4x);
      if (!isFinite(yVal) || isNaN(yVal)) { started = false; continue; }
      var sxp = padL + (p / numPts) * plotW;
      var syp = toSY(yVal);
      if (syp < padT - 60 || syp > padT + plotH + 60) { started = false; continue; }
      if (!started) { ctx.moveTo(sxp, syp); started = true; }
      else ctx.lineTo(sxp, syp);
    }
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5 * s;
    ctx.stroke();

    // y = 256 dashed line
    var y256 = toSY(256);
    ctx.beginPath();
    ctx.moveTo(padL, y256);
    ctx.lineTo(padL + plotW, y256);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2 * s;
    ctx.setLineDash([8 * s, 4 * s]);
    ctx.stroke();
    ctx.setLineDash([]);

    // y=256 label
    ctx.font = 'bold ' + (13 * s) + 'px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#4ade80';
    ctx.textAlign = 'right';
    ctx.fillText('y = 256', padL + plotW - 10 * s, y256 - 8 * s);

    // Intersection points
    var solutions = [1/16, 16];
    var solLabels = ['x\u2082 = 1/16', 'x\u2081 = 16'];
    var dotR = 7 * s;

    for (var si = 0; si < solutions.length; si++) {
      var xSol = solutions[si];
      var sxs = toSX(xSol);
      var sys = toSY(256);

      // Glow
      var grad = ctx.createRadialGradient(sxs, sys, 0, sxs, sys, dotR * 3);
      grad.addColorStop(0, '#f472b6aa');
      grad.addColorStop(1, '#f472b600');
      ctx.beginPath();
      ctx.arc(sxs, sys, dotR * 3, 0, 2 * Math.PI);
      ctx.fillStyle = grad;
      ctx.fill();

      // Dot
      ctx.beginPath();
      ctx.arc(sxs, sys, dotR, 0, 2 * Math.PI);
      ctx.fillStyle = '#f472b6';
      ctx.fill();

      // Vertical dashed line to x-axis
      ctx.beginPath();
      ctx.moveTo(sxs, sys);
      ctx.lineTo(sxs, padT + plotH);
      ctx.strokeStyle = 'rgba(244,114,182,0.4)';
      ctx.lineWidth = 1.2;
      ctx.setLineDash([4 * s, 3 * s]);
      ctx.stroke();
      ctx.setLineDash([]);

      // Label
      ctx.font = 'bold ' + (13 * s) + 'px Segoe UI, system-ui, sans-serif';
      ctx.fillStyle = '#f472b6';
      ctx.textAlign = 'center';
      ctx.fillText(solLabels[si], sxs, sys - 16 * s);
    }

    // Function label
    ctx.font = 'bold ' + (14 * s) + 'px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#60a5fa';
    ctx.textAlign = 'left';
    var fLabelX = toSX(5);
    var fLabelY = toSY(Math.pow(5, Math.log(5)/Math.log(4)));
    if (fLabelY > padT + 20 && fLabelY < padT + plotH - 20) {
      ctx.fillText('f(x) = x^(log\u2084 x)', fLabelX + 10 * s, fLabelY - 12 * s);
    }

    // Title
    ctx.font = (12 * s) + 'px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#64748b';
    ctx.textAlign = 'left';
    ctx.fillText('Grafik f(x) = x^(log\u2084 x) i prava y = 256', padL, padT - 14 * s);

    // Annotation box bottom right
    var bx = padL + plotW - 200 * s;
    var by = padT + plotH - 70 * s;
    var bw = 190 * s;
    var bh = 56 * s;
    ctx.fillStyle = 'rgba(15,23,42,0.85)';
    if (ctx.roundRect) {
      ctx.beginPath();
      ctx.roundRect(bx, by, bw, bh, 8 * s);
      ctx.fill();
      ctx.strokeStyle = '#334155';
      ctx.lineWidth = 1;
      ctx.stroke();
    } else {
      ctx.fillRect(bx, by, bw, bh);
    }
    ctx.font = (12 * s) + 'px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#94a3b8';
    ctx.textAlign = 'center';
    ctx.fillText('Resenja: x = 16, x = 1/16', bx + bw / 2, by + 20 * s);
    ctx.font = 'bold ' + (14 * s) + 'px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#4ade80';
    ctx.fillText('Proizvod: 16 \u00B7 1/16 = 1', bx + bw / 2, by + 42 * s);
  }

  draw();
  window.addEventListener('resize', draw);
})();
</script>
</body>
</html>
