<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tangens razlike uglova - trigonometrijski identiteti</title>

<script type="text/info" id="logic-scratchpad">
Problem: Dato je sin(alpha) = 4/5 i pi/2 < alpha < 2*pi.
Naci tg(3*pi/4 - 2*alpha).

KORAK 1: Odrediti kvadrant i ostale trigonometrijske vrednosti.
  sin(alpha) = 4/5 > 0.
  Uslov: pi/2 < alpha < 2*pi.
  sin(alpha) > 0 => alpha mora biti u I ili II kvadrantu.
  Ali alpha > pi/2, pa alpha nije u I kvadrantu (I kvadrant: 0 < alpha < pi/2).
  Dakle alpha je u II kvadrantu: pi/2 < alpha < pi.

  U II kvadrantu: sin > 0, cos < 0.
  cos^2(alpha) = 1 - sin^2(alpha) = 1 - 16/25 = 9/25
  cos(alpha) = -3/5 (negativan jer je II kvadrant)

  tg(alpha) = sin(alpha)/cos(alpha) = (4/5)/(-3/5) = -4/3

KORAK 2: Izracunati tg(2*alpha) koristeci formulu dvostrukog ugla.
  tg(2*alpha) = 2*tg(alpha) / (1 - tg^2(alpha))
  tg^2(alpha) = (-4/3)^2 = 16/9
  1 - tg^2(alpha) = 1 - 16/9 = (9 - 16)/9 = -7/9

  tg(2*alpha) = 2*(-4/3) / (-7/9)
             = (-8/3) / (-7/9)
             = (-8/3) * (-9/7)
             = 72/21
             = 24/7

KORAK 3: Izracunati tg(3*pi/4 - 2*alpha) koristeci formulu za tangens razlike.
  tg(3*pi/4) = tg(pi - pi/4) = -tg(pi/4) = -1

  tg(3*pi/4 - 2*alpha) = (tg(3*pi/4) - tg(2*alpha)) / (1 + tg(3*pi/4)*tg(2*alpha))
  = (-1 - 24/7) / (1 + (-1)*(24/7))
  = (-7/7 - 24/7) / (1 - 24/7)
  = (-31/7) / ((7 - 24)/7)
  = (-31/7) / (-17/7)
  = (-31/7) * (7/(-17))   ... wait, let me be careful:
  = (-31/7) / (-17/7)
  = (-31/7) * (-7/17)
  = (31*7) / (7*17)
  = 31/17

VERIFIKACIJA: Tacan odgovor iz PDF-a je (E) 31/17. Nas rezultat je 31/17. POTVRDJENO.

Dodatna verifikacija:
  alpha u II kvadrantu, sin(alpha)=4/5, cos(alpha)=-3/5
  2*alpha: ako je alpha u (pi/2, pi), tada je 2*alpha u (pi, 2*pi).
  Konkretno, alpha = pi - arcsin(4/5) priblizno pi - 0.9273 = 2.2143 rad
  2*alpha priblizno 4.4286 rad (u III ili IV kvadrantu -- tg > 0 u III, sto odgovara tg(2a) = 24/7 > 0)

  3*pi/4 - 2*alpha priblizno 2.3562 - 4.4286 = -2.0724 rad
  tg(-2.0724) = tg(-2.0724 + pi) = tg(1.0692)
  tg(1.0692) priblizno 1.8235...
  31/17 = 1.8235...  POTVRDJENO.
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
}

.card-title {
  font-size: 1.3rem;
  color: #60a5fa;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.4rem;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 18px;
}

.given-item {
  background: rgba(51, 65, 85, 0.6);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
  transition: all 0.3s ease;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
  font-weight: 600;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.05rem;
}

.answer-option {
  cursor: default;
}

.plan-text {
  color: #a78bfa;
  font-size: 1.05rem;
  font-style: italic;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 8px 0;
  user-select: none;
}

details summary:hover {
  color: #93bbfc;
}

details .detail-content {
  padding: 12px 16px;
  background: rgba(30, 41, 59, 0.7);
  border-left: 3px solid #60a5fa;
  border-radius: 0 8px 8px 0;
  margin-top: 8px;
}

.step {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  align-items: flex-start;
  padding: 8px;
  border-left: 3px solid transparent;
  border-radius: 8px;
  transition: all 0.3s ease;
  cursor: pointer;
}

.step:hover, .step.active {
  border-left-color: #4ade80;
  background: rgba(74, 222, 128, 0.04);
}

.step-badge {
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  font-weight: 700;
  font-size: 0.85rem;
  min-width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-title {
  font-weight: 600;
  color: #f472b6;
  margin-bottom: 6px;
  font-size: 1.05rem;
}

.step-math {
  background: rgba(167, 139, 250, 0.1);
  border: 1px solid rgba(167, 139, 250, 0.25);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 10px 0;
  font-family: 'Courier New', monospace;
  text-align: center;
  font-size: 1.05rem;
}

.highlight-box {
  background: rgba(96, 165, 250, 0.1);
  border: 1px solid rgba(96, 165, 250, 0.3);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 16px 0;
  font-family: 'Courier New', monospace;
  font-size: 1.1rem;
  text-align: center;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.12), rgba(167, 139, 250, 0.12));
  border: 1px solid rgba(167, 139, 250, 0.35);
  border-radius: 16px;
  padding: 24px 28px;
  margin-bottom: 24px;
}

.insight-box .card-title {
  color: #a78bfa;
}

.final-answer-box {
  background: rgba(52, 211, 153, 0.08);
  border: 2px solid #34d399;
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin-bottom: 24px;
}

.final-answer-box .answer-label {
  color: #94a3b8;
  font-size: 1rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 12px;
}

.final-answer-box .answer-value {
  color: #4ade80;
  font-size: 2rem;
  font-weight: 700;
}

.final-answer-box .answer-note {
  color: #34d399;
  font-size: 1.2rem;
  margin-top: 8px;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-top: 20px;
}

.final-option {
  background: rgba(51, 65, 85, 0.6);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 20px;
  font-size: 1rem;
  transition: all 0.3s ease;
}

.final-option.correct {
  background: rgba(52, 211, 153, 0.15);
  border-color: #34d399;
  color: #34d399;
  font-weight: 600;
}

.pitfall {
  display: flex;
  gap: 12px;
  align-items: flex-start;
  margin-bottom: 12px;
}

.pitfall-icon {
  color: #f472b6;
  font-weight: 700;
  font-size: 1.2rem;
  flex-shrink: 0;
}

.challenge-box {
  background: rgba(244, 114, 182, 0.08);
  border: 1px solid rgba(244, 114, 182, 0.3);
  border-radius: 16px;
  padding: 24px 28px;
}

.challenge-box .card-title {
  color: #f472b6;
}

canvas {
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  max-width: 100%;
  touch-action: none;
}

.canvas-wrapper {
  text-align: center;
}

.canvas-caption {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 10px;
  text-align: center;
}

.checkpoint details summary {
  color: #34d399;
  font-size: 0.95rem;
}

.checkpoint details .detail-content {
  border-left-color: #34d399;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 16px;
  padding: 12px 16px;
  background: rgba(51, 65, 85, 0.4);
  border-radius: 8px;
  text-align: left;
}

@media (max-width: 700px) {
  h1 {
    font-size: 1.6rem;
  }
  .card {
    padding: 18px;
  }
  .given-grid {
    flex-direction: column;
  }
  .step {
    flex-direction: column;
    gap: 8px;
  }
  .step-badge {
    align-self: flex-start;
  }
  .final-answer-box .answer-value {
    font-size: 1.5rem;
  }
  .final-options {
    flex-direction: column;
    align-items: center;
  }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Tangens razlike uglova</h1>
  <p class="subtitle">Trigonometrija — formule dvostrukog ugla i tangens razlike</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <div class="card-title"><span class="icon">&#128203;</span> Tekst zadatka</div>
    <p style="font-size: 1.15rem; line-height: 1.8;">
      Ako je \( \sin\alpha = \dfrac{4}{5} \) i \( \dfrac{\pi}{2} < \alpha < 2\pi \), onda \( \operatorname{tg}\!\left(\dfrac{3\pi}{4} - 2\alpha\right) \) iznosi:
    </p>

    <div class="given-grid" style="margin-top: 14px; margin-bottom: 10px;">
      <div class="given-item">
        <div class="label">Dato</div>
        <div class="value">\( \sin\alpha = \frac{4}{5} \)</div>
      </div>
      <div class="given-item">
        <div class="label">Opseg</div>
        <div class="value">\( \frac{\pi}{2} < \alpha < 2\pi \)</div>
      </div>
      <div class="given-item">
        <div class="label">Trazi se</div>
        <div class="value">\( \operatorname{tg}\!\left(\frac{3\pi}{4} - 2\alpha\right) \)</div>
      </div>
    </div>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\( -\dfrac{17}{31} \)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\( -\dfrac{31}{17} \)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\( \dfrac{17}{31} \)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\( 1 \)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\( \dfrac{31}{17} \)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127919;</span> Plan resavanja</div>
    <p class="plan-text">
      Prvo odredjujemo kvadrant ugla \( \alpha \) i izracunavamo \( \cos\alpha \) i \( \operatorname{tg}\alpha \). Zatim primenjujemo formulu dvostrukog ugla da nadjemo \( \operatorname{tg}(2\alpha) \), i konacno koristimo formulu za tangens razlike da izracunamo trazeni izraz.
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>&#128208; Kljucne formule i teoreme</summary>
      <div class="detail-content">
        <p>Formule koje su nam potrebne u ovom zadatku:</p>
        <ul style="margin: 12px 0 0 20px; list-style: none;">
          <li style="margin-bottom: 12px;">
            <strong>Osnovni trigonometrijski identitet:</strong>
            \[ \sin^2\alpha + \cos^2\alpha = 1 \]
          </li>
          <li style="margin-bottom: 12px;">
            <strong>Formula dvostrukog ugla za tangens:</strong>
            \[ \operatorname{tg}(2\alpha) = \frac{2\operatorname{tg}\alpha}{1 - \operatorname{tg}^2\alpha} \]
          </li>
          <li style="margin-bottom: 12px;">
            <strong>Formula za tangens razlike:</strong>
            \[ \operatorname{tg}(A - B) = \frac{\operatorname{tg}A - \operatorname{tg}B}{1 + \operatorname{tg}A \cdot \operatorname{tg}B} \]
          </li>
          <li style="margin-bottom: 12px;">
            <strong>Poznata vrednost:</strong>
            \[ \operatorname{tg}\frac{3\pi}{4} = -1 \]
          </li>
        </ul>
      </div>
    </details>
  </div>

  <!-- Visual Aid: Unit Circle Canvas -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128202;</span> Jedinicna kruznica — ugao \( \alpha \) u II kvadrantu</div>
    <div class="canvas-wrapper">
      <canvas id="unitCircle" width="600" height="500"></canvas>
    </div>
    <p class="canvas-caption">Jedinicna kruznica sa uglom \( \alpha \) u drugom kvadrantu. Prevucite tacku da vidite kako se menjaju sin i cos.</p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128290;</span> Resenje korak po korak</div>

    <!-- Step 1 -->
    <div class="step" id="step1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <div class="step-title">Odredjivanje kvadranta ugla \( \alpha \)</div>
        <p>Dato je da \( \sin\alpha = \frac{4}{5} > 0 \) i da \( \frac{\pi}{2} < \alpha < 2\pi \).</p>
        <p>Sinus je pozitivan u I i II kvadrantu. Posto je \( \alpha > \frac{\pi}{2} \), ugao ne moze biti u I kvadrantu \(\left(0,\, \frac{\pi}{2}\right)\).</p>
        <p>Dakle, \( \alpha \) je u <strong>II kvadrantu</strong>: \( \frac{\pi}{2} < \alpha < \pi \).</p>
        <div class="step-math">
          \[ \alpha \in \left(\frac{\pi}{2},\, \pi\right) \quad \Rightarrow \quad \sin\alpha > 0, \quad \cos\alpha < 0 \]
        </div>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step" id="step2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <div class="step-title">Izracunavanje \( \cos\alpha \)</div>
        <p>Koristimo osnovni trigonometrijski identitet:</p>
        <div class="step-math">
          \[ \sin^2\alpha + \cos^2\alpha = 1 \]
        </div>
        <p>Zamenjujemo poznatu vrednost sinusa:</p>
        <div class="step-math">
          \[ \left(\frac{4}{5}\right)^2 + \cos^2\alpha = 1 \]
        </div>
        <div class="step-math">
          \[ \frac{16}{25} + \cos^2\alpha = 1 \]
        </div>
        <div class="step-math">
          \[ \cos^2\alpha = 1 - \frac{16}{25} = \frac{9}{25} \]
        </div>
        <p>Posto je \( \alpha \) u II kvadrantu, kosinus je negativan:</p>
        <div class="step-math">
          \[ \cos\alpha = -\frac{3}{5} \]
        </div>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step" id="step3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <div class="step-title">Izracunavanje \( \operatorname{tg}\alpha \)</div>
        <p>Tangens je kolicnik sinusa i kosinusa:</p>
        <div class="step-math">
          \[ \operatorname{tg}\alpha = \frac{\sin\alpha}{\cos\alpha} = \frac{\frac{4}{5}}{-\frac{3}{5}} = -\frac{4}{3} \]
        </div>
        <p style="color: #94a3b8; font-size: 0.95rem;">Tangens je negativan u II kvadrantu, sto je u skladu sa rezultatom.</p>

        <div class="checkpoint">
          <details>
            <summary>Proveri sebe: Koliko iznosi tg(alpha) ako je sin(alpha) = 4/5 u II kvadrantu?</summary>
            <div class="detail-content">
              \( \operatorname{tg}\alpha = -\frac{4}{3} \). U II kvadrantu sin je pozitivan a cos negativan, pa je tangens negativan.
            </div>
          </details>
        </div>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step" id="step4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <div class="step-title">Izracunavanje \( \operatorname{tg}(2\alpha) \) — formula dvostrukog ugla</div>
        <p>Primenjujemo formulu dvostrukog ugla za tangens:</p>
        <div class="step-math">
          \[ \operatorname{tg}(2\alpha) = \frac{2\operatorname{tg}\alpha}{1 - \operatorname{tg}^2\alpha} \]
        </div>
        <p>Prvo izracunamo \( \operatorname{tg}^2\alpha \):</p>
        <div class="step-math">
          \[ \operatorname{tg}^2\alpha = \left(-\frac{4}{3}\right)^2 = \frac{16}{9} \]
        </div>
        <p>Zatim imenilac:</p>
        <div class="step-math">
          \[ 1 - \operatorname{tg}^2\alpha = 1 - \frac{16}{9} = \frac{9 - 16}{9} = -\frac{7}{9} \]
        </div>
        <p>I brojilac:</p>
        <div class="step-math">
          \[ 2\operatorname{tg}\alpha = 2 \cdot \left(-\frac{4}{3}\right) = -\frac{8}{3} \]
        </div>
        <p>Konacno:</p>
        <div class="step-math">
          \[ \operatorname{tg}(2\alpha) = \frac{-\frac{8}{3}}{-\frac{7}{9}} = \left(-\frac{8}{3}\right) \cdot \left(-\frac{9}{7}\right) = \frac{72}{21} = \frac{24}{7} \]
        </div>

        <div class="checkpoint">
          <details>
            <summary>Proveri sebe: Zasto je tg(2*alpha) pozitivan?</summary>
            <div class="detail-content">
              Posto je \( \alpha \in \left(\frac{\pi}{2},\, \pi\right) \), sledi \( 2\alpha \in (\pi,\, 2\pi) \). Konkretnije, \( 2\alpha \) je u III kvadrantu (jer je \( \alpha \) blizu \( \frac{\pi}{2} + \arcsin\frac{4}{5} \approx 2{,}21 \) rad, pa je \( 2\alpha \approx 4{,}43 \) rad, sto je izmedju \( \pi \) i \( \frac{3\pi}{2} \)). U III kvadrantu tangens je pozitivan.
            </div>
          </details>
        </div>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step" id="step5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <div class="step-title">Vrednost \( \operatorname{tg}\frac{3\pi}{4} \)</div>
        <p>Ugao \( \frac{3\pi}{4} = \pi - \frac{\pi}{4} \) nalazi se u II kvadrantu. Tangens je negativan u II kvadrantu:</p>
        <div class="step-math">
          \[ \operatorname{tg}\frac{3\pi}{4} = -\operatorname{tg}\frac{\pi}{4} = -1 \]
        </div>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step" id="step6">
      <div class="step-badge">6</div>
      <div class="step-content">
        <div class="step-title">Primena formule za tangens razlike</div>
        <p>Sada primenjujemo formulu \( \operatorname{tg}(A - B) = \frac{\operatorname{tg}A - \operatorname{tg}B}{1 + \operatorname{tg}A \cdot \operatorname{tg}B} \) sa \( A = \frac{3\pi}{4} \) i \( B = 2\alpha \):</p>
        <div class="step-math">
          \[ \operatorname{tg}\!\left(\frac{3\pi}{4} - 2\alpha\right) = \frac{\operatorname{tg}\frac{3\pi}{4} - \operatorname{tg}(2\alpha)}{1 + \operatorname{tg}\frac{3\pi}{4} \cdot \operatorname{tg}(2\alpha)} \]
        </div>
        <p>Zamenjujemo poznate vrednosti:</p>
        <div class="step-math">
          \[ = \frac{-1 - \frac{24}{7}}{1 + (-1) \cdot \frac{24}{7}} \]
        </div>
        <p>Sredimo brojilac:</p>
        <div class="step-math">
          \[ -1 - \frac{24}{7} = -\frac{7}{7} - \frac{24}{7} = -\frac{31}{7} \]
        </div>
        <p>Sredimo imenilac:</p>
        <div class="step-math">
          \[ 1 - \frac{24}{7} = \frac{7}{7} - \frac{24}{7} = -\frac{17}{7} \]
        </div>
        <p>Konacno delimo:</p>
        <div class="step-math">
          \[ \operatorname{tg}\!\left(\frac{3\pi}{4} - 2\alpha\right) = \frac{-\frac{31}{7}}{-\frac{17}{7}} = \frac{31}{17} \]
        </div>

        <div class="checkpoint">
          <details>
            <summary>Proveri sebe: Zasto se minus iz brojioca i imenioca skrate?</summary>
            <div class="detail-content">
              I brojilac i imenilac su negativni: \( -\frac{31}{7} \) i \( -\frac{17}{7} \). Kada delimo dva negativna broja, rezultat je pozitivan: \( \frac{-31/7}{-17/7} = \frac{31}{17} \). Takodje, faktor \( \frac{1}{7} \) se skratio iz brojioca i imenioca.
            </div>
          </details>
        </div>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <div class="card-title"><span class="icon">&#128161;</span> Kljucni uvid</div>
    <p>Ceo zadatak se svodi na <strong>lanac transformacija</strong>: od osnovnih trigonometrijskih vrednosti, preko formule dvostrukog ugla, do formule za tangens razlike. Kljucno je pravilno odrediti <strong>znak kosinusa</strong> na osnovu kvadranta. Greska u znaku kosinusa propagira se kroz sve naredne korake i daje pogresan rezultat.</p>
    <div class="step-math" style="margin-top: 16px;">
      \[ \sin\alpha = \frac{4}{5} \;\xrightarrow{\text{II kv.}}\; \cos\alpha = -\frac{3}{5} \;\xrightarrow{\;}\; \operatorname{tg}\alpha = -\frac{4}{3} \;\xrightarrow{\text{2}\alpha}\; \operatorname{tg}(2\alpha) = \frac{24}{7} \;\xrightarrow{\text{razlika}}\; \frac{31}{17} \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <div class="answer-label">Konacan odgovor</div>
    <div class="answer-value">\( \operatorname{tg}\!\left(\dfrac{3\pi}{4} - 2\alpha\right) = \dfrac{31}{17} \)</div>
    <div class="answer-note">Tacan odgovor je (E)</div>
    <div class="final-options">
      <div class="final-option">(A) \( -\frac{17}{31} \)</div>
      <div class="final-option">(B) \( -\frac{31}{17} \)</div>
      <div class="final-option">(C) \( \frac{17}{31} \)</div>
      <div class="final-option">(D) \( 1 \)</div>
      <div class="final-option correct">(E) \( \frac{31}{17} \)</div>
    </div>
    <div class="verification-note">
      <strong>Verifikacija:</strong> Numerickom proverom, \( \alpha \approx 2{,}214 \) rad, \( \frac{3\pi}{4} - 2\alpha \approx -2{,}072 \) rad, i \( \operatorname{tg}(-2{,}072) \approx 1{,}824 \). Racunski, \( \frac{31}{17} \approx 1{,}824 \). Rezultati se poklapaju.
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9888;&#65039;</span> Ceste greske</div>
    <div class="pitfall">
      <span class="pitfall-icon">&#10007;</span>
      <p><strong>Pogresan znak kosinusa:</strong> Ako se uzme \( \cos\alpha = +\frac{3}{5} \) umesto \( -\frac{3}{5} \), onda je \( \operatorname{tg}\alpha = \frac{4}{3} \) i ceo lanac daje pogresan rezultat. Uvek najpre odredite kvadrant!</p>
    </div>
    <div class="pitfall">
      <span class="pitfall-icon">&#10007;</span>
      <p><strong>Greska u aritmetici razlomaka:</strong> Prilikom deljenja \( \frac{-8/3}{-7/9} \), cesta greska je da se zaboravi da se deljenje razlomkom pretvara u mnozenje reciprocnom vrednoscu. Rezultat mora biti \( \frac{24}{7} \), a ne \( \frac{8}{7} \) ili \( \frac{56}{27} \).</p>
    </div>
  </div>

  <!-- Optional Challenge -->
  <div class="challenge-box">
    <div class="card-title"><span class="icon">&#127942;</span> Dodatni izazov</div>
    <p>Izracunaj \( \sin(2\alpha) \) i \( \cos(2\alpha) \) koristeci iste podatke, pa proveri rezultat za \( \operatorname{tg}(2\alpha) \) kao kolicnik \( \frac{\sin(2\alpha)}{\cos(2\alpha)} \).</p>
    <details>
      <summary>Pogledaj nagoveštaj</summary>
      <div class="detail-content">
        <p>Koristi formule dvostrukog ugla: \( \sin(2\alpha) = 2\sin\alpha\cos\alpha \) i \( \cos(2\alpha) = \cos^2\alpha - \sin^2\alpha \).</p>
        <p style="margin-top: 8px;">Trebalo bi da dobijes: \( \sin(2\alpha) = 2 \cdot \frac{4}{5} \cdot \left(-\frac{3}{5}\right) = -\frac{24}{25} \) i \( \cos(2\alpha) = \frac{9}{25} - \frac{16}{25} = -\frac{7}{25} \).</p>
        <p style="margin-top: 8px;">Proveris: \( \operatorname{tg}(2\alpha) = \frac{-24/25}{-7/25} = \frac{24}{7} \). Potvrdjeno!</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('unitCircle');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  const centerX = W / 2;
  const centerY = H / 2 + 10;
  const R = 180;

  // Initial angle: alpha in Q2 with sin(alpha) = 4/5
  // sin(alpha) = 4/5 => alpha = pi - arcsin(4/5)
  let alpha = Math.PI - Math.asin(4 / 5);
  let isDragging = false;

  function draw() {
    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Grid
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (let i = -1; i <= 1; i += 0.5) {
      if (i === 0) continue;
      // Horizontal
      ctx.beginPath();
      ctx.moveTo(centerX - R - 40, centerY - i * R);
      ctx.lineTo(centerX + R + 40, centerY - i * R);
      ctx.stroke();
      // Vertical
      ctx.beginPath();
      ctx.moveTo(centerX + i * R, centerY - R - 40);
      ctx.lineTo(centerX + i * R, centerY + R + 40);
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(centerX - R - 40, centerY);
    ctx.lineTo(centerX + R + 40, centerY);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(centerX, centerY - R - 40);
    ctx.lineTo(centerX, centerY + R + 40);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('1', centerX + R, centerY + 18);
    ctx.fillText('-1', centerX - R, centerY + 18);
    ctx.fillText('1', centerX + 14, centerY - R + 4);
    ctx.fillText('-1', centerX + 16, centerY + R + 4);

    // Unit circle
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.arc(centerX, centerY, R, 0, 2 * Math.PI);
    ctx.stroke();

    // Quadrant labels
    ctx.fillStyle = 'rgba(148, 163, 184, 0.3)';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.fillText('I', centerX + R / 2, centerY - R / 2);
    ctx.fillText('II', centerX - R / 2, centerY - R / 2);
    ctx.fillText('III', centerX - R / 2, centerY + R / 2 + 10);
    ctx.fillText('IV', centerX + R / 2, centerY + R / 2 + 10);

    // Highlight Q2
    ctx.fillStyle = 'rgba(96, 165, 250, 0.06)';
    ctx.beginPath();
    ctx.moveTo(centerX, centerY);
    ctx.arc(centerX, centerY, R, Math.PI, 1.5 * Math.PI);
    ctx.closePath();
    ctx.fill();

    // Compute point on unit circle
    const cosA = Math.cos(alpha);
    const sinA = Math.sin(alpha);
    const px = centerX + cosA * R;
    const py = centerY - sinA * R;

    // Arc for angle alpha
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.arc(centerX, centerY, 40, 0, -alpha, true);
    ctx.stroke();

    // Alpha label
    const labelAngle = -alpha / 2;
    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('\u03B1', centerX + 52 * Math.cos(labelAngle), centerY + 52 * Math.sin(labelAngle) + 4);

    // Radius line to point
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(centerX, centerY);
    ctx.lineTo(px, py);
    ctx.stroke();

    // Dashed projection lines
    ctx.setLineDash([5, 5]);
    // Vertical (cos projection)
    ctx.strokeStyle = '#34d399';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(px, py);
    ctx.lineTo(px, centerY);
    ctx.stroke();
    // Horizontal (sin projection)
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(px, py);
    ctx.lineTo(centerX, py);
    ctx.stroke();
    ctx.setLineDash([]);

    // cos line on x-axis (thick)
    ctx.strokeStyle = '#34d399';
    ctx.lineWidth = 4;
    ctx.beginPath();
    ctx.moveTo(centerX, centerY);
    ctx.lineTo(px, centerY);
    ctx.stroke();

    // sin line on y-axis (thick)
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 4;
    ctx.beginPath();
    ctx.moveTo(centerX, centerY);
    ctx.lineTo(centerX, py);
    ctx.stroke();

    // Point on circle
    ctx.beginPath();
    ctx.arc(px, py, 8, 0, 2 * Math.PI);
    ctx.fillStyle = '#60a5fa';
    ctx.fill();
    ctx.strokeStyle = '#e2e8f0';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Glow for point
    const glow = ctx.createRadialGradient(px, py, 2, px, py, 20);
    glow.addColorStop(0, 'rgba(96, 165, 250, 0.4)');
    glow.addColorStop(1, 'rgba(96, 165, 250, 0)');
    ctx.fillStyle = glow;
    ctx.beginPath();
    ctx.arc(px, py, 20, 0, 2 * Math.PI);
    ctx.fill();

    // Labels for values
    const sinVal = sinA.toFixed(3).replace('.', ',');
    const cosVal = cosA.toFixed(3).replace('.', ',');
    const tgVal = sinA / cosA;
    const tgStr = isFinite(tgVal) ? tgVal.toFixed(3).replace('.', ',') : '\u221E';

    // sin label
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('sin\u03B1 = ' + sinVal, centerX + 8, (centerY + py) / 2 + 4);

    // cos label
    ctx.fillStyle = '#34d399';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('cos\u03B1 = ' + cosVal, (centerX + px) / 2, centerY + 18);

    // Point label
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    const labelOffX = cosA > 0 ? 14 : -14;
    const labelOffY = sinA > 0 ? -14 : 20;
    ctx.textAlign = cosA > 0 ? 'left' : 'right';
    ctx.fillText('P(' + cosVal + '; ' + sinVal + ')', px + labelOffX, py + labelOffY);

    // Info box at bottom
    ctx.fillStyle = 'rgba(30, 41, 59, 0.9)';
    const boxY = H - 60;
    const boxW = 460;
    const boxX = (W - boxW) / 2;
    ctx.beginPath();
    ctx.roundRect(boxX, boxY, boxW, 48, 10);
    ctx.fill();
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.roundRect(boxX, boxY, boxW, 48, 10);
    ctx.stroke();

    ctx.textAlign = 'center';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#f472b6';
    ctx.fillText('sin\u03B1 = ' + sinVal, boxX + boxW * 0.17, boxY + 29);
    ctx.fillStyle = '#34d399';
    ctx.fillText('cos\u03B1 = ' + cosVal, boxX + boxW * 0.5, boxY + 29);
    ctx.fillStyle = '#a78bfa';
    ctx.fillText('tg\u03B1 = ' + tgStr, boxX + boxW * 0.83, boxY + 29);

    // Drag hint
    ctx.fillStyle = '#64748b';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Prevucite tacku po kruznici', W / 2, H - 8);
  }

  function getAngleFromEvent(e) {
    const rect = canvas.getBoundingClientRect();
    const scaleX = W / rect.width;
    const scaleY = H / rect.height;
    let clientX, clientY;
    if (e.touches) {
      clientX = e.touches[0].clientX;
      clientY = e.touches[0].clientY;
    } else {
      clientX = e.clientX;
      clientY = e.clientY;
    }
    const mx = (clientX - rect.left) * scaleX - centerX;
    const my = -((clientY - rect.top) * scaleY - centerY);
    return Math.atan2(my, mx);
  }

  function isNearPoint(e) {
    const rect = canvas.getBoundingClientRect();
    const scaleX = W / rect.width;
    const scaleY = H / rect.height;
    let clientX, clientY;
    if (e.touches) {
      clientX = e.touches[0].clientX;
      clientY = e.touches[0].clientY;
    } else {
      clientX = e.clientX;
      clientY = e.clientY;
    }
    const mx = (clientX - rect.left) * scaleX;
    const my = (clientY - rect.top) * scaleY;
    const px = centerX + Math.cos(alpha) * R;
    const py = centerY - Math.sin(alpha) * R;
    const dist = Math.sqrt((mx - px) ** 2 + (my - py) ** 2);
    return dist < 25;
  }

  canvas.addEventListener('mousedown', function(e) {
    if (isNearPoint(e)) {
      isDragging = true;
    }
  });

  canvas.addEventListener('mousemove', function(e) {
    if (isDragging) {
      alpha = getAngleFromEvent(e);
      if (alpha < 0) alpha += 2 * Math.PI;
      draw();
    }
    // Change cursor
    if (isNearPoint(e)) {
      canvas.style.cursor = 'grab';
    } else {
      canvas.style.cursor = 'default';
    }
  });

  canvas.addEventListener('mouseup', function() {
    isDragging = false;
  });

  canvas.addEventListener('mouseleave', function() {
    isDragging = false;
  });

  // Touch support
  canvas.addEventListener('touchstart', function(e) {
    if (isNearPoint(e)) {
      isDragging = true;
      e.preventDefault();
    }
  });

  canvas.addEventListener('touchmove', function(e) {
    if (isDragging) {
      alpha = getAngleFromEvent(e);
      if (alpha < 0) alpha += 2 * Math.PI;
      draw();
      e.preventDefault();
    }
  });

  canvas.addEventListener('touchend', function() {
    isDragging = false;
  });

  // Step click highlighting
  document.querySelectorAll('.step').forEach(function(step) {
    step.addEventListener('click', function() {
      document.querySelectorAll('.step').forEach(function(s) {
        s.classList.remove('active');
      });
      step.classList.toggle('active');
    });
  });

  draw();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Tangens razlike uglova sa formulom dvostrukog ugla",
  "subject": "math",
  "unit": "trigonometry",
  "topic_tags": ["trigonometrija", "tangens razlike", "formula dvostrukog ugla", "jedinicna kruznica", "trigonometrijski identiteti"]
}
BRAINSPARK_META-->