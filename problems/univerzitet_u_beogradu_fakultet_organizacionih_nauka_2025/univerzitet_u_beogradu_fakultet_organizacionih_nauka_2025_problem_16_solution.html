<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zapremina kupe upisane u loptu</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
  Problem: Cone inscribed in a sphere of radius R. The lateral (mantle) surface
  area is twice the base area. Find the volume of the cone.

  Variables:
    R = radius of sphere
    r = radius of cone base
    h = height of cone
    l = slant height of cone

  Step 1: Lateral surface condition
    Lateral surface = pi * r * l
    Base area = pi * r^2
    Condition: pi * r * l = 2 * pi * r^2
    Dividing by pi * r (r > 0):
    l = 2r

  Step 2: Cone inscribed in sphere geometry
    Place the sphere centered at origin O. The apex of the cone is at the top
    of the sphere at height R from center, i.e., at (0, R).
    The base of the cone is a circle at some height below the apex.

    If h is the height of the cone, the base plane is at height (R - h) from
    the center of the sphere.
    The base circle lies on the sphere, so points on the base edge satisfy:
      r^2 + (R - h)^2 = R^2
      r^2 = R^2 - (R - h)^2 = 2Rh - h^2

  Step 3: Slant height relation
    l^2 = r^2 + h^2
    l^2 = (2Rh - h^2) + h^2 = 2Rh

  Step 4: Apply the condition l = 2r
    l^2 = 4r^2
    2Rh = 4(2Rh - h^2)
    2Rh = 8Rh - 4h^2
    4h^2 = 6Rh
    Since h > 0, divide by h:
    4h = 6R
    h = 3R/2

  Step 5: Find r
    r^2 = 2Rh - h^2 = 2R * (3R/2) - (3R/2)^2 = 3R^2 - 9R^2/4 = 3R^2/4
    r = R*sqrt(3)/2

  Step 6: Check l = 2r
    l^2 = 2Rh = 2R * 3R/2 = 3R^2
    l = R*sqrt(3)
    2r = 2 * R*sqrt(3)/2 = R*sqrt(3)
    l = 2r confirmed!

  Step 7: Volume of cone
    V = (1/3) * pi * r^2 * h
    V = (1/3) * pi * (3R^2/4) * (3R/2)
    V = (1/3) * pi * (9R^3/8)
    V = (9R^3 * pi) / 24
    V = (3R^3 * pi) / 8
    V = (3/8) * R^3 * pi

  Answer: (E) 3R^3*pi/8

  Verification:
    h = 3R/2 > R, so the base plane is below the center of sphere.
    Distance from center to base plane = h - R = R/2.
    r^2 + (R/2)^2 = 3R^2/4 + R^2/4 = R^2. Confirmed: base edge lies on sphere.
</script>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card-title {
  font-size: 1.3rem;
  color: #60a5fa;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.4rem;
}

.problem-text {
  font-size: 1.15rem;
  line-height: 1.8;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 18px;
}

.given-item {
  background: rgba(51, 65, 85, 0.6);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 18px;
  text-align: center;
  min-width: 80px;
}

.given-item .label {
  font-size: 0.85rem;
  color: #94a3b8;
  margin-bottom: 4px;
}

.given-item .value {
  font-size: 1.1rem;
  color: #e2e8f0;
  font-weight: 600;
}

.highlight-box {
  background: rgba(96, 165, 250, 0.1);
  border: 1px solid rgba(96, 165, 250, 0.3);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 16px 0;
  font-family: 'Courier New', monospace;
  font-size: 1.1rem;
  text-align: center;
}

.plan-card {
  border-left: 4px solid #a78bfa;
}

.theory-card details {
  margin: 15px 0;
}

.theory-card summary {
  cursor: pointer;
  font-size: 1.15rem;
  color: #a78bfa;
  padding: 8px 0;
  user-select: none;
}

.theory-card summary:hover {
  color: #c4b5fd;
}

.theory-content {
  padding: 16px 0 8px 0;
  line-height: 1.9;
}

.theory-content ul {
  list-style: none;
  padding-left: 0;
}

.theory-content li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51, 65, 85, 0.5);
}

.theory-content li:last-child {
  border-bottom: none;
}

.step-container {
  margin-bottom: 20px;
  padding: 16px 20px;
  border-radius: 12px;
  border-left: 4px solid transparent;
  transition: all 0.3s ease;
  cursor: pointer;
}

.step-container:hover,
.step-container.active {
  background: rgba(51, 65, 85, 0.3);
  border-left-color: #4ade80;
}

.step-header {
  display: flex;
  align-items: center;
  gap: 14px;
  margin-bottom: 10px;
}

.step-badge {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.85rem;
  font-weight: 700;
  flex-shrink: 0;
}

.step-title {
  font-size: 1.15rem;
  color: #e2e8f0;
  font-weight: 600;
}

.step-body {
  padding-left: 42px;
}

.step-body p {
  margin-bottom: 10px;
  color: #cbd5e1;
}

.math-block {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 10px;
  padding: 14px 20px;
  margin: 12px 0;
  text-align: center;
  font-size: 1.1rem;
}

.note {
  color: #94a3b8;
  font-size: 0.95rem;
  font-style: italic;
  margin-top: 8px;
}

.checkpoint {
  margin: 15px 0;
}

.checkpoint details {
  background: rgba(167, 139, 250, 0.08);
  border: 1px solid rgba(167, 139, 250, 0.2);
  border-radius: 10px;
  padding: 12px 16px;
}

.checkpoint summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  user-select: none;
}

.checkpoint .answer {
  padding-top: 10px;
  color: #4ade80;
}

.insight-card {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.15), rgba(167, 139, 250, 0.15));
  border: 1px solid rgba(167, 139, 250, 0.3);
  text-align: center;
}

.insight-card .big-formula {
  font-size: 1.3rem;
  margin: 16px 0;
  color: #4ade80;
}

.final-answer-card {
  border: 2px solid #4ade80;
  text-align: center;
}

.final-answer-text {
  font-size: 1.8rem;
  color: #4ade80;
  font-weight: 700;
  margin: 16px 0;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 20px 0;
}

.final-option {
  background: rgba(51, 65, 85, 0.6);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 24px;
  font-size: 1rem;
  transition: all 0.3s;
}

.final-option.correct {
  background: rgba(52, 211, 153, 0.15);
  border-color: #4ade80;
  color: #4ade80;
  font-weight: 700;
}

.verification {
  background: rgba(52, 211, 153, 0.08);
  border: 1px solid rgba(52, 211, 153, 0.2);
  border-radius: 10px;
  padding: 14px 20px;
  margin-top: 16px;
  text-align: left;
}

.verification-title {
  color: #34d399;
  font-weight: 700;
  margin-bottom: 6px;
}

.pitfall-card {
  border-left: 4px solid #e09468;
}

.pitfall-card .pitfall-title {
  color: #e09468;
}

.pitfall-card ul {
  list-style: disc;
  padding-left: 24px;
  color: #cbd5e1;
}

.pitfall-card li {
  margin-bottom: 8px;
}

.challenge-card details {
  margin: 15px 0;
}

.challenge-card summary {
  cursor: pointer;
  color: #f472b6;
  font-size: 1.05rem;
  user-select: none;
}

canvas {
  touch-action: none;
  display: block;
  margin: 0 auto;
  max-width: 100%;
  border-radius: 12px;
}

.canvas-hint {
  text-align: center;
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 8px;
}

.case-box {
  background: rgba(51, 65, 85, 0.4);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 14px 20px;
  margin: 10px 0;
}

.case-title {
  color: #60a5fa;
  font-weight: 600;
  margin-bottom: 6px;
}

.slider-container {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-top: 12px;
  justify-content: center;
  flex-wrap: wrap;
}

.slider-container label {
  color: #94a3b8;
  font-size: 0.9rem;
}

.slider-container input[type="range"] {
  width: 200px;
  accent-color: #60a5fa;
}

.slider-value {
  color: #60a5fa;
  font-weight: 600;
  min-width: 50px;
}

@media (max-width: 700px) {
  h1 {
    font-size: 1.6rem;
  }
  .card {
    padding: 18px;
  }
  .given-grid {
    gap: 8px;
  }
  .given-item {
    padding: 8px 12px;
    min-width: 60px;
  }
  .step-body {
    padding-left: 0;
  }
  .final-answer-text {
    font-size: 1.4rem;
  }
  .slider-container input[type="range"] {
    width: 150px;
  }
}
</style>
</head>
<body>
<div class="container">

  <!-- a. Title & Subtitle -->
  <h1>Zapremina kupe upisane u loptu</h1>
  <p class="subtitle">Stereometrija &mdash; kupa upisana u sferu, povrsine i zapremine</p>

  <!-- b. Problem Statement -->
  <div class="card problem-statement">
    <h2 class="card-title"><span class="icon">&#128220;</span> Postavka zadatka</h2>
    <div class="problem-text">
      <p>Ako je u loptu poluprecnika \( R \) upisana kupa cija je povrsina omotaca dva puta veca od povrsine osnove, onda je zapremina te kupe jednaka:</p>
    </div>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(\dfrac{1}{2}R^3\pi\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(\dfrac{2\sqrt{3}}{9}R^3\pi\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(\dfrac{\sqrt{3}}{4}R^3\pi\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(\dfrac{1}{3}R^3\pi\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(\dfrac{3}{8}R^3\pi\)</div>
      </div>
    </div>
  </div>

  <!-- c. Plan -->
  <div class="card plan-card">
    <h2 class="card-title"><span class="icon">&#128204;</span> Plan resavanja</h2>
    <p>Postavicemo koordinatni sistem sa centrom sfere u koordinatnom pocetku. Koristicemo uslov da je omotac kupe dvostruko veci od osnove (sto daje vezu \( l = 2r \)) i cinjenicu da obod osnove kupe lezi na sferi. Iz ova dva uslova odredujemo visinu i poluprecnik osnove kupe, a zatim racunamo zapreminu.</p>
  </div>

  <!-- d. Theory Refresher -->
  <div class="card theory-card">
    <details>
      <summary>&#128208; Podsetnik iz teorije &mdash; formule za kupu i sferu</summary>
      <div class="theory-content">
        <ul>
          <li><strong>Povrsina omotaca kupe:</strong> \( P_{\text{omotac}} = \pi r l \), gde je \( r \) poluprecnik osnove, a \( l \) izvodnica (bocna strana).</li>
          <li><strong>Povrsina osnove kupe:</strong> \( P_{\text{osnova}} = \pi r^2 \)</li>
          <li><strong>Zapremina kupe:</strong> \( V = \dfrac{1}{3} \pi r^2 h \)</li>
          <li><strong>Pitagorina teorema za kupu:</strong> \( l^2 = r^2 + h^2 \), gde je \( h \) visina kupe.</li>
          <li><strong>Jednacina sfere</strong> (centar u koordinatnom pocetku): \( x^2 + y^2 + z^2 = R^2 \)</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- e. Visual Aid / Interactive Diagram -->
  <div class="card">
    <h2 class="card-title"><span class="icon">&#128202;</span> Vizuelni prikaz</h2>
    <canvas id="mainCanvas" width="700" height="520"></canvas>
    <p class="canvas-hint">Pomerajte klizac da vidite kako se menja kupa upisana u sferu</p>
    <div class="slider-container">
      <label for="hSlider">Visina kupe \( h \):</label>
      <input type="range" id="hSlider" min="10" max="195" value="150">
      <span class="slider-value" id="hValue">h = 1,50R</span>
    </div>
  </div>

  <!-- f. Step-by-Step Solution -->
  <div class="card">
    <h2 class="card-title"><span class="icon">&#128221;</span> Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container">
      <div class="step-header">
        <div class="step-badge">1</div>
        <h3 class="step-title">Oznake i uslov zadatka</h3>
      </div>
      <div class="step-body">
        <p>Neka je \( r \) poluprecnik osnove kupe, \( h \) njena visina, a \( l \) izvodnica (bocna strana). Vrh kupe je u temenu sfere.</p>
        <p>Uslov zadatka glasi: povrsina omotaca je dva puta veca od povrsine osnove:</p>
        <div class="math-block">
          \[ \pi r l = 2 \pi r^2 \]
        </div>
        <p>Posto je \( r > 0 \), mozemo podeliti obe strane sa \( \pi r \):</p>
        <div class="math-block">
          \[ l = 2r \]
        </div>
        <p class="note">Izvodnica kupe je dva puta duza od poluprecnika osnove.</p>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <div class="checkpoint">
      <details>
        <summary>&#9989; Proveri se: Zasto smemo da delimo sa \(\pi r\)?</summary>
        <div class="answer">Posto posmatramo pravu kupu, poluprecnik osnove je strogo pozitivan: \( r > 0 \). Takodje, \( \pi > 0 \). Dakle, \( \pi r > 0 \) i deljenje je dozvoljeno.</div>
      </details>
    </div>

    <!-- Step 2 -->
    <div class="step-container">
      <div class="step-header">
        <div class="step-badge">2</div>
        <h3 class="step-title">Geometrija kupe u sferi</h3>
      </div>
      <div class="step-body">
        <p>Postavimo koordinatni sistem tako da centar sfere bude u tacki \( O \). Vrh kupe je u gornjoj tacki sfere, na visini \( R \) iznad centra.</p>
        <p>Osnova kupe je krug na visini \( R - h \) od centra sfere (mereno niz osu kupe). Obod osnove lezi na sferi, pa vazi:</p>
        <div class="math-block">
          \[ r^2 + (R - h)^2 = R^2 \]
        </div>
        <p>Raspisujemo:</p>
        <div class="math-block">
          \[ r^2 = R^2 - (R - h)^2 = R^2 - R^2 + 2Rh - h^2 \]
        </div>
        <div class="math-block">
          \[ r^2 = 2Rh - h^2 \]
        </div>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step-container">
      <div class="step-header">
        <div class="step-badge">3</div>
        <h3 class="step-title">Veza izvodnice i sfere</h3>
      </div>
      <div class="step-body">
        <p>Koristimo Pitagorinu teoremu za kupu:</p>
        <div class="math-block">
          \[ l^2 = r^2 + h^2 \]
        </div>
        <p>Uvrstimo \( r^2 = 2Rh - h^2 \) iz koraka 2:</p>
        <div class="math-block">
          \[ l^2 = (2Rh - h^2) + h^2 = 2Rh \]
        </div>
        <p class="note">Kvadrat izvodnice zavisi samo od \( R \) i \( h \): \( l^2 = 2Rh \).</p>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <div class="checkpoint">
      <details>
        <summary>&#9989; Proveri se: Zasto obod osnove lezi na sferi?</summary>
        <div class="answer">Kupa je <em>upisana</em> u sferu, sto znaci da joj vrh i ceo obod osnove dodiruju sferu. Svaka tacka na obodu je na rastojanju \( R \) od centra sfere. Ako je centar sfere u \( O \) na osi kupe, a tacka na obodu ima koordinate \( (r, R-h) \), onda je \( r^2 + (R-h)^2 = R^2 \).</div>
      </details>
    </div>

    <!-- Step 4 -->
    <div class="step-container">
      <div class="step-header">
        <div class="step-badge">4</div>
        <h3 class="step-title">Primena uslova \( l = 2r \) &mdash; odredjivanje visine</h3>
      </div>
      <div class="step-body">
        <p>Iz koraka 1 znamo da je \( l = 2r \), pa je:</p>
        <div class="math-block">
          \[ l^2 = 4r^2 \]
        </div>
        <p>Izjednacavamo sa izrazom iz koraka 3:</p>
        <div class="math-block">
          \[ 2Rh = 4r^2 \]
        </div>
        <p>Uvrstimo \( r^2 = 2Rh - h^2 \) iz koraka 2:</p>
        <div class="math-block">
          \[ 2Rh = 4(2Rh - h^2) \]
        </div>
        <p>Raspisujemo desnu stranu:</p>
        <div class="math-block">
          \[ 2Rh = 8Rh - 4h^2 \]
        </div>
        <p>Prebacujemo sve na jednu stranu:</p>
        <div class="math-block">
          \[ 4h^2 = 6Rh \]
        </div>
        <p>Posto je \( h > 0 \), mozemo podeliti sa \( h \):</p>
        <div class="math-block">
          \[ 4h = 6R \quad \Longrightarrow \quad h = \frac{3R}{2} \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <div class="checkpoint">
      <details>
        <summary>&#9989; Proveri se: Da li je moguce da je \( h > R \)?</summary>
        <div class="answer">Da! Visina kupe moze biti veca od poluprecnika sfere. Kupa tada prolazi ispod centra sfere. Uslov je samo da je \( h \leq 2R \) (precnik sfere je \( 2R \)). U nasem slucaju \( h = \frac{3R}{2} = 1{,}5R < 2R \), sto je validno.</div>
      </details>
    </div>

    <!-- Step 5 -->
    <div class="step-container">
      <div class="step-header">
        <div class="step-badge">5</div>
        <h3 class="step-title">Odredjivanje poluprecnika osnove</h3>
      </div>
      <div class="step-body">
        <p>Uvrstimo \( h = \frac{3R}{2} \) u izraz za \( r^2 \):</p>
        <div class="math-block">
          \[ r^2 = 2R \cdot \frac{3R}{2} - \left(\frac{3R}{2}\right)^2 = 3R^2 - \frac{9R^2}{4} \]
        </div>
        <p>Svodimo na zajednicki imenilac:</p>
        <div class="math-block">
          \[ r^2 = \frac{12R^2}{4} - \frac{9R^2}{4} = \frac{3R^2}{4} \]
        </div>
        <p class="note">Dakle, \( r = \dfrac{R\sqrt{3}}{2} \).</p>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step-container">
      <div class="step-header">
        <div class="step-badge">6</div>
        <h3 class="step-title">Verifikacija uslova \( l = 2r \)</h3>
      </div>
      <div class="step-body">
        <p>Pre racunanja zapremine, proverimo da nasi rezultati zadovoljavaju polazni uslov:</p>
        <div class="case-box">
          <div class="case-title">Izvodnica:</div>
          <p>\( l^2 = 2Rh = 2R \cdot \dfrac{3R}{2} = 3R^2 \), dakle \( l = R\sqrt{3} \)</p>
        </div>
        <div class="case-box">
          <div class="case-title">Dvostruki poluprecnik:</div>
          <p>\( 2r = 2 \cdot \dfrac{R\sqrt{3}}{2} = R\sqrt{3} \)</p>
        </div>
        <p class="note">Zaista, \( l = 2r = R\sqrt{3} \). Uslov je ispunjen!</p>
      </div>
    </div>

    <!-- Step 7 -->
    <div class="step-container">
      <div class="step-header">
        <div class="step-badge">7</div>
        <h3 class="step-title">Racunanje zapremine kupe</h3>
      </div>
      <div class="step-body">
        <p>Koristimo formulu za zapreminu kupe:</p>
        <div class="math-block">
          \[ V = \frac{1}{3} \pi r^2 h \]
        </div>
        <p>Uvrstimo \( r^2 = \frac{3R^2}{4} \) i \( h = \frac{3R}{2} \):</p>
        <div class="math-block">
          \[ V = \frac{1}{3} \cdot \pi \cdot \frac{3R^2}{4} \cdot \frac{3R}{2} \]
        </div>
        <p>Mnozimo brojioce i imenioce:</p>
        <div class="math-block">
          \[ V = \frac{1}{3} \cdot \frac{9R^3 \pi}{8} = \frac{9R^3 \pi}{24} = \frac{3R^3 \pi}{8} \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 4 -->
    <div class="checkpoint">
      <details>
        <summary>&#9989; Proveri se: Da li je zapremina kupe manja od zapremine sfere?</summary>
        <div class="answer">Za \( R = 2 \): zapremina kupe je \( V = \frac{3}{8} \cdot 8\pi = 3\pi \approx 9{,}42 \). Zapremina sfere je \( \frac{4}{3}\pi \cdot 8 = \frac{32\pi}{3} \approx 33{,}5 \). Kupa zauzima oko 28% zapremine sfere, sto je razumno za kupu upisanu u sferu.</div>
      </details>
    </div>
  </div>

  <!-- g. Key Insight -->
  <div class="card insight-card">
    <h2 class="card-title"><span class="icon">&#128161;</span> Kljucni uvid</h2>
    <p>Uslov o povrsinama (\( l = 2r \)) fiksira oblik kupe (odnos dimenzija), dok uslov sfere fiksira velicinu. Kombinovanjem ova dva uslova dobijamo jedinstvenu kupu sa:</p>
    <div class="big-formula">
      \[ h = \frac{3R}{2}, \quad r = \frac{R\sqrt{3}}{2}, \quad V = \boxed{\frac{3}{8}R^3\pi} \]
    </div>
  </div>

  <!-- h. Final Answer -->
  <div class="card final-answer-card">
    <h2 class="card-title" style="justify-content: center;"><span class="icon">&#127919;</span> Konacan odgovor</h2>
    <div class="final-answer-text">\(\displaystyle V = \frac{3}{8} R^3 \pi\)</div>
    <div class="final-options">
      <div class="final-option">(A) \(\frac{1}{2}R^3\pi\)</div>
      <div class="final-option">(B) \(\frac{2\sqrt{3}}{9}R^3\pi\)</div>
      <div class="final-option">(C) \(\frac{\sqrt{3}}{4}R^3\pi\)</div>
      <div class="final-option">(D) \(\frac{1}{3}R^3\pi\)</div>
      <div class="final-option correct">(E) \(\frac{3}{8}R^3\pi\)</div>
    </div>
    <div class="verification">
      <div class="verification-title">&#9989; Verifikacija</div>
      <p>Proveravamo da obod osnove lezi na sferi: rastojanje od centra sfere do ravni osnove je \( h - R = \frac{3R}{2} - R = \frac{R}{2} \). Tada je \( r^2 + \left(\frac{R}{2}\right)^2 = \frac{3R^2}{4} + \frac{R^2}{4} = R^2 \). Tacke oboda zaista leze na sferi.</p>
    </div>
  </div>

  <!-- i. Common Pitfalls -->
  <div class="card pitfall-card">
    <h2 class="card-title"><span class="icon">&#9888;&#65039;</span> <span class="pitfall-title">Ceste greske</span></h2>
    <ul>
      <li><strong>Pogresno postavljanje geometrije sfere:</strong> Centar sfere NIJE u centru osnove kupe! Centar sfere je na osi kupe, ali na rastojanju \( R \) od vrha, sto znaci na visini \( h - R \) iznad osnove. Ako se koristi pogresna relacija (npr. \( r^2 + h^2 = R^2 \) umesto \( r^2 + (R-h)^2 = R^2 \)), dobija se pogresan rezultat.</li>
      <li><strong>Mesanje izvodnice i visine:</strong> Izvodnica \( l \) je bocna strana kupe (kosa linija), a visina \( h \) je normalna na osnovu. Uslov \( l = 2r \) se odnosi na izvodnicu, ne na visinu. Vazi \( l^2 = r^2 + h^2 \), ne \( l = h \).</li>
      <li><strong>Nedozvoljeno deljenje sa nulom:</strong> Pri pojednostavljivanju izraza, uvek proveriti da je velicina kojom delimo strogo pozitivna (\( r > 0 \), \( h > 0 \)).</li>
    </ul>
  </div>

  <!-- j. Optional Challenge -->
  <div class="card challenge-card">
    <h2 class="card-title"><span class="icon">&#127775;</span> Dodatni izazov</h2>
    <p>Za koju visinu \( h \) kupa upisana u sferu poluprecnika \( R \) ima <em>maksimalnu</em> zapreminu? Kolika je ta maksimalna zapremina?</p>
    <details>
      <summary>&#128161; Pogledaj nagove≈°taj</summary>
      <div style="padding-top: 10px; color: #cbd5e1;">
        Zapremina kupe u funkciji od visine je \( V(h) = \frac{\pi}{3}(2Rh - h^2) \cdot h = \frac{\pi}{3}(2Rh^2 - h^3) \). Izjednaci izvod sa nulom: \( V'(h) = \frac{\pi}{3}(4Rh - 3h^2) = 0 \), odakle \( h = \frac{4R}{3} \). Maksimalna zapremina iznosi \( V_{\max} = \frac{32}{81}R^3\pi \).
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('mainCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  const slider = document.getElementById('hSlider');
  const hValueSpan = document.getElementById('hValue');

  // R in pixel units for drawing
  const R_px = 160;
  // Center of sphere on canvas
  const cx = W / 2;
  const cy = H / 2 + 20;

  function draw(hRatio) {
    const h_R = hRatio;
    const r2_R2 = 2 * h_R - h_R * h_R;
    if (r2_R2 <= 0) return;
    const r_R = Math.sqrt(r2_R2);

    const h_px = h_R * R_px;
    const r_px = r_R * R_px;

    const l_R = Math.sqrt(2 * h_R);

    const apexY = cy - R_px;
    const baseY = cy - R_px + h_px;

    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Draw sphere (circle)
    ctx.beginPath();
    ctx.arc(cx, cy, R_px, 0, 2 * Math.PI);
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Fill sphere lightly
    ctx.beginPath();
    ctx.arc(cx, cy, R_px, 0, 2 * Math.PI);
    ctx.fillStyle = 'rgba(96, 165, 250, 0.05)';
    ctx.fill();

    // Draw center of sphere
    ctx.beginPath();
    ctx.arc(cx, cy, 4, 0, 2 * Math.PI);
    ctx.fillStyle = '#60a5fa';
    ctx.fill();

    // Label O (center)
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('O', cx + 8, cy - 6);

    // Draw radius to right side of sphere
    ctx.setLineDash([6, 4]);
    ctx.strokeStyle = '#94a3b8';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(cx, cy);
    ctx.lineTo(cx + R_px, cy);
    ctx.stroke();
    ctx.setLineDash([]);

    // Label R on that radius
    ctx.fillStyle = '#94a3b8';
    ctx.font = '14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('R', cx + R_px / 2, cy - 8);

    // Draw cone
    // Apex
    ctx.beginPath();
    ctx.arc(cx, apexY, 5, 0, 2 * Math.PI);
    ctx.fillStyle = '#f472b6';
    ctx.fill();

    // Cone sides
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(cx, apexY);
    ctx.lineTo(cx - r_px, baseY);
    ctx.stroke();

    ctx.beginPath();
    ctx.moveTo(cx, apexY);
    ctx.lineTo(cx + r_px, baseY);
    ctx.stroke();

    // Base of cone (ellipse)
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.ellipse(cx, baseY, r_px, r_px * 0.25, 0, 0, 2 * Math.PI);
    ctx.stroke();

    // Fill cone lightly
    ctx.fillStyle = 'rgba(167, 139, 250, 0.08)';
    ctx.beginPath();
    ctx.moveTo(cx, apexY);
    ctx.lineTo(cx - r_px, baseY);
    ctx.lineTo(cx + r_px, baseY);
    ctx.closePath();
    ctx.fill();

    // Height line (dashed)
    ctx.setLineDash([5, 4]);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(cx, apexY);
    ctx.lineTo(cx, baseY);
    ctx.stroke();
    ctx.setLineDash([]);

    // Label h
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('h', cx + 6, (apexY + baseY) / 2);

    // Radius line on base
    ctx.setLineDash([5, 4]);
    ctx.strokeStyle = '#34d399';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(cx, baseY);
    ctx.lineTo(cx + r_px, baseY);
    ctx.stroke();
    ctx.setLineDash([]);

    // Label r
    ctx.fillStyle = '#34d399';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('r', cx + r_px / 2, baseY + 18);

    // Label l (slant height)
    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    var midSlantX = (cx + cx + r_px) / 2;
    var midSlantY = (apexY + baseY) / 2;
    ctx.fillText('l', midSlantX + 8, midSlantY - 4);

    // Apex label
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('vrh', cx, apexY - 12);

    // Draw R from center to base edge
    ctx.setLineDash([4, 3]);
    ctx.strokeStyle = 'rgba(96, 165, 250, 0.5)';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(cx, cy);
    ctx.lineTo(cx + r_px, baseY);
    ctx.stroke();
    ctx.setLineDash([]);

    // Small label R on that line
    var mrx = (cx + cx + r_px) / 2;
    var mry = (cy + baseY) / 2;
    ctx.fillStyle = 'rgba(96, 165, 250, 0.7)';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('R', mrx + 6, mry + 4);

    // Mark the base edge point on sphere
    ctx.beginPath();
    ctx.arc(cx + r_px, baseY, 4, 0, 2 * Math.PI);
    ctx.fillStyle = '#60a5fa';
    ctx.fill();

    // Display current values
    ctx.fillStyle = '#e2e8f0';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    var infoX = 16;
    var infoY = 28;
    ctx.fillText('h/R = ' + h_R.toFixed(2).replace('.', ','), infoX, infoY);
    infoY += 20;
    ctx.fillText('r/R = ' + r_R.toFixed(3).replace('.', ','), infoX, infoY);
    infoY += 20;
    ctx.fillText('l/R = ' + l_R.toFixed(3).replace('.', ','), infoX, infoY);
    infoY += 20;

    // Check condition l = 2r
    var ratio = l_R / r_R;
    var isConditionMet = Math.abs(ratio - 2) < 0.05;
    if (isConditionMet) {
      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
      ctx.fillText('l/r = ' + ratio.toFixed(2).replace('.', ',') + '  (= 2, uslov ispunjen!)', infoX, infoY);
    } else {
      ctx.fillStyle = '#94a3b8';
      ctx.fillText('l/r = ' + ratio.toFixed(2).replace('.', ',') + '  (treba biti 2)', infoX, infoY);
    }
    infoY += 20;

    // Volume
    var vol = (1/3) * r2_R2 * h_R;
    ctx.fillStyle = '#e2e8f0';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.fillText('V/(R\u00B3\u03C0) = ' + vol.toFixed(4).replace('.', ','), infoX, infoY);

    if (isConditionMet) {
      infoY += 24;
      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
      ctx.fillText('V = 3R\u00B3\u03C0/8 = 0,375R\u00B3\u03C0', infoX, infoY);
    }
  }

  function updateFromSlider() {
    var val = parseInt(slider.value, 10);
    var hRatio = val / 100;
    hValueSpan.textContent = 'h = ' + hRatio.toFixed(2).replace('.', ',') + 'R';
    draw(hRatio);
  }

  slider.addEventListener('input', updateFromSlider);

  // Step click highlighting
  var steps = document.querySelectorAll('.step-container');
  steps.forEach(function(step) {
    step.addEventListener('click', function() {
      steps.forEach(function(s) { s.classList.remove('active'); });
      step.classList.add('active');
    });
  });

  // Initial draw at h = 3R/2
  updateFromSlider();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Zapremina kupe upisane u loptu",
  "subject": "math",
  "unit": "geometry",
  "topic_tags": ["stereometrija", "kupa", "sfera", "zapremina", "povrsina omotaca", "upisana tela"]
}
BRAINSPARK_META-->