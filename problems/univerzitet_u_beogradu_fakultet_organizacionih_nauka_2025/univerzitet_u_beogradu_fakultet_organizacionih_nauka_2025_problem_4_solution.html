<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stepen kompleksnog broja - Realni deo z = (1 - (1-i)/(1+i))^2025</title>
<script>
MathJax = {
  tex: { inlineMath: [['\\(', '\\)'], ['$', '$']], displayMath: [['\\[', '\\]']] },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<script type="text/info" id="logic-scratchpad">
Problem: Ako je z = (1 - (1-i)/(1+i))^2025, i² = -1, onda je Re(z) jednako:
(A) 2^2023  (B) 2^1012  (C) 2^2024  (D) 2^2013  (E) 2^2025

Step 1: Simplify (1-i)/(1+i)
Multiply numerator and denominator by conjugate of denominator (1-i):
  (1-i)/(1+i) = (1-i)(1-i) / ((1+i)(1-i))
  = (1-i)² / (1² - i²)
  = (1 - 2i + i²) / (1 - (-1))
  = (1 - 2i - 1) / 2
  = -2i / 2
  = -i

Step 2: Compute 1 - (1-i)/(1+i)
  1 - (-i) = 1 + i

Step 3: So z = (1+i)^2025

Step 4: Convert 1+i to polar/exponential form
  |1+i| = sqrt(1² + 1²) = sqrt(2)
  arg(1+i) = pi/4  (first quadrant, equal real and imaginary parts)
  So 1+i = sqrt(2) * e^(i*pi/4)

Step 5: Raise to power 2025
  z = (sqrt(2))^2025 * e^(i*2025*pi/4)
    = 2^(2025/2) * e^(i*2025*pi/4)

Step 6: Simplify the angle
  2025*pi/4: compute 2025 mod 8 = 1 (since 2025 = 8*253 + 1)
  So 2025*pi/4 = 253*2*pi + pi/4
  e^(i*2025*pi/4) = e^(i*pi/4) = cos(pi/4) + i*sin(pi/4) = sqrt(2)/2 + i*sqrt(2)/2

Step 7: Compute Re(z)
  Re(z) = 2^(2025/2) * sqrt(2)/2
         = 2^(2025/2) * 2^(1/2) * 2^(-1)
         = 2^(2025/2 + 1/2 - 1)
         = 2^(2026/2 - 1)
         = 2^(1013 - 1)
         = 2^1012

ALTERNATIVE: Re(z) = 2^(2025/2) * 2^(-1/2) = 2^((2025-1)/2) = 2^(2024/2) = 2^1012

Answer: (B) 2^1012

Verification with small exponents:
  (1+i)^1 = 1+i, Re = 1 = 2^0. Formula: 2^(1/2)*cos(pi/4) = sqrt(2)*sqrt(2)/2 = 1. OK.
  (1+i)^2 = 2i, Re = 0. Formula: 2^1*cos(pi/2) = 2*0 = 0. OK.
  (1+i)^4 = -4, Re = -4. Formula: 2^2*cos(pi) = 4*(-1) = -4. OK.
</script>
<style>
  *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    background: #0f172a;
    color: #e2e8f0;
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    line-height: 1.7;
    padding: 20px;
    max-width: 860px;
    margin: 0 auto;
  }
  h1 {
    font-size: 2rem;
    font-weight: 800;
    background: linear-gradient(135deg, #60a5fa, #a78bfa);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 4px;
    line-height: 1.3;
  }
  .subtitle {
    color: #94a3b8;
    font-size: 1.05rem;
    margin-bottom: 28px;
  }
  .card {
    background: #1e293b;
    border: 1px solid #334155;
    border-radius: 14px;
    padding: 24px 28px;
    margin-bottom: 22px;
  }
  .card-title {
    font-size: 1.2rem;
    font-weight: 700;
    margin-bottom: 14px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .card-title .icon {
    font-size: 1.3rem;
  }
  .problem-box {
    background: #172033;
    border-left: 4px solid #60a5fa;
    padding: 18px 22px;
    border-radius: 0 10px 10px 0;
    font-size: 1.08rem;
    margin-bottom: 10px;
  }
  .option-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 10px;
    margin-top: 16px;
  }
  .option {
    background: #0f172a;
    border: 1px solid #334155;
    border-radius: 10px;
    padding: 10px 16px;
    font-size: 1rem;
    transition: all 0.2s;
  }
  .option.correct {
    border-color: #34d399;
    background: rgba(52, 211, 153, 0.1);
    box-shadow: 0 0 12px rgba(52, 211, 153, 0.15);
  }
  .plan-list {
    list-style: none;
    counter-reset: plan;
  }
  .plan-list li {
    counter-increment: plan;
    padding: 6px 0 6px 36px;
    position: relative;
  }
  .plan-list li::before {
    content: counter(plan);
    position: absolute;
    left: 0;
    top: 6px;
    width: 26px;
    height: 26px;
    background: linear-gradient(135deg, #60a5fa, #a78bfa);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.82rem;
    font-weight: 700;
    color: #0f172a;
  }
  details {
    background: #172033;
    border: 1px solid #334155;
    border-radius: 10px;
    padding: 14px 20px;
    margin-bottom: 10px;
  }
  details summary {
    cursor: pointer;
    font-weight: 600;
    color: #a78bfa;
    list-style: none;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  details summary::before {
    content: '>';
    display: inline-block;
    transition: transform 0.2s;
    font-family: monospace;
    font-size: 1.1rem;
  }
  details[open] summary::before {
    transform: rotate(90deg);
  }
  details .inner {
    margin-top: 14px;
    padding-top: 14px;
    border-top: 1px solid #334155;
  }
  .step {
    border-left: 3px solid #334155;
    padding: 14px 0 14px 22px;
    margin-left: 12px;
    position: relative;
    margin-bottom: 4px;
  }
  .step::before {
    content: '';
    position: absolute;
    left: -7px;
    top: 18px;
    width: 12px;
    height: 12px;
    background: #60a5fa;
    border-radius: 50%;
    border: 2px solid #0f172a;
  }
  .step:last-child { border-left-color: transparent; }
  .step-label {
    font-weight: 700;
    color: #60a5fa;
    font-size: 1rem;
    margin-bottom: 6px;
  }
  .checkpoint {
    background: rgba(167, 139, 250, 0.1);
    border: 1px dashed #a78bfa;
    border-radius: 10px;
    padding: 12px 18px;
    margin: 12px 0 4px;
    font-size: 0.95rem;
    color: #a78bfa;
  }
  .checkpoint strong { color: #c4b5fd; }
  .final-answer {
    background: linear-gradient(135deg, rgba(52, 211, 153, 0.12), rgba(74, 222, 128, 0.08));
    border: 2px solid #34d399;
    border-radius: 14px;
    padding: 26px 30px;
    text-align: center;
  }
  .final-answer .label {
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: #34d399;
    font-weight: 700;
    margin-bottom: 10px;
  }
  .final-answer .value {
    font-size: 1.7rem;
    font-weight: 800;
    color: #4ade80;
  }
  .insight-box {
    background: rgba(96, 165, 250, 0.08);
    border: 1px solid rgba(96, 165, 250, 0.3);
    border-radius: 12px;
    padding: 18px 22px;
  }
  .insight-box .label {
    font-weight: 700;
    color: #60a5fa;
    margin-bottom: 6px;
    font-size: 1.05rem;
  }
  .pitfall {
    background: rgba(244, 114, 182, 0.08);
    border-left: 4px solid #f472b6;
    border-radius: 0 10px 10px 0;
    padding: 14px 20px;
    margin-bottom: 10px;
  }
  .pitfall strong { color: #f472b6; }
  .challenge-box {
    background: rgba(167, 139, 250, 0.06);
    border: 1px solid rgba(167, 139, 250, 0.25);
    border-radius: 12px;
    padding: 18px 22px;
  }
  .challenge-box .label {
    font-weight: 700;
    color: #a78bfa;
    margin-bottom: 6px;
  }
  canvas {
    display: block;
    margin: 0 auto;
    border-radius: 10px;
    background: #0f172a;
    max-width: 100%;
    touch-action: none;
  }
  .muted { color: #94a3b8; }
  .blue { color: #60a5fa; }
  .green { color: #34d399; }
  .purple { color: #a78bfa; }
  .pink { color: #f472b6; }
  @media (max-width: 600px) {
    body { padding: 12px; }
    h1 { font-size: 1.5rem; }
    .card { padding: 18px 16px; }
    .option-grid { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<h1>Stepen kompleksnog broja i realni deo</h1>
<p class="subtitle">Kompleksni brojevi &mdash; Trigonometrijski oblik i De Moavrov obrazac</p>

<!-- Problem Statement -->
<div class="card problem-statement">
  <div class="card-title"><span class="icon">&#x1F4CB;</span> Zadatak</div>
  <div class="problem-box">
    Ako je \(\displaystyle z = \left(1 - \frac{1-i}{1+i}\right)^{2025}\), \(i^2 = -1\), onda je \(\text{Re}(z)\) jednako:
  </div>
  <div class="option-grid">
    <div class="option" data-option="A">A) \(2^{2023}\)</div>
    <div class="option correct" data-option="B">B) \(2^{1012}\)</div>
    <div class="option" data-option="C">C) \(2^{2024}\)</div>
    <div class="option" data-option="D">D) \(2^{2013}\)</div>
    <div class="option" data-option="E">E) \(2^{2025}\)</div>
  </div>
</div>

<!-- Plan -->
<div class="card">
  <div class="card-title"><span class="icon">&#x1F5FA;&#xFE0F;</span> Plan rešavanja</div>
  <ol class="plan-list">
    <li>Uprosti razlomak \(\dfrac{1-i}{1+i}\) množenjem konjugovanim imeniocem.</li>
    <li>Izračunaj bazu \(1 - \dfrac{1-i}{1+i}\) i prepoznaj rezultat kao \(1+i\).</li>
    <li>Pretvori \(1+i\) u trigonometrijski (polarni) oblik.</li>
    <li>Primeni De Moavrov obrazac za \((1+i)^{2025}\).</li>
    <li>Svedi argument na osnovi period, izdvoj realni deo i sredi eksponent.</li>
  </ol>
</div>

<!-- Theory Refresher -->
<div class="card">
  <div class="card-title"><span class="icon">&#x1F4D6;</span> Teorijska podloga</div>
  <details>
    <summary>Množenje konjugovanim imeniocem</summary>
    <div class="inner">
      <p>Da bismo podelili dva kompleksna broja, množimo i brojilac i imenilac <strong>konjugatom imenioca</strong>:</p>
      \[\frac{a+bi}{c+di} = \frac{(a+bi)(c-di)}{(c+di)(c-di)} = \frac{(a+bi)(c-di)}{c^2+d^2}\]
      <p class="muted" style="margin-top:8px;">Imenilac postaje realan broj \(c^2 + d^2\), čime dobijamo standardni oblik \(x + yi\).</p>
    </div>
  </details>
  <details>
    <summary>Trigonometrijski oblik kompleksnog broja</summary>
    <div class="inner">
      <p>Svaki kompleksan broj \(z = x + yi\) može se zapisati kao:</p>
      \[z = r(\cos\varphi + i\sin\varphi) = r \cdot e^{i\varphi}\]
      <p>gde je \(r = |z| = \sqrt{x^2 + y^2}\) modul, a \(\varphi = \arg(z)\) argument (ugao sa pozitivnom realnom osom).</p>
      <p class="muted" style="margin-top:8px;">Za \(1 + i\): modul je \(\sqrt{2}\), argument je \(\dfrac{\pi}{4}\) (jer su realni i imaginarni deo jednaki i pozitivni).</p>
    </div>
  </details>
  <details>
    <summary>De Moavrov obrazac</summary>
    <div class="inner">
      <p>Za stepenovanje kompleksnog broja u trigonometrijskom obliku važi:</p>
      \[\left[r(\cos\varphi + i\sin\varphi)\right]^n = r^n(\cos n\varphi + i\sin n\varphi)\]
      <p class="muted" style="margin-top:8px;">Umesto uzastopnog množenja, samo stepenujemo modul i pomnožimo argument sa \(n\). Izuzetno koristan obrazac za velike eksponente!</p>
    </div>
  </details>
</div>

<!-- Visual Aid -->
<div class="card">
  <div class="card-title"><span class="icon">&#x1F4D0;</span> Vizuelni prikaz</div>
  <p class="muted" style="margin-bottom:14px;">Kompleksna ravan pokazuje kako se \((1+i)^n\) ponaša za razne eksponente. Klizač menja \(n\) &mdash; uočite spiralni put i periodičnost ugla.</p>
  <div style="display:flex;gap:16px;flex-wrap:wrap;margin-bottom:14px;">
    <label style="display:flex;align-items:center;gap:8px;">
      <span class="blue">n =</span>
      <input type="range" id="slider-n" min="1" max="16" value="8" style="width:200px;">
      <span id="val-n" class="blue">8</span>
    </label>
  </div>
  <canvas id="canvas" width="700" height="420"></canvas>
  <div id="canvas-info" style="margin-top:12px;text-align:center;font-size:0.95rem;color:#94a3b8;"></div>
</div>

<!-- Step-by-step Solution -->
<div class="card">
  <div class="card-title"><span class="icon">&#x270F;&#xFE0F;</span> Rešenje korak po korak</div>

  <div class="step">
    <div class="step-label">Korak 1: Uprosti razlomak \(\dfrac{1-i}{1+i}\)</div>
    <p>Množimo brojilac i imenilac konjugatom imenioca, tj. brojem \(1-i\):</p>
    \[\frac{1-i}{1+i} = \frac{(1-i)(1-i)}{(1+i)(1-i)} = \frac{(1-i)^2}{1^2 - i^2}\]
    <p><strong>Brojilac</strong> &mdash; razvijamo kvadrat binoma:</p>
    \[(1-i)^2 = 1 - 2i + i^2 = 1 - 2i + (-1) = -2i\]
    <p><strong>Imenilac</strong> &mdash; razlika kvadrata:</p>
    \[(1+i)(1-i) = 1 - i^2 = 1 - (-1) = 2\]
    <p>Dakle:</p>
    \[\frac{1-i}{1+i} = \frac{-2i}{2} = -i\]
    <div class="checkpoint">
      <strong>Proveri se!</strong> Da li je rezultat tačan? Pomnožimo \(-i\) sa imeniocem: \(-i \cdot (1+i) = -i - i^2 = -i + 1 = 1 - i\). Dobili smo brojilac &mdash; tačno!
    </div>
  </div>

  <div class="step">
    <div class="step-label">Korak 2: Izračunaj bazu stepena</div>
    <p>Zameni rezultat iz prethodnog koraka:</p>
    \[1 - \frac{1-i}{1+i} = 1 - (-i) = 1 + i\]
    <p>Zadatak se svodi na:</p>
    \[z = (1+i)^{2025}\]
  </div>

  <div class="step">
    <div class="step-label">Korak 3: Pretvori \(1+i\) u trigonometrijski oblik</div>
    <p>Modul:</p>
    \[|1+i| = \sqrt{1^2 + 1^2} = \sqrt{2}\]
    <p>Argument (oba dela jednaka i pozitivna, prva četvrtina):</p>
    \[\arg(1+i) = \arctan\frac{1}{1} = \frac{\pi}{4}\]
    <p>Trigonometrijski oblik:</p>
    \[1 + i = \sqrt{2}\left(\cos\frac{\pi}{4} + i\sin\frac{\pi}{4}\right)\]
  </div>

  <div class="step">
    <div class="step-label">Korak 4: Primeni De Moavrov obrazac</div>
    <p>Stepenujemo na \(2025\):</p>
    \[(1+i)^{2025} = \left(\sqrt{2}\right)^{2025}\left(\cos\frac{2025\pi}{4} + i\sin\frac{2025\pi}{4}\right)\]
    <p>Modul stepena:</p>
    \[\left(\sqrt{2}\right)^{2025} = \left(2^{1/2}\right)^{2025} = 2^{2025/2}\]
    <div class="checkpoint">
      <strong>Proveri se!</strong> Zapamti: \(\sqrt{2} = 2^{1/2}\), pa je \((\sqrt{2})^n = 2^{n/2}\). Za kontrolu: \((\sqrt{2})^4 = 2^2 = 4\) i \((\sqrt{2})^6 = 2^3 = 8\).
    </div>
  </div>

  <div class="step">
    <div class="step-label">Korak 5: Svedi argument na osnovni ugao</div>
    <p>Argument stepena je \(\dfrac{2025\pi}{4}\). Funkcije \(\cos\) i \(\sin\) imaju period \(2\pi = \dfrac{8\pi}{4}\), pa nam treba ostatak \(2025\) pri deljenju sa \(8\):</p>
    \[2025 = 8 \cdot 253 + 1\]
    <p>Dakle:</p>
    \[\frac{2025\pi}{4} = \frac{8 \cdot 253 \cdot \pi}{4} + \frac{\pi}{4} = 253 \cdot 2\pi + \frac{\pi}{4}\]
    <p>Pošto je \(253 \cdot 2\pi\) celobrojan umnožak punog kruga:</p>
    \[\cos\frac{2025\pi}{4} = \cos\frac{\pi}{4} = \frac{\sqrt{2}}{2}, \qquad \sin\frac{2025\pi}{4} = \sin\frac{\pi}{4} = \frac{\sqrt{2}}{2}\]
    <div class="checkpoint">
      <strong>Proveri se!</strong> Važi \(8 \times 253 = 2024\) i \(2024 + 1 = 2025\). Ostatak je \(1\), pa je ugao \(\frac{1 \cdot \pi}{4} = \frac{\pi}{4}\), što odgovara prvoj četvrtini gde su \(\cos\) i \(\sin\) jednaki.
    </div>
  </div>

  <div class="step">
    <div class="step-label">Korak 6: Izdvoji realni deo</div>
    <p>Imamo:</p>
    \[z = 2^{2025/2}\left(\frac{\sqrt{2}}{2} + i\cdot\frac{\sqrt{2}}{2}\right)\]
    <p>Realni deo:</p>
    \[\text{Re}(z) = 2^{2025/2} \cdot \frac{\sqrt{2}}{2}\]
    <p>Izrazimo \(\dfrac{\sqrt{2}}{2}\) kao stepen dvojke:</p>
    \[\frac{\sqrt{2}}{2} = \frac{2^{1/2}}{2^1} = 2^{1/2 - 1} = 2^{-1/2}\]
    <p>Konačno:</p>
    \[\text{Re}(z) = 2^{2025/2} \cdot 2^{-1/2} = 2^{\frac{2025}{2} - \frac{1}{2}} = 2^{\frac{2024}{2}} = \boxed{2^{1012}}\]
  </div>
</div>

<!-- Key Insight -->
<div class="card">
  <div class="insight-box">
    <div class="label">Ključni uvid</div>
    <p>Ceo zadatak se svodi na <strong>prepoznavanje</strong> da je \(\dfrac{1-i}{1+i} = -i\), čime baza postaje jednostavan broj \(1+i\). Posle toga, ključ je znati trigonometrijski oblik \(1+i = \sqrt{2}\,e^{i\pi/4}\) i primeniti De Moavrov obrazac.</p>
    <p style="margin-top:8px;">Drugi kritičan korak je <strong>pažljivo svođenje ugla</strong>: budući da se vrednosti \(\cos\frac{k\pi}{4}\) i \(\sin\frac{k\pi}{4}\) ponavljaju sa periodom \(8\) (jer je \(8 \cdot \frac{\pi}{4} = 2\pi\)), treba izračunati \(2025 \bmod 8 = 1\). To daje ugao \(\frac{\pi}{4}\), gde su kosinus i sinus jednaki, što lepo zaokružuje račun.</p>
  </div>
</div>

<!-- Final Answer -->
<div class="card">
  <div class="final-answer">
    <div class="label">Konačan odgovor</div>
    <div class="value">
      B) \(\;2^{1012}\)
    </div>
    <p style="margin-top:14px;color:#94a3b8;font-size:1rem;">
      \(\text{Re}\!\left[\left(1 - \dfrac{1-i}{1+i}\right)^{2025}\right] = \text{Re}\!\left[(1+i)^{2025}\right] = 2^{1012}\)
    </p>
  </div>
</div>

<!-- Common Pitfalls -->
<div class="card">
  <div class="card-title"><span class="icon">&#x26A0;&#xFE0F;</span> Najčešće greške</div>
  <div class="pitfall">
    <strong>Greška 1: Pogrešno pojednostavljenje razlomka.</strong>
    Mnogi učenici pokušavaju da "skrate" \(\frac{1-i}{1+i}\) nekorektno, na primer tvrde da je rezultat \(1\) ili \(0\). Jedini ispravan postupak je množenje konjugatom imenioca. Ne zaboravi: kompleksni brojevi se ne mogu skraćivati kao realni!
  </div>
  <div class="pitfall">
    <strong>Greška 2: Pogrešno svođenje ugla.</strong>
    Česta greška je pogrešan ostatak pri deljenju \(2025\) sa \(8\). Neko ko izračuna \(2025 \div 8 = 253\) i zaključi da je ostatak \(0\) (umesto \(1\)) dobija pogrešan ugao. Proveri: \(253 \times 8 = 2024\), a \(2025 - 2024 = 1\).
  </div>
  <div class="pitfall">
    <strong>Greška 3: Greška u eksponentima pri množenju stepena dvojke.</strong>
    Kod računanja \(2^{2025/2} \cdot 2^{-1/2}\) treba sabirnati eksponente: \(\frac{2025}{2} - \frac{1}{2} = \frac{2024}{2} = 1012\). Česta greška je napisati \(\frac{2025}{2} + \frac{1}{2}\) (sabiranje umesto oduzimanja) i dobiti \(1013\), što ne odgovara nijednom ponuđenom odgovoru.
  </div>
</div>

<!-- Optional Challenge -->
<div class="card">
  <div class="challenge-box">
    <div class="label">Izazov za napredne</div>
    <p>Pokušaj da odgovoriš na sledeća pitanja:</p>
    <ul style="margin-top:8px;margin-left:20px;color:#94a3b8;">
      <li>Koliko je \(\text{Im}(z)\)? Hint: pošto je ugao \(\frac{\pi}{4}\), važi \(\sin\frac{\pi}{4} = \cos\frac{\pi}{4}\). Dakle, \(\text{Im}(z) = \text{Re}(z) = 2^{1012}\).</li>
      <li>Za koje vrednosti \(n \in \mathbb{N}\) važi \(\text{Re}((1+i)^n) = 0\)? To su one za koje je \(\cos\frac{n\pi}{4} = 0\), tj. \(n \equiv 2 \pmod{4}\).</li>
      <li>Bonus: Izračunaj \((1-i)^{2025}\). Primetimo da je \(1-i = \overline{1+i}\), pa je \((1-i)^{2025} = \overline{(1+i)^{2025}}\). Dakle, \(\text{Re}((1-i)^{2025}) = 2^{1012}\), ali \(\text{Im}((1-i)^{2025}) = -2^{1012}\).</li>
    </ul>
  </div>
</div>

<script>
(function() {
  var canvas = document.getElementById('canvas');
  var ctx = canvas.getContext('2d');
  var sliderN = document.getElementById('slider-n');
  var valN = document.getElementById('val-n');
  var info = document.getElementById('canvas-info');

  function draw() {
    var W = canvas.width, H = canvas.height;
    var n = parseInt(sliderN.value);
    var cx = W * 0.45;
    var cy = H * 0.5;

    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Compute all points (1+i)^k for k=0..n
    var points = [];
    for (var k = 0; k <= n; k++) {
      var r = Math.pow(Math.sqrt(2), k);
      var theta = k * Math.PI / 4;
      points.push({
        re: r * Math.cos(theta),
        im: r * Math.sin(theta),
        r: r,
        theta: theta,
        k: k
      });
    }

    // Auto-scale
    var maxCoord = 1.5;
    for (var p = 0; p < points.length; p++) {
      maxCoord = Math.max(maxCoord, Math.abs(points[p].re), Math.abs(points[p].im));
    }
    var scale = Math.min((cx - 40) / maxCoord, (cy - 40) / maxCoord);

    // Grid
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    var gridStep = Math.pow(2, Math.floor(Math.log2(maxCoord / 3)));
    if (gridStep < 1) gridStep = 1;
    for (var g = -Math.ceil(maxCoord / gridStep); g <= Math.ceil(maxCoord / gridStep); g++) {
      var gx = cx + g * gridStep * scale;
      var gy = cy - g * gridStep * scale;
      if (gx > 0 && gx < W) {
        ctx.beginPath(); ctx.moveTo(gx, 0); ctx.lineTo(gx, H); ctx.stroke();
      }
      if (gy > 0 && gy < H) {
        ctx.beginPath(); ctx.moveTo(0, gy); ctx.lineTo(W, gy); ctx.stroke();
      }
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    ctx.beginPath(); ctx.moveTo(0, cy); ctx.lineTo(W, cy); ctx.stroke();
    ctx.beginPath(); ctx.moveTo(cx, 0); ctx.lineTo(cx, H); ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#64748b';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Re', W * 0.88, cy - 10);
    ctx.fillText('Im', cx + 16, 18);

    // Unit circle (dashed)
    ctx.setLineDash([4, 4]);
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.arc(cx, cy, scale, 0, 2 * Math.PI);
    ctx.stroke();
    ctx.setLineDash([]);

    // Radius sqrt(2) circle (where 1+i lies)
    ctx.setLineDash([4, 4]);
    ctx.strokeStyle = 'rgba(96, 165, 250, 0.25)';
    ctx.beginPath();
    ctx.arc(cx, cy, Math.sqrt(2) * scale, 0, 2 * Math.PI);
    ctx.stroke();
    ctx.setLineDash([]);

    // Draw spiral path
    ctx.strokeStyle = 'rgba(167, 139, 250, 0.4)';
    ctx.lineWidth = 2;
    ctx.beginPath();
    for (var p = 0; p < points.length; p++) {
      var px = cx + points[p].re * scale;
      var py = cy - points[p].im * scale;
      if (p === 0) ctx.moveTo(px, py);
      else ctx.lineTo(px, py);
    }
    ctx.stroke();

    // Draw points
    for (var p = 0; p < points.length; p++) {
      var pt = points[p];
      var px = cx + pt.re * scale;
      var py = cy - pt.im * scale;
      var isLast = (p === points.length - 1);
      var isBase = (p === 1);

      ctx.beginPath();
      ctx.arc(px, py, isLast ? 7 : (isBase ? 6 : 3.5), 0, 2 * Math.PI);
      if (isLast) {
        ctx.fillStyle = '#4ade80';
      } else if (isBase) {
        ctx.fillStyle = '#60a5fa';
      } else if (p === 0) {
        ctx.fillStyle = '#94a3b8';
      } else {
        ctx.fillStyle = 'rgba(167, 139, 250, 0.7)';
      }
      ctx.fill();

      // Labels for key points
      ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
      if (p === 0) {
        ctx.fillStyle = '#94a3b8';
        ctx.textAlign = 'left';
        ctx.fillText('1', px + 8, py + 16);
      } else if (isBase) {
        ctx.fillStyle = '#60a5fa';
        ctx.textAlign = 'left';
        ctx.fillText('1+i', px + 10, py - 8);
      } else if (isLast && n > 1) {
        ctx.fillStyle = '#4ade80';
        var lx = pt.re >= 0 ? 12 : -12;
        var ly = pt.im >= 0 ? -12 : 16;
        ctx.textAlign = pt.re >= 0 ? 'left' : 'right';
        ctx.fillText('(1+i)^' + n, px + lx, py + ly);
      }
    }

    // Angle arc for base
    if (n >= 1) {
      ctx.strokeStyle = '#f472b6';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.arc(cx, cy, 28, 0, -Math.PI / 4, true);
      ctx.stroke();
      ctx.fillStyle = '#f472b6';
      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText('\u03C0/4', cx + 32, cy - 6);
    }

    // Projection lines for last point
    var last = points[points.length - 1];
    var lpx = cx + last.re * scale;
    var lpy = cy - last.im * scale;
    ctx.setLineDash([3, 3]);
    ctx.strokeStyle = 'rgba(74, 222, 128, 0.3)';
    ctx.lineWidth = 1;
    ctx.beginPath(); ctx.moveTo(lpx, lpy); ctx.lineTo(lpx, cy); ctx.stroke();
    ctx.beginPath(); ctx.moveTo(lpx, lpy); ctx.lineTo(cx, lpy); ctx.stroke();
    ctx.setLineDash([]);

    // Re projection label
    ctx.fillStyle = '#34d399';
    ctx.beginPath(); ctx.arc(lpx, cy, 3, 0, 2 * Math.PI); ctx.fill();
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Re=' + last.re.toFixed(1).replace('.', ','), lpx, cy + 16);

    // Info panel (right side)
    var infoX = W * 0.72;
    var infoY = 28;
    var lh = 22;
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('(1+i)^' + n, infoX, infoY);

    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('Modul: 2^(' + n + '/2) = ' + last.r.toFixed(2).replace('.', ','), infoX, infoY + lh);

    var thetaMod = ((n % 8) + 8) % 8;
    var angles = ['0', '\u03C0/4', '\u03C0/2', '3\u03C0/4', '\u03C0', '5\u03C0/4', '3\u03C0/2', '7\u03C0/4'];
    ctx.fillText('Argument: ' + n + '\u03C0/4 \u2261 ' + angles[thetaMod], infoX, infoY + 2 * lh);

    ctx.fillStyle = '#60a5fa';
    ctx.fillText('Re = ' + last.re.toFixed(4).replace('.', ','), infoX, infoY + 3.5 * lh);
    ctx.fillStyle = '#a78bfa';
    ctx.fillText('Im = ' + last.im.toFixed(4).replace('.', ','), infoX, infoY + 4.5 * lh);

    // Separator
    ctx.fillStyle = '#334155';
    ctx.fillRect(infoX - 4, infoY + 5.5 * lh, 170, 1);

    // For n=2025
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.fillText('Za n = 2025:', infoX, infoY + 6.5 * lh);
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('2025 mod 8 = 1', infoX, infoY + 7.5 * lh);
    ctx.fillText('Ugao \u2261 \u03C0/4 (isti kao n=1)', infoX, infoY + 8.5 * lh);
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.fillText('Re(z) = 2^1012', infoX, infoY + 10 * lh);

    // Bottom info
    info.innerHTML =
      '<span style="color:#60a5fa">(1+i)<sup>' + n + '</sup></span> = ' +
      '<span style="color:#a78bfa">2<sup>' + n + '/2</sup></span> \u00B7 ' +
      '(cos ' + angles[thetaMod] + ' + i\u00B7sin ' + angles[thetaMod] + ') = ' +
      '<span style="color:#60a5fa">' + last.re.toFixed(2).replace('.', ',') + '</span> + ' +
      '<span style="color:#a78bfa">' + last.im.toFixed(2).replace('.', ',') + '</span>i';
  }

  sliderN.addEventListener('input', function() {
    valN.textContent = sliderN.value;
    draw();
  });

  canvas.addEventListener('touchstart', function(e) { e.preventDefault(); }, { passive: false });

  function resizeCanvas() {
    var container = canvas.parentElement;
    var maxW = container.clientWidth - 56;
    if (maxW < 700) {
      canvas.style.width = maxW + 'px';
      canvas.style.height = (maxW * 420 / 700) + 'px';
    }
  }
  window.addEventListener('resize', resizeCanvas);
  resizeCanvas();

  draw();
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{"title":"Stepen kompleksnog broja (1+i)^2025 - realni deo","subject":"math","unit":"complex_numbers","topic_tags":["kompleksni brojevi","trigonometrijski oblik","De Moavrov obrazac","stepenovanje kompleksnih brojeva","konjugat"]}
BRAINSPARK_META-->