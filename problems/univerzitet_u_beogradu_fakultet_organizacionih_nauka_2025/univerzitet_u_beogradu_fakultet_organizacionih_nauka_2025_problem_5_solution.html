<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Linearna jednacina sa procentima</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
  Problem:
  Pocetne cene knjige iz matematike i knjige iz fizike su jednake.
  Knjiga iz matematike prvo poskupi za 20%, a zatim jos za 960 dinara.
  Knjiga iz fizike poskupi za 52%.
  Nove cene su ponovo jednake.
  Odrediti pocetnu cenu knjige iz matematike.

  Oznacimo pocetnu cenu sa x (u dinarima).

  Korak 1: Nova cena knjige iz matematike
  Prvo poskupi za 20%: x * 1,2 = 1,2x
  Zatim poskupi jos za 960 din: 1,2x + 960
  Nova cena matematike = 1,2x + 960

  Korak 2: Nova cena knjige iz fizike
  Poskupi za 52%: x * 1,52 = 1,52x
  Nova cena fizike = 1,52x

  Korak 3: Izjednacavanje novih cena
  1,2x + 960 = 1,52x

  Korak 4: Resavanje jednacine
  960 = 1,52x - 1,2x
  960 = 0,32x
  x = 960 / 0,32
  x = 3000

  Pocetna cena knjige iz matematike je 3000 dinara.

  Verifikacija:
  - Pocetna cena: x = 3000 din
  - Knjiga iz matematike: 3000 * 1,2 + 960 = 3600 + 960 = 4560 din
  - Knjiga iz fizike: 3000 * 1,52 = 4560 din
  - Nove cene su jednake: 4560 = 4560. Tacno!

  Provera sa ponudjenim odgovorima:
  (A) 3500: 3500*1,2 + 960 = 4200+960 = 5160; 3500*1,52 = 5320. Nije jednako.
  (B) 3100: 3100*1,2 + 960 = 3720+960 = 4680; 3100*1,52 = 4712. Nije jednako.
  (C) 3200: 3200*1,2 + 960 = 3840+960 = 4800; 3200*1,52 = 4864. Nije jednako.
  (D) 3000: 3000*1,2 + 960 = 3600+960 = 4560; 3000*1,52 = 4560. Jednako! TACNO.
  (E) 2800: 2800*1,2 + 960 = 3360+960 = 4320; 2800*1,52 = 4256. Nije jednako.

  Tacan odgovor: (D) 3000 dinara. Potvrdjeno.
</script>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
}

.card h2 {
  font-size: 1.3rem;
  color: #60a5fa;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title {
  font-size: 1.3rem;
  color: #60a5fa;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.4rem;
}

.problem-text {
  font-size: 1.15rem;
  line-height: 1.8;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96, 165, 250, 0.08);
  border: 1px solid rgba(96, 165, 250, 0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
  transition: transform 0.2s, border-color 0.2s;
}

.given-item:hover {
  transform: translateY(-2px);
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card h2 {
  color: #a78bfa;
}

.plan-text {
  color: #a78bfa;
  font-size: 1.05rem;
  font-style: italic;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 8px 0;
  user-select: none;
}

details summary:hover {
  color: #93bbfc;
}

details .detail-content {
  padding: 12px 16px;
  background: rgba(30, 41, 59, 0.7);
  border-left: 3px solid #60a5fa;
  border-radius: 0 8px 8px 0;
  margin-top: 8px;
}

.step {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  align-items: flex-start;
  padding: 8px;
  border-left: 3px solid transparent;
  border-radius: 0 8px 8px 0;
  transition: border-color 0.3s, background 0.3s;
  cursor: pointer;
}

.step:hover, .step.active {
  border-left-color: #4ade80;
  background: rgba(74, 222, 128, 0.04);
}

.step-badge {
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  font-weight: 700;
  font-size: 0.85rem;
  min-width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-title {
  font-weight: 600;
  color: #f472b6;
  margin-bottom: 6px;
  font-size: 1.05rem;
}

.step-math {
  background: rgba(167, 139, 250, 0.1);
  border: 1px solid rgba(167, 139, 250, 0.25);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 10px 0;
  text-align: center;
  font-size: 1.05rem;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.12), rgba(167, 139, 250, 0.12));
  border: 1px solid rgba(167, 139, 250, 0.35);
  border-radius: 16px;
  padding: 24px 28px;
  margin-bottom: 24px;
}

.insight-box .card-title {
  color: #a78bfa;
}

.final-answer-box {
  background: rgba(52, 211, 153, 0.08);
  border: 2px solid #34d399;
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin-bottom: 24px;
}

.final-answer-box .answer-label {
  color: #94a3b8;
  font-size: 1rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 12px;
}

.final-answer-box .answer-value {
  color: #4ade80;
  font-size: 2rem;
  font-weight: 700;
}

.final-answer-box .answer-detail {
  color: #34d399;
  font-size: 1.2rem;
  margin-top: 8px;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-top: 16px;
}

.final-option {
  background: rgba(51, 65, 85, 0.6);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 20px;
  font-size: 1rem;
  transition: all 0.3s ease;
}

.final-option.correct {
  background: rgba(52, 211, 153, 0.15);
  border-color: #34d399;
  color: #34d399;
  font-weight: 600;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 16px;
  font-style: italic;
}

.pitfall {
  display: flex;
  gap: 12px;
  align-items: flex-start;
  margin-bottom: 12px;
}

.pitfall-icon {
  color: #f472b6;
  font-weight: 700;
  font-size: 1.2rem;
  flex-shrink: 0;
}

.challenge-box {
  background: rgba(244, 114, 182, 0.08);
  border: 1px solid rgba(244, 114, 182, 0.3);
  border-radius: 16px;
  padding: 24px 28px;
}

.challenge-box .card-title {
  color: #f472b6;
}

canvas {
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  max-width: 100%;
  touch-action: none;
}

.canvas-wrapper {
  text-align: center;
}

.canvas-caption {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 10px;
  text-align: center;
}

.highlight-val {
  color: #60a5fa;
  font-weight: 600;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

.checkpoint details summary {
  color: #34d399;
  font-size: 0.95rem;
}

.checkpoint details .detail-content {
  border-left-color: #34d399;
}

@media (max-width: 700px) {
  h1 {
    font-size: 1.6rem;
  }
  .card {
    padding: 18px;
  }
  .given-grid {
    flex-direction: column;
  }
  .step {
    flex-direction: column;
    gap: 8px;
  }
  .step-badge {
    align-self: flex-start;
  }
  .final-answer-box .answer-value {
    font-size: 1.5rem;
  }
  .final-options {
    flex-direction: column;
    align-items: center;
  }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Linearna jednacina sa procentima</h1>
  <p class="subtitle">Algebra -- primena procentnog racuna i linearne jednacine sa jednom nepoznatom</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Tekst zadatka</h2>
    <div class="problem-text">
      <p>Pocetne cene knjige iz matematike i knjige iz fizike su <span class="highlight-val">jednake</span>. Ako knjiga iz matematike prvo poskupi za <span class="highlight-val">20%</span>, a zatim jos za <span class="highlight-val">960 dinara</span>, a knjiga iz fizike poskupi za <span class="highlight-val">52%</span>, njihove nove cene ce ponovo biti jednake. Pocetna cena knjige iz matematike iznosi:</p>
    </div>
    <div class="given-grid" style="margin-bottom: 12px;">
      <div class="given-item">
        <div class="label">Pocetne cene</div>
        <div class="value">Jednake</div>
      </div>
      <div class="given-item">
        <div class="label">Matematika: poskupljenje 1</div>
        <div class="value">20%</div>
      </div>
      <div class="given-item">
        <div class="label">Matematika: poskupljenje 2</div>
        <div class="value">960 din</div>
      </div>
      <div class="given-item">
        <div class="label">Fizika: poskupljenje</div>
        <div class="value">52%</div>
      </div>
    </div>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">3500 din</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">3100 din</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">3200 din</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">3000 din</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">2800 din</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p class="plan-text">
      Oznacicemo pocetnu cenu sa \( x \). Izrazicemo novu cenu svake knjige pomocu \( x \), a zatim cemo izjednaciti te izraze i resiti dobijenu linearnu jednacinu.
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <h2>Podsetnik iz teorije</h2>
    <details>
      <summary>Kljucne formule i pojmovi (klikni da otvoris)</summary>
      <div class="detail-content">
        <ul style="margin: 8px 0 12px 20px; color: #e2e8f0;">
          <li><strong>Procentno povecanje:</strong> Ako velicina \( x \) poraste za \( p\% \), nova vrednost je:
            \[ x_{\text{nova}} = x \cdot \left(1 + \frac{p}{100}\right) \]
            Na primer, povecanje za 20% daje faktor \( 1 + 0{,}2 = 1{,}2 \).
          </li>
          <li><strong>Uzastopna poskupljenja:</strong> Ako se cena prvo poveca za procenat, a zatim za fiksan iznos, ta dva povecanja se <em>primenjuju redom</em>:
            \[ x_{\text{nova}} = x \cdot (1 + p_1) + \Delta \]
          </li>
          <li><strong>Linearna jednacina:</strong> Jednacina oblika \( ax + b = cx \) resava se prenosenjem nepoznatih na jednu stranu:
            \[ b = cx - ax = (c - a)x \implies x = \frac{b}{c - a} \]
          </li>
        </ul>
      </div>
    </details>
  </div>

  <!-- Visual Aid / Interactive Diagram -->
  <div class="card">
    <h2>Vizuelni prikaz</h2>
    <div class="canvas-wrapper">
      <canvas id="price-diagram" width="700" height="420"></canvas>
    </div>
    <p class="canvas-caption">Prikaz pocetnih i novih cena obe knjige. Pomeri klizac ispod da istrazis kako razlicite pocetne cene uticu na krajnje cene.</p>
    <div style="text-align: center; margin-top: 16px;">
      <label for="price-slider" style="color: #94a3b8; font-size: 0.95rem;">Pocetna cena \( x \): <span id="slider-value" style="color: #60a5fa; font-weight: 600;">3000</span> din</label>
      <br>
      <input type="range" id="price-slider" min="2000" max="4000" value="3000" step="100"
        style="width: 80%; max-width: 500px; margin-top: 8px; accent-color: #60a5fa;">
    </div>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step" id="step-1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <div class="step-title">Uvodjenje nepoznate</div>
        <p>Neka je \( x \) pocetna cena svake knjige (u dinarima).</p>
        <p>Posto su pocetne cene jednake, obe knjige na pocetku kostaju po \( x \) dinara.</p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step" id="step-2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <div class="step-title">Nova cena knjige iz matematike</div>
        <p>Knjiga iz matematike prvo poskupi za <span class="highlight-val">20%</span>. To znaci da se njena cena pomnozi faktorom \( 1{,}2 \):</p>
        <div class="step-math">
          \[ x \cdot 1{,}2 = 1{,}2x \]
        </div>
        <p>Zatim poskupi jos za <span class="highlight-val">960 dinara</span>:</p>
        <div class="step-math">
          \[ \text{Nova cena matematike} = 1{,}2x + 960 \]
        </div>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step" id="step-3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <div class="step-title">Nova cena knjige iz fizike</div>
        <p>Knjiga iz fizike poskupi za <span class="highlight-val">52%</span>. To znaci da se cena pomnozi faktorom \( 1{,}52 \):</p>
        <div class="step-math">
          \[ \text{Nova cena fizike} = x \cdot 1{,}52 = 1{,}52x \]
        </div>
      </div>
    </div>

    <div class="checkpoint">
      <details>
        <summary>Proveri sebe: Kolika je nova cena knjige iz fizike ako je \( x = 2000 \)?</summary>
        <div class="detail-content">
          \( 1{,}52 \cdot 2000 = 3040 \) dinara. Jednostavno pomnozimo pocetnu cenu sa \( 1{,}52 \).
        </div>
      </details>
    </div>

    <!-- Step 4 -->
    <div class="step" id="step-4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <div class="step-title">Postavljanje jednacine</div>
        <p>Po uslovu zadatka, nove cene su <strong>jednake</strong>. Izjednacavamo izraze:</p>
        <div class="step-math">
          \[ 1{,}2x + 960 = 1{,}52x \]
        </div>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step" id="step-5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <div class="step-title">Resavanje jednacine</div>
        <p>Prenesemo \( 1{,}2x \) na desnu stranu (ili oduzimamo \( 1{,}2x \) sa obe strane):</p>
        <div class="step-math">
          \[ 960 = 1{,}52x - 1{,}2x \]
        </div>
        <p>Racunamo razliku koeficijenata:</p>
        <div class="step-math">
          \[ 960 = 0{,}32x \]
        </div>
      </div>
    </div>

    <div class="checkpoint">
      <details>
        <summary>Proveri sebe: Koliko je \( 1{,}52 - 1{,}2 \)?</summary>
        <div class="detail-content">
          \( 1{,}52 - 1{,}20 = 0{,}32 \). Ovo predstavlja razliku izmedju ukupnog poskupljenja fizike (52%) i prvog poskupljenja matematike (20%), tj. \( 52\% - 20\% = 32\% = 0{,}32 \).
        </div>
      </details>
    </div>

    <!-- Step 6 -->
    <div class="step" id="step-6">
      <div class="step-badge">6</div>
      <div class="step-content">
        <div class="step-title">Izracunavanje nepoznate</div>
        <p>Delimo obe strane sa \( 0{,}32 \):</p>
        <div class="step-math">
          \[ x = \frac{960}{0{,}32} \]
        </div>
        <p>Racunamo:</p>
        <div class="step-math">
          \[ x = \frac{960}{0{,}32} = \frac{96000}{32} = 3000 \]
        </div>
        <p style="color: #94a3b8; font-size: 0.95rem;">Napomena: Delili smo brojilac i imenilac sa 100 da bismo uklonili decimale, pa smo dobili \( \frac{96000}{32} \). Mozemo i ovako: \( 32 \times 3000 = 96000 \), dakle \( 960 \div 0{,}32 = 3000 \).</p>
      </div>
    </div>

    <div class="checkpoint">
      <details>
        <summary>Proveri sebe: Da li se nove cene zaista poklapaju za \( x = 3000 \)?</summary>
        <div class="detail-content">
          <p>Matematika: \( 1{,}2 \cdot 3000 + 960 = 3600 + 960 = 4560 \) din.</p>
          <p>Fizika: \( 1{,}52 \cdot 3000 = 4560 \) din.</p>
          <p>Da, obe nove cene su 4560 dinara. Resenje je tacno!</p>
        </div>
      </details>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <div class="card-title"><span class="icon">Kljucni uvid</span></div>
    <p>Razlika izmedju 52% i 20% iznosi tacno <strong>32%</strong>. Tih 32% od pocetne cene je upravo jednako dodatnom fiksnom poskupljenju od 960 dinara. Dakle, 32% od pocetne cene = 960 din, sto odmah daje pocetnu cenu.</p>
    <div class="step-math" style="margin-top: 12px;">
      \[ 0{,}32 \cdot x = 960 \implies x = 3000 \text{ din} \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <div class="answer-label">Konacan odgovor</div>
    <div class="answer-value">3000 dinara</div>
    <div class="answer-detail">Tacan odgovor je (D)</div>
    <div class="final-options">
      <div class="final-option">(A) 3500 din</div>
      <div class="final-option">(B) 3100 din</div>
      <div class="final-option">(C) 3200 din</div>
      <div class="final-option correct">(D) 3000 din</div>
      <div class="final-option">(E) 2800 din</div>
    </div>
    <p class="verification-note">Provera: Za \( x = 3000 \), knjiga iz matematike kosta \( 1{,}2 \cdot 3000 + 960 = 4560 \) din, a knjiga iz fizike kosta \( 1{,}52 \cdot 3000 = 4560 \) din. Nove cene su jednake.</p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Ceste greske</h2>
    <div class="pitfall">
      <span class="pitfall-icon">&#10007;</span>
      <p><strong>Pogresno tumacenje "poskupi za 20%":</strong> Neki ucenici oduzmu 20% umesto da dodaju, dobijajuci \( 0{,}8x \) umesto \( 1{,}2x \). Rec "poskupi" jasno znaci da se cena <em>povecava</em>, dakle koristimo faktor \( 1 + 0{,}2 = 1{,}2 \).</p>
    </div>
    <div class="pitfall">
      <span class="pitfall-icon">&#10007;</span>
      <p><strong>Sabiranje procenata pre mnozenja:</strong> Pogresno je reci da matematika poskupi "za 20% + 960 din = nekakav procenat" pa to sabrati sa 52%. Poskupljenje od 960 dinara je <em>fiksan iznos</em>, ne procenat, i primenjuje se <em>posle</em> procentualnog poskupljenja.</p>
    </div>
  </div>

  <!-- Optional Challenge -->
  <div class="challenge-box">
    <div class="card-title"><span class="icon">Dodatni izazov</span></div>
    <p>Sta ako knjiga iz matematike prvo poskupi za 960 dinara, <em>pa tek onda</em> za 20%? Da li bi pocetna cena bila ista?</p>
    <details>
      <summary>Pogledaj hint</summary>
      <div class="detail-content">
        <p>U tom slucaju nova cena matematike bi bila \( (x + 960) \cdot 1{,}2 = 1{,}2x + 1152 \). Jednacina postaje \( 1{,}2x + 1152 = 1{,}52x \), sto daje \( x = 3600 \). Redosled operacija je bitan -- sabiranje i mnozenje <strong>nisu</strong> komutativni kada se kombinuju!</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  // Main interactive canvas
  var canvas = document.getElementById('price-diagram');
  if (!canvas) return;
  var ctx = canvas.getContext('2d');
  var W = 700, H = 420;

  var dpr = window.devicePixelRatio || 1;
  canvas.width = W * dpr;
  canvas.height = H * dpr;
  canvas.style.width = W + 'px';
  canvas.style.height = H + 'px';
  ctx.scale(dpr, dpr);

  var slider = document.getElementById('price-slider');
  var sliderLabel = document.getElementById('slider-value');
  var currentX = 3000;

  function draw(x) {
    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    var mathNew = 1.2 * x + 960;
    var physNew = 1.52 * x;

    // Bar chart parameters
    var barWidth = 80;
    var gap = 40;
    var chartLeft = 80;
    var chartBottom = H - 60;
    var chartTop = 40;
    var chartHeight = chartBottom - chartTop;

    // Max value for scaling
    var maxVal = Math.max(x, mathNew, physNew, 5000);
    var scale = chartHeight / maxVal;

    // Title
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Poredjenje cena knjiga', W / 2, 28);

    // Baseline
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(chartLeft - 10, chartBottom);
    ctx.lineTo(W - 30, chartBottom);
    ctx.stroke();

    // Y-axis gridlines
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    ctx.fillStyle = '#64748b';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    for (var tick = 0; tick <= maxVal; tick += 1000) {
      var ty = chartBottom - tick * scale;
      if (ty < chartTop - 10) break;
      ctx.beginPath();
      ctx.moveTo(chartLeft - 5, ty);
      ctx.lineTo(W - 30, ty);
      ctx.stroke();
      ctx.fillText(tick.toLocaleString('sr-RS'), chartLeft - 10, ty + 4);
    }

    // Helper to draw a bar
    function drawBar(cx, val, color, label, sublabel) {
      var barH = val * scale;
      var bx = cx - barWidth / 2;
      var by = chartBottom - barH;

      // Bar body with gradient
      var grad = ctx.createLinearGradient(bx, by, bx, chartBottom);
      grad.addColorStop(0, color);
      grad.addColorStop(1, color + '44');
      ctx.fillStyle = grad;
      ctx.beginPath();
      ctx.roundRect(bx, by, barWidth, barH, [6, 6, 0, 0]);
      ctx.fill();

      // Border
      ctx.strokeStyle = color;
      ctx.lineWidth = 1.5;
      ctx.beginPath();
      ctx.roundRect(bx, by, barWidth, barH, [6, 6, 0, 0]);
      ctx.stroke();

      // Value on top of bar
      ctx.fillStyle = color;
      ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(Math.round(val).toLocaleString('sr-RS') + ' din', cx, by - 10);

      // Label below bar
      ctx.fillStyle = '#e2e8f0';
      ctx.font = '13px Segoe UI, system-ui, sans-serif';
      ctx.fillText(label, cx, chartBottom + 20);
      if (sublabel) {
        ctx.fillStyle = '#94a3b8';
        ctx.font = '11px Segoe UI, system-ui, sans-serif';
        ctx.fillText(sublabel, cx, chartBottom + 36);
      }
    }

    // Bars positions
    var section1Center = chartLeft + 40 + barWidth;
    var section2Center = W / 2 + 20;
    var section3Center = W - 30 - barWidth - 40;

    // Section labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('POCETNA CENA', section1Center, chartTop - 5);
    ctx.fillText('NOVA CENA (MATEMATIKA)', section2Center, chartTop - 5);
    ctx.fillText('NOVA CENA (FIZIKA)', section3Center, chartTop - 5);

    // Draw the bars
    drawBar(section1Center, x, '#60a5fa', 'Obe knjige', 'x = ' + Math.round(x));

    // Math book new price: show the two components
    var mathPercent = 1.2 * x;
    var mathExtra = 960;

    // Bottom portion of math bar (1.2x)
    var mathPercentH = mathPercent * scale;
    var mathTotalH = mathNew * scale;
    var mathBx = section2Center - barWidth / 2;

    // Full bar (total)
    var grad1 = ctx.createLinearGradient(mathBx, chartBottom - mathTotalH, mathBx, chartBottom);
    grad1.addColorStop(0, '#a78bfa');
    grad1.addColorStop(1, '#a78bfa44');
    ctx.fillStyle = grad1;
    ctx.beginPath();
    ctx.roundRect(mathBx, chartBottom - mathTotalH, barWidth, mathTotalH, [6, 6, 0, 0]);
    ctx.fill();

    // Dashed line showing where 1.2x ends and +960 starts
    var divY = chartBottom - mathPercentH;
    ctx.setLineDash([4, 4]);
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(mathBx, divY);
    ctx.lineTo(mathBx + barWidth, divY);
    ctx.stroke();
    ctx.setLineDash([]);

    // Labels for components
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('+960 din', mathBx + barWidth + 6, (chartBottom - mathTotalH + divY) / 2 + 4);

    ctx.fillStyle = '#a78bfa';
    ctx.fillText('1,2x = ' + Math.round(mathPercent), mathBx + barWidth + 6, (divY + chartBottom) / 2 + 4);

    // Border
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.roundRect(mathBx, chartBottom - mathTotalH, barWidth, mathTotalH, [6, 6, 0, 0]);
    ctx.stroke();

    // Value on top
    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText(Math.round(mathNew).toLocaleString('sr-RS') + ' din', section2Center, chartBottom - mathTotalH - 10);

    // Label
    ctx.fillStyle = '#e2e8f0';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.fillText('Matematika', section2Center, chartBottom + 20);
    ctx.fillStyle = '#94a3b8';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.fillText('1,2x + 960', section2Center, chartBottom + 36);

    // Physics bar
    drawBar(section3Center, physNew, '#34d399', 'Fizika', '1,52x = ' + Math.round(physNew));

    // Equality indicator
    var diff = Math.abs(mathNew - physNew);
    if (diff < 1) {
      // Draw equals sign between math and physics bars
      var eqX = (section2Center + section3Center) / 2;
      var eqY = chartBottom - Math.max(mathTotalH, physNew * scale) / 2;
      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 28px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('=', eqX, eqY);

      // Match label
      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
      ctx.fillText('Jednake cene!', eqX, eqY + 22);
    } else {
      var eqX2 = (section2Center + section3Center) / 2;
      var eqY2 = chartBottom - Math.max(mathTotalH, physNew * scale) / 2;
      ctx.fillStyle = '#f472b6';
      ctx.font = 'bold 22px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('\u2260', eqX2, eqY2);

      ctx.fillStyle = '#94a3b8';
      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      ctx.fillText('Razlika: ' + Math.round(diff) + ' din', eqX2, eqY2 + 20);
    }
  }

  draw(currentX);

  // Slider interaction
  if (slider) {
    slider.addEventListener('input', function() {
      currentX = parseInt(this.value, 10);
      if (sliderLabel) {
        sliderLabel.textContent = currentX.toLocaleString('sr-RS');
      }
      draw(currentX);
    });
  }

  // Step click highlighting
  var steps = document.querySelectorAll('.step');
  steps.forEach(function(step) {
    step.addEventListener('click', function() {
      steps.forEach(function(s) { s.classList.remove('active'); });
      step.classList.add('active');
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Linearna jednacina sa procentnim poskupljenjem cena",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["procentni racun", "linearne jednacine", "tekstualni zadaci", "poskupljenje", "jednacina sa jednom nepoznatom"]
}
BRAINSPARK_META-->