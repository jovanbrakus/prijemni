<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jednačina sa procentualnim poskupljenjem</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
Problem: Početne cene knjige iz matematike i knjige iz fizike su jednake.
Ako knjiga iz matematike prvo poskupi za 20%, a zatim još za 960 dinara,
a knjiga iz fizike poskupi za 52%, njihove nove cene će ponovo biti jednake.
Početna cena knjige iz matematike iznosi:
A) 3500 din  B) 3100 din  C) 3200 din  D) 3000 din  E) 2800 din

Step 1: Let x = initial price (same for both books)

Step 2: New price of math book:
  First increase by 20%: x * 1.20 = 1.2x
  Then increase by 960 din: 1.2x + 960

Step 3: New price of physics book:
  Increase by 52%: x * 1.52 = 1.52x

Step 4: Set equal:
  1.2x + 960 = 1.52x
  960 = 1.52x - 1.2x
  960 = 0.32x
  x = 960 / 0.32
  x = 3000

Step 5: Verification:
  Math book: 3000 * 1.2 + 960 = 3600 + 960 = 4560
  Physics book: 3000 * 1.52 = 4560
  Equal! Confirmed.

Checking all options:
  (A) 3500: 1.2*3500+960=5160; 1.52*3500=5320. Not equal.
  (B) 3100: 1.2*3100+960=4680; 1.52*3100=4712. Not equal.
  (C) 3200: 1.2*3200+960=4800; 1.52*3200=4864. Not equal.
  (D) 3000: 1.2*3000+960=4560; 1.52*3000=4560. EQUAL!
  (E) 2800: 1.2*2800+960=4320; 1.52*2800=4256. Not equal.

Answer: D) 3000 dinara
</script>
<style>
  *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    background: #0f172a;
    color: #e2e8f0;
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    line-height: 1.7;
    padding: 24px;
    max-width: 900px;
    margin: 0 auto;
  }
  h1 {
    font-size: 2rem;
    font-weight: 800;
    background: linear-gradient(135deg, #60a5fa, #a78bfa);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 4px;
    line-height: 1.3;
  }
  .subtitle {
    color: #94a3b8;
    font-size: 1.05rem;
    margin-bottom: 28px;
  }
  .card {
    background: #1e293b;
    border: 1px solid #334155;
    border-radius: 14px;
    padding: 24px 28px;
    margin-bottom: 22px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.35);
  }
  .card-title {
    font-size: 1.2rem;
    font-weight: 700;
    margin-bottom: 14px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .card-title .icon { font-size: 1.3rem; }
  .problem-box {
    background: #172033;
    border-left: 4px solid #60a5fa;
    padding: 18px 22px;
    border-radius: 0 10px 10px 0;
    font-size: 1.08rem;
    margin-bottom: 16px;
  }
  .given-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 10px;
    margin-top: 16px;
  }
  .given-item {
    background: #0f172a;
    border: 1px solid #334155;
    border-radius: 10px;
    padding: 12px 16px;
    text-align: center;
    transition: all 0.2s;
  }
  .given-item .label {
    font-size: 0.85rem;
    color: #94a3b8;
    font-weight: 600;
    margin-bottom: 4px;
  }
  .given-item .value {
    font-size: 1.05rem;
    color: #e2e8f0;
    font-weight: 600;
  }
  .plan-list {
    list-style: none;
    counter-reset: plan;
  }
  .plan-list li {
    counter-increment: plan;
    padding: 6px 0 6px 36px;
    position: relative;
  }
  .plan-list li::before {
    content: counter(plan);
    position: absolute;
    left: 0;
    top: 6px;
    width: 26px;
    height: 26px;
    background: linear-gradient(135deg, #60a5fa, #a78bfa);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.82rem;
    font-weight: 700;
    color: #0f172a;
  }
  details {
    background: #172033;
    border: 1px solid #334155;
    border-radius: 10px;
    padding: 14px 20px;
    margin: 15px 0;
  }
  details summary {
    cursor: pointer;
    font-weight: 600;
    color: #a78bfa;
    list-style: none;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  details summary::before {
    content: '>';
    display: inline-block;
    transition: transform 0.2s;
    font-family: monospace;
    font-size: 1.1rem;
  }
  details[open] summary::before {
    transform: rotate(90deg);
  }
  details .inner {
    margin-top: 14px;
    padding-top: 14px;
    border-top: 1px solid #334155;
  }
  .step {
    border-left: 3px solid #334155;
    padding: 14px 0 14px 22px;
    margin-left: 12px;
    position: relative;
    margin-bottom: 4px;
    cursor: pointer;
    transition: border-color 0.2s;
  }
  .step:hover, .step.active {
    border-left-color: #4ade80;
  }
  .step::before {
    content: '';
    position: absolute;
    left: -7px;
    top: 18px;
    width: 12px;
    height: 12px;
    background: #60a5fa;
    border-radius: 50%;
    border: 2px solid #0f172a;
  }
  .step:last-of-type { border-left-color: transparent; }
  .step-label {
    font-weight: 700;
    color: #60a5fa;
    font-size: 1rem;
    margin-bottom: 6px;
  }
  .math-block {
    background: rgba(56,189,248,0.08);
    border: 1px solid rgba(56,189,248,0.15);
    border-radius: 8px;
    padding: 12px 18px;
    margin: 10px 0;
    font-family: 'Courier New', monospace;
  }
  .checkpoint {
    background: rgba(167, 139, 250, 0.1);
    border: 1px dashed #a78bfa;
    border-radius: 10px;
    padding: 12px 18px;
    margin: 15px 0;
    font-size: 0.95rem;
    color: #a78bfa;
  }
  .checkpoint strong { color: #c4b5fd; }
  .final-answer {
    background: linear-gradient(135deg, rgba(52, 211, 153, 0.12), rgba(74, 222, 128, 0.08));
    border: 2px solid #34d399;
    border-radius: 14px;
    padding: 26px 30px;
    text-align: center;
  }
  .final-answer .label {
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: #34d399;
    font-weight: 700;
    margin-bottom: 10px;
  }
  .final-answer .value {
    font-size: 1.7rem;
    font-weight: 800;
    color: #4ade80;
  }
  .answer-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 10px;
    margin-top: 18px;
    text-align: center;
  }
  .answer-card {
    background: #0f172a;
    border: 1px solid #334155;
    border-radius: 10px;
    padding: 10px 14px;
    transition: all 0.2s;
  }
  .answer-card.correct {
    border-color: #34d399;
    background: rgba(52, 211, 153, 0.1);
    box-shadow: 0 0 12px rgba(52, 211, 153, 0.15);
  }
  .answer-card .opt-label {
    font-size: 0.85rem;
    color: #94a3b8;
    font-weight: 600;
    margin-bottom: 2px;
  }
  .answer-card .opt-value {
    font-size: 1.05rem;
    color: #e2e8f0;
    font-weight: 600;
  }
  .answer-card.correct .opt-value {
    color: #4ade80;
  }
  .insight-box {
    background: rgba(96, 165, 250, 0.08);
    border: 1px solid rgba(96, 165, 250, 0.3);
    border-radius: 12px;
    padding: 18px 22px;
  }
  .insight-box .label {
    font-weight: 700;
    color: #60a5fa;
    margin-bottom: 6px;
    font-size: 1.05rem;
  }
  .pitfall {
    background: rgba(244, 114, 182, 0.08);
    border-left: 4px solid #f472b6;
    border-radius: 0 10px 10px 0;
    padding: 14px 20px;
    margin-bottom: 10px;
  }
  .pitfall strong { color: #f472b6; }
  .challenge-box {
    background: rgba(167, 139, 250, 0.06);
    border: 1px solid rgba(167, 139, 250, 0.25);
    border-radius: 12px;
    padding: 18px 22px;
  }
  .challenge-box .label {
    font-weight: 700;
    color: #a78bfa;
    margin-bottom: 6px;
  }
  canvas {
    display: block;
    margin: 0 auto;
    border-radius: 10px;
    background: #0c1222;
    max-width: 100%;
    touch-action: none;
  }
  .muted { color: #94a3b8; }
  .blue { color: #60a5fa; }
  .green { color: #34d399; }
  .purple { color: #a78bfa; }
  .pink { color: #f472b6; }
  @media (max-width: 700px) {
    body { padding: 12px; }
    h1 { font-size: 1.5rem; }
    .card { padding: 18px 16px; }
    .given-grid { grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); }
    .answer-grid { grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); }
  }
</style>
</head>
<body>

<h1>Jednačina sa procentualnim poskupljenjem</h1>
<p class="subtitle">Linearne jednačine &mdash; Procenti, postavljanje jednačine iz teksta zadatka</p>

<!-- Problem Statement -->
<div class="card problem-statement">
  <div class="card-title"><span class="icon">&#x1F4CB;</span> Zadatak</div>
  <div class="problem-box">
    Početne cene knjige iz matematike i knjige iz fizike su jednake. Ako knjiga iz matematike prvo poskupi za \(20\%\), a zatim još za \(960\) dinara, a knjiga iz fizike poskupi za \(52\%\), njihove nove cene će ponovo biti jednake. Početna cena knjige iz matematike iznosi:
  </div>
  <div class="given-grid answer-options">
    <div class="given-item" data-option="A">
      <div class="label">(A)</div>
      <div class="value">\(3500\) din</div>
    </div>
    <div class="given-item" data-option="B">
      <div class="label">(B)</div>
      <div class="value">\(3100\) din</div>
    </div>
    <div class="given-item" data-option="C">
      <div class="label">(C)</div>
      <div class="value">\(3200\) din</div>
    </div>
    <div class="given-item" data-option="D">
      <div class="label">(D)</div>
      <div class="value">\(3000\) din</div>
    </div>
    <div class="given-item" data-option="E">
      <div class="label">(E)</div>
      <div class="value">\(2800\) din</div>
    </div>
  </div>
</div>

<!-- Plan -->
<div class="card">
  <div class="card-title"><span class="icon">&#x1F5FA;&#xFE0F;</span> Plan rešavanja</div>
  <ol class="plan-list">
    <li>Uvedemo nepoznatu \(x\) za početnu cenu (istu za obe knjige).</li>
    <li>Izrazimo novu cenu knjige iz matematike: prvo poskupljenje za \(20\%\), pa apsolutno povećanje za \(960\) din.</li>
    <li>Izrazimo novu cenu knjige iz fizike: poskupljenje za \(52\%\).</li>
    <li>Izjednačimo nove cene i rešimo linearnu jednačinu po \(x\).</li>
  </ol>
</div>

<!-- Theory Refresher -->
<div class="card">
  <div class="card-title"><span class="icon">&#x1F4D0;</span> Teorijska podloga</div>
  <details>
    <summary>Ključne formule i pojmovi</summary>
    <div class="inner">
      <p><strong>Procentualno povećanje:</strong> Ako neka veličina \(x\) poraste za \(p\%\), nova vrednost je:</p>
      \[x_{\text{novo}} = x \cdot \left(1 + \frac{p}{100}\right)\]

      <p style="margin-top:12px;"><strong>Primer &mdash; povećanje za 20%:</strong></p>
      \[x \cdot \left(1 + \frac{20}{100}\right) = x \cdot 1{,}2 = 1{,}2x\]

      <p style="margin-top:12px;"><strong>Primer &mdash; povećanje za 52%:</strong></p>
      \[x \cdot \left(1 + \frac{52}{100}\right) = x \cdot 1{,}52 = 1{,}52x\]

      <p style="margin-top:12px;"><strong>Apsolutno povećanje:</strong> Kada se na već uvećanu vrednost doda fiksni iznos \(k\):</p>
      \[x_{\text{novo}} = x_{\text{uvećano}} + k\]

      <p style="margin-top:12px;"><strong>Linearna jednačina:</strong> Jednačina oblika \(ax + b = cx\) rešava se prebacivanjem:</p>
      \[b = (c - a)x \implies x = \frac{b}{c - a}\]

      <p style="margin-top:12px;" class="muted">Ključ zadatka je razlikovanje procentualnog (relativnog) i apsolutnog (fiksnog) povećanja, i postavljanje jednačine iz uslova jednakosti novih cena.</p>
    </div>
  </details>
</div>

<!-- Visual Aid -->
<div class="card">
  <div class="card-title"><span class="icon">&#x1F4C8;</span> Vizuelni prikaz</div>
  <p class="muted" style="margin-bottom:14px;">Dijagram prikazuje početne i nove cene obe knjige. Pomerajte klizač da vidite za koju početnu cenu se nove cene izjednačavaju.</p>
  <div style="display:flex;gap:16px;flex-wrap:wrap;margin-bottom:14px;align-items:center;">
    <label style="display:flex;align-items:center;gap:8px;">
      <span class="blue">Početna cena x =</span>
      <input type="range" id="slider-x" min="2000" max="4000" value="3000" step="100" style="width:200px;">
      <span id="val-x" class="blue">3000</span>
      <span class="muted">din</span>
    </label>
  </div>
  <canvas id="canvas" width="700" height="420"></canvas>
  <p class="muted" style="margin-top:10px;text-align:center;font-size:0.88rem;" id="canvas-info">Pomerajte klizač da vidite kako se nove cene menjaju u zavisnosti od početne cene.</p>
</div>

<!-- Step-by-step Solution -->
<div class="card">
  <div class="card-title"><span class="icon">&#x270F;&#xFE0F;</span> Rešenje korak po korak</div>

  <div class="step" tabindex="0">
    <div class="step-label">Korak 1: Uvodimo nepoznatu</div>
    <p>Neka je \(x\) početna cena knjige (ista za obe knjige), izražena u dinarima.</p>
    <div class="math-block">
      \[\text{Početna cena matematike} = \text{Početna cena fizike} = x\]
    </div>
  </div>

  <div class="step" tabindex="0">
    <div class="step-label">Korak 2: Nova cena knjige iz matematike</div>
    <p>Knjiga iz matematike <strong>prvo</strong> poskupi za \(20\%\). Povećanje za \(20\%\) znači množenje sa \(1{,}2\):</p>
    <div class="math-block">
      \[x \cdot 1{,}2 = 1{,}2x\]
    </div>
    <p style="margin-top:10px;">Zatim se na tu uvećanu cenu doda još \(960\) dinara:</p>
    <div class="math-block">
      \[\text{Nova cena matematike} = 1{,}2x + 960\]
    </div>
  </div>

  <div class="step" tabindex="0">
    <div class="step-label">Korak 3: Nova cena knjige iz fizike</div>
    <p>Knjiga iz fizike poskupi za \(52\%\). Povećanje za \(52\%\) znači množenje sa \(1{,}52\):</p>
    <div class="math-block">
      \[\text{Nova cena fizike} = x \cdot 1{,}52 = 1{,}52x\]
    </div>
  </div>

  <details class="checkpoint">
    <summary><strong>Proveri se!</strong> Kolika je nova cena knjige iz fizike ako je \(x = 2000\)?</summary>
    <div class="inner">
      <p>\(1{,}52 \cdot 2000 = 3040\) dinara. Jednostavno pomnožimo početnu cenu sa \(1{,}52\).</p>
    </div>
  </details>

  <div class="step" tabindex="0">
    <div class="step-label">Korak 4: Postavljamo jednačinu</div>
    <p>Po uslovu zadatka, nove cene su <strong>jednake</strong>. Izjednačavamo izraze:</p>
    <div class="math-block">
      \[1{,}2x + 960 = 1{,}52x\]
    </div>
  </div>

  <div class="step" tabindex="0">
    <div class="step-label">Korak 5: Rešavamo jednačinu</div>
    <p>Prebacimo \(1{,}2x\) na desnu stranu (oduzimamo \(1{,}2x\) sa obe strane):</p>
    <div class="math-block">
      \[960 = 1{,}52x - 1{,}2x\]
    </div>
    <p style="margin-top:10px;">Izračunamo razliku koeficijenata:</p>
    <div class="math-block">
      \[960 = 0{,}32x\]
    </div>
    <p style="margin-top:10px;">Delimo obe strane sa \(0{,}32\):</p>
    <div class="math-block">
      \[x = \frac{960}{0{,}32} = \frac{960}{\dfrac{32}{100}} = 960 \cdot \frac{100}{32} = \frac{96\,000}{32} = 3000\]
    </div>
  </div>

  <details class="checkpoint">
    <summary><strong>Proveri se!</strong> Da li je \(\frac{960}{0{,}32}\) zaista \(3000\)?</summary>
    <div class="inner">
      <p>Da! Proverimo: \(0{,}32 \cdot 3000 = 960\). Možemo i ovako: \(\frac{960}{0{,}32} = \frac{960 \cdot 100}{32} = \frac{96\,000}{32} = 3000\). Tačno!</p>
    </div>
  </details>

  <div class="step" tabindex="0">
    <div class="step-label">Korak 6: Verifikacija</div>
    <p>Proverimo da li za \(x = 3000\) nove cene zaista budu jednake:</p>
    <div class="math-block">
      \[\text{Matematika: } 1{,}2 \cdot 3000 + 960 = 3600 + 960 = 4560 \text{ din}\]
    </div>
    <div class="math-block">
      \[\text{Fizika: } 1{,}52 \cdot 3000 = 4560 \text{ din}\]
    </div>
    <p style="margin-top:10px;" class="green"><strong>Nove cene su jednake: \(4560\) dinara. Rešenje je tačno!</strong></p>
  </div>
</div>

<!-- Key Insight -->
<div class="card">
  <div class="insight-box">
    <div class="label">Ključni uvid</div>
    <p>Razlika između ukupnog procentualnog rasta fizike (\(52\%\)) i prvog poskupljenja matematike (\(20\%\)) iznosi tačno \(32\%\). Upravo taj "manjak" od \(32\%\) kod knjige iz matematike nadoknađuje apsolutno povećanje od \(960\) dinara. Zato važi:</p>
    \[0{,}32 \cdot x = 960 \implies x = 3000\]
    <p style="margin-top:10px;">Suština zadatka: fiksnih \(960\) dinara odgovara tačno \(32\%\) početne cene. Kada to prepoznamo, jednačina se rešava u jednom koraku.</p>
  </div>
</div>

<!-- Final Answer -->
<div class="card">
  <div class="final-answer">
    <div class="label">Konačan odgovor</div>
    <div class="value">
      (D) \(\; 3000\) dinara
    </div>
    <p style="margin-top:14px;color:#94a3b8;font-size:1rem;">
      Početna cena knjige iznosi \(x = 3000\) dinara.
    </p>
  </div>
  <div class="answer-grid">
    <div class="answer-card">
      <div class="opt-label">(A)</div>
      <div class="opt-value">\(3500\) din</div>
    </div>
    <div class="answer-card">
      <div class="opt-label">(B)</div>
      <div class="opt-value">\(3100\) din</div>
    </div>
    <div class="answer-card">
      <div class="opt-label">(C)</div>
      <div class="opt-value">\(3200\) din</div>
    </div>
    <div class="answer-card correct">
      <div class="opt-label">(D)</div>
      <div class="opt-value">\(3000\) din</div>
    </div>
    <div class="answer-card">
      <div class="opt-label">(E)</div>
      <div class="opt-value">\(2800\) din</div>
    </div>
  </div>
  <p style="margin-top:16px;color:#94a3b8;font-size:0.92rem;text-align:center;">
    <strong>Verifikacija:</strong> Mat: \(1{,}2 \cdot 3000 + 960 = 4560\). Fiz: \(1{,}52 \cdot 3000 = 4560\). Jednake nove cene!
  </p>
</div>

<!-- Common Pitfalls -->
<div class="card">
  <div class="card-title"><span class="icon">&#x26A0;&#xFE0F;</span> Najčešće greške</div>
  <div class="pitfall">
    <strong>Greška 1: Pogrešno tumačenje "poskupi za 20%".</strong>
    Neki učenici oduzmu 20% umesto da dodaju, dobijajući \(0{,}8x\) umesto \(1{,}2x\). Reč "poskupi" jasno znači da se cena <em>povećava</em>, dakle koristimo faktor \(1 + 0{,}2 = 1{,}2\).
  </div>
  <div class="pitfall">
    <strong>Greška 2: Sabiranje procenata pre množenja.</strong>
    Pogrešno je reći da matematika poskupi "za 20% + 960 din = nekakav procenat" pa to sabirati sa 52%. Poskupljenje od 960 dinara je <em>fiksan iznos</em>, ne procenat, i primenjuje se <em>posle</em> procentualnog poskupljenja.
  </div>
  <div class="pitfall">
    <strong>Greška 3: Pogrešno deljenje sa decimalnim brojem.</strong>
    Deljenje \(\frac{960}{0{,}32}\) zahteva pažnju. Česta greška je izračunati \(\frac{960}{32} = 30\) umesto \(\frac{960}{0{,}32} = 3000\). Najsigurnije je eliminisati decimale: pomnožiti i brojilac i imenilac sa 100.
  </div>
</div>

<!-- Optional Challenge -->
<div class="card">
  <div class="challenge-box">
    <div class="label">Izazov za napredne</div>
    <p>Šta ako knjiga iz matematike prvo poskupi za 960 dinara, <em>pa tek onda</em> za 20%? Da li bi početna cena bila ista?</p>
    <details style="margin:15px 0;background:rgba(167,139,250,0.08);border-color:#a78bfa;">
      <summary>Nagoveštaj</summary>
      <div class="inner">
        <p class="muted">U tom slučaju nova cena matematike bi bila \((x + 960) \cdot 1{,}2 = 1{,}2x + 1152\). Jednačina postaje \(1{,}2x + 1152 = 1{,}52x\), što daje \(0{,}32x = 1152\), pa \(x = 3600\). Redosled operacija je bitan &mdash; sabiranje i množenje <strong>nisu</strong> komutativni kada se kombinuju!</p>
      </div>
    </details>
    <p style="margin-top:10px;">Bonus: Ako obe knjige poskupe za isti ukupan procenat, ali knjiga iz matematike u dva koraka (\(a\%\) pa \(b\%\)), za koji uslov važi \((1 + a/100)(1 + b/100) = 1 + c/100\)?</p>
    <details style="margin:15px 0;background:rgba(167,139,250,0.08);border-color:#a78bfa;">
      <summary>Nagoveštaj</summary>
      <div class="inner">
        <p class="muted">Razvijanjem proizvoda dobijamo \(c = a + b + \frac{ab}{100}\). Dva uzastopna procentualna povećanja od \(a\%\) i \(b\%\) ne daju zbir \(a + b\), već malo više &mdash; za \(\frac{ab}{100}\). Na primer, dva uzastopna povećanja od po \(10\%\) daju ukupno \(21\%\), a ne \(20\%\).</p>
      </div>
    </details>
  </div>
</div>

<script>
(() => {
  var canvas = document.getElementById('canvas');
  if (!canvas) return;
  var ctx = canvas.getContext('2d');
  var sliderX = document.getElementById('slider-x');
  var valX = document.getElementById('val-x');
  var infoEl = document.getElementById('canvas-info');

  var W = canvas.width;
  var H = canvas.height;
  var padL = 90;
  var padR = 40;
  var padT = 50;
  var padB = 65;
  var chartW = W - padL - padR;
  var chartH = H - padT - padB;

  function draw() {
    var x = parseInt(sliderX.value);
    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    var mathAfter20 = 1.2 * x;
    var mathNew = mathAfter20 + 960;
    var physNew = 1.52 * x;
    var diff = mathNew - physNew;

    var maxVal = Math.max(x, mathNew, physNew, 5000) * 1.12;
    var barGroupW = chartW / 3;
    var barW = Math.min(barGroupW * 0.45, 90);

    function yPos(val) {
      return padT + chartH * (1 - val / maxVal);
    }

    // Title
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Poređenje cena knjiga', W / 2, 28);

    // Y-axis grid lines
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    ctx.fillStyle = '#64748b';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    var gridStep = 1000;
    for (var tick = 0; tick <= maxVal; tick += gridStep) {
      var ty = yPos(tick);
      if (ty < padT - 10) break;
      ctx.beginPath();
      ctx.moveTo(padL, ty);
      ctx.lineTo(W - padR, ty);
      ctx.stroke();
      ctx.fillText(tick.toLocaleString('sr-RS'), padL - 8, ty + 4);
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(padL, padT);
    ctx.lineTo(padL, padT + chartH);
    ctx.lineTo(W - padR, padT + chartH);
    ctx.stroke();

    function drawBar(cx, val, color1, color2, label1, label2) {
      var barH = val / maxVal * chartH;
      var bx = cx - barW / 2;
      var by = yPos(val);

      var grd = ctx.createLinearGradient(0, by, 0, padT + chartH);
      grd.addColorStop(0, color1);
      grd.addColorStop(1, color2);
      ctx.fillStyle = grd;
      ctx.beginPath();
      ctx.roundRect(bx, by, barW, barH, [6, 6, 0, 0]);
      ctx.fill();

      ctx.strokeStyle = color1;
      ctx.lineWidth = 1.5;
      ctx.beginPath();
      ctx.roundRect(bx, by, barW, barH, [6, 6, 0, 0]);
      ctx.stroke();

      // Value on top
      ctx.fillStyle = color1;
      ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(Math.round(val).toLocaleString('sr-RS') + ' din', cx, by - 8);

      // Label below
      ctx.fillStyle = '#e2e8f0';
      ctx.font = '12px Segoe UI, system-ui, sans-serif';
      ctx.fillText(label1, cx, padT + chartH + 18);
      if (label2) {
        ctx.fillStyle = '#94a3b8';
        ctx.font = '11px Segoe UI, system-ui, sans-serif';
        ctx.fillText(label2, cx, padT + chartH + 34);
      }
    }

    var cx1 = padL + barGroupW * 0.5;
    var cx2 = padL + barGroupW * 1.5;
    var cx3 = padL + barGroupW * 2.5;

    // Bar 1: Initial price
    drawBar(cx1, x, '#60a5fa', '#3b82f680', 'Početna cena', 'x = ' + x.toLocaleString('sr-RS'));

    // Bar 2: Math book new price (composite)
    var mathTotalH = mathNew / maxVal * chartH;
    var math20H = mathAfter20 / maxVal * chartH;
    var bx2 = cx2 - barW / 2;
    var byTotal = yPos(mathNew);
    var by20 = yPos(mathAfter20);

    // Bottom part: 1.2x
    var grd2a = ctx.createLinearGradient(0, by20, 0, padT + chartH);
    grd2a.addColorStop(0, '#f59e0b');
    grd2a.addColorStop(1, '#d9770680');
    ctx.fillStyle = grd2a;
    ctx.beginPath();
    ctx.roundRect(bx2, by20, barW, math20H, [0, 0, 0, 0]);
    ctx.fill();

    // Top part: +960
    var grd2b = ctx.createLinearGradient(0, byTotal, 0, by20);
    grd2b.addColorStop(0, '#f472b6');
    grd2b.addColorStop(1, '#f59e0b');
    ctx.fillStyle = grd2b;
    ctx.beginPath();
    ctx.roundRect(bx2, byTotal, barW, by20 - byTotal, [6, 6, 0, 0]);
    ctx.fill();

    // Border
    ctx.strokeStyle = '#f59e0b';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.roundRect(bx2, byTotal, barW, mathTotalH, [6, 6, 0, 0]);
    ctx.stroke();

    // Divider line
    ctx.setLineDash([4, 3]);
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(bx2, by20);
    ctx.lineTo(bx2 + barW, by20);
    ctx.stroke();
    ctx.setLineDash([]);

    // Component labels
    ctx.font = 'bold 10px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillStyle = '#f472b6';
    ctx.fillText('+960 din', bx2 + barW + 5, (byTotal + by20) / 2 + 4);
    ctx.fillStyle = '#f59e0b';
    ctx.fillText('+20%', bx2 + barW + 5, (by20 + padT + chartH) / 2 + 4);

    // Value on top
    ctx.fillStyle = '#f59e0b';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText(Math.round(mathNew).toLocaleString('sr-RS') + ' din', cx2, byTotal - 8);

    // Label below
    ctx.fillStyle = '#e2e8f0';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.fillText('Matematika', cx2, padT + chartH + 18);
    ctx.fillStyle = '#94a3b8';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.fillText('1,2x + 960', cx2, padT + chartH + 34);

    // Bar 3: Physics new price
    drawBar(cx3, physNew, '#34d399', '#059669' + '80', 'Fizika', '1,52x = ' + Math.round(physNew).toLocaleString('sr-RS'));

    // Equality indicator between bars 2 and 3
    var eqX = (cx2 + cx3) / 2;
    var eqY = Math.min(yPos(mathNew), yPos(physNew)) + Math.abs(yPos(mathNew) - yPos(physNew)) / 2;

    if (Math.abs(diff) < 1) {
      // Draw connecting dashed line
      ctx.strokeStyle = '#4ade80';
      ctx.lineWidth = 2;
      ctx.setLineDash([8, 4]);
      ctx.beginPath();
      ctx.moveTo(cx2 + barW / 2 + 2, yPos(mathNew));
      ctx.lineTo(cx3 - barW / 2 - 2, yPos(physNew));
      ctx.stroke();
      ctx.setLineDash([]);

      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 24px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('=', eqX, eqY);

      ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
      ctx.fillText('Jednake cene!', eqX, eqY + 20);
    } else {
      ctx.fillStyle = '#f472b6';
      ctx.font = 'bold 20px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('\u2260', eqX, eqY);

      ctx.fillStyle = '#94a3b8';
      ctx.font = '11px Segoe UI, system-ui, sans-serif';
      var sign = diff > 0 ? '+' : '';
      ctx.fillText('Razlika: ' + sign + Math.round(diff).toLocaleString('sr-RS') + ' din', eqX, eqY + 18);
    }

    // Info text
    infoEl.textContent =
      'x = ' + x.toLocaleString('sr-RS') + ' din | ' +
      'Matematika: ' + Math.round(mathNew).toLocaleString('sr-RS') + ' din | ' +
      'Fizika: ' + Math.round(physNew).toLocaleString('sr-RS') + ' din | ' +
      'Razlika: ' + Math.round(diff).toLocaleString('sr-RS') + ' din';
  }

  sliderX.addEventListener('input', function() {
    valX.textContent = sliderX.value;
    draw();
  });

  // Touch support
  canvas.addEventListener('touchstart', function(e) { e.preventDefault(); }, { passive: false });
  canvas.addEventListener('touchmove', function(e) { e.preventDefault(); }, { passive: false });

  // Step click interactivity
  var steps = document.querySelectorAll('.step');
  steps.forEach(function(step) {
    step.addEventListener('click', function() {
      steps.forEach(function(s) { s.classList.remove('active'); });
      step.classList.add('active');
    });
  });

  // Responsive canvas
  function resizeCanvas() {
    var container = canvas.parentElement;
    var maxW = container.clientWidth - 56;
    if (maxW < 700) {
      canvas.style.width = maxW + 'px';
      canvas.style.height = (maxW * 420 / 700) + 'px';
    }
  }
  window.addEventListener('resize', resizeCanvas);
  resizeCanvas();

  draw();
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{"title":"Jednačina sa procentualnim poskupljenjem cena knjiga","subject":"math","unit":"algebra","topic_tags":["linearne jednačine","procenti","tekstualni zadaci","procentualno povećanje"]}
BRAINSPARK_META-->