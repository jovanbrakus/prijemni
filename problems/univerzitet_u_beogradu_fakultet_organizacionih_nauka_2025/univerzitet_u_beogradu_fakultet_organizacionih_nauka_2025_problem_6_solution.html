<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Geometrijski niz sa uslovom nejednakosti</title>
<script type="text/info" id="logic-scratchpad">
Problem: a1, a2, a3 are the first three terms of a geometric sequence with common ratio q (natural number).
Given: a1 = 8, and 2*a2 - a3/2 > 15.
Find: a1 + a2 + a3.

Step 1: Express terms via a1 and q.
  a1 = 8
  a2 = a1 * q = 8q
  a3 = a1 * q^2 = 8q^2

Step 2: Substitute into the inequality.
  2*a2 - a3/2 > 15
  2*(8q) - (8q^2)/2 > 15
  16q - 4q^2 > 15

Step 3: Rearrange.
  -4q^2 + 16q - 15 > 0
  Multiply both sides by -1 (flip inequality):
  4q^2 - 16q + 15 < 0

Step 4: Factor the quadratic 4q^2 - 16q + 15.
  Discriminant: 256 - 240 = 16
  Roots: (16 +/- 4) / 8 = 20/8 = 5/2 and 12/8 = 3/2
  So: 4q^2 - 16q + 15 = 4(q - 3/2)(q - 5/2) = (2q - 3)(2q - 5)

  Alternatively: factor directly as (2q - 3)(2q - 5):
  (2q - 3)(2q - 5) = 4q^2 - 10q - 6q + 15 = 4q^2 - 16q + 15 ✓

Step 5: Solve (2q - 3)(2q - 5) < 0.
  Product of two factors is negative when exactly one is negative.
  Critical points: q = 3/2 = 1.5 and q = 5/2 = 2.5
  The parabola opens up (coefficient of q^2 is positive), so the expression is negative between roots:
  3/2 < q < 5/2
  i.e., 1.5 < q < 2.5

Step 6: Since q is a natural number (q ∈ N), and 1.5 < q < 2.5, the only natural number is q = 2.

Step 7: Compute the terms.
  a1 = 8
  a2 = 8 * 2 = 16
  a3 = 8 * 4 = 32

Step 8: Compute the sum.
  a1 + a2 + a3 = 8 + 16 + 32 = 56

Answer: (E) 56

Verification: Check the inequality with q = 2:
  2*a2 - a3/2 = 2*16 - 32/2 = 32 - 16 = 16 > 15 ✓

Check q = 1: 2*8 - 8/2 = 16 - 4 = 12. 12 > 15? No. ✗ (q=1 doesn't satisfy)
Check q = 3: 2*24 - 72/2 = 48 - 36 = 12. 12 > 15? No. ✗ (q=3 doesn't satisfy)

Only q = 2 works. Sum = 56. Matches answer (E). ✓
</script>
<script>
MathJax={tex:{inlineMath:[['\\(','\\)'],['$','$']],displayMath:[['\\[','\\]']]},svg:{fontCache:'global'}};
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.math-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  font-size: 1.05rem;
  overflow-x: auto;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.18);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
  transition: transform 0.2s, border-color 0.2s;
}

.given-item:hover {
  transform: translateY(-2px);
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.05rem;
  font-weight: 600;
}

.answer-option {
  cursor: default;
}

/* Plan card */
.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card h2 {
  color: #a78bfa;
}

/* Details/collapsible */
details {
  margin: 15px 0;
  background: rgba(167,139,250,0.06);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 1.05rem;
  user-select: none;
}

details summary:hover {
  color: #c4b5fd;
}

details[open] summary {
  margin-bottom: 12px;
}

details ul {
  list-style: none;
  padding-left: 0;
}

details li {
  padding: 6px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #e2e8f0;
}

details li:last-child {
  border-bottom: none;
}

/* Canvas card */
.canvas-card {
  text-align: center;
}

.canvas-card canvas {
  width: 100%;
  max-width: 700px;
  border-radius: 10px;
  border: 1px solid #334155;
  touch-action: none;
}

.canvas-hint {
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

/* Steps */
.step {
  display: flex;
  gap: 16px;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 14px;
  border-left: 3px solid transparent;
  transition: border-color 0.2s, background 0.2s;
  cursor: pointer;
}

.step:hover, .step.active {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}

.step-badge {
  flex-shrink: 0;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.95rem;
}

.step-content {
  flex: 1;
}

.step-content p {
  color: #94a3b8;
  margin-top: 6px;
}

/* Checkpoint */
.checkpoint {
  background: rgba(52,211,153,0.06);
  border: 1px solid rgba(52,211,153,0.18);
}

.checkpoint summary {
  color: #34d399;
}

/* Key insight */
.insight-card {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid rgba(167,139,250,0.25);
}

.insight-card h2 {
  color: #a78bfa;
}

/* Final answer */
.final-answer {
  border: 2px solid rgba(74,222,128,0.3);
  background: linear-gradient(135deg, rgba(74,222,128,0.06), rgba(52,211,153,0.04));
}

.final-answer h2 {
  color: #4ade80;
}

.answer-big {
  font-size: 1.6rem;
  font-weight: 700;
  color: #4ade80;
  text-align: center;
  margin: 20px 0;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 16px 0;
}

.option-box {
  padding: 10px 20px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: #1e293b;
  text-align: center;
  min-width: 90px;
  transition: transform 0.2s;
}

.option-box.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.1);
  transform: scale(1.05);
}

.option-box .opt-label {
  color: #94a3b8;
  font-size: 0.85rem;
}

.option-box .opt-value {
  font-size: 1.05rem;
  font-weight: 600;
  color: #e2e8f0;
}

.option-box.correct .opt-value {
  color: #4ade80;
}

.verification {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 14px;
  padding-top: 14px;
  border-top: 1px solid #334155;
}

/* Pitfalls */
.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 10px 14px;
  margin-bottom: 8px;
  background: rgba(224,148,104,0.06);
  border-left: 3px solid #e09468;
  border-radius: 0 8px 8px 0;
  color: #e2e8f0;
}

.pitfall-list li strong {
  color: #e09468;
}

/* Challenge */
.challenge-card {
  border: 1px solid rgba(244,114,182,0.2);
  background: rgba(244,114,182,0.04);
}

.challenge-card h2 {
  color: #f472b6;
}

/* Number line styling */
.number-line-legend {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  justify-content: center;
  margin-top: 10px;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 6px;
  color: #94a3b8;
  font-size: 0.85rem;
}

.legend-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  display: inline-block;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step { flex-direction: column; gap: 10px; }
  .given-grid { flex-direction: column; }
  .options-row { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Geometrijski niz i nejednakost</h1>
  <p class="subtitle">Geometrijski nizovi, kvadratne nejednakosti, prirodni brojevi</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Ako su \(a_1, a_2\) i \(a_3\) prva tri clana geometrijskog niza ciji je kolicnik \(q\) <span class="highlight">prirodan broj</span> i ako je \(a_1 = 8\) i</p>
    <div class="math-box">
      \[ 2a_2 - \frac{a_3}{2} > 15 \]
    </div>
    <p>onda je \(a_1 + a_2 + a_3\) jednako:</p>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(128\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(52\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(64\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(60\)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\(56\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>Izrazicemo clanove niza preko \(a_1\) i \(q\), zatim uvrstiti u nejednakost i resiti <span class="highlight">kvadratnu nejednakost</span> po \(q\). Posto je \(q\) prirodan broj, biramo jedinu celobrojnu vrednost iz intervala resenja, pa racunamo sumu.</p>
  </div>

  <!-- Theory Refresher -->
  <details>
    <summary>Kljucne formule i teoreme</summary>
    <ul>
      <li><strong>Geometrijski niz:</strong> Niz u kome je svaki clan (osim prvog) jednak prethodnom pomnozenom konstantnim kolicnikom \(q\):
        \[ a_n = a_1 \cdot q^{n-1} \]
      </li>
      <li><strong>Prva tri clana:</strong> \(a_1\), \(a_2 = a_1 q\), \(a_3 = a_1 q^2\).</li>
      <li><strong>Suma prvih \(n\) clanova:</strong>
        \[ S_n = a_1 \cdot \frac{q^n - 1}{q - 1}, \quad q \neq 1 \]
      </li>
      <li><strong>Kvadratna nejednakost:</strong> Za \(ax^2 + bx + c < 0\) sa \(a > 0\), resenje je interval izmedju korena (ako koreni postoje):
        \[ x_1 < x < x_2 \]
      </li>
    </ul>
  </details>

  <!-- Canvas Visualization -->
  <div class="card canvas-card">
    <h2>Vizualizacija: Brojevna prava i interval za q</h2>
    <p style="color:#94a3b8; margin-bottom: 14px;">Dijagram prikazuje vrednost izraza \(2a_2 - \frac{a_3}{2}\) u zavisnosti od \(q\) i oznacava interval gde je nejednakost zadovoljena.</p>
    <canvas id="viz-canvas" width="700" height="420"></canvas>
    <div class="number-line-legend">
      <div class="legend-item"><span class="legend-dot" style="background:#a78bfa;"></span> Parabola \(f(q) = -4q^2 + 16q - 15\)</div>
      <div class="legend-item"><span class="legend-dot" style="background:#f472b6;"></span> Granica \(f(q) = 0\)</div>
      <div class="legend-item"><span class="legend-dot" style="background:#4ade80;"></span> q = 2 (resenje)</div>
    </div>
  </div>

  <!-- Step-by-step solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <div class="step" id="step-1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Izrazi clanove niza</h3>
        <p>U geometrijskom nizu sa prvim clanom \(a_1 = 8\) i kolicnikom \(q\), prva tri clana su:</p>
        <div class="math-box">
          \[ a_1 = 8, \quad a_2 = 8q, \quad a_3 = 8q^2 \]
        </div>
      </div>
    </div>

    <div class="step" id="step-2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Uvrsti u nejednakost</h3>
        <p>Zamenjujemo \(a_2 = 8q\) i \(a_3 = 8q^2\) u zadatu nejednakost:</p>
        <div class="math-box">
          \[ 2 \cdot 8q - \frac{8q^2}{2} > 15 \]
        </div>
        <p>Pojednostavimo:</p>
        <div class="math-box">
          \[ 16q - 4q^2 > 15 \]
        </div>
      </div>
    </div>

    <div class="step" id="step-3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Sredi nejednakost</h3>
        <p>Prebacimo sve na jednu stranu:</p>
        <div class="math-box">
          \[ -4q^2 + 16q - 15 > 0 \]
        </div>
        <p>Pomnozimo obe strane sa \(-1\) (obrcemo znak nejednakosti!):</p>
        <div class="math-box">
          \[ 4q^2 - 16q + 15 < 0 \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Zasto smo obrnuli znak nejednakosti?</summary>
      <p>Kada se obe strane nejednakosti pomnoze (ili podele) <strong>negativnim brojem</strong>, znak nejednakosti se obrce. Pomnozili smo sa \(-1\), pa se \(>\) pretvorilo u \(<\).</p>
    </details>

    <div class="step" id="step-4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Faktorizuj kvadratni izraz</h3>
        <p>Trazimo korene jednacine \(4q^2 - 16q + 15 = 0\):</p>
        <div class="math-box">
          \[ q = \frac{16 \pm \sqrt{256 - 240}}{8} = \frac{16 \pm \sqrt{16}}{8} = \frac{16 \pm 4}{8} \]
        </div>
        <p>Dobijamo dva korena:</p>
        <div class="math-box">
          \[ q_1 = \frac{16 - 4}{8} = \frac{12}{8} = \frac{3}{2}, \qquad q_2 = \frac{16 + 4}{8} = \frac{20}{8} = \frac{5}{2} \]
        </div>
        <p>Stoga mozemo zapisati:</p>
        <div class="math-box">
          \[ 4q^2 - 16q + 15 = (2q - 3)(2q - 5) \]
        </div>
      </div>
    </div>

    <div class="step" id="step-5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Resi nejednakost</h3>
        <p>Nejednakost \((2q-3)(2q-5) < 0\) je zadovoljena kada je tacno jedan od cinilaca negativan, a drugi pozitivan.</p>
        <p>Posto je koeficijent uz \(q^2\) pozitivan (parabola je otvorena nagore), izraz je negativan <span class="highlight">izmedju korena</span>:</p>
        <div class="math-box" style="border-color: rgba(52,211,153,0.3); background: rgba(52,211,153,0.06);">
          \[ \frac{3}{2} < q < \frac{5}{2} \]
        </div>
        <p>Odnosno: \(1{,}5 < q < 2{,}5\).</p>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Koji prirodni brojevi se nalaze u intervalu (1,5 ; 2,5)?</summary>
      <p>Jedini prirodan broj u tom intervalu je <strong>q = 2</strong>. Broj 1 je manji od 1,5, a broj 3 je veci od 2,5.</p>
    </details>

    <div class="step" id="step-6">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Odredi q</h3>
        <p>Posto je \(q\) <span class="highlight">prirodan broj</span> i mora da pripada intervalu \(\left(\frac{3}{2}, \frac{5}{2}\right)\), jedina mogucnost je:</p>
        <div class="math-box" style="border-color: rgba(52,211,153,0.3); background: rgba(52,211,153,0.06);">
          \[ q = 2 \]
        </div>
      </div>
    </div>

    <div class="step" id="step-7">
      <div class="step-badge">7</div>
      <div class="step-content">
        <h3>Izracunaj clanove niza</h3>
        <p>Za \(q = 2\) i \(a_1 = 8\):</p>
        <div class="math-box">
          \[ a_1 = 8, \quad a_2 = 8 \cdot 2 = 16, \quad a_3 = 8 \cdot 4 = 32 \]
        </div>
      </div>
    </div>

    <div class="step" id="step-8">
      <div class="step-badge">8</div>
      <div class="step-content">
        <h3>Izracunaj trazenu sumu</h3>
        <div class="math-box" style="border-color: rgba(52,211,153,0.3); background: rgba(52,211,153,0.06);">
          \[ a_1 + a_2 + a_3 = 8 + 16 + 32 = 56 \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri se: Da li vazi nejednakost za q = 2?</summary>
      <p>\(2a_2 - \frac{a_3}{2} = 2 \cdot 16 - \frac{32}{2} = 32 - 16 = 16 > 15\). Da, nejednakost je zadovoljena!</p>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="card insight-card">
    <h2>Kljucni uvid</h2>
    <p>Nejednakost \(16q - 4q^2 > 15\) svodi se na kvadratnu nejednakost cije je resenje uzak interval \(\left(\frac{3}{2}, \frac{5}{2}\right)\). Uslov da je \(q\) prirodan broj drasticno suzava izbor &mdash; jedini prirodan broj u tom intervalu je <span class="highlight">q = 2</span>. To je sustina zadatka: kombinacija neprekidnog uslova (nejednakost) i diskretnog ogranicenja (prirodan broj).</p>
    <div class="math-box" style="text-align:center; margin-top:16px; font-size:1.1rem;">
      \[ q \in \mathbb{N} \cap \left(\frac{3}{2},\; \frac{5}{2}\right) = \{2\} \implies a_1 + a_2 + a_3 = 8 + 16 + 32 = 56 \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer">
    <h2>Konacan odgovor</h2>
    <div class="answer-big">(E) \(56\)</div>

    <div class="options-row">
      <div class="option-box">
        <div class="opt-label">(A)</div>
        <div class="opt-value">\(128\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(B)</div>
        <div class="opt-value">\(52\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(C)</div>
        <div class="opt-value">\(64\)</div>
      </div>
      <div class="option-box">
        <div class="opt-label">(D)</div>
        <div class="opt-value">\(60\)</div>
      </div>
      <div class="option-box correct">
        <div class="opt-label">(E)</div>
        <div class="opt-value">\(56\)</div>
      </div>
    </div>

    <p class="verification"><strong>Verifikacija:</strong> Za \(q = 2\): clanovi su 8, 16, 32. Proverimo nejednakost: \(2 \cdot 16 - \frac{32}{2} = 32 - 16 = 16 > 15\) &mdash; tacno. Proverimo i susedne vrednosti: za \(q = 1\) dobijamo \(16 - 4 = 12 \not> 15\), za \(q = 3\) dobijamo \(48 - 36 = 12 \not> 15\). Samo \(q = 2\) zadovoljava uslov, pa je odgovor <strong>(E) 56</strong>.</p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Ceste greske</h2>
    <ul class="pitfall-list">
      <li><strong>Zaboraviti obrtanje znaka nejednakosti:</strong> Kad se obe strane pomnoze sa \(-1\), znak nejednakosti se obrce. Greska \(4q^2 - 16q + 15 > 0\) (umesto \(< 0\)) vodi na uniju \(q < \frac{3}{2}\) ili \(q > \frac{5}{2}\), sto daje pogresne vrednosti \(q = 1\) ili \(q = 3\).</li>
      <li><strong>Ukljucivanje granica intervala:</strong> Nejednakost je stroga (\(> 15\), ne \(\geq 15\)), pa su tacke \(q = \frac{3}{2}\) i \(q = \frac{5}{2}\) iskljucene. U ovom zadatku to ne utice na odgovor (nisu prirodni brojevi), ali u slicnim problemima moze biti presudno.</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Sta ako umesto uslova da je \(q\) prirodan broj, zadamo da je \(q\) <strong>pozitivan ceo broj</strong>? Odgovor je isti. Ali sta ako je \(q\) <strong>pozitivan realan broj</strong>? Za koja sve \(q\) vazi nejednakost, i koji je tada raspon mogucih suma \(a_1 + a_2 + a_3\)?</p>
    <details>
      <summary>Pomoc</summary>
      <p>Za realno \(q \in \left(\frac{3}{2}, \frac{5}{2}\right)\), suma je \(S(q) = 8(1 + q + q^2)\). Izracunaj \(S\left(\frac{3}{2}\right)\) i \(S\left(\frac{5}{2}\right)\) da nadjes granice intervala.</p>
    </details>
  </div>

</div>

<script>
(() => {
  // Step click interactivity
  var steps = document.querySelectorAll('.step');
  steps.forEach(function(step) {
    step.addEventListener('click', function() {
      steps.forEach(function(s) { s.classList.remove('active'); });
      step.classList.add('active');
    });
  });

  // Canvas visualization
  var canvas = document.getElementById('viz-canvas');
  if (!canvas) return;
  var ctx = canvas.getContext('2d');
  var W = canvas.width;
  var H = canvas.height;
  var dpr = window.devicePixelRatio || 1;

  canvas.style.width = W + 'px';
  canvas.style.height = H + 'px';
  canvas.width = W * dpr;
  canvas.height = H * dpr;
  ctx.setTransform(dpr, 0, 0, dpr, 0, 0);

  var colors = {
    blue: '#60a5fa',
    purple: '#a78bfa',
    green: '#4ade80',
    greenDark: '#34d399',
    pink: '#f472b6',
    muted: '#94a3b8',
    text: '#e2e8f0',
    bg: '#0c1222',
    card: '#1e293b',
    border: '#334155',
    grid: '#1e293b'
  };

  // Plot f(q) = -4q^2 + 16q - 15 on interval [0, 4.5]
  // This is the function whose sign we test (> 0)
  var plotLeft = 80;
  var plotRight = W - 40;
  var plotTop = 50;
  var plotBottom = H - 70;
  var plotW = plotRight - plotLeft;
  var plotH = plotBottom - plotTop;

  // q range: 0 to 4.5
  var qMin = 0;
  var qMax = 4.5;
  // f range: f(2) = -16+32-15 = 1 (max), f(0) = -15, f(4.5) = -4*20.25+72-15 = -81+72-15 = -24
  var fMin = -25;
  var fMax = 4;

  function toCanvasX(q) {
    return plotLeft + (q - qMin) / (qMax - qMin) * plotW;
  }

  function toCanvasY(f) {
    return plotBottom - (f - fMin) / (fMax - fMin) * plotH;
  }

  function f(q) {
    return -4 * q * q + 16 * q - 15;
  }

  function draw() {
    ctx.fillStyle = colors.bg;
    ctx.fillRect(0, 0, W, H);

    // Title
    ctx.fillStyle = colors.blue;
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Grafik: f(q) = -4q\u00B2 + 16q - 15', W / 2, 28);
    ctx.fillStyle = colors.muted;
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.fillText('Nejednakost 16q - 4q\u00B2 > 15 je ekvivalentna f(q) > 0', W / 2, 44);

    // Grid lines
    ctx.strokeStyle = colors.grid;
    ctx.lineWidth = 0.5;

    // Horizontal grid
    for (var fv = -25; fv <= 4; fv += 5) {
      var y = toCanvasY(fv);
      ctx.beginPath();
      ctx.moveTo(plotLeft, y);
      ctx.lineTo(plotRight, y);
      ctx.stroke();
      ctx.fillStyle = colors.muted;
      ctx.font = '11px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'right';
      ctx.fillText(fv.toString(), plotLeft - 8, y + 4);
    }

    // Vertical grid
    for (var qv = 0; qv <= 4.5; qv += 0.5) {
      var x = toCanvasX(qv);
      ctx.beginPath();
      ctx.moveTo(x, plotTop);
      ctx.lineTo(x, plotBottom);
      ctx.stroke();
    }

    // q-axis labels
    ctx.fillStyle = colors.muted;
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    for (var ql = 0; ql <= 4.5; ql += 0.5) {
      var labelText = ql === Math.floor(ql) ? ql.toString() : ql.toFixed(1).replace('.', ',');
      ctx.fillText(labelText, toCanvasX(ql), plotBottom + 18);
    }

    // Axes
    ctx.strokeStyle = colors.border;
    ctx.lineWidth = 1.5;
    // q-axis
    ctx.beginPath();
    ctx.moveTo(plotLeft, plotBottom);
    ctx.lineTo(plotRight, plotBottom);
    ctx.stroke();
    // f-axis
    ctx.beginPath();
    ctx.moveTo(plotLeft, plotTop);
    ctx.lineTo(plotLeft, plotBottom);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = colors.text;
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('q', plotRight + 14, plotBottom + 5);
    ctx.save();
    ctx.translate(20, (plotTop + plotBottom) / 2);
    ctx.rotate(-Math.PI / 2);
    ctx.fillText('f(q)', 0, 0);
    ctx.restore();

    // Draw f(q) = 0 line (horizontal reference)
    var zeroY = toCanvasY(0);
    ctx.strokeStyle = colors.pink;
    ctx.lineWidth = 1;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.moveTo(plotLeft, zeroY);
    ctx.lineTo(plotRight, zeroY);
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = colors.pink;
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('f(q) = 0', plotRight - 55, zeroY - 6);

    // Shade the region where f(q) > 0 (between roots 1.5 and 2.5)
    ctx.fillStyle = 'rgba(74,222,128,0.12)';
    ctx.beginPath();
    ctx.moveTo(toCanvasX(1.5), zeroY);
    for (var qi = 1.5; qi <= 2.5; qi += 0.01) {
      var fv2 = f(qi);
      if (fv2 > 0) {
        ctx.lineTo(toCanvasX(qi), toCanvasY(fv2));
      }
    }
    ctx.lineTo(toCanvasX(2.5), zeroY);
    ctx.closePath();
    ctx.fill();

    // Draw the parabola
    ctx.strokeStyle = colors.purple;
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    var started = false;
    for (var qi2 = qMin; qi2 <= qMax; qi2 += 0.02) {
      var fval = f(qi2);
      var px = toCanvasX(qi2);
      var py = toCanvasY(fval);
      if (!started) {
        ctx.moveTo(px, py);
        started = true;
      } else {
        ctx.lineTo(px, py);
      }
    }
    ctx.stroke();

    // Mark roots q = 3/2 and q = 5/2
    var roots = [1.5, 2.5];
    var rootLabels = ['q = 3/2', 'q = 5/2'];
    roots.forEach(function(r, i) {
      var rx = toCanvasX(r);
      var ry = zeroY;

      // Root point
      ctx.beginPath();
      ctx.arc(rx, ry, 5, 0, 2 * Math.PI);
      ctx.fillStyle = colors.pink;
      ctx.fill();
      ctx.strokeStyle = '#0f172a';
      ctx.lineWidth = 1.5;
      ctx.stroke();

      // Label
      ctx.fillStyle = colors.pink;
      ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(rootLabels[i], rx, ry + 22);
    });

    // Mark q = 2 (the solution)
    var solX = toCanvasX(2);
    var solFVal = f(2); // = -16+32-15 = 1
    var solY = toCanvasY(solFVal);

    // Vertical dashed line from axis to point
    ctx.strokeStyle = colors.green;
    ctx.lineWidth = 1.5;
    ctx.setLineDash([4, 3]);
    ctx.beginPath();
    ctx.moveTo(solX, plotBottom);
    ctx.lineTo(solX, solY);
    ctx.stroke();
    // Horizontal dashed line from point to axis
    ctx.beginPath();
    ctx.moveTo(plotLeft, solY);
    ctx.lineTo(solX, solY);
    ctx.stroke();
    ctx.setLineDash([]);

    // Glow effect for the solution point
    var grad = ctx.createRadialGradient(solX, solY, 0, solX, solY, 18);
    grad.addColorStop(0, 'rgba(74,222,128,0.4)');
    grad.addColorStop(1, 'rgba(74,222,128,0)');
    ctx.fillStyle = grad;
    ctx.beginPath();
    ctx.arc(solX, solY, 18, 0, 2 * Math.PI);
    ctx.fill();

    // Solution point
    ctx.beginPath();
    ctx.arc(solX, solY, 6, 0, 2 * Math.PI);
    ctx.fillStyle = colors.green;
    ctx.fill();
    ctx.strokeStyle = '#0f172a';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Label for q = 2
    ctx.fillStyle = colors.green;
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('q = 2', solX, solY - 16);
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.fillText('f(2) = 1 > 0', solX + 50, solY + 2);

    // Mark q = 1 and q = 3 as rejected points
    var rejected = [1, 3];
    var rejLabels = ['q = 1', 'q = 3'];
    var rejFVals = [f(1), f(3)]; // f(1) = -4+16-15 = -3, f(3) = -36+48-15 = -3
    rejected.forEach(function(qr, i) {
      var rx2 = toCanvasX(qr);
      var ry2 = toCanvasY(rejFVals[i]);

      // Point
      ctx.beginPath();
      ctx.arc(rx2, ry2, 5, 0, 2 * Math.PI);
      ctx.fillStyle = '#ef4444';
      ctx.fill();
      ctx.strokeStyle = '#0f172a';
      ctx.lineWidth = 1.5;
      ctx.stroke();

      // X mark
      ctx.strokeStyle = '#ef4444';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(rx2 - 4, ry2 - 4);
      ctx.lineTo(rx2 + 4, ry2 + 4);
      ctx.moveTo(rx2 + 4, ry2 - 4);
      ctx.lineTo(rx2 - 4, ry2 + 4);
      ctx.stroke();

      // Label
      ctx.fillStyle = '#ef4444';
      ctx.font = '11px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(rejLabels[i], rx2, ry2 - 12);
      ctx.fillText('f = ' + rejFVals[i], rx2, ry2 + 18);
    });

    // Interval annotation
    ctx.fillStyle = colors.green;
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    var midX = toCanvasX(2);
    var annotY = plotBottom + 42;
    ctx.fillText('f(q) > 0 za q \u2208 (3/2, 5/2)', midX, annotY);
    ctx.fillStyle = colors.muted;
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.fillText('Jedini prirodan broj u intervalu: q = 2', midX, annotY + 16);

    // Bracket on number line at bottom
    var b1 = toCanvasX(1.5);
    var b2 = toCanvasX(2.5);
    var bY = plotBottom + 30;
    ctx.strokeStyle = colors.green;
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(b1, bY - 4);
    ctx.lineTo(b1, bY + 2);
    ctx.lineTo(b2, bY + 2);
    ctx.lineTo(b2, bY - 4);
    ctx.stroke();

    // Open circles at bracket ends
    ctx.beginPath();
    ctx.arc(b1, bY - 4, 3, 0, 2 * Math.PI);
    ctx.strokeStyle = colors.green;
    ctx.lineWidth = 1.5;
    ctx.stroke();
    ctx.beginPath();
    ctx.arc(b2, bY - 4, 3, 0, 2 * Math.PI);
    ctx.stroke();
  }

  draw();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Geometrijski niz sa uslovom nejednakosti",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["geometrijski niz", "kvadratna nejednakost", "prirodni brojevi", "kolicnik niza"]
}
BRAINSPARK_META-->