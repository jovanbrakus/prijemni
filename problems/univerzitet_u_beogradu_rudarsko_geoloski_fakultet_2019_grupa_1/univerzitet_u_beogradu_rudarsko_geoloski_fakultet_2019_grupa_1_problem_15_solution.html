<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zapremina pravilnog tetraedra — BrainSpark</title>
<script>MathJax={tex:{inlineMath:[['\\(','\\)'],['$','$']],displayMath:[['\\[','\\]']]},svg:{fontCache:'global'}};</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<script type="text/info" id="logic-scratchpad">
PROBLEM: Sve ivice trostrane piramide su jednake a. Njena zapremina je?
Ovo je pravilni tetraedar — svih 6 ivica jednake duzine a.

STEP 1: Osnova je jednakostranican trougao stranice a.
  P_osnove = (sqrt(3)/4) * a^2

STEP 2: Teziste jednakostranicnog trougla je na rastojanju R = a/sqrt(3) od temena.
  (teziste deli tezisnu duž u odnosu 2:1 od temena; visina trougla = a*sqrt(3)/2,
   pa R = (2/3)*(a*sqrt(3)/2) = a*sqrt(3)/3 = a/sqrt(3))

STEP 3: Visina tetraedra: vrh je na rastojanju a od svakog temena osnove.
  h^2 = a^2 - R^2 = a^2 - a^2/3 = 2a^2/3
  h = a * sqrt(2/3) = a*sqrt(6)/3

STEP 4: Zapremina = (1/3) * P_osnove * h
  V = (1/3) * (sqrt(3)/4)*a^2 * a*sqrt(6)/3
  V = (sqrt(3)*sqrt(6)*a^3) / (3*4*3)
  V = (sqrt(18)*a^3) / 36
  V = (3*sqrt(2)*a^3) / 36
  V = a^3*sqrt(2) / 12

ANSWER: A) a^3*sqrt(2)/12
</script>
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    background: #0f172a;
    color: #e2e8f0;
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    line-height: 1.7;
    padding: 2rem 1rem;
  }
  .container { max-width: 1200px; margin: 0 auto; }
  h1 {
    text-align: center;
    font-size: 2.2rem;
    margin-bottom: 0.3rem;
    background: linear-gradient(135deg, #60a5fa, #a78bfa, #f472b6);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  .subtitle {
    text-align: center;
    color: #94a3b8;
    margin-bottom: 2rem;
    font-size: 1.05rem;
  }
  .card {
    background: #1e293b;
    border: 1px solid #334155;
    border-radius: 14px;
    padding: 1.8rem;
    margin-bottom: 1.5rem;
  }
  .card h2 {
    font-size: 1.35rem;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  .badge {
    display: inline-block;
    padding: 0.15rem 0.65rem;
    border-radius: 999px;
    font-size: 0.78rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  .badge-blue { background: rgba(96,165,250,0.15); color: #60a5fa; }
  .badge-purple { background: rgba(167,139,250,0.15); color: #a78bfa; }
  .badge-green { background: rgba(52,211,153,0.15); color: #34d399; }
  .badge-pink { background: rgba(244,114,182,0.15); color: #f472b6; }

  .problem-statement {
    border-left: 4px solid #60a5fa;
  }
  .problem-statement p { font-size: 1.12rem; margin-bottom: 1rem; }

  .given-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 0.7rem;
    margin-top: 1rem;
  }
  .given-item {
    background: #0f172a;
    border: 1px solid #334155;
    border-radius: 10px;
    padding: 0.7rem 1rem;
    text-align: center;
    font-size: 1.05rem;
  }
  .given-item.answer-option { cursor: default; }
  .given-item.answer-option[data-option="A"] {
    border-color: #4ade80;
    background: rgba(74,222,128,0.08);
  }

  .plan-list {
    list-style: none;
    counter-reset: plan;
  }
  .plan-list li {
    counter-increment: plan;
    padding: 0.5rem 0 0.5rem 2.5rem;
    position: relative;
  }
  .plan-list li::before {
    content: counter(plan);
    position: absolute;
    left: 0;
    width: 1.8rem;
    height: 1.8rem;
    background: rgba(96,165,250,0.15);
    color: #60a5fa;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 0.85rem;
  }

  details {
    background: #0f172a;
    border: 1px solid #334155;
    border-radius: 10px;
    margin: 0.7rem 0;
    padding: 0;
  }
  details summary {
    padding: 0.8rem 1.2rem;
    cursor: pointer;
    font-weight: 600;
    color: #a78bfa;
    list-style: none;
  }
  details summary::before {
    content: '\25B8 ';
  }
  details[open] summary::before {
    content: '\25BE ';
  }
  details .details-body {
    padding: 0 1.2rem 1rem;
  }

  .step-card {
    background: #0f172a;
    border: 1px solid #334155;
    border-radius: 10px;
    padding: 1.3rem 1.5rem;
    margin-bottom: 1rem;
  }
  .step-card h3 {
    font-size: 1.08rem;
    margin-bottom: 0.6rem;
    color: #60a5fa;
  }
  .step-card p, .step-card ul { margin-bottom: 0.5rem; }
  .step-card ul { padding-left: 1.3rem; }

  .checkpoint {
    background: rgba(52,211,153,0.08);
    border: 1px solid rgba(52,211,153,0.25);
    border-radius: 10px;
    padding: 0.8rem 1.2rem;
    margin: 0.8rem 0;
    color: #34d399;
    font-weight: 600;
  }

  .final-answer-box {
    background: rgba(52,211,153,0.08);
    border: 2px solid #34d399;
    border-radius: 14px;
    padding: 1.8rem;
    text-align: center;
  }
  .final-answer-box .answer-label {
    font-size: 1rem;
    color: #34d399;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 0.5rem;
  }
  .final-answer-box .answer-value {
    font-size: 1.8rem;
    font-weight: 700;
    color: #4ade80;
  }

  .options-row {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-top: 1.2rem;
    flex-wrap: wrap;
  }
  .option-box {
    padding: 0.6rem 1.4rem;
    border-radius: 10px;
    font-size: 1.05rem;
    font-weight: 600;
    border: 2px solid #334155;
    color: #94a3b8;
    background: #0f172a;
  }
  .option-box.correct {
    border-color: #4ade80;
    color: #4ade80;
    background: rgba(74,222,128,0.1);
  }

  .insight-box {
    border-left: 4px solid #a78bfa;
  }
  .pitfall-item {
    background: rgba(244,114,182,0.06);
    border: 1px solid rgba(244,114,182,0.2);
    border-radius: 10px;
    padding: 0.9rem 1.2rem;
    margin-bottom: 0.7rem;
  }
  .pitfall-item strong { color: #f472b6; }

  canvas {
    display: block;
    margin: 0 auto;
    border-radius: 10px;
    max-width: 100%;
  }

  @media (max-width: 700px) {
    body { padding: 1rem 0.5rem; }
    h1 { font-size: 1.5rem; }
    .card { padding: 1.2rem; }
    .given-grid { grid-template-columns: repeat(2, 1fr); }
    .options-row { gap: 0.5rem; }
    .option-box { padding: 0.5rem 1rem; font-size: 0.95rem; }
  }
</style>
</head>
<body>
<div class="container">

  <!-- TITLE -->
  <h1>Zapremina pravilnog tetraedra</h1>
  <p class="subtitle">Stereometrija &mdash; trostrana piramida sa jednakim ivicama</p>

  <!-- PROBLEM STATEMENT -->
  <div class="card problem-statement">
    <h2><span class="badge badge-blue">Zadatak</span> Tekst zadatka</h2>
    <p>Sve ivice trostrane piramide su jednake \(a\). Njena zapremina je:</p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">(A) \(\dfrac{a^3\sqrt{2}}{12}\)</div>
      <div class="given-item answer-option" data-option="B">(B) \(\dfrac{a^3\sqrt{3}}{4}\)</div>
      <div class="given-item answer-option" data-option="C">(C) \(\dfrac{a^3\sqrt{2}}{4}\)</div>
      <div class="given-item answer-option" data-option="D">(D) \(\dfrac{a^3\sqrt{3}}{12}\)</div>
    </div>
  </div>

  <!-- PLAN -->
  <div class="card">
    <h2><span class="badge badge-purple">Plan</span> Kako cemo resiti</h2>
    <ol class="plan-list">
      <li>Prepoznati da je trostrana piramida sa svim jednakim ivicama <strong>pravilni tetraedar</strong>.</li>
      <li>Izracunati povrsinu osnove &mdash; jednakostranicnog trougla stranice \(a\).</li>
      <li>Odrediti visinu tetraedra koristeci Pitagorinu teoremu.</li>
      <li>Primeniti formulu za zapreminu piramide: \(V = \frac{1}{3} \cdot P_{\text{osnove}} \cdot h\).</li>
    </ol>
  </div>

  <!-- THEORY REFRESHER -->
  <div class="card">
    <h2><span class="badge badge-purple">Teorija</span> Podsetnik</h2>
    <details>
      <summary>Pravilni tetraedar</summary>
      <div class="details-body">
        <p>Pravilni tetraedar je trostrana piramida kod koje su <strong>sve cetiri strane jednakostranicni trouglovi</strong>, a svih 6 ivica jednake duzine. To je jedno od pet pravilnih poliedara (Platonovih tela).</p>
      </div>
    </details>
    <details>
      <summary>Povrsina jednakostranicnog trougla</summary>
      <div class="details-body">
        <p>Za jednakostranicni trougao stranice \(a\):</p>
        \[P = \frac{\sqrt{3}}{4}\,a^2\]
        <p>Visina trougla: \(h_{\triangle} = \frac{a\sqrt{3}}{2}\)</p>
        <p>Poluprecnik opisanog kruga (rastojanje od tezista do temena):</p>
        \[R = \frac{2}{3} \cdot h_{\triangle} = \frac{2}{3} \cdot \frac{a\sqrt{3}}{2} = \frac{a\sqrt{3}}{3} = \frac{a}{\sqrt{3}}\]
      </div>
    </details>
    <details>
      <summary>Zapremina piramide</summary>
      <div class="details-body">
        <p>Za bilo koju piramidu sa osnovom povrsine \(P\) i visinom \(h\):</p>
        \[V = \frac{1}{3} \cdot P \cdot h\]
        <p>Visina je normalno rastojanje od vrha piramide do ravni osnove.</p>
      </div>
    </details>
  </div>

  <!-- CANVAS VISUAL — 3D Tetrahedron -->
  <div class="card">
    <h2><span class="badge badge-green">Vizuelni prikaz</span> 3D tetraedar</h2>
    <canvas id="tetraCanvas" width="700" height="500"></canvas>
    <p style="text-align:center; color:#94a3b8; margin-top:0.5rem; font-size:0.88rem;">Pravilni tetraedar sa svim ivicama duzine \(a\), prikazan sa visinom \(h\) i tezistem osnove \(T\).</p>
  </div>

  <!-- STEP BY STEP -->
  <div class="card">
    <h2><span class="badge badge-blue">Resenje</span> Korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-card">
      <h3>Korak 1 &mdash; Identifikacija tela</h3>
      <p>Trostrana piramida sa svim jednakim ivicama je <strong>pravilni tetraedar</strong>. Ima 4 temena, 6 ivica (sve duzine \(a\)) i 4 strane koje su jednakostranicni trouglovi.</p>
      <p>Osnova je jednakostranicni trougao \(ABC\) stranice \(a\), a vrh oznacavamo sa \(S\).</p>
    </div>

    <!-- Step 2 -->
    <div class="step-card">
      <h3>Korak 2 &mdash; Povrsina osnove</h3>
      <p>Osnova je jednakostranicni trougao stranice \(a\). Njegova povrsina je:</p>
      \[P_{\text{osnove}} = \frac{\sqrt{3}}{4}\,a^2\]
    </div>

    <div class="checkpoint">
      Kontrolna tacka 1: Povrsina osnove je \(\frac{\sqrt{3}}{4}\,a^2\). Ovo je standardna formula &mdash; zapamti je!
    </div>

    <!-- Step 3 -->
    <div class="step-card">
      <h3>Korak 3 &mdash; Rastojanje od tezista do temena</h3>
      <p>Noziste visine tetraedra pada u <strong>teziste</strong> jednakostranicnog trougla (jer su sva bocna rebra jednaka). Teziste deli tezisnu duz u odnosu \(2:1\) od temena.</p>
      <p>Visina jednakostranicnog trougla je:</p>
      \[h_{\triangle} = \frac{a\sqrt{3}}{2}\]
      <p>Rastojanje od tezista \(T\) do temena osnove:</p>
      \[R = \frac{2}{3} \cdot h_{\triangle} = \frac{2}{3} \cdot \frac{a\sqrt{3}}{2} = \frac{a\sqrt{3}}{3} = \frac{a}{\sqrt{3}}\]
    </div>

    <!-- Step 4 -->
    <div class="step-card">
      <h3>Korak 4 &mdash; Visina tetraedra</h3>
      <p>Vrh \(S\) je na rastojanju \(a\) od svakog temena osnove. Noziste visine je teziste \(T\). Primenjujemo Pitagorinu teoremu na pravougli trougao \(SAT\):</p>
      \[h^2 + R^2 = a^2\]
      \[h^2 = a^2 - R^2 = a^2 - \frac{a^2}{3} = \frac{3a^2 - a^2}{3} = \frac{2a^2}{3}\]
      \[h = a\sqrt{\frac{2}{3}} = \frac{a\sqrt{6}}{3}\]
    </div>

    <div class="checkpoint">
      Kontrolna tacka 2: Visina tetraedra je \(h = \frac{a\sqrt{6}}{3}\). Proveri: \(h^2 + R^2 = \frac{2a^2}{3} + \frac{a^2}{3} = a^2\). Tacno!
    </div>

    <!-- Step 5 -->
    <div class="step-card">
      <h3>Korak 5 &mdash; Zapremina</h3>
      <p>Primenjujemo formulu za zapreminu piramide:</p>
      \[V = \frac{1}{3} \cdot P_{\text{osnove}} \cdot h = \frac{1}{3} \cdot \frac{\sqrt{3}}{4}\,a^2 \cdot \frac{a\sqrt{6}}{3}\]
      <p>Mnozimo brojioce i imenioce:</p>
      \[V = \frac{\sqrt{3} \cdot \sqrt{6} \cdot a^3}{3 \cdot 4 \cdot 3} = \frac{\sqrt{18}\,a^3}{36}\]
      <p>Sredujemo \(\sqrt{18}\):</p>
      \[\sqrt{18} = \sqrt{9 \cdot 2} = 3\sqrt{2}\]
      <p>Zamenjujemo:</p>
      \[V = \frac{3\sqrt{2}\,a^3}{36} = \frac{\sqrt{2}\,a^3}{12} = \frac{a^3\sqrt{2}}{12}\]
    </div>

    <div class="checkpoint">
      Kontrolna tacka 3: Zapremina pravilnog tetraedra ivice \(a\) je \(\dfrac{a^3\sqrt{2}}{12}\), sto odgovara odgovoru (A).
    </div>
  </div>

  <!-- KEY INSIGHT -->
  <div class="card insight-box">
    <h2><span class="badge badge-purple">Kljucni uvid</span></h2>
    <p>Kljucni korak u ovom zadatku je pravilno odrediti <strong>visinu tetraedra</strong>. Noziste visine pada u teziste osnove, jer su sva tri bocna rebra jednaka. Onda se visina dobija iz Pitagorine teoreme:</p>
    \[h = \sqrt{a^2 - R^2} = \sqrt{a^2 - \frac{a^2}{3}} = a\sqrt{\frac{2}{3}}\]
    <p style="margin-top:0.5rem;">Formula \(V = \frac{a^3\sqrt{2}}{12}\) je standardni rezultat za pravilni tetraedar i vredi je zapamtiti.</p>
  </div>

  <!-- FINAL ANSWER -->
  <div class="card">
    <h2><span class="badge badge-green">Rezultat</span> Konacan odgovor</h2>
    <div class="final-answer-box">
      <div class="answer-label">Zapremina pravilnog tetraedra je</div>
      <div class="answer-value">\(\dfrac{a^3\sqrt{2}}{12}\)</div>
    </div>
    <div class="options-row">
      <div class="option-box correct">(A) \(\frac{a^3\sqrt{2}}{12}\)</div>
      <div class="option-box">(B) \(\frac{a^3\sqrt{3}}{4}\)</div>
      <div class="option-box">(C) \(\frac{a^3\sqrt{2}}{4}\)</div>
      <div class="option-box">(D) \(\frac{a^3\sqrt{3}}{12}\)</div>
    </div>
  </div>

  <!-- COMMON PITFALLS -->
  <div class="card">
    <h2><span class="badge badge-pink">Zamke</span> Ceste greske</h2>
    <div class="pitfall-item">
      <strong>Pogresan poluprecnik opisanog kruga:</strong> Teziste deli tezisnu duz u odnosu \(2:1\) od temena, pa je \(R = \frac{a}{\sqrt{3}}\), a ne \(R = \frac{a\sqrt{3}}{2}\) (to je visina trougla, ne rastojanje od tezista). Ova greska vodi do odgovora (D).
    </div>
    <div class="pitfall-item">
      <strong>Zaboravljen faktor \(\frac{1}{3}\):</strong> Zapremina piramide je \(\frac{1}{3} \cdot P \cdot h\), ne \(P \cdot h\). To bi dalo tri puta veci rezultat &mdash; odgovor (C).
    </div>
    <div class="pitfall-item">
      <strong>Mesanje \(\sqrt{2}\) i \(\sqrt{3}\):</strong> Pazljivo racunaj proizvod \(\sqrt{3} \cdot \sqrt{6} = \sqrt{18} = 3\sqrt{2}\). Ako pogresno napises \(\sqrt{3} \cdot \sqrt{6} = \sqrt{9} = 3\), izgubices faktor \(\sqrt{2}\) i dobices pogresan odgovor.
    </div>
  </div>

  <!-- OPTIONAL CHALLENGE -->
  <div class="card">
    <h2><span class="badge badge-pink">Bonus</span> Dodatni izazov</h2>
    <p>Izracunaj zapreminu pravilnog tetraedra ivice \(a\) koristeci <strong>koordinatni pristup</strong>: postavi jedno teme u koordinatni pocetak, drugu ivicu duz \(x\)-ose, i odredi koordinate svih cetiri temena.</p>
    <details>
      <summary>Pogledaj resenje</summary>
      <div class="details-body">
        <p>Postavimo temena: \(A = (0,\,0,\,0)\), \(B = (a,\,0,\,0)\), \(C = \left(\frac{a}{2},\,\frac{a\sqrt{3}}{2},\,0\right)\).</p>
        <p>Teziste osnove: \(T = \left(\frac{a}{2},\,\frac{a\sqrt{3}}{6},\,0\right)\).</p>
        <p>Vrh: \(S = \left(\frac{a}{2},\,\frac{a\sqrt{3}}{6},\,\frac{a\sqrt{6}}{3}\right)\).</p>
        <p>Zapremina se moze izracunati i mesovitim proizvodom:</p>
        \[V = \frac{1}{6}\,\left|\vec{AB} \cdot (\vec{AC} \times \vec{AS})\right|\]
        <p>Rezultat je isti: \(V = \frac{a^3\sqrt{2}}{12}\).</p>
      </div>
    </details>
  </div>

</div>

<script>
(function() {
  var canvas = document.getElementById('tetraCanvas');
  if (!canvas) return;
  var ctx = canvas.getContext('2d');
  var W = canvas.width, H = canvas.height;

  ctx.fillStyle = '#0f172a';
  ctx.fillRect(0, 0, W, H);

  // 3D tetrahedron vertices (unit edge = 1, we'll scale)
  // A = (0, 0, 0), B = (1, 0, 0), C = (0.5, sqrt(3)/2, 0), S = (0.5, sqrt(3)/6, sqrt(6)/3)
  var s3 = Math.sqrt(3), s6 = Math.sqrt(6);
  var verts3D = [
    [0, 0, 0],                          // A
    [1, 0, 0],                          // B
    [0.5, s3 / 2, 0],                   // C
    [0.5, s3 / 6, s6 / 3]              // S (apex)
  ];

  // Rotation angles for a nice 3D view
  var rotY = -0.45;
  var rotX = 0.55;

  function rotateY(p, a) {
    var c = Math.cos(a), s = Math.sin(a);
    return [c * p[0] + s * p[2], p[1], -s * p[0] + c * p[2]];
  }
  function rotateX(p, a) {
    var c = Math.cos(a), s = Math.sin(a);
    return [p[0], c * p[1] - s * p[2], s * p[1] + c * p[2]];
  }

  // Center the model
  var cx3D = 0.5, cy3D = s3 / 6 + (s6 / 3 - 0) / 2, cz3D = 0;
  var centered = verts3D.map(function(v) {
    return [v[0] - cx3D, v[1] - cy3D, v[2] - cz3D];
  });

  // Apply rotations
  var rotated = centered.map(function(v) {
    return rotateX(rotateY(v, rotY), rotX);
  });

  // Project to 2D (orthographic with scale)
  var scale = 320;
  var ox = W / 2, oy = H / 2 + 20;

  function proj(v) {
    return [ox + v[0] * scale, oy - v[1] * scale];
  }

  var pts = rotated.map(proj);

  // Labels
  var labels = ['A', 'B', 'C', 'S'];
  var labelOffsets = [
    [-18, 18],   // A: bottom-left
    [10, 18],    // B: bottom-right
    [12, 8],     // C: right
    [-4, -18]    // S: top
  ];

  // Edges: A-B, A-C, B-C (base), A-S, B-S, C-S (lateral)
  var baseEdges = [[0,1], [1,2], [2,0]];
  var lateralEdges = [[0,3], [1,3], [2,3]];

  // Draw back edges (dashed) first, then front edges
  // Determine which edges are "back" based on z-depth
  // For simplicity, draw base with slight transparency, lateral solid

  // Fill base triangle with subtle color
  ctx.fillStyle = 'rgba(96,165,250,0.06)';
  ctx.beginPath();
  ctx.moveTo(pts[0][0], pts[0][1]);
  ctx.lineTo(pts[1][0], pts[1][1]);
  ctx.lineTo(pts[2][0], pts[2][1]);
  ctx.closePath();
  ctx.fill();

  // Fill lateral faces with subtle purple
  var faces = [[0,1,3], [1,2,3], [2,0,3]];
  var faceColors = [
    'rgba(167,139,250,0.04)',
    'rgba(167,139,250,0.07)',
    'rgba(167,139,250,0.05)'
  ];
  for (var fi = 0; fi < faces.length; fi++) {
    ctx.fillStyle = faceColors[fi];
    ctx.beginPath();
    ctx.moveTo(pts[faces[fi][0]][0], pts[faces[fi][0]][1]);
    ctx.lineTo(pts[faces[fi][1]][0], pts[faces[fi][1]][1]);
    ctx.lineTo(pts[faces[fi][2]][0], pts[faces[fi][2]][1]);
    ctx.closePath();
    ctx.fill();
  }

  // Draw base edges
  ctx.strokeStyle = '#60a5fa';
  ctx.lineWidth = 2.5;
  ctx.setLineDash([]);
  for (var i = 0; i < baseEdges.length; i++) {
    var e = baseEdges[i];
    ctx.beginPath();
    ctx.moveTo(pts[e[0]][0], pts[e[0]][1]);
    ctx.lineTo(pts[e[1]][0], pts[e[1]][1]);
    ctx.stroke();
  }

  // Draw the back lateral edge (C-S) as dashed
  // Determine which lateral edge is "behind" by checking z of midpoint
  var lateralMidZ = lateralEdges.map(function(e) {
    return (rotated[e[0]][2] + rotated[e[1]][2]) / 2;
  });
  var backIdx = 0;
  for (var li = 1; li < lateralMidZ.length; li++) {
    if (lateralMidZ[li] < lateralMidZ[backIdx]) backIdx = li;
  }

  // Draw back lateral edge dashed
  ctx.strokeStyle = 'rgba(167,139,250,0.4)';
  ctx.lineWidth = 2;
  ctx.setLineDash([8, 6]);
  var be = lateralEdges[backIdx];
  ctx.beginPath();
  ctx.moveTo(pts[be[0]][0], pts[be[0]][1]);
  ctx.lineTo(pts[be[1]][0], pts[be[1]][1]);
  ctx.stroke();
  ctx.setLineDash([]);

  // Draw front lateral edges solid
  ctx.strokeStyle = '#a78bfa';
  ctx.lineWidth = 2.5;
  for (var li2 = 0; li2 < lateralEdges.length; li2++) {
    if (li2 === backIdx) continue;
    var le = lateralEdges[li2];
    ctx.beginPath();
    ctx.moveTo(pts[le[0]][0], pts[le[0]][1]);
    ctx.lineTo(pts[le[1]][0], pts[le[1]][1]);
    ctx.stroke();
  }

  // Centroid of base triangle (T)
  var T3D = [(centered[0][0] + centered[1][0] + centered[2][0]) / 3,
             (centered[0][1] + centered[1][1] + centered[2][1]) / 3,
             (centered[0][2] + centered[1][2] + centered[2][2]) / 3];
  var Trot = rotateX(rotateY(T3D, rotY), rotX);
  var Tpt = proj(Trot);

  // Draw height line S -> T (dashed green)
  ctx.strokeStyle = '#34d399';
  ctx.lineWidth = 2.5;
  ctx.setLineDash([6, 4]);
  ctx.beginPath();
  ctx.moveTo(pts[3][0], pts[3][1]);
  ctx.lineTo(Tpt[0], Tpt[1]);
  ctx.stroke();
  ctx.setLineDash([]);

  // Draw R line T -> A (dashed pink)
  ctx.strokeStyle = '#f472b6';
  ctx.lineWidth = 2;
  ctx.setLineDash([5, 4]);
  ctx.beginPath();
  ctx.moveTo(Tpt[0], Tpt[1]);
  ctx.lineTo(pts[0][0], pts[0][1]);
  ctx.stroke();
  ctx.setLineDash([]);

  // Right angle mark at T
  // Direction from T to S (up) and T to A
  var TSdx = pts[3][0] - Tpt[0], TSdy = pts[3][1] - Tpt[1];
  var TSlen = Math.sqrt(TSdx * TSdx + TSdy * TSdy);
  var TSnx = TSdx / TSlen, TSny = TSdy / TSlen;
  var TAdx = pts[0][0] - Tpt[0], TAdy = pts[0][1] - Tpt[1];
  var TAlen = Math.sqrt(TAdx * TAdx + TAdy * TAdy);
  var TAnx = TAdx / TAlen, TAny = TAdy / TAlen;
  var raSz = 12;
  ctx.strokeStyle = '#34d399';
  ctx.lineWidth = 1.5;
  ctx.setLineDash([]);
  ctx.beginPath();
  ctx.moveTo(Tpt[0] + TSnx * raSz, Tpt[1] + TSny * raSz);
  ctx.lineTo(Tpt[0] + TSnx * raSz + TAnx * raSz, Tpt[1] + TSny * raSz + TAny * raSz);
  ctx.lineTo(Tpt[0] + TAnx * raSz, Tpt[1] + TAny * raSz);
  ctx.stroke();

  // Vertex dots
  var dotColors = ['#60a5fa', '#60a5fa', '#60a5fa', '#a78bfa'];
  for (var di = 0; di < 4; di++) {
    ctx.fillStyle = dotColors[di];
    ctx.beginPath();
    ctx.arc(pts[di][0], pts[di][1], 5, 0, 2 * Math.PI);
    ctx.fill();
  }

  // Centroid dot T
  ctx.fillStyle = '#f472b6';
  ctx.beginPath();
  ctx.arc(Tpt[0], Tpt[1], 4, 0, 2 * Math.PI);
  ctx.fill();

  // Labels for vertices
  ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'center';
  for (var lbi = 0; lbi < 4; lbi++) {
    ctx.fillStyle = dotColors[lbi];
    ctx.fillText(labels[lbi], pts[lbi][0] + labelOffsets[lbi][0], pts[lbi][1] + labelOffsets[lbi][1]);
  }

  // Label T
  ctx.fillStyle = '#f472b6';
  ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'left';
  ctx.fillText('T', Tpt[0] + 10, Tpt[1] + 5);

  // Label for height h
  var hMidX = (pts[3][0] + Tpt[0]) / 2;
  var hMidY = (pts[3][1] + Tpt[1]) / 2;
  ctx.fillStyle = '#34d399';
  ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'left';
  ctx.fillText('h = a\u221A6/3', hMidX + 12, hMidY);

  // Label for R
  var rMidX = (Tpt[0] + pts[0][0]) / 2;
  var rMidY = (Tpt[1] + pts[0][1]) / 2;
  ctx.fillStyle = '#f472b6';
  ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'center';
  ctx.fillText('R = a/\u221A3', rMidX, rMidY + 18);

  // Label edge "a" on one base edge (A-B)
  var eMidX = (pts[0][0] + pts[1][0]) / 2;
  var eMidY = (pts[0][1] + pts[1][1]) / 2;
  ctx.fillStyle = '#60a5fa';
  ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'center';
  ctx.fillText('a', eMidX, eMidY + 20);

  // Label lateral edge "a" on one lateral edge (A-S)
  var lMidX = (pts[0][0] + pts[3][0]) / 2;
  var lMidY = (pts[0][1] + pts[3][1]) / 2;
  ctx.fillStyle = '#a78bfa';
  ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'right';
  ctx.fillText('a', lMidX - 10, lMidY);

  // Title
  ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
  ctx.fillStyle = '#94a3b8';
  ctx.textAlign = 'center';
  ctx.fillText('Pravilni tetraedar \u2014 sve ivice jednake a', W / 2, 28);
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{"title":"Zapremina pravilnog tetraedra","subject":"math","unit":"stereometrija","topic_tags":["regular_tetrahedron","volume","pyramid","solid_geometry","Pythagorean_theorem"]}
BRAINSPARK_META-->