<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tetiva kruga i parametar a — BrainSpark</title>
<script>MathJax={tex:{inlineMath:[['\\(','\\)'],['$','$']],displayMath:[['\\[','\\]']]},svg:{fontCache:'global'}};</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<script type="text/info" id="logic-scratchpad">
PROBLEM: Ako prava y=1 seče krug k: x²+y²−8x−6y+a=0 po tetivi dužine 4,
tada je a jednako:
  A) 17   B) 20   C) 21   D) 25

STEP 1: Svesti jednačinu kruga na standardni oblik (kompletiranje kvadrata)
  x²−8x + y²−6y + a = 0
  (x²−8x+16) + (y²−6y+9) + a − 16 − 9 = 0
  (x−4)² + (y−3)² = 25 − a

  Centar: C(4, 3), poluprečnik: r = √(25−a)
  Uslov: 25 − a > 0, tj. a < 25

STEP 2: Rastojanje od centra C(4,3) do prave y=1
  d = |3 − 1| = 2

STEP 3: Veza tetive, poluprečnika i rastojanja (Pitagorina teorema)
  Ako je l = 4 dužina tetive, onda je polutetiva l/2 = 2
  r² = d² + (l/2)²
  25 − a = 4 + 4
  25 − a = 8   ???

  WAIT — proveriti. r² = d² + (l/2)²
  25 − a = 2² + 2² = 4 + 4 = 8
  a = 25 − 8 = 17

ANSWER: A) 17
</script>
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    background: #0f172a;
    color: #e2e8f0;
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    line-height: 1.7;
    padding: 2rem 1rem;
  }
  .container { max-width: 1200px; margin: 0 auto; }
  h1 {
    text-align: center;
    font-size: 2.2rem;
    margin-bottom: 0.3rem;
    background: linear-gradient(135deg, #60a5fa, #a78bfa, #f472b6);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  .subtitle {
    text-align: center;
    color: #94a3b8;
    margin-bottom: 2rem;
    font-size: 1.05rem;
  }
  .card {
    background: #1e293b;
    border: 1px solid #334155;
    border-radius: 14px;
    padding: 1.8rem;
    margin-bottom: 1.5rem;
  }
  .card h2 {
    font-size: 1.35rem;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  .badge {
    display: inline-block;
    padding: 0.15rem 0.65rem;
    border-radius: 999px;
    font-size: 0.78rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  .badge-blue { background: rgba(96,165,250,0.15); color: #60a5fa; }
  .badge-purple { background: rgba(167,139,250,0.15); color: #a78bfa; }
  .badge-green { background: rgba(52,211,153,0.15); color: #34d399; }
  .badge-pink { background: rgba(244,114,182,0.15); color: #f472b6; }

  .problem-statement {
    border-left: 4px solid #60a5fa;
  }
  .problem-statement p { font-size: 1.12rem; margin-bottom: 1rem; }

  .given-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 0.7rem;
    margin-top: 1rem;
  }
  .given-item {
    background: #0f172a;
    border: 1px solid #334155;
    border-radius: 10px;
    padding: 0.7rem 1rem;
    text-align: center;
    font-size: 1.05rem;
  }
  .given-item.answer-option { cursor: default; }

  .plan-list {
    list-style: none;
    counter-reset: plan;
  }
  .plan-list li {
    counter-increment: plan;
    padding: 0.5rem 0 0.5rem 2.5rem;
    position: relative;
  }
  .plan-list li::before {
    content: counter(plan);
    position: absolute;
    left: 0;
    width: 1.8rem;
    height: 1.8rem;
    background: rgba(96,165,250,0.15);
    color: #60a5fa;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 0.85rem;
  }

  details {
    background: #0f172a;
    border: 1px solid #334155;
    border-radius: 10px;
    margin: 0.7rem 0;
    padding: 0;
  }
  details summary {
    padding: 0.8rem 1.2rem;
    cursor: pointer;
    font-weight: 600;
    color: #a78bfa;
    list-style: none;
  }
  details summary::before {
    content: '\25B8 ';
  }
  details[open] summary::before {
    content: '\25BE ';
  }
  details .details-body {
    padding: 0 1.2rem 1rem;
  }

  .step-card {
    background: #0f172a;
    border: 1px solid #334155;
    border-radius: 10px;
    padding: 1.3rem 1.5rem;
    margin-bottom: 1rem;
  }
  .step-card h3 {
    font-size: 1.08rem;
    margin-bottom: 0.6rem;
    color: #60a5fa;
  }
  .step-card p, .step-card ul { margin-bottom: 0.5rem; }
  .step-card ul { padding-left: 1.3rem; }

  .checkpoint {
    background: rgba(52,211,153,0.08);
    border: 1px solid rgba(52,211,153,0.25);
    border-radius: 10px;
    padding: 0.8rem 1.2rem;
    margin: 0.8rem 0;
    color: #34d399;
    font-weight: 600;
  }

  .final-answer-box {
    background: rgba(52,211,153,0.08);
    border: 2px solid #34d399;
    border-radius: 14px;
    padding: 1.8rem;
    text-align: center;
  }
  .final-answer-box .answer-label {
    font-size: 1rem;
    color: #34d399;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 0.5rem;
  }
  .final-answer-box .answer-value {
    font-size: 1.8rem;
    font-weight: 700;
    color: #4ade80;
  }

  .options-row {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-top: 1.2rem;
    flex-wrap: wrap;
  }
  .option-box {
    padding: 0.6rem 1.4rem;
    border-radius: 10px;
    font-size: 1.05rem;
    font-weight: 600;
    border: 2px solid #334155;
    color: #94a3b8;
    background: #0f172a;
  }
  .option-box.correct {
    border-color: #4ade80;
    color: #4ade80;
    background: rgba(74,222,128,0.1);
  }

  .insight-box {
    border-left: 4px solid #a78bfa;
  }
  .pitfall-item {
    background: rgba(244,114,182,0.06);
    border: 1px solid rgba(244,114,182,0.2);
    border-radius: 10px;
    padding: 0.9rem 1.2rem;
    margin-bottom: 0.7rem;
  }
  .pitfall-item strong { color: #f472b6; }

  canvas {
    display: block;
    margin: 0 auto;
    border-radius: 10px;
    max-width: 100%;
  }

  @media (max-width: 700px) {
    body { padding: 1rem 0.5rem; }
    h1 { font-size: 1.5rem; }
    .card { padding: 1.2rem; }
    .given-grid { grid-template-columns: repeat(2, 1fr); }
    .options-row { gap: 0.5rem; }
    .option-box { padding: 0.5rem 1rem; font-size: 0.95rem; }
  }
</style>
</head>
<body>
<div class="container">

  <!-- TITLE -->
  <h1>Tetiva kruga i parametar a</h1>
  <p class="subtitle">Jednačina kruga, rastojanje tačke od prave, Pitagorina teorema</p>

  <!-- PROBLEM STATEMENT -->
  <div class="card problem-statement">
    <h2><span class="badge badge-blue">Zadatak</span> Tekst zadatka</h2>
    <p>Ako prava \(y = 1\) seče krug \(k\!: x^2 + y^2 - 8x - 6y + a = 0\) po tetivi dužine 4, tada je \(a\) jednako:</p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">(A) \(17\)</div>
      <div class="given-item answer-option" data-option="B">(B) \(20\)</div>
      <div class="given-item answer-option" data-option="C">(C) \(21\)</div>
      <div class="given-item answer-option" data-option="D">(D) \(25\)</div>
    </div>
  </div>

  <!-- PLAN -->
  <div class="card">
    <h2><span class="badge badge-purple">Plan</span> Kako ćemo rešiti</h2>
    <ol class="plan-list">
      <li>Svesti jednačinu kruga na standardni (kanonski) oblik kompletiranjem kvadrata.</li>
      <li>Očitati centar \(C\) i poluprečnik \(r\) kruga.</li>
      <li>Izračunati rastojanje \(d\) od centra kruga do prave \(y = 1\).</li>
      <li>Primeniti Pitagorinu teoremu u pravouglom trouglu: poluprečnik, rastojanje, polutetiva.</li>
      <li>Iz uslova da je tetiva dužine 4 odrediti vrednost parametra \(a\).</li>
    </ol>
  </div>

  <!-- THEORY REFRESHER -->
  <div class="card">
    <h2><span class="badge badge-purple">Teorija</span> Podsetnik</h2>
    <details>
      <summary>Jednačina kruga — standardni oblik</summary>
      <div class="details-body">
        <p>Opšti oblik jednačine kruga je:</p>
        \[x^2 + y^2 + Dx + Ey + F = 0\]
        <p>Kompletiranjem kvadrata dobijamo standardni (kanonski) oblik:</p>
        \[(x - p)^2 + (y - q)^2 = r^2\]
        <p>gde je \(C(p, q)\) centar, a \(r\) poluprečnik kruga.</p>
      </div>
    </details>
    <details>
      <summary>Tetiva kruga i rastojanje od centra</summary>
      <div class="details-body">
        <p>Kada prava seče krug, nastaje tetiva. Normala iz centra na pravu (tetivu) polovi tu tetivu, tj. deli je na dva jednaka dela.</p>
        <p>Ako je \(l\) dužina tetive, \(d\) rastojanje centra od prave, a \(r\) poluprečnik, onda iz Pitagorine teoreme važi:</p>
        \[r^2 = d^2 + \left(\frac{l}{2}\right)^2\]
      </div>
    </details>
    <details>
      <summary>Rastojanje tačke od horizontalne prave</summary>
      <div class="details-body">
        <p>Rastojanje tačke \(C(x_0, y_0)\) od horizontalne prave \(y = c\) je:</p>
        \[d = |y_0 - c|\]
        <p>Za opštu pravu \(Ax + By + C = 0\) koristi se formula:</p>
        \[d = \frac{|Ax_0 + By_0 + C|}{\sqrt{A^2 + B^2}}\]
      </div>
    </details>
  </div>

  <!-- CANVAS VISUAL -->
  <div class="card">
    <h2><span class="badge badge-green">Vizuelni prikaz</span> Krug i tetiva</h2>
    <canvas id="circleCanvas" width="700" height="500"></canvas>
  </div>

  <!-- STEP BY STEP -->
  <div class="card">
    <h2><span class="badge badge-blue">Rešenje</span> Korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-card">
      <h3>Korak 1 — Kompletiranje kvadrata</h3>
      <p>Polazimo od jednačine kruga:</p>
      \[x^2 + y^2 - 8x - 6y + a = 0\]
      <p>Grupišemo promenljive i kompletiramo kvadrate:</p>
      \[(x^2 - 8x) + (y^2 - 6y) + a = 0\]
      \[(x^2 - 8x + 16) - 16 + (y^2 - 6y + 9) - 9 + a = 0\]
      \[(x - 4)^2 + (y - 3)^2 = 25 - a\]
    </div>

    <!-- Step 2 -->
    <div class="step-card">
      <h3>Korak 2 — Centar i poluprečnik</h3>
      <p>Iz standardnog oblika čitamo:</p>
      <ul>
        <li>Centar kruga: \(C(4,\; 3)\)</li>
        <li>Poluprečnik: \(r = \sqrt{25 - a}\)</li>
      </ul>
      <p>Uslov postojanja kruga: \(25 - a > 0\), tj. \(a < 25\).</p>
    </div>

    <div class="checkpoint">
      Kontrolna tačka 1: Kanonski oblik je \((x-4)^2 + (y-3)^2 = 25 - a\), centar \(C(4, 3)\).
    </div>

    <!-- Step 3 -->
    <div class="step-card">
      <h3>Korak 3 — Rastojanje centra od prave</h3>
      <p>Prava je \(y = 1\) (horizontalna prava). Rastojanje od centra \(C(4, 3)\) do prave \(y = 1\):</p>
      \[d = |y_C - 1| = |3 - 1| = 2\]
    </div>

    <!-- Step 4 -->
    <div class="step-card">
      <h3>Korak 4 — Pitagorina teorema za tetivu</h3>
      <p>Normala iz centra na tetivu polovi tetivu. Polutetiva iznosi:</p>
      \[\frac{l}{2} = \frac{4}{2} = 2\]
      <p>Primenjujemo Pitagorinu teoremu u pravouglom trouglu (centar — središte tetive — kraj tetive):</p>
      \[r^2 = d^2 + \left(\frac{l}{2}\right)^2\]
      \[25 - a = 2^2 + 2^2\]
      \[25 - a = 4 + 4\]
      \[25 - a = 8\]
    </div>

    <div class="checkpoint">
      Kontrolna tačka 2: Jednačina je \(25 - a = 8\). Ostaje samo da izrazimo \(a\).
    </div>

    <!-- Step 5 -->
    <div class="step-card">
      <h3>Korak 5 — Određivanje parametra \(a\)</h3>
      <p>Iz prethodne jednačine:</p>
      \[a = 25 - 8 = 17\]
      <p>Provera uslova: \(a = 17 < 25\) — krug postoji. Poluprečnik: \(r = \sqrt{25 - 17} = \sqrt{8} = 2\sqrt{2}\).</p>
      <p>Verifikacija: \(d = 2 < r = 2\sqrt{2} \approx 2{,}83\) — prava zaista seče krug (rastojanje manje od poluprečnika).</p>
    </div>

    <div class="checkpoint">
      Kontrolna tačka 3: \(a = 17\), što odgovara odgovoru (A). Poluprečnik \(r = 2\sqrt{2}\), tetiva dužine 4. Sve se slaže!
    </div>
  </div>

  <!-- KEY INSIGHT -->
  <div class="card insight-box">
    <h2><span class="badge badge-purple">Ključni uvid</span></h2>
    <p>Čim vidite tetivu kruga i njenu dužinu, odmah pomislite na <strong>pravougli trougao</strong> koji formiraju:</p>
    <ul style="padding-left:1.3rem; margin-top:0.5rem;">
      <li><strong>Hipotenuza:</strong> poluprečnik \(r\) (od centra do kraja tetive)</li>
      <li><strong>Kateta 1:</strong> rastojanje \(d\) centra od prave (normala na tetivu)</li>
      <li><strong>Kateta 2:</strong> polutetiva \(\frac{l}{2}\) (normala polovi tetivu)</li>
    </ul>
    <p style="margin-top:0.5rem;">Ovaj trougao je univerzalan alat za sve zadatke sa tetivama kruga. Zapamtite relaciju \(r^2 = d^2 + \left(\frac{l}{2}\right)^2\)!</p>
  </div>

  <!-- FINAL ANSWER -->
  <div class="card">
    <h2><span class="badge badge-green">Rezultat</span> Konačan odgovor</h2>
    <div class="final-answer-box">
      <div class="answer-label">Vrednost parametra a je</div>
      <div class="answer-value">\(a = 17\)</div>
    </div>
    <div class="options-row">
      <div class="option-box correct">(A) 17</div>
      <div class="option-box">(B) 20</div>
      <div class="option-box">(C) 21</div>
      <div class="option-box">(D) 25</div>
    </div>
  </div>

  <!-- COMMON PITFALLS -->
  <div class="card">
    <h2><span class="badge badge-pink">Zamke</span> Česte greške</h2>
    <div class="pitfall-item">
      <strong>Pogrešno kompletiranje kvadrata:</strong> Česta greška je zaboraviti da se doda i oduzme isti broj. Npr. za \(x^2 - 8x\) treba dodati \((\frac{8}{2})^2 = 16\), a onda <em>oduzeti</em> 16 da se sačuva jednakost. Ako zaboravite oduzimanje, dobijate pogrešan \(r^2\).
    </div>
    <div class="pitfall-item">
      <strong>Zamena tetive i polutetive:</strong> Dužina tetive je 4, ali u Pitagorinu teoremu ulazi <em>polutetiva</em> \(\frac{l}{2} = 2\). Ako uzmete celu tetivu \(l = 4\), dobijate \(25 - a = 4 + 16 = 20\), pa \(a = 5\) — pogrešan rezultat.
    </div>
    <div class="pitfall-item">
      <strong>Pogrešan znak za rastojanje:</strong> Rastojanje je uvek pozitivno: \(d = |3 - 1| = 2\). Čak i da je centar ispod prave, formula sa apsolutnom vrednošću daje ispravan rezultat.
    </div>
    <div class="pitfall-item">
      <strong>Odgovor D) 25:</strong> Ako stavite \(a = 25\), onda je \(r^2 = 0\), što znači da krug degenerise u tačku — tetiva ne može postojati. Ovo je zamka za one koji ne provere uslov \(a < 25\).
    </div>
  </div>

  <!-- OPTIONAL CHALLENGE -->
  <div class="card">
    <h2><span class="badge badge-pink">Bonus</span> Dodatni izazov</h2>
    <p>Za isti krug \(x^2 + y^2 - 8x - 6y + 17 = 0\), odredi dužinu tetive koju na njemu odseče prava \(x = 2\).</p>
    <details>
      <summary>Pogledaj rešenje</summary>
      <div class="details-body">
        <p>Već znamo: centar \(C(4, 3)\), poluprečnik \(r = 2\sqrt{2}\).</p>
        <p>Rastojanje od centra do prave \(x = 2\):</p>
        \[d = |4 - 2| = 2\]
        <p>Polutetiva:</p>
        \[\frac{l}{2} = \sqrt{r^2 - d^2} = \sqrt{8 - 4} = \sqrt{4} = 2\]
        <p>Dužina tetive:</p>
        \[l = 2 \cdot 2 = 4\]
        <p>Zanimljivo — tetiva ima istu dužinu 4! To je zato što je rastojanje centra od obe prave jednako (\(d = 2\)).</p>
      </div>
    </details>
  </div>

</div>

<script>
(function() {
  var canvas = document.getElementById('circleCanvas');
  if (!canvas) return;
  var ctx = canvas.getContext('2d');
  var W = canvas.width, H = canvas.height;

  // Background
  ctx.fillStyle = '#0f172a';
  ctx.fillRect(0, 0, W, H);

  // Coordinate system parameters
  // Real coords: center C(4,3), radius r=2sqrt2 ~ 2.83, line y=1
  // Map: we'll center the view around C(4,3), scale = 60px per unit
  var scale = 60;
  var originX = W / 2 - 4 * scale + 200; // shift so circle is centered
  var originY = H / 2 + 1 * scale; // y increases downward on canvas

  function toCanvasX(x) { return originX + x * scale; }
  function toCanvasY(y) { return originY - y * scale; }

  var cx = 4, cy = 3;
  var r = Math.sqrt(8); // 2*sqrt(2) ~ 2.828
  var lineY = 1;

  // Title
  ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
  ctx.fillStyle = '#94a3b8';
  ctx.textAlign = 'center';
  ctx.fillText('Krug, tetiva i pravougli trougao', W / 2, 28);

  // Grid lines (subtle)
  ctx.strokeStyle = 'rgba(51,65,85,0.4)';
  ctx.lineWidth = 1;
  for (var gx = 0; gx <= 8; gx++) {
    ctx.beginPath();
    ctx.moveTo(toCanvasX(gx), toCanvasY(-1));
    ctx.lineTo(toCanvasX(gx), toCanvasY(7));
    ctx.stroke();
  }
  for (var gy = -1; gy <= 7; gy++) {
    ctx.beginPath();
    ctx.moveTo(toCanvasX(-0.5), toCanvasY(gy));
    ctx.lineTo(toCanvasX(8.5), toCanvasY(gy));
    ctx.stroke();
  }

  // Axes
  ctx.strokeStyle = '#475569';
  ctx.lineWidth = 2;
  // x-axis
  ctx.beginPath();
  ctx.moveTo(toCanvasX(-0.5), toCanvasY(0));
  ctx.lineTo(toCanvasX(8.5), toCanvasY(0));
  ctx.stroke();
  // y-axis
  ctx.beginPath();
  ctx.moveTo(toCanvasX(0), toCanvasY(-1));
  ctx.lineTo(toCanvasX(0), toCanvasY(7));
  ctx.stroke();

  // Axis labels
  ctx.font = '12px Segoe UI, system-ui, sans-serif';
  ctx.fillStyle = '#64748b';
  ctx.textAlign = 'center';
  for (var lx = 1; lx <= 8; lx++) {
    ctx.fillText(lx.toString(), toCanvasX(lx), toCanvasY(0) + 18);
  }
  ctx.textAlign = 'right';
  for (var ly = 1; ly <= 6; ly++) {
    ctx.fillText(ly.toString(), toCanvasX(0) - 8, toCanvasY(ly) + 4);
  }
  ctx.fillText('x', toCanvasX(8.5) + 4, toCanvasY(0) + 18);
  ctx.textAlign = 'center';
  ctx.fillText('y', toCanvasX(0) - 12, toCanvasY(7) - 4);

  // Line y = 1 (the secant line)
  ctx.strokeStyle = '#f472b6';
  ctx.lineWidth = 2;
  ctx.setLineDash([8, 4]);
  ctx.beginPath();
  ctx.moveTo(toCanvasX(-0.5), toCanvasY(lineY));
  ctx.lineTo(toCanvasX(8.5), toCanvasY(lineY));
  ctx.stroke();
  ctx.setLineDash([]);

  // Label for line
  ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
  ctx.fillStyle = '#f472b6';
  ctx.textAlign = 'left';
  ctx.fillText('y = 1', toCanvasX(7.2), toCanvasY(lineY) - 10);

  // Circle
  ctx.strokeStyle = '#60a5fa';
  ctx.lineWidth = 3;
  ctx.beginPath();
  ctx.arc(toCanvasX(cx), toCanvasY(cy), r * scale, 0, 2 * Math.PI);
  ctx.stroke();

  // Center point
  ctx.fillStyle = '#60a5fa';
  ctx.beginPath();
  ctx.arc(toCanvasX(cx), toCanvasY(cy), 5, 0, 2 * Math.PI);
  ctx.fill();

  // Label center
  ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
  ctx.fillStyle = '#60a5fa';
  ctx.textAlign = 'left';
  ctx.fillText('C(4, 3)', toCanvasX(cx) + 10, toCanvasY(cy) - 10);

  // Chord intersection points: circle center (4,3), r²=8, line y=1
  // (x-4)² + (1-3)² = 8 => (x-4)² = 8-4 = 4 => x-4 = ±2 => x=2 or x=6
  var A = { x: 2, y: 1 };
  var B = { x: 6, y: 1 };
  var M = { x: 4, y: 1 }; // midpoint of chord (foot of perpendicular)

  // Chord AB
  ctx.strokeStyle = '#34d399';
  ctx.lineWidth = 3;
  ctx.beginPath();
  ctx.moveTo(toCanvasX(A.x), toCanvasY(A.y));
  ctx.lineTo(toCanvasX(B.x), toCanvasY(B.y));
  ctx.stroke();

  // Points A and B
  ctx.fillStyle = '#34d399';
  ctx.beginPath();
  ctx.arc(toCanvasX(A.x), toCanvasY(A.y), 5, 0, 2 * Math.PI);
  ctx.fill();
  ctx.beginPath();
  ctx.arc(toCanvasX(B.x), toCanvasY(B.y), 5, 0, 2 * Math.PI);
  ctx.fill();

  // Labels A, B
  ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
  ctx.fillStyle = '#34d399';
  ctx.textAlign = 'right';
  ctx.fillText('A(2, 1)', toCanvasX(A.x) - 8, toCanvasY(A.y) + 20);
  ctx.textAlign = 'left';
  ctx.fillText('B(6, 1)', toCanvasX(B.x) + 8, toCanvasY(B.y) + 20);

  // Midpoint M
  ctx.fillStyle = '#a78bfa';
  ctx.beginPath();
  ctx.arc(toCanvasX(M.x), toCanvasY(M.y), 4, 0, 2 * Math.PI);
  ctx.fill();
  ctx.font = '12px Segoe UI, system-ui, sans-serif';
  ctx.fillStyle = '#a78bfa';
  ctx.textAlign = 'center';
  ctx.fillText('M(4, 1)', toCanvasX(M.x), toCanvasY(M.y) + 18);

  // Perpendicular from C to chord (C to M) — the distance d
  ctx.strokeStyle = '#a78bfa';
  ctx.lineWidth = 2;
  ctx.setLineDash([5, 3]);
  ctx.beginPath();
  ctx.moveTo(toCanvasX(cx), toCanvasY(cy));
  ctx.lineTo(toCanvasX(M.x), toCanvasY(M.y));
  ctx.stroke();
  ctx.setLineDash([]);

  // Right angle mark at M
  var markSize = 8;
  ctx.strokeStyle = '#a78bfa';
  ctx.lineWidth = 1.5;
  ctx.beginPath();
  ctx.moveTo(toCanvasX(M.x) + markSize, toCanvasY(M.y));
  ctx.lineTo(toCanvasX(M.x) + markSize, toCanvasY(M.y) - markSize);
  ctx.lineTo(toCanvasX(M.x), toCanvasY(M.y) - markSize);
  ctx.stroke();

  // Radius line from C to B
  ctx.strokeStyle = 'rgba(96,165,250,0.5)';
  ctx.lineWidth = 2;
  ctx.setLineDash([4, 4]);
  ctx.beginPath();
  ctx.moveTo(toCanvasX(cx), toCanvasY(cy));
  ctx.lineTo(toCanvasX(B.x), toCanvasY(B.y));
  ctx.stroke();
  ctx.setLineDash([]);

  // Dimension labels
  // d = 2 (vertical from C to M)
  ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
  ctx.fillStyle = '#a78bfa';
  ctx.textAlign = 'left';
  ctx.fillText('d = 2', toCanvasX(cx) + 12, toCanvasY((cy + M.y) / 2) + 4);

  // r = 2\u221A2 (from C to B)
  ctx.fillStyle = 'rgba(96,165,250,0.85)';
  ctx.textAlign = 'left';
  ctx.fillText('r = 2\u221A2', toCanvasX((cx + B.x) / 2) + 8, toCanvasY((cy + B.y) / 2) - 8);

  // l/2 = 2 (from M to B)
  ctx.fillStyle = '#34d399';
  ctx.textAlign = 'center';
  ctx.fillText('l/2 = 2', toCanvasX((M.x + B.x) / 2), toCanvasY(M.y) - 14);

  // l/2 = 2 (from A to M)
  ctx.fillText('l/2 = 2', toCanvasX((A.x + M.x) / 2), toCanvasY(M.y) - 14);

  // Formula box in bottom right
  var boxX = W - 280, boxY = H - 100;
  ctx.fillStyle = 'rgba(30,41,59,0.9)';
  ctx.strokeStyle = '#334155';
  ctx.lineWidth = 1;
  ctx.beginPath();
  ctx.roundRect(boxX, boxY, 260, 80, 10);
  ctx.fill();
  ctx.stroke();

  ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
  ctx.fillStyle = '#e2e8f0';
  ctx.textAlign = 'left';
  ctx.fillText('Pitagorina teorema:', boxX + 15, boxY + 24);
  ctx.font = '13px Segoe UI, system-ui, sans-serif';
  ctx.fillStyle = '#94a3b8';
  ctx.fillText('r\u00B2 = d\u00B2 + (l/2)\u00B2', boxX + 15, boxY + 46);
  ctx.fillStyle = '#4ade80';
  ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
  ctx.fillText('25 \u2212 a = 4 + 4 = 8  \u21D2  a = 17', boxX + 15, boxY + 68);
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{"title":"Tetiva kruga i parametar a","subject":"math","unit":"analytic_geometry","topic_tags":["circle_equation","chord_length","distance_point_to_line","completing_the_square","pythagorean_theorem"]}
BRAINSPARK_META-->