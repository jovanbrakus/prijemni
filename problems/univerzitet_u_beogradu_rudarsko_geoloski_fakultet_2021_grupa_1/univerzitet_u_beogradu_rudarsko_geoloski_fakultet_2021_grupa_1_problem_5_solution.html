<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zbir kvadrata resenja kvadratne jednacine</title>

<script type="text/info" id="logic-scratchpad">
Problem: Given x^2 - (k+2)x + 2 = 0 with roots x1, x2, find x1^2 + x2^2.

By Vieta's formulas for x^2 - (k+2)x + 2 = 0:
  x1 + x2 = k + 2
  x1 * x2 = 2

We need x1^2 + x2^2.
Use the identity: x1^2 + x2^2 = (x1 + x2)^2 - 2*x1*x2

Substituting:
  x1^2 + x2^2 = (k+2)^2 - 2*2
              = k^2 + 4k + 4 - 4
              = k^2 + 4k
              = k(k + 4)

Check options:
A) k^2 + 1       -- no
B) k(k+4) = k^2 + 4k  -- YES
C) k(k+2) = k^2 + 2k  -- no
D) k^2 + 4       -- no

Verification with a specific k value:
Let k = 1. Then equation is x^2 - 3x + 2 = 0 => (x-1)(x-2) = 0
x1 = 1, x2 = 2
x1^2 + x2^2 = 1 + 4 = 5
k(k+4) = 1*5 = 5. Correct!

Let k = 0. Then equation is x^2 - 2x + 2 = 0
D = 4 - 8 = -4 < 0 (complex roots, but identity still holds)
x1^2 + x2^2 = 0*(0+4) = 0
Check: (x1+x2)^2 - 2*x1*x2 = 4 - 4 = 0. Correct!

Answer: B) k(k+4)
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.1rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56, 189, 248, 0.06);
  border: 1px solid rgba(56, 189, 248, 0.12);
  border-radius: 10px;
  padding: 12px 18px;
  text-align: center;
  min-width: 80px;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card p {
  color: #94a3b8;
  font-size: 1rem;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  font-size: 1.05rem;
  padding: 8px 0;
}

details summary:hover {
  color: #93c5fd;
}

.theory-content {
  padding: 12px 0;
  color: #e2e8f0;
}

.theory-content ul {
  list-style: none;
  padding-left: 0;
}

.theory-content li {
  padding: 8px 0;
  border-bottom: 1px solid #334155;
  color: #e2e8f0;
}

.theory-content li:last-child {
  border-bottom: none;
}

.step-container {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  padding: 16px;
  border-radius: 10px;
  border-left: 3px solid transparent;
  cursor: pointer;
  transition: all 0.2s ease;
}

.step-container:hover,
.step-container.active {
  background: rgba(96, 165, 250, 0.04);
  border-left-color: #4ade80;
}

.step-badge {
  width: 28px;
  height: 28px;
  min-width: 28px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.85rem;
  color: #0f172a;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  margin-bottom: 8px;
}

.step-content p {
  color: #94a3b8;
  margin-bottom: 8px;
}

.math-block {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 10px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.checkpoint {
  background: rgba(167, 139, 250, 0.08);
  border: 1px solid rgba(167, 139, 250, 0.2);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 15px 0;
}

.checkpoint summary {
  color: #a78bfa;
  font-size: 0.95rem;
}

.checkpoint .answer {
  padding-top: 10px;
  color: #4ade80;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid rgba(167, 139, 250, 0.3);
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  text-align: center;
}

.insight-box h2 {
  color: #a78bfa;
  margin-bottom: 12px;
}

.insight-box .formula {
  font-size: 1.3rem;
  color: #4ade80;
  margin: 12px 0;
}

.final-answer {
  background: linear-gradient(135deg, rgba(52, 211, 153, 0.1), rgba(74, 222, 128, 0.1));
  border: 2px solid rgba(52, 211, 153, 0.3);
  border-radius: 14px;
  padding: 28px;
  margin-bottom: 24px;
  text-align: center;
}

.final-answer h2 {
  color: #4ade80;
  margin-bottom: 16px;
}

.final-answer .answer-value {
  font-size: 1.8rem;
  color: #4ade80;
  font-weight: 700;
  margin-bottom: 16px;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 12px;
  margin: 16px 0;
}

.option-card {
  background: rgba(30, 41, 59, 0.8);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 20px;
  text-align: center;
  min-width: 80px;
}

.option-card.correct {
  border-color: #4ade80;
  background: rgba(74, 222, 128, 0.12);
}

.option-card .opt-label {
  color: #94a3b8;
  font-size: 0.8rem;
}

.option-card .opt-value {
  font-size: 1.1rem;
  font-weight: 600;
  color: #e2e8f0;
}

.option-card.correct .opt-value {
  color: #4ade80;
}

.verification {
  margin-top: 16px;
  color: #94a3b8;
  font-size: 0.95rem;
  font-style: italic;
}

.pitfalls {
  border-left: 3px solid #e09468;
}

.pitfalls h2 {
  color: #e09468;
}

.pitfalls ul {
  list-style: none;
  padding: 0;
}

.pitfalls li {
  padding: 8px 0;
  color: #94a3b8;
  border-bottom: 1px solid #334155;
}

.pitfalls li:last-child {
  border-bottom: none;
}

.challenge {
  border-left: 3px solid #f472b6;
}

.challenge h2 {
  color: #f472b6;
}

.canvas-card {
  text-align: center;
}

.canvas-card canvas {
  border-radius: 10px;
  width: 100%;
  max-width: 700px;
  touch-action: none;
}

.canvas-hint {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-top: 8px;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step-container { padding: 10px; }
  .given-grid { gap: 8px; }
  .given-item { min-width: 60px; padding: 8px 12px; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Zbir kvadrata resenja kvadratne jednacine</h1>
  <p class="subtitle">Primena Vijetovih formula i algebarskog identiteta za izracunavanje zbira kvadrata korena</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Ako su \( x_1 \), \( x_2 \) resenja kvadratne jednacine</p>
    <div class="math-block">
      \[ x^2 - (k + 2)x + 2 = 0 \]
    </div>
    <p>onda je \( x_1^2 + x_2^2 \) jednako:</p>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\( k^2 + 1 \)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\( k(k + 4) \)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\( k(k + 2) \)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\( k^2 + 4 \)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>Koristicemo Vijetove formule da odredimo zbir i proizvod korena, a zatim algebarski identitet \( x_1^2 + x_2^2 = (x_1 + x_2)^2 - 2x_1 x_2 \) da izrazimo zbir kvadrata korena preko parametra \( k \).</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Kljucne formule i teoreme</summary>
      <div class="theory-content">
        <ul>
          <li><strong>Vijetove formule:</strong> Za jednacinu \( x^2 + px + q = 0 \) sa resenjima \( x_1 \) i \( x_2 \), vazi: \( x_1 + x_2 = -p \) i \( x_1 \cdot x_2 = q \).</li>
          <li><strong>Zbir kvadrata korena:</strong> \( x_1^2 + x_2^2 = (x_1 + x_2)^2 - 2x_1 x_2 \). Ovo sledi iz razvijanja \( (x_1 + x_2)^2 = x_1^2 + 2x_1 x_2 + x_2^2 \).</li>
          <li><strong>Kvadrat binoma:</strong> \( (a + b)^2 = a^2 + 2ab + b^2 \)</li>
          <li><strong>Napomena:</strong> Identitet za zbir kvadrata vazi bez obzira da li su koreni realni ili kompleksni.</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card canvas-card">
    <h2>Graficki prikaz</h2>
    <canvas id="mainCanvas" width="700" height="450"></canvas>
    <p class="canvas-hint">Koristite klizac da menjate vrednost parametra \( k \) i posmatrate parabolu i zbir kvadrata njenih korena</p>
    <div style="margin-top: 14px; display: flex; align-items: center; justify-content: center; gap: 12px;">
      <span style="color: #94a3b8; font-size: 0.9rem;">\( k = \)</span>
      <input type="range" id="kSlider" min="-3" max="8" step="0.1" value="3"
        style="width: 260px; accent-color: #60a5fa;">
      <span id="kValue" style="color: #60a5fa; font-weight: 700; font-size: 1.1rem; min-width: 40px;">3</span>
    </div>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <div class="step-container" id="step1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Identifikujemo koeficijente</h3>
        <p>Data jednacina je \( x^2 - (k+2)x + 2 = 0 \). Uporedimo je sa opstim oblikom \( x^2 + px + q = 0 \):</p>
        <div class="math-block">
          \[ p = -(k+2), \quad q = 2 \]
        </div>
        <p>Koeficijent uz \( x \) je \( -(k+2) \), a slobodan clan je \( 2 \).</p>
      </div>
    </div>

    <div class="step-container" id="step2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Primenimo Vijetove formule</h3>
        <p>Za jednacinu \( x^2 + px + q = 0 \), Vijetove formule glase \( x_1 + x_2 = -p \) i \( x_1 \cdot x_2 = q \). Primenjujemo:</p>
        <div class="math-block">
          \[ x_1 + x_2 = -(-(k+2)) = k + 2 \]
        </div>
        <div class="math-block">
          \[ x_1 \cdot x_2 = 2 \]
        </div>
        <p>Dakle, zbir korena je \( k + 2 \), a proizvod korena je \( 2 \).</p>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri sebe: Koliki su zbir i proizvod korena za \( k = 1 \)?</summary>
      <div class="answer">Za \( k = 1 \): zbir je \( 1 + 2 = 3 \), proizvod je \( 2 \). Jednacina je \( x^2 - 3x + 2 = 0 \), tj. \( (x-1)(x-2) = 0 \), pa su koreni 1 i 2. Zaista: \( 1 + 2 = 3 \) i \( 1 \cdot 2 = 2 \).</div>
    </details>

    <div class="step-container" id="step3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Koristimo identitet za zbir kvadrata</h3>
        <p>Kljucni algebarski identitet koji nam omogucava da izracunamo zbir kvadrata korena bez poznavanja samih korena:</p>
        <div class="math-block">
          \[ x_1^2 + x_2^2 = (x_1 + x_2)^2 - 2 x_1 x_2 \]
        </div>
        <p>Ovaj identitet proizlazi iz razvijanja kvadrata binoma: \( (x_1 + x_2)^2 = x_1^2 + 2x_1 x_2 + x_2^2 \), odakle izrazimo \( x_1^2 + x_2^2 \) prebacivanjem clana \( 2x_1 x_2 \) na drugu stranu.</p>
      </div>
    </div>

    <div class="step-container" id="step4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Zamenjujemo poznate vrednosti</h3>
        <p>Ubacujemo zbir \( x_1 + x_2 = k + 2 \) i proizvod \( x_1 x_2 = 2 \) u identitet:</p>
        <div class="math-block">
          \[ x_1^2 + x_2^2 = (k + 2)^2 - 2 \cdot 2 \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Razvijemo i sredimo izraz</h3>
        <p>Razvijemo kvadrat binoma \( (k+2)^2 \):</p>
        <div class="math-block">
          \[ (k + 2)^2 = k^2 + 4k + 4 \]
        </div>
        <p>Zamenjujemo i oduzimamo:</p>
        <div class="math-block">
          \[ x_1^2 + x_2^2 = k^2 + 4k + 4 - 4 = k^2 + 4k \]
        </div>
        <p>Izlucimo zajednickog cinioca \( k \):</p>
        <div class="math-block">
          \[ x_1^2 + x_2^2 = k(k + 4) \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri sebe: Koliko je \( x_1^2 + x_2^2 \) za \( k = 1 \)?</summary>
      <div class="answer">Za \( k = 1 \): \( k(k+4) = 1 \cdot 5 = 5 \). Provera: koreni su 1 i 2, pa je \( 1^2 + 2^2 = 1 + 4 = 5 \). Tacno!</div>
    </details>

    <div class="step-container" id="step6">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Verifikacija sa konkretnim vrednostima</h3>
        <p>Proverimo za \( k = 3 \). Jednacina je \( x^2 - 5x + 2 = 0 \).</p>
        <div class="math-block">
          \[ x_{1,2} = \frac{5 \pm \sqrt{25 - 8}}{2} = \frac{5 \pm \sqrt{17}}{2} \]
        </div>
        <p>Racunamo zbir kvadrata korena direktno:</p>
        <div class="math-block">
          \[ x_1^2 + x_2^2 = (x_1 + x_2)^2 - 2x_1 x_2 = 25 - 4 = 21 \]
        </div>
        <p>Proverimo formulom: \( k(k + 4) = 3 \cdot 7 = 21 \). Rezultati se poklapaju!</p>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri sebe: Zasto je odgovor C) \( k(k+2) \) pogresan?</summary>
      <div class="answer">Odgovor C) daje \( k(k+2) = k^2 + 2k \). Za \( k = 1 \) to bi bilo \( 1 \cdot 3 = 3 \), ali smo vec ustanovili da je tacan zbir kvadrata \( 5 \). Greska bi nastala ako bismo zaboravili koeficijent 4 u razvijanju \( (k+2)^2 \), tj. ako bismo pisali \( (k+2)^2 = k^2 + 2k + 4 \) umesto \( k^2 + 4k + 4 \).</div>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Kljucni uvid</h2>
    <p>Ne moramo resavati jednacinu da bismo nasli zbir kvadrata korena! Vijetove formule i algebarski identitet nam daju direktan put od koeficijenata jednacine do trazenog izraza.</p>
    <div class="formula">
      \[ x_1^2 + x_2^2 = (x_1 + x_2)^2 - 2x_1 x_2 = (k+2)^2 - 4 = k(k+4) \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="final-answer">
    <h2>Konacan odgovor</h2>
    <div class="answer-value">\( x_1^2 + x_2^2 = k(k + 4) \)</div>

    <div class="options-row">
      <div class="option-card">
        <div class="opt-label">(A)</div>
        <div class="opt-value">\( k^2 + 1 \)</div>
      </div>
      <div class="option-card correct">
        <div class="opt-label">(B)</div>
        <div class="opt-value">\( k(k + 4) \)</div>
      </div>
      <div class="option-card">
        <div class="opt-label">(C)</div>
        <div class="opt-value">\( k(k + 2) \)</div>
      </div>
      <div class="option-card">
        <div class="opt-label">(D)</div>
        <div class="opt-value">\( k^2 + 4 \)</div>
      </div>
    </div>

    <p class="verification">Verifikacija: Za \( k = 1 \) jednacina je \( x^2 - 3x + 2 = 0 \) sa korenima 1 i 2. Zbir kvadrata: \( 1 + 4 = 5 \). Formula: \( 1 \cdot 5 = 5 \). Tacno!</p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfalls">
    <h2>Ceste greske</h2>
    <ul>
      <li><strong>Pogresan razvoj kvadrata binoma:</strong> Cesta greska je pisanje \( (k+2)^2 = k^2 + 4 \) umesto \( k^2 + 4k + 4 \). Ne zaboravite dupli proizvod \( 2 \cdot k \cdot 2 = 4k \)! Ova greska vodi do pogresnog odgovora D).</li>
      <li><strong>Mesanje zbira i proizvoda u identitetu:</strong> Identitet je \( x_1^2 + x_2^2 = (x_1 + x_2)^2 - 2x_1 x_2 \), a ne \( (x_1 + x_2)^2 - x_1 x_2 \). Faktor 2 ispred proizvoda je kljucan.</li>
      <li><strong>Pogresan koeficijent u Vijetovim formulama:</strong> Pazite na znak: ako je jednacina \( x^2 - (k+2)x + 2 = 0 \), zbir korena je \( +(k+2) \), jer je \( p = -(k+2) \) i \( x_1 + x_2 = -p = k + 2 \).</li>
      <li><strong>Pokusaj nalazenja samih korena:</strong> Nije potrebno resavati jednacinu! Vijetove formule su dovoljne. Pokusaj nalazenja korena komplikuje racun i uvodi prostor za gresku.</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge">
    <h2>Dodatni izazov</h2>
    <p>Koliko je \( x_1^3 + x_2^3 \) za istu jednacinu \( x^2 - (k+2)x + 2 = 0 \)?</p>
    <details>
      <summary>Nagovestaj</summary>
      <div class="answer">
        <p>Koristite identitet \( x_1^3 + x_2^3 = (x_1 + x_2)^3 - 3x_1 x_2 (x_1 + x_2) \).</p>
        <p>Zamenom: \( (k+2)^3 - 3 \cdot 2 \cdot (k+2) = (k+2)[(k+2)^2 - 6] = (k+2)(k^2 + 4k - 2) \).</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('mainCanvas');
  const ctx = canvas.getContext('2d');
  const slider = document.getElementById('kSlider');
  const kValueEl = document.getElementById('kValue');

  function draw(k) {
    const W = canvas.width;
    const H = canvas.height;
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Coordinate system setup
    const originX = 280;
    const originY = 300;
    const scaleX = 50;
    const scaleY = 20;

    function toCanvas(x, y) {
      return { x: originX + x * scaleX, y: originY - y * scaleY };
    }

    // Grid
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (var gx = -5; gx <= 8; gx++) {
      var p = toCanvas(gx, 0);
      ctx.beginPath();
      ctx.moveTo(p.x, 20);
      ctx.lineTo(p.x, H - 20);
      ctx.stroke();
    }
    for (var gy = -4; gy <= 14; gy += 2) {
      var p = toCanvas(0, gy);
      ctx.beginPath();
      ctx.moveTo(20, p.y);
      ctx.lineTo(W - 20, p.y);
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(20, originY);
    ctx.lineTo(W - 20, originY);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(originX, 20);
    ctx.lineTo(originX, H - 20);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    for (var gx = -5; gx <= 8; gx++) {
      if (gx === 0) continue;
      var p = toCanvas(gx, 0);
      ctx.fillText(gx.toString(), p.x, originY + 18);
    }
    ctx.textAlign = 'right';
    for (var gy = -4; gy <= 14; gy += 2) {
      if (gy === 0) continue;
      var p = toCanvas(0, gy);
      ctx.fillText(gy.toString(), originX - 8, p.y + 5);
    }

    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('x', W - 15, originY + 18);
    ctx.fillText('y', originX + 15, 25);

    // Draw parabola f(x) = x^2 - (k+2)x + 2
    var a_coef = 1;
    var b_coef = -(k + 2);
    var c_coef = 2;
    var D = b_coef * b_coef - 4 * a_coef * c_coef;

    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    var started = false;
    for (var px = 20; px < W - 20; px++) {
      var x = (px - originX) / scaleX;
      var y = a_coef * x * x + b_coef * x + c_coef;
      var cp = toCanvas(x, y);
      if (cp.y < -50 || cp.y > H + 50) {
        started = false;
        continue;
      }
      if (!started) {
        ctx.moveTo(cp.x, cp.y);
        started = true;
      } else {
        ctx.lineTo(cp.x, cp.y);
      }
    }
    ctx.stroke();

    // Vieta values
    var sumRoots = k + 2;
    var prodRoots = 2;
    var sumSquares = sumRoots * sumRoots - 2 * prodRoots;

    // Info panel
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';

    var kStr = k % 1 === 0 ? k.toString() : k.toFixed(1).replace('.', ',');
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.fillText('k = ' + kStr, 30, 30);

    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.fillText('x\u2081 + x\u2082 = ' + sumRoots.toFixed(1).replace('.', ','), 30, 50);
    ctx.fillText('x\u2081 \u00B7 x\u2082 = 2', 30, 68);

    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    var sqStr = sumSquares % 1 === 0 ? sumSquares.toString() : sumSquares.toFixed(2).replace('.', ',');
    ctx.fillText('x\u2081\u00B2 + x\u2082\u00B2 = ' + sqStr, 30, 92);

    // Verify with k(k+4)
    var formulaVal = k * (k + 4);
    var fStr = formulaVal % 1 === 0 ? formulaVal.toString() : formulaVal.toFixed(2).replace('.', ',');
    ctx.fillStyle = '#a78bfa';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.fillText('k(k+4) = ' + fStr, 30, 112);

    // Discriminant info
    if (Math.abs(D) < 0.01) {
      ctx.fillStyle = '#f472b6';
      ctx.fillText('D = 0 (dvostruki koren)', 30, 132);
    } else if (D > 0) {
      ctx.fillStyle = '#60a5fa';
      var dStr = D % 1 === 0 ? D.toString() : D.toFixed(2).replace('.', ',');
      ctx.fillText('D = ' + dStr + ' > 0', 30, 132);
    } else {
      ctx.fillStyle = '#f472b6';
      var dStr = D.toFixed(2).replace('.', ',');
      ctx.fillText('D = ' + dStr + ' < 0 (kompleksni koreni)', 30, 132);
    }

    // X-axis intersections
    if (D >= 0) {
      var x1 = (-b_coef - Math.sqrt(D)) / (2 * a_coef);
      var x2 = (-b_coef + Math.sqrt(D)) / (2 * a_coef);
      var p1 = toCanvas(x1, 0);
      var p2 = toCanvas(x2, 0);

      ctx.fillStyle = '#4ade80';
      ctx.beginPath();
      ctx.arc(p1.x, p1.y, 5, 0, Math.PI * 2);
      ctx.fill();

      if (Math.abs(x1 - x2) > 0.05) {
        ctx.beginPath();
        ctx.arc(p2.x, p2.y, 5, 0, Math.PI * 2);
        ctx.fill();
      }

      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      if (Math.abs(D) < 0.01) {
        var xStr = x1 % 1 === 0 ? x1.toString() : x1.toFixed(2).replace('.', ',');
        ctx.fillText('x = ' + xStr, p1.x, p1.y - 12);

        // Glow for double root
        ctx.beginPath();
        ctx.arc(p1.x, p1.y, 12, 0, Math.PI * 2);
        ctx.strokeStyle = 'rgba(74, 222, 128, 0.5)';
        ctx.lineWidth = 2;
        ctx.stroke();
      } else {
        var x1Str = x1 % 1 === 0 ? x1.toString() : x1.toFixed(2).replace('.', ',');
        var x2Str = x2 % 1 === 0 ? x2.toString() : x2.toFixed(2).replace('.', ',');
        ctx.fillText('x\u2081 = ' + x1Str, p1.x, p1.y - 12);
        ctx.fillText('x\u2082 = ' + x2Str, p2.x, p2.y - 12);

        // Show x1^2 + x2^2 visually with small squares at root positions
        var sq1 = x1 * x1;
        var sq2 = x2 * x2;
        ctx.fillStyle = 'rgba(167, 139, 250, 0.15)';
        // Highlight the root points
        ctx.beginPath();
        ctx.arc(p1.x, p1.y, 8, 0, Math.PI * 2);
        ctx.fill();
        ctx.beginPath();
        ctx.arc(p2.x, p2.y, 8, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    // Vertex
    var vx = -b_coef / (2 * a_coef);
    var vy = a_coef * vx * vx + b_coef * vx + c_coef;
    var vp = toCanvas(vx, vy);
    if (vp.y > 10 && vp.y < H - 10) {
      ctx.beginPath();
      ctx.arc(vp.x, vp.y, 4, 0, Math.PI * 2);
      ctx.fillStyle = '#a78bfa';
      ctx.fill();
    }

    // Title at bottom
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('f(x) = x\u00B2 - (k+2)x + 2', W / 2, H - 15);

    // Draw the sum of squares bar on the right side
    var barX = W - 120;
    var barW = 60;
    var barMaxH = 200;
    var maxSq = 100;
    var barH = Math.min(Math.abs(sumSquares) / maxSq * barMaxH, barMaxH);
    var barY = 260;

    ctx.fillStyle = 'rgba(74, 222, 128, 0.1)';
    ctx.fillRect(barX, barY - barMaxH, barW, barMaxH);
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.strokeRect(barX, barY - barMaxH, barW, barMaxH);

    if (sumSquares >= 0) {
      var grad = ctx.createLinearGradient(barX, barY - barH, barX, barY);
      grad.addColorStop(0, '#4ade80');
      grad.addColorStop(1, 'rgba(74, 222, 128, 0.3)');
      ctx.fillStyle = grad;
      ctx.fillRect(barX, barY - barH, barW, barH);
    }

    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('x\u2081\u00B2+x\u2082\u00B2', barX + barW / 2, barY + 18);
    ctx.fillText(sqStr, barX + barW / 2, barY - barH - 8);
  }

  slider.addEventListener('input', function() {
    var k = parseFloat(this.value);
    kValueEl.textContent = k % 1 === 0 ? k.toString() : k.toFixed(1).replace('.', ',');
    draw(k);
  });

  // Step click highlighting
  document.querySelectorAll('.step-container').forEach(function(el) {
    el.addEventListener('click', function() {
      document.querySelectorAll('.step-container').forEach(function(s) {
        s.classList.remove('active');
      });
      el.classList.add('active');
    });
  });

  // Initial draw
  draw(3);
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Zbir kvadrata resenja kvadratne jednacine pomocu Vijetovih formula",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["kvadratne jednacine", "Vijetove formule", "zbir kvadrata korena", "algebarski identiteti", "parametar"]
}
BRAINSPARK_META-->