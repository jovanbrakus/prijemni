<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tangenta elipse - odredjivanje parametra</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
  Problem: Find the positive value of parameter n such that the line y = 2x + n
  is tangent to the ellipse x^2 + y^2/5 = 1. Determine which interval n belongs to.

  Step 1: Identify the ellipse parameters.
    x^2/1 + y^2/5 = 1
    So a^2 = 1, b^2 = 5 (since b^2 > a^2, the major axis is vertical).
    a = 1, b = sqrt(5).

  Step 2: Substitute y = 2x + n into the ellipse equation.
    x^2 + (2x + n)^2 / 5 = 1
    Multiply through by 5:
    5x^2 + (2x + n)^2 = 5
    5x^2 + 4x^2 + 4nx + n^2 = 5
    9x^2 + 4nx + (n^2 - 5) = 0

  Step 3: Condition for tangency: discriminant = 0.
    D = (4n)^2 - 4 * 9 * (n^2 - 5) = 0
    16n^2 - 36n^2 + 180 = 0
    -20n^2 + 180 = 0
    20n^2 = 180
    n^2 = 9
    n = 3 or n = -3

  Step 4: Since the problem asks for the positive value:
    n = 3

  Step 5: Determine which interval:
    3 is in (0, 4) => Answer is A.

  Alternative approach using the tangency formula:
    For ellipse x^2/a^2 + y^2/b^2 = 1 and line y = mx + c,
    the tangency condition is c^2 = a^2 * m^2 + b^2.
    Here a^2 = 1, b^2 = 5, m = 2, c = n.
    n^2 = 1 * 4 + 5 = 9
    n = +/- 3
    Positive value: n = 3, which is in (0, 4).

  Verification: At n = 3, the line y = 2x + 3.
    Substitute: 9x^2 + 12x + 4 = 0
    (3x + 2)^2 = 0  =>  x = -2/3
    y = 2(-2/3) + 3 = -4/3 + 3 = 5/3
    Check on ellipse: (-2/3)^2 + (5/3)^2/5 = 4/9 + 25/(9*5) = 4/9 + 5/9 = 9/9 = 1. Correct!
</script>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.5rem;
  margin-bottom: 16px;
}

.card h3 {
  color: #a78bfa;
  font-size: 1.2rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 100px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.plan-card {
  border-left: 4px solid #a78bfa;
}

.step-container {
  display: flex;
  gap: 16px;
  align-items: flex-start;
  margin-bottom: 20px;
  padding: 16px;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.2s;
  border-left: 3px solid transparent;
}

.step-container:hover {
  background: rgba(96,165,250,0.05);
  border-left-color: #4ade80;
}

.step-container.active {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.05);
}

.step-badge {
  min-width: 32px;
  height: 32px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 0.9rem;
  color: #0f172a;
  flex-shrink: 0;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 10px 0;
  overflow-x: auto;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 6px;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.15), rgba(167,139,250,0.15));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  text-align: center;
}

.insight-box .insight-title {
  color: #a78bfa;
  font-size: 1.3rem;
  margin-bottom: 12px;
}

.final-answer {
  background: linear-gradient(135deg, rgba(52,211,153,0.12), rgba(74,222,128,0.12));
  border: 2px solid rgba(52,211,153,0.35);
  border-radius: 14px;
  padding: 28px;
  margin-bottom: 24px;
  text-align: center;
}

.final-answer h2 {
  color: #4ade80;
  margin-bottom: 16px;
}

.final-answer .answer-value {
  font-size: 1.6rem;
  color: #4ade80;
  font-weight: bold;
  margin-bottom: 12px;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-top: 16px;
}

.option-card {
  padding: 12px 22px;
  border-radius: 10px;
  font-size: 1.05rem;
  font-weight: 600;
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  color: #94a3b8;
}

.option-card.correct {
  background: rgba(74,222,128,0.15);
  border-color: #4ade80;
  color: #4ade80;
}

.pitfall-card {
  border-left: 4px solid #e09468;
}

.pitfall-card h2 {
  color: #e09468;
}

.checkpoint {
  margin: 15px 0;
  background: rgba(167,139,250,0.08);
  border: 1px solid rgba(167,139,250,0.2);
  border-radius: 10px;
  padding: 14px 18px;
}

.checkpoint summary {
  color: #a78bfa;
  cursor: pointer;
  font-weight: 600;
}

.checkpoint-answer {
  margin-top: 10px;
  color: #4ade80;
}

.theory-details {
  margin: 15px 0;
}

.theory-details summary {
  color: #60a5fa;
  cursor: pointer;
  font-weight: 600;
  font-size: 1.1rem;
  padding: 8px 0;
}

.theory-details .theory-content {
  margin-top: 12px;
}

.theory-details .theory-content li {
  margin-bottom: 10px;
  margin-left: 20px;
  color: #e2e8f0;
}

.canvas-card {
  text-align: center;
}

.canvas-card canvas {
  border-radius: 10px;
  max-width: 100%;
  touch-action: none;
}

.canvas-hint {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-top: 8px;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 12px;
  text-align: left;
}

.challenge-card {
  border-left: 4px solid #f472b6;
}

.challenge-card h2 {
  color: #f472b6;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .given-grid { flex-direction: column; }
  .step-container { flex-direction: column; gap: 8px; }
  .options-row { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Tangenta elipse &mdash; odredjivanje parametra</h1>
  <p class="subtitle">Analiti캜ka geometrija &bull; Uslov tangentnosti prave i elipse</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Pozitivna vrednost parametra \( n \) za koju je prava \( y = 2x + n \) tangenta elipse
    \( x^2 + \dfrac{y^2}{5} = 1 \) pripada intervalu:</p>
    <div class="given-grid">
      <div class="given-item">
        <div class="label">Elipsa</div>
        <div class="value">\( x^2 + \dfrac{y^2}{5} = 1 \)</div>
      </div>
      <div class="given-item">
        <div class="label">Prava</div>
        <div class="value">\( y = 2x + n \)</div>
      </div>
      <div class="given-item">
        <div class="label">Uslov</div>
        <div class="value">\( n > 0 \)</div>
      </div>
    </div>
    <div class="given-grid" style="margin-top: 16px;">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\( (0,\; 4) \)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\( (4,\; 8) \)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\( (8,\; 12) \)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\( (12,\; 16) \)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan re코avanja</h2>
    <p>Zamenom jedna캜ine prave u jedna캜inu elipse dobi캖emo kvadratnu jedna캜inu po \( x \). Uslov
    tangentnosti je da diskriminanta te jedna캜ine bude jednaka nuli. Odatle 캖emo na캖i pozitivnu
    vrednost parametra \( n \) i proveriti kom intervalu pripada.</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details class="theory-details">
      <summary>游늻 Klju캜ne formule i teoreme</summary>
      <div class="theory-content">
        <ul>
          <li><strong>Jedna캜ina elipse u kanonskom obliku:</strong>
            \( \dfrac{x^2}{a^2} + \dfrac{y^2}{b^2} = 1 \), gde su \( a \) i \( b \)
            poluose elipse.</li>
          <li><strong>Uslov tangentnosti prave i elipse:</strong> Prava \( y = mx + c \) je
            tangenta elipse \( \dfrac{x^2}{a^2} + \dfrac{y^2}{b^2} = 1 \) ako i samo ako va쬴:
            \[ c^2 = a^2 m^2 + b^2 \]</li>
          <li><strong>Diskriminanta kvadratne jedna캜ine:</strong> Za \( Ax^2 + Bx + C = 0 \),
            diskriminanta je \( D = B^2 - 4AC \). Jedna캜ina ima ta캜no jedno re코enje (dupli koren)
            kada je \( D = 0 \).</li>
          <li><strong>Geometrijski smisao:</strong> Tangenta dodiruje krivu u ta캜no jednoj ta캜ki &mdash;
            zato tra쬴mo dupli koren, tj. \( D = 0 \).</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card canvas-card">
    <h2>Grafi캜ki prikaz</h2>
    <canvas id="mainCanvas" width="700" height="500"></canvas>
    <p class="canvas-hint">Pomerajte kliza캜 da menjate vrednost parametra n i vidite kada prava postaje tangenta</p>
    <div style="margin-top: 14px; display: flex; align-items: center; justify-content: center; gap: 12px;">
      <span style="color: #94a3b8;">n =</span>
      <input type="range" id="nSlider" min="0" max="6" step="0.1" value="3"
        style="width: 220px; accent-color: #60a5fa;">
      <span id="nDisplay" style="color: #60a5fa; font-weight: bold; min-width: 40px;">3,0</span>
    </div>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Re코enje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container" tabindex="0">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Identifikujemo parametre elipse</h3>
        <p>Jedna캜ina elipse je data u kanonskom obliku:</p>
        <div class="math-block">
          \[ \frac{x^2}{1} + \frac{y^2}{5} = 1 \]
        </div>
        <p>Odavde 캜itamo:</p>
        <div class="math-block">
          \[ a^2 = 1, \quad b^2 = 5 \]
        </div>
        <p class="note">Po코to je \( b^2 > a^2 \), velika poluosa je du \( y \)-ose
        i iznosi \( b = \sqrt{5} \approx 2{,}24 \).</p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container" tabindex="0">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Zamena prave u jedna캜inu elipse</h3>
        <p>Prava je \( y = 2x + n \). Zamenjujemo \( y \) u jedna캜inu elipse:</p>
        <div class="math-block">
          \[ x^2 + \frac{(2x + n)^2}{5} = 1 \]
        </div>
        <p>Mno쬴mo obe strane sa \( 5 \):</p>
        <div class="math-block">
          \[ 5x^2 + (2x + n)^2 = 5 \]
        </div>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step-container" tabindex="0">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Razvijamo kvadrat binoma</h3>
        <p>Razvijamo \( (2x + n)^2 \):</p>
        <div class="math-block">
          \[ (2x + n)^2 = 4x^2 + 4nx + n^2 \]
        </div>
        <p>Zamenjujemo nazad:</p>
        <div class="math-block">
          \[ 5x^2 + 4x^2 + 4nx + n^2 = 5 \]
        </div>
        <p>Sre캠ujemo:</p>
        <div class="math-block">
          \[ 9x^2 + 4nx + (n^2 - 5) = 0 \]
        </div>
        <p class="note">Ovo je kvadratna jedna캜ina po \( x \) sa koeficijentima
        \( A = 9 \), \( B = 4n \), \( C = n^2 - 5 \).</p>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>游댌 Proveri sebe: Koliko iznosi koeficijent uz \( x^2 \) u dobijenoj jedna캜ini?</summary>
      <div class="checkpoint-answer">
        <p>Koeficijent uz \( x^2 \) je \( A = 9 \) (dobijen kao \( 5 + 4 = 9 \)).</p>
      </div>
    </details>

    <!-- Step 4 -->
    <div class="step-container" tabindex="0">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Postavljamo uslov tangentnosti: \( D = 0 \)</h3>
        <p>Da bi prava bila tangenta elipse, mora imati ta캜no jednu zajedni캜ku ta캜ku.
        To zna캜i da dobijena kvadratna jedna캜ina mora imati dupli koren, tj.
        diskriminanta mora biti nula:</p>
        <div class="math-block">
          \[ D = B^2 - 4AC = 0 \]
        </div>
        <p>Zamenjujemo vrednosti:</p>
        <div class="math-block">
          \[ (4n)^2 - 4 \cdot 9 \cdot (n^2 - 5) = 0 \]
        </div>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step-container" tabindex="0">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Ra캜unamo diskriminantu</h3>
        <p>Razvijamo izraz:</p>
        <div class="math-block">
          \[ 16n^2 - 36(n^2 - 5) = 0 \]
        </div>
        <p>Raspisujemo zagradu:</p>
        <div class="math-block">
          \[ 16n^2 - 36n^2 + 180 = 0 \]
        </div>
        <p>Sre캠ujemo:</p>
        <div class="math-block">
          \[ -20n^2 + 180 = 0 \]
        </div>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step-container" tabindex="0">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Re코avamo po \( n \)</h3>
        <p>Prenosimo i delimo:</p>
        <div class="math-block">
          \[ 20n^2 = 180 \]
        </div>
        <div class="math-block">
          \[ n^2 = 9 \]
        </div>
        <div class="math-block">
          \[ n = 3 \quad \text{ili} \quad n = -3 \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>游댌 Proveri sebe: Za코to odbacujemo \( n = -3 \)?</summary>
      <div class="checkpoint-answer">
        <p>Zato 코to zadatak tra쬴 <strong>pozitivnu</strong> vrednost parametra \( n \).
        Po코to je \( -3 < 0 \), ta vrednost ne zadovoljava uslov \( n > 0 \).</p>
      </div>
    </details>

    <!-- Step 7 -->
    <div class="step-container" tabindex="0">
      <div class="step-badge">7</div>
      <div class="step-content">
        <h3>Biramo pozitivnu vrednost i odre캠ujemo interval</h3>
        <p>Po코to je \( n > 0 \), uzimamo:</p>
        <div class="math-block">
          \[ n = 3 \]
        </div>
        <p>Proveravamo kom intervalu pripada broj \( 3 \):</p>
        <div class="math-block">
          \[ 0 < 3 < 4 \quad \Rightarrow \quad n \in (0,\; 4) \]
        </div>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <div class="insight-title">Klju캜ni uvid</div>
    <p style="margin-bottom: 12px;">Uslov tangentnosti prave \( y = mx + c \) i elipse
    \( \dfrac{x^2}{a^2} + \dfrac{y^2}{b^2} = 1 \) glasi:</p>
    <div class="math-block" style="display: inline-block; font-size: 1.2rem;">
      \[ c^2 = a^2 m^2 + b^2 \]
    </div>
    <p style="margin-top: 12px; color: #94a3b8;">Primenom na na코 zadatak:
    \( n^2 = 1 \cdot 4 + 5 = 9 \), pa je \( n = \pm 3 \).</p>
  </div>

  <!-- Final Answer -->
  <div class="final-answer">
    <h2>Kona캜an odgovor</h2>
    <div class="answer-value">\( n = 3 \in (0,\; 4) \)</div>
    <div class="options-row">
      <div class="option-card correct">A) \( (0,\; 4) \)</div>
      <div class="option-card">B) \( (4,\; 8) \)</div>
      <div class="option-card">C) \( (8,\; 12) \)</div>
      <div class="option-card">D) \( (12,\; 16) \)</div>
    </div>
    <div class="verification-note">
      <strong>Verifikacija:</strong> Za \( n = 3 \) i pravu \( y = 2x + 3 \), ta캜ka dodira je
      \( \left(-\dfrac{2}{3},\; \dfrac{5}{3}\right) \). Proveravamo da pripada elipsi:
      \( \left(-\dfrac{2}{3}\right)^2 + \dfrac{\left(\dfrac{5}{3}\right)^2}{5}
      = \dfrac{4}{9} + \dfrac{25}{45} = \dfrac{4}{9} + \dfrac{5}{9} = 1 \). Ta캜no!
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfall-card">
    <h2>캛este gre코ke</h2>
    <ul style="margin-left: 20px; margin-top: 8px;">
      <li style="margin-bottom: 10px;">
        <strong>Pogre코no razvijanje kvadrata:</strong> 캛esta gre코ka je da se zanemari
        srednji 캜lan kod \( (2x + n)^2 \). Zapamtite: \( (2x + n)^2 = 4x^2 + 4nx + n^2 \),
        ne \( 4x^2 + n^2 \)!
      </li>
      <li style="margin-bottom: 10px;">
        <strong>Zaboravljen uslov \( n > 0 \):</strong> Jedna캜ina \( n^2 = 9 \) daje
        dva re코enja: \( n = 3 \) i \( n = -3 \). Ako ne pro캜itate pa쬷jivo da se tra쬴
        pozitivna vrednost, mo쬰te odabrati pogre코an interval.
      </li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Za koje vrednosti parametra \( n \) prava \( y = 2x + n \) se캜e elipsu
    \( x^2 + \dfrac{y^2}{5} = 1 \) u ta캜no dve ta캜ke?</p>
    <details style="margin: 15px 0;">
      <summary style="color: #f472b6; cursor: pointer; font-weight: 600;">Prika쬴 nagove코taj</summary>
      <p style="margin-top: 10px; color: #94a3b8;">Prava se캜e elipsu u dve ta캜ke kada je
      diskriminanta strogo pozitivna, tj. \( D > 0 \). Iz uslova \( -20n^2 + 180 > 0 \)
      dobijate \( n^2 < 9 \), tj. \( -3 < n < 3 \).</p>
    </details>
  </div>

</div>

<script>
(() => {
  // Canvas drawing
  const canvas = document.getElementById('mainCanvas');
  const ctx = canvas.getContext('2d');
  const slider = document.getElementById('nSlider');
  const nDisplay = document.getElementById('nDisplay');

  const W = canvas.width;
  const H = canvas.height;
  const originX = W / 2;
  const originY = H / 2;
  const scale = 80;

  function toCanvas(x, y) {
    return { x: originX + x * scale, y: originY - y * scale };
  }

  function drawGrid() {
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (let i = -5; i <= 5; i++) {
      const p1 = toCanvas(i, -4);
      const p2 = toCanvas(i, 4);
      ctx.beginPath();
      ctx.moveTo(p1.x, p1.y);
      ctx.lineTo(p2.x, p2.y);
      ctx.stroke();
    }
    for (let j = -4; j <= 4; j++) {
      const p1 = toCanvas(-5, j);
      const p2 = toCanvas(5, j);
      ctx.beginPath();
      ctx.moveTo(p1.x, p1.y);
      ctx.lineTo(p2.x, p2.y);
      ctx.stroke();
    }
  }

  function drawAxes() {
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 2;
    // x-axis
    ctx.beginPath();
    ctx.moveTo(0, originY);
    ctx.lineTo(W, originY);
    ctx.stroke();
    // y-axis
    ctx.beginPath();
    ctx.moveTo(originX, 0);
    ctx.lineTo(originX, H);
    ctx.stroke();

    // Labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    for (let i = -4; i <= 4; i++) {
      if (i === 0) continue;
      const p = toCanvas(i, 0);
      ctx.fillText(i.toString(), p.x, p.y + 18);
    }
    ctx.textAlign = 'right';
    for (let j = -3; j <= 3; j++) {
      if (j === 0) continue;
      const p = toCanvas(0, j);
      ctx.fillText(j.toString(), p.x - 8, p.y + 5);
    }
    ctx.fillText('x', W - 10, originY - 8);
    ctx.textAlign = 'center';
    ctx.fillText('y', originX + 14, 14);
  }

  function drawEllipse() {
    // x^2/1 + y^2/5 = 1 => a=1, b=sqrt(5)
    const a = 1;
    const b = Math.sqrt(5);
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    const steps = 200;
    for (let i = 0; i <= steps; i++) {
      const t = (2 * Math.PI * i) / steps;
      const ex = a * Math.cos(t);
      const ey = b * Math.sin(t);
      const p = toCanvas(ex, ey);
      if (i === 0) ctx.moveTo(p.x, p.y);
      else ctx.lineTo(p.x, p.y);
    }
    ctx.closePath();
    ctx.stroke();

    // Label
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 13px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    const lp = toCanvas(1.15, 1.8);
    ctx.fillText('x\u00B2 + y\u00B2/5 = 1', lp.x, lp.y);
  }

  function drawLine(n) {
    // y = 2x + n
    const x1 = -4;
    const y1 = 2 * x1 + n;
    const x2 = 4;
    const y2 = 2 * x2 + n;

    const p1 = toCanvas(x1, y1);
    const p2 = toCanvas(x2, y2);

    // Determine if tangent, secant, or no intersection
    const disc = -20 * n * n + 180;
    let color, label;
    if (Math.abs(disc) < 0.5) {
      color = '#4ade80';
      label = 'Tangenta';
    } else if (disc > 0) {
      color = '#fbbf24';
      label = 'Se캜e u 2 ta캜ke';
    } else {
      color = '#f472b6';
      label = 'Nema preseka';
    }

    ctx.strokeStyle = color;
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(p1.x, p1.y);
    ctx.lineTo(p2.x, p2.y);
    ctx.stroke();

    // Line label
    ctx.fillStyle = color;
    ctx.font = 'bold 13px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    const ll = toCanvas(1.5, 2 * 1.5 + n);
    if (ll.y > 20 && ll.y < H - 20) {
      ctx.fillText('y = 2x + ' + n.toFixed(1).replace('.', ','), ll.x + 5, ll.y - 8);
    }

    // Status label
    ctx.fillStyle = color;
    ctx.font = 'bold 14px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText(label, W / 2, 30);

    // If tangent, draw the tangent point
    if (Math.abs(disc) < 2) {
      // 9x^2 + 4nx + n^2 - 5 = 0, tangent at x = -4n/(2*9) = -2n/9
      const tx = -2 * n / 9;
      const ty = 2 * tx + n;
      const tp = toCanvas(tx, ty);

      ctx.fillStyle = '#4ade80';
      ctx.beginPath();
      ctx.arc(tp.x, tp.y, 6, 0, 2 * Math.PI);
      ctx.fill();

      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 12px Segoe UI, sans-serif';
      ctx.textAlign = 'left';
      const coordText = '(' + tx.toFixed(2).replace('.', ',') + '; ' + ty.toFixed(2).replace('.', ',') + ')';
      ctx.fillText(coordText, tp.x + 10, tp.y - 10);
    }
  }

  function draw() {
    const n = parseFloat(slider.value);
    nDisplay.textContent = n.toFixed(1).replace('.', ',');

    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    drawGrid();
    drawAxes();
    drawEllipse();
    drawLine(n);
  }

  slider.addEventListener('input', draw);
  draw();

  // Step click highlighting
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.add('active');
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Tangenta elipse - odredjivanje parametra n",
  "subject": "math",
  "unit": "geometry",
  "topic_tags": ["elipsa", "tangenta", "analiti캜ka geometrija", "diskriminanta", "parametar"]
}
BRAINSPARK_META-->