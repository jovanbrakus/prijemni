<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jednacina tangente kruznice</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
  Problem: Find the equation of the tangent to the circle k: x^2 + y^2 = 20
  that passes through the point A(4, 2).

  Options:
    A) x + 2y - 8 = 0
    B) 2x - y - 6 = 0
    C) 2x + y - 10 = 0
    D) -x + 2y = 0

  Step 1: Check if A(4, 2) lies on the circle.
    4^2 + 2^2 = 16 + 4 = 20 = r^2
    Yes, A(4, 2) lies on the circle.

  Step 2: Since A is on the circle, the tangent at point (x0, y0) on x^2 + y^2 = r^2 is:
    x0 * x + y0 * y = r^2

  Step 3: Substitute x0 = 4, y0 = 2, r^2 = 20:
    4x + 2y = 20

  Step 4: Simplify by dividing by 2:
    2x + y = 10
    2x + y - 10 = 0

  Step 5: Verify with answer options:
    (A) x + 2y - 8 = 0 -> at A(4,2): 4 + 4 - 8 = 0, passes through A.
        Distance from O(0,0): |0 + 0 - 8| / sqrt(1 + 4) = 8/sqrt(5) = 8/2.236 ≈ 3.578
        r = sqrt(20) = 2*sqrt(5) ≈ 4.472. Not equal. NOT tangent.
    (B) 2x - y - 6 = 0 -> at A(4,2): 8 - 2 - 6 = 0, passes through A.
        Distance from O(0,0): |0 - 0 - 6| / sqrt(4 + 1) = 6/sqrt(5) ≈ 2.683
        r ≈ 4.472. Not equal. NOT tangent.
    (C) 2x + y - 10 = 0 -> at A(4,2): 8 + 2 - 10 = 0, passes through A. ✓
        Distance from O(0,0): |0 + 0 - 10| / sqrt(4 + 1) = 10/sqrt(5) = 10/sqrt(5) = 2*sqrt(5)
        r = sqrt(20) = 2*sqrt(5). Equal! ✓ This IS the tangent.
    (D) -x + 2y = 0 -> at A(4,2): -4 + 4 = 0, passes through A.
        Distance from O(0,0): |0| / sqrt(1 + 4) = 0. Passes through center. NOT tangent.

  Correct answer: C) 2x + y - 10 = 0. ✓

  Additional verification - perpendicularity:
    Radius direction from O(0,0) to A(4,2): slope = 2/4 = 1/2
    Tangent line 2x + y - 10 = 0 -> y = -2x + 10, slope = -2
    Product of slopes: (1/2) * (-2) = -1. ✓ Perpendicular confirmed.
</script>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56, 189, 248, 0.06);
  border: 1px solid rgba(56, 189, 248, 0.12);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 100px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.05rem;
  font-weight: 600;
}

.math-block {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.step-container {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  padding: 16px;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s;
  border-left: 3px solid transparent;
}

.step-container:hover {
  background: rgba(96, 165, 250, 0.05);
  border-left-color: #4ade80;
}

.step-container.active {
  background: rgba(96, 165, 250, 0.08);
  border-left-color: #4ade80;
}

.step-badge {
  width: 28px;
  height: 28px;
  min-width: 28px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: bold;
  font-size: 0.85rem;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  margin-bottom: 8px;
}

.step-note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 8px;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.15), rgba(167, 139, 250, 0.15));
  border: 1px solid rgba(167, 139, 250, 0.3);
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
  text-align: center;
}

.insight-box h2 {
  color: #a78bfa;
  margin-bottom: 12px;
}

.final-answer {
  background: linear-gradient(135deg, rgba(52, 211, 153, 0.12), rgba(74, 222, 128, 0.12));
  border: 1px solid rgba(52, 211, 153, 0.3);
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
  text-align: center;
}

.final-answer h2 {
  color: #4ade80;
  margin-bottom: 16px;
}

.answer-highlight {
  color: #4ade80;
  font-size: 1.5rem;
  font-weight: bold;
}

.answer-options-final {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 20px 0;
}

.answer-option-final {
  padding: 12px 20px;
  border-radius: 10px;
  background: rgba(30, 41, 59, 0.8);
  border: 1px solid #334155;
  color: #94a3b8;
  font-size: 1rem;
}

.answer-option-final.correct {
  background: rgba(52, 211, 153, 0.15);
  border-color: #4ade80;
  color: #4ade80;
  font-weight: bold;
}

.pitfall-box {
  background: rgba(224, 148, 104, 0.08);
  border: 1px solid rgba(224, 148, 104, 0.2);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.pitfall-box h2 {
  color: #e09468;
  margin-bottom: 12px;
}

.pitfall-box ul {
  list-style: none;
  padding: 0;
}

.pitfall-box li {
  padding: 8px 0;
  padding-left: 24px;
  position: relative;
  color: #cbd5e1;
}

.pitfall-box li::before {
  content: '!';
  position: absolute;
  left: 0;
  color: #e09468;
  font-weight: bold;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 10px 0;
}

details summary:hover {
  color: #93bbfd;
}

details[open] summary {
  margin-bottom: 10px;
}

.checkpoint {
  background: rgba(167, 139, 250, 0.08);
  border: 1px solid rgba(167, 139, 250, 0.2);
  border-radius: 12px;
  padding: 16px 20px;
  margin: 15px 0;
}

.checkpoint summary {
  color: #a78bfa;
}

.canvas-card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 24px;
  text-align: center;
}

.canvas-card canvas {
  border-radius: 10px;
  max-width: 100%;
  touch-action: none;
}

.canvas-hint {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-top: 10px;
}

.verification {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 16px;
  padding: 12px 16px;
  background: rgba(52, 211, 153, 0.06);
  border-radius: 10px;
  border-left: 3px solid #4ade80;
}

.challenge-box {
  background: rgba(96, 165, 250, 0.06);
  border: 1px solid rgba(96, 165, 250, 0.15);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.challenge-box h2 {
  color: #60a5fa;
  margin-bottom: 12px;
}

.plan-card {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.08), rgba(167, 139, 250, 0.08));
  border: 1px solid rgba(96, 165, 250, 0.2);
}

@media (max-width: 700px) {
  h1 {
    font-size: 1.6rem;
  }
  .card {
    padding: 18px;
  }
  .given-grid {
    flex-direction: column;
  }
  .step-container {
    padding: 10px;
  }
  .answer-options-final {
    flex-direction: column;
    align-items: center;
  }
}
</style>
</head>
<body>
<div class="container">

  <h1>Jednacina tangente kruznice</h1>
  <p class="subtitle">Analiticka geometrija u ravni &mdash; tangenta kruznice u tacki</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Tekst zadatka</h2>
    <p>Jednacina tangente kruznice \( k\!: x^2 + y^2 = 20 \) koja prolazi kroz tacku \( A(4,\, 2) \) je:</p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\( x + 2y - 8 = 0 \)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\( 2x - y - 6 = 0 \)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\( 2x + y - 10 = 0 \)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\( -x + 2y = 0 \)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>Proverimo da li tacka \( A(4,\, 2) \) lezi na kruznici. Ako lezi, primenimo formulu za tangentu kruznice u datoj tacki: \( x_0 \cdot x + y_0 \cdot y = r^2 \). Sredimo jednacinu i uporedimo sa ponudjenim odgovorima.</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>&#128208; Kljucne formule i teoreme</summary>
      <ul style="list-style: none; padding: 0; margin-top: 8px;">
        <li style="padding: 8px 0; border-bottom: 1px solid #334155;">
          <strong>Jednacina kruznice sa centrom u koordinatnom pocetku:</strong>
          \[ x^2 + y^2 = r^2 \]
        </li>
        <li style="padding: 8px 0; border-bottom: 1px solid #334155;">
          <strong>Tangenta kruznice u tacki \((x_0, y_0)\) na kruznici \(x^2 + y^2 = r^2\):</strong>
          \[ x_0 \cdot x + y_0 \cdot y = r^2 \]
          Ova formula vazi samo ako tacka \((x_0, y_0)\) pripada kruznici.
        </li>
        <li style="padding: 8px 0; border-bottom: 1px solid #334155;">
          <strong>Rastojanje tacke \((x_1, y_1)\) od prave \(ax + by + c = 0\):</strong>
          \[ d = \frac{|ax_1 + by_1 + c|}{\sqrt{a^2 + b^2}} \]
        </li>
        <li style="padding: 8px 0;">
          <strong>Uslov tangentnosti:</strong> Prava je tangenta kruznice ako je rastojanje od centra kruznice do prave jednako poluprecniku \(r\).
        </li>
      </ul>
    </details>
  </div>

  <!-- Canvas Diagram -->
  <div class="canvas-card">
    <h2 style="color: #60a5fa; margin-bottom: 16px;">Dijagram</h2>
    <canvas id="diagram" width="600" height="600"></canvas>
    <p class="canvas-hint">Kruznica \( x^2 + y^2 = 20 \), tacka \( A(4,\, 2) \) i tangenta \( 2x + y - 10 = 0 \)</p>
  </div>

  <!-- Step-by-step Solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <div class="step-container" tabindex="0">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Proverimo da li tacka A pripada kruznici</h3>
        <p>Ubacimo koordinate tacke \( A(4,\, 2) \) u jednacinu kruznice \( x^2 + y^2 = 20 \):</p>
        <div class="math-block">
          \[ 4^2 + 2^2 = 16 + 4 = 20 \]
        </div>
        <p>Leva strana je jednaka desnoj, sto znaci da tacka \( A(4,\, 2) \) <strong>lezi na kruznici</strong>.</p>
        <p class="step-note">Ovo je kljucan korak &mdash; posto A lezi na kruznici, mozemo primeniti formulu za tangentu u tacki.</p>
      </div>
    </div>

    <div class="step-container" tabindex="0">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Primenimo formulu za tangentu</h3>
        <p>Za kruznici \( x^2 + y^2 = r^2 \), tangenta u tacki \( (x_0, y_0) \) koja lezi na kruznici glasi:</p>
        <div class="math-block">
          \[ x_0 \cdot x + y_0 \cdot y = r^2 \]
        </div>
        <p>Ovde je \( x_0 = 4 \), \( y_0 = 2 \) i \( r^2 = 20 \). Zamenjujemo:</p>
        <div class="math-block">
          \[ 4x + 2y = 20 \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>&#9989; Proveri sebe: Koliko je \(4 \cdot 4 + 2 \cdot 2\)?</summary>
      <p style="margin-top: 8px;">
        \( 4 \cdot 4 + 2 \cdot 2 = 16 + 4 = 20 = r^2 \). Ovo potvrdjuje da tacka \( A \) lezi na kruznici i da je jednacina tangente korektno postavljena.
      </p>
    </details>

    <div class="step-container" tabindex="0">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Sredimo jednacinu</h3>
        <p>Podelimo obe strane jednacine sa 2:</p>
        <div class="math-block">
          \[ \frac{4x + 2y}{2} = \frac{20}{2} \]
        </div>
        <div class="math-block">
          \[ 2x + y = 10 \]
        </div>
        <p>Prepisemo u standardni oblik:</p>
        <div class="math-block">
          \[ 2x + y - 10 = 0 \]
        </div>
      </div>
    </div>

    <div class="step-container" tabindex="0">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Uporedimo sa ponudjenim odgovorima</h3>
        <p>Dobijena jednacina \( 2x + y - 10 = 0 \) odgovara opciji <strong>(C)</strong>.</p>
      </div>
    </div>

    <details class="checkpoint">
      <summary>&#9989; Proveri sebe: Da li tangenta prolazi kroz tacku A?</summary>
      <p style="margin-top: 8px;">
        Ubacimo \( A(4,\, 2) \) u \( 2x + y - 10 = 0 \):
        \( 2 \cdot 4 + 2 - 10 = 8 + 2 - 10 = 0 \). Da, prolazi! &#10004;
      </p>
    </details>

    <div class="step-container" tabindex="0">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Verifikacija &mdash; uslov tangentnosti</h3>
        <p>Tangenta mora biti na rastojanju \( r = \sqrt{20} = 2\sqrt{5} \) od centra \( O(0,\, 0) \). Racunamo rastojanje od centra do prave \( 2x + y - 10 = 0 \):</p>
        <div class="math-block">
          \[ d = \frac{|2 \cdot 0 + 1 \cdot 0 - 10|}{\sqrt{2^2 + 1^2}} = \frac{10}{\sqrt{5}} = \frac{10}{\sqrt{5}} \cdot \frac{\sqrt{5}}{\sqrt{5}} = \frac{10\sqrt{5}}{5} = 2\sqrt{5} \]
        </div>
        <p>Poredimo: \( d = 2\sqrt{5} = r \). Uslov tangentnosti je ispunjen &mdash; prava dodiruje kruznicu!</p>
      </div>
    </div>

    <div class="step-container" tabindex="0">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Verifikacija &mdash; uslov normalnosti</h3>
        <p>Tangenta je uvek normalna (upravna) na poluprecnik u tacki dodira. Proverimo:</p>
        <p>Nagib poluprecnika \( OA \) (od \( O(0,0) \) do \( A(4,2) \)):</p>
        <div class="math-block">
          \[ k_{OA} = \frac{2 - 0}{4 - 0} = \frac{1}{2} \]
        </div>
        <p>Nagib tangente \( 2x + y - 10 = 0 \), tj. \( y = -2x + 10 \):</p>
        <div class="math-block">
          \[ k_t = -2 \]
        </div>
        <p>Proizvod nagiba:</p>
        <div class="math-block">
          \[ k_{OA} \cdot k_t = \frac{1}{2} \cdot (-2) = -1 \]
        </div>
        <p>Proizvod je \( -1 \), sto potvrdjuje da su poluprecnik i tangenta medjusobno upravni. &#10004;</p>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Kljucni uvid</h2>
    <p style="margin-bottom: 12px;">Kad tacka lezi na kruznici \( x^2 + y^2 = r^2 \), tangenta u toj tacki se dobija prostom zamenom:</p>
    <div style="font-size: 1.3rem; margin: 16px 0;">
      \[ x^2 \to x_0 \cdot x, \quad y^2 \to y_0 \cdot y \]
    </div>
    <p style="color: #94a3b8;">Ovaj trik radi i za opsti oblik kruznice!</p>
  </div>

  <!-- Final Answer -->
  <div class="final-answer">
    <h2>Konacan odgovor</h2>
    <div class="answer-options-final">
      <div class="answer-option-final">
        (A) \( x + 2y - 8 = 0 \)
      </div>
      <div class="answer-option-final">
        (B) \( 2x - y - 6 = 0 \)
      </div>
      <div class="answer-option-final correct">
        (C) \( 2x + y - 10 = 0 \)
      </div>
      <div class="answer-option-final">
        (D) \( -x + 2y = 0 \)
      </div>
    </div>
    <p class="answer-highlight">\( 2x + y - 10 = 0 \)</p>
    <div class="verification">
      <strong>Provera:</strong> Tacka \( A(4,\, 2) \) zadovoljava jednacinu tangente (\( 8 + 2 - 10 = 0 \)), rastojanje centra od tangente jednako je poluprecniku (\( 2\sqrt{5} \)), a poluprecnik i tangenta su medjusobno upravni (proizvod nagiba \( = -1 \)).
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="pitfall-box">
    <h2>Ceste greske</h2>
    <ul>
      <li><strong>Zaboraviti proveriti da li tacka lezi na kruznici.</strong> Ako tacka ne lezi na kruznici, formula \( x_0 x + y_0 y = r^2 \) ne daje tangentu &mdash; umesto toga bi trebalo koristiti metod sa sistemom jednacina ili diskriminantom.</li>
      <li><strong>Izabrati odgovor (D) jer prolazi kroz A.</strong> Prava \( -x + 2y = 0 \) zaista prolazi kroz \( A(4,\, 2) \), ali takodje prolazi i kroz centar \( O(0,\, 0) \) &mdash; to je secica (precnik), a ne tangenta!</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="challenge-box">
    <h2>Dodatni izazov</h2>
    <p>Nadjite jednacinu tangente iste kruznice \( x^2 + y^2 = 20 \) koja prolazi kroz tacku \( B(6,\, 4) \). Napomena: \( B \) ne lezi na kruznici!</p>
    <details>
      <summary>&#128161; Nagovest</summary>
      <p style="margin-top: 8px;">Kada tacka ne lezi na kruznici, tangentu trazimo tako sto pretpostavimo da je \( y = k(x - 6) + 4 \) i postavimo uslov da diskriminanta sistema sa kruznicom bude jednaka nuli. Dobicete dve tangente.</p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('diagram');
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  // Coordinate system: center of canvas = origin, Y up
  const originX = W / 2;
  const originY = H / 2;
  const scale = 50; // 1 unit = 50px

  function toCanvas(x, y) {
    return { x: originX + x * scale, y: originY - y * scale };
  }

  function drawGrid() {
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (let i = -6; i <= 6; i++) {
      // vertical
      const px = originX + i * scale;
      ctx.beginPath();
      ctx.moveTo(px, 0);
      ctx.lineTo(px, H);
      ctx.stroke();
      // horizontal
      const py = originY - i * scale;
      ctx.beginPath();
      ctx.moveTo(0, py);
      ctx.lineTo(W, py);
      ctx.stroke();
    }
  }

  function drawAxes() {
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 2;
    // x-axis
    ctx.beginPath();
    ctx.moveTo(0, originY);
    ctx.lineTo(W, originY);
    ctx.stroke();
    // y-axis
    ctx.beginPath();
    ctx.moveTo(originX, 0);
    ctx.lineTo(originX, H);
    ctx.stroke();

    // Arrow heads
    ctx.fillStyle = '#475569';
    // x-axis arrow
    ctx.beginPath();
    ctx.moveTo(W - 5, originY - 6);
    ctx.lineTo(W, originY);
    ctx.lineTo(W - 5, originY + 6);
    ctx.fill();
    // y-axis arrow
    ctx.beginPath();
    ctx.moveTo(originX - 6, 5);
    ctx.lineTo(originX, 0);
    ctx.lineTo(originX + 6, 5);
    ctx.fill();

    // Axis labels
    ctx.font = 'bold 14px Segoe UI, sans-serif';
    ctx.fillStyle = '#94a3b8';
    ctx.textAlign = 'left';
    ctx.fillText('x', W - 18, originY + 20);
    ctx.fillText('y', originX + 12, 16);

    // Tick marks and numbers
    ctx.font = '11px Segoe UI, sans-serif';
    ctx.fillStyle = '#64748b';
    ctx.textAlign = 'center';
    for (let i = -5; i <= 5; i++) {
      if (i === 0) continue;
      // x ticks
      const tx = originX + i * scale;
      ctx.beginPath();
      ctx.moveTo(tx, originY - 4);
      ctx.lineTo(tx, originY + 4);
      ctx.strokeStyle = '#475569';
      ctx.lineWidth = 1;
      ctx.stroke();
      ctx.fillText(String(i), tx, originY + 18);
      // y ticks
      const ty = originY - i * scale;
      ctx.beginPath();
      ctx.moveTo(originX - 4, ty);
      ctx.lineTo(originX + 4, ty);
      ctx.stroke();
      ctx.textAlign = 'right';
      ctx.fillText(String(i), originX - 10, ty + 4);
      ctx.textAlign = 'center';
    }
    // Origin label
    ctx.textAlign = 'right';
    ctx.fillText('O', originX - 10, originY + 18);
  }

  function drawCircle() {
    const r = Math.sqrt(20);
    const rPx = r * scale;
    const c = toCanvas(0, 0);

    // Glow effect
    ctx.beginPath();
    ctx.arc(c.x, c.y, rPx, 0, 2 * Math.PI);
    ctx.strokeStyle = 'rgba(96, 165, 250, 0.15)';
    ctx.lineWidth = 8;
    ctx.stroke();

    // Circle
    ctx.beginPath();
    ctx.arc(c.x, c.y, rPx, 0, 2 * Math.PI);
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.stroke();

    // Label
    ctx.font = 'bold 13px Segoe UI, sans-serif';
    ctx.fillStyle = '#60a5fa';
    ctx.textAlign = 'left';
    const labelPos = toCanvas(-Math.sqrt(20) * 0.7, Math.sqrt(20) * 0.7);
    ctx.fillText('k: x\u00B2 + y\u00B2 = 20', labelPos.x - 80, labelPos.y - 12);
  }

  function drawRadius() {
    const o = toCanvas(0, 0);
    const a = toCanvas(4, 2);

    ctx.beginPath();
    ctx.setLineDash([8, 6]);
    ctx.moveTo(o.x, o.y);
    ctx.lineTo(a.x, a.y);
    ctx.strokeStyle = 'rgba(148, 163, 184, 0.5)';
    ctx.lineWidth = 1.5;
    ctx.stroke();
    ctx.setLineDash([]);

    // Midpoint label
    const midX = (o.x + a.x) / 2;
    const midY = (o.y + a.y) / 2;
    ctx.font = '11px Segoe UI, sans-serif';
    ctx.fillStyle = '#94a3b8';
    ctx.textAlign = 'center';
    ctx.fillText('r = 2\u221A5', midX - 16, midY + 16);
  }

  function drawTangentLine() {
    // 2x + y - 10 = 0 => y = -2x + 10
    // Draw from x = -1 to x = 6
    const x1 = -1, y1 = -2 * (-1) + 10; // y = 12
    const x2 = 6, y2 = -2 * 6 + 10; // y = -2
    const p1 = toCanvas(x1, y1);
    const p2 = toCanvas(x2, y2);

    // Glow
    ctx.beginPath();
    ctx.moveTo(p1.x, p1.y);
    ctx.lineTo(p2.x, p2.y);
    ctx.strokeStyle = 'rgba(52, 211, 153, 0.2)';
    ctx.lineWidth = 6;
    ctx.stroke();

    // Line
    ctx.beginPath();
    ctx.moveTo(p1.x, p1.y);
    ctx.lineTo(p2.x, p2.y);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2.5;
    ctx.stroke();

    // Label
    ctx.font = 'bold 13px Segoe UI, sans-serif';
    ctx.fillStyle = '#4ade80';
    ctx.textAlign = 'left';
    const lp = toCanvas(5.2, -2 * 5.2 + 10);
    ctx.fillText('2x + y \u2212 10 = 0', lp.x + 6, lp.y - 6);
  }

  function drawRightAngleMark() {
    const a = toCanvas(4, 2);
    // Direction of radius OA: (4, 2), normalized
    const lenOA = Math.sqrt(16 + 4);
    const dxR = 4 / lenOA;
    const dyR = 2 / lenOA;
    // Direction of tangent: slope = -2, direction (1, -2), normalized
    const lenT = Math.sqrt(1 + 4);
    const dxT = 1 / lenT;
    const dyT = -2 / lenT;

    const sz = 12; // size in pixels

    // In canvas coords: radius direction is (dxR * scale, -dyR * scale) normalized
    // Tangent direction is (dxT * scale, -dyT * scale) normalized
    const rDirX = dxR;
    const rDirY = -dyR;
    const tDirX = dxT;
    const tDirY = dyT; // in canvas: y flips, so tangent direction dy becomes +dyT

    // Actually let's just draw it simply in canvas coordinates
    // From A going along -radius direction (toward O) by sz pixels
    const rlx = -dxR * sz;
    const rly = dyR * sz; // canvas y is flipped
    // From A going along tangent direction by sz pixels
    const tlx = dxT * sz;
    const tly = dyT * sz; // tangent slope -2 means canvas goes down

    // Wait, let me be more careful. In canvas coordinates:
    // Radius from O to A: direction in canvas is (4*scale, -2*scale), so unit: (4/lenOA, -2/lenOA)
    // Tangent at A: slope -2 => direction in canvas (1, 2) (because canvas y is down => slope -2 in math = +2 in canvas), unit: (1/lenT, 2/lenT)
    const rUx = 4 / lenOA; // toward O from A in canvas: negative of this
    const rUy = -2 / lenOA; // in canvas
    const tUx = 1 / lenT; // tangent direction in canvas
    const tUy = 2 / lenT; // in canvas (y flipped from math)

    // Going from A in direction of -radius and +tangent
    const p1x = a.x - rUx * sz;
    const p1y = a.y - rUy * sz;
    const p2x = a.x - rUx * sz + tUx * sz;
    const p2y = a.y - rUy * sz + tUy * sz;
    const p3x = a.x + tUx * sz;
    const p3y = a.y + tUy * sz;

    ctx.beginPath();
    ctx.moveTo(p1x, p1y);
    ctx.lineTo(p2x, p2y);
    ctx.lineTo(p3x, p3y);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1.5;
    ctx.stroke();
  }

  function drawPointA() {
    const a = toCanvas(4, 2);

    // Glow
    ctx.beginPath();
    ctx.arc(a.x, a.y, 8, 0, 2 * Math.PI);
    ctx.fillStyle = 'rgba(244, 114, 182, 0.3)';
    ctx.fill();

    // Dot
    ctx.beginPath();
    ctx.arc(a.x, a.y, 5, 0, 2 * Math.PI);
    ctx.fillStyle = '#f472b6';
    ctx.fill();
    ctx.strokeStyle = '#ffffff';
    ctx.lineWidth = 1;
    ctx.stroke();

    // Label
    ctx.font = 'bold 14px Segoe UI, sans-serif';
    ctx.fillStyle = '#f472b6';
    ctx.textAlign = 'left';
    ctx.fillText('A(4, 2)', a.x + 10, a.y - 10);
  }

  function drawOrigin() {
    const o = toCanvas(0, 0);

    ctx.beginPath();
    ctx.arc(o.x, o.y, 4, 0, 2 * Math.PI);
    ctx.fillStyle = '#a78bfa';
    ctx.fill();
    ctx.strokeStyle = '#ffffff';
    ctx.lineWidth = 1;
    ctx.stroke();
  }

  function drawOtherLines() {
    // Draw the incorrect options as faint dashed lines for comparison
    const lines = [
      { eq: 'A', a: 1, b: 2, c: -8, color: 'rgba(148, 163, 184, 0.2)' },
      { eq: 'B', a: 2, b: -1, c: -6, color: 'rgba(148, 163, 184, 0.2)' },
      { eq: 'D', a: -1, b: 2, c: 0, color: 'rgba(148, 163, 184, 0.2)' },
    ];

    lines.forEach(l => {
      // y = (-a*x - c) / b for two x values
      let x1, y1, x2, y2;
      if (Math.abs(l.b) > 0.001) {
        x1 = -6; y1 = (-l.a * x1 - l.c) / l.b;
        x2 = 7; y2 = (-l.a * x2 - l.c) / l.b;
      } else {
        y1 = -6; x1 = (-l.b * y1 - l.c) / l.a;
        y2 = 7; x2 = (-l.b * y2 - l.c) / l.a;
      }
      const p1 = toCanvas(x1, y1);
      const p2 = toCanvas(x2, y2);

      ctx.beginPath();
      ctx.setLineDash([4, 6]);
      ctx.moveTo(p1.x, p1.y);
      ctx.lineTo(p2.x, p2.y);
      ctx.strokeStyle = l.color;
      ctx.lineWidth = 1;
      ctx.stroke();
      ctx.setLineDash([]);
    });
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    drawGrid();
    drawAxes();
    drawOtherLines();
    drawCircle();
    drawRadius();
    drawTangentLine();
    drawRightAngleMark();
    drawOrigin();
    drawPointA();

    // Legend
    const legendX = 16;
    const legendY = 24;
    ctx.font = '12px Segoe UI, sans-serif';

    ctx.fillStyle = '#60a5fa';
    ctx.fillRect(legendX, legendY, 16, 3);
    ctx.fillText('Kruznica k', legendX + 22, legendY + 5);

    ctx.fillStyle = '#4ade80';
    ctx.fillRect(legendX, legendY + 18, 16, 3);
    ctx.fillText('Tangenta (C)', legendX + 22, legendY + 23);

    ctx.fillStyle = '#f472b6';
    ctx.beginPath();
    ctx.arc(legendX + 8, legendY + 40, 4, 0, 2 * Math.PI);
    ctx.fill();
    ctx.fillText('Tacka A(4, 2)', legendX + 22, legendY + 43);

    ctx.fillStyle = 'rgba(148, 163, 184, 0.4)';
    ctx.setLineDash([4, 4]);
    ctx.beginPath();
    ctx.moveTo(legendX, legendY + 56);
    ctx.lineTo(legendX + 16, legendY + 56);
    ctx.strokeStyle = 'rgba(148, 163, 184, 0.4)';
    ctx.lineWidth = 1;
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = 'rgba(148, 163, 184, 0.5)';
    ctx.fillText('Ostale prave (A, B, D)', legendX + 22, legendY + 60);
  }

  draw();

  // Step click interactivity
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(step => {
    step.addEventListener('click', function() {
      steps.forEach(s => s.classList.remove('active'));
      this.classList.toggle('active');
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Jednacina tangente kruznice u tacki",
  "subject": "math",
  "unit": "geometry",
  "topic_tags": ["analiticka geometrija", "kruznica", "tangenta", "jednacina prave"]
}
BRAINSPARK_META-->