<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tangenta elipse</title>
<script type="text/info" id="logic-scratchpad">
Problem: Find positive n such that y = x + n is tangent to x^2 + y^2/3 = 1.

Ellipse: x^2 + y^2/3 = 1 => a^2 = 1, b^2 = 3 => a = 1, b = sqrt(3)
Line: y = x + n

Substitute y = x + n into the ellipse equation:
x^2 + (x + n)^2 / 3 = 1
Multiply by 3:
3x^2 + (x + n)^2 = 3
3x^2 + x^2 + 2nx + n^2 = 3
4x^2 + 2nx + (n^2 - 3) = 0

For tangency, discriminant D = 0:
D = (2n)^2 - 4 * 4 * (n^2 - 3)
D = 4n^2 - 16n^2 + 48
D = -12n^2 + 48 = 0
n^2 = 4
n = +/- 2

Since we need the positive value: n = 2.
n = 2 belongs to (1, 2], so answer is B.

Tangent point: 4x^2 + 4x + 1 = 0 => (2x + 1)^2 = 0 => x = -1/2
y = -1/2 + 2 = 3/2
Tangent point: (-0.5, 1.5)

Verification: (-0.5)^2 + (1.5)^2/3 = 0.25 + 2.25/3 = 0.25 + 0.75 = 1. Correct!
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}
h1 {
  font-size: 2.2em;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
}
.subtitle {
  color: #94a3b8;
  font-size: 1.1em;
  margin-bottom: 30px;
}
.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}
.card h2 {
  color: #60a5fa;
  font-size: 1.4em;
  margin-bottom: 16px;
}
.card h3 {
  color: #e2e8f0;
  font-size: 1.15em;
  margin-bottom: 10px;
}
.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}
.given-item {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 100px;
  text-align: center;
}
.given-item .label {
  color: #94a3b8;
  font-size: 0.85em;
  margin-bottom: 4px;
}
.given-item .value {
  color: #e2e8f0;
  font-size: 1.1em;
  font-weight: 600;
}
.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 12px 0;
  overflow-x: auto;
}
.step-container {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  padding: 16px;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.2s;
  border-left: 3px solid transparent;
}
.step-container:hover {
  background: rgba(96,165,250,0.05);
  border-left-color: #4ade80;
}
.step-badge {
  width: 32px;
  height: 32px;
  min-width: 32px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 0.9em;
  color: #0f172a;
}
.step-content {
  flex: 1;
}
.step-content h3 {
  margin-bottom: 8px;
}
.step-content p {
  color: #94a3b8;
  margin-bottom: 8px;
}
.note {
  color: #94a3b8;
  font-style: italic;
  font-size: 0.9em;
  margin-top: 8px;
}
.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.15), rgba(167,139,250,0.15));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  text-align: center;
}
.insight-box .insight-formula {
  font-size: 1.4em;
  margin: 12px 0;
}
.final-answer {
  background: rgba(52,211,153,0.1);
  border: 1px solid rgba(52,211,153,0.3);
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  text-align: center;
}
.final-answer .answer-text {
  color: #4ade80;
  font-size: 1.8em;
  font-weight: bold;
  margin: 12px 0;
}
.final-options {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-top: 16px;
}
.final-option {
  padding: 10px 20px;
  border-radius: 10px;
  border: 1px solid #334155;
  background: #1e293b;
  color: #94a3b8;
  font-size: 1em;
}
.final-option.correct {
  border-color: #4ade80;
  background: rgba(52,211,153,0.15);
  color: #4ade80;
  font-weight: bold;
}
.verification {
  color: #94a3b8;
  font-size: 0.95em;
  margin-top: 16px;
  text-align: left;
  padding: 12px 16px;
  background: rgba(56,189,248,0.05);
  border-radius: 8px;
}
.pitfall {
  background: rgba(224,148,104,0.08);
  border: 1px solid rgba(224,148,104,0.2);
  border-radius: 10px;
  padding: 12px 16px;
  margin: 8px 0;
  color: #e09468;
  font-size: 0.95em;
}
details {
  margin: 15px 0;
}
details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 8px 0;
}
details summary:hover {
  color: #a78bfa;
}
.checkpoint {
  background: rgba(167,139,250,0.08);
  border: 1px solid rgba(167,139,250,0.2);
  border-radius: 10px;
  padding: 16px;
  margin: 15px 0;
}
.checkpoint summary {
  color: #a78bfa;
}
canvas {
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  touch-action: none;
  max-width: 100%;
}
.canvas-hint {
  text-align: center;
  color: #94a3b8;
  font-size: 0.85em;
  margin-top: 8px;
}
.plan-text {
  color: #94a3b8;
  font-size: 1.05em;
  line-height: 1.8;
}
@media (max-width: 700px) {
  h1 { font-size: 1.5em; }
  .card { padding: 16px; }
  .given-grid { gap: 8px; }
  .given-item { min-width: 80px; padding: 8px 12px; }
  .step-container { flex-direction: column; gap: 10px; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Tangenta elipse</h1>
  <p class="subtitle">Analitička geometrija - uslov tangentnosti prave i elipse</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Tekst zadatka</h2>
    <p>Pozitivna vrednost parametra \( n \) za koju je prava \( y = x + n \) tangenta elipse \( x^2 + \dfrac{y^2}{3} = 1 \) pripada intervalu:</p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\( (0, 1] \)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\( (1, 2] \)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\( (2, 3] \)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\( (3, 4] \)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <h2>Plan rešavanja</h2>
    <p class="plan-text">Zamenom jednačine prave u jednačinu elipse dobijamo kvadratnu jednačinu po \( x \). Uslov da prava bude tangenta je da diskriminanta te jednačine bude jednaka nuli. Iz tog uslova izračunavamo \( n \).</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Ključne formule i teoreme</summary>
      <ul style="margin-top: 12px; padding-left: 20px; color: #94a3b8; line-height: 2;">
        <li><strong>Jednačina elipse:</strong> \( \dfrac{x^2}{a^2} + \dfrac{y^2}{b^2} = 1 \), gde su \( a \) i \( b \) poluose.</li>
        <li><strong>Uslov tangentnosti:</strong> Prava \( y = kx + n \) je tangenta elipse \( \dfrac{x^2}{a^2} + \dfrac{y^2}{b^2} = 1 \) ako i samo ako važi \( n^2 = a^2 k^2 + b^2 \).</li>
        <li><strong>Diskriminanta kvadratne jednačine:</strong> Za \( Ax^2 + Bx + C = 0 \), diskriminanta je \( D = B^2 - 4AC \). Jednačina ima tačno jedno rešenje (dupli koren) ako je \( D = 0 \).</li>
        <li><strong>Geometrijski smisao:</strong> Tangenta dodiruje krivu u tačno jednoj tački, što odgovara uslovu \( D = 0 \).</li>
      </ul>
    </details>
  </div>

  <!-- Visual Aid - Canvas Diagram -->
  <div class="card">
    <h2>Dijagram</h2>
    <canvas id="diagram" width="700" height="550"></canvas>
    <p class="canvas-hint">Elipsa i tangentna prava \( y = x + 2 \)</p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <div class="step-container">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Identifikujemo elipsu i pravu</h3>
        <p>Elipsa je data u standardnom obliku:</p>
        <div class="math-block">
          \[ x^2 + \frac{y^2}{3} = 1 \]
        </div>
        <p>Ovde je \( a^2 = 1 \) i \( b^2 = 3 \), dakle poluose su \( a = 1 \) i \( b = \sqrt{3} \).</p>
        <p>Prava je \( y = x + n \), što znači da je koeficijent pravca \( k = 1 \).</p>
      </div>
    </div>

    <div class="step-container">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Zamenjujemo pravu u jednačinu elipse</h3>
        <p>Zamenom \( y = x + n \) u jednačinu elipse dobijamo:</p>
        <div class="math-block">
          \[ x^2 + \frac{(x + n)^2}{3} = 1 \]
        </div>
        <p>Množimo obe strane sa 3 da eliminišemo razlomak:</p>
        <div class="math-block">
          \[ 3x^2 + (x + n)^2 = 3 \]
        </div>
      </div>
    </div>

    <div class="step-container">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Razvijamo i sređujemo</h3>
        <p>Razvijamo kvadrat binoma \( (x + n)^2 = x^2 + 2nx + n^2 \):</p>
        <div class="math-block">
          \[ 3x^2 + x^2 + 2nx + n^2 = 3 \]
        </div>
        <p>Sabiramo slične članove:</p>
        <div class="math-block">
          \[ 4x^2 + 2nx + (n^2 - 3) = 0 \]
        </div>
        <p class="note">Dobili smo kvadratnu jednačinu po \( x \) sa koeficijentima \( A = 4 \), \( B = 2n \), \( C = n^2 - 3 \).</p>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri sebe: Kolika je vrednost koeficijenta \( A \) u dobijenoj kvadratnoj jednačini?</summary>
      <p style="margin-top: 8px; color: #e2e8f0;">\( A = 4 \). Dobija se sabiranjem \( 3x^2 + x^2 = 4x^2 \).</p>
    </details>

    <div class="step-container">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Primenjujemo uslov tangentnosti: \( D = 0 \)</h3>
        <p>Da bi prava bila tangenta, kvadratna jednačina mora imati tačno jedno rešenje, tj. diskriminanta mora biti nula:</p>
        <div class="math-block">
          \[ D = B^2 - 4AC = 0 \]
        </div>
        <p>Zamenjujemo koeficijente:</p>
        <div class="math-block">
          \[ D = (2n)^2 - 4 \cdot 4 \cdot (n^2 - 3) = 0 \]
        </div>
      </div>
    </div>

    <div class="step-container">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Rešavamo jednačinu po \( n \)</h3>
        <p>Razvijamo izraz:</p>
        <div class="math-block">
          \[ 4n^2 - 16n^2 + 48 = 0 \]
        </div>
        <p>Sređujemo:</p>
        <div class="math-block">
          \[ -12n^2 + 48 = 0 \]
        </div>
        <p>Delimo sa \(-12\):</p>
        <div class="math-block">
          \[ n^2 = 4 \]
        </div>
        <p>Odavde:</p>
        <div class="math-block">
          \[ n = \pm 2 \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri sebe: Zašto biramo samo \( n = 2 \)?</summary>
      <p style="margin-top: 8px; color: #e2e8f0;">Jer zadatak traži <strong>pozitivnu</strong> vrednost parametra \( n \). Zato je \( n = 2 \).</p>
    </details>

    <div class="step-container">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Određujemo interval</h3>
        <p>Pozitivna vrednost je \( n = 2 \).</p>
        <p>Proveravamo kome intervalu pripada:</p>
        <div class="math-block">
          \[ n = 2 \in (1, 2] \]
        </div>
        <p>Jer važi \( 1 < 2 \leq 2 \). Dakle, tačan odgovor je <strong>B</strong>.</p>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2 style="color: #a78bfa; margin-bottom: 8px;">Ključni uvid</h2>
    <p style="color: #94a3b8;">Uslov tangentnosti prave \( y = kx + n \) i elipse \( \frac{x^2}{a^2} + \frac{y^2}{b^2} = 1 \) je:</p>
    <div class="insight-formula">
      \[ n^2 = a^2 k^2 + b^2 \]
    </div>
    <p style="color: #94a3b8;">Za naše podatke (\( a^2 = 1 \), \( b^2 = 3 \), \( k = 1 \)): \( n^2 = 1 \cdot 1 + 3 = 4 \implies n = \pm 2 \).</p>
  </div>

  <!-- Final Answer -->
  <div class="final-answer">
    <h2 style="color: #4ade80;">Konačan odgovor</h2>
    <div class="answer-text">B) \( (1, 2] \)</div>
    <p style="color: #e2e8f0; margin-bottom: 12px;">Pozitivna vrednost je \( n = 2 \), koja pripada intervalu \( (1, 2] \).</p>
    <div class="final-options">
      <div class="final-option">(A) \( (0, 1] \)</div>
      <div class="final-option correct">(B) \( (1, 2] \)</div>
      <div class="final-option">(C) \( (2, 3] \)</div>
      <div class="final-option">(D) \( (3, 4] \)</div>
    </div>
    <div class="verification">
      <strong>Verifikacija:</strong> Tangentna tačka je \( \left(-\frac{1}{2},\; \frac{3}{2}\right) \). Proveravamo: \( \left(-\frac{1}{2}\right)^2 + \frac{\left(\frac{3}{2}\right)^2}{3} = \frac{1}{4} + \frac{\frac{9}{4}}{3} = \frac{1}{4} + \frac{3}{4} = 1 \). Tačka zaista leži na elipsi.
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <h2>Česte greške</h2>
    <div class="pitfall">
      <strong>Zaboravljanje da se množi sa 3:</strong> Ako ne pomnožite obe strane jednačine sa 3, dobićete pogrešne koeficijente kvadratne jednačine i netačan rezultat.
    </div>
    <div class="pitfall">
      <strong>Uzimanje obe vrednosti \( n \):</strong> Rešenje \( n = \pm 2 \) daje dve tangente, ali zadatak eksplicitno traži pozitivnu vrednost, dakle samo \( n = 2 \).
    </div>
  </div>

  <!-- Optional Challenge -->
  <div class="card">
    <h2>Dodatni izazov</h2>
    <p>Za koje vrednosti parametra \( n \) prava \( y = 2x + n \) nema zajedničkih tačaka sa elipsom \( x^2 + \frac{y^2}{3} = 1 \)?</p>
    <details>
      <summary>Hint</summary>
      <p style="margin-top: 8px; color: #94a3b8;">Koristite isti metod: zamenite pravu u elipsu, formirajte kvadratnu jednačinu i tražite uslov \( D < 0 \). Za \( k = 2 \) dobijate \( n^2 > a^2 k^2 + b^2 = 1 \cdot 4 + 3 = 7 \), tj. \( |n| > \sqrt{7} \).</p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('diagram');
  const ctx = canvas.getContext('2d');

  function draw() {
    const W = canvas.width;
    const H = canvas.height;

    // Clear
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Coordinate system setup
    const originX = W / 2;
    const originY = H / 2 + 30;
    const scale = 120;

    const toCanvas = (x, y) => ({
      x: originX + x * scale,
      y: originY - y * scale
    });

    // Grid lines
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (let i = -4; i <= 4; i++) {
      // Vertical
      const vx = toCanvas(i, 0).x;
      ctx.beginPath();
      ctx.moveTo(vx, 0);
      ctx.lineTo(vx, H);
      ctx.stroke();
      // Horizontal
      const hy = toCanvas(0, i).y;
      ctx.beginPath();
      ctx.moveTo(0, hy);
      ctx.lineTo(W, hy);
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    // X-axis
    ctx.beginPath();
    ctx.moveTo(0, originY);
    ctx.lineTo(W, originY);
    ctx.stroke();
    // Y-axis
    ctx.beginPath();
    ctx.moveTo(originX, 0);
    ctx.lineTo(originX, H);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('x', W - 15, originY - 8);
    ctx.fillText('y', originX + 14, 18);

    // Tick marks and numbers
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#64748b';
    for (let i = -3; i <= 3; i++) {
      if (i === 0) continue;
      // X ticks
      const tx = toCanvas(i, 0);
      ctx.beginPath();
      ctx.moveTo(tx.x, tx.y - 4);
      ctx.lineTo(tx.x, tx.y + 4);
      ctx.strokeStyle = '#475569';
      ctx.stroke();
      ctx.fillText(i.toString(), tx.x, tx.y + 18);
      // Y ticks
      const ty = toCanvas(0, i);
      ctx.beginPath();
      ctx.moveTo(ty.x - 4, ty.y);
      ctx.lineTo(ty.x + 4, ty.y);
      ctx.stroke();
      ctx.textAlign = 'right';
      ctx.fillText(i.toString(), ty.x - 8, ty.y + 4);
      ctx.textAlign = 'center';
    }

    // Draw the ellipse: x^2 + y^2/3 = 1, a=1, b=sqrt(3)
    const a = 1;
    const b = Math.sqrt(3);

    // Ellipse glow
    ctx.save();
    ctx.shadowColor = '#60a5fa';
    ctx.shadowBlur = 15;
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    for (let t = 0; t <= 2 * Math.PI + 0.01; t += 0.02) {
      const ex = a * Math.cos(t);
      const ey = b * Math.sin(t);
      const p = toCanvas(ex, ey);
      if (t === 0) ctx.moveTo(p.x, p.y);
      else ctx.lineTo(p.x, p.y);
    }
    ctx.closePath();
    ctx.stroke();
    ctx.restore();

    // Draw tangent line y = x + 2 (n = 2)
    const lineY = (x) => x + 2;
    const x1 = -3.5;
    const x2 = 3.5;
    const p1 = toCanvas(x1, lineY(x1));
    const p2 = toCanvas(x2, lineY(x2));

    ctx.save();
    ctx.shadowColor = '#4ade80';
    ctx.shadowBlur = 10;
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(p1.x, p1.y);
    ctx.lineTo(p2.x, p2.y);
    ctx.stroke();
    ctx.restore();

    // Draw the other tangent y = x - 2 (n = -2) as dashed
    const lineY2 = (x) => x - 2;
    const p3 = toCanvas(x1, lineY2(x1));
    const p4 = toCanvas(x2, lineY2(x2));
    ctx.save();
    ctx.strokeStyle = 'rgba(148,163,184,0.4)';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([8, 6]);
    ctx.beginPath();
    ctx.moveTo(p3.x, p3.y);
    ctx.lineTo(p4.x, p4.y);
    ctx.stroke();
    ctx.restore();

    // Tangent point (-0.5, 1.5)
    const tp = toCanvas(-0.5, 1.5);
    ctx.save();
    ctx.shadowColor = '#f472b6';
    ctx.shadowBlur = 12;
    ctx.fillStyle = '#f472b6';
    ctx.beginPath();
    ctx.arc(tp.x, tp.y, 6, 0, 2 * Math.PI);
    ctx.fill();
    ctx.restore();

    // Label tangent point
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('T(-1/2, 3/2)', tp.x + 10, tp.y - 10);

    // Other tangent point (0.5, -1.5)
    const tp2 = toCanvas(0.5, -1.5);
    ctx.save();
    ctx.fillStyle = 'rgba(148,163,184,0.5)';
    ctx.beginPath();
    ctx.arc(tp2.x, tp2.y, 4, 0, 2 * Math.PI);
    ctx.fill();
    ctx.restore();

    // Label y-intercept n=2
    const yInt = toCanvas(0, 2);
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('n = 2', yInt.x + 8, yInt.y - 6);

    // Small dot at y-intercept
    ctx.fillStyle = '#4ade80';
    ctx.beginPath();
    ctx.arc(yInt.x, yInt.y, 4, 0, 2 * Math.PI);
    ctx.fill();

    // Legend
    const legendX = 20;
    const legendY = 22;

    ctx.fillStyle = '#94a3b8';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';

    // Ellipse legend
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(legendX, legendY);
    ctx.lineTo(legendX + 25, legendY);
    ctx.stroke();
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('Elipsa: x\u00B2 + y\u00B2/3 = 1', legendX + 32, legendY + 4);

    // Tangent line legend
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2;
    ctx.setLineDash([]);
    ctx.beginPath();
    ctx.moveTo(legendX, legendY + 22);
    ctx.lineTo(legendX + 25, legendY + 22);
    ctx.stroke();
    ctx.fillText('Tangenta: y = x + 2', legendX + 32, legendY + 26);

    // Dashed line legend
    ctx.strokeStyle = 'rgba(148,163,184,0.5)';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.moveTo(legendX, legendY + 44);
    ctx.lineTo(legendX + 25, legendY + 44);
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillText('y = x - 2 (n = -2)', legendX + 32, legendY + 48);

    // Mark the semi-axes
    // a = 1 on x-axis
    const pa = toCanvas(1, 0);
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'italic 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('a=1', pa.x, pa.y + 30);

    // b = sqrt(3) on y-axis
    const pb = toCanvas(0, b);
    ctx.fillStyle = '#60a5fa';
    ctx.textAlign = 'left';
    ctx.fillText('b=\u221A3', pb.x + 8, pb.y + 4);

    // Origin label
    ctx.fillStyle = '#64748b';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText('O', originX - 8, originY + 16);
  }

  draw();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Tangenta elipse - uslov tangentnosti prave i elipse",
  "subject": "math",
  "unit": "geometry",
  "topic_tags": ["elipsa", "tangenta", "analitička geometrija", "diskriminanta", "konusni preseci"]
}
BRAINSPARK_META-->