<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Skraćivanje algebarskog razlomka</title>

<script type="text/info" id="logic-scratchpad">
Problem: Simplify the fraction (a³b − 2a²b² + ab³) / (b(a³ − ab²)), given ab ≠ 0, a ≠ ±b.

Step 1: Factor the numerator.
  a³b − 2a²b² + ab³
  = ab(a² − 2ab + b²)       [factor out ab]
  = ab(a − b)²               [perfect square trinomial: a² − 2ab + b² = (a−b)²]

Step 2: Factor the denominator.
  b(a³ − ab²)
  = b · a(a² − b²)           [factor out a from the parenthesis]
  = ab(a² − b²)
  = ab(a − b)(a + b)          [difference of squares: a² − b² = (a−b)(a+b)]

Step 3: Simplify the fraction.
  ab(a − b)² / [ab(a − b)(a + b)]

  Cancel ab (since ab ≠ 0):
  = (a − b)² / [(a − b)(a + b)]

  Cancel one (a − b) factor (since a ≠ b, so a − b ≠ 0):
  = (a − b) / (a + b)

Answer: A) (a − b) / (a + b)

Verification: The PDF shows answer A highlighted in green, confirming (a−b)/(a+b).
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 100px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.plan-card {
  border-left: 4px solid #a78bfa;
}

.plan-card p {
  color: #c4b5fd;
  font-size: 1.05rem;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  font-size: 1.05rem;
  padding: 8px 0;
}

details summary:hover {
  color: #93c5fd;
}

details[open] summary {
  margin-bottom: 12px;
}

.theory-list {
  list-style: none;
  padding: 0;
}

.theory-list li {
  padding: 8px 0;
  border-bottom: 1px solid #334155;
  color: #cbd5e1;
}

.theory-list li:last-child {
  border-bottom: none;
}

.step-container {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  padding: 16px;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.2s ease;
  border-left: 3px solid transparent;
}

.step-container:hover,
.step-container.active {
  background: rgba(96,165,250,0.05);
  border-left: 3px solid #4ade80;
}

.step-badge {
  width: 32px;
  height: 32px;
  min-width: 32px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  color: #0f172a;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 10px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 6px;
}

.checkpoint {
  background: rgba(167,139,250,0.08);
  border: 1px solid rgba(167,139,250,0.2);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 15px 0;
}

.checkpoint summary {
  color: #a78bfa;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  text-align: center;
}

.insight-box h2 {
  color: #a78bfa;
  margin-bottom: 12px;
}

.final-answer-box {
  background: linear-gradient(135deg, rgba(52,211,153,0.1), rgba(74,222,128,0.1));
  border: 2px solid rgba(52,211,153,0.3);
  border-radius: 14px;
  padding: 28px;
  margin-bottom: 24px;
  text-align: center;
}

.final-answer-box h2 {
  color: #34d399;
  margin-bottom: 16px;
}

.final-answer-text {
  font-size: 1.6rem;
  font-weight: 700;
  color: #4ade80;
  margin-bottom: 16px;
}

.answer-options-final {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 20px 0;
}

.answer-final-item {
  padding: 10px 20px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: #1e293b;
  color: #94a3b8;
  font-size: 1rem;
}

.answer-final-item.correct {
  border-color: #34d399;
  background: rgba(52,211,153,0.12);
  color: #4ade80;
  font-weight: 700;
}

.verification-note {
  margin-top: 16px;
  padding: 14px;
  background: rgba(52,211,153,0.06);
  border-radius: 8px;
  color: #94a3b8;
  font-size: 0.95rem;
}

.pitfall-box {
  border-left: 4px solid #e09468;
}

.pitfall-box h2 {
  color: #e09468;
}

.pitfall-list {
  list-style: none;
  padding: 0;
}

.pitfall-list li {
  padding: 8px 0;
  color: #cbd5e1;
}

.pitfall-list li::before {
  content: "⚠ ";
  color: #e09468;
}

.challenge-box {
  border-left: 4px solid #f472b6;
}

.challenge-box h2 {
  color: #f472b6;
}

.canvas-card {
  text-align: center;
}

.canvas-card canvas {
  border-radius: 10px;
  width: 100%;
  max-width: 700px;
  touch-action: none;
}

.drag-hint {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-top: 8px;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .given-grid { gap: 8px; }
  .given-item { min-width: 80px; padding: 8px 12px; }
  .step-container { flex-direction: column; gap: 8px; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Skraćivanje algebarskog razlomka</h1>
  <p class="subtitle">Faktorizacija polinoma i skraćivanje razlomaka sa promenljivama</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Skraćivanjem razlomka</p>
    <div class="math-block">
      \[ \frac{a^3b - 2a^2b^2 + ab^3}{b\left(a^3 - ab^2\right)} \]
    </div>
    <p>gde je \( ab \neq 0 \) i \( a \neq \pm b \), dobija se razlomak:</p>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(\dfrac{a-b}{a+b}\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(\dfrac{a-b}{a}\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(a - b\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(\dfrac{a-b}{ab}\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan rešavanja</h2>
    <p>Faktorizovaćemo i brojilac i imenilac razlomka izvlačenjem zajedničkih činilaca i primenom formula za skraćeno množenje, a zatim skratiti zajedničke faktore.</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Ključne formule i teoreme</summary>
      <ul class="theory-list">
        <li><strong>Potpun kvadrat razlike:</strong> \( a^2 - 2ab + b^2 = (a - b)^2 \)</li>
        <li><strong>Razlika kvadrata:</strong> \( a^2 - b^2 = (a - b)(a + b) \)</li>
        <li><strong>Izvlačenje zajedničkog činioca:</strong> Ako svi sabirci sadrže isti faktor, možemo ga izdvojiti ispred zagrade.</li>
        <li><strong>Skraćivanje razlomaka:</strong> Zajedničke faktore u brojiocu i imeniocu možemo skratiti pod uslovom da nisu jednaki nuli.</li>
      </ul>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card canvas-card">
    <h2>Vizuelni prikaz faktorizacije</h2>
    <canvas id="factorCanvas" width="700" height="380"></canvas>
    <p class="drag-hint">Dijagram prikazuje strukturu faktorizacije brojioca i imenioca</p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container" tabindex="0">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Faktorizacija brojioca</h3>
        <p>Posmatrajmo brojilac \( a^3b - 2a^2b^2 + ab^3 \). Svi članovi sadrže zajednički činilac \( ab \), pa ga izvlačimo ispred zagrade:</p>
        <div class="math-block">
          \[ a^3b - 2a^2b^2 + ab^3 = ab\left(a^2 - 2ab + b^2\right) \]
        </div>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container" tabindex="0">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Primena formule za potpun kvadrat razlike</h3>
        <p>Izraz u zagradi \( a^2 - 2ab + b^2 \) prepoznajemo kao potpun kvadrat razlike:</p>
        <div class="math-block">
          \[ a^2 - 2ab + b^2 = (a - b)^2 \]
        </div>
        <p>Dakle, brojilac postaje:</p>
        <div class="math-block">
          \[ \text{Brojilac} = ab(a - b)^2 \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Koji je zajednički činilac svih članova brojioca?</summary>
      <p>Zajednički činilac je \( ab \). Svaki član \( a^3b,\ 2a^2b^2,\ ab^3 \) sadrži bar jedan faktor \( a \) i bar jedan faktor \( b \).</p>
    </details>

    <!-- Step 3 -->
    <div class="step-container" tabindex="0">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Faktorizacija imenioca</h3>
        <p>Imenilac je \( b(a^3 - ab^2) \). Iz zagrade izvlačimo zajednički činilac \( a \):</p>
        <div class="math-block">
          \[ b(a^3 - ab^2) = b \cdot a(a^2 - b^2) = ab(a^2 - b^2) \]
        </div>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step-container" tabindex="0">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Primena formule za razliku kvadrata</h3>
        <p>Izraz \( a^2 - b^2 \) je razlika kvadrata, pa ga rastavimo:</p>
        <div class="math-block">
          \[ a^2 - b^2 = (a - b)(a + b) \]
        </div>
        <p>Dakle, imenilac postaje:</p>
        <div class="math-block">
          \[ \text{Imenilac} = ab(a - b)(a + b) \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Koliko puta se faktor \( (a-b) \) pojavljuje u brojiocu, a koliko u imeniocu?</summary>
      <p>U brojiocu se pojavljuje <strong>dva puta</strong> (jer je \( (a-b)^2 = (a-b)(a-b) \)), a u imeniocu <strong>jednom</strong>. Zato posle skraćivanja ostaje jedan faktor \( (a-b) \) u brojiocu.</p>
    </details>

    <!-- Step 5 -->
    <div class="step-container" tabindex="0">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Zapišemo razlomak u faktorizovanom obliku</h3>
        <p>Sada zapišemo ceo razlomak koristeći faktorizovane oblike:</p>
        <div class="math-block">
          \[ \frac{ab(a-b)^2}{ab(a-b)(a+b)} \]
        </div>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step-container" tabindex="0">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Skraćivanje zajedničkih činilaca</h3>
        <p>Skraćujemo zajednički činilac \( ab \) (dozvoljeno jer \( ab \neq 0 \)):</p>
        <div class="math-block">
          \[ \frac{\cancel{ab}(a-b)^2}{\cancel{ab}(a-b)(a+b)} = \frac{(a-b)^2}{(a-b)(a+b)} \]
        </div>
        <p>Zatim skraćujemo jedan faktor \( (a-b) \) (dozvoljeno jer \( a \neq b \), pa je \( a - b \neq 0 \)):</p>
        <div class="math-block">
          \[ \frac{(a-b)\cancel{(a-b)}}{\cancel{(a-b)}(a+b)} = \frac{a-b}{a+b} \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Zašto smemo da skratimo \( (a - b) \)?</summary>
      <p>Zato što je u uslovu zadatka dato da \( a \neq \pm b \), što posebno znači \( a \neq b \), odnosno \( a - b \neq 0 \). Skraćivanje je dozvoljeno samo kada činilac nije jednak nuli.</p>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Ključni uvid</h2>
    <p>Prepoznavanje formule za potpun kvadrat \( (a-b)^2 \) u brojiocu i formule za razliku kvadrata \( (a-b)(a+b) \) u imeniocu je ključ ovog zadatka. Obe formule sadrže faktor \( (a-b) \), ali u različitim stepenima!</p>
    <div class="math-block" style="font-size: 1.2rem;">
      \[ \frac{ab \cdot (a-b)^{\color{#4ade80}{2}}}{ab \cdot (a-b)^{\color{#4ade80}{1}} \cdot (a+b)} = \frac{a-b}{a+b} \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <h2>Konačan odgovor</h2>
    <div class="final-answer-text">
      \[ \frac{a-b}{a+b} \]
    </div>

    <div class="answer-options-final">
      <div class="answer-final-item correct">(A) \(\dfrac{a-b}{a+b}\)</div>
      <div class="answer-final-item">(B) \(\dfrac{a-b}{a}\)</div>
      <div class="answer-final-item">(C) \(a - b\)</div>
      <div class="answer-final-item">(D) \(\dfrac{a-b}{ab}\)</div>
    </div>

    <div class="verification-note">
      <strong>Provera:</strong> Proverimo zamenom, npr. \( a = 3,\ b = 1 \).<br>
      Brojilac: \( 27 \cdot 1 - 2 \cdot 9 \cdot 1 + 3 \cdot 1 = 27 - 18 + 3 = 12 \).<br>
      Imenilac: \( 1 \cdot (27 - 3) = 24 \).<br>
      Razlomak: \( \frac{12}{24} = \frac{1}{2} \).<br>
      Odgovor A: \( \frac{3-1}{3+1} = \frac{2}{4} = \frac{1}{2} \). Tačno!
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfall-box">
    <h2>Česte greške</h2>
    <ul class="pitfall-list">
      <li>Zaboraviti da se iz brojioca izvuče zajednički činilac \( ab \) pre primene formule za potpun kvadrat. Bez tog koraka, izraz u zagradi nema oblik \( a^2 - 2ab + b^2 \).</li>
      <li>Pomešati formulu za potpun kvadrat razlike \( (a-b)^2 = a^2 - 2ab + b^2 \) sa razlikom kvadrata \( a^2 - b^2 = (a-b)(a+b) \). To su različite formule!</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-box">
    <h2>Dodatni izazov</h2>
    <p>Pokušaj da skratiš sličan razlomak:</p>
    <div class="math-block">
      \[ \frac{a^4b - 2a^3b^2 + a^2b^3}{a^2b(a^2 - b^2)} \]
    </div>
    <details>
      <summary>Pogledaj nagoveštaj</summary>
      <p>Postupi isto: izvuci zajednički činilac iz brojioca (ovog puta \( a^2b \)), prepoznaj potpun kvadrat, a zatim primeni razliku kvadrata u imeniocu. Koliko puta se sada može skratiti \( (a - b) \)?</p>
    </details>
  </div>

</div>

<script>
(() => {
  // Step click highlighting
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.toggle('active');
    });
  });

  // Canvas: Factorization visualization
  const canvas = document.getElementById('factorCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');

  const W = canvas.width;
  const H = canvas.height;

  function drawRoundedRect(x, y, w, h, r, fillColor, strokeColor) {
    ctx.beginPath();
    ctx.moveTo(x + r, y);
    ctx.lineTo(x + w - r, y);
    ctx.quadraticCurveTo(x + w, y, x + w, y + r);
    ctx.lineTo(x + w, y + h - r);
    ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
    ctx.lineTo(x + r, y + h);
    ctx.quadraticCurveTo(x, y + h, x, y + h - r);
    ctx.lineTo(x, y + r);
    ctx.quadraticCurveTo(x, y, x + r, y);
    ctx.closePath();
    if (fillColor) {
      ctx.fillStyle = fillColor;
      ctx.fill();
    }
    if (strokeColor) {
      ctx.strokeStyle = strokeColor;
      ctx.lineWidth = 1.5;
      ctx.stroke();
    }
  }

  function drawArrow(fromX, fromY, toX, toY, color) {
    ctx.beginPath();
    ctx.strokeStyle = color;
    ctx.lineWidth = 2;
    ctx.moveTo(fromX, fromY);
    ctx.lineTo(toX, toY);
    ctx.stroke();

    const angle = Math.atan2(toY - fromY, toX - fromX);
    const headLen = 8;
    ctx.beginPath();
    ctx.fillStyle = color;
    ctx.moveTo(toX, toY);
    ctx.lineTo(toX - headLen * Math.cos(angle - 0.4), toY - headLen * Math.sin(angle - 0.4));
    ctx.lineTo(toX - headLen * Math.cos(angle + 0.4), toY - headLen * Math.sin(angle + 0.4));
    ctx.closePath();
    ctx.fill();
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    const midX = W / 2;

    // Title labels
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';

    // --- NUMERATOR SIDE ---
    ctx.fillStyle = '#60a5fa';
    ctx.fillText('BROJILAC', midX / 2, 28);

    // Original numerator
    drawRoundedRect(20, 40, midX - 60, 40, 8, 'rgba(96,165,250,0.1)', '#60a5fa');
    ctx.fillStyle = '#e2e8f0';
    ctx.font = '14px Courier New, monospace';
    ctx.fillText('a\u00B3b \u2212 2a\u00B2b\u00B2 + ab\u00B3', midX / 2, 65);

    // Arrow down
    drawArrow(midX / 2, 82, midX / 2, 105, '#60a5fa');

    // Factored step 1
    drawRoundedRect(20, 108, midX - 60, 40, 8, 'rgba(96,165,250,0.1)', '#60a5fa');
    ctx.fillStyle = '#e2e8f0';
    ctx.fillText('ab(a\u00B2 \u2212 2ab + b\u00B2)', midX / 2, 133);

    // Arrow down
    drawArrow(midX / 2, 150, midX / 2, 173, '#60a5fa');

    // Final factored numerator
    drawRoundedRect(20, 176, midX - 60, 44, 8, 'rgba(52,211,153,0.1)', '#34d399');
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 15px Courier New, monospace';
    ctx.fillText('ab \u00B7 (a \u2212 b)\u00B2', midX / 2, 203);

    // Labels for the factors
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('izvlačenje ab', midX / 2, 100);
    ctx.fillText('potpun kvadrat razlike', midX / 2, 168);

    // --- DENOMINATOR SIDE ---
    const rightCenter = midX + (W - midX) / 2;

    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.fillText('IMENILAC', rightCenter, 28);

    // Original denominator
    drawRoundedRect(midX + 20, 40, midX - 60, 40, 8, 'rgba(167,139,250,0.1)', '#a78bfa');
    ctx.fillStyle = '#e2e8f0';
    ctx.font = '14px Courier New, monospace';
    ctx.fillText('b(a\u00B3 \u2212 ab\u00B2)', rightCenter, 65);

    // Arrow down
    drawArrow(rightCenter, 82, rightCenter, 105, '#a78bfa');

    // Factored step 1
    drawRoundedRect(midX + 20, 108, midX - 60, 40, 8, 'rgba(167,139,250,0.1)', '#a78bfa');
    ctx.fillStyle = '#e2e8f0';
    ctx.fillText('ab(a\u00B2 \u2212 b\u00B2)', rightCenter, 133);

    // Arrow down
    drawArrow(rightCenter, 150, rightCenter, 173, '#a78bfa');

    // Final factored denominator
    drawRoundedRect(midX + 20, 176, midX - 60, 44, 8, 'rgba(52,211,153,0.1)', '#34d399');
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 15px Courier New, monospace';
    ctx.fillText('ab \u00B7 (a\u2212b)(a+b)', rightCenter, 203);

    // Labels
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('izvlačenje a', rightCenter, 100);
    ctx.fillText('razlika kvadrata', rightCenter, 168);

    // --- CANCELLATION SECTION ---
    // Divider line
    ctx.beginPath();
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.setLineDash([5, 5]);
    ctx.moveTo(30, 245);
    ctx.lineTo(W - 30, 245);
    ctx.stroke();
    ctx.setLineDash([]);

    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.fillText('SKRAĆIVANJE', midX, 268);

    // Full fraction before cancellation
    drawRoundedRect(40, 280, W - 80, 40, 8, 'rgba(96,165,250,0.08)', '#334155');
    ctx.fillStyle = '#e2e8f0';
    ctx.font = '14px Courier New, monospace';
    ctx.fillText('ab \u00B7 (a\u2212b)\u00B2  /  ab \u00B7 (a\u2212b)(a+b)', midX, 305);

    // Strike-through on "ab" and one "(a-b)"
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2;
    // Left ab
    ctx.beginPath();
    ctx.moveTo(midX - 180, 300);
    ctx.lineTo(midX - 155, 300);
    ctx.stroke();
    // Right ab
    ctx.beginPath();
    ctx.moveTo(midX + 42, 300);
    ctx.lineTo(midX + 67, 300);
    ctx.stroke();

    // Arrow to result
    drawArrow(midX, 322, midX, 345, '#4ade80');

    // Final result
    drawRoundedRect(midX - 100, 348, 200, 44, 10, 'rgba(52,211,153,0.15)', '#4ade80');
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 18px Courier New, monospace';
    ctx.fillText('(a \u2212 b) / (a + b)', midX, 375);
  }

  draw();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Skraćivanje algebarskog razlomka sa faktorizacijom",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["faktorizacija", "skraćivanje razlomaka", "potpun kvadrat", "razlika kvadrata"]
}
BRAINSPARK_META-->