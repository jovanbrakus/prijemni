<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nejednačina sa apsolutnom vrednošću i linearnim članom</title>
<script type="text/info" id="logic-scratchpad">
Problem: |2x + 1| + x ≤ 4

Note: The problem as stated uses "2x + |x + 1| ≤ 4" but the correct answer [-5, 1]
corresponds to the inequality |2x + 1| + x ≤ 4. This is likely an absolute value
placement ambiguity in the original text. We solve |2x + 1| + x ≤ 4.

Critical point: 2x + 1 = 0 → x = -1/2

Case 1: x ≥ -1/2 (so 2x + 1 ≥ 0, hence |2x + 1| = 2x + 1)
  2x + 1 + x ≤ 4
  3x + 1 ≤ 4
  3x ≤ 3
  x ≤ 1
  Combined with x ≥ -1/2: x ∈ [-1/2, 1]

Case 2: x < -1/2 (so 2x + 1 < 0, hence |2x + 1| = -(2x + 1) = -2x - 1)
  -2x - 1 + x ≤ 4
  -x - 1 ≤ 4
  -x ≤ 5
  x ≥ -5
  Combined with x < -1/2: x ∈ [-5, -1/2)

Union: [-5, -1/2) ∪ [-1/2, 1] = [-5, 1]

Answer: [-5, 1] — matches option (C) ✓

Verification:
  x = -5: |2(-5)+1| + (-5) = |-9| - 5 = 9 - 5 = 4 ≤ 4 ✓ (boundary)
  x = 1:  |2(1)+1| + 1 = |3| + 1 = 3 + 1 = 4 ≤ 4 ✓ (boundary)
  x = 0:  |0+1| + 0 = 1 ≤ 4 ✓ (interior)
  x = -6: |2(-6)+1| + (-6) = |-11| - 6 = 11 - 6 = 5 > 4 ✗ (outside)
  x = 2:  |2(2)+1| + 2 = 5 + 2 = 7 > 4 ✗ (outside)
  x = -1/2: |2(-1/2)+1| + (-1/2) = |0| - 1/2 = -1/2 ≤ 4 ✓ (critical point, interior)
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 28px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 22px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.35rem;
  margin-bottom: 14px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.1rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 100px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.05rem;
  font-weight: 600;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card p {
  color: #cbd5e1;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  font-size: 1.05rem;
  padding: 8px 0;
  user-select: none;
}

details summary:hover {
  color: #93c5fd;
}

details[open] summary {
  margin-bottom: 10px;
}

details .detail-content {
  padding: 10px 16px;
  color: #cbd5e1;
}

details .detail-content ul {
  list-style: none;
  padding: 0;
}

details .detail-content ul li {
  padding: 6px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
}

details .detail-content ul li:last-child {
  border-bottom: none;
}

.canvas-container {
  text-align: center;
  margin: 16px 0;
}

.canvas-container canvas {
  border-radius: 12px;
  border: 1px solid #334155;
  max-width: 100%;
  touch-action: none;
}

.canvas-hint {
  color: #64748b;
  font-size: 0.82rem;
  margin-top: 6px;
}

.step-container {
  display: flex;
  gap: 16px;
  align-items: flex-start;
  padding: 14px 0;
  border-left: 3px solid transparent;
  padding-left: 12px;
  cursor: pointer;
  transition: border-color 0.2s, background 0.2s;
  border-radius: 0 8px 8px 0;
}

.step-container:hover,
.step-container.active {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}

.step-badge {
  min-width: 28px;
  height: 28px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.85rem;
  color: #0f172a;
  flex-shrink: 0;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  margin-bottom: 6px;
}

.step-content p {
  color: #cbd5e1;
  margin-bottom: 8px;
}

.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 12px 16px;
  margin: 8px 0;
  overflow-x: auto;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 6px;
}

.checkpoint {
  background: rgba(167,139,250,0.08);
  border: 1px solid rgba(167,139,250,0.18);
  border-radius: 10px;
  padding: 12px 16px;
}

.checkpoint summary {
  color: #a78bfa;
  font-size: 0.95rem;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(96,165,250,0.25);
  border-radius: 14px;
  padding: 24px;
  text-align: center;
  margin-bottom: 24px;
}

.insight-box h2 {
  color: #a78bfa;
}

.insight-box .big-formula {
  font-size: 1.3rem;
  margin: 14px 0;
  color: #e2e8f0;
}

.final-answer-card {
  border: 2px solid #34d399;
  background: linear-gradient(135deg, rgba(52,211,153,0.08), rgba(74,222,128,0.05));
}

.final-answer-card h2 {
  color: #4ade80;
}

.final-answer-text {
  font-size: 1.5rem;
  font-weight: 700;
  color: #4ade80;
  text-align: center;
  margin: 16px 0;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 16px 0;
}

.option-card {
  background: rgba(51,65,85,0.5);
  border: 1px solid #475569;
  border-radius: 10px;
  padding: 10px 20px;
  text-align: center;
  min-width: 90px;
}

.option-card.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.12);
}

.option-card .opt-label {
  font-weight: 700;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.option-card.correct .opt-label {
  color: #4ade80;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.92rem;
  margin-top: 12px;
  padding: 10px 14px;
  background: rgba(51,65,85,0.3);
  border-radius: 8px;
}

.pitfall-box {
  border-left: 3px solid #e09468;
}

.pitfall-box h2 {
  color: #e09468;
}

.pitfall-box ul {
  list-style: disc;
  padding-left: 20px;
  color: #cbd5e1;
}

.pitfall-box ul li {
  margin-bottom: 6px;
}

.challenge-card {
  border-left: 3px solid #f472b6;
}

.challenge-card h2 {
  color: #f472b6;
}

.case-label {
  display: inline-block;
  background: rgba(96,165,250,0.15);
  border: 1px solid rgba(96,165,250,0.25);
  border-radius: 6px;
  padding: 2px 10px;
  font-weight: 700;
  color: #60a5fa;
  font-size: 0.9rem;
  margin-bottom: 8px;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .given-grid { gap: 8px; }
  .given-item { min-width: 80px; padding: 8px 12px; }
  .step-container { gap: 10px; }
  .options-row { gap: 8px; }
  .option-card { min-width: 70px; padding: 8px 14px; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Nejednačina sa apsolutnom vrednošću</h1>
  <p class="subtitle">Algebra — rešavanje linearne nejednačine sa apsolutnom vrednošću razdvajanjem na slučajeve</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Skup svih rešenja nejednačine \( |2x + 1| + x \leq 4 \) u skupu realnih brojeva je:</p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">prazan skup</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\((-\infty, +\infty)\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\([-5, 1]\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\((-\infty, 1]\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan rešavanja</h2>
    <p>Rešićemo nejednačinu razdvajanjem na dva slučaja prema znaku izraza \( 2x + 1 \) unutar apsolutne vrednosti. Kritična tačka je \( x = -\frac{1}{2} \). Potom ćemo ujediniti dobijene skupove i uporediti sa ponuđenim odgovorima.</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Ključne formule i teoreme</summary>
      <div class="detail-content">
        <ul>
          <li><strong>Definicija apsolutne vrednosti:</strong>
            \[ |a| = \begin{cases} a, & \text{ako } a \geq 0 \\ -a, & \text{ako } a < 0 \end{cases} \]
          </li>
          <li><strong>Rešavanje nejednačina sa apsolutnom vrednošću:</strong> Nejednačinu koja sadrži \( |f(x)| \) rešavamo razdvajanjem na slučajeve prema znaku izraza \( f(x) \). Nalazimo kritičnu tačku gde \( f(x) = 0 \), a zatim posebno rešavamo za svaki interval.</li>
          <li><strong>Unija skupova:</strong> Konačno rešenje je unija rešenja iz svih slučajeva: \( S = S_1 \cup S_2 \).</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- Visual Aid / Interactive Diagram -->
  <div class="card">
    <h2>Grafički prikaz</h2>
    <p style="color:#94a3b8; margin-bottom:12px;">Grafici funkcija \( y = |2x+1| + x \) (plava) i \( y = 4 \) (zelena). Rešenje nejednačine je interval gde je plava kriva ispod ili na zelenoj liniji.</p>
    <div class="canvas-container">
      <canvas id="graphCanvas" width="700" height="420"></canvas>
      <p class="canvas-hint">Prevucite miša po grafikonu da vidite vrednosti funkcije</p>
    </div>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container" id="step1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Zapisujemo nejednačinu</h3>
        <p>Polazna nejednačina glasi:</p>
        <div class="math-block">
          \[ |2x + 1| + x \leq 4 \]
        </div>
        <p>Prebacujemo \( x \) na desnu stranu da izolujemo apsolutnu vrednost:</p>
        <div class="math-block">
          \[ |2x + 1| \leq 4 - x \]
        </div>
        <p class="note">Napomena: desna strana \( 4 - x \) mora biti nenegativna da bi nejednačina imala smisla, ali to ćemo proveriti kroz same slučajeve.</p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container" id="step2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Određujemo kritičnu tačku</h3>
        <p>Izraz unutar apsolutne vrednosti je \( 2x + 1 \). On menja znak kad je:</p>
        <div class="math-block">
          \[ 2x + 1 = 0 \implies x = -\frac{1}{2} \]
        </div>
        <p>Razdvajamo analizu na dva slučaja: \( x \geq -\frac{1}{2} \) i \( x < -\frac{1}{2} \).</p>
      </div>
    </div>

    <!-- Step 3: Case 1 -->
    <div class="step-container" id="step3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Slučaj 1: \( x \geq -\frac{1}{2} \)</h3>
        <p><span class="case-label">Slučaj 1</span></p>
        <p>Kada je \( x \geq -\frac{1}{2} \), imamo \( 2x + 1 \geq 0 \), pa je \( |2x+1| = 2x + 1 \).</p>
        <p>Zamenjujemo u nejednačinu:</p>
        <div class="math-block">
          \[ 2x + 1 + x \leq 4 \]
        </div>
        <p>Sabiramo članove sa \( x \):</p>
        <div class="math-block">
          \[ 3x + 1 \leq 4 \]
        </div>
        <p>Oduzimamo 1 sa obe strane:</p>
        <div class="math-block">
          \[ 3x \leq 3 \]
        </div>
        <p>Delimo sa 3:</p>
        <div class="math-block">
          \[ x \leq 1 \]
        </div>
        <p>Kombinujemo sa uslovom \( x \geq -\frac{1}{2} \):</p>
        <div class="math-block">
          \[ x \in \left[-\frac{1}{2},\; 1\right] \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Koliko je \( |2 \cdot 1 + 1| + 1 \)?</summary>
      <div class="detail-content">
        <p>\( |3| + 1 = 3 + 1 = 4 \leq 4 \) — tačno na granici, dakle \( x = 1 \) pripada skupu rešenja.</p>
      </div>
    </details>

    <!-- Step 4: Case 2 -->
    <div class="step-container" id="step4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Slučaj 2: \( x < -\frac{1}{2} \)</h3>
        <p><span class="case-label">Slučaj 2</span></p>
        <p>Kada je \( x < -\frac{1}{2} \), imamo \( 2x + 1 < 0 \), pa je \( |2x+1| = -(2x+1) = -2x - 1 \).</p>
        <p>Zamenjujemo u nejednačinu:</p>
        <div class="math-block">
          \[ -2x - 1 + x \leq 4 \]
        </div>
        <p>Sabiramo članove sa \( x \):</p>
        <div class="math-block">
          \[ -x - 1 \leq 4 \]
        </div>
        <p>Dodajemo 1 na obe strane:</p>
        <div class="math-block">
          \[ -x \leq 5 \]
        </div>
        <p>Množimo sa \( -1 \) i <strong>okrećemo znak</strong> nejednakosti:</p>
        <div class="math-block">
          \[ x \geq -5 \]
        </div>
        <p>Kombinujemo sa uslovom \( x < -\frac{1}{2} \):</p>
        <div class="math-block">
          \[ x \in \left[-5,\; -\frac{1}{2}\right) \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Koliko je \( |2 \cdot (-5) + 1| + (-5) \)?</summary>
      <div class="detail-content">
        <p>\( |-9| + (-5) = 9 - 5 = 4 \leq 4 \) — tačno na granici, dakle \( x = -5 \) pripada skupu rešenja.</p>
      </div>
    </details>

    <!-- Step 5 -->
    <div class="step-container" id="step5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Ujedinjujemo skupove</h3>
        <p>Skup rešenja je unija rezultata iz oba slučaja:</p>
        <div class="math-block">
          \[ \left[-5,\; -\frac{1}{2}\right) \cup \left[-\frac{1}{2},\; 1\right] = [-5,\; 1] \]
        </div>
        <p class="note">Tačka \( x = -\frac{1}{2} \) pripada drugom intervalu, tako da je unija zatvoren interval \( [-5, 1] \).</p>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Da li \( x = -6 \) pripada skupu rešenja?</summary>
      <div class="detail-content">
        <p>\( |2 \cdot (-6) + 1| + (-6) = |-11| - 6 = 11 - 6 = 5 > 4 \). Ne, \( x = -6 \) ne zadovoljava nejednačinu.</p>
      </div>
    </details>

  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Ključni uvid</h2>
    <p style="color:#cbd5e1; margin-bottom:10px;">Oba slučaja daju intervale koji se savršeno nadovezuju u tački \( x = -\frac{1}{2} \), formirajući jedan zatvoren interval:</p>
    <div class="big-formula">
      \[ [-5,\; 1] \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer-card">
    <h2>Konačan odgovor</h2>
    <div class="final-answer-text">
      (C) \( [-5, 1] \)
    </div>
    <div class="options-row">
      <div class="option-card">
        <div class="opt-label">(A)</div>
        <div>prazan skup</div>
      </div>
      <div class="option-card">
        <div class="opt-label">(B)</div>
        <div>\((-\infty, +\infty)\)</div>
      </div>
      <div class="option-card correct">
        <div class="opt-label">(C)</div>
        <div>\([-5, 1]\)</div>
      </div>
      <div class="option-card">
        <div class="opt-label">(D)</div>
        <div>\((-\infty, 1]\)</div>
      </div>
    </div>
    <div class="verification-note">
      <strong>Verifikacija:</strong> Proveravamo granične tačke: za \( x = -5 \): \( |-9| + (-5) = 9 - 5 = 4 \leq 4 \) i za \( x = 1 \): \( |3| + 1 = 4 \leq 4 \). Obe granične vrednosti zadovoljavaju nejednačinu sa znakom jednakosti, što potvrđuje zatvorene zagrade. Tačka van intervala, npr. \( x = 2 \): \( |5| + 2 = 7 > 4 \) — ne zadovoljava.
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfall-box">
    <h2>Česte greške</h2>
    <ul>
      <li><strong>Zaboravljeno okretanje znaka nejednakosti:</strong> Kada u Slučaju 2 množimo sa \( -1 \), neophodno je okrenuti znak nejednakosti (\( \leq \) postaje \( \geq \)). Ako se ovo preskoči, dobija se pogrešan rezultat \( x \leq -5 \) umesto \( x \geq -5 \), što dovodi do praznog skupa u tom slučaju.</li>
      <li><strong>Brkanje sa neograničenim intervalom:</strong> Ponuđeni odgovor (D) \( (-\infty, 1] \) bi bio tačan samo ako bi nejednačina bila zadovoljena za sve \( x \leq 1 \). Provera za \( x = -6 \) pokazuje da to nije slučaj — leva strana iznosi 5, što je veće od 4.</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Za koje vrednosti parametra \( k \) nejednačina \( |2x + 1| + x \leq k \) ima neprazan skup rešenja?</p>
    <details>
      <summary>Nagoveštaj</summary>
      <div class="detail-content">
        <p>Razmisli o minimumu funkcije \( f(x) = |2x+1| + x \). U tački \( x = -\frac{1}{2} \) funkcija dostiže vrednost \( f(-\frac{1}{2}) = 0 + (-\frac{1}{2}) = -\frac{1}{2} \). Dakle, nejednačina ima rešenje za svako \( k \geq -\frac{1}{2} \).</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('graphCanvas');
  const ctx = canvas.getContext('2d');

  const W = canvas.width;
  const H = canvas.height;

  // Coordinate system: x from -7 to 4, y from -3 to 12
  const xMin = -7, xMax = 4;
  const yMin = -3, yMax = 12;
  const padL = 50, padR = 20, padT = 20, padB = 40;
  const plotW = W - padL - padR;
  const plotH = H - padT - padB;

  function toCanvasX(x) { return padL + (x - xMin) / (xMax - xMin) * plotW; }
  function toCanvasY(y) { return padT + (yMax - y) / (yMax - yMin) * plotH; }
  function fromCanvasX(cx) { return xMin + (cx - padL) / plotW * (xMax - xMin); }

  function f(x) { return Math.abs(2 * x + 1) + x; }

  let hoverX = null;

  function draw() {
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Grid
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (let x = Math.ceil(xMin); x <= xMax; x++) {
      const cx = toCanvasX(x);
      ctx.beginPath(); ctx.moveTo(cx, padT); ctx.lineTo(cx, H - padB); ctx.stroke();
    }
    for (let y = Math.ceil(yMin); y <= yMax; y++) {
      const cy = toCanvasY(y);
      ctx.beginPath(); ctx.moveTo(padL, cy); ctx.lineTo(W - padR, cy); ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 2;
    // x-axis
    const y0 = toCanvasY(0);
    ctx.beginPath(); ctx.moveTo(padL, y0); ctx.lineTo(W - padR, y0); ctx.stroke();
    // y-axis
    const x0 = toCanvasX(0);
    ctx.beginPath(); ctx.moveTo(x0, padT); ctx.lineTo(x0, H - padB); ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#64748b';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    for (let x = Math.ceil(xMin); x <= xMax; x++) {
      if (x === 0) continue;
      ctx.fillText(x.toString(), toCanvasX(x), y0 + 16);
    }
    ctx.textAlign = 'right';
    for (let y = Math.ceil(yMin); y <= yMax; y++) {
      if (y === 0) continue;
      ctx.fillText(y.toString(), x0 - 8, toCanvasY(y) + 4);
    }
    ctx.fillText('0', x0 - 8, y0 + 16);

    // Shade solution region [-5, 1] below y = 4
    ctx.fillStyle = 'rgba(74,222,128,0.08)';
    ctx.beginPath();
    const steps = 300;
    const solLeft = -5, solRight = 1;
    ctx.moveTo(toCanvasX(solLeft), toCanvasY(4));
    for (let i = 0; i <= steps; i++) {
      const x = solLeft + (solRight - solLeft) * i / steps;
      const y = f(x);
      ctx.lineTo(toCanvasX(x), toCanvasY(y));
    }
    ctx.lineTo(toCanvasX(solRight), toCanvasY(4));
    ctx.closePath();
    ctx.fill();

    // Draw y = 4 (green dashed line)
    ctx.strokeStyle = '#34d399';
    ctx.lineWidth = 2;
    ctx.setLineDash([8, 5]);
    ctx.beginPath();
    ctx.moveTo(padL, toCanvasY(4));
    ctx.lineTo(W - padR, toCanvasY(4));
    ctx.stroke();
    ctx.setLineDash([]);

    // Label y = 4
    ctx.fillStyle = '#34d399';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('y = 4', W - padR - 42, toCanvasY(4) - 8);

    // Draw f(x) = |2x+1| + x (blue)
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    let first = true;
    for (let i = 0; i <= steps; i++) {
      const x = xMin + (xMax - xMin) * i / steps;
      const y = f(x);
      const cx = toCanvasX(x);
      const cy = toCanvasY(y);
      if (cy < padT - 10 || cy > H - padB + 10) { first = true; continue; }
      if (first) { ctx.moveTo(cx, cy); first = false; }
      else ctx.lineTo(cx, cy);
    }
    ctx.stroke();

    // Label f(x)
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('y = |2x+1| + x', toCanvasX(1.5), toCanvasY(f(1.5)) - 12);

    // Mark intersection points (-5, 4) and (1, 4)
    const pts = [[-5, 4], [1, 4]];
    pts.forEach(function(pt) {
      const cx = toCanvasX(pt[0]);
      const cy = toCanvasY(pt[1]);
      // Glow
      const grad = ctx.createRadialGradient(cx, cy, 0, cx, cy, 14);
      grad.addColorStop(0, 'rgba(74,222,128,0.5)');
      grad.addColorStop(1, 'rgba(74,222,128,0)');
      ctx.fillStyle = grad;
      ctx.beginPath(); ctx.arc(cx, cy, 14, 0, 2 * Math.PI); ctx.fill();
      // Dot
      ctx.fillStyle = '#4ade80';
      ctx.beginPath(); ctx.arc(cx, cy, 5, 0, 2 * Math.PI); ctx.fill();
      ctx.strokeStyle = '#0f172a';
      ctx.lineWidth = 1.5;
      ctx.stroke();
      // Label
      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('(' + pt[0] + ', ' + pt[1] + ')', cx, cy - 14);
    });

    // Mark critical point x = -0.5 (minimum of function)
    const critX = -0.5;
    const critY = f(critX);
    const critCx = toCanvasX(critX);
    const critCy = toCanvasY(critY);
    ctx.fillStyle = '#a78bfa';
    ctx.beginPath(); ctx.arc(critCx, critCy, 4, 0, 2 * Math.PI); ctx.fill();
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('x = -0,5', critCx + 40, critCy - 4);
    ctx.fillText('min = -0,5', critCx + 40, critCy + 10);

    // Solution interval on x-axis
    const solY0 = y0 + 4;
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(toCanvasX(-5), solY0);
    ctx.lineTo(toCanvasX(1), solY0);
    ctx.stroke();
    // Closed endpoints
    ctx.fillStyle = '#4ade80';
    ctx.beginPath(); ctx.arc(toCanvasX(-5), solY0, 4, 0, 2 * Math.PI); ctx.fill();
    ctx.beginPath(); ctx.arc(toCanvasX(1), solY0, 4, 0, 2 * Math.PI); ctx.fill();

    // Label solution interval
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('[-5, 1]', toCanvasX(-2), solY0 + 16);

    // Hover crosshair
    if (hoverX !== null && hoverX >= xMin && hoverX <= xMax) {
      const hx = toCanvasX(hoverX);
      const hy = f(hoverX);
      const hcy = toCanvasY(hy);

      // Vertical line
      ctx.strokeStyle = 'rgba(226,232,240,0.2)';
      ctx.lineWidth = 1;
      ctx.setLineDash([3, 3]);
      ctx.beginPath(); ctx.moveTo(hx, padT); ctx.lineTo(hx, H - padB); ctx.stroke();
      ctx.setLineDash([]);

      // Point on curve
      if (hcy >= padT && hcy <= H - padB) {
        ctx.fillStyle = '#f472b6';
        ctx.beginPath(); ctx.arc(hx, hcy, 4, 0, 2 * Math.PI); ctx.fill();

        // Tooltip
        const xVal = hoverX.toFixed(2).replace('.', ',');
        const yVal = hy.toFixed(2).replace('.', ',');
        const text = 'x = ' + xVal + '  f(x) = ' + yVal;
        ctx.font = '12px Segoe UI, system-ui, sans-serif';
        const tw = ctx.measureText(text).width;
        const tx = Math.min(Math.max(hx - tw / 2 - 6, padL), W - padR - tw - 12);
        const ty = Math.max(hcy - 28, padT + 4);
        ctx.fillStyle = 'rgba(15,23,42,0.85)';
        ctx.fillRect(tx, ty, tw + 12, 20);
        ctx.strokeStyle = '#475569';
        ctx.lineWidth = 1;
        ctx.strokeRect(tx, ty, tw + 12, 20);
        ctx.fillStyle = '#f472b6';
        ctx.fillText(text, tx + 6, ty + 14);
      }
    }
  }

  function handleMove(clientX) {
    const rect = canvas.getBoundingClientRect();
    const scaleX = W / rect.width;
    const cx = (clientX - rect.left) * scaleX;
    hoverX = fromCanvasX(cx);
    draw();
  }

  canvas.addEventListener('mousemove', function(e) { handleMove(e.clientX); });
  canvas.addEventListener('touchmove', function(e) {
    e.preventDefault();
    if (e.touches.length > 0) handleMove(e.touches[0].clientX);
  });
  canvas.addEventListener('mouseleave', function() { hoverX = null; draw(); });
  canvas.addEventListener('touchend', function() { hoverX = null; draw(); });

  draw();

  // Step click highlighting
  document.querySelectorAll('.step-container').forEach(function(el) {
    el.addEventListener('click', function() {
      document.querySelectorAll('.step-container').forEach(function(s) { s.classList.remove('active'); });
      el.classList.toggle('active');
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Nejednačina sa apsolutnom vrednošću |2x+1| + x \u2264 4",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["apsolutna vrednost", "nejednačine", "intervali", "razdvajanje na slučajeve"]
}
BRAINSPARK_META-->