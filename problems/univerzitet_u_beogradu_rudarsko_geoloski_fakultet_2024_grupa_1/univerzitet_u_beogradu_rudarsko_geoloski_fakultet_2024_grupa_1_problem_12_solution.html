<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tangens polovine ugla</title>

<script type="text/info" id="logic-scratchpad">
Problem: Given that alpha is an acute angle and sin(alpha) = 3/5, find tg^2(alpha/2).

Step 1: Find cos(alpha).
  Since alpha is acute, cos(alpha) > 0.
  sin^2(alpha) + cos^2(alpha) = 1
  (3/5)^2 + cos^2(alpha) = 1
  9/25 + cos^2(alpha) = 1
  cos^2(alpha) = 1 - 9/25 = 16/25
  cos(alpha) = 4/5 (positive because alpha is acute)

Step 2: Use the half-angle identity for tangent squared.
  tg^2(alpha/2) = (1 - cos(alpha)) / (1 + cos(alpha))

Step 3: Substitute cos(alpha) = 4/5.
  tg^2(alpha/2) = (1 - 4/5) / (1 + 4/5)
               = (1/5) / (9/5)
               = (1/5) * (5/9)
               = 1/9

Answer: tg^2(alpha/2) = 1/9

Verification against given correct answer: (A) 1/9. MATCHES.

Additional check: alpha is acute, sin(alpha) = 3/5 corresponds to a 3-4-5 right triangle.
alpha = arcsin(3/5) ~ 36.87 degrees, so alpha/2 ~ 18.43 degrees.
tg(18.43) ~ 0.3333..., tg^2 ~ 0.1111... = 1/9. Confirmed.
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 100px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  flex: 1;
  min-width: 80px;
  max-width: 200px;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card p {
  color: #e2e8f0;
  font-size: 1rem;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  font-size: 1.05rem;
  padding: 8px 0;
}

details summary:hover {
  color: #93c5fd;
}

details .theory-content {
  margin-top: 12px;
}

details .theory-content ul {
  list-style: none;
  padding: 0;
}

details .theory-content li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #e2e8f0;
}

details .theory-content li:last-child {
  border-bottom: none;
}

.canvas-card {
  text-align: center;
}

.canvas-card canvas {
  border-radius: 10px;
  border: 1px solid #334155;
  max-width: 100%;
  touch-action: none;
}

.canvas-hint {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-top: 8px;
}

.step-container {
  display: flex;
  gap: 16px;
  align-items: flex-start;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
  border-left: 3px solid transparent;
}

.step-container:hover, .step-container.active {
  background: rgba(96,165,250,0.05);
  border-left: 3px solid #4ade80;
}

.step-badge {
  width: 28px;
  height: 28px;
  min-width: 28px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.85rem;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-content p {
  color: #e2e8f0;
  margin-bottom: 8px;
}

.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 10px 0;
  font-family: 'Courier New', monospace;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 6px;
}

.checkpoint {
  background: rgba(167,139,250,0.08);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 15px 0;
}

.checkpoint summary {
  color: #a78bfa;
  font-size: 0.95rem;
}

.checkpoint .answer {
  margin-top: 10px;
  color: #4ade80;
  font-weight: 600;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  text-align: center;
}

.insight-box h2 {
  color: #a78bfa;
  margin-bottom: 12px;
}

.insight-formula {
  font-size: 1.3rem;
  color: #4ade80;
  margin: 12px 0;
}

.final-answer-card {
  background: linear-gradient(135deg, rgba(52,211,153,0.1), rgba(74,222,128,0.1));
  border: 1px solid rgba(74,222,128,0.3);
}

.final-answer-card h2 {
  color: #4ade80;
}

.final-answer-text {
  font-size: 1.6rem;
  color: #4ade80;
  font-weight: 700;
  text-align: center;
  margin: 16px 0;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 20px 0;
}

.final-option {
  padding: 12px 24px;
  border-radius: 10px;
  border: 2px solid #334155;
  background: #1e293b;
  color: #94a3b8;
  font-size: 1rem;
  text-align: center;
  min-width: 120px;
}

.final-option.correct {
  border-color: #4ade80;
  color: #4ade80;
  background: rgba(74,222,128,0.1);
  font-weight: 700;
}

.verification {
  background: rgba(52,211,153,0.08);
  border: 1px solid rgba(52,211,153,0.15);
  border-radius: 8px;
  padding: 14px;
  margin-top: 16px;
  color: #94a3b8;
  font-size: 0.92rem;
}

.pitfall-card {
  border-left: 3px solid #e09468;
}

.pitfall-card h2 {
  color: #e09468;
}

.pitfall-card ul {
  list-style: none;
  padding: 0;
}

.pitfall-card li {
  padding: 8px 0;
  color: #e2e8f0;
  border-bottom: 1px solid rgba(51,65,85,0.4);
}

.pitfall-card li:last-child {
  border-bottom: none;
}

.pitfall-card li::before {
  content: "!  ";
  color: #e09468;
  font-weight: 700;
}

.challenge-card {
  border-left: 3px solid #f472b6;
}

.challenge-card h2 {
  color: #f472b6;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .given-grid { flex-direction: column; }
  .answer-option { max-width: 100%; }
  .final-options { flex-direction: column; align-items: center; }
  .step-container { flex-direction: column; gap: 8px; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Kvadrat tangensa polovine ugla</h1>
  <p class="subtitle">Trigonometrija -- primena formula za poluugao</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Tekst zadatka</h2>
    <p>Ako je \(\alpha\) oštar ugao i \(\sin \alpha = \dfrac{3}{5}\), onda je \(\operatorname{tg}^2 \dfrac{\alpha}{2}\) jednako:</p>

    <div class="given-grid">
      <div class="given-item">
        <div class="label">Dato</div>
        <div class="value">\(\sin \alpha = \dfrac{3}{5}\)</div>
      </div>
      <div class="given-item">
        <div class="label">Uslov</div>
        <div class="value">\(\alpha\) je oštar</div>
      </div>
      <div class="given-item">
        <div class="label">Traži se</div>
        <div class="value">\(\operatorname{tg}^2 \dfrac{\alpha}{2}\)</div>
      </div>
    </div>

    <div class="given-grid" style="margin-top: 20px;">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(\dfrac{1}{9}\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(\dfrac{\sqrt{6}}{4}\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(\dfrac{5}{12}\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(\dfrac{3}{11}\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan rešavanja</h2>
    <p>Prvo ćemo iz Pitagorine trigonometrijske identičnosti odrediti \(\cos \alpha\), a zatim primeniti formulu za kvadrat tangensa polovine ugla: \(\operatorname{tg}^2 \dfrac{\alpha}{2} = \dfrac{1 - \cos \alpha}{1 + \cos \alpha}\).</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Ključne formule i teoreme</summary>
      <div class="theory-content">
        <ul>
          <li><strong>Osnovna trigonometrijska identičnost:</strong> \(\sin^2 \alpha + \cos^2 \alpha = 1\)</li>
          <li><strong>Kosinus polovine ugla:</strong> \(\cos \dfrac{\alpha}{2} = \pm\sqrt{\dfrac{1 + \cos \alpha}{2}}\)</li>
          <li><strong>Sinus polovine ugla:</strong> \(\sin \dfrac{\alpha}{2} = \pm\sqrt{\dfrac{1 - \cos \alpha}{2}}\)</li>
          <li><strong>Kvadrat tangensa polovine ugla:</strong>
            \[\operatorname{tg}^2 \frac{\alpha}{2} = \frac{\sin^2 \frac{\alpha}{2}}{\cos^2 \frac{\alpha}{2}} = \frac{\dfrac{1 - \cos \alpha}{2}}{\dfrac{1 + \cos \alpha}{2}} = \frac{1 - \cos \alpha}{1 + \cos \alpha}\]
          </li>
        </ul>
        <div style="text-align:center; margin-top: 16px;">
          <canvas id="theoryCanvas" width="400" height="280" style="touch-action:none;"></canvas>
          <p class="canvas-hint">Pravougli trougao sa stranicama 3, 4, 5</p>
        </div>
      </div>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card canvas-card">
    <h2>Vizuelni prikaz</h2>
    <canvas id="mainCanvas" width="700" height="420" style="touch-action:none;"></canvas>
    <p class="canvas-hint">Jedinični krug sa prikazom ugla \(\alpha\) i njegove polovine \(\alpha/2\)</p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <div class="step-container" id="step1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Zapišemo poznate podatke</h3>
        <p>Dato nam je da je \(\alpha\) oštar ugao (tj. \(0 < \alpha < 90°\)) i da važi:</p>
        <div class="math-block">
          \[\sin \alpha = \frac{3}{5}\]
        </div>
      </div>
    </div>

    <div class="step-container" id="step2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Odredimo \(\cos \alpha\) pomoću osnovne identičnosti</h3>
        <p>Koristimo Pitagorinu trigonometrijsku identičnost:</p>
        <div class="math-block">
          \[\sin^2 \alpha + \cos^2 \alpha = 1\]
        </div>
        <p>Uvrstimo poznatu vrednost \(\sin \alpha = \dfrac{3}{5}\):</p>
        <div class="math-block">
          \[\left(\frac{3}{5}\right)^2 + \cos^2 \alpha = 1\]
        </div>
        <div class="math-block">
          \[\frac{9}{25} + \cos^2 \alpha = 1\]
        </div>
        <p>Izrazimo \(\cos^2 \alpha\):</p>
        <div class="math-block">
          \[\cos^2 \alpha = 1 - \frac{9}{25} = \frac{25 - 9}{25} = \frac{16}{25}\]
        </div>
      </div>
    </div>

    <div class="step-container" id="step3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Odredimo znak kosinusa</h3>
        <p>Pošto je \(\alpha\) oštar ugao, on pripada prvom kvadrantu gde su i sinus i kosinus pozitivni. Zato uzimamo pozitivan koren:</p>
        <div class="math-block">
          \[\cos \alpha = \sqrt{\frac{16}{25}} = \frac{4}{5}\]
        </div>
        <p class="note">Napomena: Ovo odgovara poznatom Pitagorinom trouglu sa stranicama 3, 4 i 5.</p>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri sebe: Koliko iznosi \(\cos \alpha\)?</summary>
      <div class="answer">\(\cos \alpha = \dfrac{4}{5}\), jer je ugao oštar (prvi kvadrant).</div>
    </details>

    <div class="step-container" id="step4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Primenimo formulu za \(\operatorname{tg}^2 \dfrac{\alpha}{2}\)</h3>
        <p>Koristimo identitet za kvadrat tangensa polovine ugla:</p>
        <div class="math-block">
          \[\operatorname{tg}^2 \frac{\alpha}{2} = \frac{1 - \cos \alpha}{1 + \cos \alpha}\]
        </div>
        <p>Ova formula se dobija iz formula za sinus i kosinus polovine ugla.</p>
      </div>
    </div>

    <div class="step-container" id="step5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Uvrstimo \(\cos \alpha = \dfrac{4}{5}\)</h3>
        <p>Zamenimo u formulu:</p>
        <div class="math-block">
          \[\operatorname{tg}^2 \frac{\alpha}{2} = \frac{1 - \dfrac{4}{5}}{1 + \dfrac{4}{5}}\]
        </div>
      </div>
    </div>

    <div class="step-container" id="step6">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Izračunamo brojilac i imenilac</h3>
        <p>Brojilac:</p>
        <div class="math-block">
          \[1 - \frac{4}{5} = \frac{5}{5} - \frac{4}{5} = \frac{1}{5}\]
        </div>
        <p>Imenilac:</p>
        <div class="math-block">
          \[1 + \frac{4}{5} = \frac{5}{5} + \frac{4}{5} = \frac{9}{5}\]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>Proveri sebe: Koliko je \(\dfrac{1/5}{9/5}\)?</summary>
      <div class="answer">Delimo razlomke: \(\dfrac{1/5}{9/5} = \dfrac{1}{5} \cdot \dfrac{5}{9} = \dfrac{1}{9}\). Petice se skrate!</div>
    </details>

    <div class="step-container" id="step7">
      <div class="step-badge">7</div>
      <div class="step-content">
        <h3>Podelimo razlomke</h3>
        <p>Delimo brojilac sa imeniocem:</p>
        <div class="math-block">
          \[\operatorname{tg}^2 \frac{\alpha}{2} = \frac{\dfrac{1}{5}}{\dfrac{9}{5}} = \frac{1}{5} \cdot \frac{5}{9} = \frac{1}{9}\]
        </div>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Ključni uvid</h2>
    <p>Formula za tangens polovine ugla direktno koristi kosinus celog ugla -- ne zahteva eksplicitno nalaženje ugla \(\alpha/2\)!</p>
    <div class="insight-formula">
      \[\operatorname{tg}^2 \frac{\alpha}{2} = \frac{1 - \cos \alpha}{1 + \cos \alpha} = \frac{1 - \frac{4}{5}}{1 + \frac{4}{5}} = \frac{1}{9}\]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer-card">
    <h2>Konačan odgovor</h2>
    <div class="final-answer-text">
      \(\operatorname{tg}^2 \dfrac{\alpha}{2} = \dfrac{1}{9}\)
    </div>
    <div class="final-options">
      <div class="final-option correct">(A) \(\dfrac{1}{9}\)</div>
      <div class="final-option">(B) \(\dfrac{\sqrt{6}}{4}\)</div>
      <div class="final-option">(C) \(\dfrac{5}{12}\)</div>
      <div class="final-option">(D) \(\dfrac{3}{11}\)</div>
    </div>
    <div class="verification">
      <strong>Provera:</strong> Ugao \(\alpha \approx 36{,}87°\), pa je \(\alpha/2 \approx 18{,}43°\). Tada je \(\operatorname{tg}(18{,}43°) \approx 0{,}333\), a \(0{,}333^2 \approx 0{,}111 = \dfrac{1}{9}\). Rezultat je potvrđen numeričkom proverom.
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfall-card">
    <h2>Česte greške</h2>
    <ul>
      <li><strong>Pogrešan znak kosinusa:</strong> Ako se zaboravi da je \(\alpha\) oštar ugao, moglo bi se uzeti \(\cos \alpha = -\dfrac{4}{5}\), što bi dalo potpuno drugačiji rezultat: \(\dfrac{9}{1} = 9\). Uvek proverite kvadrant!</li>
      <li><strong>Zamena formule:</strong> Nemojte mešati formulu \(\dfrac{1 - \cos \alpha}{1 + \cos \alpha}\) sa formulom \(\dfrac{1 + \cos \alpha}{1 - \cos \alpha}\) (koja daje \(\operatorname{ctg}^2 \dfrac{\alpha}{2}\), tj. recipročnu vrednost). Zapamtite: tangens ima "minus" u brojiocu.</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Ako je \(\alpha\) tup ugao i \(\sin \alpha = \dfrac{3}{5}\), koliko bi tada iznosilo \(\operatorname{tg}^2 \dfrac{\alpha}{2}\)?</p>
    <details>
      <summary>Pogledaj nagoveštaj</summary>
      <div style="margin-top:10px; color:#e2e8f0;">
        <p>Razmisli: ako je \(\alpha\) tup, onda je \(\cos \alpha\) negativan. Koliko iznosi \(\cos \alpha\) u tom slučaju? Uvrsti u istu formulu i uporedi rezultat sa \(\dfrac{1}{9}\).</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  // Theory canvas: 3-4-5 right triangle
  const tc = document.getElementById('theoryCanvas');
  if (tc) {
    const ctx = tc.getContext('2d');
    const w = tc.width, h = tc.height;

    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, w, h);

    const ox = 80, oy = h - 50;
    const scaleX = 60, scaleY = 45;

    const A = { x: ox, y: oy };
    const B = { x: ox + 4 * scaleX, y: oy };
    const C = { x: ox, y: oy - 3 * scaleY };

    // Triangle fill
    ctx.fillStyle = 'rgba(96,165,250,0.08)';
    ctx.beginPath();
    ctx.moveTo(A.x, A.y);
    ctx.lineTo(B.x, B.y);
    ctx.lineTo(C.x, C.y);
    ctx.closePath();
    ctx.fill();

    // Triangle edges
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(A.x, A.y);
    ctx.lineTo(B.x, B.y);
    ctx.lineTo(C.x, C.y);
    ctx.closePath();
    ctx.stroke();

    // Right angle marker at A
    const rSize = 14;
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(A.x + rSize, A.y);
    ctx.lineTo(A.x + rSize, A.y - rSize);
    ctx.lineTo(A.x, A.y - rSize);
    ctx.stroke();

    // Angle arc at B (alpha)
    const angleAlpha = Math.atan2(3, 4);
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.arc(B.x, B.y, 35, Math.PI, Math.PI + angleAlpha, false);
    ctx.stroke();

    // Labels
    ctx.font = 'bold 16px Segoe UI, sans-serif';

    // Side labels
    ctx.fillStyle = '#4ade80';
    ctx.textAlign = 'center';
    ctx.fillText('3', A.x - 20, (A.y + C.y) / 2 + 4);

    ctx.fillStyle = '#60a5fa';
    ctx.fillText('4', (A.x + B.x) / 2, A.y + 24);

    ctx.fillStyle = '#a78bfa';
    ctx.fillText('5', (B.x + C.x) / 2 + 18, (B.y + C.y) / 2);

    // Vertex labels
    ctx.font = 'bold 14px Segoe UI, sans-serif';
    ctx.fillStyle = '#e2e8f0';
    ctx.fillText('A', A.x - 16, A.y + 20);
    ctx.fillText('B', B.x + 12, B.y + 16);
    ctx.fillText('C', C.x - 16, C.y - 8);

    // Alpha label
    ctx.fillStyle = '#f472b6';
    ctx.font = 'italic 15px Segoe UI, sans-serif';
    ctx.fillText('\u03B1', B.x - 52, B.y - 12);

    // sin alpha, cos alpha labels
    ctx.font = '13px Segoe UI, sans-serif';
    ctx.fillStyle = '#94a3b8';
    ctx.textAlign = 'left';
    ctx.fillText('sin \u03B1 = 3/5', w - 160, 30);
    ctx.fillText('cos \u03B1 = 4/5', w - 160, 52);
    ctx.fillText('tg \u03B1 = 3/4', w - 160, 74);
  }

  // Main canvas: unit circle with alpha and alpha/2
  const mc = document.getElementById('mainCanvas');
  if (mc) {
    const ctx = mc.getContext('2d');
    const w = mc.width, h = mc.height;
    const cx = w * 0.42, cy = h * 0.55;
    const R = Math.min(w, h) * 0.38;

    const alpha = Math.asin(3 / 5); // ~36.87 degrees
    const halfAlpha = alpha / 2;

    function draw() {
      ctx.clearRect(0, 0, w, h);
      ctx.fillStyle = '#0f172a';
      ctx.fillRect(0, 0, w, h);

      // Grid
      ctx.strokeStyle = '#1e293b';
      ctx.lineWidth = 1;
      for (let i = -5; i <= 5; i++) {
        const gx = cx + i * (R / 4);
        ctx.beginPath(); ctx.moveTo(gx, 0); ctx.lineTo(gx, h); ctx.stroke();
        const gy = cy - i * (R / 4);
        ctx.beginPath(); ctx.moveTo(0, gy); ctx.lineTo(w, gy); ctx.stroke();
      }

      // Axes
      ctx.strokeStyle = '#334155';
      ctx.lineWidth = 1.5;
      ctx.beginPath(); ctx.moveTo(0, cy); ctx.lineTo(w, cy); ctx.stroke();
      ctx.beginPath(); ctx.moveTo(cx, 0); ctx.lineTo(cx, h); ctx.stroke();

      // Unit circle
      ctx.strokeStyle = 'rgba(96,165,250,0.4)';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.arc(cx, cy, R, 0, 2 * Math.PI);
      ctx.stroke();

      // Point P on circle (angle alpha)
      const Px = cx + R * Math.cos(alpha);
      const Py = cy - R * Math.sin(alpha);

      // Point Q on circle (angle alpha/2)
      const Qx = cx + R * Math.cos(halfAlpha);
      const Qy = cy - R * Math.sin(halfAlpha);

      // Radius to P (alpha)
      ctx.strokeStyle = '#60a5fa';
      ctx.lineWidth = 2.5;
      ctx.beginPath();
      ctx.moveTo(cx, cy);
      ctx.lineTo(Px, Py);
      ctx.stroke();

      // Radius to Q (alpha/2)
      ctx.strokeStyle = '#a78bfa';
      ctx.lineWidth = 2;
      ctx.setLineDash([6, 4]);
      ctx.beginPath();
      ctx.moveTo(cx, cy);
      ctx.lineTo(Qx, Qy);
      ctx.stroke();
      ctx.setLineDash([]);

      // Alpha arc
      ctx.strokeStyle = '#60a5fa';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.arc(cx, cy, R * 0.25, -alpha, 0, false);
      ctx.stroke();

      // Alpha/2 arc
      ctx.strokeStyle = '#a78bfa';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.arc(cx, cy, R * 0.18, -halfAlpha, 0, false);
      ctx.stroke();

      // Projection lines from P
      // Vertical from P to x-axis
      ctx.strokeStyle = 'rgba(52,211,153,0.5)';
      ctx.lineWidth = 1.5;
      ctx.setLineDash([4, 3]);
      ctx.beginPath();
      ctx.moveTo(Px, Py);
      ctx.lineTo(Px, cy);
      ctx.stroke();
      ctx.setLineDash([]);

      // Cos alpha mark on x-axis
      ctx.fillStyle = '#4ade80';
      ctx.beginPath();
      ctx.arc(Px, cy, 4, 0, 2 * Math.PI);
      ctx.fill();

      // Sin alpha mark
      ctx.fillStyle = '#f472b6';
      ctx.beginPath();
      ctx.arc(Px, Py, 4, 0, 2 * Math.PI);
      ctx.fill();

      // tg(alpha/2) visualization: tangent line at (1,0)
      const tangentLength = Math.tan(halfAlpha);
      const Tx = cx + R;
      const Ty = cy - R * tangentLength;

      // Line from origin to tangent point
      ctx.strokeStyle = '#4ade80';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(cx, cy);
      ctx.lineTo(Tx, Ty);
      ctx.stroke();

      // Tangent segment on x=1
      ctx.strokeStyle = '#4ade80';
      ctx.lineWidth = 2.5;
      ctx.beginPath();
      ctx.moveTo(Tx, cy);
      ctx.lineTo(Tx, Ty);
      ctx.stroke();

      // Right angle at tangent point base
      const raSize = 8;
      ctx.strokeStyle = '#4ade80';
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.moveTo(Tx - raSize, cy);
      ctx.lineTo(Tx - raSize, cy - raSize);
      ctx.lineTo(Tx, cy - raSize);
      ctx.stroke();

      // Points
      // Origin
      ctx.fillStyle = '#e2e8f0';
      ctx.beginPath();
      ctx.arc(cx, cy, 4, 0, 2 * Math.PI);
      ctx.fill();

      // P point
      ctx.fillStyle = '#60a5fa';
      ctx.beginPath();
      ctx.arc(Px, Py, 5, 0, 2 * Math.PI);
      ctx.fill();

      // Q point
      ctx.fillStyle = '#a78bfa';
      ctx.beginPath();
      ctx.arc(Qx, Qy, 5, 0, 2 * Math.PI);
      ctx.fill();

      // T tangent point
      ctx.fillStyle = '#4ade80';
      ctx.beginPath();
      ctx.arc(Tx, Ty, 5, 0, 2 * Math.PI);
      ctx.fill();

      // (1,0) point
      ctx.fillStyle = '#e2e8f0';
      ctx.beginPath();
      ctx.arc(Tx, cy, 4, 0, 2 * Math.PI);
      ctx.fill();

      // Labels
      ctx.font = 'bold 14px Segoe UI, sans-serif';
      ctx.textAlign = 'left';

      ctx.fillStyle = '#e2e8f0';
      ctx.fillText('O', cx - 20, cy + 18);

      ctx.fillStyle = '#60a5fa';
      ctx.fillText('P (cos \u03B1, sin \u03B1)', Px + 8, Py - 10);

      ctx.fillStyle = '#a78bfa';
      ctx.fillText('Q', Qx + 8, Qy - 10);

      ctx.fillStyle = '#4ade80';
      ctx.fillText('T', Tx + 8, Ty - 6);

      // tg(alpha/2) label alongside the green segment
      ctx.save();
      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 13px Segoe UI, sans-serif';
      ctx.textAlign = 'left';
      ctx.fillText('tg(\u03B1/2)', Tx + 10, (cy + Ty) / 2);
      ctx.restore();

      // Alpha label
      ctx.fillStyle = '#60a5fa';
      ctx.font = 'italic 14px Segoe UI, sans-serif';
      ctx.fillText('\u03B1', cx + R * 0.28, cy - 12);

      // Alpha/2 label
      ctx.fillStyle = '#a78bfa';
      ctx.fillText('\u03B1/2', cx + R * 0.2, cy - 2);

      // Axis labels
      ctx.font = '12px Segoe UI, sans-serif';
      ctx.fillStyle = '#94a3b8';
      ctx.textAlign = 'center';
      ctx.fillText('1', cx + R, cy + 18);
      ctx.fillText('-1', cx - R, cy + 18);
      ctx.fillText('1', cx - 14, cy - R + 4);

      // Coordinates
      ctx.font = '12px Segoe UI, sans-serif';
      ctx.fillStyle = '#94a3b8';
      ctx.textAlign = 'left';
      ctx.fillText('cos \u03B1 = 4/5', Px - 5, cy + 20);

      // Sin alpha bracket
      ctx.fillStyle = '#f472b6';
      ctx.font = '12px Segoe UI, sans-serif';
      ctx.textAlign = 'right';
      ctx.fillText('sin \u03B1 = 3/5', Px - 10, (Py + cy) / 2 + 4);

      // Legend
      const lx = w - 210, ly = 30;
      ctx.font = 'bold 13px Segoe UI, sans-serif';
      ctx.textAlign = 'left';

      ctx.fillStyle = '#e2e8f0';
      ctx.fillText('Legenda:', lx, ly);

      ctx.fillStyle = '#60a5fa';
      ctx.fillText('\u2014 ugao \u03B1', lx, ly + 22);

      ctx.fillStyle = '#a78bfa';
      ctx.fillText('--- ugao \u03B1/2', lx, ly + 42);

      ctx.fillStyle = '#4ade80';
      ctx.fillText('\u2014 tg(\u03B1/2)', lx, ly + 62);

      // Value display
      ctx.font = 'bold 14px Segoe UI, sans-serif';
      ctx.fillStyle = '#4ade80';
      ctx.textAlign = 'left';
      ctx.fillText('tg(\u03B1/2) = 1/3', lx, ly + 92);
      ctx.fillText('tg\u00B2(\u03B1/2) = 1/9', lx, ly + 112);
    }

    draw();
  }

  // Step click interaction
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.add('active');
    });
  });
})();
</script>

</div>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Kvadrat tangensa polovine ugla",
  "subject": "math",
  "unit": "trigonometry",
  "topic_tags": ["trigonometrija", "poluugao", "tangens", "sinusna funkcija", "kosinusna funkcija", "trigonometrijski identiteti"]
}
BRAINSPARK_META-->