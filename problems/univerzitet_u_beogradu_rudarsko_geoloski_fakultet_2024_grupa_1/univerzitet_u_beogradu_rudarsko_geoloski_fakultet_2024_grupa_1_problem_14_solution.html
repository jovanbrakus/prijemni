<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zapremina piramide odseƒçene od kocke</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM: Kocka ABCDA‚ÇÅB‚ÇÅC‚ÇÅD‚ÇÅ ima ivicu 6. Ravan ACB‚ÇÅ odseca piramidu ABCB‚ÇÅ. Naƒái zapreminu te piramide.

SETUP:
Postavljamo kocku u koordinatni sistem:
A = (0,0,0), B = (6,0,0), C = (6,6,0), D = (0,6,0)
A‚ÇÅ = (0,0,6), B‚ÇÅ = (6,0,6), C‚ÇÅ = (6,6,6), D‚ÇÅ = (0,6,6)

Piramida ABCB‚ÇÅ ima temena: A=(0,0,0), B=(6,0,0), C=(6,6,0), B‚ÇÅ=(6,0,6).

APPROACH 1: Base triangle ABC, apex B‚ÇÅ
- Triangle ABC le≈æi u ravni z=0.
- A=(0,0,0), B=(6,0,0), C=(6,6,0)
- Vektori AB = (6,0,0), AC = (6,6,0)
- Povr≈°ina trougla ABC = (1/2)|AB √ó AC| = (1/2)|det| = (1/2)|6¬∑6 - 0¬∑6| = (1/2)¬∑36 = 18
- Vrh B‚ÇÅ = (6,0,6), visina od B‚ÇÅ do ravni z=0 je 6.
- V = (1/3) ¬∑ P_baze ¬∑ h = (1/3) ¬∑ 18 ¬∑ 6 = 36

APPROACH 2: Scalar triple product
V = (1/6)|AB ¬∑ (AC √ó AB‚ÇÅ)|
AB = (6,0,0), AC = (6,6,0), AB‚ÇÅ = (6,0,6)
AC √ó AB‚ÇÅ = |i  j  k|
             |6  6  0|
             |6  0  6|
= i(6¬∑6 - 0¬∑0) - j(6¬∑6 - 0¬∑6) + k(6¬∑0 - 6¬∑6)
= i(36) - j(36) + k(-36)
= (36, -36, -36)

AB ¬∑ (AC √ó AB‚ÇÅ) = 6¬∑36 + 0¬∑(-36) + 0¬∑(-36) = 216

V = (1/6)|216| = 36

VERIFICATION: Odgovor je D) 36. ‚úì

Provera logike: Zapremina kocke = 6¬≥ = 216.
Piramida ABCB‚ÇÅ zauzima deo kocke. 36/216 = 1/6 kocke, ≈°to ima smisla
jer piramida sa trouglastom bazom koja je polovina jedne strane kocke
i visinom jednakom ivici kocke daje upravo 1/6.
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 100px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}

.answer-option {
  flex: 1;
  min-width: 80px;
  max-width: 200px;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card p {
  color: #94a3b8;
  font-size: 1rem;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  font-size: 1.05rem;
  padding: 8px 0;
}

details summary:hover {
  color: #93c5fd;
}

details .theory-content {
  padding: 16px 0 8px 0;
}

details .theory-content ul {
  list-style: none;
  padding: 0;
}

details .theory-content li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
  color: #e2e8f0;
}

details .theory-content li:last-child {
  border-bottom: none;
}

.canvas-container {
  text-align: center;
  margin: 10px 0;
}

.canvas-container canvas {
  border-radius: 12px;
  border: 1px solid #334155;
  touch-action: none;
  max-width: 100%;
}

.drag-hint {
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
  text-align: center;
}

.step {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  padding: 16px;
  border-radius: 12px;
  border-left: 3px solid transparent;
  cursor: pointer;
  transition: all 0.2s ease;
}

.step:hover, .step.active {
  background: rgba(96,165,250,0.04);
  border-left-color: #4ade80;
}

.step-number {
  width: 32px;
  height: 32px;
  min-width: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  margin-bottom: 8px;
}

.step-content p {
  margin-bottom: 8px;
  color: #cbd5e1;
}

.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 10px 0;
  overflow-x: auto;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 6px;
}

.checkpoint {
  margin: 15px 0;
  padding: 0;
}

.checkpoint summary {
  color: #a78bfa;
  font-weight: 600;
  cursor: pointer;
  padding: 10px 16px;
  background: rgba(167,139,250,0.08);
  border: 1px solid rgba(167,139,250,0.2);
  border-radius: 8px;
  font-size: 0.95rem;
}

.checkpoint .checkpoint-answer {
  padding: 12px 16px;
  color: #4ade80;
  font-weight: 600;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 14px;
  padding: 24px;
  text-align: center;
  margin-bottom: 24px;
}

.insight-box h2 {
  color: #a78bfa;
  margin-bottom: 12px;
}

.insight-box .big-formula {
  font-size: 1.3rem;
  margin: 16px 0;
}

.final-answer-card {
  background: linear-gradient(135deg, rgba(52,211,153,0.1), rgba(74,222,128,0.1));
  border: 1px solid rgba(52,211,153,0.3);
}

.final-answer-card h2 {
  color: #4ade80;
}

.final-answer {
  font-size: 1.8rem;
  color: #4ade80;
  font-weight: 800;
  text-align: center;
  margin: 16px 0;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 16px 0;
}

.final-option {
  padding: 10px 22px;
  border-radius: 10px;
  background: rgba(51,65,85,0.5);
  border: 1px solid #334155;
  color: #94a3b8;
  font-size: 1rem;
}

.final-option.correct {
  background: rgba(52,211,153,0.15);
  border-color: #4ade80;
  color: #4ade80;
  font-weight: 700;
}

.verification {
  background: rgba(52,211,153,0.06);
  border: 1px solid rgba(52,211,153,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin-top: 14px;
  color: #94a3b8;
  font-size: 0.95rem;
}

.pitfall {
  display: flex;
  gap: 10px;
  align-items: flex-start;
  padding: 10px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
}

.pitfall:last-child {
  border-bottom: none;
}

.pitfall-icon {
  color: #e09468;
  font-size: 1.2rem;
  min-width: 24px;
}

.pitfall p {
  color: #cbd5e1;
}

.challenge-card {
  border-left: 3px solid #a78bfa;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step { flex-direction: column; gap: 10px; padding: 12px; }
  .given-grid { flex-direction: column; }
  .answer-option { max-width: 100%; }
  .final-options { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>

<div class="container">

  <h1>Zapremina piramide odseƒçene od kocke</h1>
  <p class="subtitle">Stereometrija - zapremina piramide, presek kocke ravni</p>

  <!-- ===== PROBLEM STATEMENT ===== -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>
      Neka je \(ABCDA_1B_1C_1D_1\) kocka ivice <span style="color:#60a5fa; font-weight:600;">6</span>.
      Od nje ravan \(ACB_1\) odseca piramidu \(ABCB_1\). Zapremina ove piramide je:
    </p>

    <div class="given-grid" style="margin-bottom:16px;">
      <div class="given-item">
        <div class="label">Ivica kocke</div>
        <div class="value">\(a = 6\)</div>
      </div>
      <div class="given-item">
        <div class="label">Ravan preseka</div>
        <div class="value">\(ACB_1\)</div>
      </div>
      <div class="given-item">
        <div class="label">Piramida</div>
        <div class="value">\(ABCB_1\)</div>
      </div>
    </div>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(18\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(18\sqrt{3}\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(36\sqrt{3}\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(36\)</div>
      </div>
    </div>
  </div>

  <!-- ===== PLAN ===== -->
  <div class="card plan-card">
    <h2>Plan re≈°avanja</h2>
    <p>
      Postaviƒáemo kocku u koordinatni sistem, identifikovati temena piramide \(ABCB_1\), izraƒçunati povr≈°inu baze (trougao \(ABC\)) i visinu od vrha \(B_1\) do te baze, pa primeniti formulu za zapreminu piramide.
    </p>
  </div>

  <!-- ===== THEORY REFRESHER ===== -->
  <div class="card">
    <details>
      <summary>üìê Kljuƒçne formule i teoreme</summary>
      <div class="theory-content">
        <ul>
          <li>
            <strong>Zapremina piramide:</strong>
            \[ V = \frac{1}{3} \cdot P_{\text{baze}} \cdot h \]
            gde je \(P_{\text{baze}}\) povr≈°ina baze, a \(h\) visina od vrha do ravni baze.
          </li>
          <li>
            <strong>Povr≈°ina trougla preko vektorskog proizvoda:</strong>
            \[ P = \frac{1}{2} |\vec{AB} \times \vec{AC}| \]
          </li>
          <li>
            <strong>Zapremina tetraedra (skalarni trostruki proizvod):</strong>
            \[ V = \frac{1}{6} |\vec{AB} \cdot (\vec{AC} \times \vec{AD})| \]
            za tetraedar \(ABCD\).
          </li>
          <li>
            <strong>Kocka \(ABCDA_1B_1C_1D_1\):</strong> donja baza \(ABCD\), gornja baza \(A_1B_1C_1D_1\), pri ƒçemu su \(AA_1, BB_1, CC_1, DD_1\) boƒçne ivice.
          </li>
        </ul>
        <div class="canvas-container">
          <canvas id="theoryCanvas" width="300" height="250"></canvas>
        </div>
      </div>
    </details>
  </div>

  <!-- ===== VISUAL AID ===== -->
  <div class="card">
    <h2>Vizualizacija</h2>
    <div class="canvas-container">
      <canvas id="mainCanvas" width="650" height="520"></canvas>
      <p class="drag-hint">Prevucite mi≈°a levo/desno za rotaciju kocke</p>
    </div>
  </div>

  <!-- ===== STEP-BY-STEP SOLUTION ===== -->
  <div class="card">
    <h2>Re≈°enje korak po korak</h2>

    <div class="step" id="step1">
      <div class="step-number">1</div>
      <div class="step-content">
        <h3>Postavimo kocku u koordinatni sistem</h3>
        <p>
          Stavimo teme \(A\) u koordinatni poƒçetak. Ivice kocke su du≈æine 6, pa su koordinate temena:
        </p>
        <div class="math-block">
          \[ \begin{align}
          A &= (0,\, 0,\, 0) \\
          B &= (6,\, 0,\, 0) \\
          C &= (6,\, 6,\, 0) \\
          D &= (0,\, 6,\, 0) \\
          B_1 &= (6,\, 0,\, 6)
          \end{align} \]
        </div>
        <p class="note">Temena A, B, C su u donjoj bazi, a B‚ÇÅ je teme iznad B u gornjoj bazi.</p>
      </div>
    </div>

    <div class="step" id="step2">
      <div class="step-number">2</div>
      <div class="step-content">
        <h3>Identifikujemo piramidu</h3>
        <p>
          Ravan kroz taƒçke \(A\), \(C\) i \(B_1\) odseca od kocke piramidu \(ABCB_1\). To je tetraedar sa 4 temena.
        </p>
        <p>
          Bazu piramide ƒçini trougao \(ABC\), koji le≈æi u ravni \(z = 0\) (donja baza kocke).
          Vrh piramide je taƒçka \(B_1 = (6, 0, 6)\).
        </p>
      </div>
    </div>

    <div class="step" id="step3">
      <div class="step-number">3</div>
      <div class="step-content">
        <h3>Izraƒçunamo povr≈°inu baze (trougao \(ABC\))</h3>
        <p>
          Trougao \(ABC\) ima temena \(A = (0,0,0)\), \(B = (6,0,0)\), \(C = (6,6,0)\).
          Primetimo da je \(\angle ABC = 90¬∞\) jer:
        </p>
        <div class="math-block">
          \[ \vec{BA} = A - B = (-6,\, 0,\, 0), \quad \vec{BC} = C - B = (0,\, 6,\, 0) \]
        </div>
        <p>
          Ova dva vektora su upravna (\(\vec{BA} \cdot \vec{BC} = 0\)), pa je trougao \(ABC\) pravougli sa katetama du≈æine 6.
        </p>
        <div class="math-block">
          \[ P_{ABC} = \frac{1}{2} \cdot |BA| \cdot |BC| = \frac{1}{2} \cdot 6 \cdot 6 = 18 \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>üß† Proveri sebe: Kolika je povr≈°ina trougla ABC?</summary>
      <div class="checkpoint-answer">\(P_{ABC} = 18\)</div>
    </details>

    <div class="step" id="step4">
      <div class="step-number">4</div>
      <div class="step-content">
        <h3>Odredimo visinu piramide</h3>
        <p>
          Baza (trougao \(ABC\)) le≈æi u ravni \(z = 0\).
          Vrh piramide je \(B_1 = (6, 0, 6)\).
        </p>
        <p>
          Visina piramide je rastojanje od \(B_1\) do ravni \(z = 0\), ≈°to je jednostavno \(z\)-koordinata taƒçke \(B_1\):
        </p>
        <div class="math-block">
          \[ h = 6 \]
        </div>
        <p class="note">Visina je jednaka ivici kocke jer je B‚ÇÅ taƒçno iznad B, a B le≈æi u ravni baze.</p>
      </div>
    </div>

    <div class="step" id="step5">
      <div class="step-number">5</div>
      <div class="step-content">
        <h3>Izraƒçunamo zapreminu piramide</h3>
        <p>Primenjujemo formulu za zapreminu piramide:</p>
        <div class="math-block">
          \[ V = \frac{1}{3} \cdot P_{\text{baze}} \cdot h = \frac{1}{3} \cdot 18 \cdot 6 = \frac{108}{3} = 36 \]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>üß† Proveri sebe: Koji deo zapremine kocke zauzima ova piramida?</summary>
      <div class="checkpoint-answer">
        Zapremina kocke je \(6^3 = 216\). Piramida zauzima \(\frac{36}{216} = \frac{1}{6}\) zapremine kocke.
      </div>
    </details>

    <div class="step" id="step6">
      <div class="step-number">6</div>
      <div class="step-content">
        <h3>Verifikacija skalarnim trostrukim proizvodom</h3>
        <p>
          Alternativno, zapreminu tetraedra \(ABCB_1\) mo≈æemo direktno izraƒçunati kori≈°ƒáenjem skalarnog trostrukog proizvoda:
        </p>
        <div class="math-block">
          \[ V = \frac{1}{6} \left| \vec{AB} \cdot (\vec{AC} \times \vec{AB_1}) \right| \]
        </div>
        <p>Formiramo vektore:</p>
        <div class="math-block">
          \[ \vec{AB} = (6,0,0), \quad \vec{AC} = (6,6,0), \quad \vec{AB_1} = (6,0,6) \]
        </div>
        <p>Raƒçunamo vektorski proizvod \(\vec{AC} \times \vec{AB_1}\):</p>
        <div class="math-block">
          \[ \vec{AC} \times \vec{AB_1} = \begin{vmatrix} \vec{i} & \vec{j} & \vec{k} \\ 6 & 6 & 0 \\ 6 & 0 & 6 \end{vmatrix} = (36,\, -36,\, -36) \]
        </div>
        <p>Skalarni proizvod sa \(\vec{AB}\):</p>
        <div class="math-block">
          \[ \vec{AB} \cdot (36, -36, -36) = 6 \cdot 36 + 0 \cdot (-36) + 0 \cdot (-36) = 216 \]
        </div>
        <p>Dakle:</p>
        <div class="math-block">
          \[ V = \frac{1}{6} \cdot |216| = 36 \]
        </div>
        <p class="note">Oba pristupa daju isti rezultat, ƒçime smo potvrdili taƒçnost.</p>
      </div>
    </div>

    <details class="checkpoint">
      <summary>üß† Proveri sebe: Koliki je skalarni trostruki proizvod vektora \(\vec{AB}\), \(\vec{AC}\), \(\vec{AB_1}\)?</summary>
      <div class="checkpoint-answer">\(\vec{AB} \cdot (\vec{AC} \times \vec{AB_1}) = 216\)</div>
    </details>
  </div>

  <!-- ===== KEY INSIGHT ===== -->
  <div class="insight-box">
    <h2>Kljuƒçni uvid</h2>
    <p>Trougao \(ABC\) je pravougli sa katetama jednakim ivici kocke, a visina piramide je taƒçno jednaka ivici kocke. Zato je zapremina piramide uvek jednaka \(\frac{1}{6}\) zapremine kocke!</p>
    <div class="big-formula">
      \[ V = \frac{1}{3} \cdot \frac{a^2}{2} \cdot a = \frac{a^3}{6} = \frac{6^3}{6} = 36 \]
    </div>
  </div>

  <!-- ===== FINAL ANSWER ===== -->
  <div class="card final-answer-card">
    <h2>Konaƒçan odgovor</h2>
    <div class="final-answer">\(V = 36\)</div>
    <div class="final-options">
      <div class="final-option">(A) \(18\)</div>
      <div class="final-option">(B) \(18\sqrt{3}\)</div>
      <div class="final-option">(C) \(36\sqrt{3}\)</div>
      <div class="final-option correct">(D) \(36\)</div>
    </div>
    <div class="verification">
      <strong>Provera:</strong> Zapremina kocke ivice 6 je \(216\). Piramida \(ABCB_1\) zauzima \(\frac{36}{216} = \frac{1}{6}\) zapremine kocke. Ovo je logiƒçno: baza piramide (trougao \(ABC\)) je polovina donje strane kocke, a visina je cela ivica, pa je \(V = \frac{1}{3} \cdot \frac{1}{2} \cdot a^3 = \frac{a^3}{6}\).
    </div>
  </div>

  <!-- ===== COMMON PITFALLS ===== -->
  <div class="card">
    <h2>ƒåeste gre≈°ke</h2>
    <div class="pitfall">
      <div class="pitfall-icon">‚ö†</div>
      <p><strong>Pogre≈°na baza piramide:</strong> Neki studenti poku≈°avaju da koriste trougao \(ACB_1\) kao bazu, umesto \(ABC\). Trougao \(ACB_1\) nije u jednoj od koordinatnih ravni, pa je izraƒçunavanje visine znatno komplikovanije. Uvek birajte bazu koja le≈æi u najjednostavnijoj ravni.</p>
    </div>
    <div class="pitfall">
      <div class="pitfall-icon">‚ö†</div>
      <p><strong>Zaboravljena podela sa 3:</strong> Formula za zapreminu piramide sadr≈æi faktor \(\frac{1}{3}\). Bez tog faktora dobija se \(P \cdot h = 18 \cdot 6 = 108\), ≈°to nije ponuƒëen odgovor. Zapremina piramide je uvek treƒáina proizvoda baze i visine.</p>
    </div>
  </div>

  <!-- ===== OPTIONAL CHALLENGE ===== -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Kolika je povr≈°ina preseka kocke ravni \(ACB_1\), tj. kolika je povr≈°ina trougla \(ACB_1\)?</p>
    <details>
      <summary>Savet</summary>
      <div class="theory-content">
        <p>Izraƒçunajte du≈æine stranica trougla \(ACB_1\):
        \(AC = 6\sqrt{2}\), \(AB_1 = 6\sqrt{2}\), \(CB_1 = 6\sqrt{2}\). ≈†ta primeƒáujete?
        Trougao je jednakostraniƒçni sa stranicom \(6\sqrt{2}\).</p>
      </div>
    </details>
  </div>

</div>

<!-- ===== SCRIPTS ===== -->
<script>
(() => {
  // Theory canvas - simple tetrahedron illustration
  const tc = document.getElementById('theoryCanvas');
  if (tc) {
    const ctx = tc.getContext('2d');
    const w = tc.width, h = tc.height;
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, w, h);

    // Simple pyramid illustration
    const bx = 150, by = 190;
    // Base triangle
    const pA = { x: 60, y: 210 };
    const pB = { x: 240, y: 210 };
    const pC = { x: 200, y: 150 };
    const pV = { x: 170, y: 40 }; // apex

    // Base fill
    ctx.beginPath();
    ctx.moveTo(pA.x, pA.y);
    ctx.lineTo(pB.x, pB.y);
    ctx.lineTo(pC.x, pC.y);
    ctx.closePath();
    ctx.fillStyle = 'rgba(96,165,250,0.1)';
    ctx.fill();
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 1.5;
    ctx.stroke();

    // Side faces
    ctx.beginPath();
    ctx.moveTo(pA.x, pA.y); ctx.lineTo(pV.x, pV.y);
    ctx.moveTo(pB.x, pB.y); ctx.lineTo(pV.x, pV.y);
    ctx.moveTo(pC.x, pC.y); ctx.lineTo(pV.x, pV.y);
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 1.5;
    ctx.stroke();

    // Fill side face
    ctx.beginPath();
    ctx.moveTo(pA.x, pA.y);
    ctx.lineTo(pB.x, pB.y);
    ctx.lineTo(pV.x, pV.y);
    ctx.closePath();
    ctx.fillStyle = 'rgba(167,139,250,0.08)';
    ctx.fill();

    // Height dashed line
    ctx.setLineDash([4, 4]);
    ctx.beginPath();
    ctx.moveTo(pV.x, pV.y);
    ctx.lineTo(pV.x, 210);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1.5;
    ctx.stroke();
    ctx.setLineDash([]);

    // Labels
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#60a5fa';
    ctx.fillText('P (baza)', 100, 235);
    ctx.fillStyle = '#4ade80';
    ctx.fillText('h', pV.x + 8, 130);
    ctx.fillStyle = '#a78bfa';
    ctx.fillText('V = ‚Öì Ph', 80, 25);

    // Formula
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('Piramida', 10, 20);
  }

  // Main interactive canvas - 3D cube with pyramid
  const canvas = document.getElementById('mainCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width, H = canvas.height;

  let rotY = 0.45;
  let dragging = false;
  let lastX = 0;

  // 3D projection (simple oblique)
  function project(x, y, z) {
    const cosR = Math.cos(rotY);
    const sinR = Math.sin(rotY);
    // Rotate around Y axis
    const rx = x * cosR - z * sinR;
    const rz = x * sinR + z * cosR;
    const ry = y;
    // Oblique projection
    const scale = 38;
    const ox = W / 2;
    const oy = H / 2 + 40;
    const px = ox + rx * scale;
    const py = oy - ry * scale; // Y up
    // Depth for sorting
    return { x: px, y: py, depth: rz };
  }

  // Cube vertices (centered at origin, side=6)
  const s = 3; // half-side
  const cubeVerts = {
    A: [-s, -s, -s],
    B: [s, -s, -s],
    C: [s, s, -s],
    D: [-s, s, -s],
    A1: [-s, -s, s],
    B1: [s, -s, s],
    C1: [s, s, s],
    D1: [-s, s, s]
  };

  const cubeEdges = [
    ['A', 'B'], ['B', 'C'], ['C', 'D'], ['D', 'A'],
    ['A1', 'B1'], ['B1', 'C1'], ['C1', 'D1'], ['D1', 'A1'],
    ['A', 'A1'], ['B', 'B1'], ['C', 'C1'], ['D', 'D1']
  ];

  function draw() {
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Project all vertices
    const proj = {};
    for (const [name, coords] of Object.entries(cubeVerts)) {
      proj[name] = project(coords[0], coords[1], coords[2]);
    }

    // Draw cube edges (dashed for back edges)
    ctx.lineWidth = 1.2;
    for (const [a, b] of cubeEdges) {
      const pa = proj[a];
      const pb = proj[b];
      const avgDepth = (pa.depth + pb.depth) / 2;
      const isBack = avgDepth < 0;
      ctx.setLineDash(isBack ? [4, 4] : []);
      ctx.strokeStyle = isBack ? 'rgba(148,163,184,0.25)' : 'rgba(148,163,184,0.5)';
      ctx.beginPath();
      ctx.moveTo(pa.x, pa.y);
      ctx.lineTo(pb.x, pb.y);
      ctx.stroke();
    }
    ctx.setLineDash([]);

    // Draw the plane triangle ACB1 (semi-transparent)
    ctx.beginPath();
    ctx.moveTo(proj.A.x, proj.A.y);
    ctx.lineTo(proj.C.x, proj.C.y);
    ctx.lineTo(proj.B1.x, proj.B1.y);
    ctx.closePath();
    ctx.fillStyle = 'rgba(167,139,250,0.12)';
    ctx.fill();
    ctx.strokeStyle = 'rgba(167,139,250,0.6)';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Draw pyramid faces (ABCB1)
    // Face ABC (base) - blue
    ctx.beginPath();
    ctx.moveTo(proj.A.x, proj.A.y);
    ctx.lineTo(proj.B.x, proj.B.y);
    ctx.lineTo(proj.C.x, proj.C.y);
    ctx.closePath();
    ctx.fillStyle = 'rgba(96,165,250,0.15)';
    ctx.fill();
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.stroke();

    // Face ABB1 - green tint
    ctx.beginPath();
    ctx.moveTo(proj.A.x, proj.A.y);
    ctx.lineTo(proj.B.x, proj.B.y);
    ctx.lineTo(proj.B1.x, proj.B1.y);
    ctx.closePath();
    ctx.fillStyle = 'rgba(52,211,153,0.08)';
    ctx.fill();
    ctx.strokeStyle = 'rgba(52,211,153,0.5)';
    ctx.lineWidth = 1.8;
    ctx.stroke();

    // Face BCB1
    ctx.beginPath();
    ctx.moveTo(proj.B.x, proj.B.y);
    ctx.lineTo(proj.C.x, proj.C.y);
    ctx.lineTo(proj.B1.x, proj.B1.y);
    ctx.closePath();
    ctx.fillStyle = 'rgba(244,114,182,0.08)';
    ctx.fill();
    ctx.strokeStyle = 'rgba(244,114,182,0.4)';
    ctx.lineWidth = 1.8;
    ctx.stroke();

    // Face ACB1 (cutting plane) - purple
    ctx.beginPath();
    ctx.moveTo(proj.A.x, proj.A.y);
    ctx.lineTo(proj.C.x, proj.C.y);
    ctx.lineTo(proj.B1.x, proj.B1.y);
    ctx.closePath();
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2.5;
    ctx.stroke();

    // Height line from B1 to B (dashed green)
    ctx.setLineDash([5, 5]);
    ctx.beginPath();
    ctx.moveTo(proj.B1.x, proj.B1.y);
    ctx.lineTo(proj.B.x, proj.B.y);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2;
    ctx.stroke();
    ctx.setLineDash([]);

    // Right angle marker at B
    const markSize = 10;
    const bx = proj.B.x, by = proj.B.y;
    const b1x = proj.B1.x, b1y = proj.B1.y;
    const cx = proj.C.x, cy = proj.C.y;
    // Direction to B1 from B
    let d1x = b1x - bx, d1y = b1y - by;
    let d1len = Math.sqrt(d1x*d1x + d1y*d1y);
    if (d1len > 0) { d1x /= d1len; d1y /= d1len; }
    // Direction to C from B
    let d2x = cx - bx, d2y = cy - by;
    let d2len = Math.sqrt(d2x*d2x + d2y*d2y);
    if (d2len > 0) { d2x /= d2len; d2y /= d2len; }
    ctx.beginPath();
    ctx.moveTo(bx + d1x * markSize, by + d1y * markSize);
    ctx.lineTo(bx + d1x * markSize + d2x * markSize, by + d1y * markSize + d2y * markSize);
    ctx.lineTo(bx + d2x * markSize, by + d2y * markSize);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1.5;
    ctx.stroke();

    // Labels for vertices
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    const labelOffsets = {
      A: [-18, 8], B: [8, 12], C: [10, -6], D: [-22, -6],
      A1: [-22, 4], B1: [10, 6], C1: [10, -6], D1: [-26, -6]
    };
    const pyramidVerts = ['A', 'B', 'C', 'B1'];
    for (const [name, p] of Object.entries(proj)) {
      const off = labelOffsets[name] || [8, -8];
      const isPyramid = pyramidVerts.includes(name);

      // Vertex dot
      ctx.beginPath();
      ctx.arc(p.x, p.y, isPyramid ? 5 : 3, 0, Math.PI * 2);
      ctx.fillStyle = isPyramid ? '#60a5fa' : '#64748b';
      ctx.fill();

      if (isPyramid) {
        // Glow
        ctx.beginPath();
        ctx.arc(p.x, p.y, 8, 0, Math.PI * 2);
        ctx.fillStyle = 'rgba(96,165,250,0.2)';
        ctx.fill();
      }

      // Label text
      const displayName = name.replace('1', '\u2081');
      ctx.fillStyle = isPyramid ? '#e2e8f0' : '#64748b';
      ctx.font = isPyramid ? 'bold 15px Segoe UI, system-ui, sans-serif' : '12px Segoe UI, system-ui, sans-serif';
      ctx.fillText(displayName, p.x + off[0], p.y + off[1]);
    }

    // Height label
    const midHx = (proj.B.x + proj.B1.x) / 2;
    const midHy = (proj.B.y + proj.B1.y) / 2;
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.fillStyle = '#4ade80';
    ctx.fillText('h = 6', midHx + 12, midHy);

    // Legend
    const legendY = H - 70;
    ctx.font = '12px Segoe UI, system-ui, sans-serif';

    ctx.fillStyle = 'rgba(96,165,250,0.3)';
    ctx.fillRect(20, legendY, 14, 14);
    ctx.strokeStyle = '#60a5fa';
    ctx.strokeRect(20, legendY, 14, 14);
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('Baza piramide (ABC)', 40, legendY + 12);

    ctx.fillStyle = 'rgba(167,139,250,0.3)';
    ctx.fillRect(20, legendY + 22, 14, 14);
    ctx.strokeStyle = '#a78bfa';
    ctx.strokeRect(20, legendY + 22, 14, 14);
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('Ravan preseka (ACB\u2081)', 40, legendY + 34);

    ctx.setLineDash([4, 4]);
    ctx.beginPath();
    ctx.moveTo(20, legendY + 51);
    ctx.lineTo(34, legendY + 51);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2;
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('Visina piramide (h = 6)', 40, legendY + 56);
  }

  draw();

  // Mouse drag for rotation
  canvas.addEventListener('mousedown', (e) => {
    dragging = true;
    lastX = e.clientX;
  });
  canvas.addEventListener('mousemove', (e) => {
    if (!dragging) return;
    const dx = e.clientX - lastX;
    rotY += dx * 0.008;
    lastX = e.clientX;
    draw();
  });
  canvas.addEventListener('mouseup', () => { dragging = false; });
  canvas.addEventListener('mouseleave', () => { dragging = false; });

  // Touch support
  canvas.addEventListener('touchstart', (e) => {
    dragging = true;
    lastX = e.touches[0].clientX;
  });
  canvas.addEventListener('touchmove', (e) => {
    if (!dragging) return;
    e.preventDefault();
    const dx = e.touches[0].clientX - lastX;
    rotY += dx * 0.008;
    lastX = e.touches[0].clientX;
    draw();
  });
  canvas.addEventListener('touchend', () => { dragging = false; });

  // Step click highlighting
  const steps = document.querySelectorAll('.step');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.toggle('active');
    });
  });
})();
</script>

</body>
</html>

<!--BRAINSPARK_META
{
  "title": "Zapremina piramide odseƒçene od kocke ravni",
  "subject": "math",
  "unit": "geometry",
  "topic_tags": ["stereometrija", "kocka", "piramida", "zapremina", "tetraedar", "vektorski proizvod"]
}
BRAINSPARK_META-->
