<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Skraƒáivanje algebarskog razlomka</title>

<script type="text/info" id="logic-scratchpad">
Problem: Simplify the fraction (a¬≥b + 2a¬≤b¬≤ + ab¬≥) / (b(a¬≥ - ab¬≤))
Given: ab ‚â† 0, a ‚â† ¬±b

Step 1: Factor the numerator
  a¬≥b + 2a¬≤b¬≤ + ab¬≥
  = ab(a¬≤ + 2ab + b¬≤)       ‚Äî factor out common factor ab
  = ab(a + b)¬≤               ‚Äî recognize perfect square trinomial

Step 2: Factor the denominator
  b(a¬≥ - ab¬≤)
  = b ¬∑ a(a¬≤ - b¬≤)           ‚Äî factor out a from the parentheses
  = ab(a¬≤ - b¬≤)              ‚Äî combine
  = ab(a - b)(a + b)         ‚Äî difference of squares

Step 3: Cancel common factors
  Numerator:   ab(a + b)¬≤
  Denominator: ab(a - b)(a + b)

  Cancel ab (since ab ‚â† 0) and one (a + b) factor (since a ‚â† -b, so a + b ‚â† 0):
  = (a + b) / (a - b)

  Also valid since a ‚â† b means a - b ‚â† 0.

Result: (a + b) / (a - b)

Verification: This matches answer option (B). Confirmed correct.
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 30px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.15rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 100px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.05rem;
  font-weight: 600;
}

.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 14px 0;
  overflow-x: auto;
}

.step-container {
  display: flex;
  gap: 16px;
  align-items: flex-start;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 14px;
  cursor: pointer;
  transition: all 0.2s ease;
  border-left: 3px solid transparent;
}

.step-container:hover, .step-container.active {
  background: rgba(96,165,250,0.05);
  border-left-color: #4ade80;
}

.step-badge {
  min-width: 28px;
  height: 28px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.85rem;
  color: #0f172a;
  flex-shrink: 0;
  margin-top: 2px;
}

.step-content {
  flex: 1;
  min-width: 0;
}

.step-content h3 {
  margin-bottom: 8px;
}

.step-content p {
  margin-bottom: 8px;
  color: #cbd5e1;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 6px;
}

.checkpoint {
  margin: 15px 0;
  background: rgba(167,139,250,0.08);
  border: 1px solid rgba(167,139,250,0.2);
  border-radius: 10px;
  padding: 14px 18px;
}

.checkpoint summary {
  color: #a78bfa;
  font-weight: 600;
  cursor: pointer;
  font-size: 0.95rem;
}

.checkpoint p {
  color: #cbd5e1;
  margin-top: 10px;
}

.theory-card details {
  margin: 15px 0;
}

.theory-card summary {
  color: #60a5fa;
  font-weight: 600;
  cursor: pointer;
  font-size: 1.05rem;
  padding: 4px 0;
}

.theory-card ul {
  margin-top: 12px;
  padding-left: 20px;
}

.theory-card li {
  margin-bottom: 10px;
  color: #cbd5e1;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(167,139,250,0.3);
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  text-align: center;
}

.insight-box h2 {
  color: #a78bfa;
  margin-bottom: 12px;
}

.final-answer-box {
  background: linear-gradient(135deg, rgba(52,211,153,0.1), rgba(74,222,128,0.1));
  border: 2px solid rgba(52,211,153,0.35);
  border-radius: 14px;
  padding: 28px;
  margin-bottom: 24px;
  text-align: center;
}

.final-answer-box h2 {
  color: #4ade80;
  font-size: 1.5rem;
  margin-bottom: 16px;
}

.final-answer-box .answer-text {
  color: #34d399;
  font-size: 1.6rem;
  font-weight: 700;
  margin-bottom: 14px;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-top: 16px;
}

.option-card {
  background: rgba(30,41,59,0.8);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 12px 20px;
  min-width: 100px;
  text-align: center;
}

.option-card.correct {
  border-color: #4ade80;
  background: rgba(52,211,153,0.12);
}

.option-card .opt-label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.option-card.correct .opt-label {
  color: #4ade80;
  font-weight: 700;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.92rem;
  margin-top: 16px;
  text-align: center;
  line-height: 1.6;
}

.pitfall-box {
  background: rgba(224,148,104,0.06);
  border: 1px solid rgba(224,148,104,0.2);
  border-radius: 14px;
  padding: 20px 24px;
  margin-bottom: 24px;
}

.pitfall-box h2 {
  color: #e09468;
  margin-bottom: 12px;
}

.pitfall-box ul {
  padding-left: 20px;
}

.pitfall-box li {
  color: #cbd5e1;
  margin-bottom: 8px;
}

.challenge-box {
  background: rgba(96,165,250,0.06);
  border: 1px solid rgba(96,165,250,0.2);
  border-radius: 14px;
  padding: 20px 24px;
  margin-bottom: 24px;
}

.challenge-box h2 {
  color: #60a5fa;
  margin-bottom: 12px;
}

.challenge-box details {
  margin: 15px 0;
}

.challenge-box summary {
  color: #a78bfa;
  cursor: pointer;
  font-weight: 600;
}

.challenge-box details p {
  color: #cbd5e1;
  margin-top: 10px;
}

canvas {
  display: block;
  margin: 0 auto;
  border-radius: 10px;
  touch-action: none;
  max-width: 100%;
}

.canvas-hint {
  text-align: center;
  color: #64748b;
  font-size: 0.85rem;
  margin-top: 8px;
}

.highlight-pink {
  color: #f472b6;
  font-weight: 600;
}

.highlight-blue {
  color: #60a5fa;
  font-weight: 600;
}

.highlight-green {
  color: #4ade80;
  font-weight: 600;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .given-grid { gap: 8px; }
  .given-item { min-width: 80px; padding: 10px 12px; }
  .step-container { flex-direction: column; gap: 10px; }
  .options-row { gap: 8px; }
  .option-card { min-width: 80px; padding: 10px 14px; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Skraƒáivanje algebarskog razlomka</h1>
  <p class="subtitle">Faktorizacija polinoma i skraƒáivanje zajedniƒçkih ƒçinilaca</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Tekst zadatka</h2>
    <p>Skraƒáivanjem razlomka</p>
    <div class="math-block">
      \[\frac{a^3b + 2a^2b^2 + ab^3}{b(a^3 - ab^2)}\]
    </div>
    <p>gde je \(ab \neq 0\) i \(a \neq \pm b\), dobija se razlomak:</p>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\(\dfrac{a-b}{a+b}\)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\(\dfrac{a+b}{a-b}\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\(a-b\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\(\dfrac{a-b}{ab}\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <h2>Plan re≈°avanja</h2>
    <p>Rastaviƒáemo i brojilac i imenilac na ƒçinioce (faktorizacija), a zatim skratiti sve zajedniƒçke ƒçinioce. Kljuƒç je prepoznati potpun kvadrat trinoma u brojiocu i razliku kvadrata u imeniocu.</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card theory-card">
    <details>
      <summary>üìê Kljuƒçne formule i teoreme</summary>
      <ul>
        <li><strong>Izdvajanje zajedniƒçkog ƒçinioca:</strong> Ako svaki sabirak sadr≈æi isti faktor, mo≈æemo ga izdvojiti ispred zagrade, npr. \(ab + ac = a(b + c)\).</li>
        <li><strong>Potpun kvadrat zbira:</strong> \(a^2 + 2ab + b^2 = (a + b)^2\)</li>
        <li><strong>Razlika kvadrata:</strong> \(a^2 - b^2 = (a - b)(a + b)\)</li>
        <li><strong>Skraƒáivanje razlomka:</strong> Zajedniƒçki ƒçinioci brojioca i imenioca se mogu podeliti (skratiti), pod uslovom da nisu jednaki nuli.</li>
      </ul>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <h2>Vizuelni prikaz faktorizacije</h2>
    <canvas id="factorCanvas" width="700" height="340"></canvas>
    <p class="canvas-hint">≈†ematski prikaz rastavljanja brojioca i imenioca na ƒçinioce</p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Re≈°enje korak po korak</h2>

    <div class="step-container" id="step1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Izdvajamo zajedniƒçki ƒçinilac iz brojioca</h3>
        <p>Pogledajmo brojilac: \(a^3b + 2a^2b^2 + ab^3\). Sva tri sabirka sadr≈æe ƒçinilac \(ab\), pa ga izdvajamo:</p>
        <div class="math-block">
          \[a^3b + 2a^2b^2 + ab^3 = ab(a^2 + 2ab + b^2)\]
        </div>
      </div>
    </div>

    <div class="step-container" id="step2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Prepoznajemo potpun kvadrat trinoma</h3>
        <p>Izraz u zagradi \(a^2 + 2ab + b^2\) je <span class="highlight-pink">potpun kvadrat zbira</span>. Primenjujemo formulu:</p>
        <div class="math-block">
          \[a^2 + 2ab + b^2 = (a + b)^2\]
        </div>
        <p>Dakle, brojilac postaje:</p>
        <div class="math-block">
          \[\text{Brojilac} = ab(a + b)^2\]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>üß† Proveri sebe: Koji je zajedniƒçki ƒçinilac svih sabiraka u brojiocu?</summary>
      <p>Zajedniƒçki ƒçinilac je \(ab\). Svaki sabirak sadr≈æi bar po jedno \(a\) i bar jedno \(b\).</p>
    </details>

    <div class="step-container" id="step3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Faktorizujemo imenilac</h3>
        <p>Imenilac je \(b(a^3 - ab^2)\). Iz zagrade \(a^3 - ab^2\) izdvajamo zajedniƒçki ƒçinilac \(a\):</p>
        <div class="math-block">
          \[b(a^3 - ab^2) = b \cdot a(a^2 - b^2) = ab(a^2 - b^2)\]
        </div>
      </div>
    </div>

    <div class="step-container" id="step4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Primenjujemo razliku kvadrata na imenilac</h3>
        <p>Izraz \(a^2 - b^2\) je <span class="highlight-pink">razlika kvadrata</span>. Primenjujemo formulu:</p>
        <div class="math-block">
          \[a^2 - b^2 = (a - b)(a + b)\]
        </div>
        <p>Dakle, imenilac postaje:</p>
        <div class="math-block">
          \[\text{Imenilac} = ab(a - b)(a + b)\]
        </div>
      </div>
    </div>

    <details class="checkpoint">
      <summary>üß† Proveri sebe: Koliko puta se \((a+b)\) pojavljuje u brojiocu, a koliko u imeniocu?</summary>
      <p>U brojiocu se pojavljuje <strong>dva puta</strong> (kao \((a+b)^2\)), a u imeniocu <strong>jednom</strong> (kao \((a+b)\)).</p>
    </details>

    <div class="step-container" id="step5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Zapisujemo razlomak u faktorisanom obliku</h3>
        <p>Sada imamo:</p>
        <div class="math-block">
          \[\frac{ab(a + b)^2}{ab(a - b)(a + b)}\]
        </div>
      </div>
    </div>

    <div class="step-container" id="step6">
      <div class="step-badge">6</div>
      <div class="step-content">
        <h3>Skraƒáujemo zajedniƒçke ƒçinioce</h3>
        <p>Skraƒáujemo \(ab\) (moguƒáe jer \(ab \neq 0\)) i jedan ƒçinilac \((a+b)\) (moguƒáe jer \(a \neq -b\), pa je \(a + b \neq 0\)):</p>
        <div class="math-block">
          \[\frac{\cancel{ab}\cancel{(a + b)}(a + b)}{\cancel{ab}(a - b)\cancel{(a + b)}} = \frac{a + b}{a - b}\]
        </div>
        <p class="note">Imenilac \(a - b \neq 0\) jer je dato da \(a \neq b\).</p>
      </div>
    </div>

    <details class="checkpoint">
      <summary>üß† Proveri sebe: Za≈°to smemo da skratimo \((a+b)\)?</summary>
      <p>Smemo jer je dato da \(a \neq -b\), ≈°to znaƒçi da je \(a + b \neq 0\). Deljenje nulom nije dozvoljeno, ali ovde smo sigurni da delilac nije nula.</p>
    </details>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Kljuƒçni uvid</h2>
    <p>Ceo zadatak se svodi na prepoznavanje dve osnovne formule: <span class="highlight-blue">potpun kvadrat zbira</span> u brojiocu i <span class="highlight-blue">razlika kvadrata</span> u imeniocu. Kada se oba izraza faktori≈°u, skraƒáivanje postaje jednostavno.</p>
    <div class="math-block">
      \[\frac{ab \cdot (a+b)^2}{ab \cdot (a-b)(a+b)} = \frac{a+b}{a-b}\]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <h2>Konaƒçan odgovor</h2>
    <div class="answer-text">\(\dfrac{a+b}{a-b}\)</div>

    <div class="options-row">
      <div class="option-card">
        <div class="opt-label">(A)</div>
        <div>\(\dfrac{a-b}{a+b}\)</div>
      </div>
      <div class="option-card correct">
        <div class="opt-label">(B)</div>
        <div>\(\dfrac{a+b}{a-b}\)</div>
      </div>
      <div class="option-card">
        <div class="opt-label">(C)</div>
        <div>\(a-b\)</div>
      </div>
      <div class="option-card">
        <div class="opt-label">(D)</div>
        <div>\(\dfrac{a-b}{ab}\)</div>
      </div>
    </div>

    <p class="verification-note">
      <strong>Provera:</strong> Za \(a = 3\) i \(b = 1\) brojilac je \(27 + 18 + 3 = 48\), imenilac je \(1 \cdot (27 - 3) = 24\), pa je razlomak \(\frac{48}{24} = 2\). Po odgovoru (B): \(\frac{3+1}{3-1} = \frac{4}{2} = 2\). Vrednosti se poklapaju.
    </p>
  </div>

  <!-- Common Pitfalls -->
  <div class="pitfall-box">
    <h2>ƒåeste gre≈°ke</h2>
    <ul>
      <li><strong>Nepotpuno izdvajanje zajedniƒçkog ƒçinioca:</strong> Ako iz brojioca izdvojite samo \(a\) ili samo \(b\) umesto \(ab\), neƒáete moƒái da skratite sve zajedniƒçke ƒçinioce i dobiƒáete pogre≈°an rezultat.</li>
      <li><strong>Zamena brojioca i imenioca:</strong> Pa≈æljivo pratite ≈°ta je u brojiocu a ≈°ta u imeniocu. Odgovor \(\frac{a-b}{a+b}\) (opcija A) je upravo obrnuti razlomak od taƒçnog odgovora &mdash; ƒçest rezultat ako se pome≈°aju pozicije ƒçinilaca.</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="challenge-box">
    <h2>Dodatni izazov</h2>
    <p>Poku≈°aj da skrati≈° sliƒçan razlomak:</p>
    <div class="math-block">
      \[\frac{a^4b - 2a^3b^2 + a^2b^3}{b^2(a^3 - a^2b)}\]
    </div>
    <p>gde je \(ab \neq 0\) i \(a \neq b\).</p>
    <details>
      <summary>Hint</summary>
      <p>Iz brojioca izdvoj \(a^2 b\), a iz imenioca \(b^2 \cdot a^2\). U brojiocu ƒáe≈° prepoznati potpun kvadrat razlike \((a - b)^2\), a u imeniocu jednostavan binom \((a - b)\). Konaƒçan rezultat je \(\frac{a-b}{b}\).</p>
    </details>
  </div>

</div>

<script>
(() => {
  // Step click highlighting
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.add('active');
    });
  });

  // Canvas visualization of factorization
  const canvas = document.getElementById('factorCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  function drawRoundedRect(x, y, w, h, r, fillColor, strokeColor) {
    ctx.beginPath();
    ctx.moveTo(x + r, y);
    ctx.lineTo(x + w - r, y);
    ctx.quadraticCurveTo(x + w, y, x + w, y + r);
    ctx.lineTo(x + w, y + h - r);
    ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
    ctx.lineTo(x + r, y + h);
    ctx.quadraticCurveTo(x, y + h, x, y + h - r);
    ctx.lineTo(x, y + r);
    ctx.quadraticCurveTo(x, y, x + r, y);
    ctx.closePath();
    if (fillColor) {
      ctx.fillStyle = fillColor;
      ctx.fill();
    }
    if (strokeColor) {
      ctx.strokeStyle = strokeColor;
      ctx.lineWidth = 1.5;
      ctx.stroke();
    }
  }

  function drawArrow(fromX, fromY, toX, toY, color) {
    ctx.beginPath();
    ctx.moveTo(fromX, fromY);
    ctx.lineTo(toX, toY);
    ctx.strokeStyle = color;
    ctx.lineWidth = 2;
    ctx.stroke();

    const angle = Math.atan2(toY - fromY, toX - fromX);
    const headLen = 8;
    ctx.beginPath();
    ctx.moveTo(toX, toY);
    ctx.lineTo(toX - headLen * Math.cos(angle - 0.4), toY - headLen * Math.sin(angle - 0.4));
    ctx.lineTo(toX - headLen * Math.cos(angle + 0.4), toY - headLen * Math.sin(angle + 0.4));
    ctx.closePath();
    ctx.fillStyle = color;
    ctx.fill();
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    const midX = W / 2;

    // Title labels
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';

    // --- NUMERATOR COLUMN (left half) ---
    const numX = midX / 2 + 20;

    ctx.fillStyle = '#60a5fa';
    ctx.fillText('BROJILAC', numX, 25);

    // Original numerator
    drawRoundedRect(numX - 140, 35, 280, 36, 8, 'rgba(96,165,250,0.1)', 'rgba(96,165,250,0.3)');
    ctx.fillStyle = '#e2e8f0';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.fillText('a\u00B3b + 2a\u00B2b\u00B2 + ab\u00B3', numX, 58);

    drawArrow(numX, 75, numX, 95, '#60a5fa');

    // Step: factor out ab
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'italic 11px Segoe UI, system-ui, sans-serif';
    ctx.fillText('izdvajamo ab', numX + 100, 90);

    drawRoundedRect(numX - 140, 100, 280, 36, 8, 'rgba(96,165,250,0.1)', 'rgba(96,165,250,0.3)');
    ctx.fillStyle = '#e2e8f0';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.fillText('ab \u00B7 (a\u00B2 + 2ab + b\u00B2)', numX, 123);

    drawArrow(numX, 140, numX, 160, '#60a5fa');

    // Step: perfect square
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'italic 11px Segoe UI, system-ui, sans-serif';
    ctx.fillText('potpun kvadrat', numX + 100, 155);

    drawRoundedRect(numX - 110, 165, 220, 36, 8, 'rgba(244,114,182,0.12)', 'rgba(244,114,182,0.35)');
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.fillText('ab \u00B7 (a + b)\u00B2', numX, 188);

    // --- DENOMINATOR COLUMN (right half) ---
    const denX = midX + midX / 2 - 20;

    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.fillText('IMENILAC', denX, 25);

    drawRoundedRect(denX - 130, 35, 260, 36, 8, 'rgba(167,139,250,0.1)', 'rgba(167,139,250,0.3)');
    ctx.fillStyle = '#e2e8f0';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.fillText('b(a\u00B3 \u2212 ab\u00B2)', denX, 58);

    drawArrow(denX, 75, denX, 95, '#a78bfa');

    ctx.fillStyle = '#94a3b8';
    ctx.font = 'italic 11px Segoe UI, system-ui, sans-serif';
    ctx.fillText('izdvajamo a', denX + 95, 90);

    drawRoundedRect(denX - 130, 100, 260, 36, 8, 'rgba(167,139,250,0.1)', 'rgba(167,139,250,0.3)');
    ctx.fillStyle = '#e2e8f0';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.fillText('ab \u00B7 (a\u00B2 \u2212 b\u00B2)', denX, 123);

    drawArrow(denX, 140, denX, 160, '#a78bfa');

    ctx.fillStyle = '#94a3b8';
    ctx.font = 'italic 11px Segoe UI, system-ui, sans-serif';
    ctx.fillText('razlika kvadrata', denX + 100, 155);

    drawRoundedRect(denX - 140, 165, 280, 36, 8, 'rgba(244,114,182,0.12)', 'rgba(244,114,182,0.35)');
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.fillText('ab \u00B7 (a \u2212 b)(a + b)', denX, 188);

    // --- CANCELLATION SECTION ---
    drawArrow(numX, 205, midX - 5, 230, '#4ade80');
    drawArrow(denX, 205, midX + 5, 230, '#4ade80');

    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.fillText('Skra\u0107ujemo: ab i (a + b)', midX, 245);

    // Cancelled fraction visualization
    drawRoundedRect(midX - 160, 255, 320, 70, 10, 'rgba(52,211,153,0.08)', 'rgba(52,211,153,0.3)');

    // Fraction line
    ctx.beginPath();
    ctx.moveTo(midX - 100, 290);
    ctx.lineTo(midX + 100, 290);
    ctx.strokeStyle = '#e2e8f0';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Struck-through factors (cancelled) + remaining
    ctx.font = '13px Segoe UI, system-ui, sans-serif';

    // Numerator of fraction
    ctx.fillStyle = '#64748b';
    ctx.fillText('ab', midX - 55, 282);
    // Strikethrough
    ctx.beginPath();
    ctx.moveTo(midX - 67, 280);
    ctx.lineTo(midX - 43, 280);
    ctx.strokeStyle = '#ef4444';
    ctx.lineWidth = 1.5;
    ctx.stroke();

    ctx.fillStyle = '#64748b';
    ctx.fillText('(a+b)', midX, 282);
    ctx.beginPath();
    ctx.moveTo(midX - 18, 280);
    ctx.lineTo(midX + 20, 280);
    ctx.strokeStyle = '#ef4444';
    ctx.stroke();

    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.fillText('(a+b)', midX + 65, 282);

    // Denominator of fraction
    ctx.fillStyle = '#64748b';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.fillText('ab', midX - 55, 312);
    ctx.beginPath();
    ctx.moveTo(midX - 67, 310);
    ctx.lineTo(midX - 43, 310);
    ctx.strokeStyle = '#ef4444';
    ctx.lineWidth = 1.5;
    ctx.stroke();

    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.fillText('(a\u2212b)', midX, 312);

    ctx.fillStyle = '#64748b';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.fillText('(a+b)', midX + 65, 312);
    ctx.beginPath();
    ctx.moveTo(midX + 47, 310);
    ctx.lineTo(midX + 85, 310);
    ctx.strokeStyle = '#ef4444';
    ctx.stroke();

    // Equals sign and result
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 18px Segoe UI, system-ui, sans-serif';
    ctx.fillText('=', midX + 130, 296);

    // Final result box
    drawRoundedRect(midX + 145, 262, 100, 55, 8, 'rgba(52,211,153,0.15)', '#4ade80');

    // Result fraction line
    ctx.beginPath();
    ctx.moveTo(midX + 165, 290);
    ctx.lineTo(midX + 225, 290);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2;
    ctx.stroke();

    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.fillText('a + b', midX + 195, 282);
    ctx.fillText('a \u2212 b', midX + 195, 310);
  }

  draw();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Skraƒáivanje algebarskog razlomka sa faktorima a i b",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["faktorizacija", "skraƒáivanje razlomaka", "potpun kvadrat", "razlika kvadrata", "algebarski izrazi"]
}
BRAINSPARK_META-->