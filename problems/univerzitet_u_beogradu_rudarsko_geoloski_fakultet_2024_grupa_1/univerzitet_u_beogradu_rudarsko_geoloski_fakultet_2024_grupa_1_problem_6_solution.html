<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jednacina sa apsolutnom vrednoscu</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
Problem: Solve |2x + 1| + x = 1 and determine which set all solutions belong to.

We need to consider two cases based on the sign of the expression inside the absolute value.

Case 1: 2x + 1 >= 0, i.e. x >= -1/2
  |2x + 1| = 2x + 1
  Equation: (2x + 1) + x = 1
  3x + 1 = 1
  3x = 0
  x = 0

  Check condition: x = 0 >= -1/2 ‚úì
  Check in original: |2(0) + 1| + 0 = |1| + 0 = 1 ‚úì
  x = 0 is a valid solution.

Case 2: 2x + 1 < 0, i.e. x < -1/2
  |2x + 1| = -(2x + 1) = -2x - 1
  Equation: (-2x - 1) + x = 1
  -x - 1 = 1
  -x = 2
  x = -2

  Check condition: x = -2 < -1/2 ‚úì
  Check in original: |2(-2) + 1| + (-2) = |-4 + 1| - 2 = |-3| - 2 = 3 - 2 = 1 ‚úì
  x = -2 is a valid solution.

Solutions: x = 0 and x = -2.

Now check which set contains both solutions:
(A) (-1, 2]: x = -2 NOT in (-1, 2] since -2 < -1. ‚úó
(B) (-3, 0]: x = -2 ‚àà (-3, 0] ‚úì and x = 0 ‚àà (-3, 0] ‚úì. ‚úì
(C) [0, 3): x = -2 NOT in [0, 3). ‚úó
(D) (-4, -1]: x = 0 NOT in (-4, -1]. ‚úó

Answer: B) (-3, 0]

This matches the given correct answer B) (-3, 0]. ‚úì
</script>
<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
  max-width: 900px;
  margin: 0 auto;
}
h1 {
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-size: 1.9rem;
  font-weight: 800;
  margin-bottom: 4px;
  line-height: 1.3;
}
.subtitle {
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 28px;
}
.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px 28px;
  margin-bottom: 22px;
}
.card-title {
  font-size: 1.2rem;
  font-weight: 700;
  margin-bottom: 14px;
  display: flex;
  align-items: center;
  gap: 10px;
}
.card-title .icon { font-size: 1.3rem; }
.blue { color: #60a5fa; }
.purple { color: #a78bfa; }
.green { color: #34d399; }
.pink { color: #f472b6; }
.muted { color: #94a3b8; }
.highlight {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 14px 18px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  overflow-x: auto;
}
.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}
.given-item {
  background: rgba(96,165,250,0.07);
  border: 1px solid rgba(96,165,250,0.18);
  border-radius: 10px;
  padding: 10px 16px;
  text-align: center;
  min-width: 70px;
}
.given-item .label {
  font-size: 0.82rem;
  color: #94a3b8;
  margin-bottom: 2px;
  font-weight: 600;
}
.given-item .value {
  font-size: 1.05rem;
  color: #e2e8f0;
  font-weight: 700;
}
.step-container {
  display: flex;
  gap: 16px;
  margin-bottom: 22px;
  padding: 18px 20px;
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  cursor: pointer;
  transition: border-color 0.2s, border-left 0.2s;
  border-left: 4px solid #334155;
}
.step-container:hover, .step-container.active {
  border-left: 4px solid #4ade80;
}
.step-badge {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: 0.95rem;
  flex-shrink: 0;
  margin-top: 2px;
}
.step-content { flex: 1; min-width: 0; }
.step-content h3 {
  font-size: 1.1rem;
  font-weight: 700;
  color: #60a5fa;
  margin-bottom: 8px;
}
.step-content p { margin-bottom: 8px; }
details {
  margin: 15px 0;
  background: rgba(167,139,250,0.06);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 12px 16px;
}
details summary {
  cursor: pointer;
  font-weight: 600;
  color: #a78bfa;
  user-select: none;
}
details[open] summary { margin-bottom: 10px; }
details p, details ul { margin-top: 6px; }
details ul { padding-left: 20px; }
details li { margin-bottom: 4px; }
.checkpoint details summary {
  color: #34d399;
}
.checkpoint details {
  border-color: rgba(52,211,153,0.2);
  background: rgba(52,211,153,0.05);
}
.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid rgba(167,139,250,0.25);
  border-radius: 14px;
  padding: 24px;
  text-align: center;
  margin-bottom: 22px;
}
.insight-box .label-text {
  font-size: 0.85rem;
  color: #a78bfa;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  font-weight: 700;
  margin-bottom: 10px;
}
.final-answer-box {
  background: linear-gradient(135deg, rgba(52,211,153,0.1), rgba(74,222,128,0.1));
  border: 2px solid rgba(52,211,153,0.35);
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin-bottom: 22px;
}
.final-answer-box .label-text {
  font-size: 0.85rem;
  color: #34d399;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  font-weight: 700;
  margin-bottom: 10px;
}
.final-answer-box .answer-value {
  font-size: 1.7rem;
  color: #4ade80;
  font-weight: 800;
}
.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-top: 18px;
}
.option-card {
  background: rgba(30,41,59,0.7);
  border: 2px solid #334155;
  border-radius: 12px;
  padding: 12px 22px;
  text-align: center;
  min-width: 90px;
  transition: all 0.2s;
}
.option-card.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.1);
  box-shadow: 0 0 20px rgba(74,222,128,0.15);
}
.option-card .opt-letter {
  font-size: 0.85rem;
  color: #94a3b8;
  font-weight: 700;
  margin-bottom: 2px;
}
.option-card.correct .opt-letter { color: #4ade80; }
.option-card .opt-value {
  font-size: 1.15rem;
  font-weight: 700;
  color: #e2e8f0;
}
.option-card.correct .opt-value { color: #4ade80; }
.pitfall-item {
  padding: 10px 0;
  border-bottom: 1px solid #334155;
}
.pitfall-item:last-child { border-bottom: none; }
canvas {
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  touch-action: none;
  max-width: 100%;
}
.canvas-wrapper {
  background: #0c1222;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 16px;
  margin: 14px 0;
  text-align: center;
}
.canvas-hint {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-top: 8px;
  text-align: center;
}
.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 8px;
}
@media (max-width: 700px) {
  body { padding: 12px; }
  h1 { font-size: 1.5rem; }
  .card { padding: 16px; }
  .step-container { padding: 14px; flex-direction: column; gap: 10px; }
  .given-grid { gap: 8px; }
  .given-item { min-width: 60px; padding: 8px 10px; }
  .options-row { gap: 8px; }
  .option-card { min-width: 70px; padding: 10px 14px; }
}
</style>
</head>
<body>

<h1>Jednacina sa apsolutnom vrednoscu</h1>
<p class="subtitle">Linearna jednacina sa apsolutnom vrednoscu -- resavanje po slucajevima i odredjivanje skupa kome pripadaju resenja</p>

<!-- Problem Statement -->
<div class="card problem-statement">
  <div class="card-title"><span class="icon">üìã</span><span class="blue">Tekst zadatka</span></div>
  <p>Sva resenja jednacine</p>
  <div class="highlight">
    \[ |2x + 1| + x = 1 \]
  </div>
  <p>pripadaju skupu:</p>
  <div class="given-grid">
    <div class="given-item answer-option" data-option="A">
      <div class="label">(A)</div>
      <div class="value">\((-1,\, 2]\)</div>
    </div>
    <div class="given-item answer-option" data-option="B">
      <div class="label">(B)</div>
      <div class="value">\((-3,\, 0]\)</div>
    </div>
    <div class="given-item answer-option" data-option="C">
      <div class="label">(C)</div>
      <div class="value">\([0,\, 3)\)</div>
    </div>
    <div class="given-item answer-option" data-option="D">
      <div class="label">(D)</div>
      <div class="value">\((-4,\, -1]\)</div>
    </div>
  </div>
</div>

<!-- Plan -->
<div class="card">
  <div class="card-title"><span class="icon">üó∫Ô∏è</span><span class="purple">Plan resavanja</span></div>
  <p>Jednacinu sa apsolutnom vrednoscu resavamo razbijanjem na dva slucaja: kada je izraz pod apsolutnom vrednoscu nenegativan i kada je negativan. Nakon sto nadjemo sva resenja, proverimo kom od ponudjenih skupova sva pripadaju.</p>
</div>

<!-- Theory Refresher -->
<div class="card">
  <details>
    <summary>üìê Kljucne formule i teoreme</summary>
    <ul>
      <li><strong>Definicija apsolutne vrednosti:</strong>
        \[ |a| = \begin{cases} a, & \text{ako } a \geq 0 \\ -a, & \text{ako } a < 0 \end{cases} \]
      </li>
      <li><strong>Metod resavanja:</strong> Jednacinu sa \( |f(x)| \) resavamo tako sto razmatramo dva slucaja na osnovu znaka izraza \( f(x) \).</li>
      <li><strong>Provera uslova:</strong> Svako resenje moramo proveriti da li zadovoljava uslov slucaja u kome je dobijeno.</li>
      <li><strong>Pripadnost intervalu:</strong> \( x \in (a, b] \) znaci \( a < x \leq b \) -- leva granica je iskljucena, desna ukljucena.</li>
    </ul>
  </details>
</div>

<!-- Visual Aid / Interactive Diagram -->
<div class="card">
  <div class="card-title"><span class="icon">üìä</span><span class="blue">Graficki prikaz</span></div>
  <p class="muted" style="margin-bottom:10px;">Grafici funkcija \( y = |2x+1| + x \) i \( y = 1 \). Presecne tacke su resenja jednacine. Prevlacite slider da istrazite vrednosti.</p>
  <div class="canvas-wrapper">
    <canvas id="graphCanvas" width="780" height="400"></canvas>
  </div>
  <p class="canvas-hint">Prevucite klizac ispod grafika da istrazite vrednosti funkcije</p>
</div>

<!-- Step-by-step Solution -->

<!-- Step 1 -->
<div class="step-container" id="step1">
  <div class="step-badge">1</div>
  <div class="step-content">
    <h3>Odredimo kriticnu tacku</h3>
    <p>Apsolutna vrednost \( |2x + 1| \) menja ponasanje u tacki gde je izraz unutar nje jednak nuli:</p>
    <div class="highlight">
      \[ 2x + 1 = 0 \quad \Rightarrow \quad x = -\frac{1}{2} \]
    </div>
    <p>Ovo deli brojnu pravu na dva intervala: \( x \geq -\frac{1}{2} \) (gde je \( 2x+1 \geq 0 \)) i \( x < -\frac{1}{2} \) (gde je \( 2x+1 < 0 \)).</p>
  </div>
</div>

<!-- Step 2 -->
<div class="step-container" id="step2">
  <div class="step-badge">2</div>
  <div class="step-content">
    <h3>Slucaj 1: \( x \geq -\dfrac{1}{2} \)</h3>
    <p>Kada je \( 2x + 1 \geq 0 \), apsolutna vrednost se jednostavno "skida":</p>
    <div class="highlight">
      \[ |2x + 1| = 2x + 1 \]
    </div>
    <p>Uvrstimo u jednacinu:</p>
    <div class="highlight">
      \[ (2x + 1) + x = 1 \]
    </div>
    <p>Sredimo:</p>
    <div class="highlight">
      \[ 3x + 1 = 1 \]
    </div>
    <div class="highlight">
      \[ 3x = 0 \quad \Rightarrow \quad x = 0 \]
    </div>
    <p>Proverimo uslov: \( x = 0 \geq -\frac{1}{2} \) -- <span class="green">ispunjeno</span>.</p>
    <p>Proverimo u originalnoj jednacini: \( |2 \cdot 0 + 1| + 0 = |1| = 1 \) -- <span class="green">tacno</span>.</p>

    <div class="checkpoint">
      <details>
        <summary>üîç Proveri sebe: Zasto smemo da "skinemo" apsolutnu vrednost?</summary>
        <p>Zato sto smo u ovom slucaju pretpostavili da je \( 2x + 1 \geq 0 \). Po definiciji, \( |a| = a \) kada je \( a \geq 0 \). Izraz je vec nenegativan, pa apsolutna vrednost ne menja nista.</p>
      </details>
    </div>
  </div>
</div>

<!-- Step 3 -->
<div class="step-container" id="step3">
  <div class="step-badge">3</div>
  <div class="step-content">
    <h3>Slucaj 2: \( x < -\dfrac{1}{2} \)</h3>
    <p>Kada je \( 2x + 1 < 0 \), apsolutna vrednost menja znak izraza:</p>
    <div class="highlight">
      \[ |2x + 1| = -(2x + 1) = -2x - 1 \]
    </div>
    <p>Uvrstimo u jednacinu:</p>
    <div class="highlight">
      \[ (-2x - 1) + x = 1 \]
    </div>
    <p>Sredimo:</p>
    <div class="highlight">
      \[ -x - 1 = 1 \]
    </div>
    <div class="highlight">
      \[ -x = 2 \quad \Rightarrow \quad x = -2 \]
    </div>
    <p>Proverimo uslov: \( x = -2 < -\frac{1}{2} \) -- <span class="green">ispunjeno</span>.</p>
    <p>Proverimo u originalnoj jednacini: \( |2 \cdot (-2) + 1| + (-2) = |-3| - 2 = 3 - 2 = 1 \) -- <span class="green">tacno</span>.</p>

    <div class="checkpoint">
      <details>
        <summary>üîç Proveri sebe: Sta bi bilo da smo dobili x = 1 u ovom slucaju?</summary>
        <p>Resenje \( x = 1 \) ne bi bilo validno u ovom slucaju, jer uslov glasi \( x < -\frac{1}{2} \), a \( 1 \not< -\frac{1}{2} \). Tada bismo to resenje odbacili. Uvek je neophodno proveriti da resenje zadovoljava uslov svog slucaja!</p>
      </details>
    </div>
  </div>
</div>

<!-- Step 4 -->
<div class="step-container" id="step4">
  <div class="step-badge">4</div>
  <div class="step-content">
    <h3>Skup resenja</h3>
    <p>Jednacina ima tacno dva resenja:</p>
    <div class="highlight">
      \[ x_1 = 0 \qquad \text{i} \qquad x_2 = -2 \]
    </div>
    <p>Sada treba da proverimo kom od ponudjenih skupova <strong>oba</strong> resenja pripadaju.</p>
  </div>
</div>

<!-- Step 5 -->
<div class="step-container" id="step5">
  <div class="step-badge">5</div>
  <div class="step-content">
    <h3>Proveravamo ponudjene odgovore</h3>
    <p><strong>(A) \( (-1, 2] \):</strong> Resenje \( x = -2 \notin (-1, 2] \) jer \( -2 < -1 \). <span class="pink">Ne odgovara.</span></p>
    <p><strong>(B) \( (-3, 0] \):</strong> Da li je \( -2 \in (-3, 0] \)? Da, jer \( -3 < -2 \leq 0 \). Da li je \( 0 \in (-3, 0] \)? Da, jer \( 0 \leq 0 \). <span class="green">Oba resenja pripadaju!</span></p>
    <p><strong>(C) \( [0, 3) \):</strong> Resenje \( x = -2 \notin [0, 3) \). <span class="pink">Ne odgovara.</span></p>
    <p><strong>(D) \( (-4, -1] \):</strong> Resenje \( x = 0 \notin (-4, -1] \) jer \( 0 > -1 \). <span class="pink">Ne odgovara.</span></p>

    <div class="checkpoint">
      <details>
        <summary>üîç Proveri sebe: Zasto je za (B) bitno da je 0 *manje ili jednako* 0?</summary>
        <p>Interval \( (-3, 0] \) koristi zatvorenu zagradu \( ] \) sa desne strane, sto znaci da je \( 0 \) <strong>ukljuceno</strong> u skup. Da je pisalo \( (-3, 0) \) sa otvorenom zagradom, tacka \( x = 0 \) ne bi pripadala skupu i odgovor ne bi bio B.</p>
      </details>
    </div>
  </div>
</div>

<!-- Key Insight -->
<div class="insight-box">
  <div class="label-text">Kljucni uvid</div>
  <p style="font-size:1.1rem; margin-bottom:10px;">Jednacina \( |2x+1| + x = 1 \) daje dva resenja: \( x = 0 \) i \( x = -2 \). Oba pripadaju intervalu \( (-3, 0] \), jer \( -3 < -2 < 0 \leq 0 \).</p>
  <div style="font-size:1.4rem; font-weight:800; color:#4ade80; margin-top:10px;">
    \( \{-2,\; 0\} \subset (-3,\; 0] \)
  </div>
</div>

<!-- Final Answer -->
<div class="final-answer-box">
  <div class="label-text">Konacan odgovor</div>
  <div class="answer-value">B) \( (-3,\, 0] \)</div>
  <p style="color:#94a3b8; margin-top:12px; font-size:0.95rem;">Resenja su \( x = 0 \) i \( x = -2 \), i oba pripadaju skupu \( (-3, 0] \).</p>
  <div class="options-row">
    <div class="option-card">
      <div class="opt-letter">(A)</div>
      <div class="opt-value">\((-1, 2]\)</div>
    </div>
    <div class="option-card correct">
      <div class="opt-letter">(B)</div>
      <div class="opt-value">\((-3, 0]\)</div>
    </div>
    <div class="option-card">
      <div class="opt-letter">(C)</div>
      <div class="opt-value">\([0, 3)\)</div>
    </div>
    <div class="option-card">
      <div class="opt-letter">(D)</div>
      <div class="opt-value">\((-4, -1]\)</div>
    </div>
  </div>
</div>

<!-- Common Pitfalls -->
<div class="card">
  <div class="card-title"><span class="icon">‚ö†Ô∏è</span><span class="pink">Ceste greske</span></div>
  <div class="pitfall-item">
    <p><strong>Zaboravljanje provere uslova:</strong> Kod jednacina sa apsolutnom vrednoscu, svako resenje mora da zadovolji uslov slucaja u kome je dobijeno. Ako se to ne proveri, mogu se pojaviti lazna (sporedna) resenja.</p>
  </div>
  <div class="pitfall-item">
    <p><strong>Greska pri skidanju apsolutne vrednosti:</strong> Kada je izraz negativan, \( |a| = -a \), ne \( a \). Cesta greska je pisati \( |2x+1| = 2x+1 \) za sve vrednosti \( x \), sto je tacno samo za \( x \geq -\frac{1}{2} \).</p>
  </div>
</div>

<!-- Optional Challenge -->
<div class="card">
  <div class="card-title"><span class="icon">üèÜ</span><span class="purple">Dodatni izazov</span></div>
  <p>Resiti jednacinu \( |3x - 2| + 2x = 5 \) i odrediti zbir svih resenja.</p>
  <details>
    <summary>üí° Nagovestaj</summary>
    <p>Kriticna tacka je \( x = \frac{2}{3} \). Razmotrite slucaj \( x \geq \frac{2}{3} \) (dobija se \( 5x - 2 = 5 \), tj. \( x = \frac{7}{5} \)) i slucaj \( x < \frac{2}{3} \) (dobija se \( -x + 2 = 5 \), tj. \( x = -3 \)). Proverite oba uslova i nadjite zbir!</p>
  </details>
</div>

<script>
(() => {
  const canvas = document.getElementById('graphCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  // Mathematical bounds
  const xMin = -4.5;
  const xMax = 3.5;
  const yMin = -1.5;
  const yMax = 6;

  const marginLeft = 55;
  const marginRight = 25;
  const marginTop = 25;
  const marginBottom = 55;
  const plotW = W - marginLeft - marginRight;
  const plotH = H - marginTop - marginBottom;

  function toCanvasX(x) {
    return marginLeft + ((x - xMin) / (xMax - xMin)) * plotW;
  }
  function toCanvasY(y) {
    return marginTop + ((yMax - y) / (yMax - yMin)) * plotH;
  }
  function fromCanvasX(cx) {
    return xMin + ((cx - marginLeft) / plotW) * (xMax - xMin);
  }

  function f(x) {
    return Math.abs(2 * x + 1) + x;
  }

  // Slider state
  let sliderX = -2;
  let dragging = false;
  const sliderY = H - 20;
  const sliderTrackY = sliderY;

  function draw() {
    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Grid lines
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (let x = Math.ceil(xMin); x <= Math.floor(xMax); x++) {
      const cx = toCanvasX(x);
      ctx.beginPath();
      ctx.moveTo(cx, marginTop);
      ctx.lineTo(cx, marginTop + plotH);
      ctx.stroke();
    }
    for (let y = Math.ceil(yMin); y <= Math.floor(yMax); y++) {
      const cy = toCanvasY(y);
      ctx.beginPath();
      ctx.moveTo(marginLeft, cy);
      ctx.lineTo(marginLeft + plotW, cy);
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    // X-axis
    const xAxisY = toCanvasY(0);
    ctx.beginPath();
    ctx.moveTo(marginLeft, xAxisY);
    ctx.lineTo(marginLeft + plotW, xAxisY);
    ctx.stroke();
    // Y-axis
    const yAxisX = toCanvasX(0);
    ctx.beginPath();
    ctx.moveTo(yAxisX, marginTop);
    ctx.lineTo(yAxisX, marginTop + plotH);
    ctx.stroke();

    // Tick labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px "Segoe UI", system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    for (let x = Math.ceil(xMin); x <= Math.floor(xMax); x++) {
      if (x === 0) continue;
      ctx.fillText(x.toString(), toCanvasX(x), xAxisY + 6);
    }
    ctx.textAlign = 'right';
    ctx.textBaseline = 'middle';
    for (let y = Math.ceil(yMin); y <= Math.floor(yMax); y++) {
      if (y === 0) continue;
      ctx.fillText(y.toString(), yAxisX - 8, toCanvasY(y));
    }

    // Draw y = 1 (horizontal line)
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2;
    ctx.setLineDash([8, 5]);
    ctx.beginPath();
    ctx.moveTo(marginLeft, toCanvasY(1));
    ctx.lineTo(marginLeft + plotW, toCanvasY(1));
    ctx.stroke();
    ctx.setLineDash([]);

    // Label y = 1
    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 13px "Segoe UI", system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.textBaseline = 'bottom';
    ctx.fillText('y = 1', marginLeft + plotW - 45, toCanvasY(1) - 5);

    // Draw y = |2x + 1| + x
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    let started = false;
    for (let px = marginLeft; px <= marginLeft + plotW; px++) {
      const x = fromCanvasX(px);
      const y = f(x);
      const cy = toCanvasY(y);
      if (cy >= marginTop && cy <= marginTop + plotH) {
        if (!started) {
          ctx.moveTo(px, cy);
          started = true;
        } else {
          ctx.lineTo(px, cy);
        }
      }
    }
    ctx.stroke();

    // Label the function
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 13px "Segoe UI", system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.textBaseline = 'top';
    ctx.fillText('y = |2x + 1| + x', toCanvasX(1.2), toCanvasY(f(1.2)) - 18);

    // Mark the critical point x = -0.5 on x-axis
    ctx.fillStyle = '#94a3b8';
    ctx.font = '11px "Segoe UI", system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    var critPx = toCanvasX(-0.5);
    ctx.setLineDash([3, 3]);
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(critPx, xAxisY - 4);
    ctx.lineTo(critPx, xAxisY + 4);
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillText('-1/2', critPx, xAxisY + 6);

    // Mark solution points with glow
    var solutions = [
      { x: 0, label: 'x = 0' },
      { x: -2, label: 'x = -2' }
    ];
    solutions.forEach(function(sol) {
      var sx = toCanvasX(sol.x);
      var sy = toCanvasY(1);

      // Glow
      ctx.shadowColor = '#4ade80';
      ctx.shadowBlur = 18;
      ctx.beginPath();
      ctx.arc(sx, sy, 7, 0, Math.PI * 2);
      ctx.fillStyle = '#4ade80';
      ctx.fill();
      ctx.shadowBlur = 0;

      // Inner dot
      ctx.beginPath();
      ctx.arc(sx, sy, 5, 0, Math.PI * 2);
      ctx.fillStyle = '#4ade80';
      ctx.fill();

      // Label
      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 13px "Segoe UI", system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'bottom';
      ctx.fillText(sol.label, sx, sy - 12);
    });

    // Slider track
    var trackLeft = toCanvasX(xMin + 0.3);
    var trackRight = toCanvasX(xMax - 0.3);
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(trackLeft, sliderTrackY);
    ctx.lineTo(trackRight, sliderTrackY);
    ctx.stroke();

    // Slider handle
    var sliderPx = toCanvasX(sliderX);
    sliderPx = Math.max(trackLeft, Math.min(trackRight, sliderPx));

    // Vertical dashed line from slider to curve
    var sliderFy = f(sliderX);
    var curveY = toCanvasY(sliderFy);
    if (curveY >= marginTop && curveY <= marginTop + plotH) {
      ctx.strokeStyle = 'rgba(244, 114, 182, 0.4)';
      ctx.lineWidth = 1;
      ctx.setLineDash([4, 4]);
      ctx.beginPath();
      ctx.moveTo(sliderPx, sliderTrackY - 10);
      ctx.lineTo(sliderPx, curveY);
      ctx.stroke();
      ctx.setLineDash([]);

      // Point on curve
      ctx.beginPath();
      ctx.arc(sliderPx, curveY, 4, 0, Math.PI * 2);
      ctx.fillStyle = '#f472b6';
      ctx.fill();
    }

    // Slider handle circle
    ctx.beginPath();
    ctx.arc(sliderPx, sliderTrackY, 8, 0, Math.PI * 2);
    ctx.fillStyle = '#f472b6';
    ctx.fill();
    ctx.strokeStyle = '#0c1222';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Display value
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 12px "Courier New", monospace';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'bottom';
    var displayVal = 'x = ' + sliderX.toFixed(1).replace('.', ',') + '  |  f(x) = ' + sliderFy.toFixed(2).replace('.', ',');
    ctx.fillText(displayVal, sliderPx, sliderTrackY - 14);
  }

  draw();

  function getSliderXFromEvent(e) {
    var rect = canvas.getBoundingClientRect();
    var scaleX = W / rect.width;
    var cx;
    if (e.touches) {
      cx = (e.touches[0].clientX - rect.left) * scaleX;
    } else {
      cx = (e.clientX - rect.left) * scaleX;
    }
    var val = fromCanvasX(cx);
    return Math.max(xMin + 0.3, Math.min(xMax - 0.3, val));
  }

  function isNearSlider(e) {
    var rect = canvas.getBoundingClientRect();
    var scaleX = W / rect.width;
    var scaleY = H / rect.height;
    var cx, cy;
    if (e.touches) {
      cx = (e.touches[0].clientX - rect.left) * scaleX;
      cy = (e.touches[0].clientY - rect.top) * scaleY;
    } else {
      cx = (e.clientX - rect.left) * scaleX;
      cy = (e.clientY - rect.top) * scaleY;
    }
    var sliderPx = toCanvasX(sliderX);
    return Math.abs(cx - sliderPx) < 20 && Math.abs(cy - sliderTrackY) < 20;
  }

  canvas.addEventListener('mousedown', function(e) {
    if (isNearSlider(e)) {
      dragging = true;
    }
  });
  canvas.addEventListener('mousemove', function(e) {
    if (dragging) {
      sliderX = getSliderXFromEvent(e);
      draw();
    }
  });
  canvas.addEventListener('mouseup', function() { dragging = false; });
  canvas.addEventListener('mouseleave', function() { dragging = false; });

  canvas.addEventListener('touchstart', function(e) {
    if (isNearSlider(e)) {
      dragging = true;
      e.preventDefault();
    }
  });
  canvas.addEventListener('touchmove', function(e) {
    if (dragging) {
      sliderX = getSliderXFromEvent(e);
      draw();
      e.preventDefault();
    }
  });
  canvas.addEventListener('touchend', function() { dragging = false; });

  // Step click interactivity
  document.querySelectorAll('.step-container').forEach(function(el) {
    el.addEventListener('click', function() {
      document.querySelectorAll('.step-container').forEach(function(s) {
        s.classList.remove('active');
      });
      el.classList.add('active');
    });
  });
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Jednacina sa apsolutnom vrednoscu |2x + 1| + x = 1",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["apsolutna vrednost", "linearne jednacine", "intervali", "resavanje po slucajevima"]
}
BRAINSPARK_META-->