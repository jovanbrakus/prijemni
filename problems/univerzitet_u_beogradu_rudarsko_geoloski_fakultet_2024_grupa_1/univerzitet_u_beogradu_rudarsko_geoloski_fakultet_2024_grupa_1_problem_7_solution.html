<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nejednačina sa apsolutnom vrednošću</title>
<script type="text/info" id="logic-scratchpad">
Problem: |2x + 1| - x ≤ 5
Rewrite as: |2x + 1| ≤ x + 5

First, note that the right side x + 5 must be non-negative for any solution to exist,
so x + 5 ≥ 0 → x ≥ -5. But we'll get tighter bounds from the cases.

Case 1: 2x + 1 ≥ 0, i.e., x ≥ -1/2
  |2x + 1| = 2x + 1
  2x + 1 - x ≤ 5
  x + 1 ≤ 5
  x ≤ 4
  Combined with x ≥ -1/2: x ∈ [-1/2, 4]

Case 2: 2x + 1 < 0, i.e., x < -1/2
  |2x + 1| = -(2x + 1) = -2x - 1
  -2x - 1 - x ≤ 5
  -3x - 1 ≤ 5
  -3x ≤ 6
  x ≥ -2  (dividing by -3, flip inequality)
  Combined with x < -1/2: x ∈ [-2, -1/2)

Union of Case 1 and Case 2:
  [-2, -1/2) ∪ [-1/2, 4] = [-2, 4]

Answer: [-2, 4]
This matches option (C). ✓

Verification:
  x = -2: |2(-2)+1| - (-2) = |-3| + 2 = 3 + 2 = 5 ≤ 5 ✓ (boundary)
  x = 4:  |2(4)+1| - 4 = |9| - 4 = 9 - 4 = 5 ≤ 5 ✓ (boundary)
  x = 0:  |0+1| - 0 = 1 ≤ 5 ✓ (interior)
  x = -3: |2(-3)+1| - (-3) = |-5| + 3 = 5 + 3 = 8 > 5 ✗ (outside)
  x = 5:  |2(5)+1| - 5 = 11 - 5 = 6 > 5 ✗ (outside)
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 28px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 22px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.card h2 {
  color: #60a5fa;
  font-size: 1.35rem;
  margin-bottom: 14px;
}

.card h3 {
  color: #e2e8f0;
  font-size: 1.1rem;
  margin-bottom: 10px;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 100px;
  text-align: center;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.05rem;
  font-weight: 600;
}

.plan-card {
  border-left: 3px solid #a78bfa;
}

.plan-card p {
  color: #cbd5e1;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  font-size: 1.05rem;
  padding: 8px 0;
  user-select: none;
}

details summary:hover {
  color: #93c5fd;
}

details[open] summary {
  margin-bottom: 10px;
}

details .detail-content {
  padding: 10px 16px;
  color: #cbd5e1;
}

details .detail-content ul {
  list-style: none;
  padding: 0;
}

details .detail-content ul li {
  padding: 6px 0;
  border-bottom: 1px solid rgba(51,65,85,0.5);
}

details .detail-content ul li:last-child {
  border-bottom: none;
}

.canvas-container {
  text-align: center;
  margin: 16px 0;
}

.canvas-container canvas {
  border-radius: 12px;
  border: 1px solid #334155;
  max-width: 100%;
  touch-action: none;
}

.canvas-hint {
  color: #64748b;
  font-size: 0.82rem;
  margin-top: 6px;
}

.step-container {
  display: flex;
  gap: 16px;
  align-items: flex-start;
  padding: 14px 0;
  border-left: 3px solid transparent;
  padding-left: 12px;
  cursor: pointer;
  transition: border-color 0.2s, background 0.2s;
  border-radius: 0 8px 8px 0;
}

.step-container:hover,
.step-container.active {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}

.step-badge {
  min-width: 28px;
  height: 28px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.85rem;
  color: #0f172a;
  flex-shrink: 0;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  margin-bottom: 6px;
}

.step-content p {
  color: #cbd5e1;
  margin-bottom: 8px;
}

.math-block {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 8px;
  padding: 12px 16px;
  margin: 8px 0;
  overflow-x: auto;
}

.note {
  color: #94a3b8;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 6px;
}

.checkpoint {
  background: rgba(167,139,250,0.08);
  border: 1px solid rgba(167,139,250,0.18);
  border-radius: 10px;
  padding: 12px 16px;
}

.checkpoint summary {
  color: #a78bfa;
  font-size: 0.95rem;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.12), rgba(167,139,250,0.12));
  border: 1px solid rgba(96,165,250,0.25);
  border-radius: 14px;
  padding: 24px;
  text-align: center;
  margin-bottom: 24px;
}

.insight-box h2 {
  color: #a78bfa;
}

.insight-box .big-formula {
  font-size: 1.3rem;
  margin: 14px 0;
  color: #e2e8f0;
}

.final-answer-card {
  border: 2px solid #34d399;
  background: linear-gradient(135deg, rgba(52,211,153,0.08), rgba(74,222,128,0.05));
}

.final-answer-card h2 {
  color: #4ade80;
}

.final-answer-text {
  font-size: 1.5rem;
  font-weight: 700;
  color: #4ade80;
  text-align: center;
  margin: 16px 0;
}

.options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 16px 0;
}

.option-card {
  background: rgba(51,65,85,0.5);
  border: 1px solid #475569;
  border-radius: 10px;
  padding: 10px 20px;
  text-align: center;
  min-width: 90px;
}

.option-card.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.12);
}

.option-card .opt-label {
  font-weight: 700;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.option-card.correct .opt-label {
  color: #4ade80;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.92rem;
  margin-top: 12px;
  padding: 10px 14px;
  background: rgba(51,65,85,0.3);
  border-radius: 8px;
}

.pitfall-box {
  border-left: 3px solid #e09468;
}

.pitfall-box h2 {
  color: #e09468;
}

.pitfall-box ul {
  list-style: disc;
  padding-left: 20px;
  color: #cbd5e1;
}

.pitfall-box ul li {
  margin-bottom: 6px;
}

.challenge-card {
  border-left: 3px solid #f472b6;
}

.challenge-card h2 {
  color: #f472b6;
}

.case-label {
  display: inline-block;
  background: rgba(96,165,250,0.15);
  border: 1px solid rgba(96,165,250,0.25);
  border-radius: 6px;
  padding: 2px 10px;
  font-weight: 700;
  color: #60a5fa;
  font-size: 0.9rem;
  margin-bottom: 8px;
}

@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .given-grid { gap: 8px; }
  .given-item { min-width: 80px; padding: 8px 12px; }
  .step-container { gap: 10px; }
  .options-row { gap: 8px; }
  .option-card { min-width: 70px; padding: 8px 14px; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Nejednačina sa apsolutnom vrednošću</h1>
  <p class="subtitle">Algebra — rešavanje nejednačina sa apsolutnom vrednošću razdvajanjem na slučajeve</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Skup svih rešenja nejednačine \( |2x + 1| - x \leq 5 \) u skupu realnih brojeva je:</p>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">prazan skup</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\((-2, +\infty)\)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\([-2, 4]\)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\((-\infty, 3]\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan rešavanja</h2>
    <p>Rešićemo nejednačinu razdvajanjem na dva slučaja u zavisnosti od znaka izraza pod apsolutnom vrednošću \( 2x + 1 \). Potom ćemo uniju dobijenih skupova uporediti sa ponuđenim odgovorima.</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Ključne formule i teoreme</summary>
      <div class="detail-content">
        <ul>
          <li><strong>Definicija apsolutne vrednosti:</strong>
            \[ |a| = \begin{cases} a, & \text{ako } a \geq 0 \\ -a, & \text{ako } a < 0 \end{cases} \]
          </li>
          <li><strong>Rešavanje nejednačina sa apsolutnom vrednošću:</strong> Nejednačinu oblika \( |f(x)| \leq g(x) \) rešavamo razdvajanjem na dva slučaja prema znaku izraza \( f(x) \), a zatim ujedinjujemo dobijene skupove rešenja.</li>
          <li><strong>Alternativni pristup:</strong> Ako je \( g(x) \geq 0 \), nejednačina \( |f(x)| \leq g(x) \) ekvivalentna je sistemu: \( -g(x) \leq f(x) \leq g(x) \).</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- Visual Aid / Interactive Diagram -->
  <div class="card">
    <h2>Grafički prikaz</h2>
    <p style="color:#94a3b8; margin-bottom:12px;">Grafici funkcija \( y = |2x+1| - x \) (plava) i \( y = 5 \) (zelena). Rešenje nejednačine je interval gde je plava kriva ispod ili na zelenoj.</p>
    <div class="canvas-container">
      <canvas id="graphCanvas" width="700" height="420"></canvas>
      <p class="canvas-hint">Prevucite miša po grafikonu da vidite vrednosti funkcije</p>
    </div>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <h2>Rešenje korak po korak</h2>

    <!-- Step 1 -->
    <div class="step-container" id="step1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <h3>Prepisujemo nejednačinu</h3>
        <p>Polazna nejednačina glasi:</p>
        <div class="math-block">
          \[ |2x + 1| - x \leq 5 \]
        </div>
        <p>Prebacujemo \( -x \) na desnu stranu:</p>
        <div class="math-block">
          \[ |2x + 1| \leq x + 5 \]
        </div>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container" id="step2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <h3>Određujemo kritičnu tačku</h3>
        <p>Izraz unutar apsolutne vrednosti je \( 2x + 1 \). On menja znak kad je:</p>
        <div class="math-block">
          \[ 2x + 1 = 0 \implies x = -\frac{1}{2} \]
        </div>
        <p>Razdvajamo analizu na dva slučaja: \( x \geq -\frac{1}{2} \) i \( x < -\frac{1}{2} \).</p>
      </div>
    </div>

    <!-- Step 3: Case 1 -->
    <div class="step-container" id="step3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <h3>Slučaj 1: \( x \geq -\frac{1}{2} \)</h3>
        <p><span class="case-label">Slučaj 1</span></p>
        <p>Kada je \( x \geq -\frac{1}{2} \), imamo \( 2x + 1 \geq 0 \), pa je \( |2x+1| = 2x + 1 \).</p>
        <div class="math-block">
          \[ 2x + 1 - x \leq 5 \]
        </div>
        <p>Pojednostavljujemo:</p>
        <div class="math-block">
          \[ x + 1 \leq 5 \]
        </div>
        <p>Oduzimamo 1 sa obe strane:</p>
        <div class="math-block">
          \[ x \leq 4 \]
        </div>
        <p>Kombinujemo sa uslovom \( x \geq -\frac{1}{2} \):</p>
        <div class="math-block">
          \[ x \in \left[-\frac{1}{2},\; 4\right] \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 1 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Koliko je \( |2 \cdot 4 + 1| - 4 \)?</summary>
      <div class="detail-content">
        <p>\( |9| - 4 = 9 - 4 = 5 \leq 5 \) — tačno na granici, dakle \( x = 4 \) pripada rešenju.</p>
      </div>
    </details>

    <!-- Step 4: Case 2 -->
    <div class="step-container" id="step4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <h3>Slučaj 2: \( x < -\frac{1}{2} \)</h3>
        <p><span class="case-label">Slučaj 2</span></p>
        <p>Kada je \( x < -\frac{1}{2} \), imamo \( 2x + 1 < 0 \), pa je \( |2x+1| = -(2x+1) = -2x - 1 \).</p>
        <div class="math-block">
          \[ -2x - 1 - x \leq 5 \]
        </div>
        <p>Sabiramo članove sa \( x \):</p>
        <div class="math-block">
          \[ -3x - 1 \leq 5 \]
        </div>
        <p>Dodajemo 1 na obe strane:</p>
        <div class="math-block">
          \[ -3x \leq 6 \]
        </div>
        <p>Delimo sa \( -3 \) i <strong>okrecemo znak</strong> nejednakosti:</p>
        <div class="math-block">
          \[ x \geq -2 \]
        </div>
        <p>Kombinujemo sa uslovom \( x < -\frac{1}{2} \):</p>
        <div class="math-block">
          \[ x \in \left[-2,\; -\frac{1}{2}\right) \]
        </div>
      </div>
    </div>

    <!-- Checkpoint 2 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Koliko je \( |2 \cdot (-2) + 1| - (-2) \)?</summary>
      <div class="detail-content">
        <p>\( |{-3}| + 2 = 3 + 2 = 5 \leq 5 \) — tačno na granici, dakle \( x = -2 \) pripada rešenju.</p>
      </div>
    </details>

    <!-- Step 5 -->
    <div class="step-container" id="step5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <h3>Ujedinjujemo skupove</h3>
        <p>Skup rešenja je unija rezultata iz oba slučaja:</p>
        <div class="math-block">
          \[ \left[-2,\; -\frac{1}{2}\right) \cup \left[-\frac{1}{2},\; 4\right] = [-2,\; 4] \]
        </div>
        <p class="note">Tačka \( x = -\frac{1}{2} \) pripada drugom intervalu, tako da je unija zatvoren interval \( [-2, 4] \).</p>
      </div>
    </div>

    <!-- Checkpoint 3 -->
    <details class="checkpoint">
      <summary>Proveri sebe: Da li \( x = -3 \) pripada skupu rešenja?</summary>
      <div class="detail-content">
        <p>\( |2 \cdot (-3) + 1| - (-3) = |-5| + 3 = 5 + 3 = 8 > 5 \). Ne, \( x = -3 \) ne zadovoljava nejednačinu.</p>
      </div>
    </details>

  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <h2>Ključni uvid</h2>
    <p style="color:#cbd5e1; margin-bottom:10px;">Oba slučaja daju intervale koji se savršeno nadovezuju u tački \( x = -\frac{1}{2} \), formirajući jedan zatvoren interval:</p>
    <div class="big-formula">
      \[ [-2,\; 4] \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer-card">
    <h2>Konačan odgovor</h2>
    <div class="final-answer-text">
      (C) \( [-2, 4] \)
    </div>
    <div class="options-row">
      <div class="option-card">
        <div class="opt-label">(A)</div>
        <div>prazan skup</div>
      </div>
      <div class="option-card">
        <div class="opt-label">(B)</div>
        <div>\((-2, +\infty)\)</div>
      </div>
      <div class="option-card correct">
        <div class="opt-label">(C)</div>
        <div>\([-2, 4]\)</div>
      </div>
      <div class="option-card">
        <div class="opt-label">(D)</div>
        <div>\((-\infty, 3]\)</div>
      </div>
    </div>
    <div class="verification-note">
      <strong>Verifikacija:</strong> Proveravamo granične tačke: za \( x = -2 \): \( |{-3}| + 2 = 5 \leq 5 \) i za \( x = 4 \): \( |9| - 4 = 5 \leq 5 \). Obe granične vrednosti zadovoljavaju nejednačinu sa znakom jednakosti, što potvrđuje da su obe uključene (zatvoren interval). Tačka van intervala, npr. \( x = 5 \): \( |11| - 5 = 6 > 5 \) — ne zadovoljava.
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfall-box">
    <h2>Česte greške</h2>
    <ul>
      <li><strong>Zaboravljeno okretanje znaka nejednakosti:</strong> Kada u Slučaju 2 delimo sa \( -3 \), neophodno je okrenuti znak nejednakosti (\( \leq \) postaje \( \geq \)). Ako se ovo preskoči, dobija se pogrešan interval \( x \leq -2 \) umesto \( x \geq -2 \).</li>
      <li><strong>Otvoreni umesto zatvoreni interval:</strong> Ponuđeni odgovor (B) sadrži \( (-2, +\infty) \) sa otvorenom zagradom kod \( -2 \). Provera pokazuje da \( x = -2 \) zadovoljava nejednačinu, pa interval mora biti zatvoren sa obe strane — \( [-2, 4] \).</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Kako bi izgledao skup rešenja nejednačine \( |2x + 1| - x \leq k \) u zavisnosti od parametra \( k \)?</p>
    <details>
      <summary>Nagoveštaj</summary>
      <div class="detail-content">
        <p>Primeni isti postupak razdvajanja na slučajeve. Za Slučaj 1 dobićeš \( x \leq k - 1 \), a za Slučaj 2 dobićeš \( x \geq -\frac{k+1}{3} \). Razmisli za koje vrednosti \( k \) rešenje postoji (tj. kada je levi kraj manji od desnog).</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('graphCanvas');
  const ctx = canvas.getContext('2d');

  const W = canvas.width;
  const H = canvas.height;

  // Coordinate system: x from -4 to 6, y from -2 to 10
  const xMin = -4, xMax = 6;
  const yMin = -2, yMax = 10;
  const padL = 50, padR = 20, padT = 20, padB = 40;
  const plotW = W - padL - padR;
  const plotH = H - padT - padB;

  function toCanvasX(x) { return padL + (x - xMin) / (xMax - xMin) * plotW; }
  function toCanvasY(y) { return padT + (yMax - y) / (yMax - yMin) * plotH; }
  function fromCanvasX(cx) { return xMin + (cx - padL) / plotW * (xMax - xMin); }

  function f(x) { return Math.abs(2 * x + 1) - x; }

  let hoverX = null;

  function draw() {
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.fillRect(0, 0, W, H);

    // Grid
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (let x = Math.ceil(xMin); x <= xMax; x++) {
      const cx = toCanvasX(x);
      ctx.beginPath(); ctx.moveTo(cx, padT); ctx.lineTo(cx, H - padB); ctx.stroke();
    }
    for (let y = Math.ceil(yMin); y <= yMax; y++) {
      const cy = toCanvasY(y);
      ctx.beginPath(); ctx.moveTo(padL, cy); ctx.lineTo(W - padR, cy); ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 2;
    // x-axis
    const y0 = toCanvasY(0);
    ctx.beginPath(); ctx.moveTo(padL, y0); ctx.lineTo(W - padR, y0); ctx.stroke();
    // y-axis
    const x0 = toCanvasX(0);
    ctx.beginPath(); ctx.moveTo(x0, padT); ctx.lineTo(x0, H - padB); ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#64748b';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    for (let x = Math.ceil(xMin); x <= xMax; x++) {
      if (x === 0) continue;
      ctx.fillText(x.toString(), toCanvasX(x), y0 + 16);
    }
    ctx.textAlign = 'right';
    for (let y = Math.ceil(yMin); y <= yMax; y++) {
      if (y === 0) continue;
      ctx.fillText(y.toString(), x0 - 8, toCanvasY(y) + 4);
    }
    ctx.fillText('0', x0 - 8, y0 + 16);

    // Shade solution region [-2, 4] below y = 5
    ctx.fillStyle = 'rgba(74,222,128,0.08)';
    ctx.beginPath();
    const steps = 300;
    const solLeft = -2, solRight = 4;
    ctx.moveTo(toCanvasX(solLeft), toCanvasY(5));
    for (let i = 0; i <= steps; i++) {
      const x = solLeft + (solRight - solLeft) * i / steps;
      const y = f(x);
      ctx.lineTo(toCanvasX(x), toCanvasY(y));
    }
    ctx.lineTo(toCanvasX(solRight), toCanvasY(5));
    ctx.closePath();
    ctx.fill();

    // Draw y = 5 (green dashed line)
    ctx.strokeStyle = '#34d399';
    ctx.lineWidth = 2;
    ctx.setLineDash([8, 5]);
    ctx.beginPath();
    ctx.moveTo(padL, toCanvasY(5));
    ctx.lineTo(W - padR, toCanvasY(5));
    ctx.stroke();
    ctx.setLineDash([]);

    // Label y = 5
    ctx.fillStyle = '#34d399';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('y = 5', W - padR - 42, toCanvasY(5) - 8);

    // Draw f(x) = |2x+1| - x (blue)
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    let first = true;
    for (let i = 0; i <= steps; i++) {
      const x = xMin + (xMax - xMin) * i / steps;
      const y = f(x);
      const cx = toCanvasX(x);
      const cy = toCanvasY(y);
      if (cy < padT - 10 || cy > H - padB + 10) { first = true; continue; }
      if (first) { ctx.moveTo(cx, cy); first = false; }
      else ctx.lineTo(cx, cy);
    }
    ctx.stroke();

    // Label f(x)
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('y = |2x+1| − x', toCanvasX(3.2), toCanvasY(f(3.2)) - 12);

    // Mark intersection points (-2, 5) and (4, 5)
    const pts = [[-2, 5], [4, 5]];
    pts.forEach(function(pt) {
      const cx = toCanvasX(pt[0]);
      const cy = toCanvasY(pt[1]);
      // Glow
      const grad = ctx.createRadialGradient(cx, cy, 0, cx, cy, 14);
      grad.addColorStop(0, 'rgba(74,222,128,0.5)');
      grad.addColorStop(1, 'rgba(74,222,128,0)');
      ctx.fillStyle = grad;
      ctx.beginPath(); ctx.arc(cx, cy, 14, 0, 2 * Math.PI); ctx.fill();
      // Dot
      ctx.fillStyle = '#4ade80';
      ctx.beginPath(); ctx.arc(cx, cy, 5, 0, 2 * Math.PI); ctx.fill();
      ctx.strokeStyle = '#0f172a';
      ctx.lineWidth = 1.5;
      ctx.stroke();
      // Label
      ctx.fillStyle = '#4ade80';
      ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('(' + pt[0] + ', ' + pt[1] + ')', cx, cy - 14);
    });

    // Mark critical point x = -0.5 on curve
    const critY = f(-0.5);
    const critCx = toCanvasX(-0.5);
    const critCy = toCanvasY(critY);
    ctx.fillStyle = '#a78bfa';
    ctx.beginPath(); ctx.arc(critCx, critCy, 4, 0, 2 * Math.PI); ctx.fill();
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('x = −0,5', critCx, critCy + 16);
    ctx.fillText('min = 1,5', critCx, critCy + 28);

    // Solution interval on x-axis
    const solY0 = y0 + 4;
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(toCanvasX(-2), solY0);
    ctx.lineTo(toCanvasX(4), solY0);
    ctx.stroke();
    // Closed endpoints
    ctx.fillStyle = '#4ade80';
    ctx.beginPath(); ctx.arc(toCanvasX(-2), solY0, 4, 0, 2 * Math.PI); ctx.fill();
    ctx.beginPath(); ctx.arc(toCanvasX(4), solY0, 4, 0, 2 * Math.PI); ctx.fill();

    // Hover crosshair
    if (hoverX !== null && hoverX >= xMin && hoverX <= xMax) {
      const hx = toCanvasX(hoverX);
      const hy = f(hoverX);
      const hcy = toCanvasY(hy);

      // Vertical line
      ctx.strokeStyle = 'rgba(226,232,240,0.2)';
      ctx.lineWidth = 1;
      ctx.setLineDash([3, 3]);
      ctx.beginPath(); ctx.moveTo(hx, padT); ctx.lineTo(hx, H - padB); ctx.stroke();
      ctx.setLineDash([]);

      // Point on curve
      if (hcy >= padT && hcy <= H - padB) {
        ctx.fillStyle = '#f472b6';
        ctx.beginPath(); ctx.arc(hx, hcy, 4, 0, 2 * Math.PI); ctx.fill();

        // Tooltip
        const xVal = hoverX.toFixed(2).replace('.', ',');
        const yVal = hy.toFixed(2).replace('.', ',');
        const text = 'x = ' + xVal + '  f(x) = ' + yVal;
        ctx.font = '12px Segoe UI, system-ui, sans-serif';
        const tw = ctx.measureText(text).width;
        const tx = Math.min(Math.max(hx - tw / 2 - 6, padL), W - padR - tw - 12);
        const ty = Math.max(hcy - 28, padT + 4);
        ctx.fillStyle = 'rgba(15,23,42,0.85)';
        ctx.fillRect(tx, ty, tw + 12, 20);
        ctx.strokeStyle = '#475569';
        ctx.lineWidth = 1;
        ctx.strokeRect(tx, ty, tw + 12, 20);
        ctx.fillStyle = '#f472b6';
        ctx.fillText(text, tx + 6, ty + 14);
      }
    }
  }

  function handleMove(clientX) {
    const rect = canvas.getBoundingClientRect();
    const scaleX = W / rect.width;
    const cx = (clientX - rect.left) * scaleX;
    hoverX = fromCanvasX(cx);
    draw();
  }

  canvas.addEventListener('mousemove', function(e) { handleMove(e.clientX); });
  canvas.addEventListener('touchmove', function(e) {
    e.preventDefault();
    if (e.touches.length > 0) handleMove(e.touches[0].clientX);
  });
  canvas.addEventListener('mouseleave', function() { hoverX = null; draw(); });
  canvas.addEventListener('touchend', function() { hoverX = null; draw(); });

  draw();

  // Step click highlighting
  document.querySelectorAll('.step-container').forEach(function(el) {
    el.addEventListener('click', function() {
      document.querySelectorAll('.step-container').forEach(function(s) { s.classList.remove('active'); });
      el.classList.toggle('active');
    });
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Nejednačina sa apsolutnom vrednošću |2x+1| - x ≤ 5",
  "subject": "math",
  "unit": "algebra",
  "topic_tags": ["apsolutna vrednost", "nejednačine", "intervali", "razdvajanje na slučajeve"]
}
BRAINSPARK_META-->