<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tangenta elipse - odredjivanje parametra n</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
  Problem: Find positive value of parameter n such that y = x + n is tangent to
  the ellipse x^2/12 + y^2/4 = 1, and determine which interval it belongs to.

  Step 1: Substitute y = x + n into the ellipse equation.
    x^2/12 + (x + n)^2/4 = 1

  Step 2: Multiply through by 12 to clear denominators.
    x^2 + 3(x + n)^2 = 12
    x^2 + 3(x^2 + 2nx + n^2) = 12
    x^2 + 3x^2 + 6nx + 3n^2 = 12
    4x^2 + 6nx + 3n^2 - 12 = 0

  Step 3: For tangency, the discriminant must equal 0.
    D = (6n)^2 - 4 * 4 * (3n^2 - 12) = 0
    D = 36n^2 - 16(3n^2 - 12) = 0
    D = 36n^2 - 48n^2 + 192 = 0
    D = -12n^2 + 192 = 0
    12n^2 = 192
    n^2 = 16
    n = +/- 4

  Step 4: Since we need the positive value: n = 4.

  Step 5: Check which interval: 4 belongs to [4, 6).
    Answer: B) [4, 6)

  Verification: With n = 4, line y = x + 4.
    Substitute: x^2/12 + (x+4)^2/4 = 1
    x^2/12 + (x^2 + 8x + 16)/4 = 1
    Multiply by 12: x^2 + 3x^2 + 24x + 48 = 12
    4x^2 + 24x + 36 = 0
    x^2 + 6x + 9 = 0
    (x + 3)^2 = 0
    x = -3, y = -3 + 4 = 1
    Check on ellipse: 9/12 + 1/4 = 3/4 + 1/4 = 1. Correct!

  The tangent point is (-3, 1).
</script>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
}

.card-title {
  font-size: 1.3rem;
  color: #60a5fa;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.4rem;
}

.problem-statement {
  font-size: 1.15rem;
  line-height: 1.8;
}

.highlight-box {
  background: rgba(96, 165, 250, 0.1);
  border: 1px solid rgba(96, 165, 250, 0.3);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 16px 0;
  font-family: 'Courier New', monospace;
  font-size: 1.1rem;
  text-align: center;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 18px;
}

.given-item {
  background: rgba(51, 65, 85, 0.6);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 20px;
  font-size: 1rem;
  transition: all 0.3s ease;
  cursor: default;
}

.given-item.answer-option {
  /* static, no hover effects */
}

.given-item.answer-option.correct {
  background: rgba(52, 211, 153, 0.15);
  border-color: #34d399;
  color: #34d399;
  font-weight: 600;
}

.plan-text {
  color: #a78bfa;
  font-size: 1.05rem;
  font-style: italic;
}

details {
  margin: 12px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 8px 0;
  user-select: none;
}

details summary:hover {
  color: #93bbfc;
}

details .detail-content {
  padding: 12px 16px;
  background: rgba(30, 41, 59, 0.7);
  border-left: 3px solid #60a5fa;
  border-radius: 0 8px 8px 0;
  margin-top: 8px;
}

.step {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  align-items: flex-start;
}

.step-badge {
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  font-weight: 700;
  font-size: 0.85rem;
  min-width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-title {
  font-weight: 600;
  color: #f472b6;
  margin-bottom: 6px;
  font-size: 1.05rem;
}

.step-math {
  background: rgba(167, 139, 250, 0.1);
  border: 1px solid rgba(167, 139, 250, 0.25);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 10px 0;
  font-family: 'Courier New', monospace;
  text-align: center;
  font-size: 1.05rem;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.12), rgba(167, 139, 250, 0.12));
  border: 1px solid rgba(167, 139, 250, 0.35);
  border-radius: 16px;
  padding: 24px 28px;
  margin-bottom: 24px;
}

.insight-box .card-title {
  color: #a78bfa;
}

.final-answer-box {
  background: rgba(52, 211, 153, 0.08);
  border: 2px solid #34d399;
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin-bottom: 24px;
}

.final-answer-box .answer-label {
  color: #94a3b8;
  font-size: 1rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 12px;
}

.final-answer-box .answer-value {
  color: #4ade80;
  font-size: 2rem;
  font-weight: 700;
}

.final-answer-box .answer-option {
  color: #34d399;
  font-size: 1.2rem;
  margin-top: 8px;
}

.pitfall {
  display: flex;
  gap: 12px;
  align-items: flex-start;
  margin-bottom: 12px;
}

.pitfall-icon {
  color: #f472b6;
  font-weight: 700;
  font-size: 1.2rem;
  flex-shrink: 0;
}

.challenge-box {
  background: rgba(244, 114, 182, 0.08);
  border: 1px solid rgba(244, 114, 182, 0.3);
  border-radius: 16px;
  padding: 24px 28px;
}

.challenge-box .card-title {
  color: #f472b6;
}

canvas {
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  max-width: 100%;
  touch-action: none;
}

.canvas-wrapper {
  text-align: center;
}

.canvas-caption {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 10px;
  text-align: center;
}

.checkpoint details summary {
  color: #34d399;
  font-size: 0.95rem;
}

.checkpoint details .detail-content {
  border-left-color: #34d399;
}

@media (max-width: 700px) {
  h1 {
    font-size: 1.6rem;
  }
  .card {
    padding: 18px;
  }
  .given-grid {
    flex-direction: column;
  }
  .step {
    flex-direction: column;
    gap: 8px;
  }
  .step-badge {
    align-self: flex-start;
  }
  .final-answer-box .answer-value {
    font-size: 1.5rem;
  }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Tangenta elipse &mdash; odredjivanje parametra</h1>
  <p class="subtitle">Analiti훾ka geometrija &mdash; elipsa i uslov tangentnosti</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <div class="card-title"><span class="icon">&#x1F4CB;</span> Tekst zadatka</div>
    <div class="problem-statement">
      <p>Pozitivna vrednost parametra \( n \) za koju je prava \( y = x + n \) tangenta elipse</p>
      <div class="highlight-box">
        \[ \frac{x^2}{12} + \frac{y^2}{4} = 1 \]
      </div>
      <p>pripada intervalu:</p>
      <div class="given-grid">
        <div class="given-item answer-option" data-option="A">A) \([2,\; 4)\)</div>
        <div class="given-item answer-option correct" data-option="B">B) \([4,\; 6)\)</div>
        <div class="given-item answer-option" data-option="C">C) \([6,\; 8)\)</div>
        <div class="given-item answer-option" data-option="D">D) \([8,\; 10)\)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <div class="card-title"><span class="icon">&#x1F3AF;</span> Plan resavanja</div>
    <p class="plan-text">
      Uvrsticemo jednacinu prave \( y = x + n \) u jednacinu elipse. Dobicemo kvadratnu jednacinu po \( x \). Uslov tangentnosti zahteva da diskriminanta te jednacine bude jednaka nuli. Iz tog uslova nalazimo \( n \), biramo pozitivnu vrednost i proveravamo kojem intervalu pripada.
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <div class="card-title"><span class="icon">&#x1F4DA;</span> Podsetnik iz teorije</div>
    <details>
      <summary>Elipsa i uslov tangentnosti (klikni da otvoris)</summary>
      <div class="detail-content">
        <p><strong>Jednacina elipse u kanonskom obliku:</strong></p>
        <div class="step-math">
          \[ \frac{x^2}{a^2} + \frac{y^2}{b^2} = 1 \]
        </div>
        <p style="margin-top: 12px;">gde su \( a \) i \( b \) poluose elipse (\( a > b > 0 \) za elipsu izduzenu duz \( x \)-ose).</p>
        <p style="margin-top: 12px;"><strong>Uslov tangentnosti:</strong> Prava dodiruje elipsu (ili bilo koju krivu drugog reda) ako sistem jednacine prave i krive ima tacno jedno resenje. Kada se uvrstavanje prave u jednacinu krive svede na kvadratnu jednacinu, to znaci da <strong>diskriminanta mora biti nula</strong>: \( D = 0 \).</p>
        <p style="margin-top: 12px;"><strong>Formule za tangentu elipse:</strong> Za elipsu \( \frac{x^2}{a^2} + \frac{y^2}{b^2} = 1 \) i pravu \( y = kx + n \), uslov tangentnosti je:</p>
        <div class="step-math">
          \[ n^2 = a^2 k^2 + b^2 \]
        </div>
        <p style="margin-top: 12px;">Ovo je upravo uslov \( D = 0 \) u razvijenom obliku.</p>
      </div>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <div class="card-title"><span class="icon">&#x1F4CA;</span> Vizuelni prikaz</div>
    <div class="canvas-wrapper">
      <canvas id="diagram" width="700" height="500"></canvas>
    </div>
    <p class="canvas-caption">Elipsa \( \frac{x^2}{12} + \frac{y^2}{4} = 1 \) i tangenta \( y = x + 4 \) sa tackom dodira \( (-3,\; 1) \)</p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <div class="card-title"><span class="icon">&#x1F522;</span> Resenje korak po korak</div>

    <!-- Step 1 -->
    <div class="step">
      <div class="step-badge">1</div>
      <div class="step-content">
        <div class="step-title">Identifikujemo parametre elipse i prave</div>
        <p>Elipsa je data u kanonskom obliku:</p>
        <div class="step-math">
          \[ \frac{x^2}{12} + \frac{y^2}{4} = 1 \]
        </div>
        <p>Odavde citamo: \( a^2 = 12 \), \( b^2 = 4 \), tj. \( a = 2\sqrt{3} \), \( b = 2 \).</p>
        <p style="margin-top: 8px;">Prava je \( y = x + n \), pa je koeficijent pravca \( k = 1 \), a slobodan clan je \( n \) (parametar koji trazimo).</p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step">
      <div class="step-badge">2</div>
      <div class="step-content">
        <div class="step-title">Uvrstavanje prave u jednacinu elipse</div>
        <p>Zamenimo \( y = x + n \) u jednacinu elipse:</p>
        <div class="step-math">
          \[ \frac{x^2}{12} + \frac{(x + n)^2}{4} = 1 \]
        </div>
        <p>Pomnozimo obe strane sa \( 12 \) da bismo uklonili imenioce:</p>
        <div class="step-math">
          \[ x^2 + 3(x + n)^2 = 12 \]
        </div>
        <p>Razvijemo kvadrat binoma \( (x + n)^2 = x^2 + 2nx + n^2 \):</p>
        <div class="step-math">
          \[ x^2 + 3x^2 + 6nx + 3n^2 = 12 \]
        </div>
        <p>Sredimo:</p>
        <div class="highlight-box">
          \( 4x^2 + 6nx + (3n^2 - 12) = 0 \)
        </div>

        <div class="checkpoint">
          <details>
            <summary>Proveri sebe: Zasto mnozimo sa 12?</summary>
            <div class="detail-content">
              Mnozenje celom jednacinomm sa NZS imenilaca (ovde 12) je standardna tehnika za uklanjanje razlomaka. To nam daje "cistu" kvadratnu jednacinu po \( x \), na koju mozemo primeniti uslov diskriminante.
            </div>
          </details>
        </div>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step">
      <div class="step-badge">3</div>
      <div class="step-content">
        <div class="step-title">Postavljamo uslov tangentnosti: \( D = 0 \)</div>
        <p>Za kvadratnu jednacinu \( 4x^2 + 6nx + (3n^2 - 12) = 0 \), koeficijenti su:</p>
        <div class="step-math">
          \[ A = 4, \quad B = 6n, \quad C = 3n^2 - 12 \]
        </div>
        <p>Diskriminanta je:</p>
        <div class="step-math">
          \[ D = B^2 - 4AC = (6n)^2 - 4 \cdot 4 \cdot (3n^2 - 12) \]
        </div>
        <p>Racunamo:</p>
        <div class="step-math">
          \[ D = 36n^2 - 16(3n^2 - 12) = 36n^2 - 48n^2 + 192 = -12n^2 + 192 \]
        </div>

        <div class="checkpoint">
          <details>
            <summary>Proveri sebe: Zasto D = 0 znaci tangentnost?</summary>
            <div class="detail-content">
              <p>Kada sistem jednacine prave i elipse svedemo na kvadratnu jednacinu po \( x \):</p>
              <ul style="margin-left: 20px; margin-top: 8px;">
                <li>\( D > 0 \) &mdash; dva preseka (secica)</li>
                <li>\( D = 0 \) &mdash; jedan (dvostruki) presek (tangenta)</li>
                <li>\( D < 0 \) &mdash; nema preseka (prava ne sece elipsu)</li>
              </ul>
            </div>
          </details>
        </div>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step">
      <div class="step-badge">4</div>
      <div class="step-content">
        <div class="step-title">Resavamo jednacinu \( D = 0 \)</div>
        <p>Postavljamo:</p>
        <div class="step-math">
          \[ -12n^2 + 192 = 0 \]
        </div>
        <p>Resavamo po \( n^2 \):</p>
        <div class="step-math">
          \[ 12n^2 = 192 \quad \Longrightarrow \quad n^2 = 16 \quad \Longrightarrow \quad n = \pm 4 \]
        </div>
        <p>Posto trazimo <strong>pozitivnu</strong> vrednost parametra \( n \):</p>
        <div class="highlight-box">
          \( n = 4 \)
        </div>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step">
      <div class="step-badge">5</div>
      <div class="step-content">
        <div class="step-title">Odredjujemo interval</div>
        <p>Pozitivna vrednost je \( n = 4 \). Proveravamo ponudjene intervale:</p>
        <ul style="margin-left: 20px; margin-top: 8px;">
          <li>\([2,\; 4)\) &mdash; ne sadrzi 4, jer je interval <em>otvoren</em> sa desne strane</li>
          <li>\([4,\; 6)\) &mdash; <strong>sadrzi 4</strong>, jer je interval <em>zatvoren</em> sa leve strane</li>
        </ul>
        <p style="margin-top: 10px;">Znaci \( n = 4 \in [4,\; 6) \).</p>
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step">
      <div class="step-badge">6</div>
      <div class="step-content">
        <div class="step-title">Provera: nalazimo tacku dodira</div>
        <p>Za \( n = 4 \), prava je \( y = x + 4 \). Uvrstimo u jednacinu iz Koraka 2:</p>
        <div class="step-math">
          \[ 4x^2 + 6 \cdot 4 \cdot x + (3 \cdot 16 - 12) = 0 \]
        </div>
        <div class="step-math">
          \[ 4x^2 + 24x + 36 = 0 \quad \Longrightarrow \quad x^2 + 6x + 9 = 0 \quad \Longrightarrow \quad (x + 3)^2 = 0 \]
        </div>
        <p>Dvostruki koren: \( x = -3 \), pa \( y = -3 + 4 = 1 \).</p>
        <p style="margin-top: 8px;"><strong>Provera na elipsi:</strong></p>
        <div class="step-math">
          \[ \frac{(-3)^2}{12} + \frac{1^2}{4} = \frac{9}{12} + \frac{1}{4} = \frac{3}{4} + \frac{1}{4} = 1 \quad \checkmark \]
        </div>
        <p>Tacka \( (-3,\; 1) \) lezi na elipsi, i prava je dodiruje u tacno jednoj tacki &mdash; potvrdjeno da je tangenta.</p>

        <div class="checkpoint">
          <details>
            <summary>Proveri sebe: Zasto je dvostruki koren dokaz tangentnosti?</summary>
            <div class="detail-content">
              Dvostruki koren \( (x + 3)^2 = 0 \) znaci da postoji tacno jedna tacka preseka prave i elipse. Geometrijski, prava dodiruje elipsu u jednoj tacki &mdash; to je upravo definicija tangente.
            </div>
          </details>
        </div>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <div class="card-title"><span class="icon">&#x1F4A1;</span> Kljucni uvid</div>
    <p>Uslov tangentnosti prave \( y = kx + n \) na elipsu \( \frac{x^2}{a^2} + \frac{y^2}{b^2} = 1 \) se moze zapamtiti kao formula: \( n^2 = a^2 k^2 + b^2 \). U nasem slucaju: \( n^2 = 12 \cdot 1^2 + 4 = 16 \), odakle odmah sledi \( n = \pm 4 \). Ovaj pristup je brzi od razvijanja diskriminante, ali oba vode do istog rezultata. Takodje, obratite paznju da \( 4 \in [4,\; 6) \) jer je interval sa leve strane <strong>zatvoren</strong> &mdash; pazljivo citanje intervala je kljucno!</p>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <div class="answer-label">Konacan odgovor</div>
    <div class="answer-value">\( n = 4 \in [4,\; 6) \)</div>
    <div class="answer-option">Tacan odgovor je B) [4, 6)</div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <div class="card-title"><span class="icon">&#x26A0;&#xFE0F;</span> Ceste greske</div>
    <div class="pitfall">
      <span class="pitfall-icon">&#x2717;</span>
      <p><strong>Brkanje otvorenog i zatvorenog intervala:</strong> Vrednost \( n = 4 \) pripada intervalu \([4,\; 6)\), ali <em>ne</em> pripada intervalu \([2,\; 4)\) jer je ovaj sa desne strane otvoren. Mnogi ucenici pogresno biraju odgovor A jer ne obrate paznju na zagradu.</p>
    </div>
    <div class="pitfall">
      <span class="pitfall-icon">&#x2717;</span>
      <p><strong>Zaboraviti negativno resenje:</strong> Jednacina \( n^2 = 16 \) daje \( n = 4 \) i \( n = -4 \). Zadatak trazi <em>pozitivnu</em> vrednost, pa biramo \( n = 4 \). Medjutim, \( n = -4 \) takodje daje validnu tangentu (dodiruje elipsu u tacki \( (3,\; -1) \)).</p>
    </div>
    <div class="pitfall">
      <span class="pitfall-icon">&#x2717;</span>
      <p><strong>Greska pri mnozenju:</strong> Kada se \( (6n)^2 \) pogresno izracuna kao \( 6n^2 \) umesto \( 36n^2 \), ili kada se \( 4 \cdot 4 \) pomesa sa \( 4 \cdot 2 \), ceo proracun diskriminante postaje pogresan.</p>
    </div>
    <div class="pitfall">
      <span class="pitfall-icon">&#x2717;</span>
      <p><strong>Zamena uslova secice i tangente:</strong> Za tangentu je \( D = 0 \), a ne \( D > 0 \). Ako se postavi pogresan uslov, dobijaju se vrednosti \( n \) za koje prava <em>sece</em> elipsu u dve tacke, sto nije trazeno.</p>
    </div>
  </div>

  <!-- Optional Challenge -->
  <div class="challenge-box">
    <div class="card-title"><span class="icon">&#x1F3C6;</span> Dodatni izazov</div>
    <p>Za koju vrednost parametra \( k \) je prava \( y = kx + 6 \) tangenta iste elipse \( \frac{x^2}{12} + \frac{y^2}{4} = 1 \)?</p>
    <details>
      <summary>Pogledaj odgovor</summary>
      <div class="detail-content">
        <p>Koristimo formulu tangentnosti \( n^2 = a^2 k^2 + b^2 \):</p>
        <div class="step-math">
          \[ 36 = 12k^2 + 4 \quad \Longrightarrow \quad 12k^2 = 32 \quad \Longrightarrow \quad k^2 = \frac{8}{3} \quad \Longrightarrow \quad k = \pm \frac{2\sqrt{2}}{\sqrt{3}} = \pm \frac{2\sqrt{6}}{3} \]
        </div>
        <p style="margin-top: 8px;">Dakle, postoje dve tangente sa \( n = 6 \): jedna sa pozitivnim, druga sa negativnim koeficijentom pravca.</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('diagram');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  // Touch/mouse support for panning
  let offsetX = 0, offsetY = 0;
  let dragging = false;
  let lastPointer = null;

  function getPointerPos(e) {
    if (e.touches && e.touches.length > 0) {
      var rect = canvas.getBoundingClientRect();
      return { x: e.touches[0].clientX - rect.left, y: e.touches[0].clientY - rect.top };
    }
    return { x: e.offsetX, y: e.offsetY };
  }

  canvas.addEventListener('mousedown', function(e) { dragging = true; lastPointer = getPointerPos(e); });
  canvas.addEventListener('touchstart', function(e) { dragging = true; lastPointer = getPointerPos(e); e.preventDefault(); }, { passive: false });
  canvas.addEventListener('mousemove', function(e) {
    if (!dragging || !lastPointer) return;
    var p = getPointerPos(e);
    offsetX += p.x - lastPointer.x;
    offsetY += p.y - lastPointer.y;
    lastPointer = p;
    draw();
  });
  canvas.addEventListener('touchmove', function(e) {
    if (!dragging || !lastPointer) return;
    var p = getPointerPos(e);
    offsetX += p.x - lastPointer.x;
    offsetY += p.y - lastPointer.y;
    lastPointer = p;
    draw();
    e.preventDefault();
  }, { passive: false });
  canvas.addEventListener('mouseup', function() { dragging = false; lastPointer = null; });
  canvas.addEventListener('mouseleave', function() { dragging = false; lastPointer = null; });
  canvas.addEventListener('touchend', function() { dragging = false; lastPointer = null; });

  function draw() {
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Coordinate system: x in [-6, 6], y in [-4, 6]
    var xMin = -6, xMax = 6, yMin = -4, yMax = 6;
    var marginL = 50, marginR = 30, marginT = 30, marginB = 50;
    var plotW = W - marginL - marginR;
    var plotH = H - marginT - marginB;

    function toCanvasX(mx) {
      return marginL + (mx - xMin) / (xMax - xMin) * plotW + offsetX;
    }
    function toCanvasY(my) {
      return marginT + (yMax - my) / (yMax - yMin) * plotH + offsetY;
    }

    // Grid lines
    ctx.strokeStyle = 'rgba(148, 163, 184, 0.08)';
    ctx.lineWidth = 1;
    for (var gx = Math.ceil(xMin); gx <= Math.floor(xMax); gx++) {
      ctx.beginPath();
      ctx.moveTo(toCanvasX(gx), toCanvasY(yMin));
      ctx.lineTo(toCanvasX(gx), toCanvasY(yMax));
      ctx.stroke();
    }
    for (var gy = Math.ceil(yMin); gy <= Math.floor(yMax); gy++) {
      ctx.beginPath();
      ctx.moveTo(toCanvasX(xMin), toCanvasY(gy));
      ctx.lineTo(toCanvasX(xMax), toCanvasY(gy));
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(toCanvasX(xMin), toCanvasY(0));
    ctx.lineTo(toCanvasX(xMax), toCanvasY(0));
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(toCanvasX(0), toCanvasY(yMin));
    ctx.lineTo(toCanvasX(0), toCanvasY(yMax));
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    for (var gx2 = Math.ceil(xMin); gx2 <= Math.floor(xMax); gx2++) {
      if (gx2 === 0) continue;
      ctx.fillText(gx2.toString(), toCanvasX(gx2), toCanvasY(0) + 16);
    }
    ctx.textAlign = 'right';
    for (var gy2 = Math.ceil(yMin); gy2 <= Math.floor(yMax); gy2++) {
      if (gy2 === 0) continue;
      ctx.fillText(gy2.toString(), toCanvasX(0) - 8, toCanvasY(gy2) + 4);
    }
    ctx.textAlign = 'center';
    ctx.fillText('x', toCanvasX(xMax) - 5, toCanvasY(0) + 16);
    ctx.textAlign = 'right';
    ctx.fillText('y', toCanvasX(0) - 8, toCanvasY(yMax) + 14);

    // Draw the ellipse: x^2/12 + y^2/4 = 1  =>  a = sqrt(12) = 2*sqrt(3) ~ 3.464, b = 2
    var a = Math.sqrt(12);
    var b = 2;
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    for (var t = 0; t <= 2 * Math.PI + 0.01; t += 0.02) {
      var ex = a * Math.cos(t);
      var ey = b * Math.sin(t);
      if (t === 0) {
        ctx.moveTo(toCanvasX(ex), toCanvasY(ey));
      } else {
        ctx.lineTo(toCanvasX(ex), toCanvasY(ey));
      }
    }
    ctx.stroke();

    // Draw tangent line y = x + 4 (positive n)
    ctx.strokeStyle = '#34d399';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(toCanvasX(-6), toCanvasY(-6 + 4));
    ctx.lineTo(toCanvasX(2), toCanvasY(2 + 4));
    ctx.stroke();

    // Draw tangent line y = x - 4 (negative n)
    ctx.strokeStyle = 'rgba(244, 114, 182, 0.5)';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([8, 6]);
    ctx.beginPath();
    ctx.moveTo(toCanvasX(-2), toCanvasY(-2 - 4));
    ctx.lineTo(toCanvasX(6), toCanvasY(6 - 4));
    ctx.stroke();
    ctx.setLineDash([]);

    // Tangent point for n=4: (-3, 1)
    ctx.beginPath();
    ctx.arc(toCanvasX(-3), toCanvasY(1), 7, 0, 2 * Math.PI);
    ctx.fillStyle = '#34d399';
    ctx.fill();
    ctx.strokeStyle = '#0f172a';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Tangent point for n=-4: (3, -1)
    ctx.beginPath();
    ctx.arc(toCanvasX(3), toCanvasY(-1), 6, 0, 2 * Math.PI);
    ctx.fillStyle = '#f472b6';
    ctx.globalAlpha = 0.6;
    ctx.fill();
    ctx.globalAlpha = 1.0;
    ctx.strokeStyle = '#0f172a';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Labels
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';

    // Label for tangent point (-3, 1)
    ctx.fillStyle = '#4ade80';
    ctx.fillText('(\u22123, 1)', toCanvasX(-3) + 12, toCanvasY(1) - 8);

    // Label for tangent point (3, -1)
    ctx.fillStyle = '#f472b6';
    ctx.globalAlpha = 0.7;
    ctx.fillText('(3, \u22121)', toCanvasX(3) + 12, toCanvasY(-1) + 18);
    ctx.globalAlpha = 1.0;

    // Line labels
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';

    ctx.fillStyle = '#34d399';
    ctx.fillText('y = x + 4', toCanvasX(0.5), toCanvasY(5.2));

    ctx.fillStyle = '#f472b6';
    ctx.globalAlpha = 0.6;
    ctx.fillText('y = x \u2212 4', toCanvasX(4.2), toCanvasY(0.8));
    ctx.globalAlpha = 1.0;

    // Ellipse label
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText('x\u00B2/12 + y\u00B2/4 = 1', toCanvasX(a) + 8, toCanvasY(0.3) - 6);

    // Legend
    var legX = W - 200, legY = 20;
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';

    ctx.fillStyle = '#60a5fa';
    ctx.fillRect(legX, legY, 16, 3);
    ctx.fillText('Elipsa', legX + 22, legY + 5);

    ctx.fillStyle = '#34d399';
    ctx.fillRect(legX, legY + 18, 16, 3);
    ctx.fillText('Tangenta y = x + 4', legX + 22, legY + 23);

    ctx.fillStyle = '#f472b6';
    ctx.globalAlpha = 0.6;
    ctx.fillRect(legX, legY + 36, 16, 3);
    ctx.fillText('Tangenta y = x \u2212 4', legX + 22, legY + 41);
    ctx.globalAlpha = 1.0;

    ctx.fillStyle = '#34d399';
    ctx.beginPath();
    ctx.arc(legX + 8, legY + 57, 5, 0, 2 * Math.PI);
    ctx.fill();
    ctx.fillText('Tacka dodira', legX + 22, legY + 61);
  }

  draw();

  var resizeTimeout;
  window.addEventListener('resize', function() {
    clearTimeout(resizeTimeout);
    resizeTimeout = setTimeout(draw, 100);
  });
})();
</script>
</body>
</html>
<!--BRAINSPARK_META {"title":"Tangenta elipse - odredjivanje parametra n","subject":"math","unit":"analiti훾ka geometrija - elipsa","topic_tags":["elipsa","tangenta","diskriminanta","analiti훾ka geometrija","kvadratna jedna훾ina","intervali"]} BRAINSPARK_META-->