<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Peti clan rastuceg geometrijskog niza</title>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script type="text/info" id="logic-scratchpad">
Problem: Prvi clan rastuceg geometrijskog niza je 15, a zbir prvog, drugog i treceg clana je 105. Peti clan niza je:
(A) 480  (B) 300  (C) 120  (D) 240

Step 1: Identify the given information
  - a_1 = 15 (first term)
  - a_1 + a_2 + a_3 = 105 (sum of first three terms)
  - The geometric sequence is increasing (rastuci)
  - Find: a_5

Step 2: Express terms using common ratio q
  a_1 = 15
  a_2 = 15q
  a_3 = 15q^2

Step 3: Set up the equation from the sum condition
  15 + 15q + 15q^2 = 105
  15(1 + q + q^2) = 105
  1 + q + q^2 = 7
  q^2 + q - 6 = 0

Step 4: Solve the quadratic equation
  q^2 + q - 6 = 0
  Discriminant: D = 1 + 24 = 25
  q = (-1 +/- 5) / 2
  q_1 = (-1 + 5) / 2 = 2
  q_2 = (-1 - 5) / 2 = -3

Step 5: Determine the valid common ratio
  The sequence is increasing (rastuci) and a_1 = 15 > 0.
  For an increasing sequence with positive first term, we need q > 1.
  q = 2: a_1=15, a_2=30, a_3=60 -> increasing, YES
  q = -3: a_1=15, a_2=-45, a_3=135 -> not monotonically increasing, NO
  Therefore q = 2.

Step 6: Calculate a_5
  a_5 = a_1 * q^4 = 15 * 2^4 = 15 * 16 = 240

Step 7: Verification
  a_1 = 15, a_2 = 30, a_3 = 60, a_4 = 120, a_5 = 240
  Sum check: 15 + 30 + 60 = 105 ✓
  Increasing: 15 < 30 < 60 < 120 < 240 ✓

Answer: (D) 240
</script>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  font-weight: 700;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.card-title {
  font-size: 1.3rem;
  font-weight: 600;
  color: #60a5fa;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.4rem;
}

.problem-statement {
  border-left: 4px solid #a78bfa;
  font-size: 1.1rem;
}

.problem-statement .problem-text {
  margin-bottom: 20px;
}

.given-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 10px;
  margin-top: 16px;
}

.given-item {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 10px;
  padding: 10px 16px;
  text-align: center;
  font-size: 1.05rem;
}

.answer-option {
  cursor: default;
  transition: transform 0.15s;
}

.math-box {
  background: rgba(56, 189, 248, 0.08);
  border: 1px solid rgba(56, 189, 248, 0.15);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 14px 0;
  overflow-x: auto;
}

.step-container {
  margin-bottom: 24px;
  padding: 16px;
  border-radius: 12px;
  border-left: 3px solid transparent;
  transition: border-color 0.2s, background 0.2s;
  cursor: pointer;
}

.step-container:hover {
  border-left-color: #4ade80;
  background: rgba(74, 222, 128, 0.04);
}

.step-container.active {
  border-left-color: #4ade80;
  background: rgba(74, 222, 128, 0.06);
}

.step-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  border-radius: 50%;
  color: #fff;
  font-weight: 700;
  font-size: 0.95rem;
  margin-right: 10px;
  flex-shrink: 0;
}

.step-title {
  font-size: 1.15rem;
  font-weight: 600;
  color: #e2e8f0;
  display: flex;
  align-items: center;
  margin-bottom: 12px;
}

.step-explanation {
  color: #cbd5e1;
  margin-bottom: 12px;
}

details {
  background: rgba(167, 139, 250, 0.08);
  border: 1px solid rgba(167, 139, 250, 0.2);
  border-radius: 10px;
  padding: 12px 16px;
  margin: 12px 0;
}

details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  user-select: none;
}

details summary:hover {
  color: #c4b5fd;
}

details[open] summary {
  margin-bottom: 10px;
}

.insight-box {
  background: rgba(96, 165, 250, 0.1);
  border: 1px solid rgba(96, 165, 250, 0.3);
  border-left: 4px solid #60a5fa;
  border-radius: 12px;
  padding: 20px 24px;
  margin: 24px 0;
}

.insight-box .insight-title {
  color: #60a5fa;
  font-weight: 700;
  font-size: 1.15rem;
  margin-bottom: 8px;
}

.final-answer-card {
  background: rgba(52, 211, 153, 0.08);
  border: 2px solid rgba(52, 211, 153, 0.3);
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin: 28px 0;
}

.final-answer-card .label {
  color: #34d399;
  font-size: 1.1rem;
  font-weight: 600;
  margin-bottom: 10px;
}

.final-answer-card .answer {
  font-size: 2.2rem;
  font-weight: 700;
  color: #4ade80;
  margin-bottom: 16px;
}

.final-options {
  display: flex;
  justify-content: center;
  gap: 12px;
  flex-wrap: wrap;
  margin-top: 16px;
}

.final-option {
  padding: 8px 20px;
  border-radius: 10px;
  font-size: 1.05rem;
  border: 1px solid #334155;
  background: #1e293b;
  color: #94a3b8;
}

.final-option.correct {
  background: rgba(52, 211, 153, 0.15);
  border-color: #34d399;
  color: #4ade80;
  font-weight: 700;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 14px;
}

.pitfall-item {
  background: rgba(244, 114, 182, 0.08);
  border-left: 3px solid #f472b6;
  border-radius: 8px;
  padding: 12px 16px;
  margin: 10px 0;
  color: #fbb6ce;
}

.pitfall-title {
  color: #f472b6;
  font-weight: 600;
  margin-bottom: 4px;
}

canvas {
  width: 100%;
  border-radius: 12px;
  touch-action: none;
  display: block;
  margin: 0 auto;
}

.plan-text {
  color: #94a3b8;
  font-size: 1.05rem;
  line-height: 1.8;
}

.highlight {
  color: #f472b6;
  font-weight: 600;
}

.factor-color {
  color: #60a5fa;
}

@media (max-width: 700px) {
  h1 { font-size: 1.5rem; }
  .card { padding: 16px; }
  .container { padding: 10px; }
  .given-grid { grid-template-columns: repeat(auto-fit, minmax(90px, 1fr)); }
  .final-answer-card .answer { font-size: 1.7rem; }
  .step-container { padding: 10px; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Peti clan rastuceg geometrijskog niza</h1>
  <p class="subtitle">Geometrijski niz, kvadratna jednacina, opsti clan</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <div class="card-title"><span class="icon">&#128221;</span> Postavka zadatka</div>
    <div class="problem-text">
      Prvi clan rastuceg geometrijskog niza je \(15\), a zbir prvog, drugog i treceg clana je \(105\). Peti clan niza je:
    </div>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">(A) \(480\)</div>
      <div class="given-item answer-option" data-option="B">(B) \(300\)</div>
      <div class="given-item answer-option" data-option="C">(C) \(120\)</div>
      <div class="given-item answer-option" data-option="D">(D) \(240\)</div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127919;</span> Plan resavanja</div>
    <p class="plan-text">
      1. Izrazicemo clanove niza pomocu prvog clana \(a_1 = 15\) i kolicnika \(q\).<br>
      2. Postavicemo jednacinu iz uslova za zbir prva tri clana.<br>
      3. Resicemo kvadratnu jednacinu po \(q\) i izabrati resenje koje daje rastuci niz.<br>
      4. Izracunacemo peti clan pomocu formule \(a_5 = a_1 \cdot q^4\).
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>&#128208; Kljucne formule i teoreme</summary>
      <ul style="margin-top: 12px; padding-left: 20px; color: #cbd5e1;">
        <li style="margin-bottom: 10px;"><strong>Opsti clan geometrijskog niza:</strong>
          <div class="math-box">\[ a_n = a_1 \cdot q^{n-1} \]</div>
          gde je \(a_1\) prvi clan, a \(q\) kolicnik niza.
        </li>
        <li style="margin-bottom: 10px;"><strong>Kolicnik geometrijskog niza:</strong>
          <div class="math-box">\[ q = \frac{a_{n+1}}{a_n} \quad \text{za svako } n \]</div>
        </li>
        <li style="margin-bottom: 10px;"><strong>Uslov za rastuci niz:</strong>
          Ako je \(a_1 > 0\), niz je rastuci ako i samo ako je \(q > 1\).
          Ako je \(a_1 < 0\), niz je rastuci ako je \(0 < q < 1\).
        </li>
        <li style="margin-bottom: 10px;"><strong>Resavanje kvadratne jednacine:</strong>
          <div class="math-box">\[ q = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a} \]</div>
        </li>
      </ul>
    </details>
  </div>

  <!-- Visual Aid -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127912;</span> Vizuelni prikaz geometrijskog niza</div>
    <canvas id="solutionCanvas" width="900" height="480"></canvas>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128736;</span> Resenje korak po korak</div>

    <!-- Step 1 -->
    <div class="step-container" data-step="1">
      <div class="step-title"><span class="step-badge">1</span> Zapisemo podatke i izrazimo clanove</div>
      <p class="step-explanation">
        U geometrijskom nizu svaki clan nastaje mnozenjem prethodnog kolicnikom \(q\). Znamo da je prvi clan \(a_1 = 15\), pa su:
      </p>
      <div class="math-box">
        \[ a_1 = 15, \quad a_2 = 15q, \quad a_3 = 15q^2 \]
      </div>
      <p class="step-explanation">
        Ovo direktno sledi iz formule za opsti clan: \(a_n = a_1 \cdot q^{n-1}\).
      </p>
    </div>

    <!-- Step 2 -->
    <div class="step-container" data-step="2">
      <div class="step-title"><span class="step-badge">2</span> Postavimo jednacinu iz uslova za zbir</div>
      <p class="step-explanation">
        Zbir prvog, drugog i treceg clana je 105:
      </p>
      <div class="math-box">
        \[ a_1 + a_2 + a_3 = 105 \]
        \[ 15 + 15q + 15q^2 = 105 \]
      </div>
      <p class="step-explanation">
        Izlucimo zajednicki faktor 15:
      </p>
      <div class="math-box">
        \[ 15(1 + q + q^2) = 105 \]
      </div>
      <p class="step-explanation">
        Podelimo obe strane sa 15:
      </p>
      <div class="math-box">
        \[ 1 + q + q^2 = 7 \]
      </div>
      <details>
        <summary>Proveri se: Zasto delimo sa 15?</summary>
        <p>Zato sto su sva tri clana na levoj strani deljiva sa 15 (to je faktor svakog clana). Ovo pojednostavljuje jednacinu i daje nam cistiju kvadratnu jednacinu po \(q\).</p>
      </details>
    </div>

    <!-- Step 3 -->
    <div class="step-container" data-step="3">
      <div class="step-title"><span class="step-badge">3</span> Resimo kvadratnu jednacinu po \(q\)</div>
      <p class="step-explanation">
        Preuredimo jednacinu u standardni oblik:
      </p>
      <div class="math-box">
        \[ q^2 + q + 1 = 7 \]
        \[ q^2 + q - 6 = 0 \]
      </div>
      <p class="step-explanation">
        Racunamo diskriminantu:
      </p>
      <div class="math-box">
        \[ D = 1^2 - 4 \cdot 1 \cdot (-6) = 1 + 24 = 25 \]
      </div>
      <p class="step-explanation">
        Posto je \(D = 25 > 0\), imamo dva realna resenja:
      </p>
      <div class="math-box">
        \[ q_{1,2} = \frac{-1 \pm \sqrt{25}}{2} = \frac{-1 \pm 5}{2} \]
      </div>
      <div class="math-box">
        \[ q_1 = \frac{-1 + 5}{2} = \frac{4}{2} = 2, \qquad q_2 = \frac{-1 - 5}{2} = \frac{-6}{2} = -3 \]
      </div>
      <details>
        <summary>Proveri se: Moze li se ovo resiti i faktorizacijom?</summary>
        <p>Da! Trazimo dva broja ciji je proizvod \(-6\) a zbir \(1\). To su \(3\) i \(-2\):
        \(q^2 + q - 6 = (q + 3)(q - 2) = 0\), odakle \(q = -3\) ili \(q = 2\). Isti rezultat!</p>
      </details>
    </div>

    <!-- Step 4 -->
    <div class="step-container" data-step="4">
      <div class="step-title"><span class="step-badge">4</span> Odaberemo kolicnik koji daje rastuci niz</div>
      <p class="step-explanation">
        Imamo dva kandidata: \(q = 2\) i \(q = -3\). Proverimo koji daje <span class="highlight">rastuci</span> niz:
      </p>
      <p class="step-explanation">
        <strong>Za \(q = 2\):</strong> clanovi su \(15,\; 30,\; 60,\; 120,\; 240,\; \ldots\)
      </p>
      <p class="step-explanation">
        Ovo je rastuci niz jer je svaki clan veci od prethodnog. &#10004;
      </p>
      <p class="step-explanation">
        <strong>Za \(q = -3\):</strong> clanovi su \(15,\; -45,\; 135,\; -405,\; \ldots\)
      </p>
      <p class="step-explanation">
        Ovo <span class="highlight">nije rastuci niz</span> &mdash; clanovi menjaju znak (alterniraju), pa niz nije monoton. &#10008;
      </p>
      <div class="math-box">
        \[ \boxed{q = 2} \]
      </div>
      <details>
        <summary>Proveri se: Zasto negativan kolicnik ne moze dati rastuci niz?</summary>
        <p>Kad je \(q < 0\), clanovi niza naizmenicno menjaju predznak (pozitivan, negativan, pozitivan, ...). Takav niz ne moze biti monotono rastuci jer posle svakog pozitivnog clana dolazi negativan, koji je manji. Generalno, za \(a_1 > 0\) rastuci niz zahteva \(q > 1\).</p>
      </details>
    </div>

    <!-- Step 5 -->
    <div class="step-container" data-step="5">
      <div class="step-title"><span class="step-badge">5</span> Izracunamo peti clan niza</div>
      <p class="step-explanation">
        Koristimo formulu za opsti clan sa \(n = 5\):
      </p>
      <div class="math-box">
        \[ a_5 = a_1 \cdot q^{5-1} = a_1 \cdot q^4 \]
      </div>
      <p class="step-explanation">
        Uvrstimo \(a_1 = 15\) i \(q = 2\):
      </p>
      <div class="math-box">
        \[ a_5 = 15 \cdot 2^4 = 15 \cdot 16 = 240 \]
      </div>
    </div>

    <!-- Step 6 -->
    <div class="step-container" data-step="6">
      <div class="step-title"><span class="step-badge">6</span> Verifikacija</div>
      <p class="step-explanation">
        Ispisimo svih pet clanova niza da potvrdimo resenje:
      </p>
      <div class="math-box">
        \[ a_1 = 15, \quad a_2 = 30, \quad a_3 = 60, \quad a_4 = 120, \quad a_5 = 240 \]
      </div>
      <p class="step-explanation">
        Provera zbira: \(15 + 30 + 60 = 105\) &#10004;
      </p>
      <p class="step-explanation">
        Provera da je niz rastuci: \(15 < 30 < 60 < 120 < 240\) &#10004;
      </p>
      <p class="step-explanation">
        Provera kolicnika: \(\frac{30}{15} = \frac{60}{30} = \frac{120}{60} = \frac{240}{120} = 2\) &#10004;
      </p>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <div class="insight-title">Kljucni uvid</div>
    <p>
      Kljuc ovog zadatka je uslov da je niz <strong>rastuci</strong>. Bez tog uslova, imali bismo dva moguca kolicnika (\(q = 2\) i \(q = -3\)) i samim tim dva razlicita odgovora za peti clan. Uslov rastucnosti eliminise negativan kolicnik i jednoznacno odredjuje resenje. Uvek pazljivo citajte da li zadatak navodi da je niz rastuci, opadajuci ili alterniranog znaka &mdash; to je informacija koja sluzi upravo za izbor pravog resenja kvadratne jednacine.
    </p>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-card">
    <div class="label">Konacan odgovor</div>
    <div class="answer">\(a_5 = 240\)</div>
    <div class="final-options">
      <div class="final-option" data-option="A">(A) \(480\)</div>
      <div class="final-option" data-option="B">(B) \(300\)</div>
      <div class="final-option" data-option="C">(C) \(120\)</div>
      <div class="final-option correct" data-option="D">(D) \(240\)</div>
    </div>
    <p class="verification-note">
      Niz: \(15,\; 30,\; 60,\; 120,\; 240\) &nbsp;|&nbsp; Zbir prva tri: \(15 + 30 + 60 = 105\) &#10004; &nbsp;|&nbsp; Kolicnik: \(q = 2\) &#10004;
    </p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9888;&#65039;</span> Ceste greske</div>
    <div class="pitfall-item">
      <div class="pitfall-title">Izbor pogresnog kolicnika</div>
      <p>Najcesca greska je uzimanje \(q = -3\) umesto \(q = 2\). Za \(q = -3\) peti clan bi bio \(15 \cdot (-3)^4 = 15 \cdot 81 = 1215\), sto nije ni medju ponudjenim odgovorima. Ali cak i da jeste &mdash; niz sa \(q = -3\) nije rastuci.</p>
    </div>
    <div class="pitfall-item">
      <div class="pitfall-title">Zamena \(a_4\) sa \(a_5\)</div>
      <p>Cetvrti clan niza je \(a_4 = 15 \cdot 2^3 = 120\), sto je ponudjeni odgovor (C). Pazljivo procitajte &mdash; trazi se <strong>peti</strong>, ne cetvrti clan! Formula daje \(a_5 = a_1 \cdot q^4\), ne \(a_1 \cdot q^3\).</p>
    </div>
    <div class="pitfall-item">
      <div class="pitfall-title">Greska u eksponentu</div>
      <p>Opsti clan je \(a_n = a_1 \cdot q^{n-1}\), a ne \(a_1 \cdot q^n\). Za peti clan eksponent je \(5 - 1 = 4\), dakle \(q^4 = 16\), a ne \(q^5 = 32\). Sa pogrenim eksponentom bi se dobilo \(15 \cdot 32 = 480\), sto je ponudjeni odgovor (A) &mdash; zamka u zadatku!</p>
    </div>
  </div>

  <!-- Optional Challenge -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127942;</span> Dodatni izazov</div>
    <p class="step-explanation">
      Prvi clan opadajuceg geometrijskog niza je \(192\), a zbir prvog, drugog i treceg clana je \(336\). Koliki je sesti clan ovog niza?
    </p>
    <details>
      <summary>Nagovestaj</summary>
      <p>
        Postavite jednacinu: \(192(1 + q + q^2) = 336\), tj. \(1 + q + q^2 = \frac{336}{192} = \frac{7}{4}\).
        Odatle: \(q^2 + q - \frac{3}{4} = 0\), sto daje \(4q^2 + 4q - 3 = 0\).
        Resenja su \(q = \frac{1}{2}\) i \(q = -\frac{3}{2}\). Za opadajuci niz sa pozitivnim prvim clanom, treba \(0 < q < 1\), pa je \(q = \frac{1}{2}\).
        Sesti clan: \(a_6 = 192 \cdot \left(\frac{1}{2}\right)^5 = 192 \cdot \frac{1}{32} = 6\).
      </p>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('solutionCanvas');
  const ctx = canvas.getContext('2d');

  function draw() {
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.getBoundingClientRect();
    canvas.width = rect.width * dpr;
    canvas.height = 480 * dpr;
    ctx.scale(dpr, dpr);

    const W = rect.width;
    const H = 480;

    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 18px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Geometrijski niz: a\u2081 = 15, q = 2', W / 2, 30);

    var terms = [15, 30, 60, 120, 240];
    var labels = ['a\u2081', 'a\u2082', 'a\u2083', 'a\u2084', 'a\u2085'];
    var maxVal = 240;
    var barAreaTop = 70;
    var barAreaBottom = H - 120;
    var barAreaH = barAreaBottom - barAreaTop;
    var barW = Math.min(80, (W - 120) / 5 - 20);
    var gap = (W - 60) / 5;
    var startX = 30 + gap / 2;

    // Draw grid lines
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (var g = 0; g <= 4; g++) {
      var gy = barAreaBottom - (g / 4) * barAreaH;
      ctx.beginPath();
      ctx.moveTo(20, gy);
      ctx.lineTo(W - 20, gy);
      ctx.stroke();

      ctx.fillStyle = '#475569';
      ctx.font = '11px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'right';
      ctx.fillText(String(Math.round(maxVal * g / 4)), 45, gy + 4);
    }

    // Draw bars
    for (var i = 0; i < terms.length; i++) {
      var x = startX + i * gap;
      var barH = (terms[i] / maxVal) * barAreaH;
      var y = barAreaBottom - barH;

      // Gradient bar
      var grad = ctx.createLinearGradient(x - barW / 2, y, x - barW / 2, barAreaBottom);
      if (i < 3) {
        grad.addColorStop(0, '#a78bfa');
        grad.addColorStop(1, '#6366f1');
      } else if (i === 3) {
        grad.addColorStop(0, '#60a5fa');
        grad.addColorStop(1, '#3b82f6');
      } else {
        grad.addColorStop(0, '#34d399');
        grad.addColorStop(1, '#10b981');
      }

      ctx.beginPath();
      ctx.roundRect(x - barW / 2, y, barW, barH, [8, 8, 0, 0]);
      ctx.fillStyle = grad;
      ctx.fill();

      // Value on top
      ctx.fillStyle = i === 4 ? '#4ade80' : '#e2e8f0';
      ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(String(terms[i]), x, y - 10);

      // Label below bar
      ctx.fillStyle = '#94a3b8';
      ctx.font = '14px Segoe UI, system-ui, sans-serif';
      ctx.fillText(labels[i], x, barAreaBottom + 22);

      // Multiplication arrows between bars
      if (i < terms.length - 1) {
        var x1 = x + barW / 2 + 6;
        var x2 = x + gap - barW / 2 - 6;
        var arrowY = barAreaBottom - (terms[i] / maxVal) * barAreaH / 2;
        var midX = (x1 + x2) / 2;
        var midY = arrowY - 18;

        ctx.beginPath();
        ctx.moveTo(x1, arrowY);
        ctx.quadraticCurveTo(midX, midY, x2, arrowY);
        ctx.strokeStyle = '#f472b6';
        ctx.lineWidth = 1.5;
        ctx.setLineDash([]);
        ctx.stroke();

        // Arrowhead
        var angle = Math.atan2(arrowY - midY, x2 - midX);
        ctx.beginPath();
        ctx.moveTo(x2, arrowY);
        ctx.lineTo(x2 - 6 * Math.cos(angle - 0.5), arrowY - 6 * Math.sin(angle - 0.5));
        ctx.lineTo(x2 - 6 * Math.cos(angle + 0.5), arrowY - 6 * Math.sin(angle + 0.5));
        ctx.closePath();
        ctx.fillStyle = '#f472b6';
        ctx.fill();

        // "x2" label
        ctx.fillStyle = '#f472b6';
        ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('\u00D72', midX, midY - 5);
      }
    }

    // Highlight the answer
    var ansX = startX + 4 * gap;
    var ansY = barAreaBottom - (240 / maxVal) * barAreaH;
    ctx.beginPath();
    ctx.roundRect(ansX - barW / 2 - 6, ansY - 30, barW + 12, barAreaBottom - ansY + 30 + 36, 12);
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2;
    ctx.setLineDash([5, 4]);
    ctx.stroke();
    ctx.setLineDash([]);

    // Sum bracket for first three terms
    var sumY = barAreaBottom + 46;
    var sx1 = startX - barW / 2 - 4;
    var sx2 = startX + 2 * gap + barW / 2 + 4;
    ctx.beginPath();
    ctx.moveTo(sx1, sumY - 6);
    ctx.lineTo(sx1, sumY);
    ctx.lineTo(sx2, sumY);
    ctx.lineTo(sx2, sumY - 6);
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2;
    ctx.setLineDash([]);
    ctx.stroke();

    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Zbir = 15 + 30 + 60 = 105', (sx1 + sx2) / 2, sumY + 20);

    // Formula box at bottom
    var fboxW = Math.min(380, W * 0.7);
    var fboxH = 36;
    var fboxX = W / 2 - fboxW / 2;
    var fboxY = H - 42;
    ctx.beginPath();
    ctx.roundRect(fboxX, fboxY, fboxW, fboxH, 10);
    ctx.fillStyle = 'rgba(52, 211, 153, 0.1)';
    ctx.fill();
    ctx.strokeStyle = '#34d399';
    ctx.lineWidth = 1.5;
    ctx.stroke();

    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 15px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('a\u2085 = 15 \u00B7 2\u2074 = 15 \u00B7 16 = 240', W / 2, fboxY + 23);
  }

  var stepContainers = document.querySelectorAll('.step-container');
  stepContainers.forEach(function(container) {
    container.addEventListener('click', function() {
      stepContainers.forEach(function(c) { c.classList.remove('active'); });
      container.classList.add('active');
    });
  });

  draw();
  window.addEventListener('resize', draw);
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Peti clan rastuceg geometrijskog niza",
  "subject": "math",
  "unit": "nizovi",
  "topic_tags": ["geometrijski niz", "kolicnik niza", "kvadratna jednacina", "opsti clan niza", "rastuci niz"]
}
BRAINSPARK_META-->