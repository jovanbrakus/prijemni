<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zarada radnika - proporcionalno zakljucivanje</title>

<script type="text/info" id="logic-scratchpad">
Problem: Ako 8 radnika, radeci 10 dana, zarade 200000 dinara,
         koliko 9 radnika za 9 dana zaradi?

KORAK 1: Odrediti dnevnu zaradu jednog radnika.
  Ukupan broj radnik-dana u prvom scenariju:
    8 radnika * 10 dana = 80 radnik-dana

  Zarada po jednom radnik-danu:
    200000 / 80 = 2500 dinara po radnik-danu

KORAK 2: Izracunati ukupnu zaradu za drugi scenario.
  Ukupan broj radnik-dana u drugom scenariju:
    9 radnika * 9 dana = 81 radnik-dana

  Ukupna zarada:
    81 * 2500 = 202500 dinara

VERIFIKACIJA:
  Odnos: (9 * 9) / (8 * 10) = 81/80
  Zarada: 200000 * 81/80 = 200000 * 1,0125 = 202500 dinara

  Tacan odgovor je A) 202500 din. POTVRDJENO.

ALTERNATIVNA PROVERA preko proporcija:
  Zarada je direktno proporcionalna i broju radnika i broju dana.
  Z = k * R * D, gde je k dnevna zarada jednog radnika.
  200000 = k * 8 * 10 => k = 2500
  Z2 = 2500 * 9 * 9 = 202500
</script>

<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}

.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
}

.card-title {
  font-size: 1.3rem;
  color: #60a5fa;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title .icon {
  font-size: 1.4rem;
}

.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 18px;
}

.given-item {
  background: rgba(51, 65, 85, 0.6);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 12px 18px;
  min-width: 80px;
  text-align: center;
  transition: all 0.3s ease;
}

.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
  font-weight: 600;
}

.given-item .value {
  color: #e2e8f0;
  font-size: 1.05rem;
}

.answer-option {
  cursor: default;
}

.plan-text {
  color: #a78bfa;
  font-size: 1.05rem;
  font-style: italic;
}

details {
  margin: 15px 0;
}

details summary {
  cursor: pointer;
  color: #60a5fa;
  font-weight: 600;
  padding: 8px 0;
  user-select: none;
}

details summary:hover {
  color: #93bbfc;
}

details .detail-content {
  padding: 12px 16px;
  background: rgba(30, 41, 59, 0.7);
  border-left: 3px solid #60a5fa;
  border-radius: 0 8px 8px 0;
  margin-top: 8px;
}

.step {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
  align-items: flex-start;
  padding: 8px;
  border-left: 3px solid transparent;
  border-radius: 8px;
  transition: all 0.3s ease;
  cursor: pointer;
}

.step:hover, .step.active {
  border-left-color: #4ade80;
  background: rgba(74, 222, 128, 0.04);
}

.step-badge {
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  font-weight: 700;
  font-size: 0.85rem;
  min-width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  margin-top: 2px;
}

.step-content {
  flex: 1;
}

.step-title {
  font-weight: 600;
  color: #f472b6;
  margin-bottom: 6px;
  font-size: 1.05rem;
}

.step-math {
  background: rgba(167, 139, 250, 0.1);
  border: 1px solid rgba(167, 139, 250, 0.25);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 10px 0;
  font-family: 'Courier New', monospace;
  text-align: center;
  font-size: 1.05rem;
}

.highlight-box {
  background: rgba(96, 165, 250, 0.1);
  border: 1px solid rgba(96, 165, 250, 0.3);
  border-radius: 10px;
  padding: 16px 20px;
  margin: 16px 0;
  font-family: 'Courier New', monospace;
  font-size: 1.1rem;
  text-align: center;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.12), rgba(167, 139, 250, 0.12));
  border: 1px solid rgba(167, 139, 250, 0.35);
  border-radius: 16px;
  padding: 24px 28px;
  margin-bottom: 24px;
}

.insight-box .card-title {
  color: #a78bfa;
}

.final-answer-box {
  background: rgba(52, 211, 153, 0.08);
  border: 2px solid #34d399;
  border-radius: 16px;
  padding: 28px;
  text-align: center;
  margin-bottom: 24px;
}

.final-answer-box .answer-label {
  color: #94a3b8;
  font-size: 1rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 12px;
}

.final-answer-box .answer-value {
  color: #4ade80;
  font-size: 2rem;
  font-weight: 700;
}

.final-answer-box .answer-note {
  color: #34d399;
  font-size: 1.2rem;
  margin-top: 8px;
}

.final-options {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-top: 20px;
}

.final-option {
  background: rgba(51, 65, 85, 0.6);
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 10px 20px;
  font-size: 1rem;
  transition: all 0.3s ease;
}

.final-option.correct {
  background: rgba(52, 211, 153, 0.15);
  border-color: #34d399;
  color: #34d399;
  font-weight: 600;
}

.pitfall {
  display: flex;
  gap: 12px;
  align-items: flex-start;
  margin-bottom: 12px;
}

.pitfall-icon {
  color: #f472b6;
  font-weight: 700;
  font-size: 1.2rem;
  flex-shrink: 0;
}

.challenge-box {
  background: rgba(244, 114, 182, 0.08);
  border: 1px solid rgba(244, 114, 182, 0.3);
  border-radius: 16px;
  padding: 24px 28px;
}

.challenge-box .card-title {
  color: #f472b6;
}

canvas {
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  max-width: 100%;
  touch-action: none;
}

.canvas-wrapper {
  text-align: center;
}

.canvas-caption {
  color: #94a3b8;
  font-size: 0.9rem;
  margin-top: 10px;
  text-align: center;
}

.checkpoint details summary {
  color: #34d399;
  font-size: 0.95rem;
}

.checkpoint details .detail-content {
  border-left-color: #34d399;
}

.verification-note {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 16px;
  padding: 12px 16px;
  background: rgba(51, 65, 85, 0.4);
  border-radius: 8px;
  text-align: left;
}

@media (max-width: 700px) {
  h1 {
    font-size: 1.6rem;
  }
  .card {
    padding: 18px;
  }
  .given-grid {
    flex-direction: column;
  }
  .step {
    flex-direction: column;
    gap: 8px;
  }
  .step-badge {
    align-self: flex-start;
  }
  .final-answer-box .answer-value {
    font-size: 1.5rem;
  }
  .final-options {
    flex-direction: column;
    align-items: center;
  }
}
</style>
</head>
<body>
<div class="container">

  <!-- Title -->
  <h1>Zarada radnika</h1>
  <p class="subtitle">Proporcionalno zakljucivanje — radnik-dani i dnevna zarada</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <div class="card-title"><span class="icon">&#128203;</span> Tekst zadatka</div>
    <p style="font-size: 1.15rem; line-height: 1.8;">
      Ako 8 radnika, radeci 10 dana, zarade 200.000 dinara, onda 9 radnika za 9 dana zaradi:
    </p>

    <div class="given-grid" style="margin-top: 14px; margin-bottom: 10px;">
      <div class="given-item">
        <div class="label">Radnika</div>
        <div class="value">\( 8 \)</div>
      </div>
      <div class="given-item">
        <div class="label">Dana</div>
        <div class="value">\( 10 \)</div>
      </div>
      <div class="given-item">
        <div class="label">Zarada</div>
        <div class="value">\( 200\,000 \) din.</div>
      </div>
      <div class="given-item">
        <div class="label">Trazi se</div>
        <div class="value">Zarada za 9 radnika, 9 dana</div>
      </div>
    </div>

    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">202.500 din.</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">205.000 din.</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">202.200 din.</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">200.000 din.</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card">
    <div class="card-title"><span class="icon">&#127919;</span> Plan resavanja</div>
    <p class="plan-text">
      Ukupna zarada je proporcionalna proizvodu broja radnika i broja dana. Prvo cemo odrediti dnevnu zaradu jednog radnika, a zatim izracunati ukupnu zaradu za novi scenario. Kljucni pojam je <strong>radnik-dan</strong> kao jedinica rada.
    </p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>&#128208; Kljucne formule i pojmovi</summary>
      <div class="detail-content">
        <p>Koncepti koji su nam potrebni u ovom zadatku:</p>
        <ul style="margin: 12px 0 0 20px; list-style: none;">
          <li style="margin-bottom: 12px;">
            <strong>Radnik-dan:</strong> Jedinica rada koja predstavlja rad jednog radnika tokom jednog dana. Ako \( R \) radnika radi \( D \) dana, ukupan broj radnik-dana je:
            \[ \text{radnik-dani} = R \times D \]
          </li>
          <li style="margin-bottom: 12px;">
            <strong>Direktna proporcionalnost:</strong> Zarada je direktno proporcionalna broju radnik-dana. Ako svaki radnik zaradjuje istu dnevnu nadnicu \( k \), ukupna zarada je:
            \[ Z = k \times R \times D \]
          </li>
          <li style="margin-bottom: 12px;">
            <strong>Odnos zarada:</strong> Za dva scenarija vazi:
            \[ \frac{Z_2}{Z_1} = \frac{R_2 \times D_2}{R_1 \times D_1} \]
          </li>
        </ul>
      </div>
    </details>
  </div>

  <!-- Visual Aid: Bar Chart Canvas -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128202;</span> Vizualizacija radnik-dana i zarade</div>
    <div class="canvas-wrapper">
      <canvas id="workerChart" width="650" height="450"></canvas>
    </div>
    <p class="canvas-caption">Poredjenje dva scenarija: 80 radnik-dana vs 81 radnik-dan. Prevucite klizac da menjate broj radnika u drugom scenariju.</p>
  </div>

  <!-- Step-by-Step Solution -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128290;</span> Resenje korak po korak</div>

    <!-- Step 1 -->
    <div class="step" id="step1">
      <div class="step-badge">1</div>
      <div class="step-content">
        <div class="step-title">Izracunavanje ukupnog broja radnik-dana (prvi scenario)</div>
        <p>U prvom scenariju imamo 8 radnika koji rade 10 dana. Ukupan broj radnik-dana je:</p>
        <div class="step-math">
          \[ \text{radnik-dani}_1 = 8 \times 10 = 80 \]
        </div>
        <p>To znaci da je ukupno ulozeno 80 jedinica rada za zaradu od 200.000 dinara.</p>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="step" id="step2">
      <div class="step-badge">2</div>
      <div class="step-content">
        <div class="step-title">Odredjivanje dnevne zarade jednog radnika</div>
        <p>Posto je ukupna zarada jednako raspodeljena, zarada po jednom radnik-danu iznosi:</p>
        <div class="step-math">
          \[ k = \frac{Z_1}{\text{radnik-dani}_1} = \frac{200\,000}{80} = 2\,500 \text{ din.} \]
        </div>
        <p>Dakle, svaki radnik zaradjuje <strong>2.500 dinara dnevno</strong>.</p>

        <div class="checkpoint">
          <details>
            <summary>Proveri sebe: Koliko jedan radnik zaradi za 10 dana?</summary>
            <div class="detail-content">
              Jedan radnik za 10 dana zaradi \( 2\,500 \times 10 = 25\,000 \) dinara. Osam radnika ukupno: \( 25\,000 \times 8 = 200\,000 \) dinara. Poklopilo se sa datim podatkom!
            </div>
          </details>
        </div>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="step" id="step3">
      <div class="step-badge">3</div>
      <div class="step-content">
        <div class="step-title">Izracunavanje ukupnog broja radnik-dana (drugi scenario)</div>
        <p>U drugom scenariju imamo 9 radnika koji rade 9 dana:</p>
        <div class="step-math">
          \[ \text{radnik-dani}_2 = 9 \times 9 = 81 \]
        </div>
        <p>Drugi scenario ima <strong>81 radnik-dan</strong>, sto je tacno jedan vise nego u prvom scenariju (80).</p>
      </div>
    </div>

    <!-- Step 4 -->
    <div class="step" id="step4">
      <div class="step-badge">4</div>
      <div class="step-content">
        <div class="step-title">Izracunavanje ukupne zarade</div>
        <p>Mnozenjem broja radnik-dana sa dnevnom zaradom dobijamo ukupnu zaradu:</p>
        <div class="step-math">
          \[ Z_2 = k \times \text{radnik-dani}_2 = 2\,500 \times 81 = 202\,500 \text{ din.} \]
        </div>

        <div class="checkpoint">
          <details>
            <summary>Proveri sebe: Moze li se ovo resiti i pomocu proporcije?</summary>
            <div class="detail-content">
              Da! Mozemo koristiti odnos radnik-dana:
              \[ Z_2 = Z_1 \times \frac{R_2 \times D_2}{R_1 \times D_1} = 200\,000 \times \frac{9 \times 9}{8 \times 10} = 200\,000 \times \frac{81}{80} = 202\,500 \text{ din.} \]
              Isti rezultat!
            </div>
          </details>
        </div>
      </div>
    </div>

    <!-- Step 5 -->
    <div class="step" id="step5">
      <div class="step-badge">5</div>
      <div class="step-content">
        <div class="step-title">Verifikacija rezultata</div>
        <p>Proverimo na jos jedan nacin. Razlika u radnik-danima je:</p>
        <div class="step-math">
          \[ 81 - 80 = 1 \text{ radnik-dan} \]
        </div>
        <p>Dakle, drugi scenario ima tacno jedan radnik-dan vise. Dodatna zarada:</p>
        <div class="step-math">
          \[ \Delta Z = 1 \times 2\,500 = 2\,500 \text{ din.} \]
        </div>
        <p>Ukupno:</p>
        <div class="step-math">
          \[ Z_2 = 200\,000 + 2\,500 = 202\,500 \text{ din.} \]
        </div>
        <p style="color: #34d399;">Rezultat je potvrdjeni iz tri razlicita pristupa.</p>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="insight-box">
    <div class="card-title"><span class="icon">&#128161;</span> Kljucni uvid</div>
    <p>Umesto da razmisljas odvojeno o broju radnika i broju dana, kombinuj ih u jednu velicinu: <strong>radnik-dane</strong>. Zarada je direktno proporcionalna broju radnik-dana. Ovaj pristup pojednostavljuje problem na obicnu proporciju:</p>
    <div class="step-math" style="margin-top: 16px;">
      \[ \frac{Z_2}{Z_1} = \frac{R_2 \cdot D_2}{R_1 \cdot D_1} = \frac{81}{80} \quad \Rightarrow \quad Z_2 = 200\,000 \times \frac{81}{80} = 202\,500 \]
    </div>
    <p style="margin-top: 12px;">Zanimljivo: iako imamo vise radnika a manje dana, ukupan rad je <em>minimalno</em> veci (\( 81 \) vs \( 80 \)), pa je i zarada samo za 2.500 dinara veca.</p>
  </div>

  <!-- Final Answer -->
  <div class="final-answer-box">
    <div class="answer-label">Konacan odgovor</div>
    <div class="answer-value">202.500 dinara</div>
    <div class="answer-note">Tacan odgovor je (A)</div>
    <div class="final-options">
      <div class="final-option correct">(A) 202.500 din.</div>
      <div class="final-option">(B) 205.000 din.</div>
      <div class="final-option">(C) 202.200 din.</div>
      <div class="final-option">(D) 200.000 din.</div>
    </div>
    <div class="verification-note">
      <strong>Verifikacija:</strong> Dnevna zarada po radniku: \( 200\,000 \div 80 = 2\,500 \) din. Za 9 radnika i 9 dana: \( 9 \times 9 \times 2\,500 = 81 \times 2\,500 = 202\,500 \) din. Alternativno, \( 200\,000 \times \frac{81}{80} = 202\,500 \) din.
    </div>
  </div>

  <!-- Common Pitfalls -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9888;&#65039;</span> Ceste greske</div>
    <div class="pitfall">
      <span class="pitfall-icon">&#10007;</span>
      <p><strong>Zaboravljanje da se mnozi i radnici i dani:</strong> Neki ucenici mnoge samo broj radnika sa nadnicom, a zaborave da je i broj dana promenjen. Zarada zavisi od <em>oba</em> faktora istovremeno.</p>
    </div>
    <div class="pitfall">
      <span class="pitfall-icon">&#10007;</span>
      <p><strong>Pomisljanje da je zarada ista (200.000):</strong> Posto se broj radnika povecao za 1 a broj dana smanjio za 1, moze se pogresno zakljuciti da se zarada ne menja. Medjutim, \( 9 \times 9 = 81 \neq 80 = 8 \times 10 \) — proizvod nije isti!</p>
    </div>
    <div class="pitfall">
      <span class="pitfall-icon">&#10007;</span>
      <p><strong>Odvojeno skaliranje:</strong> Pogresno je reci "9 radnika je 9/8 vise, 9 dana je 9/10 manje" i onda primeniti samo jedan faktor. Moraju se primeniti <em>oba</em> faktora: \( 200\,000 \times \frac{9}{8} \times \frac{9}{10} = 202\,500 \).</p>
    </div>
  </div>

  <!-- Optional Challenge -->
  <div class="challenge-box">
    <div class="card-title"><span class="icon">&#127942;</span> Dodatni izazov</div>
    <p>Koliko radnika treba da radi 12 dana da bi zarada bila tacno 300.000 dinara, ako je dnevna zarada po radniku ista (2.500 din)?</p>
    <details>
      <summary>Pogledaj nagovestaj</summary>
      <div class="detail-content">
        <p>Postavi jednacinu: \( Z = k \times R \times D \), gde je \( k = 2\,500 \), \( D = 12 \), \( Z = 300\,000 \).</p>
        <p style="margin-top: 8px;">\( 300\,000 = 2\,500 \times R \times 12 \)</p>
        <p style="margin-top: 8px;">\( 300\,000 = 30\,000 \times R \)</p>
        <p style="margin-top: 8px;">\( R = \frac{300\,000}{30\,000} = 10 \) radnika.</p>
      </div>
    </details>
  </div>

</div>

<script>
(() => {
  const canvas = document.getElementById('workerChart');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  // Slider state: number of workers in scenario 2
  let workers2 = 9;
  let days2 = 9;
  const workers1 = 8;
  const days1 = 10;
  const totalEarnings1 = 200000;
  const dailyWage = totalEarnings1 / (workers1 * days1);

  // Slider geometry
  const sliderX = 80;
  const sliderW = W - 160;
  const sliderY = H - 40;
  const sliderMin = 1;
  const sliderMax = 15;
  let isDragging = false;

  function getSliderPos(val) {
    return sliderX + ((val - sliderMin) / (sliderMax - sliderMin)) * sliderW;
  }

  function getSliderVal(px) {
    var v = sliderMin + ((px - sliderX) / sliderW) * (sliderMax - sliderMin);
    return Math.round(Math.max(sliderMin, Math.min(sliderMax, v)));
  }

  function formatNum(n) {
    return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, '.');
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    var wd1 = workers1 * days1;
    var wd2 = workers2 * days2;
    var earn2 = dailyWage * wd2;

    // Chart area
    var chartLeft = 100;
    var chartRight = W - 60;
    var chartTop = 60;
    var chartBottom = H - 90;
    var chartW = chartRight - chartLeft;
    var chartH = chartBottom - chartTop;

    // Max values for scaling
    var maxWD = Math.max(wd1, wd2, 100);
    var maxEarn = Math.max(totalEarnings1, earn2, 250000);

    // Draw title
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 16px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Poredjenje scenarija', W / 2, 30);

    // Bar width
    var barGroupW = chartW / 2;
    var barW = 60;
    var gap = 20;

    // --- Scenario 1 ---
    var x1Center = chartLeft + barGroupW / 2;
    // Worker-day bar
    var h1wd = (wd1 / maxWD) * chartH * 0.85;
    var x1wd = x1Center - barW - gap / 2;
    ctx.fillStyle = 'rgba(96, 165, 250, 0.7)';
    ctx.beginPath();
    ctx.roundRect(x1wd, chartBottom - h1wd, barW, h1wd, [6, 6, 0, 0]);
    ctx.fill();
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.roundRect(x1wd, chartBottom - h1wd, barW, h1wd, [6, 6, 0, 0]);
    ctx.stroke();

    // Earnings bar
    var h1e = (totalEarnings1 / maxEarn) * chartH * 0.85;
    var x1e = x1Center + gap / 2;
    ctx.fillStyle = 'rgba(52, 211, 153, 0.7)';
    ctx.beginPath();
    ctx.roundRect(x1e, chartBottom - h1e, barW, h1e, [6, 6, 0, 0]);
    ctx.fill();
    ctx.strokeStyle = '#34d399';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.roundRect(x1e, chartBottom - h1e, barW, h1e, [6, 6, 0, 0]);
    ctx.stroke();

    // Labels for scenario 1
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText(wd1.toString(), x1wd + barW / 2, chartBottom - h1wd - 8);

    ctx.fillStyle = '#34d399';
    ctx.fillText(formatNum(totalEarnings1), x1e + barW / 2, chartBottom - h1e - 8);

    ctx.fillStyle = '#e2e8f0';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.fillText('Scenario 1', x1Center, chartBottom + 20);
    ctx.fillStyle = '#94a3b8';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.fillText(workers1 + ' radn. \u00D7 ' + days1 + ' dana', x1Center, chartBottom + 36);

    // --- Scenario 2 ---
    var x2Center = chartLeft + barGroupW + barGroupW / 2;
    // Worker-day bar
    var h2wd = (wd2 / maxWD) * chartH * 0.85;
    var x2wd = x2Center - barW - gap / 2;

    var barColor2 = wd2 > wd1 ? 'rgba(167, 139, 250, 0.7)' : (wd2 < wd1 ? 'rgba(244, 114, 182, 0.7)' : 'rgba(96, 165, 250, 0.7)');
    var borderColor2 = wd2 > wd1 ? '#a78bfa' : (wd2 < wd1 ? '#f472b6' : '#60a5fa');

    ctx.fillStyle = barColor2;
    ctx.beginPath();
    ctx.roundRect(x2wd, chartBottom - h2wd, barW, h2wd, [6, 6, 0, 0]);
    ctx.fill();
    ctx.strokeStyle = borderColor2;
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.roundRect(x2wd, chartBottom - h2wd, barW, h2wd, [6, 6, 0, 0]);
    ctx.stroke();

    // Earnings bar
    var h2e = (earn2 / maxEarn) * chartH * 0.85;
    var x2e = x2Center + gap / 2;
    var earnColor2 = earn2 > totalEarnings1 ? 'rgba(52, 211, 153, 0.9)' : (earn2 < totalEarnings1 ? 'rgba(244, 114, 182, 0.7)' : 'rgba(52, 211, 153, 0.7)');
    var earnBorder2 = earn2 > totalEarnings1 ? '#4ade80' : (earn2 < totalEarnings1 ? '#f472b6' : '#34d399');

    ctx.fillStyle = earnColor2;
    ctx.beginPath();
    ctx.roundRect(x2e, chartBottom - h2e, barW, h2e, [6, 6, 0, 0]);
    ctx.fill();
    ctx.strokeStyle = earnBorder2;
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.roundRect(x2e, chartBottom - h2e, barW, h2e, [6, 6, 0, 0]);
    ctx.stroke();

    // Labels for scenario 2
    ctx.fillStyle = borderColor2;
    ctx.font = 'bold 14px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText(wd2.toString(), x2wd + barW / 2, chartBottom - h2wd - 8);

    ctx.fillStyle = earnBorder2;
    ctx.fillText(formatNum(Math.round(earn2)), x2e + barW / 2, chartBottom - h2e - 8);

    ctx.fillStyle = '#e2e8f0';
    ctx.font = '13px Segoe UI, system-ui, sans-serif';
    ctx.fillText('Scenario 2', x2Center, chartBottom + 20);
    ctx.fillStyle = '#94a3b8';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.fillText(workers2 + ' radn. \u00D7 ' + days2 + ' dana', x2Center, chartBottom + 36);

    // Legend
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    var legY = 52;
    ctx.fillStyle = 'rgba(96, 165, 250, 0.7)';
    ctx.fillRect(chartLeft, legY - 10, 14, 14);
    ctx.fillStyle = '#94a3b8';
    ctx.textAlign = 'left';
    ctx.fillText('Radnik-dani', chartLeft + 20, legY + 1);

    ctx.fillStyle = 'rgba(52, 211, 153, 0.7)';
    ctx.fillRect(chartLeft + 130, legY - 10, 14, 14);
    ctx.fillStyle = '#94a3b8';
    ctx.fillText('Zarada (din.)', chartLeft + 155, legY + 1);

    // Daily wage info
    ctx.fillStyle = '#a78bfa';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText('Dnevna zarada: ' + formatNum(dailyWage) + ' din/radnik', chartRight, legY + 1);

    // Slider
    // Track
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 4;
    ctx.lineCap = 'round';
    ctx.beginPath();
    ctx.moveTo(sliderX, sliderY);
    ctx.lineTo(sliderX + sliderW, sliderY);
    ctx.stroke();

    // Active track
    var thumbX = getSliderPos(workers2);
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 4;
    ctx.beginPath();
    ctx.moveTo(sliderX, sliderY);
    ctx.lineTo(thumbX, sliderY);
    ctx.stroke();

    // Tick marks
    ctx.fillStyle = '#475569';
    ctx.font = '10px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    for (var i = sliderMin; i <= sliderMax; i++) {
      var tx = getSliderPos(i);
      ctx.beginPath();
      ctx.moveTo(tx, sliderY - 6);
      ctx.lineTo(tx, sliderY + 6);
      ctx.strokeStyle = '#475569';
      ctx.lineWidth = 1;
      ctx.stroke();
      if (i % 3 === 0 || i === 1) {
        ctx.fillText(i.toString(), tx, sliderY + 18);
      }
    }

    // Thumb
    ctx.beginPath();
    ctx.arc(thumbX, sliderY, 10, 0, 2 * Math.PI);
    ctx.fillStyle = '#60a5fa';
    ctx.fill();
    ctx.strokeStyle = '#e2e8f0';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Slider label
    ctx.fillStyle = '#e2e8f0';
    ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Broj radnika (scenario 2): ' + workers2, W / 2, sliderY - 16);

    ctx.lineCap = 'butt';
  }

  function getEventPos(e) {
    var rect = canvas.getBoundingClientRect();
    var scaleX = W / rect.width;
    var scaleY = H / rect.height;
    var clientX, clientY;
    if (e.touches) {
      clientX = e.touches[0].clientX;
      clientY = e.touches[0].clientY;
    } else {
      clientX = e.clientX;
      clientY = e.clientY;
    }
    return {
      x: (clientX - rect.left) * scaleX,
      y: (clientY - rect.top) * scaleY
    };
  }

  function isNearThumb(e) {
    var pos = getEventPos(e);
    var thumbX = getSliderPos(workers2);
    var dist = Math.sqrt((pos.x - thumbX) * (pos.x - thumbX) + (pos.y - sliderY) * (pos.y - sliderY));
    return dist < 25;
  }

  canvas.addEventListener('mousedown', function(e) {
    if (isNearThumb(e)) {
      isDragging = true;
    }
  });

  canvas.addEventListener('mousemove', function(e) {
    if (isDragging) {
      var pos = getEventPos(e);
      workers2 = getSliderVal(pos.x);
      days2 = 9;
      draw();
    }
    if (isNearThumb(e)) {
      canvas.style.cursor = 'grab';
    } else {
      canvas.style.cursor = 'default';
    }
  });

  canvas.addEventListener('mouseup', function() {
    isDragging = false;
  });

  canvas.addEventListener('mouseleave', function() {
    isDragging = false;
  });

  // Touch support
  canvas.addEventListener('touchstart', function(e) {
    if (isNearThumb(e)) {
      isDragging = true;
      e.preventDefault();
    }
  });

  canvas.addEventListener('touchmove', function(e) {
    if (isDragging) {
      var pos = getEventPos(e);
      workers2 = getSliderVal(pos.x);
      days2 = 9;
      draw();
      e.preventDefault();
    }
  });

  canvas.addEventListener('touchend', function() {
    isDragging = false;
  });

  // Step click highlighting
  document.querySelectorAll('.step').forEach(function(step) {
    step.addEventListener('click', function() {
      document.querySelectorAll('.step').forEach(function(s) {
        s.classList.remove('active');
      });
      step.classList.toggle('active');
    });
  });

  draw();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Zarada radnika - proporcionalno zakljucivanje",
  "subject": "math",
  "unit": "proportional_reasoning",
  "topic_tags": ["proporcije", "radnik-dani", "direktna proporcionalnost", "tekstualni zadaci", "aritmetika"]
}
BRAINSPARK_META-->