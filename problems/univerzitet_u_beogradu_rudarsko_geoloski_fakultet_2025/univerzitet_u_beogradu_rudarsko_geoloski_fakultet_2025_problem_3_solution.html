<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sabiranje razlomaka sa promenljivama</title>
<script>MathJax={tex:{inlineMath:[['\\(','\\)'],['$','$']],displayMath:[['\\[','\\]']]},svg:{fontCache:'global'}};</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<script type="text/info" id="logic-scratchpad">
Problem: a/(a+b) - a/(a-b) + (a²+b²)/(a²-b²), where ab ≠ 0 and a ≠ ±b

Step 1: Recognize that a²-b² = (a+b)(a-b), so the common denominator is (a+b)(a-b).

Step 2: Rewrite each fraction with the common denominator:
  - a/(a+b) = a(a-b) / [(a+b)(a-b)]
  - a/(a-b) = a(a+b) / [(a+b)(a-b)]
  - (a²+b²)/(a²-b²) = (a²+b²) / [(a+b)(a-b)]

Step 3: Combine numerators:
  a(a-b) - a(a+b) + (a²+b²)
  = a² - ab - a² - ab + a² + b²
  = a² - 2ab + b²
  = (a - b)²

Step 4: Final fraction:
  (a-b)² / [(a+b)(a-b)] = (a-b)/(a+b)

Answer: A) (a-b)/(a+b)
</script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
body{background:#0f172a;color:#e2e8f0;font-family:'Segoe UI',system-ui,-apple-system,sans-serif;line-height:1.7;padding:20px}
.container{max-width:1200px;margin:0 auto}
h1{font-size:2rem;font-weight:800;background:linear-gradient(135deg,#60a5fa,#a78bfa,#f472b6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-align:center;margin-bottom:4px}
.subtitle{text-align:center;color:#94a3b8;font-size:1.05rem;margin-bottom:32px}
.card{background:#1e293b;border:1px solid #334155;border-radius:14px;padding:28px 32px;margin-bottom:24px}
.card h2{font-size:1.25rem;margin-bottom:16px;color:#60a5fa;display:flex;align-items:center;gap:10px}
.card h2 .icon{font-size:1.3rem}
.problem-statement{border-left:4px solid #a78bfa;font-size:1.08rem}
.problem-statement .problem-text{margin-bottom:18px;line-height:1.9}
.given-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:10px;margin-top:12px}
.given-item.answer-option{background:#0f172a;border:1px solid #334155;border-radius:10px;padding:12px 16px;text-align:center;font-size:1.05rem;transition:border-color .2s}
.plan-text{color:#94a3b8;font-size:1rem;line-height:1.8}
details{margin-top:10px}
details summary{cursor:pointer;color:#a78bfa;font-weight:600;padding:8px 0;user-select:none;transition:color .2s}
details summary:hover{color:#c4b5fd}
details[open] summary{margin-bottom:10px}
.theory-content{color:#cbd5e1;line-height:1.85;padding:12px 16px;background:#0f172a;border-radius:10px;border:1px solid #334155}
.theory-content p{margin-bottom:10px}
.theory-content p:last-child{margin-bottom:0}
.step{display:flex;gap:16px;margin-bottom:22px;align-items:flex-start}
.step-badge{min-width:36px;height:36px;background:linear-gradient(135deg,#60a5fa,#a78bfa);border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:0.95rem;color:#0f172a;flex-shrink:0;margin-top:2px}
.step-content{flex:1}
.step-content p{margin-bottom:8px}
.step-content p:last-child{margin-bottom:0}
.check-yourself summary{color:#34d399;font-size:0.95rem}
.check-yourself .check-content{background:#0f172a;border:1px solid #334155;border-radius:10px;padding:14px 16px;color:#94a3b8;line-height:1.7}
.key-insight{background:linear-gradient(135deg,rgba(96,165,250,0.12),rgba(167,139,250,0.12));border:1px solid rgba(167,139,250,0.3);border-radius:14px;padding:24px 28px;margin-bottom:24px}
.key-insight h2{color:#a78bfa}
.key-insight p{color:#cbd5e1;line-height:1.8}
.final-answer{border:2px solid #34d399;background:linear-gradient(135deg,rgba(52,211,153,0.08),rgba(74,222,128,0.05))}
.final-answer h2{color:#4ade80}
.answer-display{font-size:1.35rem;text-align:center;padding:16px 0;color:#4ade80;font-weight:700}
.options-review{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:10px;margin:16px 0}
.option-item{padding:12px 16px;border-radius:10px;background:#0f172a;border:1px solid #334155;text-align:center;font-size:1rem;color:#94a3b8}
.option-item.correct{border-color:#34d399;color:#4ade80;background:rgba(52,211,153,0.1);font-weight:700}
.verification{background:#0f172a;border:1px solid #334155;border-radius:10px;padding:16px;margin-top:14px;color:#94a3b8;line-height:1.8}
.pitfalls li{margin-bottom:10px;color:#cbd5e1;line-height:1.7}
.pitfalls li strong{color:#f472b6}
.challenge-content{background:#0f172a;border:1px solid #334155;border-radius:10px;padding:16px;color:#cbd5e1;line-height:1.8}
canvas{display:block;margin:12px auto;border-radius:10px;max-width:100%;touch-action:none}
@media(max-width:700px){
  body{padding:12px}
  .card{padding:20px 18px}
  h1{font-size:1.5rem}
  .given-grid,.options-review{grid-template-columns:1fr 1fr}
  .step{gap:12px}
  canvas{max-width:100%}
}
</style>
</head>
<body>
<div class="container">

<h1>Sabiranje razlomaka sa promenljivama</h1>
<p class="subtitle">Algebarski razlomci -- svođenje na zajednički imenilac</p>

<!-- Problem Statement -->
<div class="card problem-statement">
  <h2><span class="icon">&#128220;</span> Tekst zadatka</h2>
  <div class="problem-text">
    Sabiranjem razlomaka
    \[
      \frac{a}{a+b} \;-\; \frac{a}{a-b} \;+\; \frac{a^2+b^2}{a^2-b^2}
    \]
    gde je \(ab \neq 0\) i \(a \neq \pm b\), dobija se razlomak:
  </div>
  <div class="given-grid">
    <div class="given-item answer-option" data-option="A">\(\text{A)}\;\;\dfrac{a-b}{a+b}\)</div>
    <div class="given-item answer-option" data-option="B">\(\text{B)}\;\;\dfrac{a+b}{a-b}\)</div>
    <div class="given-item answer-option" data-option="C">\(\text{C)}\;\;\dfrac{ab}{a+b}\)</div>
    <div class="given-item answer-option" data-option="D">\(\text{D)}\;\;\dfrac{ab}{a-b}\)</div>
  </div>
</div>

<!-- Plan -->
<div class="card">
  <h2><span class="icon">&#128204;</span> Plan rešavanja</h2>
  <p class="plan-text">
    Prepoznaćemo da je \(a^2 - b^2 = (a+b)(a-b)\), što nam daje zajednički imenilac za sva tri razlomka.
    Svaki razlomak ćemo proširiti, sabrati brojioce i rezultat pojednostaviti.
  </p>
</div>

<!-- Theory Refresher -->
<div class="card">
  <h2><span class="icon">&#128218;</span> Teorijski podsetnik</h2>
  <details>
    <summary>Formule za razliku kvadrata i sabiranje razlomaka</summary>
    <div class="theory-content">
      <p><strong>Razlika kvadrata:</strong> \(a^2 - b^2 = (a+b)(a-b)\)</p>
      <p><strong>Kvadrat razlike:</strong> \(a^2 - 2ab + b^2 = (a-b)^2\)</p>
      <p><strong>Sabiranje razlomaka:</strong> Da bismo sabrali razlomke sa različitim imeniocima, potrebno je da ih svedemo na zajednički imenilac. Zajednički imenilac je najmanji zajednički sadržalac (NZS) svih imenilaca.</p>
      <p><strong>Skraćivanje:</strong> Ako se isti faktor pojavljuje i u brojiocu i u imeniocu, možemo ga skratiti (pod uslovom da nije nula).</p>
    </div>
  </details>
</div>

<!-- Visual Aid -->
<div class="card">
  <h2><span class="icon">&#127912;</span> Vizuelni prikaz</h2>
  <p style="color:#94a3b8;margin-bottom:12px;">Dijagram prikazuje kako se tri razlomka kombinuju u jedan. Prevucite klizač da pratite tok izračunavanja.</p>
  <canvas id="vizCanvas" width="720" height="420"></canvas>
  <div style="text-align:center;margin-top:10px">
    <input type="range" id="stepSlider" min="0" max="4" value="0" style="width:280px;accent-color:#60a5fa">
    <div id="sliderLabel" style="color:#94a3b8;font-size:0.9rem;margin-top:4px">Korak 0: Polazni izraz</div>
  </div>
</div>

<!-- Step-by-Step Solution -->
<div class="card">
  <h2><span class="icon">&#9999;&#65039;</span> Rešenje korak po korak</h2>

  <div class="step">
    <div class="step-badge">1</div>
    <div class="step-content">
      <p><strong>Uočimo zajednički imenilac</strong></p>
      <p>Imenilac trećeg razlomka je \(a^2 - b^2\). Rastavimo ga pomoću formule za razliku kvadrata:</p>
      \[a^2 - b^2 = (a+b)(a-b)\]
      <p>Primetimo da su imenioci prva dva razlomka upravo faktori trećeg imenioca:</p>
      <ul style="margin-left:20px;color:#94a3b8">
        <li>prvi razlomak: imenilac \((a+b)\)</li>
        <li>drugi razlomak: imenilac \((a-b)\)</li>
        <li>treći razlomak: imenilac \((a+b)(a-b)\)</li>
      </ul>
      <p>Zajednički imenilac je dakle \((a+b)(a-b)\).</p>
    </div>
  </div>

  <div class="step">
    <div class="step-badge">2</div>
    <div class="step-content">
      <p><strong>Proširimo svaki razlomak</strong></p>
      <p>Prvi razlomak proširujemo sa \((a-b)\):</p>
      \[\frac{a}{a+b} = \frac{a(a-b)}{(a+b)(a-b)}\]
      <p>Drugi razlomak proširujemo sa \((a+b)\):</p>
      \[\frac{a}{a-b} = \frac{a(a+b)}{(a+b)(a-b)}\]
      <p>Treći razlomak već ima traženi imenilac:</p>
      \[\frac{a^2+b^2}{a^2-b^2} = \frac{a^2+b^2}{(a+b)(a-b)}\]

      <details class="check-yourself">
        <summary>Proveri sebe: Zašto smemo da proširujemo?</summary>
        <div class="check-content">
          Proširivanje razlomka sa nekom veličinom znači množenje i brojioca i imenioca istim izrazom. To ne menja vrednost razlomka jer efektivno množimo sa \(\frac{a-b}{a-b} = 1\) odnosno \(\frac{a+b}{a+b} = 1\). Uslov \(a \neq \pm b\) garantuje da ovi izrazi nisu nula.
        </div>
      </details>
    </div>
  </div>

  <div class="step">
    <div class="step-badge">3</div>
    <div class="step-content">
      <p><strong>Saberemo brojioce</strong></p>
      <p>Sada sva tri razlomka imaju isti imenilac, pa kombinujemo brojioce:</p>
      \[
        \frac{a(a-b) \;-\; a(a+b) \;+\; (a^2+b^2)}{(a+b)(a-b)}
      \]
      <p>Razvijamo svaki proizvod u brojiocu:</p>
      \[
        a(a-b) = a^2 - ab
      \]
      \[
        a(a+b) = a^2 + ab
      \]
      <p>Uvrštavamo u brojilac:</p>
      \[
        (a^2 - ab) - (a^2 + ab) + (a^2 + b^2)
      \]
    </div>
  </div>

  <div class="step">
    <div class="step-badge">4</div>
    <div class="step-content">
      <p><strong>Sredimo brojilac</strong></p>
      <p>Rastavimo zagrade i saberemo slične članove:</p>
      \[
        a^2 - ab - a^2 - ab + a^2 + b^2
      \]
      <p>Grupisanje po stepenima:</p>
      <ul style="margin-left:20px;color:#94a3b8">
        <li>\(a^2\) članovi: \(a^2 - a^2 + a^2 = a^2\)</li>
        <li>\(ab\) članovi: \(-ab - ab = -2ab\)</li>
        <li>\(b^2\) članovi: \(+b^2\)</li>
      </ul>
      \[
        = a^2 - 2ab + b^2
      \]
      <p>Prepoznajemo formulu za <strong>kvadrat razlike</strong>:</p>
      \[
        a^2 - 2ab + b^2 = (a-b)^2
      \]

      <details class="check-yourself">
        <summary>Proveri sebe: Kako prepoznajemo kvadrat razlike?</summary>
        <div class="check-content">
          Formula glasi \((x-y)^2 = x^2 - 2xy + y^2\). U našem slučaju \(x = a\) i \(y = b\), pa je \(a^2 - 2ab + b^2 = (a-b)^2\). Ovo je jedna od osnovnih formula skraćenog množenja koju je ključno prepoznati.
        </div>
      </details>
    </div>
  </div>

  <div class="step">
    <div class="step-badge">5</div>
    <div class="step-content">
      <p><strong>Skratimo razlomak</strong></p>
      <p>Naš razlomak sada glasi:</p>
      \[
        \frac{(a-b)^2}{(a+b)(a-b)}
      \]
      <p>Pošto je \((a-b)^2 = (a-b) \cdot (a-b)\), možemo da skratimo jedan faktor \((a-b)\) iz brojioca i imenioca (jer \(a \neq b\), pa je \(a-b \neq 0\)):</p>
      \[
        \frac{\cancel{(a-b)} \cdot (a-b)}{(a+b) \cdot \cancel{(a-b)}} = \frac{a-b}{a+b}
      \]

      <details class="check-yourself">
        <summary>Proveri sebe: Zašto smemo da skratimo?</summary>
        <div class="check-content">
          Skraćivanje razlomaka je deljenje brojioca i imenioca istim izrazom. Smemo da delimo sa \((a-b)\) jer nam uslov zadatka \(a \neq \pm b\) garantuje da je \(a - b \neq 0\). Da je moglo biti \(a = b\), deljenje bi bilo nedozvoljeno!
        </div>
      </details>
    </div>
  </div>
</div>

<!-- Key Insight -->
<div class="key-insight">
  <h2><span class="icon">&#128161;</span> Ključni uvid</h2>
  <p>
    Čim uočimo da je imenilac \(a^2 - b^2 = (a+b)(a-b)\), jasno nam je da je zajednički imenilac upravo taj proizvod.
    Nakon sabiranja, brojilac se sređuje u oblik \(a^2 - 2ab + b^2\), koji je <strong>potpun kvadrat</strong> \((a-b)^2\).
    Upravo ta faktorizacija omogućava skraćivanje sa imeniocem i daje elegantan konačan rezultat.
  </p>
</div>

<!-- Final Answer -->
<div class="card final-answer">
  <h2><span class="icon">&#9989;</span> Konačan odgovor</h2>
  <div class="answer-display">
    \(\dfrac{a-b}{a+b}\)
  </div>
  <div class="options-review">
    <div class="option-item correct">A) \(\dfrac{a-b}{a+b}\)</div>
    <div class="option-item">B) \(\dfrac{a+b}{a-b}\)</div>
    <div class="option-item">C) \(\dfrac{ab}{a+b}\)</div>
    <div class="option-item">D) \(\dfrac{ab}{a-b}\)</div>
  </div>
  <div class="verification">
    <strong>Verifikacija:</strong> Proverimo za konkretne vrednosti, npr. \(a = 3\), \(b = 1\):
    \[
      \frac{3}{3+1} - \frac{3}{3-1} + \frac{9+1}{9-1} = \frac{3}{4} - \frac{3}{2} + \frac{10}{8} = \frac{3}{4} - \frac{6}{4} + \frac{5}{4} = \frac{3-6+5}{4} = \frac{2}{4} = \frac{1}{2}
    \]
    A naš odgovor daje: \(\dfrac{3-1}{3+1} = \dfrac{2}{4} = \dfrac{1}{2}\). Potvrđeno!
  </div>
</div>

<!-- Common Pitfalls -->
<div class="card">
  <h2><span class="icon">&#9888;&#65039;</span> Česte greške</h2>
  <ul class="pitfalls">
    <li><strong>Pogrešan znak kod drugog razlomka:</strong> Obratite pažnju da oduzimamo drugi razlomak, pa kad ga proširimo dobijamo \(-a(a+b) = -a^2 - ab\). Česta greška je zaboraviti da minus deluje na oba člana.</li>
    <li><strong>Ne prepoznavanje potpunog kvadrata:</strong> Ako ne uočimo da je \(a^2 - 2ab + b^2 = (a-b)^2\), nećemo moći da skratimo razlomak i možemo pogrešno zaključiti da rezultat nije među ponuđenim odgovorima.</li>
  </ul>
</div>

<!-- Optional Challenge -->
<div class="card">
  <h2><span class="icon">&#127942;</span> Dodatni izazov</h2>
  <p style="color:#cbd5e1;margin-bottom:10px">Pojednostavite sličan izraz:</p>
  \[
    \frac{b}{a+b} + \frac{b}{a-b} - \frac{2b^2}{a^2-b^2}
  \]
  <details>
    <summary>Nagoveštaj</summary>
    <div class="challenge-content">
      Postupak je isti: zajednički imenilac je \((a+b)(a-b)\). Proširite prva dva razlomka i saberite sve brojioce. Trebalo bi da dobijete potpun kvadrat u brojiocu -- ali koji?
    </div>
  </details>
</div>

</div>

<script>
(function() {
  var canvas = document.getElementById('vizCanvas');
  var ctx = canvas.getContext('2d');
  var slider = document.getElementById('stepSlider');
  var label = document.getElementById('sliderLabel');

  var W = canvas.width;
  var H = canvas.height;

  var stepLabels = [
    'Korak 0: Polazni izraz',
    'Korak 1: Zajednicki imenilac',
    'Korak 2: Prosireni razlomci',
    'Korak 3: Sabiranje brojilaca',
    'Korak 4: Konacni rezultat'
  ];

  function drawRoundedRect(x, y, w, h, r, fill, stroke) {
    ctx.beginPath();
    ctx.moveTo(x + r, y);
    ctx.lineTo(x + w - r, y);
    ctx.quadraticCurveTo(x + w, y, x + w, y + r);
    ctx.lineTo(x + w, y + h - r);
    ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
    ctx.lineTo(x + r, y + h);
    ctx.quadraticCurveTo(x, y + h, x, y + h - r);
    ctx.lineTo(x, y + r);
    ctx.quadraticCurveTo(x, y, x + r, y);
    ctx.closePath();
    if (fill) { ctx.fillStyle = fill; ctx.fill(); }
    if (stroke) { ctx.strokeStyle = stroke; ctx.lineWidth = 2; ctx.stroke(); }
  }

  function drawArrow(x1, y1, x2, y2, color) {
    ctx.strokeStyle = color;
    ctx.lineWidth = 2;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.stroke();
    ctx.setLineDash([]);
    var angle = Math.atan2(y2 - y1, x2 - x1);
    var hl = 10;
    ctx.beginPath();
    ctx.moveTo(x2, y2);
    ctx.lineTo(x2 - hl * Math.cos(angle - 0.4), y2 - hl * Math.sin(angle - 0.4));
    ctx.moveTo(x2, y2);
    ctx.lineTo(x2 - hl * Math.cos(angle + 0.4), y2 - hl * Math.sin(angle + 0.4));
    ctx.stroke();
  }

  function drawText(text, x, y, color, size, align) {
    ctx.fillStyle = color || '#e2e8f0';
    ctx.font = (size || 16) + 'px "Segoe UI", system-ui, sans-serif';
    ctx.textAlign = align || 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText(text, x, y);
  }

  function drawFraction(num, den, x, y, color, size) {
    var s = size || 16;
    drawText(num, x, y - s * 0.65, color || '#e2e8f0', s, 'center');
    ctx.strokeStyle = color || '#e2e8f0';
    ctx.lineWidth = 1.5;
    var fw = Math.max(ctx.measureText(num).width, ctx.measureText(den).width) + 10;
    ctx.beginPath();
    ctx.moveTo(x - fw / 2, y);
    ctx.lineTo(x + fw / 2, y);
    ctx.stroke();
    drawText(den, x, y + s * 0.65, color || '#e2e8f0', s, 'center');
  }

  function render(step) {
    ctx.clearRect(0, 0, W, H);
    drawRoundedRect(0, 0, W, H, 12, '#0f172a', '#334155');

    if (step === 0) {
      drawText('Polazni izraz', W / 2, 35, '#60a5fa', 20);
      drawFraction('a', 'a + b', 140, 150, '#e2e8f0', 22);
      drawText('\u2212', 255, 150, '#f472b6', 24);
      drawFraction('a', 'a \u2212 b', 355, 150, '#e2e8f0', 22);
      drawText('+', 465, 150, '#34d399', 24);
      drawFraction('a\u00B2 + b\u00B2', 'a\u00B2 \u2212 b\u00B2', 585, 150, '#e2e8f0', 22);
      drawText('Tri razlomka sa razlicitim imeniocima', W / 2, 280, '#94a3b8', 16);
      drawRoundedRect(100, 310, 520, 60, 8, null, '#334155');
      drawText('Cilj: svesti na zajednicki imenilac i pojednostaviti', W / 2, 340, '#a78bfa', 15);
    }

    if (step === 1) {
      drawText('Zajednicki imenilac', W / 2, 35, '#60a5fa', 20);
      drawRoundedRect(60, 65, 240, 55, 8, 'rgba(96,165,250,0.1)', '#60a5fa');
      drawText('(a + b)', 180, 92, '#60a5fa', 18);
      drawRoundedRect(320, 65, 240, 55, 8, 'rgba(167,139,250,0.1)', '#a78bfa');
      drawText('(a \u2212 b)', 440, 92, '#a78bfa', 18);
      drawArrow(180, 120, 290, 195, '#60a5fa');
      drawArrow(440, 120, 390, 195, '#a78bfa');
      drawRoundedRect(180, 180, 360, 55, 8, 'rgba(52,211,153,0.1)', '#34d399');
      drawText('(a + b)(a \u2212 b) = a\u00B2 \u2212 b\u00B2', 360, 207, '#34d399', 18);
      drawText('Razlika kvadrata nam daje vezu izmedju', W / 2, 280, '#94a3b8', 15);
      drawText('sva tri imenioca!', W / 2, 302, '#94a3b8', 15);
      drawRoundedRect(120, 330, 480, 55, 8, 'rgba(244,114,182,0.08)', '#f472b6');
      drawText('NZI = (a + b)(a \u2212 b)', 360, 357, '#f472b6', 18);
    }

    if (step === 2) {
      drawText('Prosireni razlomci', W / 2, 35, '#60a5fa', 20);
      drawFraction('a(a \u2212 b)', '(a+b)(a\u2212b)', 130, 120, '#60a5fa', 16);
      drawText('\u00D7(a\u2212b)', 130, 180, '#94a3b8', 12);
      drawText('\u2212', 260, 120, '#f472b6', 22);
      drawFraction('a(a + b)', '(a+b)(a\u2212b)', 380, 120, '#a78bfa', 16);
      drawText('\u00D7(a+b)', 380, 180, '#94a3b8', 12);
      drawText('+', 500, 120, '#34d399', 22);
      drawFraction('a\u00B2 + b\u00B2', '(a+b)(a\u2212b)', 610, 120, '#34d399', 16);
      drawText('vec OK', 610, 180, '#94a3b8', 12);
      drawRoundedRect(80, 220, 560, 45, 8, 'rgba(52,211,153,0.08)', '#334155');
      drawText('Svi imaju isti imenilac: (a+b)(a\u2212b)', 360, 242, '#4ade80', 16);
      drawText('Sada mozemo da saberemo samo brojioce', W / 2, 310, '#94a3b8', 15);
    }

    if (step === 3) {
      drawText('Sabiranje brojilaca', W / 2, 35, '#60a5fa', 20);
      drawText('a(a\u2212b) \u2212 a(a+b) + (a\u00B2+b\u00B2)', W / 2, 80, '#e2e8f0', 17);
      drawText('= a\u00B2 \u2212 ab \u2212 a\u00B2 \u2212 ab + a\u00B2 + b\u00B2', W / 2, 130, '#94a3b8', 17);

      drawRoundedRect(80, 165, 170, 40, 8, 'rgba(96,165,250,0.1)', '#60a5fa');
      drawText('a\u00B2: +1\u22121+1 = 1', 165, 185, '#60a5fa', 14);
      drawRoundedRect(270, 165, 180, 40, 8, 'rgba(244,114,182,0.1)', '#f472b6');
      drawText('ab: \u22121\u22121 = \u22122', 360, 185, '#f472b6', 14);
      drawRoundedRect(470, 165, 170, 40, 8, 'rgba(167,139,250,0.1)', '#a78bfa');
      drawText('b\u00B2: +1', 555, 185, '#a78bfa', 14);

      drawArrow(360, 215, 360, 245, '#4ade80');
      drawRoundedRect(180, 250, 360, 45, 8, 'rgba(52,211,153,0.12)', '#34d399');
      drawText('= a\u00B2 \u2212 2ab + b\u00B2 = (a \u2212 b)\u00B2', 360, 272, '#4ade80', 18);

      drawText('Potpun kvadrat razlike!', W / 2, 340, '#f472b6', 16);
    }

    if (step === 4) {
      drawText('Konacni rezultat', W / 2, 35, '#60a5fa', 20);

      drawFraction('(a \u2212 b)\u00B2', '(a+b)(a\u2212b)', 200, 115, '#e2e8f0', 18);
      drawText('=', 330, 115, '#94a3b8', 24);
      drawFraction('(a\u2212b)(a\u2212b)', '(a+b)(a\u2212b)', 500, 115, '#e2e8f0', 18);

      drawArrow(360, 165, 360, 215, '#f472b6');
      drawText('skracujemo (a \u2212 b)', 500, 190, '#f472b6', 14);

      drawRoundedRect(210, 230, 300, 70, 12, 'rgba(52,211,153,0.12)', '#34d399');
      drawFraction('a \u2212 b', 'a + b', 360, 265, '#4ade80', 24);

      drawRoundedRect(240, 330, 240, 50, 10, 'rgba(52,211,153,0.08)', '#4ade80');
      drawText('Odgovor: A)', 360, 355, '#4ade80', 20);
    }
  }

  function update() {
    var val = parseInt(slider.value, 10);
    label.textContent = stepLabels[val];
    render(val);
  }

  slider.addEventListener('input', update);

  var startX = 0;
  canvas.addEventListener('pointerdown', function(e) {
    startX = e.clientX;
  });
  canvas.addEventListener('pointerup', function(e) {
    var dx = e.clientX - startX;
    if (Math.abs(dx) > 30) {
      var val = parseInt(slider.value, 10);
      if (dx > 0 && val < 4) { slider.value = val + 1; }
      else if (dx < 0 && val > 0) { slider.value = val - 1; }
      update();
    }
  });

  update();
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{"title":"Sabiranje razlomaka sa promenljivama","subject":"math","unit":"algebarski_razlomci","topic_tags":["algebarski_razlomci","razlika_kvadrata","kvadrat_razlike","zajednicki_imenilac","skracivanje_razlomaka"]}
BRAINSPARK_META-->