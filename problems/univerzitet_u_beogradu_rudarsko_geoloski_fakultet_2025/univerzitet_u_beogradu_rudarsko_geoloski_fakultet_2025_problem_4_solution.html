<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Racionalna nejednacina - (x+2)/(x+1) < 2</title>
<script>
MathJax = {
  tex: { inlineMath: [['\\(', '\\)'], ['$', '$']], displayMath: [['\\[', '\\]']] },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<script type="text/info" id="logic-scratchpad">
Problem: Skup svih resenja nejednacine (x+2)/(x+1) < 2 je:
A) (-1, 0)    B) (-inf, -1) U (0, +inf)    C) (-inf, -1) U (-1, +inf)    D) (-inf, -1)

Step 1: Move everything to one side
  (x+2)/(x+1) - 2 < 0

Step 2: Combine into single fraction
  (x+2)/(x+1) - 2(x+1)/(x+1) < 0
  [(x+2) - 2(x+1)] / (x+1) < 0
  [x + 2 - 2x - 2] / (x+1) < 0
  (-x) / (x+1) < 0
  -x / (x+1) < 0

Step 3: Multiply both sides by -1 (flip inequality)
  x / (x+1) > 0

  Alternatively, we can write -x/(x+1) < 0 as x/(x+1) > 0.

Step 4: Determine sign of x/(x+1)
  Critical points: x = 0 (numerator zero), x = -1 (denominator zero, excluded)

  Sign table:
  Interval       | x     | x+1   | x/(x+1)
  (-inf, -1)     |  -    |  -    |  +      (positive)
  (-1, 0)        |  -    |  +    |  -      (negative)
  (0, +inf)      |  +    |  +    |  +      (positive)

  x/(x+1) > 0 when x in (-inf, -1) U (0, +inf)

Step 5: Domain restriction
  x != -1 (denominator cannot be zero)
  This is already excluded from our intervals.

Answer: B) (-inf, -1) U (0, +inf)

Verification:
- x = -2: (-2+2)/(-2+1) = 0/(-1) = 0 < 2. TRUE. In set (-inf, -1).
- x = -0.5: (-0.5+2)/(-0.5+1) = 1.5/0.5 = 3 < 2? FALSE. Not in solution set. (-0.5 is in (-1,0)).
- x = 1: (1+2)/(1+1) = 3/2 = 1.5 < 2. TRUE. In set (0, +inf).
- x = 0: (0+2)/(0+1) = 2/1 = 2 < 2? FALSE (not strictly less). x=0 is NOT in the solution.

Correct answer confirmed: B) (-inf, -1) U (0, +inf)
</script>
<style>
  *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    background: #0f172a;
    color: #e2e8f0;
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    line-height: 1.7;
    padding: 20px;
    max-width: 860px;
    margin: 0 auto;
  }
  h1 {
    font-size: 2rem;
    font-weight: 800;
    background: linear-gradient(135deg, #60a5fa, #a78bfa);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 4px;
    line-height: 1.3;
  }
  .subtitle {
    color: #94a3b8;
    font-size: 1.05rem;
    margin-bottom: 28px;
  }
  .card {
    background: #1e293b;
    border: 1px solid #334155;
    border-radius: 14px;
    padding: 24px 28px;
    margin-bottom: 22px;
  }
  .card-title {
    font-size: 1.2rem;
    font-weight: 700;
    margin-bottom: 14px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .card-title .icon { font-size: 1.3rem; }
  .problem-box {
    background: #172033;
    border-left: 4px solid #60a5fa;
    padding: 18px 22px;
    border-radius: 0 10px 10px 0;
    font-size: 1.08rem;
    margin-bottom: 10px;
  }
  .given-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 16px;
  }
  .given-item {
    background: rgba(51, 65, 85, 0.6);
    border: 1px solid #334155;
    border-radius: 10px;
    padding: 10px 18px;
    min-width: 120px;
    text-align: center;
  }
  .given-item .label {
    color: #94a3b8;
    font-size: 0.85rem;
    margin-bottom: 4px;
    font-weight: 600;
  }
  .given-item .value {
    color: #e2e8f0;
    font-size: 1.05rem;
    font-weight: 600;
  }
  .plan-list {
    list-style: none;
    counter-reset: plan;
  }
  .plan-list li {
    counter-increment: plan;
    padding: 6px 0 6px 36px;
    position: relative;
  }
  .plan-list li::before {
    content: counter(plan);
    position: absolute;
    left: 0;
    top: 6px;
    width: 26px;
    height: 26px;
    background: linear-gradient(135deg, #60a5fa, #a78bfa);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.82rem;
    font-weight: 700;
    color: #0f172a;
  }
  details {
    background: #172033;
    border: 1px solid #334155;
    border-radius: 10px;
    padding: 14px 20px;
    margin: 15px 0;
  }
  details summary {
    cursor: pointer;
    font-weight: 600;
    color: #a78bfa;
    list-style: none;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  details summary::before {
    content: '>';
    display: inline-block;
    transition: transform 0.2s;
    font-family: monospace;
    font-size: 1.1rem;
  }
  details[open] summary::before {
    transform: rotate(90deg);
  }
  details .inner {
    margin-top: 14px;
    padding-top: 14px;
    border-top: 1px solid #334155;
  }
  .step {
    border-left: 3px solid #334155;
    padding: 14px 0 14px 22px;
    margin-left: 12px;
    position: relative;
    margin-bottom: 4px;
    cursor: pointer;
    transition: border-color 0.2s;
  }
  .step:hover, .step.active {
    border-left-color: #34d399;
  }
  .step::before {
    content: '';
    position: absolute;
    left: -7px;
    top: 18px;
    width: 12px;
    height: 12px;
    background: #60a5fa;
    border-radius: 50%;
    border: 2px solid #0f172a;
  }
  .step:last-of-type { border-left-color: transparent; }
  .step:last-of-type:hover, .step:last-of-type.active { border-left-color: #34d399; }
  .step-label {
    font-weight: 700;
    color: #60a5fa;
    font-size: 1rem;
    margin-bottom: 6px;
  }
  .step-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    background: linear-gradient(135deg, #60a5fa, #a78bfa);
    border-radius: 50%;
    font-size: 0.85rem;
    font-weight: 700;
    color: #0f172a;
    margin-right: 8px;
  }
  .math-block {
    background: rgba(56, 189, 248, 0.08);
    border: 1px solid rgba(56, 189, 248, 0.15);
    border-radius: 8px;
    padding: 12px 18px;
    margin: 10px 0;
    font-family: 'Courier New', monospace;
  }
  .checkpoint {
    background: rgba(167, 139, 250, 0.1);
    border: 1px dashed #a78bfa;
    border-radius: 10px;
    padding: 12px 18px;
    margin: 15px 0;
    font-size: 0.95rem;
    color: #a78bfa;
  }
  .checkpoint strong { color: #c4b5fd; }
  .final-answer {
    background: linear-gradient(135deg, rgba(52, 211, 153, 0.12), rgba(74, 222, 128, 0.08));
    border: 2px solid #34d399;
    border-radius: 14px;
    padding: 26px 30px;
    text-align: center;
  }
  .final-answer .label {
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: #34d399;
    font-weight: 700;
    margin-bottom: 10px;
  }
  .final-answer .value {
    font-size: 1.7rem;
    font-weight: 800;
    color: #4ade80;
  }
  .final-options {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center;
    margin-top: 18px;
  }
  .final-option {
    background: #0f172a;
    border: 1px solid #334155;
    border-radius: 10px;
    padding: 10px 18px;
    font-size: 1rem;
    min-width: 180px;
    text-align: center;
  }
  .final-option.correct {
    border-color: #34d399;
    background: rgba(52, 211, 153, 0.1);
    box-shadow: 0 0 12px rgba(52, 211, 153, 0.15);
  }
  .insight-box {
    background: rgba(96, 165, 250, 0.08);
    border: 1px solid rgba(96, 165, 250, 0.3);
    border-radius: 12px;
    padding: 18px 22px;
  }
  .insight-box .label {
    font-weight: 700;
    color: #60a5fa;
    margin-bottom: 6px;
    font-size: 1.05rem;
  }
  .pitfall {
    background: rgba(244, 114, 182, 0.08);
    border-left: 4px solid #f472b6;
    border-radius: 0 10px 10px 0;
    padding: 14px 20px;
    margin-bottom: 10px;
  }
  .pitfall strong { color: #f472b6; }
  .challenge-box {
    background: rgba(167, 139, 250, 0.06);
    border: 1px solid rgba(167, 139, 250, 0.25);
    border-radius: 12px;
    padding: 18px 22px;
  }
  .challenge-box .label {
    font-weight: 700;
    color: #a78bfa;
    margin-bottom: 6px;
  }
  canvas {
    display: block;
    margin: 0 auto;
    border-radius: 10px;
    background: #0f172a;
    max-width: 100%;
    touch-action: none;
  }
  .sign-table {
    width: 100%;
    border-collapse: collapse;
    margin: 12px 0;
    font-size: 0.95rem;
  }
  .sign-table th, .sign-table td {
    border: 1px solid #334155;
    padding: 8px 14px;
    text-align: center;
  }
  .sign-table th {
    background: #172033;
    color: #60a5fa;
    font-weight: 700;
  }
  .sign-table .positive { color: #34d399; font-weight: 700; }
  .sign-table .negative { color: #f472b6; font-weight: 700; }
  .muted { color: #94a3b8; }
  .blue { color: #60a5fa; }
  .green { color: #34d399; }
  .purple { color: #a78bfa; }
  .pink { color: #f472b6; }
  @media (max-width: 700px) {
    body { padding: 12px; }
    h1 { font-size: 1.5rem; }
    .card { padding: 18px 16px; }
    .given-grid { flex-direction: column; }
    .final-options { flex-direction: column; align-items: center; }
    .final-option { width: 100%; }
    .sign-table { font-size: 0.82rem; }
    .sign-table th, .sign-table td { padding: 6px 8px; }
  }
</style>
</head>
<body>

<h1>Racionalna nejednacina</h1>
<p class="subtitle">Algebra &mdash; Racionalne nejednacine i analiza znaka razlomka</p>

<!-- Problem Statement -->
<div class="card problem-statement">
  <div class="card-title"><span class="icon">&#x1F4CB;</span> Zadatak</div>
  <div class="problem-box">
    Skup svih resenja nejednacine \(\displaystyle \frac{x+2}{x+1} < 2\) je:
  </div>
  <div class="given-grid">
    <div class="given-item answer-option" data-option="A">
      <div class="label">(A)</div>
      <div class="value">\((-1,\; 0)\)</div>
    </div>
    <div class="given-item answer-option" data-option="B">
      <div class="label">(B)</div>
      <div class="value">\((-\infty,\; -1) \cup (0,\; +\infty)\)</div>
    </div>
    <div class="given-item answer-option" data-option="C">
      <div class="label">(C)</div>
      <div class="value">\((-\infty,\; -1) \cup (-1,\; +\infty)\)</div>
    </div>
    <div class="given-item answer-option" data-option="D">
      <div class="label">(D)</div>
      <div class="value">\((-\infty,\; -1)\)</div>
    </div>
  </div>
</div>

<!-- Plan -->
<div class="card">
  <div class="card-title"><span class="icon">&#x1F5FA;&#xFE0F;</span> Plan resavanja</div>
  <ol class="plan-list">
    <li>Prebaci sve na jednu stranu i svedi na oblik \(\dfrac{P(x)}{Q(x)} < 0\).</li>
    <li>Odredi nule brojioca i imenioca (kriticne tacke).</li>
    <li>Analiziraj znak razlomka na svakom intervalu pomocu tablice znakova.</li>
  </ol>
</div>

<!-- Theory Refresher -->
<div class="card">
  <div class="card-title"><span class="icon">&#x1F4D6;</span> Teorijska podloga</div>
  <details>
    <summary>Kljucne formule i pravila</summary>
    <div class="inner">
      <ul style="margin-left: 18px; line-height: 2;">
        <li><strong>Racionalna nejednacina:</strong> Nejednacina oblika \(\dfrac{P(x)}{Q(x)} < 0\) resava se analizom znaka brojioca i imenioca na intervalima odredjenim njihovim nulama.</li>
        <li><strong>Kriticne tacke:</strong> To su vrednosti \(x\) za koje je brojilac jednak nuli ili imenilac jednak nuli. Imenilac nikada ne sme biti nula (te tacke se iskljucuju iz domena).</li>
        <li><strong>Tablica znakova:</strong> Na brojevnoj pravoj oznacimo kriticne tacke i u svakom intervalu odredimo znak svakog cinioca, a zatim i znak celog izraza.</li>
        <li><strong>Pravilo za razlomak:</strong> \(\dfrac{a}{b} > 0\) kada su \(a\) i \(b\) istog znaka; \(\dfrac{a}{b} < 0\) kada su razlicitog znaka.</li>
      </ul>
    </div>
  </details>
</div>

<!-- Visual Aid -->
<div class="card">
  <div class="card-title"><span class="icon">&#x1F4D0;</span> Vizuelni prikaz</div>
  <p class="muted" style="margin-bottom: 14px;">Grafik funkcije \(f(x) = \dfrac{x+2}{x+1}\) i prava \(y = 2\). Oblast gde je kriva ispod prave predstavlja resenje nejednacine. Pomeri klizac da istrazis vrednosti.</p>
  <div style="display:flex;gap:16px;flex-wrap:wrap;margin-bottom:14px;">
    <label style="display:flex;align-items:center;gap:8px;">
      <span class="blue">x =</span>
      <input type="range" id="slider-x" min="-50" max="50" value="10" style="width:200px;">
      <span id="val-x" class="blue">1,0</span>
    </label>
  </div>
  <canvas id="canvas" width="700" height="440"></canvas>
  <p class="muted" style="margin-top: 8px; text-align: center; font-size: 0.88rem;">Pomeri klizac za istrazi kako se menja vrednost funkcije u razlicitim tackama.</p>
</div>

<!-- Step-by-Step Solution -->
<div class="card">
  <div class="card-title"><span class="icon">&#x270F;&#xFE0F;</span> Resenje korak po korak</div>

  <div class="step" id="step-1">
    <div class="step-label"><span class="step-badge">1</span> Prebacivanje na jednu stranu</div>
    <p>Polazna nejednacina je:</p>
    <div class="math-block">
      \[\frac{x+2}{x+1} < 2\]
    </div>
    <p>Prebacimo \(2\) na levu stranu:</p>
    <div class="math-block">
      \[\frac{x+2}{x+1} - 2 < 0\]
    </div>
  </div>

  <div class="step" id="step-2">
    <div class="step-label"><span class="step-badge">2</span> Svodjenje na zajednicki imenilac</div>
    <p>Zapisemo \(2\) kao razlomak sa imeniocem \(x+1\):</p>
    <div class="math-block">
      \[\frac{x+2}{x+1} - \frac{2(x+1)}{x+1} < 0\]
    </div>
    <p>Sada oduzmemo razlomke:</p>
    <div class="math-block">
      \[\frac{x+2 - 2(x+1)}{x+1} < 0\]
    </div>
  </div>

  <div class="step" id="step-3">
    <div class="step-label"><span class="step-badge">3</span> Pojednostavljenje brojioca</div>
    <p>Raspisemo brojilac:</p>
    <div class="math-block">
      \[x + 2 - 2(x+1) = x + 2 - 2x - 2 = -x\]
    </div>
    <p>Nejednacina postaje:</p>
    <div class="math-block">
      \[\frac{-x}{x+1} < 0\]
    </div>

    <details>
      <summary><strong>Proveri se!</strong> Sta je vrednost brojioca za \(x = 3\)?</summary>
      <div class="inner">
        <p>Brojilac: \(3 + 2 - 2(3+1) = 5 - 8 = -3\). A \(-x = -3\). Poklapaju se!</p>
      </div>
    </details>
  </div>

  <div class="step" id="step-4">
    <div class="step-label"><span class="step-badge">4</span> Preformulacija nejednacine</div>
    <p>Pomnozimo obe strane nejednacine sa \(-1\). Kada mnozimo nejednacinu negativnim brojem, <strong>znak nejednakosti se okrece</strong>:</p>
    <div class="math-block">
      \[\frac{-x}{x+1} < 0 \;\;\Longleftrightarrow\;\; \frac{x}{x+1} > 0\]
    </div>
    <p>Sada trazimo gde je razlomak \(\dfrac{x}{x+1}\) <strong>pozitivan</strong>.</p>
  </div>

  <div class="step" id="step-5">
    <div class="step-label"><span class="step-badge">5</span> Odredjivanje kriticnih tacaka</div>
    <p>Kriticne tacke su vrednosti gde je brojilac ili imenilac jednak nuli:</p>
    <div class="math-block">
      \[x = 0 \quad \text{(nula brojioca)}\]
      \[x + 1 = 0 \;\Rightarrow\; x = -1 \quad \text{(nula imenioca &mdash; iskljucuje se iz domena)}\]
    </div>
    <p>Ove dve tacke dele brojevnu pravu na tri intervala: \((-\infty,\, -1)\), \((-1,\, 0)\) i \((0,\, +\infty)\).</p>
  </div>

  <div class="step" id="step-6">
    <div class="step-label"><span class="step-badge">6</span> Tablica znakova</div>
    <p>Odredjujemo znak svakog cinioca i celog razlomka na svakom intervalu:</p>
    <table class="sign-table">
      <thead>
        <tr>
          <th>Interval</th>
          <th>\(x\)</th>
          <th>\(x+1\)</th>
          <th>\(\dfrac{x}{x+1}\)</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>\((-\infty,\; -1)\)</td>
          <td class="negative">&minus;</td>
          <td class="negative">&minus;</td>
          <td class="positive">+</td>
        </tr>
        <tr>
          <td>\((-1,\; 0)\)</td>
          <td class="negative">&minus;</td>
          <td class="positive">+</td>
          <td class="negative">&minus;</td>
        </tr>
        <tr>
          <td>\((0,\; +\infty)\)</td>
          <td class="positive">+</td>
          <td class="positive">+</td>
          <td class="positive">+</td>
        </tr>
      </tbody>
    </table>
    <p class="muted" style="margin-top: 8px;">Minus puta minus daje plus; minus puta plus daje minus; plus puta plus daje plus.</p>
  </div>

  <details>
    <summary><strong>Proveri se!</strong> U kom intervalu se nalazi \(x = -2\) i da li zadovoljava polaznu nejednacinu?</summary>
    <div class="inner">
      <p>\(x = -2\) pripada intervalu \((-\infty, -1)\). Proveravamo: \(\dfrac{-2+2}{-2+1} = \dfrac{0}{-1} = 0 < 2\). Da, zadovoljava!</p>
    </div>
  </details>

  <div class="step" id="step-7">
    <div class="step-label"><span class="step-badge">7</span> Citanje resenja</div>
    <p>Trazimo gde je \(\dfrac{x}{x+1} > 0\), tj. gde je znak <span class="green"><strong>pozitivan (+)</strong></span>.</p>
    <p>Iz tablice vidimo da je to na intervalima:</p>
    <div class="math-block">
      \[x \in (-\infty,\; -1) \cup (0,\; +\infty)\]
    </div>
    <p class="muted">Tacka \(x = -1\) je iskljucena jer imenilac postaje nula. Tacka \(x = 0\) je iskljucena jer trazimo strogo vece od nule (tj. \(\dfrac{x+2}{x+1} < 2\), a za \(x = 0\) vazi \(\dfrac{0+2}{0+1} = 2\), sto nije strogo manje).</p>
  </div>

  <details>
    <summary><strong>Proveri se!</strong> Da li \(x = 1\) zadovoljava polaznu nejednacinu?</summary>
    <div class="inner">
      <p>\(\dfrac{1+2}{1+1} = \dfrac{3}{2} = 1{,}5\). Da li je \(1{,}5 < 2\)? Da! Tacka \(x = 1\) pripada intervalu \((0, +\infty)\), sto se poklapa sa nasim resenjem.</p>
    </div>
  </details>
</div>

<!-- Key Insight -->
<div class="card">
  <div class="insight-box">
    <div class="label">Kljucni uvid</div>
    <p>Kljuc ovog zadatka je <strong>ne mnoziti obe strane nejednacine sa \(x+1\)</strong> bez razmatranja znaka, jer ne znamo da li je \(x + 1\) pozitivno ili negativno. Umesto toga, sve prebacimo na jednu stranu, svedemo na jedan razlomak i analiziramo znak tog razlomka pomocu tablice znakova. To je univerzalni metod za racionalne nejednacine.</p>
  </div>
</div>

<!-- Final Answer -->
<div class="card">
  <div class="final-answer">
    <div class="label">Konacan odgovor</div>
    <div class="value">
      B) \(\;(-\infty,\; -1) \cup (0,\; +\infty)\)
    </div>
    <div class="final-options" style="margin-top: 18px;">
      <div class="final-option" data-option="A">A) \((-1,\; 0)\)</div>
      <div class="final-option correct" data-option="B">B) \((-\infty,\; -1) \cup (0,\; +\infty)\)</div>
      <div class="final-option" data-option="C">C) \((-\infty,\; -1) \cup (-1,\; +\infty)\)</div>
      <div class="final-option" data-option="D">D) \((-\infty,\; -1)\)</div>
    </div>
    <p style="margin-top: 16px; color: #94a3b8; font-size: 0.95rem;">
      <strong>Provera:</strong> Za \(x = -2\): \(\frac{0}{-1} = 0 < 2\) &check;&ensp; Za \(x = 1\): \(\frac{3}{2} = 1{,}5 < 2\) &check;&ensp; Za \(x = -0{,}5\): \(\frac{1{,}5}{0{,}5} = 3 \not< 2\) &check;
    </p>
  </div>
</div>

<!-- Common Pitfalls -->
<div class="card">
  <div class="card-title"><span class="icon">&#x26A0;&#xFE0F;</span> Najcesce greske</div>
  <div class="pitfall">
    <strong>Greska 1: Mnozenje obe strane sa \(x+1\) bez razmatranja znaka.</strong>
    Ako pomnozis obe strane nejednacine sa \(x+1\), moras razlikovati dva slucaja: \(x+1 > 0\) i \(x+1 < 0\), jer se u drugom slucaju znak nejednakosti okrece. Ko ovo ne uradi dobija samo deo resenja (obicno samo \((0, +\infty)\) ili samo \((-1, 0)\)).
  </div>
  <div class="pitfall">
    <strong>Greska 2: Ukljucivanje tacke \(x = 0\) u resenje.</strong>
    Za \(x = 0\) polazna nejednacina daje \(\frac{2}{1} = 2\), a nejednakost je <strong>stroga</strong> (\(<\), ne \(\leq\)). Dakle, \(x = 0\) ne pripada skupu resenja. Takodje, \(x = -1\) se uvek iskljucuje jer je imenilac nula.
  </div>
</div>

<!-- Optional Challenge -->
<div class="card">
  <div class="challenge-box">
    <div class="label">Izazov za napredne</div>
    <p>Kako bi se promenio skup resenja da je nejednacina bila \(\dfrac{x+2}{x+1} \leq 2\) (sa znakom \(\leq\) umesto \(<\))?</p>
    <details>
      <summary>Pogledaj nagove≈°taj</summary>
      <div class="inner">
        <p>Jedina razlika je sto bi sada i tacka \(x = 0\) bila ukljucena (jer za \(x = 0\) vazi jednakost \(\frac{2}{1} = 2\)). Tacka \(x = -1\) i dalje ne pripada domenu. Resenje bi bilo \((-\infty, -1) \cup [0, +\infty)\).</p>
      </div>
    </details>
  </div>
</div>

<script>
(() => {
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  const slider = document.getElementById('slider-x');
  const valDisplay = document.getElementById('val-x');

  function f(x) {
    if (Math.abs(x + 1) < 0.0001) return null;
    return (x + 2) / (x + 1);
  }

  function draw() {
    const W = canvas.width;
    const H = canvas.height;
    const xSlider = parseInt(slider.value) / 10;

    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, W, H);

    // Coordinate system setup
    const xMin = -5;
    const xMax = 5;
    const yMin = -4;
    const yMax = 6;
    const padL = 50;
    const padR = 20;
    const padT = 20;
    const padB = 40;
    const plotW = W - padL - padR;
    const plotH = H - padT - padB;

    function toCanvasX(x) { return padL + (x - xMin) / (xMax - xMin) * plotW; }
    function toCanvasY(y) { return padT + (yMax - y) / (yMax - yMin) * plotH; }

    // Grid lines
    ctx.strokeStyle = '#1e293b';
    ctx.lineWidth = 1;
    for (let gx = Math.ceil(xMin); gx <= Math.floor(xMax); gx++) {
      const cx = toCanvasX(gx);
      ctx.beginPath();
      ctx.moveTo(cx, padT);
      ctx.lineTo(cx, H - padB);
      ctx.stroke();
    }
    for (let gy = Math.ceil(yMin); gy <= Math.floor(yMax); gy++) {
      const cy = toCanvasY(gy);
      ctx.beginPath();
      ctx.moveTo(padL, cy);
      ctx.lineTo(W - padR, cy);
      ctx.stroke();
    }

    // Axes
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 2;
    // x-axis
    const yAxisCanvas = toCanvasY(0);
    ctx.beginPath();
    ctx.moveTo(padL, yAxisCanvas);
    ctx.lineTo(W - padR, yAxisCanvas);
    ctx.stroke();
    // y-axis
    const xAxisCanvas = toCanvasX(0);
    ctx.beginPath();
    ctx.moveTo(xAxisCanvas, padT);
    ctx.lineTo(xAxisCanvas, H - padB);
    ctx.stroke();

    // Axis labels
    ctx.fillStyle = '#64748b';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    for (let gx = Math.ceil(xMin); gx <= Math.floor(xMax); gx++) {
      if (gx === 0) continue;
      ctx.fillText(String(gx), toCanvasX(gx), yAxisCanvas + 18);
    }
    ctx.textAlign = 'right';
    for (let gy = Math.ceil(yMin); gy <= Math.floor(yMax); gy++) {
      if (gy === 0) continue;
      ctx.fillText(String(gy), xAxisCanvas - 8, toCanvasY(gy) + 5);
    }
    ctx.fillText('x', W - padR + 5, yAxisCanvas + 18);
    ctx.textAlign = 'center';
    ctx.fillText('y', xAxisCanvas + 12, padT - 5);

    // Draw y = 2 line
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2;
    ctx.setLineDash([6, 4]);
    const y2Canvas = toCanvasY(2);
    ctx.beginPath();
    ctx.moveTo(padL, y2Canvas);
    ctx.lineTo(W - padR, y2Canvas);
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = '#a78bfa';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('y = 2', W - padR - 45, y2Canvas - 8);

    // Vertical asymptote x = -1
    ctx.strokeStyle = 'rgba(244, 114, 182, 0.5)';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([4, 4]);
    const asymCanvas = toCanvasX(-1);
    ctx.beginPath();
    ctx.moveTo(asymCanvas, padT);
    ctx.lineTo(asymCanvas, H - padB);
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = '#f472b6';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('x = -1', asymCanvas + 4, padT + 16);

    // Horizontal asymptote y = 1
    ctx.strokeStyle = 'rgba(148, 163, 184, 0.3)';
    ctx.lineWidth = 1;
    ctx.setLineDash([3, 3]);
    const asymY1 = toCanvasY(1);
    ctx.beginPath();
    ctx.moveTo(padL, asymY1);
    ctx.lineTo(W - padR, asymY1);
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = '#94a3b8';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('y = 1', W - padR - 40, asymY1 + 14);

    // Shade solution regions (where f(x) < 2)
    // Region 1: (-inf, -1) => xMin to -1
    ctx.fillStyle = 'rgba(52, 211, 153, 0.08)';
    ctx.fillRect(padL, padT, toCanvasX(-1) - padL, plotH);
    // Region 2: (0, +inf) => 0 to xMax
    ctx.fillRect(toCanvasX(0), padT, W - padR - toCanvasX(0), plotH);

    // Draw curve f(x) = (x+2)/(x+1)
    ctx.lineWidth = 2.5;
    const step = 0.02;

    // Left branch: xMin to just before -1
    ctx.strokeStyle = '#60a5fa';
    ctx.beginPath();
    let started = false;
    for (let x = xMin; x < -1 - step; x += step) {
      const y = f(x);
      if (y === null || y < yMin - 2 || y > yMax + 2) { started = false; continue; }
      const cx = toCanvasX(x);
      const cy = toCanvasY(y);
      if (!started) { ctx.moveTo(cx, cy); started = true; }
      else ctx.lineTo(cx, cy);
    }
    ctx.stroke();

    // Right branch: just after -1 to xMax
    ctx.strokeStyle = '#60a5fa';
    ctx.beginPath();
    started = false;
    for (let x = -1 + step; x <= xMax; x += step) {
      const y = f(x);
      if (y === null || y < yMin - 2 || y > yMax + 2) { started = false; continue; }
      const cx = toCanvasX(x);
      const cy = toCanvasY(y);
      if (!started) { ctx.moveTo(cx, cy); started = true; }
      else ctx.lineTo(cx, cy);
    }
    ctx.stroke();

    // Label the curve
    ctx.fillStyle = '#60a5fa';
    ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    const labelX = 2.5;
    const labelY = f(labelX);
    if (labelY !== null) {
      ctx.fillText('f(x) = (x+2)/(x+1)', toCanvasX(labelX) + 8, toCanvasY(labelY) - 10);
    }

    // Mark key point x=0, y=2
    ctx.beginPath();
    ctx.arc(toCanvasX(0), toCanvasY(2), 5, 0, 2 * Math.PI);
    ctx.strokeStyle = '#e2e8f0';
    ctx.lineWidth = 2;
    ctx.stroke();
    ctx.fillStyle = '#0f172a';
    ctx.fill();
    ctx.fillStyle = '#94a3b8';
    ctx.font = '11px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('(0, 2) - nije resenje', toCanvasX(0) + 8, toCanvasY(2) - 8);

    // Slider point
    if (Math.abs(xSlider + 1) > 0.05) {
      const yVal = f(xSlider);
      if (yVal !== null && yVal >= yMin && yVal <= yMax) {
        const px = toCanvasX(xSlider);
        const py = toCanvasY(yVal);

        // Dashed lines to axes
        ctx.setLineDash([3, 3]);
        ctx.strokeStyle = 'rgba(74, 222, 128, 0.35)';
        ctx.lineWidth = 1;
        ctx.beginPath(); ctx.moveTo(px, py); ctx.lineTo(px, yAxisCanvas); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(px, py); ctx.lineTo(xAxisCanvas, py); ctx.stroke();
        ctx.setLineDash([]);

        // Point glow
        const gradient = ctx.createRadialGradient(px, py, 0, px, py, 16);
        gradient.addColorStop(0, 'rgba(74, 222, 128, 0.4)');
        gradient.addColorStop(1, 'rgba(74, 222, 128, 0)');
        ctx.fillStyle = gradient;
        ctx.beginPath();
        ctx.arc(px, py, 16, 0, 2 * Math.PI);
        ctx.fill();

        // Point
        const isSolution = yVal < 2;
        ctx.beginPath();
        ctx.arc(px, py, 5, 0, 2 * Math.PI);
        ctx.fillStyle = isSolution ? '#4ade80' : '#f472b6';
        ctx.fill();

        // Label
        ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
        ctx.fillStyle = isSolution ? '#4ade80' : '#f472b6';
        ctx.textAlign = 'center';
        const yText = yVal.toFixed(2).replace('.', ',');
        const status = isSolution ? ' < 2 (resenje!)' : ' >= 2 (nije resenje)';
        ctx.fillText('f(' + xSlider.toFixed(1).replace('.', ',') + ') = ' + yText + status, px, py - 14);
      }
    }

    // Legend
    const legX = padL + 8;
    const legY = H - padB + 28;
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'left';

    ctx.fillStyle = '#60a5fa';
    ctx.fillRect(legX, legY - 8, 14, 3);
    ctx.fillText('f(x)', legX + 20, legY);

    ctx.fillStyle = '#a78bfa';
    ctx.setLineDash([4, 3]);
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 2;
    ctx.beginPath(); ctx.moveTo(legX + 90, legY - 6); ctx.lineTo(legX + 104, legY - 6); ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillText('y = 2', legX + 110, legY);

    ctx.fillStyle = 'rgba(52, 211, 153, 0.25)';
    ctx.fillRect(legX + 180, legY - 10, 14, 14);
    ctx.fillStyle = '#34d399';
    ctx.fillText('resenje', legX + 200, legY);
  }

  slider.addEventListener('input', function() {
    const xVal = (parseInt(slider.value) / 10).toFixed(1).replace('.', ',');
    valDisplay.textContent = xVal;
    draw();
  });

  // Touch support
  canvas.addEventListener('touchstart', function(e) { e.preventDefault(); }, { passive: false });
  canvas.addEventListener('touchmove', function(e) { e.preventDefault(); }, { passive: false });

  // Step click highlighting
  const steps = document.querySelectorAll('.step');
  steps.forEach(function(step) {
    step.addEventListener('click', function() {
      steps.forEach(function(s) { s.classList.remove('active'); });
      step.classList.add('active');
    });
  });

  // Responsive canvas
  function resizeCanvas() {
    const container = canvas.parentElement;
    const maxW = container.clientWidth - 56;
    if (maxW < 700) {
      canvas.style.width = maxW + 'px';
      canvas.style.height = (maxW * 440 / 700) + 'px';
    }
  }
  window.addEventListener('resize', resizeCanvas);
  resizeCanvas();

  draw();
})();
</script>

</body>
</html>
<!--BRAINSPARK_META
{"title":"Racionalna nejednacina (x+2)/(x+1) < 2","subject":"math","unit":"algebra","topic_tags":["racionalne nejednacine","analiza znaka","tablica znakova","razlomljene nejednacine"]}
BRAINSPARK_META-->