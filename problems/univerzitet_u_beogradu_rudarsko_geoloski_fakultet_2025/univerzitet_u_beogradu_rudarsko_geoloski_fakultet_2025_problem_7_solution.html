<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nejednacina sa apsolutnom vrednoscu |2x - 1| - x &le; 4</title>

<script type="text/info" id="logic-scratchpad">
PROBLEM: Solve |2x - 1| - x <= 4 for x in R.
Options: A) [-1, 5]  B) (-inf, 5]  C) (-inf, -1] U [5, +inf)  D) [-1, +inf)

STEP 1: Isolate the absolute value.
|2x - 1| <= 4 + x

Note: The right side 4 + x must be >= 0 for solutions to exist (since |2x-1| >= 0 always).
But actually |2x-1| <= 4+x can hold even if we don't explicitly require 4+x >= 0,
because if 4+x < 0, then |2x-1| >= 0 > 4+x, so no solution there anyway.

STEP 2: Consider two cases based on the sign of (2x - 1).

Case 1: 2x - 1 >= 0, i.e., x >= 1/2
Then |2x - 1| = 2x - 1.
The inequality becomes:
(2x - 1) - x <= 4
x - 1 <= 4
x <= 5

Combined with x >= 1/2: x in [1/2, 5]

Case 2: 2x - 1 < 0, i.e., x < 1/2
Then |2x - 1| = -(2x - 1) = 1 - 2x.
The inequality becomes:
(1 - 2x) - x <= 4
1 - 3x <= 4
-3x <= 3
x >= -1

Combined with x < 1/2: x in [-1, 1/2)

STEP 3: Union of both cases.
[-1, 1/2) U [1/2, 5] = [-1, 5]

STEP 4: Verification of boundary points.
x = -1: |2(-1) - 1| - (-1) = |-3| + 1 = 3 + 1 = 4 <= 4. YES.
x = 5: |2(5) - 1| - 5 = |9| - 5 = 9 - 5 = 4 <= 4. YES.
x = -2 (outside): |2(-2) - 1| - (-2) = |-5| + 2 = 5 + 2 = 7 > 4. NOT a solution.
x = 6 (outside): |2(6) - 1| - 6 = |11| - 6 = 11 - 6 = 5 > 4. NOT a solution.
x = 0 (inside): |2(0) - 1| - 0 = 1 <= 4. YES.

ANSWER: A) [-1, 5]
</script>

<script>
MathJax = {
  tex: { inlineMath: [['\\(', '\\)'], ['$', '$']], displayMath: [['\\[', '\\]']] },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

<style>
*, *::before, *::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 1rem;
  min-height: 100vh;
}

.container {
  max-width: 800px;
  margin: 0 auto;
  padding: 1rem 0;
}

h1 {
  font-size: clamp(1.5rem, 4vw, 2.2rem);
  font-weight: 700;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-align: center;
  margin-bottom: 0.25rem;
}

.subtitle {
  text-align: center;
  color: #94a3b8;
  font-size: 1.05rem;
  margin-bottom: 2rem;
}

.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
}

.card-title {
  font-size: 1.15rem;
  font-weight: 600;
  color: #60a5fa;
  margin-bottom: 0.75rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.card-title .icon {
  font-size: 1.3rem;
}

.problem-statement {
  background: #1e293b;
  border: 2px solid #a78bfa;
  border-radius: 14px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  font-size: 1.1rem;
}

.problem-statement .card-title {
  color: #a78bfa;
}

.given-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 0.5rem;
  margin-top: 1rem;
}

.given-item.answer-option {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 8px;
  padding: 0.5rem 0.75rem;
  text-align: center;
  font-size: 1rem;
  transition: border-color 0.2s;
}

.given-item.answer-option.correct {
  border-color: #4ade80;
  background: rgba(74, 222, 128, 0.1);
  color: #4ade80;
  font-weight: 600;
}

.plan-list {
  list-style: none;
  counter-reset: plan;
}

.plan-list li {
  counter-increment: plan;
  padding: 0.4rem 0 0.4rem 2.2rem;
  position: relative;
}

.plan-list li::before {
  content: counter(plan);
  position: absolute;
  left: 0;
  top: 0.4rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #0f172a;
  width: 1.6rem;
  height: 1.6rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.85rem;
}

details {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  margin-bottom: 1.5rem;
}

details summary {
  padding: 1rem 1.5rem;
  cursor: pointer;
  font-weight: 600;
  color: #a78bfa;
  list-style: none;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

details summary::-webkit-details-marker { display: none; }

details summary::before {
  content: '\25B6';
  font-size: 0.75rem;
  transition: transform 0.2s;
}

details[open] summary::before {
  transform: rotate(90deg);
}

details .detail-content {
  padding: 0 1.5rem 1.5rem;
}

.step {
  border-left: 3px solid #334155;
  padding-left: 1.25rem;
  margin-bottom: 1.5rem;
  position: relative;
}

.step::before {
  content: '';
  position: absolute;
  left: -7px;
  top: 0;
  width: 11px;
  height: 11px;
  border-radius: 50%;
  background: #60a5fa;
}

.step-title {
  font-weight: 600;
  color: #60a5fa;
  margin-bottom: 0.4rem;
  font-size: 1.05rem;
}

.checkpoint {
  background: rgba(163, 130, 250, 0.1);
  border: 1px solid #a78bfa;
  border-radius: 10px;
  padding: 0.75rem 1rem;
  margin: 0.75rem 0;
  font-size: 0.95rem;
  color: #a78bfa;
}

.checkpoint-label {
  font-weight: 700;
  margin-right: 0.25rem;
}

.canvas-wrap {
  text-align: center;
  margin: 1rem 0;
}

canvas {
  border-radius: 12px;
  background: #0f172a;
  border: 1px solid #334155;
  max-width: 100%;
  touch-action: none;
}

.final-answer {
  background: rgba(74, 222, 128, 0.08);
  border: 2px solid #4ade80;
  border-radius: 14px;
  padding: 1.5rem;
  text-align: center;
  margin-bottom: 1.5rem;
}

.final-answer .label {
  font-size: 0.95rem;
  color: #94a3b8;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  margin-bottom: 0.5rem;
}

.final-answer .value {
  font-size: 1.6rem;
  font-weight: 700;
  color: #4ade80;
}

.insight-box {
  background: linear-gradient(135deg, rgba(96,165,250,0.1), rgba(167,139,250,0.1));
  border: 1px solid #60a5fa;
  border-radius: 14px;
  padding: 1.25rem 1.5rem;
  margin-bottom: 1.5rem;
}

.insight-box .card-title {
  color: #60a5fa;
}

.pitfall {
  background: rgba(244, 114, 182, 0.08);
  border: 1px solid #f472b6;
  border-radius: 10px;
  padding: 0.75rem 1rem;
  margin-bottom: 0.75rem;
}

.pitfall strong {
  color: #f472b6;
}

.challenge-box {
  background: rgba(52, 211, 153, 0.08);
  border: 1px dashed #34d399;
  border-radius: 14px;
  padding: 1.25rem 1.5rem;
  margin-bottom: 1rem;
}

.challenge-box .card-title {
  color: #34d399;
}

.muted {
  color: #94a3b8;
}

.highlight {
  color: #4ade80;
  font-weight: 600;
}

.case-box {
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 10px;
  padding: 1rem 1.25rem;
  margin: 0.75rem 0;
}

.case-box.valid {
  border-color: #4ade80;
  background: rgba(74, 222, 128, 0.05);
}

.case-box.invalid {
  border-color: #f472b6;
  background: rgba(244, 114, 182, 0.05);
}

.case-label {
  font-weight: 700;
  font-size: 0.9rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: 0.25rem;
}

.case-label.valid { color: #4ade80; }
.case-label.invalid { color: #f472b6; }

mjx-container {
  overflow-x: auto;
}

@media (max-width: 700px) {
  body { padding: 0.5rem; }
  .card, .problem-statement, details .detail-content, .final-answer,
  .insight-box, .challenge-box { padding: 1rem; }
  .given-grid { grid-template-columns: repeat(2, 1fr); }
}
</style>
</head>
<body>
<div class="container">

  <!-- TITLE -->
  <h1>Nejednacina sa apsolutnom vrednoscu</h1>
  <p class="subtitle">Apsolutna vrednost i linearne nejednacine</p>

  <!-- PROBLEM STATEMENT -->
  <div class="problem-statement card">
    <div class="card-title"><span class="icon">&#128220;</span> Zadatak</div>
    <p>Skup svih resenja nejednacine \(|2x - 1| - x \le 4\) u skupu realnih brojeva je:</p>
    <div class="given-grid">
      <div class="given-item answer-option correct" data-option="A">A) \([-1,\; 5]\)</div>
      <div class="given-item answer-option" data-option="B">B) \((-\infty,\; 5]\)</div>
      <div class="given-item answer-option" data-option="C">C) \((-\infty, -1] \cup [5, +\infty)\)</div>
      <div class="given-item answer-option" data-option="D">D) \([-1,\; +\infty)\)</div>
    </div>
  </div>

  <!-- PLAN -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128204;</span> Plan resavanja</div>
    <ol class="plan-list">
      <li>Razdvojiti nejednacinu na dva slucaja prema znaku izraza pod apsolutnom vrednoscu</li>
      <li>Resiti linearnu nejednacinu u svakom slucaju</li>
      <li>Preseci svako resenje sa uslovom tog slucaja</li>
      <li>Ujediniti (unija) dobijene intervale</li>
    </ol>
  </div>

  <!-- THEORY REFRESHER -->
  <details>
    <summary>Podsetnik iz teorije</summary>
    <div class="detail-content">
      <p><strong>Definicija apsolutne vrednosti:</strong></p>
      \[|t| = \begin{cases} t, & t \ge 0 \\ -t, & t < 0 \end{cases}\]
      <p style="margin-top:0.75rem"><strong>Resavanje nejednacina sa apsolutnom vrednoscu:</strong></p>
      <p>Nejednacinu oblika \(|f(x)| \le g(x)\) mozemo resiti razdvajanjem na dva slucaja prema znaku izraza \(f(x)\), ili ekvivalentno:</p>
      \[|f(x)| \le g(x) \;\Leftrightarrow\; -g(x) \le f(x) \le g(x) \quad \text{(uz uslov } g(x) \ge 0\text{)}\]
      <p style="margin-top:0.75rem"><strong>Alternativni pristup &mdash; dvostruka nejednacina:</strong></p>
      <p>Ako zapisemo \(|2x-1| \le 4 + x\), onda je to ekvivalentno sistemu:</p>
      \[-(4+x) \le 2x - 1 \le 4 + x \quad \text{i} \quad 4 + x \ge 0\]
      <p style="margin-top:0.75rem"><strong>Vazno:</strong> Skup resenja nejednacine sa apsolutnom vrednoscu je unija skupova resenja iz svakog slucaja.</p>
    </div>
  </details>

  <!-- VISUAL AID -->
  <div class="card">
    <div class="card-title"><span class="icon">&#128202;</span> Graficki prikaz</div>
    <p class="muted" style="margin-bottom:0.75rem;">Grafici funkcija \(y = |2x - 1| - x\) (plavo) i \(y = 4\) (zeleno). Oblast gde je plava kriva ispod ili na zelenoj liniji je skup resenja.</p>
    <div class="canvas-wrap">
      <canvas id="graph" width="700" height="420"></canvas>
    </div>
  </div>

  <!-- STEP-BY-STEP SOLUTION -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9999;&#65039;</span> Resenje korak po korak</div>

    <!-- Step 1 -->
    <div class="step">
      <div class="step-title">Korak 1: Postavljanje uslova za razdvajanje</div>
      <p>Izraz pod apsolutnom vrednoscu je \(2x - 1\). Njegov znak se menja u tacki gde je \(2x - 1 = 0\), tj. pri \(x = \frac{1}{2}\).</p>
      <p>Razdvajamo na dva slucaja:</p>
      <ul style="margin-left:1.5rem; margin-top:0.4rem;">
        <li><strong>Slucaj 1:</strong> \(x \ge \frac{1}{2}\) (tada je \(2x - 1 \ge 0\))</li>
        <li><strong>Slucaj 2:</strong> \(x < \frac{1}{2}\) (tada je \(2x - 1 < 0\))</li>
      </ul>
    </div>

    <!-- Step 2 -->
    <div class="step">
      <div class="step-title">Korak 2: Slucaj 1 &mdash; \(x \ge \frac{1}{2}\)</div>
      <p>Kada je \(2x - 1 \ge 0\), vazi \(|2x - 1| = 2x - 1\). Nejednacina postaje:</p>
      \[(2x - 1) - x \le 4\]
      \[x - 1 \le 4\]
      \[x \le 5\]
      <div class="case-box valid">
        <div class="case-label valid">Rezultat slucaja 1</div>
        <p>Uslov slucaja je \(x \ge \frac{1}{2}\), a dobili smo \(x \le 5\). Presek daje:</p>
        \[x \in \left[\frac{1}{2},\; 5\right]\]
      </div>
    </div>

    <div class="checkpoint">
      <span class="checkpoint-label">Proveri se:</span> Za \(x = 3\) (unutar intervala): \(|2 \cdot 3 - 1| - 3 = |5| - 3 = 5 - 3 = 2 \le 4\). Tacno!
    </div>

    <!-- Step 3 -->
    <div class="step">
      <div class="step-title">Korak 3: Slucaj 2 &mdash; \(x < \frac{1}{2}\)</div>
      <p>Kada je \(2x - 1 < 0\), vazi \(|2x - 1| = -(2x - 1) = 1 - 2x\). Nejednacina postaje:</p>
      \[(1 - 2x) - x \le 4\]
      \[1 - 3x \le 4\]
      \[-3x \le 3\]
      <p>Delimo sa \(-3\) i <strong>menjamo smer nejednacine</strong>:</p>
      \[x \ge -1\]
      <div class="case-box valid">
        <div class="case-label valid">Rezultat slucaja 2</div>
        <p>Uslov slucaja je \(x < \frac{1}{2}\), a dobili smo \(x \ge -1\). Presek daje:</p>
        \[x \in \left[-1,\; \frac{1}{2}\right)\]
      </div>
    </div>

    <div class="checkpoint">
      <span class="checkpoint-label">Proveri se:</span> Za \(x = 0\) (unutar intervala): \(|2 \cdot 0 - 1| - 0 = |-1| = 1 \le 4\). Tacno!
    </div>

    <!-- Step 4 -->
    <div class="step">
      <div class="step-title">Korak 4: Unija intervala</div>
      <p>Skup resenja je unija skupova iz oba slucaja:</p>
      \[\left[-1,\; \frac{1}{2}\right) \cup \left[\frac{1}{2},\; 5\right] = [-1,\; 5]\]
      <p>Intervali se nadovezuju u tacki \(x = \frac{1}{2}\), pa se spajaju u jedan zatvoren interval.</p>
    </div>

    <!-- Step 5 -->
    <div class="step">
      <div class="step-title">Korak 5: Verifikacija granicnih tacaka</div>
      <p><strong>Za \(x = -1\):</strong></p>
      \[|2 \cdot (-1) - 1| - (-1) = |-3| + 1 = 3 + 1 = 4 \le 4 \quad \checkmark\]
      <p><strong>Za \(x = 5\):</strong></p>
      \[|2 \cdot 5 - 1| - 5 = |9| - 5 = 9 - 5 = 4 \le 4 \quad \checkmark\]
      <p><strong>Za \(x = -2\) (van intervala):</strong></p>
      \[|2 \cdot (-2) - 1| - (-2) = |-5| + 2 = 5 + 2 = 7 > 4 \quad \text{(nije resenje)}\]
      <p><strong>Za \(x = 6\) (van intervala):</strong></p>
      \[|2 \cdot 6 - 1| - 6 = |11| - 6 = 11 - 6 = 5 > 4 \quad \text{(nije resenje)}\]
    </div>

    <div class="checkpoint">
      <span class="checkpoint-label">Proveri se:</span> Obe granicne tacke daju jednakost (\(= 4\)), sto znaci da su ukljucene u skup resenja. Zato je interval <strong>zatvoren</strong> sa obe strane: \([-1, 5]\).
    </div>
  </div>

  <!-- KEY INSIGHT -->
  <div class="insight-box">
    <div class="card-title"><span class="icon">&#128161;</span> Kljucni uvid</div>
    <p>Nejednacina \(|2x-1| - x \le 4\) definise oblast izmedju dve tacke gde leva strana dostize vrednost 4. Funkcija \(f(x) = |2x-1| - x\) ima oblik slova V (presavijenu pravu), a njen minimum je u tacki \(x = \frac{1}{2}\) gde iznosi \(f\!\left(\frac{1}{2}\right) = 0 - \frac{1}{2} = -\frac{1}{2}\). Posto funkcija raste na obe strane od minimuma, skup resenja je <em>zatvoren interval</em> &mdash; sto odmah eliminise odgovore B i D koji sadrze beskonacne intervale.</p>
  </div>

  <!-- FINAL ANSWER -->
  <div class="final-answer">
    <div class="label">Konacan odgovor</div>
    <div class="value">A) \(\;[-1,\; 5]\)</div>
  </div>

  <!-- COMMON PITFALLS -->
  <div class="card">
    <div class="card-title"><span class="icon">&#9888;&#65039;</span> Ceste greske</div>
    <div class="pitfall">
      <strong>Zaborav promene smera nejednacine:</strong> U slucaju 2, pri deljenju sa \(-3\), mnogi ucenici zaborave da promene smer nejednacine (\(\le\) postaje \(\ge\)) i dobiju pogresan rezultat \(x \le -1\), sto vodi ka odgovoru C.
    </div>
    <div class="pitfall">
      <strong>Nepravilan presek sa uslovom slucaja:</strong> Neki ucenici samo nadju resenja nejednacine u svakom slucaju, ali zaborave da ih preseku sa uslovom \(x \ge \frac{1}{2}\) odnosno \(x < \frac{1}{2}\). Ovo moze dovesti do pogresno velikog skupa resenja.
    </div>
    <div class="pitfall">
      <strong>Otvorena/zatvorena zagrada:</strong> U ovom zadatku obe granicne tacke zadovoljavaju nejednacinu (jednakost \(= 4\)), pa interval mora biti <strong>zatvoren</strong>: \([-1, 5]\), a ne \((-1, 5)\).
    </div>
  </div>

  <!-- OPTIONAL CHALLENGE -->
  <div class="challenge-box">
    <div class="card-title"><span class="icon">&#127942;</span> Dodatni izazov</div>
    <p>Resi nejednacinu \(|3x + 2| - 2x \le 5\) i odredi skup resenja.</p>
    <p class="muted" style="margin-top:0.5rem;font-size:0.9rem;">Savet: Razdvoji na slucajeve prema znaku izraza \(3x + 2\), resi svaki slucaj, preseci sa uslovom i ujedini rezultate. Proveri granicne tacke!</p>
  </div>

</div>

<script>
(function() {
  var canvas = document.getElementById('graph');
  if (!canvas) return;
  var ctx = canvas.getContext('2d');
  var W = canvas.width;
  var H = canvas.height;

  // Coordinate system
  var xMin = -4, xMax = 8;
  var yMin = -2, yMax = 9;

  var padLeft = 60, padRight = 30, padTop = 25, padBottom = 45;

  function toCanvasX(x) { return padLeft + ((x - xMin) / (xMax - xMin)) * (W - padLeft - padRight); }
  function toCanvasY(y) { return H - padBottom - ((y - yMin) / (yMax - yMin)) * (H - padTop - padBottom); }

  // f(x) = |2x - 1| - x
  function f(x) { return Math.abs(2 * x - 1) - x; }

  // Clear
  ctx.fillStyle = '#0f172a';
  ctx.fillRect(0, 0, W, H);

  // Grid
  ctx.strokeStyle = '#1e293b';
  ctx.lineWidth = 1;
  for (var gx = Math.ceil(xMin); gx <= xMax; gx += 1) {
    var cx = toCanvasX(gx);
    ctx.beginPath(); ctx.moveTo(cx, padTop); ctx.lineTo(cx, H - padBottom); ctx.stroke();
  }
  for (var gy = Math.ceil(yMin); gy <= yMax; gy += 1) {
    var cy = toCanvasY(gy);
    ctx.beginPath(); ctx.moveTo(padLeft, cy); ctx.lineTo(W - padRight, cy); ctx.stroke();
  }

  // Axes
  ctx.strokeStyle = '#475569';
  ctx.lineWidth = 1.5;
  // x-axis (y=0)
  ctx.beginPath();
  ctx.moveTo(padLeft, toCanvasY(0));
  ctx.lineTo(W - padRight, toCanvasY(0));
  ctx.stroke();
  // y-axis (x=0)
  ctx.beginPath();
  ctx.moveTo(toCanvasX(0), padTop);
  ctx.lineTo(toCanvasX(0), H - padBottom);
  ctx.stroke();

  // Axis labels
  ctx.fillStyle = '#94a3b8';
  ctx.font = '12px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'center';
  for (gx = Math.ceil(xMin); gx <= xMax; gx += 1) {
    if (gx === 0) continue;
    ctx.fillText(gx.toString(), toCanvasX(gx), toCanvasY(0) + 16);
  }
  ctx.textAlign = 'right';
  for (gy = Math.ceil(yMin); gy <= yMax; gy += 1) {
    if (gy === 0) continue;
    ctx.fillText(gy.toString(), toCanvasX(0) - 8, toCanvasY(gy) + 4);
  }

  // Axis endpoint labels
  ctx.fillStyle = '#94a3b8';
  ctx.font = '13px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'center';
  ctx.fillText('x', W - 15, toCanvasY(0) + 5);
  ctx.fillText('y', toCanvasX(0) + 2, padTop - 8);

  // Shade the solution region (where f(x) <= 4, i.e., x in [-1, 5])
  ctx.fillStyle = 'rgba(74, 222, 128, 0.08)';
  ctx.beginPath();
  var x1 = toCanvasX(-1);
  var x2 = toCanvasX(5);
  var yLine = toCanvasY(4);
  ctx.moveTo(x1, yLine);
  for (var px = -1; px <= 5; px += 0.02) {
    var val = f(px);
    ctx.lineTo(toCanvasX(px), toCanvasY(val));
  }
  ctx.lineTo(x2, yLine);
  ctx.closePath();
  ctx.fill();

  // Plot y = 4 (green line)
  ctx.strokeStyle = '#34d399';
  ctx.lineWidth = 2;
  ctx.setLineDash([8, 4]);
  ctx.beginPath();
  ctx.moveTo(padLeft, toCanvasY(4));
  ctx.lineTo(W - padRight, toCanvasY(4));
  ctx.stroke();
  ctx.setLineDash([]);

  // Plot f(x) = |2x - 1| - x (blue)
  ctx.strokeStyle = '#60a5fa';
  ctx.lineWidth = 2.5;
  ctx.beginPath();
  var started = false;
  for (px = xMin; px <= xMax; px += 0.02) {
    val = f(px);
    if (val < yMin - 1 || val > yMax + 1) { started = false; continue; }
    var cx2 = toCanvasX(px);
    var cy2 = toCanvasY(val);
    if (!started) { ctx.moveTo(cx2, cy2); started = true; }
    else { ctx.lineTo(cx2, cy2); }
  }
  ctx.stroke();

  // Labels for curves
  ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
  ctx.fillStyle = '#60a5fa';
  ctx.textAlign = 'left';
  ctx.fillText('y = |2x \u2212 1| \u2212 x', toCanvasX(5.2), toCanvasY(f(5.5)) - 6);

  ctx.fillStyle = '#34d399';
  ctx.textAlign = 'right';
  ctx.fillText('y = 4', W - padRight - 5, toCanvasY(4) - 10);

  // Mark intersection x = -1
  var intX1 = -1;
  var intY1 = f(intX1); // 4
  var ix1 = toCanvasX(intX1);
  var iy1 = toCanvasY(intY1);

  ctx.beginPath();
  ctx.arc(ix1, iy1, 7, 0, 2 * Math.PI);
  ctx.fillStyle = '#4ade80';
  ctx.fill();
  ctx.strokeStyle = '#0f172a';
  ctx.lineWidth = 2;
  ctx.stroke();

  ctx.fillStyle = '#4ade80';
  ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'center';
  ctx.fillText('x = \u22121', ix1 - 2, iy1 - 14);

  // Mark intersection x = 5
  var intX2 = 5;
  var intY2 = f(intX2); // 4
  var ix2 = toCanvasX(intX2);
  var iy2 = toCanvasY(intY2);

  ctx.beginPath();
  ctx.arc(ix2, iy2, 7, 0, 2 * Math.PI);
  ctx.fillStyle = '#4ade80';
  ctx.fill();
  ctx.strokeStyle = '#0f172a';
  ctx.lineWidth = 2;
  ctx.stroke();

  ctx.fillStyle = '#4ade80';
  ctx.font = 'bold 13px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'center';
  ctx.fillText('x = 5', ix2 + 2, iy2 - 14);

  // Dashed vertical lines from x-axis to intersections
  ctx.setLineDash([4, 3]);
  ctx.strokeStyle = '#4ade8088';
  ctx.lineWidth = 1.5;

  ctx.beginPath();
  ctx.moveTo(ix1, toCanvasY(0));
  ctx.lineTo(ix1, iy1);
  ctx.stroke();

  ctx.beginPath();
  ctx.moveTo(ix2, toCanvasY(0));
  ctx.lineTo(ix2, iy2);
  ctx.stroke();
  ctx.setLineDash([]);

  // Mark the vertex (minimum) at x = 1/2
  var vx = 0.5;
  var vy = f(vx); // -0.5
  var cvx = toCanvasX(vx);
  var cvy = toCanvasY(vy);

  ctx.beginPath();
  ctx.arc(cvx, cvy, 5, 0, 2 * Math.PI);
  ctx.fillStyle = '#a78bfa';
  ctx.fill();
  ctx.strokeStyle = '#0f172a';
  ctx.lineWidth = 1.5;
  ctx.stroke();

  ctx.fillStyle = '#a78bfa';
  ctx.font = '11px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'center';
  ctx.fillText('min (\u00BD, \u2212\u00BD)', cvx + 40, cvy + 4);

  // Solution interval annotation on x-axis
  var solY = toCanvasY(0) + 32;
  ctx.strokeStyle = '#4ade80';
  ctx.lineWidth = 2.5;
  ctx.beginPath();
  ctx.moveTo(ix1, solY);
  ctx.lineTo(ix2, solY);
  ctx.stroke();

  // Filled circles at endpoints (closed interval)
  ctx.beginPath();
  ctx.arc(ix1, solY, 4, 0, 2 * Math.PI);
  ctx.fillStyle = '#4ade80';
  ctx.fill();

  ctx.beginPath();
  ctx.arc(ix2, solY, 4, 0, 2 * Math.PI);
  ctx.fillStyle = '#4ade80';
  ctx.fill();

  ctx.fillStyle = '#4ade80';
  ctx.font = 'bold 12px Segoe UI, system-ui, sans-serif';
  ctx.textAlign = 'center';
  ctx.fillText('[\u22121, 5]', toCanvasX(2), solY + 16);

  // Touch/mouse interaction: show f(x) value
  function getMousePos(evt) {
    var rect = canvas.getBoundingClientRect();
    var scaleX = W / rect.width;
    var scaleY = H / rect.height;
    var clientX, clientY;
    if (evt.touches && evt.touches.length > 0) {
      clientX = evt.touches[0].clientX;
      clientY = evt.touches[0].clientY;
    } else {
      clientX = evt.clientX;
      clientY = evt.clientY;
    }
    return {
      x: (clientX - rect.left) * scaleX,
      y: (clientY - rect.top) * scaleY
    };
  }

  var overlayData = null;

  function drawOverlay(pos) {
    if (!pos) return;
    var mathX = xMin + (pos.x - padLeft) / (W - padLeft - padRight) * (xMax - xMin);
    if (mathX < xMin || mathX > xMax) return;
    var mathY = f(mathX);
    var cpx = toCanvasX(mathX);
    var cpy = toCanvasY(mathY);

    // Redraw base (simple approach: redraw everything would be expensive, so just draw overlay)
    ctx.save();
    ctx.setLineDash([3, 3]);
    ctx.strokeStyle = '#e2e8f088';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(cpx, toCanvasY(0));
    ctx.lineTo(cpx, cpy);
    ctx.stroke();
    ctx.setLineDash([]);

    ctx.beginPath();
    ctx.arc(cpx, cpy, 4, 0, 2 * Math.PI);
    ctx.fillStyle = '#e2e8f0';
    ctx.fill();

    var inSolution = mathX >= -1 && mathX <= 5;
    var label = 'x = ' + mathX.toFixed(2).replace('.', ',') + '  f(x) = ' + mathY.toFixed(2).replace('.', ',');
    ctx.fillStyle = inSolution ? '#4ade80' : '#f472b6';
    ctx.font = '12px Segoe UI, system-ui, sans-serif';
    ctx.textAlign = 'center';
    var labelX = cpx;
    if (labelX < 100) labelX = 100;
    if (labelX > W - 100) labelX = W - 100;
    ctx.fillText(label, labelX, padTop + 12);
    ctx.restore();
  }

  // We won't add persistent hover (would need full redraw). Keep it simple.

})();
</script>

</body>
</html>
<!--BRAINSPARK_META {"title":"Nejednacina sa apsolutnom vrednoscu |2x - 1| - x <= 4","subject":"math","unit":"algebra","topic_tags":["apsolutna vrednost","linearne nejednacine","intervali","nejednacine"]} BRAINSPARK_META-->