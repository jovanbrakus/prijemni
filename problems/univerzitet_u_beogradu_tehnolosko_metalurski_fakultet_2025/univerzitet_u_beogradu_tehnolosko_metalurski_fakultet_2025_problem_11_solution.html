<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Poluprecnik upisanog kruga pravouglog trougla</title>
<script type="text/info" id="logic-scratchpad">
Problem: Right triangle with altitude to hypotenuse hc = 12 cm.
The foot of the altitude divides the hypotenuse into segments p = 9 cm and q = ? cm.
Find the inradius r of the triangle.

Step 1: Find q using the geometric mean relation for the altitude.
  hc^2 = p * q
  144 = 9 * q
  q = 16

Step 2: Find the hypotenuse.
  c = p + q = 9 + 16 = 25

Step 3: Find the legs using geometric mean relations.
  a = sqrt(p * c) = sqrt(9 * 25) = sqrt(225) = 15
  b = sqrt(q * c) = sqrt(16 * 25) = sqrt(400) = 20

Step 4: Find the inradius.
  r = (a + b - c) / 2 = (15 + 20 - 25) / 2 = 10 / 2 = 5

Verification:
  - Pythagorean theorem: a^2 + b^2 = 225 + 400 = 625 = 25^2 = c^2. Correct.
  - Area via legs: S = (1/2) * a * b = (1/2) * 15 * 20 = 150
  - Area via inradius: S = r * s where s = (a + b + c)/2 = (15 + 20 + 25)/2 = 30
    S = 5 * 30 = 150. Correct.
  - Area via altitude: S = (1/2) * c * hc = (1/2) * 25 * 12 = 150. Correct.

Answer: D) 5 cm
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}
h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}
.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}
.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}
.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}
.card h3 {
  color: #a78bfa;
  font-size: 1.15rem;
  margin-bottom: 10px;
}
.highlight-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  font-size: 1.05rem;
  text-align: center;
}
.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}
.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  text-align: center;
  min-width: 80px;
  flex: 1;
}
.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}
.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}
.answer-option {
  cursor: default;
  transition: border-color 0.2s;
}
.plan-card {
  border-left: 3px solid #a78bfa;
}
details {
  background: rgba(167,139,250,0.06);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 12px 0;
}
details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 1.05rem;
  padding: 4px 0;
}
details summary:hover {
  color: #c4b5fd;
}
details[open] summary {
  margin-bottom: 12px;
}
.step-container {
  position: relative;
  padding-left: 50px;
  margin-bottom: 20px;
  cursor: pointer;
  border-left: 3px solid transparent;
  transition: border-color 0.2s, background 0.2s;
  border-radius: 8px;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-right: 8px;
}
.step-container:hover, .step-container.active {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}
.step-badge {
  position: absolute;
  left: 8px;
  top: 12px;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
}
.step-title {
  color: #60a5fa;
  font-weight: 600;
  font-size: 1.1rem;
  margin-bottom: 6px;
}
.step-text {
  color: #e2e8f0;
  margin-bottom: 8px;
}
.final-answer-card {
  border: 2px solid #4ade80;
  text-align: center;
}
.final-answer-value {
  color: #4ade80;
  font-size: 2rem;
  font-weight: 700;
  margin: 16px 0;
}
.answer-options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 16px 0;
}
.answer-chip {
  padding: 10px 22px;
  border-radius: 10px;
  font-size: 1.05rem;
  font-weight: 600;
  border: 2px solid #334155;
  background: rgba(30,41,59,0.8);
  color: #94a3b8;
  transition: all 0.2s;
}
.answer-chip.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.12);
  color: #4ade80;
}
.pitfall-card {
  border-left: 3px solid #e09468;
}
.pitfall-card h2 {
  color: #e09468;
}
.challenge-card {
  border-left: 3px solid #f472b6;
}
.challenge-card h2 {
  color: #f472b6;
}
.verification {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 10px;
}
canvas {
  width: 100%;
  border-radius: 10px;
  display: block;
  margin: 0 auto;
}
.insight-card {
  border-left: 3px solid #60a5fa;
}
.micro-check details {
  background: rgba(52,211,153,0.06);
  border-color: rgba(52,211,153,0.2);
}
.micro-check details summary {
  color: #34d399;
}
@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step-container { padding-left: 42px; }
  .given-grid { flex-direction: column; }
  .answer-options-row { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Poluprecnik upisanog kruga pravouglog trougla</h1>
  <p class="subtitle">Primena odnosa u pravouglom trouglu i formule za poluprecnik upisanog kruga</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Duzina hipotenuzine visine u pravouglom trouglu je \( h_c = 12 \) cm. Podnozje visine deli hipotenuzu na dva dela od kojih je jedan duzine \( p = 9 \) cm. Duzina poluprecnika upisanog kruga tog trougla jednaka je:</p>

    <div class="given-grid">
      <div class="given-item">
        <div class="label">Visina na hipotenuzu</div>
        <div class="value">\( h_c = 12 \text{ cm} \)</div>
      </div>
      <div class="given-item">
        <div class="label">Projekcija jedne katete</div>
        <div class="value">\( p = 9 \text{ cm} \)</div>
      </div>
      <div class="given-item">
        <div class="label">Trazi se</div>
        <div class="value">\( r = \,? \)</div>
      </div>
    </div>

    <h3 style="margin-top: 20px;">Ponudjeni odgovori</h3>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">2 cm</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">3 cm</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">4 cm</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">5 cm</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">6 cm</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>Koristimo osobine pravouglog trougla: visina na hipotenuzu je geometrijska sredina projekcija kateta na hipotenuzu (\( h_c^2 = p \cdot q \)). Iz toga nalazimo \( q \), pa hipotenuzu \( c = p + q \). Zatim iz \( a = \sqrt{p \cdot c} \) i \( b = \sqrt{q \cdot c} \) nalazimo katete. Na kraju primenjujemo formulu za poluprecnik upisanog kruga pravouglog trougla: \( r = \frac{a + b - c}{2} \).</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Kljucne formule i teoreme</summary>
      <div style="margin-top: 10px;">
        <p><strong>Metricki odnosi u pravouglom trouglu:</strong></p>
        <ul style="margin-left: 20px; margin-top: 8px; color: #e2e8f0;">
          <li>\( h_c^2 = p \cdot q \) &mdash; visina na hipotenuzu je geometrijska sredina projekcija kateta</li>
          <li>\( a^2 = p \cdot c \) &mdash; kateta je geometrijska sredina svoje projekcije i hipotenuze</li>
          <li>\( b^2 = q \cdot c \) &mdash; analogno za drugu katetu</li>
          <li>\( c = p + q \) &mdash; hipotenuza je zbir projekcija</li>
        </ul>
        <p style="margin-top: 12px;"><strong>Poluprecnik upisanog kruga pravouglog trougla:</strong></p>
        <ul style="margin-left: 20px; margin-top: 8px; color: #e2e8f0;">
          <li>\( r = \dfrac{a + b - c}{2} \) &mdash; specijalni slucaj opste formule \( r = \frac{P}{s} \), gde je \( s \) poluobim</li>
          <li>Izvodi se iz \( r = \frac{P}{s} = \frac{\frac{1}{2}ab}{\frac{a+b+c}{2}} = \frac{ab}{a+b+c} \), ali za pravougli trougao vazi \( ab = a + b - c \) pomnozeno sa nesto... Zapravo, direktniji put: upisani krug dodiruje katete duzine \( a \) i \( b \) i hipotenuzu duzine \( c \), pa su tangentni odsecci \( a - r \), \( b - r \) i \( c - (a-r) - (b-r) = c - a - b + 2r \). Posto je taj poslednji jednak \( 0 \) (hipotenuza se celom duzinom "pokriva"), imamo \( c = a + b - 2r \), odakle \( r = \frac{a+b-c}{2} \).</li>
        </ul>
      </div>
    </details>
  </div>

  <!-- Canvas Visual -->
  <div class="card">
    <h2>Vizuelni prikaz</h2>
    <canvas id="triangleCanvas" height="520"></canvas>
  </div>

  <!-- Step-by-step Solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <div class="step-container" id="step1">
      <div class="step-badge">1</div>
      <div class="step-title">Nalazimo drugu projekciju \( q \)</div>
      <div class="step-text">
        <p>Koristimo metricki odnos za visinu na hipotenuzu:</p>
        <div class="highlight-box">
          \[ h_c^2 = p \cdot q \]
        </div>
        <p>Zamenjujemo poznate vrednosti:</p>
        <div class="highlight-box">
          \[ 12^2 = 9 \cdot q \quad \Rightarrow \quad 144 = 9q \quad \Rightarrow \quad q = \frac{144}{9} = 16 \]
        </div>
      </div>
    </div>

    <div class="micro-check">
      <details>
        <summary>Proveri se: Da li je q = 16 korektno?</summary>
        <p style="margin-top: 8px;">Provera: \( p \cdot q = 9 \cdot 16 = 144 = 12^2 = h_c^2 \). Tacno!</p>
      </details>
    </div>

    <div class="step-container" id="step2">
      <div class="step-badge">2</div>
      <div class="step-title">Nalazimo hipotenuzu \( c \)</div>
      <div class="step-text">
        <p>Hipotenuza je zbir projekcija:</p>
        <div class="highlight-box">
          \[ c = p + q = 9 + 16 = 25 \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step3">
      <div class="step-badge">3</div>
      <div class="step-title">Nalazimo katete \( a \) i \( b \)</div>
      <div class="step-text">
        <p>Koristimo metricke odnose za katete:</p>
        <div class="highlight-box">
          \[ a = \sqrt{p \cdot c} = \sqrt{9 \cdot 25} = \sqrt{225} = 15 \]
        </div>
        <div class="highlight-box">
          \[ b = \sqrt{q \cdot c} = \sqrt{16 \cdot 25} = \sqrt{400} = 20 \]
        </div>
      </div>
    </div>

    <div class="micro-check">
      <details>
        <summary>Proveri se: Da li je ovo Pitagorin trougao?</summary>
        <p style="margin-top: 8px;">Proveravamo Pitagorinu teoremu: \( a^2 + b^2 = 15^2 + 20^2 = 225 + 400 = 625 = 25^2 = c^2 \). Tacno! Ovo je poznati Pitagorin trougao 15-20-25, koji je peterostruk osnovnog trougla 3-4-5.</p>
      </details>
    </div>

    <div class="step-container" id="step4">
      <div class="step-badge">4</div>
      <div class="step-title">Racunamo poluprecnik upisanog kruga</div>
      <div class="step-text">
        <p>Za pravougli trougao vazi specijalna formula:</p>
        <div class="highlight-box">
          \[ r = \frac{a + b - c}{2} \]
        </div>
        <p>Zamenjujemo:</p>
        <div class="highlight-box">
          \[ r = \frac{15 + 20 - 25}{2} = \frac{10}{2} = 5 \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step5">
      <div class="step-badge">5</div>
      <div class="step-title">Verifikacija preko povrsine</div>
      <div class="step-text">
        <p>Povrsina trougla moze se izracunati na tri nacina:</p>
        <div class="highlight-box">
          \[ P = \frac{1}{2} \cdot a \cdot b = \frac{1}{2} \cdot 15 \cdot 20 = 150 \]
        </div>
        <div class="highlight-box">
          \[ P = \frac{1}{2} \cdot c \cdot h_c = \frac{1}{2} \cdot 25 \cdot 12 = 150 \;\; \checkmark \]
        </div>
        <p>Takodje, \( P = r \cdot s \), gde je \( s = \frac{a+b+c}{2} = \frac{15+20+25}{2} = 30 \):</p>
        <div class="highlight-box">
          \[ P = r \cdot s = 5 \cdot 30 = 150 \;\; \checkmark \]
        </div>
        <p>Sva tri nacina daju istu povrsinu, sto potvrdjuje da je \( r = 5 \) tacan rezultat.</p>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="card insight-card">
    <h2>Kljucni uvid</h2>
    <p>Za pravougli trougao poluprecnik upisanog kruga ima elegantan oblik \( r = \frac{a + b - c}{2} \). Ovo se moze razumeti geometrijski: upisani krug dodiruje obe katete i hipotenuzu. Tangentni odsecak iz temena pravog ugla do tacke dodira na svakoj kateti je jednak \( r \). Preostali delovi kateta su \( a - r \) i \( b - r \), a njihov zbir mora biti jednak hipotenuzi \( c \), odakle odmah sledi formula.</p>
    <div class="highlight-box">
      \[ (a - r) + (b - r) = c \quad \Rightarrow \quad r = \frac{a + b - c}{2} = \frac{15 + 20 - 25}{2} = 5 \]
    </div>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer-card">
    <h2 style="color: #4ade80;">Konacan odgovor</h2>
    <div class="final-answer-value">\( r = 5 \text{ cm} \)</div>

    <div class="answer-options-row">
      <div class="answer-chip">(A) 2 cm</div>
      <div class="answer-chip">(B) 3 cm</div>
      <div class="answer-chip">(C) 4 cm</div>
      <div class="answer-chip correct">(D) 5 cm</div>
      <div class="answer-chip">(E) 6 cm</div>
    </div>

    <p class="verification">Verifikacija: Trougao 15-20-25 (Pitagorin). Povrsina \( P = 150 \). Poluobim \( s = 30 \). Poluprecnik \( r = P/s = 150/30 = 5 \). Alternativno: \( r = (15 + 20 - 25)/2 = 5 \).</p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfall-card">
    <h2>Ceste greske</h2>
    <ul style="margin-left: 20px; margin-top: 8px;">
      <li style="margin-bottom: 10px;"><strong>Zamena projekcija i kateta:</strong> Projekcije kateta na hipotenuzu (\( p \) i \( q \)) nisu isto sto i same katete. Projekcija \( p = 9 \) odgovara kateti \( a = 15 \), a projekcija \( q = 16 \) kateti \( b = 20 \).</li>
      <li style="margin-bottom: 10px;"><strong>Koriscenje pogreske formule za r:</strong> Opsta formula je \( r = P/s \), ali za pravougli trougao postoji mnogo jednostavnija: \( r = (a + b - c)/2 \). Koriscenje opste formule takodje daje tacan rezultat, ali zahteva vise racunanja.</li>
      <li style="margin-bottom: 10px;"><strong>Pogresno racunanje q:</strong> Iz \( 144 = 9q \) se dobija \( q = 16 \), a ne \( q = 12 \) (sto je visina). Broj 12 se pojavljuje kao visina, ali projekcija \( q \) ima drugaciju vrednost.</li>
      <li><strong>Mesanje opisanog i upisanog kruga:</strong> Poluprecnik opisanog kruga pravouglog trougla je \( R = c/2 = 12{,}5 \), sto je potpuno razlicito od \( r = 5 \) za upisani krug.</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Za isti pravougli trougao (15-20-25), odredi poluprecnik opisanog kruga \( R \) i pokazi da vazi relacija \( r + R = \frac{a + b}{2} \), tj. da je zbir poluprecnika upisanog i opisanog kruga pravouglog trougla jednak poluzbiru kateta.</p>
    <details>
      <summary>Hint</summary>
      <p style="margin-top: 8px;">\( R = \frac{c}{2} = \frac{25}{2} = 12{,}5 \). Tada: \( r + R = 5 + 12{,}5 = 17{,}5 = \frac{15 + 20}{2} = \frac{a + b}{2} \). Ova lepa relacija vazi za svaki pravougli trougao i direktno sledi iz formule \( r = \frac{a + b - c}{2} \) i \( R = \frac{c}{2} \).</p>
    </details>
  </div>

</div>

<script>
(() => {
  // Step click interaction
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.add('active');
    });
  });

  // Canvas: draw the right triangle with inscribed circle
  const canvas = document.getElementById('triangleCanvas');
  const ctx = canvas.getContext('2d');

  function resizeCanvas() {
    const rect = canvas.parentElement.getBoundingClientRect();
    const w = rect.width - 48;
    canvas.width = w * 2;
    canvas.height = 520 * 2;
    canvas.style.height = '520px';
    ctx.scale(2, 2);
    drawTriangle(w);
  }

  function drawTriangle(W) {
    const H = 520;
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.beginPath();
    ctx.roundRect(0, 0, W, H, 10);
    ctx.fill();

    // Triangle dimensions: a=15, b=20, c=25, hc=12, p=9, q=16, r=5
    // Place the right angle at C at top-left area, hypotenuse at bottom
    // Let's use coordinates:
    // B at bottom-left, A at bottom-right (hypotenuse = BA along bottom)
    // C at top (the right-angle vertex)
    // With p=9 (projection of a on c from B side), q=16 (from A side)
    // So the foot of altitude D divides BA: BD=p=9, DA=q=16

    const margin = 60;
    const drawW = W - 2 * margin;
    const drawH = H - 2 * margin - 40;

    // Scale to fit: hypotenuse c=25 along x, height hc=12 along y
    const scaleX = drawW / 25;
    const scaleY = drawH / 20; // give room for the triangle height (max of a or b related)
    const sc = Math.min(scaleX, scaleY) * 0.85;

    // Place hypotenuse along the bottom
    // B is at left, A is at right
    const baseY = H - margin - 30;
    const startX = (W - 25 * sc) / 2;

    const Bx = startX;
    const By = baseY;
    const Ax = startX + 25 * sc;
    const Ay = baseY;

    // D (foot of altitude) is at distance p=9 from B
    const Dx = Bx + 9 * sc;
    const Dy = baseY;

    // C (right angle vertex) is directly above D at height hc=12
    const Cx = Dx;
    const Cy = baseY - 12 * sc;

    // Inscribed circle: center at (r distance from each side)
    // For a right triangle with right angle at C, legs a=BC=15, b=AC=20, hyp c=AB=25
    // The incircle center is at distance r from each side
    // Using the formula: the incircle center for a triangle with vertices
    // is at (a*Ax + b*Bx + c*Cx)/(a+b+c), (a*Ay + b*By + c*Cy)/(a+b+c)
    // where a,b,c are the side lengths opposite to vertices A,B,C respectively
    // Side opposite A (which is BC) has length a=15
    // Side opposite B (which is AC) has length b=20
    // Side opposite C (which is AB) has length c=25
    const perimeter = 15 + 20 + 25;
    const Ix = (15 * Ax + 20 * Bx + 25 * Cx) / perimeter;
    const Iy = (15 * Ay + 20 * By + 25 * Cy) / perimeter;
    const rPx = 5 * sc; // radius in pixels

    // Draw the right angle symbol at C
    const rightAngleSize = 12;
    // Vectors from C to B and from C to A
    const CBx = Bx - Cx, CBy = By - Cy;
    const CAx = Ax - Cx, CAy = Ay - Cy;
    const CBlen = Math.sqrt(CBx * CBx + CBy * CBy);
    const CAlen = Math.sqrt(CAx * CAx + CAy * CAy);
    const uCBx = CBx / CBlen, uCBy = CBy / CBlen;
    const uCAx = CAx / CAlen, uCAy = CAy / CAlen;

    // Right angle marker
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(Cx + uCBx * rightAngleSize, Cy + uCBy * rightAngleSize);
    ctx.lineTo(Cx + uCBx * rightAngleSize + uCAx * rightAngleSize, Cy + uCBy * rightAngleSize + uCAy * rightAngleSize);
    ctx.lineTo(Cx + uCAx * rightAngleSize, Cy + uCAy * rightAngleSize);
    ctx.stroke();

    // Fill triangle lightly
    ctx.fillStyle = 'rgba(96, 165, 250, 0.06)';
    ctx.beginPath();
    ctx.moveTo(Ax, Ay);
    ctx.lineTo(Bx, By);
    ctx.lineTo(Cx, Cy);
    ctx.closePath();
    ctx.fill();

    // Draw triangle edges
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(Ax, Ay);
    ctx.lineTo(Bx, By);
    ctx.lineTo(Cx, Cy);
    ctx.closePath();
    ctx.stroke();

    // Draw altitude from C to D (dashed)
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.moveTo(Cx, Cy);
    ctx.lineTo(Dx, Dy);
    ctx.stroke();
    ctx.setLineDash([]);

    // Draw right angle at D (altitude meets hypotenuse)
    const ras = 10;
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 1.2;
    ctx.beginPath();
    ctx.moveTo(Dx - ras, Dy);
    ctx.lineTo(Dx - ras, Dy - ras);
    ctx.lineTo(Dx, Dy - ras);
    ctx.stroke();

    // Draw inscribed circle
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.arc(Ix, Iy, rPx, 0, Math.PI * 2);
    ctx.stroke();

    // Fill inscribed circle lightly
    ctx.fillStyle = 'rgba(74, 222, 128, 0.08)';
    ctx.beginPath();
    ctx.arc(Ix, Iy, rPx, 0, Math.PI * 2);
    ctx.fill();

    // Draw center of inscribed circle
    ctx.fillStyle = '#4ade80';
    ctx.beginPath();
    ctx.arc(Ix, Iy, 3, 0, Math.PI * 2);
    ctx.fill();

    // Draw radius line from center to hypotenuse (vertical down)
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([4, 3]);
    ctx.beginPath();
    ctx.moveTo(Ix, Iy);
    ctx.lineTo(Ix, Iy + rPx);
    ctx.stroke();
    ctx.setLineDash([]);

    // Label "r = 5" near the radius
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 13px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('r = 5', Ix + 6, Iy + rPx / 2 + 4);

    // Label vertices
    ctx.font = 'bold 15px Segoe UI, sans-serif';

    // Vertex A (bottom-right)
    ctx.fillStyle = '#e2e8f0';
    ctx.textAlign = 'left';
    ctx.fillText('A', Ax + 8, Ay + 6);

    // Vertex B (bottom-left)
    ctx.textAlign = 'right';
    ctx.fillText('B', Bx - 8, By + 6);

    // Vertex C (top)
    ctx.textAlign = 'center';
    ctx.fillText('C', Cx - 14, Cy - 10);

    // Point D (foot of altitude)
    ctx.fillStyle = '#a78bfa';
    ctx.font = '13px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('D', Dx + 2, Dy + 20);

    // Draw point markers at vertices
    const vertices = [[Ax, Ay], [Bx, By], [Cx, Cy], [Dx, Dy]];
    const vColors = ['#e2e8f0', '#e2e8f0', '#e2e8f0', '#a78bfa'];
    vertices.forEach((v, i) => {
      ctx.fillStyle = vColors[i];
      ctx.beginPath();
      ctx.arc(v[0], v[1], 4, 0, Math.PI * 2);
      ctx.fill();
    });

    // Label sides
    ctx.font = '13px Segoe UI, sans-serif';

    // Side a = BC = 15 (left side)
    const aMidX = (Bx + Cx) / 2;
    const aMidY = (By + Cy) / 2;
    ctx.fillStyle = '#60a5fa';
    ctx.textAlign = 'right';
    ctx.fillText('a = 15', aMidX - 12, aMidY);

    // Side b = AC = 20 (right side)
    const bMidX = (Ax + Cx) / 2;
    const bMidY = (Ay + Cy) / 2;
    ctx.textAlign = 'left';
    ctx.fillText('b = 20', bMidX + 12, bMidY);

    // Side c = AB = 25 (hypotenuse, bottom)
    const cMidX = (Ax + Bx) / 2;
    ctx.textAlign = 'center';
    ctx.fillText('c = 25', cMidX, baseY + 35);

    // Label projections p and q on hypotenuse
    ctx.font = '12px Segoe UI, sans-serif';
    ctx.fillStyle = '#a78bfa';

    // p = BD = 9
    const pMidX = (Bx + Dx) / 2;
    ctx.textAlign = 'center';
    ctx.fillText('p = 9', pMidX, baseY + 18);

    // Draw bracket-like indicators for p and q
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 1;
    const bracketY = baseY + 8;
    // p bracket
    ctx.beginPath();
    ctx.moveTo(Bx, bracketY);
    ctx.lineTo(Bx, bracketY + 4);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(Dx, bracketY);
    ctx.lineTo(Dx, bracketY + 4);
    ctx.stroke();

    // q = DA = 16
    const qMidX = (Dx + Ax) / 2;
    ctx.fillStyle = '#a78bfa';
    ctx.fillText('q = 16', qMidX, baseY + 18);
    // q bracket
    ctx.beginPath();
    ctx.moveTo(Ax, bracketY);
    ctx.lineTo(Ax, bracketY + 4);
    ctx.stroke();

    // Label altitude hc = 12
    ctx.fillStyle = '#a78bfa';
    ctx.font = '12px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    const hMidY = (Cy + Dy) / 2;
    ctx.fillText('h\u2082 = 12', Dx + 8, hMidY);

    // Title
    ctx.fillStyle = '#94a3b8';
    ctx.font = '14px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Pravougli trougao sa upisanim krugom', W / 2, H - 12);

    // Legend
    const legY = 28;
    const legX = 20;
    // Triangle
    ctx.strokeStyle = '#60a5fa';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(legX, legY);
    ctx.lineTo(legX + 25, legY);
    ctx.stroke();
    ctx.fillStyle = '#60a5fa';
    ctx.font = '12px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('Trougao ABC', legX + 30, legY + 4);

    // Inscribed circle
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.arc(legX + 12, legY + 24, 6, 0, Math.PI * 2);
    ctx.stroke();
    ctx.fillStyle = '#4ade80';
    ctx.fillText('Upisani krug (r = 5)', legX + 30, legY + 28);

    // Altitude
    ctx.strokeStyle = '#a78bfa';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.moveTo(legX, legY + 48);
    ctx.lineTo(legX + 25, legY + 48);
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.fillStyle = '#a78bfa';
    ctx.fillText('Visina h\u2082 = 12', legX + 30, legY + 52);
  }

  resizeCanvas();
  window.addEventListener('resize', resizeCanvas);
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Poluprecnik upisanog kruga pravouglog trougla",
  "subject": "math",
  "unit": "planimetrija",
  "topic_tags": ["pravougli trougao", "upisani krug", "metricki odnosi", "visina na hipotenuzu", "poluprecnik upisanog kruga", "Pitagorina teorema"]
}
BRAINSPARK_META-->