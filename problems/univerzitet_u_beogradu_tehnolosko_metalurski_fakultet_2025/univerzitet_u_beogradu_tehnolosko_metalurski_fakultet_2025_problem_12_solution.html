<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zapremina pravilne cetvorostrane piramide</title>
<script type="text/info" id="logic-scratchpad">
Problem: Regular square pyramid with base edge a = 16 cm, slant height l = H + 2 (2 cm longer than pyramid height H).
Find volume V.

Given:
  a = 16 cm (base edge)
  l = H + 2 (slant height is 2 cm longer than height)

The apothem of the square base = a/2 = 8 cm.
In a regular square pyramid, the slant height l, the pyramid height H, and the apothem form a right triangle:
  l^2 = H^2 + (a/2)^2

Substitute l = H + 2:
  (H + 2)^2 = H^2 + 8^2
  H^2 + 4H + 4 = H^2 + 64
  4H + 4 = 64
  4H = 60
  H = 15 cm

Therefore l = 15 + 2 = 17 cm.

Verification of Pythagorean relation:
  l^2 = 17^2 = 289
  H^2 + 8^2 = 225 + 64 = 289 âœ“

Volume:
  V = (1/3) * a^2 * H
  V = (1/3) * 256 * 15
  V = (1/3) * 3840
  V = 1280 cm^3

Answer: B) 1280 cm^3
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]']]
  },
  svg: { fontCache: 'global' }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  line-height: 1.7;
  padding: 20px;
}
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}
h1 {
  font-size: 2.2rem;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
  line-height: 1.3;
}
.subtitle {
  color: #94a3b8;
  font-size: 1.1rem;
  margin-bottom: 32px;
}
.card {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}
.card h2 {
  color: #60a5fa;
  font-size: 1.4rem;
  margin-bottom: 16px;
}
.card h3 {
  color: #a78bfa;
  font-size: 1.15rem;
  margin-bottom: 10px;
}
.highlight-box {
  background: rgba(56,189,248,0.08);
  border: 1px solid rgba(56,189,248,0.15);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 12px 0;
  font-family: 'Courier New', monospace;
  font-size: 1.05rem;
  text-align: center;
}
.given-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 16px;
}
.given-item {
  background: rgba(96,165,250,0.08);
  border: 1px solid rgba(96,165,250,0.15);
  border-radius: 10px;
  padding: 12px 18px;
  text-align: center;
  min-width: 80px;
  flex: 1;
}
.given-item .label {
  color: #94a3b8;
  font-size: 0.85rem;
  margin-bottom: 4px;
}
.given-item .value {
  color: #e2e8f0;
  font-size: 1.1rem;
  font-weight: 600;
}
.answer-option {
  cursor: default;
  transition: border-color 0.2s;
}
.plan-card {
  border-left: 3px solid #a78bfa;
}
details {
  background: rgba(167,139,250,0.06);
  border: 1px solid rgba(167,139,250,0.15);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 12px 0;
}
details summary {
  cursor: pointer;
  color: #a78bfa;
  font-weight: 600;
  font-size: 1.05rem;
  padding: 4px 0;
}
details summary:hover {
  color: #c4b5fd;
}
details[open] summary {
  margin-bottom: 12px;
}
.step-container {
  position: relative;
  padding-left: 50px;
  margin-bottom: 20px;
  cursor: pointer;
  border-left: 3px solid transparent;
  transition: border-color 0.2s, background 0.2s;
  border-radius: 8px;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-right: 8px;
}
.step-container:hover, .step-container.active {
  border-left-color: #4ade80;
  background: rgba(74,222,128,0.04);
}
.step-badge {
  position: absolute;
  left: 8px;
  top: 12px;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
}
.step-title {
  color: #60a5fa;
  font-weight: 600;
  font-size: 1.1rem;
  margin-bottom: 6px;
}
.step-text {
  color: #e2e8f0;
  margin-bottom: 8px;
}
.final-answer-card {
  border: 2px solid #4ade80;
  text-align: center;
}
.final-answer-value {
  color: #4ade80;
  font-size: 2rem;
  font-weight: 700;
  margin: 16px 0;
}
.answer-options-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin: 16px 0;
}
.answer-chip {
  padding: 10px 22px;
  border-radius: 10px;
  font-size: 1.05rem;
  font-weight: 600;
  border: 2px solid #334155;
  background: rgba(30,41,59,0.8);
  color: #94a3b8;
  transition: all 0.2s;
}
.answer-chip.correct {
  border-color: #4ade80;
  background: rgba(74,222,128,0.12);
  color: #4ade80;
}
.pitfall-card {
  border-left: 3px solid #e09468;
}
.pitfall-card h2 {
  color: #e09468;
}
.challenge-card {
  border-left: 3px solid #f472b6;
}
.challenge-card h2 {
  color: #f472b6;
}
.verification {
  color: #94a3b8;
  font-size: 0.95rem;
  margin-top: 10px;
}
canvas {
  width: 100%;
  border-radius: 10px;
  display: block;
  margin: 0 auto;
}
.insight-card {
  border-left: 3px solid #60a5fa;
}
.micro-check details {
  background: rgba(52,211,153,0.06);
  border-color: rgba(52,211,153,0.2);
}
.micro-check details summary {
  color: #34d399;
}
@media (max-width: 700px) {
  h1 { font-size: 1.6rem; }
  .card { padding: 16px; }
  .step-container { padding-left: 42px; }
  .given-grid { flex-direction: column; }
  .answer-options-row { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>
<div class="container">

  <h1>Zapremina pravilne cetvorostrane piramide</h1>
  <p class="subtitle">Odredjivanje zapremine piramide kada je data veza izmedju bocne visine i visine piramide</p>

  <!-- Problem Statement -->
  <div class="card problem-statement">
    <h2>Postavka zadatka</h2>
    <p>Duzina osnovne ivice pravilne cetvorostrane piramide je \( a = 16 \,\text{cm} \), dok je bocna visina za \( 2 \,\text{cm} \) duza od visine piramide. Zapremina piramide jednaka je:</p>

    <div class="given-grid">
      <div class="given-item">
        <div class="label">Osnovna ivica</div>
        <div class="value">\( a = 16 \,\text{cm} \)</div>
      </div>
      <div class="given-item">
        <div class="label">Bocna visina</div>
        <div class="value">\( l = H + 2 \)</div>
      </div>
      <div class="given-item">
        <div class="label">Trazi se</div>
        <div class="value">\( V = \;? \)</div>
      </div>
    </div>

    <h3 style="margin-top: 20px;">Ponudjeni odgovori</h3>
    <div class="given-grid">
      <div class="given-item answer-option" data-option="A">
        <div class="label">(A)</div>
        <div class="value">\( 1756 \,\text{cm}^3 \)</div>
      </div>
      <div class="given-item answer-option" data-option="B">
        <div class="label">(B)</div>
        <div class="value">\( 1280 \,\text{cm}^3 \)</div>
      </div>
      <div class="given-item answer-option" data-option="C">
        <div class="label">(C)</div>
        <div class="value">\( 1856 \,\text{cm}^3 \)</div>
      </div>
      <div class="given-item answer-option" data-option="D">
        <div class="label">(D)</div>
        <div class="value">\( 956 \,\text{cm}^3 \)</div>
      </div>
      <div class="given-item answer-option" data-option="E">
        <div class="label">(E)</div>
        <div class="value">\( 1700 \,\text{cm}^3 \)</div>
      </div>
    </div>
  </div>

  <!-- Plan -->
  <div class="card plan-card">
    <h2>Plan resavanja</h2>
    <p>U pravilnoj cetvrostranoj piramidi, bocna visina \( l \), visina piramide \( H \) i apotema osnove \( \frac{a}{2} \) formiraju pravougli trougao. Iskoristicemo vezu \( l = H + 2 \) i Pitagorinu teoremu da nadjemo \( H \), a potom izracunamo zapreminu po formuli \( V = \frac{1}{3} \cdot a^2 \cdot H \).</p>
  </div>

  <!-- Theory Refresher -->
  <div class="card">
    <details>
      <summary>Kljucne formule i teoreme</summary>
      <div style="margin-top: 10px;">
        <p><strong>Pravilna cetvorostrana piramida:</strong></p>
        <ul style="margin-left: 20px; margin-top: 8px; color: #e2e8f0;">
          <li>Osnova je kvadrat sa stranicom \( a \).</li>
          <li>Visina piramide \( H \) je rastojanje od vrha do centra osnove.</li>
          <li>Bocna visina (apotema bocne strane) \( l \) je visina bocnog trougla od vrha do sredista osnovne ivice.</li>
          <li>Apotema osnove (rastojanje od centra kvadrata do sredista strane) je \( \frac{a}{2} \).</li>
        </ul>
        <p style="margin-top: 12px;"><strong>Pitagorina teorema u preseku piramide:</strong></p>
        <div class="highlight-box">
          \[ l^2 = H^2 + \left(\frac{a}{2}\right)^2 \]
        </div>
        <p style="margin-top: 12px;"><strong>Zapremina piramide:</strong></p>
        <div class="highlight-box">
          \[ V = \frac{1}{3} \cdot B \cdot H = \frac{1}{3} \cdot a^2 \cdot H \]
        </div>
      </div>
    </details>
  </div>

  <!-- Canvas Visual -->
  <div class="card">
    <h2>Vizuelni prikaz</h2>
    <canvas id="pyramidCanvas" height="520"></canvas>
  </div>

  <!-- Step-by-step Solution -->
  <div class="card">
    <h2>Resenje korak po korak</h2>

    <div class="step-container" id="step1">
      <div class="step-badge">1</div>
      <div class="step-title">Identifikujemo poznate velicine</div>
      <div class="step-text">
        <p>Osnovna ivica pravilne cetvorostrane piramide:</p>
        <div class="highlight-box">
          \[ a = 16 \,\text{cm} \]
        </div>
        <p>Bocna visina je za 2 cm duza od visine piramide:</p>
        <div class="highlight-box">
          \[ l = H + 2 \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step2">
      <div class="step-badge">2</div>
      <div class="step-title">Racunamo apotemu osnove</div>
      <div class="step-text">
        <p>Apotema kvadratne osnove (rastojanje od centra do sredista strane) jednaka je polovini stranice:</p>
        <div class="highlight-box">
          \[ d = \frac{a}{2} = \frac{16}{2} = 8 \,\text{cm} \]
        </div>
      </div>
    </div>

    <div class="micro-check">
      <details>
        <summary>Proveri se: Zasto apotema kvadrata iznosi a/2?</summary>
        <p style="margin-top: 8px;">Centar kvadrata je u preseku dijagonala. Rastojanje od centra do sredista bilo koje strane je upravo polovina duzine te strane, jer je srediste strane na rastojanju \( \frac{a}{2} \) od centra (u pravcu normalnom na tu stranu).</p>
      </details>
    </div>

    <div class="step-container" id="step3">
      <div class="step-badge">3</div>
      <div class="step-title">Postavljamo Pitagorinu teoremu</div>
      <div class="step-text">
        <p>U pravouglom trouglu koji formiraju visina piramide \( H \), apotema osnove \( d = 8 \) i bocna visina \( l \):</p>
        <div class="highlight-box">
          \[ l^2 = H^2 + d^2 \]
        </div>
        <p>Uvrstimo \( l = H + 2 \) i \( d = 8 \):</p>
        <div class="highlight-box">
          \[ (H + 2)^2 = H^2 + 8^2 \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step4">
      <div class="step-badge">4</div>
      <div class="step-title">Razvijamo i resavamo jednacinu</div>
      <div class="step-text">
        <p>Razvijamo levu stranu:</p>
        <div class="highlight-box">
          \[ H^2 + 4H + 4 = H^2 + 64 \]
        </div>
        <p>Oduzimamo \( H^2 \) sa obe strane:</p>
        <div class="highlight-box">
          \[ 4H + 4 = 64 \]
        </div>
        <p>Oduzimamo 4:</p>
        <div class="highlight-box">
          \[ 4H = 60 \]
        </div>
        <p>Delimo sa 4:</p>
        <div class="highlight-box">
          \[ H = 15 \,\text{cm} \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step5">
      <div class="step-badge">5</div>
      <div class="step-title">Odredjujemo bocnu visinu</div>
      <div class="step-text">
        <p>Iz uslova zadatka:</p>
        <div class="highlight-box">
          \[ l = H + 2 = 15 + 2 = 17 \,\text{cm} \]
        </div>
      </div>
    </div>

    <div class="micro-check">
      <details>
        <summary>Proveri se: Da li vazi Pitagorina teorema?</summary>
        <p style="margin-top: 8px;">Proveravamo: \( l^2 = 17^2 = 289 \). Sa druge strane: \( H^2 + d^2 = 15^2 + 8^2 = 225 + 64 = 289 \). Jednakost vazi, dakle \( H = 15 \) i \( l = 17 \) su korektni. Primetimo i poznatu Pitagorinu trojku \( (8,\; 15,\; 17) \).</p>
      </details>
    </div>

    <div class="step-container" id="step6">
      <div class="step-badge">6</div>
      <div class="step-title">Racunamo zapreminu piramide</div>
      <div class="step-text">
        <p>Povrsina osnove (kvadrat):</p>
        <div class="highlight-box">
          \[ B = a^2 = 16^2 = 256 \,\text{cm}^2 \]
        </div>
        <p>Zapremina piramide:</p>
        <div class="highlight-box">
          \[ V = \frac{1}{3} \cdot a^2 \cdot H = \frac{1}{3} \cdot 256 \cdot 15 \]
        </div>
        <div class="highlight-box">
          \[ V = \frac{3840}{3} = 1280 \,\text{cm}^3 \]
        </div>
      </div>
    </div>

    <div class="step-container" id="step7">
      <div class="step-badge">7</div>
      <div class="step-title">Verifikacija resenja</div>
      <div class="step-text">
        <p>Proverimo sve uslove zadatka:</p>
        <ul style="margin-left: 20px; margin-top: 8px;">
          <li>Osnovna ivica: \( a = 16 \,\text{cm} \) -- dato</li>
          <li>Visina piramide: \( H = 15 \,\text{cm} \)</li>
          <li>Bocna visina: \( l = 17 \,\text{cm} = 15 + 2 = H + 2 \;\; \checkmark \)</li>
          <li>Pitagorina teorema: \( 17^2 = 15^2 + 8^2 \Rightarrow 289 = 289 \;\; \checkmark \)</li>
          <li>Zapremina: \( V = \frac{1}{3} \cdot 256 \cdot 15 = 1280 \,\text{cm}^3 \;\; \checkmark \)</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Key Insight -->
  <div class="card insight-card">
    <h2>Kljucni uvid</h2>
    <p>U pravilnoj cetvrostranoj piramidi, bocna visina \( l \), visina piramide \( H \) i apotema osnove \( \frac{a}{2} \) formiraju pravougli trougao. Kada je data veza izmedju \( l \) i \( H \) (ovde \( l = H + 2 \)), dobijamo jednacinu sa jednom nepoznatom. Kljucno je prepoznati ovaj pravougli trougao u preseku piramide.</p>
    <p style="margin-top: 10px;">Takodje, rezultat \( (8,\; 15,\; 17) \) je poznata Pitagorina trojka, sto je dodatna potvrda ispravnosti resenja.</p>
  </div>

  <!-- Final Answer -->
  <div class="card final-answer-card">
    <h2 style="color: #4ade80;">Konacan odgovor</h2>
    <div class="final-answer-value">\( V = 1280 \,\text{cm}^3 \)</div>

    <div class="answer-options-row">
      <div class="answer-chip">(A) \( 1756 \,\text{cm}^3 \)</div>
      <div class="answer-chip correct">(B) \( 1280 \,\text{cm}^3 \)</div>
      <div class="answer-chip">(C) \( 1856 \,\text{cm}^3 \)</div>
      <div class="answer-chip">(D) \( 956 \,\text{cm}^3 \)</div>
      <div class="answer-chip">(E) \( 1700 \,\text{cm}^3 \)</div>
    </div>

    <p class="verification">Verifikacija: \( l^2 = 17^2 = 289 = 15^2 + 8^2 = H^2 + d^2 \;\; \checkmark \). \(\; V = \tfrac{1}{3} \cdot 256 \cdot 15 = 1280 \;\; \checkmark \)</p>
  </div>

  <!-- Common Pitfalls -->
  <div class="card pitfall-card">
    <h2>Ceste greske</h2>
    <ul style="margin-left: 20px; margin-top: 8px;">
      <li style="margin-bottom: 10px;"><strong>Mesanje bocne visine i bocne ivice:</strong> Bocna visina (apotema bocne strane) \( l \) je visina trougaone strane od vrha do sredista osnovne ivice. Bocna ivica \( b \) je ivica piramide od vrha do temena osnove. Ove dve velicine su razlicite! Za bocnu ivicu vazi \( b^2 = H^2 + \left(\frac{a\sqrt{2}}{2}\right)^2 \), sto bi dalo drugaciji rezultat.</li>
      <li style="margin-bottom: 10px;"><strong>Pogresna apotema osnove:</strong> Apotema kvadrata je \( \frac{a}{2} \), ne \( \frac{a\sqrt{2}}{2} \) (to je poludiagonala). Koriscenje poludiagonale umesto apoteme dovelo bi do pogresnog rezultata.</li>
      <li style="margin-bottom: 10px;"><strong>Zaboravljanje faktora \( \frac{1}{3} \):</strong> Zapremina piramide je \( \frac{1}{3} \cdot B \cdot H \), ne \( B \cdot H \). Bez faktora \( \frac{1}{3} \) dobili bismo \( 3840 \,\text{cm}^3 \), sto nije medju ponudjenim odgovorima.</li>
      <li><strong>Pogresno razumevanje uslova:</strong> "Bocna visina za 2 cm duza od visine" znaci \( l = H + 2 \), ne \( l = 2H \) ili \( H = l + 2 \).</li>
    </ul>
  </div>

  <!-- Optional Challenge -->
  <div class="card challenge-card">
    <h2>Dodatni izazov</h2>
    <p>Za istu piramidu (\( a = 16 \,\text{cm} \), \( H = 15 \,\text{cm} \)), izracunaj povrsinu omotaca piramide (zbir povrsina svih bocnih strana).</p>
    <details>
      <summary>Hint</summary>
      <p style="margin-top: 8px;">Piramida ima 4 jednakokrake trougaone strane. Svaka ima osnovicu \( a = 16 \) i visinu (bocnu visinu) \( l = 17 \). Povrsina jedne strane: \( P_1 = \frac{1}{2} \cdot 16 \cdot 17 = 136 \,\text{cm}^2 \). Ukupni omotac: \( P_{\text{om}} = 4 \cdot 136 = 544 \,\text{cm}^2 \).</p>
    </details>
  </div>

</div>

<script>
(() => {
  // Step click interaction
  const steps = document.querySelectorAll('.step-container');
  steps.forEach(step => {
    step.addEventListener('click', () => {
      steps.forEach(s => s.classList.remove('active'));
      step.classList.add('active');
    });
  });

  // Canvas: 3D pyramid visualization
  const canvas = document.getElementById('pyramidCanvas');
  const ctx = canvas.getContext('2d');

  function resizeCanvas() {
    const rect = canvas.parentElement.getBoundingClientRect();
    const w = rect.width - 48;
    canvas.width = w * 2;
    canvas.height = 520 * 2;
    canvas.style.height = '520px';
    ctx.scale(2, 2);
    drawPyramid(w);
  }

  function drawPyramid(W) {
    const H = 520;
    ctx.clearRect(0, 0, W, H);

    // Background
    ctx.fillStyle = '#0c1222';
    ctx.beginPath();
    ctx.roundRect(0, 0, W, H, 10);
    ctx.fill();

    // Pyramid parameters (isometric-like 3D projection)
    const cx = W * 0.5;
    const cy = H * 0.42;
    const baseSize = Math.min(W, H) * 0.28;
    const pyrHeight = baseSize * 1.25;

    // 3D projection angles
    const angleX = 0.45;
    const angleY = 0.35;

    // Base vertices of the square (centered at origin, projected)
    // Square base corners: (+-1, 0, +-1) scaled
    const half = baseSize * 0.5;
    const dxZ = half * Math.cos(angleX);
    const dyZ = half * Math.sin(angleX) * 0.5;
    const dxX = half * Math.cos(Math.PI - angleX);
    const dyX = half * Math.sin(angleX) * 0.5;

    // Base center projection
    const baseY = cy + pyrHeight * 0.45;

    // Four base corners (front-left, front-right, back-right, back-left)
    const baseCorners = [
      { x: cx - dxZ - dxX, y: baseY + dyZ + dyX },   // front-left (A)
      { x: cx + dxZ - dxX, y: baseY - dyZ + dyX },   // front-right (B) (actually back-left visually)
      { x: cx + dxZ + dxX, y: baseY - dyZ - dyX },   // back-right (C)
      { x: cx - dxZ + dxX, y: baseY + dyZ - dyX },   // back-left (D) (actually front-right visually)
    ];

    // Apex (top of pyramid)
    const apex = { x: cx, y: baseY - pyrHeight };

    // Base center
    const baseCenter = { x: cx, y: baseY };

    // Midpoint of front edge (between corners 0 and 3) for slant height foot
    const midFront = {
      x: (baseCorners[0].x + baseCorners[3].x) / 2,
      y: (baseCorners[0].y + baseCorners[3].y) / 2
    };

    // Midpoint of right edge (between corners 0 and 1) for another reference
    const midRight = {
      x: (baseCorners[0].x + baseCorners[1].x) / 2,
      y: (baseCorners[0].y + baseCorners[1].y) / 2
    };

    // Draw back edges of base (dashed)
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([6, 4]);
    // Back edges: B-C and C-D
    ctx.beginPath();
    ctx.moveTo(baseCorners[1].x, baseCorners[1].y);
    ctx.lineTo(baseCorners[2].x, baseCorners[2].y);
    ctx.lineTo(baseCorners[3].x, baseCorners[3].y);
    ctx.stroke();
    ctx.setLineDash([]);

    // Draw front edges of base (solid)
    ctx.strokeStyle = '#64748b';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(baseCorners[0].x, baseCorners[0].y);
    ctx.lineTo(baseCorners[1].x, baseCorners[1].y);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(baseCorners[3].x, baseCorners[3].y);
    ctx.lineTo(baseCorners[0].x, baseCorners[0].y);
    ctx.stroke();

    // Draw hidden lateral edges (dashed)
    ctx.strokeStyle = '#475569';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([6, 4]);
    ctx.beginPath();
    ctx.moveTo(apex.x, apex.y);
    ctx.lineTo(baseCorners[2].x, baseCorners[2].y);
    ctx.stroke();
    ctx.setLineDash([]);

    // Fill front faces with translucent color
    // Face: apex - corner0 - corner3
    ctx.fillStyle = 'rgba(96, 165, 250, 0.08)';
    ctx.beginPath();
    ctx.moveTo(apex.x, apex.y);
    ctx.lineTo(baseCorners[0].x, baseCorners[0].y);
    ctx.lineTo(baseCorners[3].x, baseCorners[3].y);
    ctx.closePath();
    ctx.fill();

    // Face: apex - corner0 - corner1
    ctx.fillStyle = 'rgba(167, 139, 250, 0.06)';
    ctx.beginPath();
    ctx.moveTo(apex.x, apex.y);
    ctx.lineTo(baseCorners[0].x, baseCorners[0].y);
    ctx.lineTo(baseCorners[1].x, baseCorners[1].y);
    ctx.closePath();
    ctx.fill();

    // Face: apex - corner3 - corner(D to back)
    ctx.fillStyle = 'rgba(96, 165, 250, 0.05)';
    ctx.beginPath();
    ctx.moveTo(apex.x, apex.y);
    ctx.lineTo(baseCorners[3].x, baseCorners[3].y);
    ctx.lineTo(baseCorners[2].x, baseCorners[2].y);
    ctx.closePath();
    ctx.fill();

    // Draw visible lateral edges (solid)
    ctx.strokeStyle = '#94a3b8';
    ctx.lineWidth = 2;
    for (let i of [0, 1, 3]) {
      ctx.beginPath();
      ctx.moveTo(apex.x, apex.y);
      ctx.lineTo(baseCorners[i].x, baseCorners[i].y);
      ctx.stroke();
    }

    // Draw top base edge (connects the visible part)
    ctx.strokeStyle = '#64748b';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(baseCorners[3].x, baseCorners[3].y);
    ctx.lineTo(baseCorners[2].x, baseCorners[2].y);
    ctx.stroke();

    // --- Height H (vertical line from apex to base center) ---
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2.5;
    ctx.setLineDash([]);
    ctx.beginPath();
    ctx.moveTo(apex.x, apex.y);
    ctx.lineTo(baseCenter.x, baseCenter.y);
    ctx.stroke();

    // Right angle mark at base center
    const raSize = 10;
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(baseCenter.x + raSize, baseCenter.y);
    ctx.lineTo(baseCenter.x + raSize, baseCenter.y - raSize);
    ctx.lineTo(baseCenter.x, baseCenter.y - raSize);
    ctx.stroke();

    // H label
    ctx.fillStyle = '#4ade80';
    ctx.font = 'bold 15px Segoe UI, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText('H = 15', apex.x + 10, (apex.y + baseCenter.y) / 2);

    // --- Slant height l (from apex to midpoint of front edge) ---
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(apex.x, apex.y);
    ctx.lineTo(midFront.x, midFront.y);
    ctx.stroke();

    // l label
    const lLabelX = (apex.x + midFront.x) / 2 - 50;
    const lLabelY = (apex.y + midFront.y) / 2;
    ctx.fillStyle = '#f472b6';
    ctx.font = 'bold 15px Segoe UI, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillText('l = 17', lLabelX, lLabelY);

    // --- Apothem d (from base center to midpoint of front edge) ---
    ctx.strokeStyle = '#fbbf24';
    ctx.lineWidth = 2;
    ctx.setLineDash([5, 3]);
    ctx.beginPath();
    ctx.moveTo(baseCenter.x, baseCenter.y);
    ctx.lineTo(midFront.x, midFront.y);
    ctx.stroke();
    ctx.setLineDash([]);

    // d label
    const dLabelX = (baseCenter.x + midFront.x) / 2;
    const dLabelY = (baseCenter.y + midFront.y) / 2 + 18;
    ctx.fillStyle = '#fbbf24';
    ctx.font = 'bold 13px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('a/2 = 8', dLabelX, dLabelY);

    // --- Base edge label ---
    const edgeLabelX = (baseCorners[0].x + baseCorners[3].x) / 2;
    const edgeLabelY = (baseCorners[0].y + baseCorners[3].y) / 2 + 22;
    ctx.fillStyle = '#94a3b8';
    ctx.font = 'bold 13px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('a = 16', edgeLabelX, edgeLabelY);

    // --- Points ---
    function drawPoint(p, color, label, offsetX, offsetY) {
      ctx.beginPath();
      ctx.arc(p.x, p.y, 5, 0, Math.PI * 2);
      ctx.fillStyle = color;
      ctx.fill();
      ctx.strokeStyle = '#fff';
      ctx.lineWidth = 1.5;
      ctx.stroke();

      ctx.fillStyle = color;
      ctx.font = 'bold 13px Segoe UI, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText(label, p.x + offsetX, p.y + offsetY);
    }

    drawPoint(apex, '#e2e8f0', 'V (vrh)', 0, -14);
    drawPoint(baseCenter, '#4ade80', 'O (centar)', 22, 16);
    drawPoint(midFront, '#f472b6', 'M', -14, 14);

    // --- Right triangle diagram (inset) ---
    const triX = W * 0.72;
    const triY = H * 0.72;
    const triW = Math.min(W * 0.24, 160);
    const triH = triW * 1.2;

    // Background for inset
    ctx.fillStyle = 'rgba(15, 23, 42, 0.85)';
    ctx.strokeStyle = '#334155';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.roundRect(triX - 15, triY - 35, triW + 50, triH + 60, 8);
    ctx.fill();
    ctx.stroke();

    // Inset title
    ctx.fillStyle = '#94a3b8';
    ctx.font = '12px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Pravougli trougao', triX + triW / 2 + 10, triY - 18);

    // Triangle vertices
    const tA = { x: triX + 10, y: triY };            // top (apex projection)
    const tB = { x: triX + 10, y: triY + triH };     // bottom-left (base center)
    const tC = { x: triX + 10 + triW * 0.6, y: triY + triH }; // bottom-right (mid-edge)

    // Triangle fill
    ctx.fillStyle = 'rgba(96, 165, 250, 0.1)';
    ctx.beginPath();
    ctx.moveTo(tA.x, tA.y);
    ctx.lineTo(tB.x, tB.y);
    ctx.lineTo(tC.x, tC.y);
    ctx.closePath();
    ctx.fill();

    // Triangle edges
    // H (vertical)
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(tA.x, tA.y);
    ctx.lineTo(tB.x, tB.y);
    ctx.stroke();

    // d (horizontal)
    ctx.strokeStyle = '#fbbf24';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(tB.x, tB.y);
    ctx.lineTo(tC.x, tC.y);
    ctx.stroke();

    // l (hypotenuse)
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 2.5;
    ctx.beginPath();
    ctx.moveTo(tA.x, tA.y);
    ctx.lineTo(tC.x, tC.y);
    ctx.stroke();

    // Right angle mark
    const ra = 10;
    ctx.strokeStyle = '#64748b';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(tB.x + ra, tB.y);
    ctx.lineTo(tB.x + ra, tB.y - ra);
    ctx.lineTo(tB.x, tB.y - ra);
    ctx.stroke();

    // Labels for inset triangle
    ctx.font = 'bold 13px Segoe UI, sans-serif';
    ctx.textAlign = 'right';
    ctx.fillStyle = '#4ade80';
    ctx.fillText('H=15', tA.x - 6, (tA.y + tB.y) / 2 + 4);

    ctx.textAlign = 'center';
    ctx.fillStyle = '#fbbf24';
    ctx.fillText('d=8', (tB.x + tC.x) / 2, tB.y + 18);

    ctx.fillStyle = '#f472b6';
    const lmx = (tA.x + tC.x) / 2 + 16;
    const lmy = (tA.y + tC.y) / 2 - 6;
    ctx.fillText('l=17', lmx, lmy);

    // Title
    ctx.fillStyle = '#94a3b8';
    ctx.font = '14px Segoe UI, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Pravilna cetvorostrana piramida: a = 16, H = 15, l = 17', W / 2, H - 16);

    // Pythagorean equation
    ctx.fillStyle = '#60a5fa';
    ctx.font = '13px Segoe UI, sans-serif';
    ctx.fillText('l\u00B2 = H\u00B2 + (a/2)\u00B2  \u2192  17\u00B2 = 15\u00B2 + 8\u00B2  \u2192  289 = 289 \u2713', W / 2, H - 40);
  }

  resizeCanvas();
  window.addEventListener('resize', resizeCanvas);
})();
</script>
</body>
</html>
<!--BRAINSPARK_META
{
  "title": "Zapremina pravilne cetvorostrane piramide",
  "subject": "math",
  "unit": "stereometrija",
  "topic_tags": ["pravilna piramida", "cetvorostrana piramida", "zapremina", "bocna visina", "Pitagorina teorema", "stereometrija"]
}
BRAINSPARK_META-->